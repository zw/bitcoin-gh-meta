[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r142243684"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/142243684"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Can we rename this variable `keys_or_addresses` (and the same in `addmultisigaddress`) so it's clear that these could be keys or addresses.",
      "commit_id" : "9e69c4ff98c0ed0f1af022d4d708e82f6910ce52",
      "created_at" : "2017-10-02T20:18:36Z",
      "diff_hunk" : "@@ -301,16 +284,37 @@ UniValue createmultisig(const JSONRPCRequest& request)\n             \"}\\n\"\n \n             \"\\nExamples:\\n\"\n-            \"\\nCreate a multisig address from 2 addresses\\n\"\n-            + HelpExampleCli(\"createmultisig\", \"2 \\\"[\\\\\\\"16sSauSf5pF2UkUwvKGq4qjNRzBZYqgEL5\\\\\\\",\\\\\\\"171sgjn4YtPu27adkKGrdDwzRTxnRkBfKV\\\\\\\"]\\\"\") +\n+            \"\\nCreate a multisig address from 2 public keys\\n\"\n+            + HelpExampleCli(\"createmultisig\", \"2 \\\"[\\\\\\\"03789ed0bb717d88f7d321a368d905e7430207ebbd82bd342cf11ae157a7ace5fd\\\\\\\",\\\\\\\"03dbc6764b8884a92e871274b87583e6d5c2a58819473e17e107ef3f6aa5a61626\\\\\\\"]\\\"\") +\n             \"\\nAs a json rpc call\\n\"\n-            + HelpExampleRpc(\"createmultisig\", \"2, \\\"[\\\\\\\"16sSauSf5pF2UkUwvKGq4qjNRzBZYqgEL5\\\\\\\",\\\\\\\"171sgjn4YtPu27adkKGrdDwzRTxnRkBfKV\\\\\\\"]\\\"\")\n+            + HelpExampleRpc(\"createmultisig\", \"2, \\\"[\\\\\\\"03789ed0bb717d88f7d321a368d905e7430207ebbd82bd342cf11ae157a7ace5fd\\\\\\\",\\\\\\\"03dbc6764b8884a92e871274b87583e6d5c2a58819473e17e107ef3f6aa5a61626\\\\\\\"]\\\"\")\n         ;\n         throw std::runtime_error(msg);\n     }\n \n+    int required = request.params[0].get_int();\n+\n+    // Get the public keys\n+    const UniValue& keys = request.params[1].get_array();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r142243684",
      "id" : 142243684,
      "original_commit_id" : "eb95b57eb9f7707ae8e112c8a82bae8991eabcb9",
      "original_position" : 140,
      "path" : "src/rpc/misc.cpp",
      "position" : 121,
      "pull_request_review_id" : 66577958,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415",
      "updated_at" : "2017-12-23T01:01:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/142243684",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> I don't love the `only_pubkeys` argument in `_createmultisig_getpubkeys()`. \r\n\r\nI don't really either. I was trying to avoid as much code duplication as possible, but I guess that can't really be avoided.\r\n\r\n> I'm also not a huge fan of passing the address/keys in as a UniValue reference. Is it possible to change `_createmultisig_getpubkeys()` and `_createmultisig_getaddr_pubkeys()` to both take a single string and return a single `CPubKey`? You could then do the iteration over the `UniValue keys_in` outside of the function.\r\n\r\nI'll try doing that.\r\n\r\n> but `addmultisigaddress` calls them the other way round. Is there a reason for that?\r\n\r\nNope.\r\n\r\n> it seems a little gratuitous to change the return type of `addmultisigaddress` (especially without hiding it behind a `-deprecatedrpc` argument). What was the reasoning for that? To not break the tests?\r\n\r\nThat was mostly to not break tests and also because I felt that `addmultisigaddress` should be the wallet version mirror of `createmultisig` so they both should have the same output. I suppose the original behavior could be hidden behind a `-deprecatedrpc` argument but I'm not sure how useful that is. The same information (and more) is being returned.",
      "created_at" : "2017-10-02T20:40:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11415#issuecomment-333658263",
      "id" : 333658263,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11415",
      "updated_at" : "2017-10-02T20:40:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/333658263",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : ">  the original behavior could be hidden behind a -deprecatedrpc argument but I'm not sure how useful that is.\r\n\r\nThe only reason would be to not break clients that are expecting a string and now receive a JSON object when they upgrade to v0.16. Hiding behind the `-deprecatedrpc` argument give them breathing space to upgrade the client.\r\n\r\nI don't know if this would really be a problem for users, but worth considering.",
      "created_at" : "2017-10-02T20:53:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11415#issuecomment-333661952",
      "id" : 333661952,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11415",
      "updated_at" : "2017-10-02T20:53:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/333661952",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "The latest commit changes the loop to happen in the RPC call body and changes the two helper functions to take a single pubkey and string instead of vectors and UniValue. I have also put the old `addmultisigaddress` behavior behind `-deprecatedrpc`.",
      "created_at" : "2017-10-02T23:11:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11415#issuecomment-333691062",
      "id" : 333691062,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11415",
      "updated_at" : "2017-10-02T23:11:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/333691062",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r142283676"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/142283676"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Put inside a block?\r\n```cpp\r\n    } else {\r\n#else\r\n    {\r\n#endif\r\n        _createmultisig_hex_to_pubkey(pubkeys.at(i), keys[i].get_str());\r\n    }\r\n```",
      "commit_id" : "9e69c4ff98c0ed0f1af022d4d708e82f6910ce52",
      "created_at" : "2017-10-02T23:45:41Z",
      "diff_hunk" : "@@ -301,16 +275,41 @@ UniValue createmultisig(const JSONRPCRequest& request)\n             \"}\\n\"\n \n             \"\\nExamples:\\n\"\n-            \"\\nCreate a multisig address from 2 addresses\\n\"\n-            + HelpExampleCli(\"createmultisig\", \"2 \\\"[\\\\\\\"16sSauSf5pF2UkUwvKGq4qjNRzBZYqgEL5\\\\\\\",\\\\\\\"171sgjn4YtPu27adkKGrdDwzRTxnRkBfKV\\\\\\\"]\\\"\") +\n+            \"\\nCreate a multisig address from 2 public keys\\n\"\n+            + HelpExampleCli(\"createmultisig\", \"2 \\\"[\\\\\\\"03789ed0bb717d88f7d321a368d905e7430207ebbd82bd342cf11ae157a7ace5fd\\\\\\\",\\\\\\\"03dbc6764b8884a92e871274b87583e6d5c2a58819473e17e107ef3f6aa5a61626\\\\\\\"]\\\"\") +\n             \"\\nAs a json rpc call\\n\"\n-            + HelpExampleRpc(\"createmultisig\", \"2, \\\"[\\\\\\\"16sSauSf5pF2UkUwvKGq4qjNRzBZYqgEL5\\\\\\\",\\\\\\\"171sgjn4YtPu27adkKGrdDwzRTxnRkBfKV\\\\\\\"]\\\"\")\n+            + HelpExampleRpc(\"createmultisig\", \"2, \\\"[\\\\\\\"03789ed0bb717d88f7d321a368d905e7430207ebbd82bd342cf11ae157a7ace5fd\\\\\\\",\\\\\\\"03dbc6764b8884a92e871274b87583e6d5c2a58819473e17e107ef3f6aa5a61626\\\\\\\"]\\\"\")\n         ;\n         throw std::runtime_error(msg);\n     }\n \n+    int required = request.params[0].get_int();\n+\n+    // Get the public keys\n+    const UniValue& keys = request.params[1].get_array();\n+    std::vector<CPubKey> pubkeys;\n+    pubkeys.resize(keys.size());\n+    for (unsigned int i = 0; i < keys.size(); ++i) {\n+#ifdef ENABLE_WALLET\n+        if (IsDeprecatedRPCEnabled(\"createmultisig\")) {\n+            CWallet* const pwallet = GetWalletForJSONRPCRequest(request);\n+            if (!EnsureWalletIsAvailable(pwallet, request.fHelp)) {\n+                return NullUniValue;\n+            }\n+            if (pwallet) {\n+                _createmultisig_addr_to_pubkey(pwallet, pubkeys.at(i), keys[i].get_str());\n+            }\n+            _createmultisig_hex_to_pubkey(pubkeys.at(i), keys[i].get_str());\n+        } else\n+#endif\n+        _createmultisig_hex_to_pubkey(pubkeys.at(i), keys[i].get_str());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r142283676",
      "id" : 142283676,
      "original_commit_id" : "a324a928f291883f48399500a9da8d7f98c98d1c",
      "original_position" : 154,
      "path" : "src/rpc/misc.cpp",
      "position" : null,
      "pull_request_review_id" : 66623298,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415",
      "updated_at" : "2017-12-23T01:01:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/142283676",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r142514601"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/142514601"
         }
      },
      "author_association" : "MEMBER",
      "body" : "This can be made simpler:\r\n\r\n```\r\n    if (IsDeprecatedRPCEnabled(\"addmultisigaddress\")) {\r\n        // Old-style interface: just return the address\r\n        return EncodeDestination(innerID);\r\n    }\r\n\r\n    // return an object containing the address and redeem script\r\n    UniValue result(UniValue::VOBJ);\r\n    result.pushKV(\"address\", EncodeDestination(innerID));\r\n    result.pushKV(\"redeemScript\", HexStr(inner.begin(), inner.end()));\r\n    return result;\r\n```",
      "commit_id" : "9e69c4ff98c0ed0f1af022d4d708e82f6910ce52",
      "created_at" : "2017-10-03T20:33:25Z",
      "diff_hunk" : "@@ -1141,13 +1167,35 @@ UniValue addmultisigaddress(const JSONRPCRequest& request)\n     if (!request.params[2].isNull())\n         strAccount = AccountFromValue(request.params[2]);\n \n+    int required = request.params[0].get_int();\n+\n+    // Get the public keys\n+    const UniValue& keys = request.params[1].get_array();\n+    std::vector<CPubKey> pubkeys;\n+    pubkeys.resize(keys.size());\n+    for (unsigned int i = 0; i < keys.size(); ++i) {\n+        _createmultisig_addr_to_pubkey(pwallet, pubkeys.at(i), keys[i].get_str());\n+        _createmultisig_hex_to_pubkey(pubkeys.at(i), keys[i].get_str());\n+        if (!pubkeys.at(i).IsFullyValid()) {\n+            throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Invalid public key: \" + keys[i].get_str());\n+        }\n+    }\n+\n     // Construct using pay-to-script-hash:\n-    CScript inner = _createmultisig_redeemScript(pwallet, request.params);\n+    CScript inner = _createmultisig_redeemScript(required, pubkeys);\n     CScriptID innerID(inner);\n     pwallet->AddCScript(inner);\n \n     pwallet->SetAddressBook(innerID, strAccount, \"send\");\n-    return EncodeDestination(innerID);\n+\n+    UniValue result(UniValue::VOBJ);\n+    if (IsDeprecatedRPCEnabled(\"addmultisigaddress\")) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r142514601",
      "id" : 142514601,
      "original_commit_id" : "a169f17434b9d96de478a6641e6a087be97631e8",
      "original_position" : 85,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 66888337,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415",
      "updated_at" : "2017-12-23T01:01:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/142514601",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r142514964"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/142514964"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Suggestion: name this variable `keys_or_addresses`",
      "commit_id" : "9e69c4ff98c0ed0f1af022d4d708e82f6910ce52",
      "created_at" : "2017-10-03T20:34:44Z",
      "diff_hunk" : "@@ -1141,13 +1167,35 @@ UniValue addmultisigaddress(const JSONRPCRequest& request)\n     if (!request.params[2].isNull())\n         strAccount = AccountFromValue(request.params[2]);\n \n+    int required = request.params[0].get_int();\n+\n+    // Get the public keys\n+    const UniValue& keys = request.params[1].get_array();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r142514964",
      "id" : 142514964,
      "original_commit_id" : "a169f17434b9d96de478a6641e6a087be97631e8",
      "original_position" : 64,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 66888337,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415",
      "updated_at" : "2017-12-23T01:01:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/142514964",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r142517063"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/142517063"
         }
      },
      "author_association" : "MEMBER",
      "body" : "There's an implicit assumption here that if `ENABLE_WALLET` is true then there will necessarily be a wallet available. That may be broken by dynamic wallet load/unload. If we allow the wallet to be unloaded then this rpc will stop working.\r\n\r\nThe else statement is also unnecessary (once we reach line 302, then both branches converge to calling `_createmultisig_hex_to_pubkey()`).\r\n\r\nHow about:\r\n\r\n```\r\n#ifdef ENABLE_WALLET\r\n        CWallet* const pwallet = GetWalletForJSONRPCRequest(request);\r\n        if (IsDeprecatedRPCEnabled(\"createmultisig\") &&\r\n            EnsureWalletIsAvailable(pwallet, request.fHelp) &&\r\n            pwallet) {\r\n            _createmultisig_addr_to_pubkey(pwallet, pubkeys.at(i), keys[i].get_str());\r\n        }\r\n#endif\r\n```",
      "commit_id" : "9e69c4ff98c0ed0f1af022d4d708e82f6910ce52",
      "created_at" : "2017-10-03T20:42:40Z",
      "diff_hunk" : "@@ -301,16 +275,41 @@ UniValue createmultisig(const JSONRPCRequest& request)\n             \"}\\n\"\n \n             \"\\nExamples:\\n\"\n-            \"\\nCreate a multisig address from 2 addresses\\n\"\n-            + HelpExampleCli(\"createmultisig\", \"2 \\\"[\\\\\\\"16sSauSf5pF2UkUwvKGq4qjNRzBZYqgEL5\\\\\\\",\\\\\\\"171sgjn4YtPu27adkKGrdDwzRTxnRkBfKV\\\\\\\"]\\\"\") +\n+            \"\\nCreate a multisig address from 2 public keys\\n\"\n+            + HelpExampleCli(\"createmultisig\", \"2 \\\"[\\\\\\\"03789ed0bb717d88f7d321a368d905e7430207ebbd82bd342cf11ae157a7ace5fd\\\\\\\",\\\\\\\"03dbc6764b8884a92e871274b87583e6d5c2a58819473e17e107ef3f6aa5a61626\\\\\\\"]\\\"\") +\n             \"\\nAs a json rpc call\\n\"\n-            + HelpExampleRpc(\"createmultisig\", \"2, \\\"[\\\\\\\"16sSauSf5pF2UkUwvKGq4qjNRzBZYqgEL5\\\\\\\",\\\\\\\"171sgjn4YtPu27adkKGrdDwzRTxnRkBfKV\\\\\\\"]\\\"\")\n+            + HelpExampleRpc(\"createmultisig\", \"2, \\\"[\\\\\\\"03789ed0bb717d88f7d321a368d905e7430207ebbd82bd342cf11ae157a7ace5fd\\\\\\\",\\\\\\\"03dbc6764b8884a92e871274b87583e6d5c2a58819473e17e107ef3f6aa5a61626\\\\\\\"]\\\"\")\n         ;\n         throw std::runtime_error(msg);\n     }\n \n+    int required = request.params[0].get_int();\n+\n+    // Get the public keys\n+    const UniValue& keys = request.params[1].get_array();\n+    std::vector<CPubKey> pubkeys;\n+    pubkeys.resize(keys.size());\n+    for (unsigned int i = 0; i < keys.size(); ++i) {\n+#ifdef ENABLE_WALLET\n+        if (IsDeprecatedRPCEnabled(\"createmultisig\")) {\n+            CWallet* const pwallet = GetWalletForJSONRPCRequest(request);\n+            if (!EnsureWalletIsAvailable(pwallet, request.fHelp)) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r142517063",
      "id" : 142517063,
      "original_commit_id" : "a169f17434b9d96de478a6641e6a087be97631e8",
      "original_position" : 145,
      "path" : "src/rpc/misc.cpp",
      "position" : null,
      "pull_request_review_id" : 66888337,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415",
      "updated_at" : "2017-12-23T01:01:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/142517063",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r142517121"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/142517121"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I think the else branch is unnecessary here. See comment above.",
      "commit_id" : "9e69c4ff98c0ed0f1af022d4d708e82f6910ce52",
      "created_at" : "2017-10-03T20:42:56Z",
      "diff_hunk" : "@@ -301,16 +275,41 @@ UniValue createmultisig(const JSONRPCRequest& request)\n             \"}\\n\"\n \n             \"\\nExamples:\\n\"\n-            \"\\nCreate a multisig address from 2 addresses\\n\"\n-            + HelpExampleCli(\"createmultisig\", \"2 \\\"[\\\\\\\"16sSauSf5pF2UkUwvKGq4qjNRzBZYqgEL5\\\\\\\",\\\\\\\"171sgjn4YtPu27adkKGrdDwzRTxnRkBfKV\\\\\\\"]\\\"\") +\n+            \"\\nCreate a multisig address from 2 public keys\\n\"\n+            + HelpExampleCli(\"createmultisig\", \"2 \\\"[\\\\\\\"03789ed0bb717d88f7d321a368d905e7430207ebbd82bd342cf11ae157a7ace5fd\\\\\\\",\\\\\\\"03dbc6764b8884a92e871274b87583e6d5c2a58819473e17e107ef3f6aa5a61626\\\\\\\"]\\\"\") +\n             \"\\nAs a json rpc call\\n\"\n-            + HelpExampleRpc(\"createmultisig\", \"2, \\\"[\\\\\\\"16sSauSf5pF2UkUwvKGq4qjNRzBZYqgEL5\\\\\\\",\\\\\\\"171sgjn4YtPu27adkKGrdDwzRTxnRkBfKV\\\\\\\"]\\\"\")\n+            + HelpExampleRpc(\"createmultisig\", \"2, \\\"[\\\\\\\"03789ed0bb717d88f7d321a368d905e7430207ebbd82bd342cf11ae157a7ace5fd\\\\\\\",\\\\\\\"03dbc6764b8884a92e871274b87583e6d5c2a58819473e17e107ef3f6aa5a61626\\\\\\\"]\\\"\")\n         ;\n         throw std::runtime_error(msg);\n     }\n \n+    int required = request.params[0].get_int();\n+\n+    // Get the public keys\n+    const UniValue& keys = request.params[1].get_array();\n+    std::vector<CPubKey> pubkeys;\n+    pubkeys.resize(keys.size());\n+    for (unsigned int i = 0; i < keys.size(); ++i) {\n+#ifdef ENABLE_WALLET\n+        if (IsDeprecatedRPCEnabled(\"createmultisig\")) {\n+            CWallet* const pwallet = GetWalletForJSONRPCRequest(request);\n+            if (!EnsureWalletIsAvailable(pwallet, request.fHelp)) {\n+                return NullUniValue;\n+            }\n+            if (pwallet) {\n+                _createmultisig_addr_to_pubkey(pwallet, pubkeys.at(i), keys[i].get_str());\n+            }\n+            _createmultisig_hex_to_pubkey(pubkeys.at(i), keys[i].get_str());\n+        } else\n+#endif\n+        _createmultisig_hex_to_pubkey(pubkeys.at(i), keys[i].get_str());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r142517121",
      "id" : 142517121,
      "in_reply_to_id" : 142283676,
      "original_commit_id" : "a324a928f291883f48399500a9da8d7f98c98d1c",
      "original_position" : 154,
      "path" : "src/rpc/misc.cpp",
      "position" : null,
      "pull_request_review_id" : 66888337,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415",
      "updated_at" : "2017-12-23T01:01:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/142517121",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r142517234"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/142517234"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Can you replace these errors with better JSON errors?",
      "commit_id" : "9e69c4ff98c0ed0f1af022d4d708e82f6910ce52",
      "created_at" : "2017-10-03T20:43:22Z",
      "diff_hunk" : "@@ -212,85 +212,59 @@ class CWallet;\n /**\n  * Used by addmultisigaddress / createmultisig:\n  */\n-CScript _createmultisig_redeemScript(CWallet * const pwallet, const UniValue& params)\n-{\n-    int nRequired = params[0].get_int();\n-    const UniValue& keys = params[1].get_array();\n+#ifdef ENABLE_WALLET\n+extern void _createmultisig_addr_to_pubkey(CWallet* const pwallet, CPubKey& pubkey_out, const std::string& addr_in);\n+#endif\n \n-    // Gather public keys\n-    if (nRequired < 1)\n-        throw std::runtime_error(\"a multisignature address must require at least one key to redeem\");\n-    if ((int)keys.size() < nRequired)\n-        throw std::runtime_error(\n-            strprintf(\"not enough keys supplied \"\n-                      \"(got %u keys, but need at least %d to redeem)\", keys.size(), nRequired));\n-    if (keys.size() > 16)\n-        throw std::runtime_error(\"Number of addresses involved in the multisignature address creation > 16\\nReduce the number\");\n-    std::vector<CPubKey> pubkeys;\n-    pubkeys.resize(keys.size());\n-    for (unsigned int i = 0; i < keys.size(); i++)\n+void _createmultisig_hex_to_pubkey(CPubKey& pubkey_out, const std::string& hex_in)\n+{\n+    if (IsHex(hex_in))\n     {\n-        const std::string& ks = keys[i].get_str();\n-#ifdef ENABLE_WALLET\n-        // Case 1: Bitcoin address and we have full public key:\n-        CTxDestination dest = DecodeDestination(ks);\n-        if (pwallet && IsValidDestination(dest)) {\n-            const CKeyID *keyID = boost::get<CKeyID>(&dest);\n-            if (!keyID) {\n-                throw std::runtime_error(strprintf(\"%s does not refer to a key\", ks));\n-            }\n-            CPubKey vchPubKey;\n-            if (!pwallet->GetPubKey(*keyID, vchPubKey)) {\n-                throw std::runtime_error(strprintf(\"no full public key for address %s\", ks));\n-            }\n-            if (!vchPubKey.IsFullyValid())\n-                throw std::runtime_error(\" Invalid public key: \"+ks);\n-            pubkeys[i] = vchPubKey;\n+        CPubKey vchPubKey(ParseHex(hex_in));\n+        if (!vchPubKey.IsFullyValid()) {\n+            throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Invalid public key: \" + hex_in);\n         }\n+        pubkey_out = vchPubKey;\n+    }\n+}\n \n-        // Case 2: hex public key\n-        else\n-#endif\n-        if (IsHex(ks))\n-        {\n-            CPubKey vchPubKey(ParseHex(ks));\n-            if (!vchPubKey.IsFullyValid())\n-                throw std::runtime_error(\" Invalid public key: \"+ks);\n-            pubkeys[i] = vchPubKey;\n-        }\n-        else\n-        {\n-            throw std::runtime_error(\" Invalid public key: \"+ks);\n-        }\n+CScript _createmultisig_redeemScript(const int required, const std::vector<CPubKey>& pubkeys)\n+{\n+    // Gather public keys\n+    if (required < 1) {\n+        throw std::runtime_error(\"a multisignature address must require at least one key to redeem\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r142517234",
      "id" : 142517234,
      "original_commit_id" : "a169f17434b9d96de478a6641e6a087be97631e8",
      "original_position" : 70,
      "path" : "src/rpc/misc.cpp",
      "position" : null,
      "pull_request_review_id" : 66888337,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415",
      "updated_at" : "2017-12-23T01:01:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/142517234",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r142517851"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/142517851"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Perhaps add a note into the error text here: \"Note that from V0.16, createmultisig no longer accepts addresses. Clients must transition to using addmultisigaddress to create multisig addresses with addresses known to the wallet before upgrading to v0.17. To use the deprecated functionality, start bitcoind with -deprecatedrpc=createmultisig\"\r\n\r\nThis is the error that clients will hit if they're relying on old behaviour, so the error message should be delivered here.",
      "commit_id" : "9e69c4ff98c0ed0f1af022d4d708e82f6910ce52",
      "created_at" : "2017-10-03T20:45:47Z",
      "diff_hunk" : "@@ -301,16 +275,41 @@ UniValue createmultisig(const JSONRPCRequest& request)\n             \"}\\n\"\n \n             \"\\nExamples:\\n\"\n-            \"\\nCreate a multisig address from 2 addresses\\n\"\n-            + HelpExampleCli(\"createmultisig\", \"2 \\\"[\\\\\\\"16sSauSf5pF2UkUwvKGq4qjNRzBZYqgEL5\\\\\\\",\\\\\\\"171sgjn4YtPu27adkKGrdDwzRTxnRkBfKV\\\\\\\"]\\\"\") +\n+            \"\\nCreate a multisig address from 2 public keys\\n\"\n+            + HelpExampleCli(\"createmultisig\", \"2 \\\"[\\\\\\\"03789ed0bb717d88f7d321a368d905e7430207ebbd82bd342cf11ae157a7ace5fd\\\\\\\",\\\\\\\"03dbc6764b8884a92e871274b87583e6d5c2a58819473e17e107ef3f6aa5a61626\\\\\\\"]\\\"\") +\n             \"\\nAs a json rpc call\\n\"\n-            + HelpExampleRpc(\"createmultisig\", \"2, \\\"[\\\\\\\"16sSauSf5pF2UkUwvKGq4qjNRzBZYqgEL5\\\\\\\",\\\\\\\"171sgjn4YtPu27adkKGrdDwzRTxnRkBfKV\\\\\\\"]\\\"\")\n+            + HelpExampleRpc(\"createmultisig\", \"2, \\\"[\\\\\\\"03789ed0bb717d88f7d321a368d905e7430207ebbd82bd342cf11ae157a7ace5fd\\\\\\\",\\\\\\\"03dbc6764b8884a92e871274b87583e6d5c2a58819473e17e107ef3f6aa5a61626\\\\\\\"]\\\"\")\n         ;\n         throw std::runtime_error(msg);\n     }\n \n+    int required = request.params[0].get_int();\n+\n+    // Get the public keys\n+    const UniValue& keys = request.params[1].get_array();\n+    std::vector<CPubKey> pubkeys;\n+    pubkeys.resize(keys.size());\n+    for (unsigned int i = 0; i < keys.size(); ++i) {\n+#ifdef ENABLE_WALLET\n+        if (IsDeprecatedRPCEnabled(\"createmultisig\")) {\n+            CWallet* const pwallet = GetWalletForJSONRPCRequest(request);\n+            if (!EnsureWalletIsAvailable(pwallet, request.fHelp)) {\n+                return NullUniValue;\n+            }\n+            if (pwallet) {\n+                _createmultisig_addr_to_pubkey(pwallet, pubkeys.at(i), keys[i].get_str());\n+            }\n+            _createmultisig_hex_to_pubkey(pubkeys.at(i), keys[i].get_str());\n+        } else\n+#endif\n+        _createmultisig_hex_to_pubkey(pubkeys.at(i), keys[i].get_str());\n+        if (!pubkeys.at(i).IsFullyValid()) {\n+            throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Invalid public key: \" + keys[i].get_str());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r142517851",
      "id" : 142517851,
      "original_commit_id" : "a169f17434b9d96de478a6641e6a087be97631e8",
      "original_position" : 156,
      "path" : "src/rpc/misc.cpp",
      "position" : null,
      "pull_request_review_id" : 66888337,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415",
      "updated_at" : "2017-12-23T01:01:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/142517851",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK. API change, added the \"Needs release notes\" tag.",
      "created_at" : "2017-10-04T05:32:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11415#issuecomment-334054124",
      "id" : 334054124,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11415",
      "updated_at" : "2017-10-04T05:32:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/334054124",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/178464?v=4",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r142593513"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/142593513"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Agree.",
      "commit_id" : "9e69c4ff98c0ed0f1af022d4d708e82f6910ce52",
      "created_at" : "2017-10-04T07:00:41Z",
      "diff_hunk" : "@@ -212,85 +212,59 @@ class CWallet;\n /**\n  * Used by addmultisigaddress / createmultisig:\n  */\n-CScript _createmultisig_redeemScript(CWallet * const pwallet, const UniValue& params)\n-{\n-    int nRequired = params[0].get_int();\n-    const UniValue& keys = params[1].get_array();\n+#ifdef ENABLE_WALLET\n+extern void _createmultisig_addr_to_pubkey(CWallet* const pwallet, CPubKey& pubkey_out, const std::string& addr_in);\n+#endif\n \n-    // Gather public keys\n-    if (nRequired < 1)\n-        throw std::runtime_error(\"a multisignature address must require at least one key to redeem\");\n-    if ((int)keys.size() < nRequired)\n-        throw std::runtime_error(\n-            strprintf(\"not enough keys supplied \"\n-                      \"(got %u keys, but need at least %d to redeem)\", keys.size(), nRequired));\n-    if (keys.size() > 16)\n-        throw std::runtime_error(\"Number of addresses involved in the multisignature address creation > 16\\nReduce the number\");\n-    std::vector<CPubKey> pubkeys;\n-    pubkeys.resize(keys.size());\n-    for (unsigned int i = 0; i < keys.size(); i++)\n+void _createmultisig_hex_to_pubkey(CPubKey& pubkey_out, const std::string& hex_in)\n+{\n+    if (IsHex(hex_in))\n     {\n-        const std::string& ks = keys[i].get_str();\n-#ifdef ENABLE_WALLET\n-        // Case 1: Bitcoin address and we have full public key:\n-        CTxDestination dest = DecodeDestination(ks);\n-        if (pwallet && IsValidDestination(dest)) {\n-            const CKeyID *keyID = boost::get<CKeyID>(&dest);\n-            if (!keyID) {\n-                throw std::runtime_error(strprintf(\"%s does not refer to a key\", ks));\n-            }\n-            CPubKey vchPubKey;\n-            if (!pwallet->GetPubKey(*keyID, vchPubKey)) {\n-                throw std::runtime_error(strprintf(\"no full public key for address %s\", ks));\n-            }\n-            if (!vchPubKey.IsFullyValid())\n-                throw std::runtime_error(\" Invalid public key: \"+ks);\n-            pubkeys[i] = vchPubKey;\n+        CPubKey vchPubKey(ParseHex(hex_in));\n+        if (!vchPubKey.IsFullyValid()) {\n+            throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Invalid public key: \" + hex_in);\n         }\n+        pubkey_out = vchPubKey;\n+    }\n+}\n \n-        // Case 2: hex public key\n-        else\n-#endif\n-        if (IsHex(ks))\n-        {\n-            CPubKey vchPubKey(ParseHex(ks));\n-            if (!vchPubKey.IsFullyValid())\n-                throw std::runtime_error(\" Invalid public key: \"+ks);\n-            pubkeys[i] = vchPubKey;\n-        }\n-        else\n-        {\n-            throw std::runtime_error(\" Invalid public key: \"+ks);\n-        }\n+CScript _createmultisig_redeemScript(const int required, const std::vector<CPubKey>& pubkeys)\n+{\n+    // Gather public keys\n+    if (required < 1) {\n+        throw std::runtime_error(\"a multisignature address must require at least one key to redeem\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r142593513",
      "id" : 142593513,
      "in_reply_to_id" : 142517234,
      "original_commit_id" : "a169f17434b9d96de478a6641e6a087be97631e8",
      "original_position" : 70,
      "path" : "src/rpc/misc.cpp",
      "position" : null,
      "pull_request_review_id" : 66974069,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415",
      "updated_at" : "2017-12-23T01:01:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/142593513",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r142593730"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/142593730"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Should have tests for these `JSONRPCError`.",
      "commit_id" : "9e69c4ff98c0ed0f1af022d4d708e82f6910ce52",
      "created_at" : "2017-10-04T07:02:30Z",
      "diff_hunk" : "@@ -212,85 +212,59 @@ class CWallet;\n /**\n  * Used by addmultisigaddress / createmultisig:\n  */\n-CScript _createmultisig_redeemScript(CWallet * const pwallet, const UniValue& params)\n-{\n-    int nRequired = params[0].get_int();\n-    const UniValue& keys = params[1].get_array();\n+#ifdef ENABLE_WALLET\n+extern void _createmultisig_addr_to_pubkey(CWallet* const pwallet, CPubKey& pubkey_out, const std::string& addr_in);\n+#endif\n \n-    // Gather public keys\n-    if (nRequired < 1)\n-        throw std::runtime_error(\"a multisignature address must require at least one key to redeem\");\n-    if ((int)keys.size() < nRequired)\n-        throw std::runtime_error(\n-            strprintf(\"not enough keys supplied \"\n-                      \"(got %u keys, but need at least %d to redeem)\", keys.size(), nRequired));\n-    if (keys.size() > 16)\n-        throw std::runtime_error(\"Number of addresses involved in the multisignature address creation > 16\\nReduce the number\");\n-    std::vector<CPubKey> pubkeys;\n-    pubkeys.resize(keys.size());\n-    for (unsigned int i = 0; i < keys.size(); i++)\n+void _createmultisig_hex_to_pubkey(CPubKey& pubkey_out, const std::string& hex_in)\n+{\n+    if (IsHex(hex_in))\n     {\n-        const std::string& ks = keys[i].get_str();\n-#ifdef ENABLE_WALLET\n-        // Case 1: Bitcoin address and we have full public key:\n-        CTxDestination dest = DecodeDestination(ks);\n-        if (pwallet && IsValidDestination(dest)) {\n-            const CKeyID *keyID = boost::get<CKeyID>(&dest);\n-            if (!keyID) {\n-                throw std::runtime_error(strprintf(\"%s does not refer to a key\", ks));\n-            }\n-            CPubKey vchPubKey;\n-            if (!pwallet->GetPubKey(*keyID, vchPubKey)) {\n-                throw std::runtime_error(strprintf(\"no full public key for address %s\", ks));\n-            }\n-            if (!vchPubKey.IsFullyValid())\n-                throw std::runtime_error(\" Invalid public key: \"+ks);\n-            pubkeys[i] = vchPubKey;\n+        CPubKey vchPubKey(ParseHex(hex_in));\n+        if (!vchPubKey.IsFullyValid()) {\n+            throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Invalid public key: \" + hex_in);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r142593730",
      "id" : 142593730,
      "original_commit_id" : "a169f17434b9d96de478a6641e6a087be97631e8",
      "original_position" : 46,
      "path" : "src/rpc/misc.cpp",
      "position" : null,
      "pull_request_review_id" : 66974309,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415",
      "updated_at" : "2017-12-23T01:01:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/142593730",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r142991034"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/142991034"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Removed the `else` branch.",
      "commit_id" : "9e69c4ff98c0ed0f1af022d4d708e82f6910ce52",
      "created_at" : "2017-10-05T16:36:03Z",
      "diff_hunk" : "@@ -301,16 +275,41 @@ UniValue createmultisig(const JSONRPCRequest& request)\n             \"}\\n\"\n \n             \"\\nExamples:\\n\"\n-            \"\\nCreate a multisig address from 2 addresses\\n\"\n-            + HelpExampleCli(\"createmultisig\", \"2 \\\"[\\\\\\\"16sSauSf5pF2UkUwvKGq4qjNRzBZYqgEL5\\\\\\\",\\\\\\\"171sgjn4YtPu27adkKGrdDwzRTxnRkBfKV\\\\\\\"]\\\"\") +\n+            \"\\nCreate a multisig address from 2 public keys\\n\"\n+            + HelpExampleCli(\"createmultisig\", \"2 \\\"[\\\\\\\"03789ed0bb717d88f7d321a368d905e7430207ebbd82bd342cf11ae157a7ace5fd\\\\\\\",\\\\\\\"03dbc6764b8884a92e871274b87583e6d5c2a58819473e17e107ef3f6aa5a61626\\\\\\\"]\\\"\") +\n             \"\\nAs a json rpc call\\n\"\n-            + HelpExampleRpc(\"createmultisig\", \"2, \\\"[\\\\\\\"16sSauSf5pF2UkUwvKGq4qjNRzBZYqgEL5\\\\\\\",\\\\\\\"171sgjn4YtPu27adkKGrdDwzRTxnRkBfKV\\\\\\\"]\\\"\")\n+            + HelpExampleRpc(\"createmultisig\", \"2, \\\"[\\\\\\\"03789ed0bb717d88f7d321a368d905e7430207ebbd82bd342cf11ae157a7ace5fd\\\\\\\",\\\\\\\"03dbc6764b8884a92e871274b87583e6d5c2a58819473e17e107ef3f6aa5a61626\\\\\\\"]\\\"\")\n         ;\n         throw std::runtime_error(msg);\n     }\n \n+    int required = request.params[0].get_int();\n+\n+    // Get the public keys\n+    const UniValue& keys = request.params[1].get_array();\n+    std::vector<CPubKey> pubkeys;\n+    pubkeys.resize(keys.size());\n+    for (unsigned int i = 0; i < keys.size(); ++i) {\n+#ifdef ENABLE_WALLET\n+        if (IsDeprecatedRPCEnabled(\"createmultisig\")) {\n+            CWallet* const pwallet = GetWalletForJSONRPCRequest(request);\n+            if (!EnsureWalletIsAvailable(pwallet, request.fHelp)) {\n+                return NullUniValue;\n+            }\n+            if (pwallet) {\n+                _createmultisig_addr_to_pubkey(pwallet, pubkeys.at(i), keys[i].get_str());\n+            }\n+            _createmultisig_hex_to_pubkey(pubkeys.at(i), keys[i].get_str());\n+        } else\n+#endif\n+        _createmultisig_hex_to_pubkey(pubkeys.at(i), keys[i].get_str());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r142991034",
      "id" : 142991034,
      "in_reply_to_id" : 142283676,
      "original_commit_id" : "a324a928f291883f48399500a9da8d7f98c98d1c",
      "original_position" : 154,
      "path" : "src/rpc/misc.cpp",
      "position" : null,
      "pull_request_review_id" : 67437515,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415",
      "updated_at" : "2017-12-23T01:01:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/142991034",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r142991074"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/142991074"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Renamed to `keys_or_addrs`",
      "commit_id" : "9e69c4ff98c0ed0f1af022d4d708e82f6910ce52",
      "created_at" : "2017-10-05T16:36:12Z",
      "diff_hunk" : "@@ -1141,13 +1167,35 @@ UniValue addmultisigaddress(const JSONRPCRequest& request)\n     if (!request.params[2].isNull())\n         strAccount = AccountFromValue(request.params[2]);\n \n+    int required = request.params[0].get_int();\n+\n+    // Get the public keys\n+    const UniValue& keys = request.params[1].get_array();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r142991074",
      "id" : 142991074,
      "in_reply_to_id" : 142514964,
      "original_commit_id" : "a169f17434b9d96de478a6641e6a087be97631e8",
      "original_position" : 64,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 67437559,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415",
      "updated_at" : "2017-12-23T01:01:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/142991074",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r142991090"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/142991090"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Done",
      "commit_id" : "9e69c4ff98c0ed0f1af022d4d708e82f6910ce52",
      "created_at" : "2017-10-05T16:36:16Z",
      "diff_hunk" : "@@ -1141,13 +1167,35 @@ UniValue addmultisigaddress(const JSONRPCRequest& request)\n     if (!request.params[2].isNull())\n         strAccount = AccountFromValue(request.params[2]);\n \n+    int required = request.params[0].get_int();\n+\n+    // Get the public keys\n+    const UniValue& keys = request.params[1].get_array();\n+    std::vector<CPubKey> pubkeys;\n+    pubkeys.resize(keys.size());\n+    for (unsigned int i = 0; i < keys.size(); ++i) {\n+        _createmultisig_addr_to_pubkey(pwallet, pubkeys.at(i), keys[i].get_str());\n+        _createmultisig_hex_to_pubkey(pubkeys.at(i), keys[i].get_str());\n+        if (!pubkeys.at(i).IsFullyValid()) {\n+            throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Invalid public key: \" + keys[i].get_str());\n+        }\n+    }\n+\n     // Construct using pay-to-script-hash:\n-    CScript inner = _createmultisig_redeemScript(pwallet, request.params);\n+    CScript inner = _createmultisig_redeemScript(required, pubkeys);\n     CScriptID innerID(inner);\n     pwallet->AddCScript(inner);\n \n     pwallet->SetAddressBook(innerID, strAccount, \"send\");\n-    return EncodeDestination(innerID);\n+\n+    UniValue result(UniValue::VOBJ);\n+    if (IsDeprecatedRPCEnabled(\"addmultisigaddress\")) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r142991090",
      "id" : 142991090,
      "in_reply_to_id" : 142514601,
      "original_commit_id" : "a169f17434b9d96de478a6641e6a087be97631e8",
      "original_position" : 85,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 67437582,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415",
      "updated_at" : "2017-12-23T01:01:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/142991090",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r142991112"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/142991112"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Done",
      "commit_id" : "9e69c4ff98c0ed0f1af022d4d708e82f6910ce52",
      "created_at" : "2017-10-05T16:36:20Z",
      "diff_hunk" : "@@ -212,85 +212,59 @@ class CWallet;\n /**\n  * Used by addmultisigaddress / createmultisig:\n  */\n-CScript _createmultisig_redeemScript(CWallet * const pwallet, const UniValue& params)\n-{\n-    int nRequired = params[0].get_int();\n-    const UniValue& keys = params[1].get_array();\n+#ifdef ENABLE_WALLET\n+extern void _createmultisig_addr_to_pubkey(CWallet* const pwallet, CPubKey& pubkey_out, const std::string& addr_in);\n+#endif\n \n-    // Gather public keys\n-    if (nRequired < 1)\n-        throw std::runtime_error(\"a multisignature address must require at least one key to redeem\");\n-    if ((int)keys.size() < nRequired)\n-        throw std::runtime_error(\n-            strprintf(\"not enough keys supplied \"\n-                      \"(got %u keys, but need at least %d to redeem)\", keys.size(), nRequired));\n-    if (keys.size() > 16)\n-        throw std::runtime_error(\"Number of addresses involved in the multisignature address creation > 16\\nReduce the number\");\n-    std::vector<CPubKey> pubkeys;\n-    pubkeys.resize(keys.size());\n-    for (unsigned int i = 0; i < keys.size(); i++)\n+void _createmultisig_hex_to_pubkey(CPubKey& pubkey_out, const std::string& hex_in)\n+{\n+    if (IsHex(hex_in))\n     {\n-        const std::string& ks = keys[i].get_str();\n-#ifdef ENABLE_WALLET\n-        // Case 1: Bitcoin address and we have full public key:\n-        CTxDestination dest = DecodeDestination(ks);\n-        if (pwallet && IsValidDestination(dest)) {\n-            const CKeyID *keyID = boost::get<CKeyID>(&dest);\n-            if (!keyID) {\n-                throw std::runtime_error(strprintf(\"%s does not refer to a key\", ks));\n-            }\n-            CPubKey vchPubKey;\n-            if (!pwallet->GetPubKey(*keyID, vchPubKey)) {\n-                throw std::runtime_error(strprintf(\"no full public key for address %s\", ks));\n-            }\n-            if (!vchPubKey.IsFullyValid())\n-                throw std::runtime_error(\" Invalid public key: \"+ks);\n-            pubkeys[i] = vchPubKey;\n+        CPubKey vchPubKey(ParseHex(hex_in));\n+        if (!vchPubKey.IsFullyValid()) {\n+            throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Invalid public key: \" + hex_in);\n         }\n+        pubkey_out = vchPubKey;\n+    }\n+}\n \n-        // Case 2: hex public key\n-        else\n-#endif\n-        if (IsHex(ks))\n-        {\n-            CPubKey vchPubKey(ParseHex(ks));\n-            if (!vchPubKey.IsFullyValid())\n-                throw std::runtime_error(\" Invalid public key: \"+ks);\n-            pubkeys[i] = vchPubKey;\n-        }\n-        else\n-        {\n-            throw std::runtime_error(\" Invalid public key: \"+ks);\n-        }\n+CScript _createmultisig_redeemScript(const int required, const std::vector<CPubKey>& pubkeys)\n+{\n+    // Gather public keys\n+    if (required < 1) {\n+        throw std::runtime_error(\"a multisignature address must require at least one key to redeem\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r142991112",
      "id" : 142991112,
      "in_reply_to_id" : 142517234,
      "original_commit_id" : "a169f17434b9d96de478a6641e6a087be97631e8",
      "original_position" : 70,
      "path" : "src/rpc/misc.cpp",
      "position" : null,
      "pull_request_review_id" : 67437605,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415",
      "updated_at" : "2017-12-23T01:01:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/142991112",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r142991136"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/142991136"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Done.",
      "commit_id" : "9e69c4ff98c0ed0f1af022d4d708e82f6910ce52",
      "created_at" : "2017-10-05T16:36:25Z",
      "diff_hunk" : "@@ -301,16 +275,41 @@ UniValue createmultisig(const JSONRPCRequest& request)\n             \"}\\n\"\n \n             \"\\nExamples:\\n\"\n-            \"\\nCreate a multisig address from 2 addresses\\n\"\n-            + HelpExampleCli(\"createmultisig\", \"2 \\\"[\\\\\\\"16sSauSf5pF2UkUwvKGq4qjNRzBZYqgEL5\\\\\\\",\\\\\\\"171sgjn4YtPu27adkKGrdDwzRTxnRkBfKV\\\\\\\"]\\\"\") +\n+            \"\\nCreate a multisig address from 2 public keys\\n\"\n+            + HelpExampleCli(\"createmultisig\", \"2 \\\"[\\\\\\\"03789ed0bb717d88f7d321a368d905e7430207ebbd82bd342cf11ae157a7ace5fd\\\\\\\",\\\\\\\"03dbc6764b8884a92e871274b87583e6d5c2a58819473e17e107ef3f6aa5a61626\\\\\\\"]\\\"\") +\n             \"\\nAs a json rpc call\\n\"\n-            + HelpExampleRpc(\"createmultisig\", \"2, \\\"[\\\\\\\"16sSauSf5pF2UkUwvKGq4qjNRzBZYqgEL5\\\\\\\",\\\\\\\"171sgjn4YtPu27adkKGrdDwzRTxnRkBfKV\\\\\\\"]\\\"\")\n+            + HelpExampleRpc(\"createmultisig\", \"2, \\\"[\\\\\\\"03789ed0bb717d88f7d321a368d905e7430207ebbd82bd342cf11ae157a7ace5fd\\\\\\\",\\\\\\\"03dbc6764b8884a92e871274b87583e6d5c2a58819473e17e107ef3f6aa5a61626\\\\\\\"]\\\"\")\n         ;\n         throw std::runtime_error(msg);\n     }\n \n+    int required = request.params[0].get_int();\n+\n+    // Get the public keys\n+    const UniValue& keys = request.params[1].get_array();\n+    std::vector<CPubKey> pubkeys;\n+    pubkeys.resize(keys.size());\n+    for (unsigned int i = 0; i < keys.size(); ++i) {\n+#ifdef ENABLE_WALLET\n+        if (IsDeprecatedRPCEnabled(\"createmultisig\")) {\n+            CWallet* const pwallet = GetWalletForJSONRPCRequest(request);\n+            if (!EnsureWalletIsAvailable(pwallet, request.fHelp)) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r142991136",
      "id" : 142991136,
      "in_reply_to_id" : 142517063,
      "original_commit_id" : "a169f17434b9d96de478a6641e6a087be97631e8",
      "original_position" : 145,
      "path" : "src/rpc/misc.cpp",
      "position" : null,
      "pull_request_review_id" : 67437634,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415",
      "updated_at" : "2017-12-23T01:01:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/142991136",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r142991160"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/142991160"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Done.",
      "commit_id" : "9e69c4ff98c0ed0f1af022d4d708e82f6910ce52",
      "created_at" : "2017-10-05T16:36:30Z",
      "diff_hunk" : "@@ -301,16 +275,41 @@ UniValue createmultisig(const JSONRPCRequest& request)\n             \"}\\n\"\n \n             \"\\nExamples:\\n\"\n-            \"\\nCreate a multisig address from 2 addresses\\n\"\n-            + HelpExampleCli(\"createmultisig\", \"2 \\\"[\\\\\\\"16sSauSf5pF2UkUwvKGq4qjNRzBZYqgEL5\\\\\\\",\\\\\\\"171sgjn4YtPu27adkKGrdDwzRTxnRkBfKV\\\\\\\"]\\\"\") +\n+            \"\\nCreate a multisig address from 2 public keys\\n\"\n+            + HelpExampleCli(\"createmultisig\", \"2 \\\"[\\\\\\\"03789ed0bb717d88f7d321a368d905e7430207ebbd82bd342cf11ae157a7ace5fd\\\\\\\",\\\\\\\"03dbc6764b8884a92e871274b87583e6d5c2a58819473e17e107ef3f6aa5a61626\\\\\\\"]\\\"\") +\n             \"\\nAs a json rpc call\\n\"\n-            + HelpExampleRpc(\"createmultisig\", \"2, \\\"[\\\\\\\"16sSauSf5pF2UkUwvKGq4qjNRzBZYqgEL5\\\\\\\",\\\\\\\"171sgjn4YtPu27adkKGrdDwzRTxnRkBfKV\\\\\\\"]\\\"\")\n+            + HelpExampleRpc(\"createmultisig\", \"2, \\\"[\\\\\\\"03789ed0bb717d88f7d321a368d905e7430207ebbd82bd342cf11ae157a7ace5fd\\\\\\\",\\\\\\\"03dbc6764b8884a92e871274b87583e6d5c2a58819473e17e107ef3f6aa5a61626\\\\\\\"]\\\"\")\n         ;\n         throw std::runtime_error(msg);\n     }\n \n+    int required = request.params[0].get_int();\n+\n+    // Get the public keys\n+    const UniValue& keys = request.params[1].get_array();\n+    std::vector<CPubKey> pubkeys;\n+    pubkeys.resize(keys.size());\n+    for (unsigned int i = 0; i < keys.size(); ++i) {\n+#ifdef ENABLE_WALLET\n+        if (IsDeprecatedRPCEnabled(\"createmultisig\")) {\n+            CWallet* const pwallet = GetWalletForJSONRPCRequest(request);\n+            if (!EnsureWalletIsAvailable(pwallet, request.fHelp)) {\n+                return NullUniValue;\n+            }\n+            if (pwallet) {\n+                _createmultisig_addr_to_pubkey(pwallet, pubkeys.at(i), keys[i].get_str());\n+            }\n+            _createmultisig_hex_to_pubkey(pubkeys.at(i), keys[i].get_str());\n+        } else\n+#endif\n+        _createmultisig_hex_to_pubkey(pubkeys.at(i), keys[i].get_str());\n+        if (!pubkeys.at(i).IsFullyValid()) {\n+            throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Invalid public key: \" + keys[i].get_str());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r142991160",
      "id" : 142991160,
      "in_reply_to_id" : 142517851,
      "original_commit_id" : "a169f17434b9d96de478a6641e6a087be97631e8",
      "original_position" : 156,
      "path" : "src/rpc/misc.cpp",
      "position" : null,
      "pull_request_review_id" : 67437661,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415",
      "updated_at" : "2017-12-23T01:01:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/142991160",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r142991327"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/142991327"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Is that really necessary?",
      "commit_id" : "9e69c4ff98c0ed0f1af022d4d708e82f6910ce52",
      "created_at" : "2017-10-05T16:37:10Z",
      "diff_hunk" : "@@ -212,85 +212,59 @@ class CWallet;\n /**\n  * Used by addmultisigaddress / createmultisig:\n  */\n-CScript _createmultisig_redeemScript(CWallet * const pwallet, const UniValue& params)\n-{\n-    int nRequired = params[0].get_int();\n-    const UniValue& keys = params[1].get_array();\n+#ifdef ENABLE_WALLET\n+extern void _createmultisig_addr_to_pubkey(CWallet* const pwallet, CPubKey& pubkey_out, const std::string& addr_in);\n+#endif\n \n-    // Gather public keys\n-    if (nRequired < 1)\n-        throw std::runtime_error(\"a multisignature address must require at least one key to redeem\");\n-    if ((int)keys.size() < nRequired)\n-        throw std::runtime_error(\n-            strprintf(\"not enough keys supplied \"\n-                      \"(got %u keys, but need at least %d to redeem)\", keys.size(), nRequired));\n-    if (keys.size() > 16)\n-        throw std::runtime_error(\"Number of addresses involved in the multisignature address creation > 16\\nReduce the number\");\n-    std::vector<CPubKey> pubkeys;\n-    pubkeys.resize(keys.size());\n-    for (unsigned int i = 0; i < keys.size(); i++)\n+void _createmultisig_hex_to_pubkey(CPubKey& pubkey_out, const std::string& hex_in)\n+{\n+    if (IsHex(hex_in))\n     {\n-        const std::string& ks = keys[i].get_str();\n-#ifdef ENABLE_WALLET\n-        // Case 1: Bitcoin address and we have full public key:\n-        CTxDestination dest = DecodeDestination(ks);\n-        if (pwallet && IsValidDestination(dest)) {\n-            const CKeyID *keyID = boost::get<CKeyID>(&dest);\n-            if (!keyID) {\n-                throw std::runtime_error(strprintf(\"%s does not refer to a key\", ks));\n-            }\n-            CPubKey vchPubKey;\n-            if (!pwallet->GetPubKey(*keyID, vchPubKey)) {\n-                throw std::runtime_error(strprintf(\"no full public key for address %s\", ks));\n-            }\n-            if (!vchPubKey.IsFullyValid())\n-                throw std::runtime_error(\" Invalid public key: \"+ks);\n-            pubkeys[i] = vchPubKey;\n+        CPubKey vchPubKey(ParseHex(hex_in));\n+        if (!vchPubKey.IsFullyValid()) {\n+            throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Invalid public key: \" + hex_in);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r142991327",
      "id" : 142991327,
      "in_reply_to_id" : 142593730,
      "original_commit_id" : "a169f17434b9d96de478a6641e6a087be97631e8",
      "original_position" : 46,
      "path" : "src/rpc/misc.cpp",
      "position" : null,
      "pull_request_review_id" : 67437832,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415",
      "updated_at" : "2017-12-23T01:01:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/142991327",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r143325742"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/143325742"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "IMO yes, should always test success and failure cases as this is an interface others use.",
      "commit_id" : "9e69c4ff98c0ed0f1af022d4d708e82f6910ce52",
      "created_at" : "2017-10-07T08:09:12Z",
      "diff_hunk" : "@@ -212,85 +212,59 @@ class CWallet;\n /**\n  * Used by addmultisigaddress / createmultisig:\n  */\n-CScript _createmultisig_redeemScript(CWallet * const pwallet, const UniValue& params)\n-{\n-    int nRequired = params[0].get_int();\n-    const UniValue& keys = params[1].get_array();\n+#ifdef ENABLE_WALLET\n+extern void _createmultisig_addr_to_pubkey(CWallet* const pwallet, CPubKey& pubkey_out, const std::string& addr_in);\n+#endif\n \n-    // Gather public keys\n-    if (nRequired < 1)\n-        throw std::runtime_error(\"a multisignature address must require at least one key to redeem\");\n-    if ((int)keys.size() < nRequired)\n-        throw std::runtime_error(\n-            strprintf(\"not enough keys supplied \"\n-                      \"(got %u keys, but need at least %d to redeem)\", keys.size(), nRequired));\n-    if (keys.size() > 16)\n-        throw std::runtime_error(\"Number of addresses involved in the multisignature address creation > 16\\nReduce the number\");\n-    std::vector<CPubKey> pubkeys;\n-    pubkeys.resize(keys.size());\n-    for (unsigned int i = 0; i < keys.size(); i++)\n+void _createmultisig_hex_to_pubkey(CPubKey& pubkey_out, const std::string& hex_in)\n+{\n+    if (IsHex(hex_in))\n     {\n-        const std::string& ks = keys[i].get_str();\n-#ifdef ENABLE_WALLET\n-        // Case 1: Bitcoin address and we have full public key:\n-        CTxDestination dest = DecodeDestination(ks);\n-        if (pwallet && IsValidDestination(dest)) {\n-            const CKeyID *keyID = boost::get<CKeyID>(&dest);\n-            if (!keyID) {\n-                throw std::runtime_error(strprintf(\"%s does not refer to a key\", ks));\n-            }\n-            CPubKey vchPubKey;\n-            if (!pwallet->GetPubKey(*keyID, vchPubKey)) {\n-                throw std::runtime_error(strprintf(\"no full public key for address %s\", ks));\n-            }\n-            if (!vchPubKey.IsFullyValid())\n-                throw std::runtime_error(\" Invalid public key: \"+ks);\n-            pubkeys[i] = vchPubKey;\n+        CPubKey vchPubKey(ParseHex(hex_in));\n+        if (!vchPubKey.IsFullyValid()) {\n+            throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Invalid public key: \" + hex_in);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r143325742",
      "id" : 143325742,
      "in_reply_to_id" : 142593730,
      "original_commit_id" : "a169f17434b9d96de478a6641e6a087be97631e8",
      "original_position" : 46,
      "path" : "src/rpc/misc.cpp",
      "position" : null,
      "pull_request_review_id" : 67828222,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415",
      "updated_at" : "2017-12-23T01:01:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/143325742",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r143325892"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/143325892"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Split in two loops:\r\n```cpp\r\n#ifdef ENABLE_WALLET\r\nCWallet* const pwallet = GetWalletForJSONRPCRequest(request);\r\nif (IsDeprecatedRPCEnabled(\"createmultisig\") && EnsureWalletIsAvailable(pwallet, request.fHelp) && pwallet) {\r\n    // call _createmultisig_addr_to_pubkey for each key\r\n}\r\n#endif // ENABLE_WALLET\r\n\r\n// call _createmultisig_hex_to_pubkey for each key\r\n```",
      "commit_id" : "9e69c4ff98c0ed0f1af022d4d708e82f6910ce52",
      "created_at" : "2017-10-07T08:18:21Z",
      "diff_hunk" : "@@ -301,16 +275,35 @@ UniValue createmultisig(const JSONRPCRequest& request)\n             \"}\\n\"\n \n             \"\\nExamples:\\n\"\n-            \"\\nCreate a multisig address from 2 addresses\\n\"\n-            + HelpExampleCli(\"createmultisig\", \"2 \\\"[\\\\\\\"16sSauSf5pF2UkUwvKGq4qjNRzBZYqgEL5\\\\\\\",\\\\\\\"171sgjn4YtPu27adkKGrdDwzRTxnRkBfKV\\\\\\\"]\\\"\") +\n+            \"\\nCreate a multisig address from 2 public keys\\n\"\n+            + HelpExampleCli(\"createmultisig\", \"2 \\\"[\\\\\\\"03789ed0bb717d88f7d321a368d905e7430207ebbd82bd342cf11ae157a7ace5fd\\\\\\\",\\\\\\\"03dbc6764b8884a92e871274b87583e6d5c2a58819473e17e107ef3f6aa5a61626\\\\\\\"]\\\"\") +\n             \"\\nAs a json rpc call\\n\"\n-            + HelpExampleRpc(\"createmultisig\", \"2, \\\"[\\\\\\\"16sSauSf5pF2UkUwvKGq4qjNRzBZYqgEL5\\\\\\\",\\\\\\\"171sgjn4YtPu27adkKGrdDwzRTxnRkBfKV\\\\\\\"]\\\"\")\n+            + HelpExampleRpc(\"createmultisig\", \"2, \\\"[\\\\\\\"03789ed0bb717d88f7d321a368d905e7430207ebbd82bd342cf11ae157a7ace5fd\\\\\\\",\\\\\\\"03dbc6764b8884a92e871274b87583e6d5c2a58819473e17e107ef3f6aa5a61626\\\\\\\"]\\\"\")\n         ;\n         throw std::runtime_error(msg);\n     }\n \n+    int required = request.params[0].get_int();\n+\n+    // Get the public keys\n+    const UniValue& keys = request.params[1].get_array();\n+    std::vector<CPubKey> pubkeys;\n+    pubkeys.resize(keys.size());\n+    for (unsigned int i = 0; i < keys.size(); ++i) {\n+#ifdef ENABLE_WALLET\n+        CWallet* const pwallet = GetWalletForJSONRPCRequest(request);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r143325892",
      "id" : 143325892,
      "original_commit_id" : "1e7a0ce6554f140ef2bdb6b1de28bcdce476cff3",
      "original_position" : 143,
      "path" : "src/rpc/misc.cpp",
      "position" : null,
      "pull_request_review_id" : 67828376,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415",
      "updated_at" : "2017-12-23T01:01:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/143325892",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r144371508"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/144371508"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Why?",
      "commit_id" : "9e69c4ff98c0ed0f1af022d4d708e82f6910ce52",
      "created_at" : "2017-10-12T18:24:40Z",
      "diff_hunk" : "@@ -301,16 +275,35 @@ UniValue createmultisig(const JSONRPCRequest& request)\n             \"}\\n\"\n \n             \"\\nExamples:\\n\"\n-            \"\\nCreate a multisig address from 2 addresses\\n\"\n-            + HelpExampleCli(\"createmultisig\", \"2 \\\"[\\\\\\\"16sSauSf5pF2UkUwvKGq4qjNRzBZYqgEL5\\\\\\\",\\\\\\\"171sgjn4YtPu27adkKGrdDwzRTxnRkBfKV\\\\\\\"]\\\"\") +\n+            \"\\nCreate a multisig address from 2 public keys\\n\"\n+            + HelpExampleCli(\"createmultisig\", \"2 \\\"[\\\\\\\"03789ed0bb717d88f7d321a368d905e7430207ebbd82bd342cf11ae157a7ace5fd\\\\\\\",\\\\\\\"03dbc6764b8884a92e871274b87583e6d5c2a58819473e17e107ef3f6aa5a61626\\\\\\\"]\\\"\") +\n             \"\\nAs a json rpc call\\n\"\n-            + HelpExampleRpc(\"createmultisig\", \"2, \\\"[\\\\\\\"16sSauSf5pF2UkUwvKGq4qjNRzBZYqgEL5\\\\\\\",\\\\\\\"171sgjn4YtPu27adkKGrdDwzRTxnRkBfKV\\\\\\\"]\\\"\")\n+            + HelpExampleRpc(\"createmultisig\", \"2, \\\"[\\\\\\\"03789ed0bb717d88f7d321a368d905e7430207ebbd82bd342cf11ae157a7ace5fd\\\\\\\",\\\\\\\"03dbc6764b8884a92e871274b87583e6d5c2a58819473e17e107ef3f6aa5a61626\\\\\\\"]\\\"\")\n         ;\n         throw std::runtime_error(msg);\n     }\n \n+    int required = request.params[0].get_int();\n+\n+    // Get the public keys\n+    const UniValue& keys = request.params[1].get_array();\n+    std::vector<CPubKey> pubkeys;\n+    pubkeys.resize(keys.size());\n+    for (unsigned int i = 0; i < keys.size(); ++i) {\n+#ifdef ENABLE_WALLET\n+        CWallet* const pwallet = GetWalletForJSONRPCRequest(request);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r144371508",
      "id" : 144371508,
      "in_reply_to_id" : 143325892,
      "original_commit_id" : "1e7a0ce6554f140ef2bdb6b1de28bcdce476cff3",
      "original_position" : 143,
      "path" : "src/rpc/misc.cpp",
      "position" : null,
      "pull_request_review_id" : 69020109,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415",
      "updated_at" : "2017-12-23T01:01:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/144371508",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r144376550"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/144376550"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Added a test in `rawtransactions.py`",
      "commit_id" : "9e69c4ff98c0ed0f1af022d4d708e82f6910ce52",
      "created_at" : "2017-10-12T18:41:52Z",
      "diff_hunk" : "@@ -212,85 +212,59 @@ class CWallet;\n /**\n  * Used by addmultisigaddress / createmultisig:\n  */\n-CScript _createmultisig_redeemScript(CWallet * const pwallet, const UniValue& params)\n-{\n-    int nRequired = params[0].get_int();\n-    const UniValue& keys = params[1].get_array();\n+#ifdef ENABLE_WALLET\n+extern void _createmultisig_addr_to_pubkey(CWallet* const pwallet, CPubKey& pubkey_out, const std::string& addr_in);\n+#endif\n \n-    // Gather public keys\n-    if (nRequired < 1)\n-        throw std::runtime_error(\"a multisignature address must require at least one key to redeem\");\n-    if ((int)keys.size() < nRequired)\n-        throw std::runtime_error(\n-            strprintf(\"not enough keys supplied \"\n-                      \"(got %u keys, but need at least %d to redeem)\", keys.size(), nRequired));\n-    if (keys.size() > 16)\n-        throw std::runtime_error(\"Number of addresses involved in the multisignature address creation > 16\\nReduce the number\");\n-    std::vector<CPubKey> pubkeys;\n-    pubkeys.resize(keys.size());\n-    for (unsigned int i = 0; i < keys.size(); i++)\n+void _createmultisig_hex_to_pubkey(CPubKey& pubkey_out, const std::string& hex_in)\n+{\n+    if (IsHex(hex_in))\n     {\n-        const std::string& ks = keys[i].get_str();\n-#ifdef ENABLE_WALLET\n-        // Case 1: Bitcoin address and we have full public key:\n-        CTxDestination dest = DecodeDestination(ks);\n-        if (pwallet && IsValidDestination(dest)) {\n-            const CKeyID *keyID = boost::get<CKeyID>(&dest);\n-            if (!keyID) {\n-                throw std::runtime_error(strprintf(\"%s does not refer to a key\", ks));\n-            }\n-            CPubKey vchPubKey;\n-            if (!pwallet->GetPubKey(*keyID, vchPubKey)) {\n-                throw std::runtime_error(strprintf(\"no full public key for address %s\", ks));\n-            }\n-            if (!vchPubKey.IsFullyValid())\n-                throw std::runtime_error(\" Invalid public key: \"+ks);\n-            pubkeys[i] = vchPubKey;\n+        CPubKey vchPubKey(ParseHex(hex_in));\n+        if (!vchPubKey.IsFullyValid()) {\n+            throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Invalid public key: \" + hex_in);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r144376550",
      "id" : 144376550,
      "in_reply_to_id" : 142593730,
      "original_commit_id" : "a169f17434b9d96de478a6641e6a087be97631e8",
      "original_position" : 46,
      "path" : "src/rpc/misc.cpp",
      "position" : null,
      "pull_request_review_id" : 69025748,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415",
      "updated_at" : "2017-12-23T01:01:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/144376550",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r144585495"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/144585495"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "No need for ENABLE_WALLET macro here.\r\n\r\nFollowing would be equivalent:\r\n\r\n```c++\r\nvoid _createmultisig_addr_to_pubkey(class CWallet* const pwallet, CPubKey& pubkey_out, const std::string& addr_in);\r\n```\r\n\r\nextern keyword also doesn't actually do anything, but maybe it is useful to make the declaration stand out more.",
      "commit_id" : "9e69c4ff98c0ed0f1af022d4d708e82f6910ce52",
      "created_at" : "2017-10-13T15:28:06Z",
      "diff_hunk" : "@@ -212,85 +212,59 @@ class CWallet;\n /**\n  * Used by addmultisigaddress / createmultisig:\n  */\n-CScript _createmultisig_redeemScript(CWallet * const pwallet, const UniValue& params)\n-{\n-    int nRequired = params[0].get_int();\n-    const UniValue& keys = params[1].get_array();\n+#ifdef ENABLE_WALLET",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r144585495",
      "id" : 144585495,
      "original_commit_id" : "a0e0c4b674b1cde4e754ab0071b81eb8ba3df40a",
      "original_position" : 8,
      "path" : "src/rpc/misc.cpp",
      "position" : null,
      "pull_request_review_id" : 69265291,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415",
      "updated_at" : "2017-12-23T01:01:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/144585495",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r144590639"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/144590639"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Guessing it was suggested for efficiency, but I think the code is better the way it is (one loop), since it avoids duplication.",
      "commit_id" : "9e69c4ff98c0ed0f1af022d4d708e82f6910ce52",
      "created_at" : "2017-10-13T15:48:31Z",
      "diff_hunk" : "@@ -301,16 +275,35 @@ UniValue createmultisig(const JSONRPCRequest& request)\n             \"}\\n\"\n \n             \"\\nExamples:\\n\"\n-            \"\\nCreate a multisig address from 2 addresses\\n\"\n-            + HelpExampleCli(\"createmultisig\", \"2 \\\"[\\\\\\\"16sSauSf5pF2UkUwvKGq4qjNRzBZYqgEL5\\\\\\\",\\\\\\\"171sgjn4YtPu27adkKGrdDwzRTxnRkBfKV\\\\\\\"]\\\"\") +\n+            \"\\nCreate a multisig address from 2 public keys\\n\"\n+            + HelpExampleCli(\"createmultisig\", \"2 \\\"[\\\\\\\"03789ed0bb717d88f7d321a368d905e7430207ebbd82bd342cf11ae157a7ace5fd\\\\\\\",\\\\\\\"03dbc6764b8884a92e871274b87583e6d5c2a58819473e17e107ef3f6aa5a61626\\\\\\\"]\\\"\") +\n             \"\\nAs a json rpc call\\n\"\n-            + HelpExampleRpc(\"createmultisig\", \"2, \\\"[\\\\\\\"16sSauSf5pF2UkUwvKGq4qjNRzBZYqgEL5\\\\\\\",\\\\\\\"171sgjn4YtPu27adkKGrdDwzRTxnRkBfKV\\\\\\\"]\\\"\")\n+            + HelpExampleRpc(\"createmultisig\", \"2, \\\"[\\\\\\\"03789ed0bb717d88f7d321a368d905e7430207ebbd82bd342cf11ae157a7ace5fd\\\\\\\",\\\\\\\"03dbc6764b8884a92e871274b87583e6d5c2a58819473e17e107ef3f6aa5a61626\\\\\\\"]\\\"\")\n         ;\n         throw std::runtime_error(msg);\n     }\n \n+    int required = request.params[0].get_int();\n+\n+    // Get the public keys\n+    const UniValue& keys = request.params[1].get_array();\n+    std::vector<CPubKey> pubkeys;\n+    pubkeys.resize(keys.size());\n+    for (unsigned int i = 0; i < keys.size(); ++i) {\n+#ifdef ENABLE_WALLET\n+        CWallet* const pwallet = GetWalletForJSONRPCRequest(request);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r144590639",
      "id" : 144590639,
      "in_reply_to_id" : 143325892,
      "original_commit_id" : "1e7a0ce6554f140ef2bdb6b1de28bcdce476cff3",
      "original_position" : 143,
      "path" : "src/rpc/misc.cpp",
      "position" : null,
      "pull_request_review_id" : 69265291,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415",
      "updated_at" : "2017-12-23T01:01:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/144590639",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r144593492"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/144593492"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "There is really no reason for this function to live in the wallet. The CWallet* argument could be changed to a CKeyStore argument and this could just be a generic jsonrpc util function without all the weird ifdef and naming and extern declaration stuff.",
      "commit_id" : "9e69c4ff98c0ed0f1af022d4d708e82f6910ce52",
      "created_at" : "2017-10-13T15:59:47Z",
      "diff_hunk" : "@@ -1098,7 +1098,27 @@ UniValue sendmany(const JSONRPCRequest& request)\n }\n \n // Defined in rpc/misc.cpp\n-extern CScript _createmultisig_redeemScript(CWallet * const pwallet, const UniValue& params);\n+extern CScript _createmultisig_redeemScript(const int required, const std::vector<CPubKey>& pubkeys);\n+extern void _createmultisig_hex_to_pubkey(CPubKey& pubkey_out, const std::string& hex_in);\n+\n+void _createmultisig_addr_to_pubkey(CWallet* const pwallet, CPubKey& pubkey_out, const std::string& addr_in)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r144593492",
      "id" : 144593492,
      "original_commit_id" : "a0e0c4b674b1cde4e754ab0071b81eb8ba3df40a",
      "original_position" : 8,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 69265291,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415",
      "updated_at" : "2017-12-23T01:01:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/144593492",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r144624582"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/144624582"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Sure, that could be done, but is it necessary? Where else would you need to use such a function with a CKeyStore instead of CWallet?",
      "commit_id" : "9e69c4ff98c0ed0f1af022d4d708e82f6910ce52",
      "created_at" : "2017-10-13T18:19:55Z",
      "diff_hunk" : "@@ -1098,7 +1098,27 @@ UniValue sendmany(const JSONRPCRequest& request)\n }\n \n // Defined in rpc/misc.cpp\n-extern CScript _createmultisig_redeemScript(CWallet * const pwallet, const UniValue& params);\n+extern CScript _createmultisig_redeemScript(const int required, const std::vector<CPubKey>& pubkeys);\n+extern void _createmultisig_hex_to_pubkey(CPubKey& pubkey_out, const std::string& hex_in);\n+\n+void _createmultisig_addr_to_pubkey(CWallet* const pwallet, CPubKey& pubkey_out, const std::string& addr_in)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r144624582",
      "id" : 144624582,
      "in_reply_to_id" : 144593492,
      "original_commit_id" : "a0e0c4b674b1cde4e754ab0071b81eb8ba3df40a",
      "original_position" : 8,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 69310896,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415",
      "updated_at" : "2017-12-23T01:01:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/144624582",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r144624927"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/144624927"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Removed the ifdef here. I'm leaving the `extern` for clarity",
      "commit_id" : "9e69c4ff98c0ed0f1af022d4d708e82f6910ce52",
      "created_at" : "2017-10-13T18:21:29Z",
      "diff_hunk" : "@@ -212,85 +212,59 @@ class CWallet;\n /**\n  * Used by addmultisigaddress / createmultisig:\n  */\n-CScript _createmultisig_redeemScript(CWallet * const pwallet, const UniValue& params)\n-{\n-    int nRequired = params[0].get_int();\n-    const UniValue& keys = params[1].get_array();\n+#ifdef ENABLE_WALLET",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r144624927",
      "id" : 144624927,
      "in_reply_to_id" : 144585495,
      "original_commit_id" : "a0e0c4b674b1cde4e754ab0071b81eb8ba3df40a",
      "original_position" : 8,
      "path" : "src/rpc/misc.cpp",
      "position" : null,
      "pull_request_review_id" : 69311297,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415",
      "updated_at" : "2017-12-23T01:01:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/144624927",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Rebased to fix travis.",
      "created_at" : "2017-10-13T18:21:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11415#issuecomment-336530573",
      "id" : 336530573,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11415",
      "updated_at" : "2017-10-13T18:21:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/336530573",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r144627469"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/144627469"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Just a suggestion to let you define the two functions together in one place. Please ignore if you don't think this is an improvement, or don't think it is worth the effort.",
      "commit_id" : "9e69c4ff98c0ed0f1af022d4d708e82f6910ce52",
      "created_at" : "2017-10-13T18:32:13Z",
      "diff_hunk" : "@@ -1098,7 +1098,27 @@ UniValue sendmany(const JSONRPCRequest& request)\n }\n \n // Defined in rpc/misc.cpp\n-extern CScript _createmultisig_redeemScript(CWallet * const pwallet, const UniValue& params);\n+extern CScript _createmultisig_redeemScript(const int required, const std::vector<CPubKey>& pubkeys);\n+extern void _createmultisig_hex_to_pubkey(CPubKey& pubkey_out, const std::string& hex_in);\n+\n+void _createmultisig_addr_to_pubkey(CWallet* const pwallet, CPubKey& pubkey_out, const std::string& addr_in)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r144627469",
      "id" : 144627469,
      "in_reply_to_id" : 144593492,
      "original_commit_id" : "a0e0c4b674b1cde4e754ab0071b81eb8ba3df40a",
      "original_position" : 8,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 69314305,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415",
      "updated_at" : "2017-12-23T01:01:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/144627469",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "sorry @achow101 , you'll also need to change https://github.com/bitcoin/bitcoin/pull/11415/files#diff-8f3a598a6e52799596008ae7c19d1333R23 to use `assert_raises_rpc_error()`",
      "created_at" : "2017-10-13T19:06:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11415#issuecomment-336541284",
      "id" : 336541284,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11415",
      "updated_at" : "2017-10-13T19:06:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/336541284",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Actually fixed travis this time, I think.",
      "created_at" : "2017-10-13T21:29:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11415#issuecomment-336572174",
      "id" : 336572174,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11415",
      "updated_at" : "2017-10-13T21:29:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/336572174",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r144666019"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/144666019"
         }
      },
      "author_association" : "MEMBER",
      "body" : "minor nit: Future readers of this test may find it clearer if you add a comment saying that createmultisig can only take keys as inputs, but addmultisigaddress can take a mixture of keys and addrs (as long as the wallet owns those addresses)",
      "commit_id" : "9e69c4ff98c0ed0f1af022d4d708e82f6910ce52",
      "created_at" : "2017-10-13T22:03:26Z",
      "diff_hunk" : "@@ -60,7 +60,12 @@ def run_test(self):\n         addr1Obj = self.nodes[2].validateaddress(addr1)\n         addr2Obj = self.nodes[2].validateaddress(addr2)\n \n-        mSigObj = self.nodes[2].addmultisigaddress(2, [addr1Obj['pubkey'], addr2Obj['pubkey']])\n+        # Tests for createmultisig and addmultisigaddress\n+        assert_raises_rpc_error(-5, \"Invalid public key\", self.nodes[0].createmultisig, 1, [\"01020304\"])\n+        self.nodes[0].createmultisig(2, [addr1Obj['pubkey'], addr2Obj['pubkey']])",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r144666019",
      "id" : 144666019,
      "original_commit_id" : "897b5c0cfbdbe90c032a980e8567ddca7b499281",
      "original_position" : 7,
      "path" : "test/functional/rawtransactions.py",
      "position" : null,
      "pull_request_review_id" : 69361112,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415",
      "updated_at" : "2017-12-23T01:01:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/144666019",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r144667505"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/144667505"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Done",
      "commit_id" : "9e69c4ff98c0ed0f1af022d4d708e82f6910ce52",
      "created_at" : "2017-10-13T22:14:29Z",
      "diff_hunk" : "@@ -60,7 +60,12 @@ def run_test(self):\n         addr1Obj = self.nodes[2].validateaddress(addr1)\n         addr2Obj = self.nodes[2].validateaddress(addr2)\n \n-        mSigObj = self.nodes[2].addmultisigaddress(2, [addr1Obj['pubkey'], addr2Obj['pubkey']])\n+        # Tests for createmultisig and addmultisigaddress\n+        assert_raises_rpc_error(-5, \"Invalid public key\", self.nodes[0].createmultisig, 1, [\"01020304\"])\n+        self.nodes[0].createmultisig(2, [addr1Obj['pubkey'], addr2Obj['pubkey']])",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r144667505",
      "id" : 144667505,
      "in_reply_to_id" : 144666019,
      "original_commit_id" : "897b5c0cfbdbe90c032a980e8567ddca7b499281",
      "original_position" : 7,
      "path" : "test/functional/rawtransactions.py",
      "position" : null,
      "pull_request_review_id" : 69362719,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415",
      "updated_at" : "2017-12-23T01:01:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/144667505",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Tested ACK ac33d788e2d7dbfdf760f3a620c86eeaf7cff3fd",
      "created_at" : "2017-10-13T22:18:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11415#issuecomment-336580705",
      "id" : 336580705,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11415",
      "updated_at" : "2017-10-13T22:18:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/336580705",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r145206971"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/145206971"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Dangling \")\" at the end of the err string.",
      "commit_id" : "9e69c4ff98c0ed0f1af022d4d708e82f6910ce52",
      "created_at" : "2017-10-17T17:59:37Z",
      "diff_hunk" : "@@ -301,16 +273,35 @@ UniValue createmultisig(const JSONRPCRequest& request)\n             \"}\\n\"\n \n             \"\\nExamples:\\n\"\n-            \"\\nCreate a multisig address from 2 addresses\\n\"\n-            + HelpExampleCli(\"createmultisig\", \"2 \\\"[\\\\\\\"16sSauSf5pF2UkUwvKGq4qjNRzBZYqgEL5\\\\\\\",\\\\\\\"171sgjn4YtPu27adkKGrdDwzRTxnRkBfKV\\\\\\\"]\\\"\") +\n+            \"\\nCreate a multisig address from 2 public keys\\n\"\n+            + HelpExampleCli(\"createmultisig\", \"2 \\\"[\\\\\\\"03789ed0bb717d88f7d321a368d905e7430207ebbd82bd342cf11ae157a7ace5fd\\\\\\\",\\\\\\\"03dbc6764b8884a92e871274b87583e6d5c2a58819473e17e107ef3f6aa5a61626\\\\\\\"]\\\"\") +\n             \"\\nAs a json rpc call\\n\"\n-            + HelpExampleRpc(\"createmultisig\", \"2, \\\"[\\\\\\\"16sSauSf5pF2UkUwvKGq4qjNRzBZYqgEL5\\\\\\\",\\\\\\\"171sgjn4YtPu27adkKGrdDwzRTxnRkBfKV\\\\\\\"]\\\"\")\n+            + HelpExampleRpc(\"createmultisig\", \"2, \\\"[\\\\\\\"03789ed0bb717d88f7d321a368d905e7430207ebbd82bd342cf11ae157a7ace5fd\\\\\\\",\\\\\\\"03dbc6764b8884a92e871274b87583e6d5c2a58819473e17e107ef3f6aa5a61626\\\\\\\"]\\\"\")\n         ;\n         throw std::runtime_error(msg);\n     }\n \n+    int required = request.params[0].get_int();\n+\n+    // Get the public keys\n+    const UniValue& keys = request.params[1].get_array();\n+    std::vector<CPubKey> pubkeys;\n+    pubkeys.resize(keys.size());\n+    for (unsigned int i = 0; i < keys.size(); ++i) {\n+#ifdef ENABLE_WALLET\n+        CWallet* const pwallet = GetWalletForJSONRPCRequest(request);\n+        if (IsDeprecatedRPCEnabled(\"createmultisig\") && EnsureWalletIsAvailable(pwallet, request.fHelp) && pwallet) {\n+            _createmultisig_addr_to_pubkey(pwallet, pubkeys.at(i), keys[i].get_str());\n+        }\n+#endif\n+        _createmultisig_hex_to_pubkey(pubkeys.at(i), keys[i].get_str());\n+        if (!pubkeys.at(i).IsFullyValid()) {\n+            throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, strprintf(\"Invalid public key: %s Note that from v0.16, createmultisig no longer accepts addresses. Clients must transition to using addmultisigaddress to create multisig addresses with addresses known to the wallet before upgrading to v0.17. To use the deprecated functionality, start bitcoind with -deprecatedrpc=createmultisig)\", keys[i].get_str()));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r145206971",
      "id" : 145206971,
      "original_commit_id" : "ac33d788e2d7dbfdf760f3a620c86eeaf7cff3fd",
      "original_position" : 148,
      "path" : "src/rpc/misc.cpp",
      "position" : null,
      "pull_request_review_id" : 69973211,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415",
      "updated_at" : "2017-12-23T01:01:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/145206971",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/649246?v=4",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r145208650"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/145208650"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I find this API super weird - its confusing as-is that we will throw if the hex represents an invalid pubkey but not if the string represents an empty string or something non-hex, expecting two functions which might each optioanlly populate pubkey_out to be called back-to-back. Can you add the IsHex() check in createmultisig/addmultisigaddress itself before the call so that you switch which function you call there instead? Then you could just throw a JSONRPCError here if !IsHex. ",
      "commit_id" : "9e69c4ff98c0ed0f1af022d4d708e82f6910ce52",
      "created_at" : "2017-10-17T18:05:47Z",
      "diff_hunk" : "@@ -212,85 +212,57 @@ class CWallet;\n /**\n  * Used by addmultisigaddress / createmultisig:\n  */\n-CScript _createmultisig_redeemScript(CWallet * const pwallet, const UniValue& params)\n-{\n-    int nRequired = params[0].get_int();\n-    const UniValue& keys = params[1].get_array();\n+extern void _createmultisig_addr_to_pubkey(CWallet* const pwallet, CPubKey& pubkey_out, const std::string& addr_in);\n \n-    // Gather public keys\n-    if (nRequired < 1)\n-        throw std::runtime_error(\"a multisignature address must require at least one key to redeem\");\n-    if ((int)keys.size() < nRequired)\n-        throw std::runtime_error(\n-            strprintf(\"not enough keys supplied \"\n-                      \"(got %u keys, but need at least %d to redeem)\", keys.size(), nRequired));\n-    if (keys.size() > 16)\n-        throw std::runtime_error(\"Number of addresses involved in the multisignature address creation > 16\\nReduce the number\");\n-    std::vector<CPubKey> pubkeys;\n-    pubkeys.resize(keys.size());\n-    for (unsigned int i = 0; i < keys.size(); i++)\n+void _createmultisig_hex_to_pubkey(CPubKey& pubkey_out, const std::string& hex_in)\n+{\n+    if (IsHex(hex_in))",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r145208650",
      "id" : 145208650,
      "original_commit_id" : "ac33d788e2d7dbfdf760f3a620c86eeaf7cff3fd",
      "original_position" : 24,
      "path" : "src/rpc/misc.cpp",
      "position" : null,
      "pull_request_review_id" : 69973211,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415",
      "updated_at" : "2017-12-23T01:01:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/145208650",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/649246?v=4",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r145210159"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/145210159"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Note that pretty much all EnsureWalletIsAvailable does is a null-check on pwallet, so the && pwallet part is pretty redundant here.",
      "commit_id" : "9e69c4ff98c0ed0f1af022d4d708e82f6910ce52",
      "created_at" : "2017-10-17T18:11:05Z",
      "diff_hunk" : "@@ -301,16 +273,35 @@ UniValue createmultisig(const JSONRPCRequest& request)\n             \"}\\n\"\n \n             \"\\nExamples:\\n\"\n-            \"\\nCreate a multisig address from 2 addresses\\n\"\n-            + HelpExampleCli(\"createmultisig\", \"2 \\\"[\\\\\\\"16sSauSf5pF2UkUwvKGq4qjNRzBZYqgEL5\\\\\\\",\\\\\\\"171sgjn4YtPu27adkKGrdDwzRTxnRkBfKV\\\\\\\"]\\\"\") +\n+            \"\\nCreate a multisig address from 2 public keys\\n\"\n+            + HelpExampleCli(\"createmultisig\", \"2 \\\"[\\\\\\\"03789ed0bb717d88f7d321a368d905e7430207ebbd82bd342cf11ae157a7ace5fd\\\\\\\",\\\\\\\"03dbc6764b8884a92e871274b87583e6d5c2a58819473e17e107ef3f6aa5a61626\\\\\\\"]\\\"\") +\n             \"\\nAs a json rpc call\\n\"\n-            + HelpExampleRpc(\"createmultisig\", \"2, \\\"[\\\\\\\"16sSauSf5pF2UkUwvKGq4qjNRzBZYqgEL5\\\\\\\",\\\\\\\"171sgjn4YtPu27adkKGrdDwzRTxnRkBfKV\\\\\\\"]\\\"\")\n+            + HelpExampleRpc(\"createmultisig\", \"2, \\\"[\\\\\\\"03789ed0bb717d88f7d321a368d905e7430207ebbd82bd342cf11ae157a7ace5fd\\\\\\\",\\\\\\\"03dbc6764b8884a92e871274b87583e6d5c2a58819473e17e107ef3f6aa5a61626\\\\\\\"]\\\"\")\n         ;\n         throw std::runtime_error(msg);\n     }\n \n+    int required = request.params[0].get_int();\n+\n+    // Get the public keys\n+    const UniValue& keys = request.params[1].get_array();\n+    std::vector<CPubKey> pubkeys;\n+    pubkeys.resize(keys.size());\n+    for (unsigned int i = 0; i < keys.size(); ++i) {\n+#ifdef ENABLE_WALLET\n+        CWallet* const pwallet = GetWalletForJSONRPCRequest(request);\n+        if (IsDeprecatedRPCEnabled(\"createmultisig\") && EnsureWalletIsAvailable(pwallet, request.fHelp) && pwallet) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r145210159",
      "id" : 145210159,
      "original_commit_id" : "ac33d788e2d7dbfdf760f3a620c86eeaf7cff3fd",
      "original_position" : 142,
      "path" : "src/rpc/misc.cpp",
      "position" : null,
      "pull_request_review_id" : 69973211,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415",
      "updated_at" : "2017-12-23T01:01:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/145210159",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/649246?v=4",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r145239090"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/145239090"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "This error message is somewhat confusing (maybe \"%s is not an address\"), but, also, it'd be nice if this also worked for WitnessV0KeyHash as well.",
      "commit_id" : "9e69c4ff98c0ed0f1af022d4d708e82f6910ce52",
      "created_at" : "2017-10-17T20:00:58Z",
      "diff_hunk" : "@@ -1098,7 +1098,27 @@ UniValue sendmany(const JSONRPCRequest& request)\n }\n \n // Defined in rpc/misc.cpp\n-extern CScript _createmultisig_redeemScript(CWallet * const pwallet, const UniValue& params);\n+extern CScript _createmultisig_redeemScript(const int required, const std::vector<CPubKey>& pubkeys);\n+extern void _createmultisig_hex_to_pubkey(CPubKey& pubkey_out, const std::string& hex_in);\n+\n+void _createmultisig_addr_to_pubkey(CWallet* const pwallet, CPubKey& pubkey_out, const std::string& addr_in)\n+{\n+    CTxDestination dest = DecodeDestination(addr_in);\n+    if (IsValidDestination(dest)) {\n+        const CKeyID *keyID = boost::get<CKeyID>(&dest);\n+        if (!keyID) {\n+            throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, strprintf(\"%s does not refer to a key\", addr_in));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r145239090",
      "id" : 145239090,
      "original_commit_id" : "ac33d788e2d7dbfdf760f3a620c86eeaf7cff3fd",
      "original_position" : 14,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 69973211,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415",
      "updated_at" : "2017-12-23T01:01:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/145239090",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/649246?v=4",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r145239347"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/145239347"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I believe we could INTERNAL_ERROR here as wallet should never contain invalid pubkeys (and call the error \"Wallet contains invalid pubkey\" instead).",
      "commit_id" : "9e69c4ff98c0ed0f1af022d4d708e82f6910ce52",
      "created_at" : "2017-10-17T20:02:05Z",
      "diff_hunk" : "@@ -1098,7 +1098,27 @@ UniValue sendmany(const JSONRPCRequest& request)\n }\n \n // Defined in rpc/misc.cpp\n-extern CScript _createmultisig_redeemScript(CWallet * const pwallet, const UniValue& params);\n+extern CScript _createmultisig_redeemScript(const int required, const std::vector<CPubKey>& pubkeys);\n+extern void _createmultisig_hex_to_pubkey(CPubKey& pubkey_out, const std::string& hex_in);\n+\n+void _createmultisig_addr_to_pubkey(CWallet* const pwallet, CPubKey& pubkey_out, const std::string& addr_in)\n+{\n+    CTxDestination dest = DecodeDestination(addr_in);\n+    if (IsValidDestination(dest)) {\n+        const CKeyID *keyID = boost::get<CKeyID>(&dest);\n+        if (!keyID) {\n+            throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, strprintf(\"%s does not refer to a key\", addr_in));\n+        }\n+        CPubKey vchPubKey;\n+        if (!pwallet->GetPubKey(*keyID, vchPubKey)) {\n+            throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, strprintf(\"no full public key for address %s\", addr_in));\n+        }\n+        if (!vchPubKey.IsFullyValid()) {\n+            throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Invalid public key: \" + addr_in);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r145239347",
      "id" : 145239347,
      "original_commit_id" : "ac33d788e2d7dbfdf760f3a620c86eeaf7cff3fd",
      "original_position" : 21,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 69973211,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415",
      "updated_at" : "2017-12-23T01:01:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/145239347",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/649246?v=4",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r145569444"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/145569444"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Done.",
      "commit_id" : "9e69c4ff98c0ed0f1af022d4d708e82f6910ce52",
      "created_at" : "2017-10-18T23:30:16Z",
      "diff_hunk" : "@@ -212,85 +212,57 @@ class CWallet;\n /**\n  * Used by addmultisigaddress / createmultisig:\n  */\n-CScript _createmultisig_redeemScript(CWallet * const pwallet, const UniValue& params)\n-{\n-    int nRequired = params[0].get_int();\n-    const UniValue& keys = params[1].get_array();\n+extern void _createmultisig_addr_to_pubkey(CWallet* const pwallet, CPubKey& pubkey_out, const std::string& addr_in);\n \n-    // Gather public keys\n-    if (nRequired < 1)\n-        throw std::runtime_error(\"a multisignature address must require at least one key to redeem\");\n-    if ((int)keys.size() < nRequired)\n-        throw std::runtime_error(\n-            strprintf(\"not enough keys supplied \"\n-                      \"(got %u keys, but need at least %d to redeem)\", keys.size(), nRequired));\n-    if (keys.size() > 16)\n-        throw std::runtime_error(\"Number of addresses involved in the multisignature address creation > 16\\nReduce the number\");\n-    std::vector<CPubKey> pubkeys;\n-    pubkeys.resize(keys.size());\n-    for (unsigned int i = 0; i < keys.size(); i++)\n+void _createmultisig_hex_to_pubkey(CPubKey& pubkey_out, const std::string& hex_in)\n+{\n+    if (IsHex(hex_in))",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r145569444",
      "id" : 145569444,
      "in_reply_to_id" : 145208650,
      "original_commit_id" : "ac33d788e2d7dbfdf760f3a620c86eeaf7cff3fd",
      "original_position" : 24,
      "path" : "src/rpc/misc.cpp",
      "position" : null,
      "pull_request_review_id" : 70389016,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415",
      "updated_at" : "2017-12-23T01:01:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/145569444",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r145569455"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/145569455"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Done",
      "commit_id" : "9e69c4ff98c0ed0f1af022d4d708e82f6910ce52",
      "created_at" : "2017-10-18T23:30:20Z",
      "diff_hunk" : "@@ -301,16 +273,35 @@ UniValue createmultisig(const JSONRPCRequest& request)\n             \"}\\n\"\n \n             \"\\nExamples:\\n\"\n-            \"\\nCreate a multisig address from 2 addresses\\n\"\n-            + HelpExampleCli(\"createmultisig\", \"2 \\\"[\\\\\\\"16sSauSf5pF2UkUwvKGq4qjNRzBZYqgEL5\\\\\\\",\\\\\\\"171sgjn4YtPu27adkKGrdDwzRTxnRkBfKV\\\\\\\"]\\\"\") +\n+            \"\\nCreate a multisig address from 2 public keys\\n\"\n+            + HelpExampleCli(\"createmultisig\", \"2 \\\"[\\\\\\\"03789ed0bb717d88f7d321a368d905e7430207ebbd82bd342cf11ae157a7ace5fd\\\\\\\",\\\\\\\"03dbc6764b8884a92e871274b87583e6d5c2a58819473e17e107ef3f6aa5a61626\\\\\\\"]\\\"\") +\n             \"\\nAs a json rpc call\\n\"\n-            + HelpExampleRpc(\"createmultisig\", \"2, \\\"[\\\\\\\"16sSauSf5pF2UkUwvKGq4qjNRzBZYqgEL5\\\\\\\",\\\\\\\"171sgjn4YtPu27adkKGrdDwzRTxnRkBfKV\\\\\\\"]\\\"\")\n+            + HelpExampleRpc(\"createmultisig\", \"2, \\\"[\\\\\\\"03789ed0bb717d88f7d321a368d905e7430207ebbd82bd342cf11ae157a7ace5fd\\\\\\\",\\\\\\\"03dbc6764b8884a92e871274b87583e6d5c2a58819473e17e107ef3f6aa5a61626\\\\\\\"]\\\"\")\n         ;\n         throw std::runtime_error(msg);\n     }\n \n+    int required = request.params[0].get_int();\n+\n+    // Get the public keys\n+    const UniValue& keys = request.params[1].get_array();\n+    std::vector<CPubKey> pubkeys;\n+    pubkeys.resize(keys.size());\n+    for (unsigned int i = 0; i < keys.size(); ++i) {\n+#ifdef ENABLE_WALLET\n+        CWallet* const pwallet = GetWalletForJSONRPCRequest(request);\n+        if (IsDeprecatedRPCEnabled(\"createmultisig\") && EnsureWalletIsAvailable(pwallet, request.fHelp) && pwallet) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r145569455",
      "id" : 145569455,
      "in_reply_to_id" : 145210159,
      "original_commit_id" : "ac33d788e2d7dbfdf760f3a620c86eeaf7cff3fd",
      "original_position" : 142,
      "path" : "src/rpc/misc.cpp",
      "position" : null,
      "pull_request_review_id" : 70389029,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415",
      "updated_at" : "2017-12-23T01:01:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/145569455",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r145569725"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/145569725"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Done.",
      "commit_id" : "9e69c4ff98c0ed0f1af022d4d708e82f6910ce52",
      "created_at" : "2017-10-18T23:32:01Z",
      "diff_hunk" : "@@ -1098,7 +1098,27 @@ UniValue sendmany(const JSONRPCRequest& request)\n }\n \n // Defined in rpc/misc.cpp\n-extern CScript _createmultisig_redeemScript(CWallet * const pwallet, const UniValue& params);\n+extern CScript _createmultisig_redeemScript(const int required, const std::vector<CPubKey>& pubkeys);\n+extern void _createmultisig_hex_to_pubkey(CPubKey& pubkey_out, const std::string& hex_in);\n+\n+void _createmultisig_addr_to_pubkey(CWallet* const pwallet, CPubKey& pubkey_out, const std::string& addr_in)\n+{\n+    CTxDestination dest = DecodeDestination(addr_in);\n+    if (IsValidDestination(dest)) {\n+        const CKeyID *keyID = boost::get<CKeyID>(&dest);\n+        if (!keyID) {\n+            throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, strprintf(\"%s does not refer to a key\", addr_in));\n+        }\n+        CPubKey vchPubKey;\n+        if (!pwallet->GetPubKey(*keyID, vchPubKey)) {\n+            throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, strprintf(\"no full public key for address %s\", addr_in));\n+        }\n+        if (!vchPubKey.IsFullyValid()) {\n+            throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Invalid public key: \" + addr_in);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r145569725",
      "id" : 145569725,
      "in_reply_to_id" : 145239347,
      "original_commit_id" : "ac33d788e2d7dbfdf760f3a620c86eeaf7cff3fd",
      "original_position" : 21,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 70389337,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415",
      "updated_at" : "2017-12-23T01:01:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/145569725",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r145569820"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/145569820"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Done.",
      "commit_id" : "9e69c4ff98c0ed0f1af022d4d708e82f6910ce52",
      "created_at" : "2017-10-18T23:32:40Z",
      "diff_hunk" : "@@ -301,16 +273,35 @@ UniValue createmultisig(const JSONRPCRequest& request)\n             \"}\\n\"\n \n             \"\\nExamples:\\n\"\n-            \"\\nCreate a multisig address from 2 addresses\\n\"\n-            + HelpExampleCli(\"createmultisig\", \"2 \\\"[\\\\\\\"16sSauSf5pF2UkUwvKGq4qjNRzBZYqgEL5\\\\\\\",\\\\\\\"171sgjn4YtPu27adkKGrdDwzRTxnRkBfKV\\\\\\\"]\\\"\") +\n+            \"\\nCreate a multisig address from 2 public keys\\n\"\n+            + HelpExampleCli(\"createmultisig\", \"2 \\\"[\\\\\\\"03789ed0bb717d88f7d321a368d905e7430207ebbd82bd342cf11ae157a7ace5fd\\\\\\\",\\\\\\\"03dbc6764b8884a92e871274b87583e6d5c2a58819473e17e107ef3f6aa5a61626\\\\\\\"]\\\"\") +\n             \"\\nAs a json rpc call\\n\"\n-            + HelpExampleRpc(\"createmultisig\", \"2, \\\"[\\\\\\\"16sSauSf5pF2UkUwvKGq4qjNRzBZYqgEL5\\\\\\\",\\\\\\\"171sgjn4YtPu27adkKGrdDwzRTxnRkBfKV\\\\\\\"]\\\"\")\n+            + HelpExampleRpc(\"createmultisig\", \"2, \\\"[\\\\\\\"03789ed0bb717d88f7d321a368d905e7430207ebbd82bd342cf11ae157a7ace5fd\\\\\\\",\\\\\\\"03dbc6764b8884a92e871274b87583e6d5c2a58819473e17e107ef3f6aa5a61626\\\\\\\"]\\\"\")\n         ;\n         throw std::runtime_error(msg);\n     }\n \n+    int required = request.params[0].get_int();\n+\n+    // Get the public keys\n+    const UniValue& keys = request.params[1].get_array();\n+    std::vector<CPubKey> pubkeys;\n+    pubkeys.resize(keys.size());\n+    for (unsigned int i = 0; i < keys.size(); ++i) {\n+#ifdef ENABLE_WALLET\n+        CWallet* const pwallet = GetWalletForJSONRPCRequest(request);\n+        if (IsDeprecatedRPCEnabled(\"createmultisig\") && EnsureWalletIsAvailable(pwallet, request.fHelp) && pwallet) {\n+            _createmultisig_addr_to_pubkey(pwallet, pubkeys.at(i), keys[i].get_str());\n+        }\n+#endif\n+        _createmultisig_hex_to_pubkey(pubkeys.at(i), keys[i].get_str());\n+        if (!pubkeys.at(i).IsFullyValid()) {\n+            throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, strprintf(\"Invalid public key: %s Note that from v0.16, createmultisig no longer accepts addresses. Clients must transition to using addmultisigaddress to create multisig addresses with addresses known to the wallet before upgrading to v0.17. To use the deprecated functionality, start bitcoind with -deprecatedrpc=createmultisig)\", keys[i].get_str()));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r145569820",
      "id" : 145569820,
      "in_reply_to_id" : 145206971,
      "original_commit_id" : "ac33d788e2d7dbfdf760f3a620c86eeaf7cff3fd",
      "original_position" : 148,
      "path" : "src/rpc/misc.cpp",
      "position" : null,
      "pull_request_review_id" : 70389452,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415",
      "updated_at" : "2017-12-23T01:01:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/145569820",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r145573122"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/145573122"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I'm not sure what even causes this error to happen.",
      "commit_id" : "9e69c4ff98c0ed0f1af022d4d708e82f6910ce52",
      "created_at" : "2017-10-18T23:58:30Z",
      "diff_hunk" : "@@ -1098,7 +1098,27 @@ UniValue sendmany(const JSONRPCRequest& request)\n }\n \n // Defined in rpc/misc.cpp\n-extern CScript _createmultisig_redeemScript(CWallet * const pwallet, const UniValue& params);\n+extern CScript _createmultisig_redeemScript(const int required, const std::vector<CPubKey>& pubkeys);\n+extern void _createmultisig_hex_to_pubkey(CPubKey& pubkey_out, const std::string& hex_in);\n+\n+void _createmultisig_addr_to_pubkey(CWallet* const pwallet, CPubKey& pubkey_out, const std::string& addr_in)\n+{\n+    CTxDestination dest = DecodeDestination(addr_in);\n+    if (IsValidDestination(dest)) {\n+        const CKeyID *keyID = boost::get<CKeyID>(&dest);\n+        if (!keyID) {\n+            throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, strprintf(\"%s does not refer to a key\", addr_in));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r145573122",
      "id" : 145573122,
      "in_reply_to_id" : 145239090,
      "original_commit_id" : "ac33d788e2d7dbfdf760f3a620c86eeaf7cff3fd",
      "original_position" : 14,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 70393224,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415",
      "updated_at" : "2017-12-23T01:01:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/145573122",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r149438097"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/149438097"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit: can we get some line breaks here? 400+ char-long line is long....",
      "commit_id" : "9e69c4ff98c0ed0f1af022d4d708e82f6910ce52",
      "created_at" : "2017-11-07T17:04:21Z",
      "diff_hunk" : "@@ -301,16 +273,39 @@ UniValue createmultisig(const JSONRPCRequest& request)\n             \"}\\n\"\n \n             \"\\nExamples:\\n\"\n-            \"\\nCreate a multisig address from 2 addresses\\n\"\n-            + HelpExampleCli(\"createmultisig\", \"2 \\\"[\\\\\\\"16sSauSf5pF2UkUwvKGq4qjNRzBZYqgEL5\\\\\\\",\\\\\\\"171sgjn4YtPu27adkKGrdDwzRTxnRkBfKV\\\\\\\"]\\\"\") +\n+            \"\\nCreate a multisig address from 2 public keys\\n\"\n+            + HelpExampleCli(\"createmultisig\", \"2 \\\"[\\\\\\\"03789ed0bb717d88f7d321a368d905e7430207ebbd82bd342cf11ae157a7ace5fd\\\\\\\",\\\\\\\"03dbc6764b8884a92e871274b87583e6d5c2a58819473e17e107ef3f6aa5a61626\\\\\\\"]\\\"\") +\n             \"\\nAs a json rpc call\\n\"\n-            + HelpExampleRpc(\"createmultisig\", \"2, \\\"[\\\\\\\"16sSauSf5pF2UkUwvKGq4qjNRzBZYqgEL5\\\\\\\",\\\\\\\"171sgjn4YtPu27adkKGrdDwzRTxnRkBfKV\\\\\\\"]\\\"\")\n+            + HelpExampleRpc(\"createmultisig\", \"2, \\\"[\\\\\\\"03789ed0bb717d88f7d321a368d905e7430207ebbd82bd342cf11ae157a7ace5fd\\\\\\\",\\\\\\\"03dbc6764b8884a92e871274b87583e6d5c2a58819473e17e107ef3f6aa5a61626\\\\\\\"]\\\"\")\n         ;\n         throw std::runtime_error(msg);\n     }\n \n+    int required = request.params[0].get_int();\n+\n+    // Get the public keys\n+    const UniValue& keys = request.params[1].get_array();\n+    std::vector<CPubKey> pubkeys;\n+    pubkeys.resize(keys.size());\n+    for (unsigned int i = 0; i < keys.size(); ++i) {\n+        if (IsHex(keys[i].get_str())) {\n+            _createmultisig_hex_to_pubkey(pubkeys.at(i), keys[i].get_str());\n+        } else {\n+#ifdef ENABLE_WALLET\n+            CWallet* const pwallet = GetWalletForJSONRPCRequest(request);\n+            if (IsDeprecatedRPCEnabled(\"createmultisig\") && EnsureWalletIsAvailable(pwallet, request.fHelp)) {\n+                _createmultisig_addr_to_pubkey(pwallet, pubkeys.at(i), keys[i].get_str());\n+            } else\n+#endif\n+            throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, strprintf(\"Invalid public key: %s Note that from v0.16, createmultisig no longer accepts addresses. Clients must transition to using addmultisigaddress to create multisig addresses with addresses known to the wallet before upgrading to v0.17. To use the deprecated functionality, start bitcoind with -deprecatedrpc=createmultisig\", keys[i].get_str()));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r149438097",
      "id" : 149438097,
      "original_commit_id" : "257d4fd6fb0ff0347284980f61c014c179f579d5",
      "original_position" : 150,
      "path" : "src/rpc/misc.cpp",
      "position" : null,
      "pull_request_review_id" : 74828886,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415",
      "updated_at" : "2017-12-23T01:01:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/149438097",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/649246?v=4",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r149452185"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/149452185"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I think you want false for EnsureWalletIsAvailable's second argument (avoidException), which makes EnsureWalletIsAvailable just return true if pwallet is non-null, so you could replace it with that anyway.",
      "commit_id" : "9e69c4ff98c0ed0f1af022d4d708e82f6910ce52",
      "created_at" : "2017-11-07T17:55:45Z",
      "diff_hunk" : "@@ -301,16 +273,39 @@ UniValue createmultisig(const JSONRPCRequest& request)\n             \"}\\n\"\n \n             \"\\nExamples:\\n\"\n-            \"\\nCreate a multisig address from 2 addresses\\n\"\n-            + HelpExampleCli(\"createmultisig\", \"2 \\\"[\\\\\\\"16sSauSf5pF2UkUwvKGq4qjNRzBZYqgEL5\\\\\\\",\\\\\\\"171sgjn4YtPu27adkKGrdDwzRTxnRkBfKV\\\\\\\"]\\\"\") +\n+            \"\\nCreate a multisig address from 2 public keys\\n\"\n+            + HelpExampleCli(\"createmultisig\", \"2 \\\"[\\\\\\\"03789ed0bb717d88f7d321a368d905e7430207ebbd82bd342cf11ae157a7ace5fd\\\\\\\",\\\\\\\"03dbc6764b8884a92e871274b87583e6d5c2a58819473e17e107ef3f6aa5a61626\\\\\\\"]\\\"\") +\n             \"\\nAs a json rpc call\\n\"\n-            + HelpExampleRpc(\"createmultisig\", \"2, \\\"[\\\\\\\"16sSauSf5pF2UkUwvKGq4qjNRzBZYqgEL5\\\\\\\",\\\\\\\"171sgjn4YtPu27adkKGrdDwzRTxnRkBfKV\\\\\\\"]\\\"\")\n+            + HelpExampleRpc(\"createmultisig\", \"2, \\\"[\\\\\\\"03789ed0bb717d88f7d321a368d905e7430207ebbd82bd342cf11ae157a7ace5fd\\\\\\\",\\\\\\\"03dbc6764b8884a92e871274b87583e6d5c2a58819473e17e107ef3f6aa5a61626\\\\\\\"]\\\"\")\n         ;\n         throw std::runtime_error(msg);\n     }\n \n+    int required = request.params[0].get_int();\n+\n+    // Get the public keys\n+    const UniValue& keys = request.params[1].get_array();\n+    std::vector<CPubKey> pubkeys;\n+    pubkeys.resize(keys.size());\n+    for (unsigned int i = 0; i < keys.size(); ++i) {\n+        if (IsHex(keys[i].get_str())) {\n+            _createmultisig_hex_to_pubkey(pubkeys.at(i), keys[i].get_str());\n+        } else {\n+#ifdef ENABLE_WALLET\n+            CWallet* const pwallet = GetWalletForJSONRPCRequest(request);\n+            if (IsDeprecatedRPCEnabled(\"createmultisig\") && EnsureWalletIsAvailable(pwallet, request.fHelp)) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r149452185",
      "id" : 149452185,
      "original_commit_id" : "257d4fd6fb0ff0347284980f61c014c179f579d5",
      "original_position" : 146,
      "path" : "src/rpc/misc.cpp",
      "position" : null,
      "pull_request_review_id" : 74828886,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415",
      "updated_at" : "2017-12-23T01:01:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/149452185",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/649246?v=4",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r149454192"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/149454192"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I guess this is now an internal error, given that both _createmultisig_addr_to_pubkey and _createmultisig_hex_to_pubkey throw if !IsFullyValid?",
      "commit_id" : "9e69c4ff98c0ed0f1af022d4d708e82f6910ce52",
      "created_at" : "2017-11-07T18:02:54Z",
      "diff_hunk" : "@@ -301,16 +273,39 @@ UniValue createmultisig(const JSONRPCRequest& request)\n             \"}\\n\"\n \n             \"\\nExamples:\\n\"\n-            \"\\nCreate a multisig address from 2 addresses\\n\"\n-            + HelpExampleCli(\"createmultisig\", \"2 \\\"[\\\\\\\"16sSauSf5pF2UkUwvKGq4qjNRzBZYqgEL5\\\\\\\",\\\\\\\"171sgjn4YtPu27adkKGrdDwzRTxnRkBfKV\\\\\\\"]\\\"\") +\n+            \"\\nCreate a multisig address from 2 public keys\\n\"\n+            + HelpExampleCli(\"createmultisig\", \"2 \\\"[\\\\\\\"03789ed0bb717d88f7d321a368d905e7430207ebbd82bd342cf11ae157a7ace5fd\\\\\\\",\\\\\\\"03dbc6764b8884a92e871274b87583e6d5c2a58819473e17e107ef3f6aa5a61626\\\\\\\"]\\\"\") +\n             \"\\nAs a json rpc call\\n\"\n-            + HelpExampleRpc(\"createmultisig\", \"2, \\\"[\\\\\\\"16sSauSf5pF2UkUwvKGq4qjNRzBZYqgEL5\\\\\\\",\\\\\\\"171sgjn4YtPu27adkKGrdDwzRTxnRkBfKV\\\\\\\"]\\\"\")\n+            + HelpExampleRpc(\"createmultisig\", \"2, \\\"[\\\\\\\"03789ed0bb717d88f7d321a368d905e7430207ebbd82bd342cf11ae157a7ace5fd\\\\\\\",\\\\\\\"03dbc6764b8884a92e871274b87583e6d5c2a58819473e17e107ef3f6aa5a61626\\\\\\\"]\\\"\")\n         ;\n         throw std::runtime_error(msg);\n     }\n \n+    int required = request.params[0].get_int();\n+\n+    // Get the public keys\n+    const UniValue& keys = request.params[1].get_array();\n+    std::vector<CPubKey> pubkeys;\n+    pubkeys.resize(keys.size());\n+    for (unsigned int i = 0; i < keys.size(); ++i) {\n+        if (IsHex(keys[i].get_str())) {\n+            _createmultisig_hex_to_pubkey(pubkeys.at(i), keys[i].get_str());\n+        } else {\n+#ifdef ENABLE_WALLET\n+            CWallet* const pwallet = GetWalletForJSONRPCRequest(request);\n+            if (IsDeprecatedRPCEnabled(\"createmultisig\") && EnsureWalletIsAvailable(pwallet, request.fHelp)) {\n+                _createmultisig_addr_to_pubkey(pwallet, pubkeys.at(i), keys[i].get_str());\n+            } else\n+#endif\n+            throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, strprintf(\"Invalid public key: %s Note that from v0.16, createmultisig no longer accepts addresses. Clients must transition to using addmultisigaddress to create multisig addresses with addresses known to the wallet before upgrading to v0.17. To use the deprecated functionality, start bitcoind with -deprecatedrpc=createmultisig\", keys[i].get_str()));\n+        }\n+        if (!pubkeys.at(i).IsFullyValid()) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r149454192",
      "id" : 149454192,
      "original_commit_id" : "257d4fd6fb0ff0347284980f61c014c179f579d5",
      "original_position" : 152,
      "path" : "src/rpc/misc.cpp",
      "position" : null,
      "pull_request_review_id" : 74828886,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415",
      "updated_at" : "2017-12-23T01:01:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/149454192",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/649246?v=4",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r149457301"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/149457301"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I dont think you need to bother deprecating the return value - the old value is still there, just in the address field - I'd say just add this to the release notes and skip this part.",
      "commit_id" : "9e69c4ff98c0ed0f1af022d4d708e82f6910ce52",
      "created_at" : "2017-11-07T18:14:11Z",
      "diff_hunk" : "@@ -1115,16 +1136,22 @@ UniValue addmultisigaddress(const JSONRPCRequest& request)\n             \"If 'account' is specified (DEPRECATED), assign address to that account.\\n\"\n \n             \"\\nArguments:\\n\"\n-            \"1. nrequired        (numeric, required) The number of required signatures out of the n keys or addresses.\\n\"\n-            \"2. \\\"keys\\\"         (string, required) A json array of bitcoin addresses or hex-encoded public keys\\n\"\n+            \"1. nrequired                      (numeric, required) The number of required signatures out of the n keys or addresses.\\n\"\n+            \"2. \\\"keys\\\"                         (string, required) A json array of bitcoin addresses or hex-encoded public keys\\n\"\n             \"     [\\n\"\n-            \"       \\\"address\\\"  (string) bitcoin address or hex-encoded public key\\n\"\n+            \"       \\\"address\\\"                  (string) bitcoin address or hex-encoded public key\\n\"\n             \"       ...,\\n\"\n             \"     ]\\n\"\n-            \"3. \\\"account\\\"      (string, optional) DEPRECATED. An account to assign the addresses to.\\n\"\n+            \"3. \\\"account\\\"                      (string, optional) DEPRECATED. An account to assign the addresses to.\\n\"\n \n             \"\\nResult:\\n\"\n-            \"\\\"address\\\"         (string) A bitcoin address associated with the keys.\\n\"\n+            \"{\\n\"\n+            \"  \\\"address\\\":\\\"multisigaddress\\\",    (string) The value of the new multisig address.\\n\"\n+            \"  \\\"redeemScript\\\":\\\"script\\\"         (string) The string value of the hex-encoded redemption script.\\n\"\n+            \"}\\n\"\n+            \"\\nResult (DEPRECATED. To see this result in v0.16 instead, please start bitcoind with -deprecatedrpc=addmultisigaddress).\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r149457301",
      "id" : 149457301,
      "original_commit_id" : "257d4fd6fb0ff0347284980f61c014c179f579d5",
      "original_position" : 52,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : 40,
      "pull_request_review_id" : 74828886,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415",
      "updated_at" : "2017-12-23T01:01:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/149457301",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/649246?v=4",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r149470277"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/149470277"
         }
      },
      "author_association" : "MEMBER",
      "body" : "That's what I was originally going to do but I think we should be consistent on when and how things are deprecated. So this follows what we have been doing with deprecation of other things.",
      "commit_id" : "9e69c4ff98c0ed0f1af022d4d708e82f6910ce52",
      "created_at" : "2017-11-07T19:00:30Z",
      "diff_hunk" : "@@ -1115,16 +1136,22 @@ UniValue addmultisigaddress(const JSONRPCRequest& request)\n             \"If 'account' is specified (DEPRECATED), assign address to that account.\\n\"\n \n             \"\\nArguments:\\n\"\n-            \"1. nrequired        (numeric, required) The number of required signatures out of the n keys or addresses.\\n\"\n-            \"2. \\\"keys\\\"         (string, required) A json array of bitcoin addresses or hex-encoded public keys\\n\"\n+            \"1. nrequired                      (numeric, required) The number of required signatures out of the n keys or addresses.\\n\"\n+            \"2. \\\"keys\\\"                         (string, required) A json array of bitcoin addresses or hex-encoded public keys\\n\"\n             \"     [\\n\"\n-            \"       \\\"address\\\"  (string) bitcoin address or hex-encoded public key\\n\"\n+            \"       \\\"address\\\"                  (string) bitcoin address or hex-encoded public key\\n\"\n             \"       ...,\\n\"\n             \"     ]\\n\"\n-            \"3. \\\"account\\\"      (string, optional) DEPRECATED. An account to assign the addresses to.\\n\"\n+            \"3. \\\"account\\\"                      (string, optional) DEPRECATED. An account to assign the addresses to.\\n\"\n \n             \"\\nResult:\\n\"\n-            \"\\\"address\\\"         (string) A bitcoin address associated with the keys.\\n\"\n+            \"{\\n\"\n+            \"  \\\"address\\\":\\\"multisigaddress\\\",    (string) The value of the new multisig address.\\n\"\n+            \"  \\\"redeemScript\\\":\\\"script\\\"         (string) The string value of the hex-encoded redemption script.\\n\"\n+            \"}\\n\"\n+            \"\\nResult (DEPRECATED. To see this result in v0.16 instead, please start bitcoind with -deprecatedrpc=addmultisigaddress).\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r149470277",
      "id" : 149470277,
      "in_reply_to_id" : 149457301,
      "original_commit_id" : "257d4fd6fb0ff0347284980f61c014c179f579d5",
      "original_position" : 52,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : 40,
      "pull_request_review_id" : 74868425,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415",
      "updated_at" : "2017-12-23T01:01:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/149470277",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r149472041"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/149472041"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Done",
      "commit_id" : "9e69c4ff98c0ed0f1af022d4d708e82f6910ce52",
      "created_at" : "2017-11-07T19:06:53Z",
      "diff_hunk" : "@@ -301,16 +273,39 @@ UniValue createmultisig(const JSONRPCRequest& request)\n             \"}\\n\"\n \n             \"\\nExamples:\\n\"\n-            \"\\nCreate a multisig address from 2 addresses\\n\"\n-            + HelpExampleCli(\"createmultisig\", \"2 \\\"[\\\\\\\"16sSauSf5pF2UkUwvKGq4qjNRzBZYqgEL5\\\\\\\",\\\\\\\"171sgjn4YtPu27adkKGrdDwzRTxnRkBfKV\\\\\\\"]\\\"\") +\n+            \"\\nCreate a multisig address from 2 public keys\\n\"\n+            + HelpExampleCli(\"createmultisig\", \"2 \\\"[\\\\\\\"03789ed0bb717d88f7d321a368d905e7430207ebbd82bd342cf11ae157a7ace5fd\\\\\\\",\\\\\\\"03dbc6764b8884a92e871274b87583e6d5c2a58819473e17e107ef3f6aa5a61626\\\\\\\"]\\\"\") +\n             \"\\nAs a json rpc call\\n\"\n-            + HelpExampleRpc(\"createmultisig\", \"2, \\\"[\\\\\\\"16sSauSf5pF2UkUwvKGq4qjNRzBZYqgEL5\\\\\\\",\\\\\\\"171sgjn4YtPu27adkKGrdDwzRTxnRkBfKV\\\\\\\"]\\\"\")\n+            + HelpExampleRpc(\"createmultisig\", \"2, \\\"[\\\\\\\"03789ed0bb717d88f7d321a368d905e7430207ebbd82bd342cf11ae157a7ace5fd\\\\\\\",\\\\\\\"03dbc6764b8884a92e871274b87583e6d5c2a58819473e17e107ef3f6aa5a61626\\\\\\\"]\\\"\")\n         ;\n         throw std::runtime_error(msg);\n     }\n \n+    int required = request.params[0].get_int();\n+\n+    // Get the public keys\n+    const UniValue& keys = request.params[1].get_array();\n+    std::vector<CPubKey> pubkeys;\n+    pubkeys.resize(keys.size());\n+    for (unsigned int i = 0; i < keys.size(); ++i) {\n+        if (IsHex(keys[i].get_str())) {\n+            _createmultisig_hex_to_pubkey(pubkeys.at(i), keys[i].get_str());\n+        } else {\n+#ifdef ENABLE_WALLET\n+            CWallet* const pwallet = GetWalletForJSONRPCRequest(request);\n+            if (IsDeprecatedRPCEnabled(\"createmultisig\") && EnsureWalletIsAvailable(pwallet, request.fHelp)) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r149472041",
      "id" : 149472041,
      "in_reply_to_id" : 149452185,
      "original_commit_id" : "257d4fd6fb0ff0347284980f61c014c179f579d5",
      "original_position" : 146,
      "path" : "src/rpc/misc.cpp",
      "position" : null,
      "pull_request_review_id" : 74870574,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415",
      "updated_at" : "2017-12-23T01:01:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/149472041",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r149472055"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/149472055"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Done",
      "commit_id" : "9e69c4ff98c0ed0f1af022d4d708e82f6910ce52",
      "created_at" : "2017-11-07T19:06:58Z",
      "diff_hunk" : "@@ -301,16 +273,39 @@ UniValue createmultisig(const JSONRPCRequest& request)\n             \"}\\n\"\n \n             \"\\nExamples:\\n\"\n-            \"\\nCreate a multisig address from 2 addresses\\n\"\n-            + HelpExampleCli(\"createmultisig\", \"2 \\\"[\\\\\\\"16sSauSf5pF2UkUwvKGq4qjNRzBZYqgEL5\\\\\\\",\\\\\\\"171sgjn4YtPu27adkKGrdDwzRTxnRkBfKV\\\\\\\"]\\\"\") +\n+            \"\\nCreate a multisig address from 2 public keys\\n\"\n+            + HelpExampleCli(\"createmultisig\", \"2 \\\"[\\\\\\\"03789ed0bb717d88f7d321a368d905e7430207ebbd82bd342cf11ae157a7ace5fd\\\\\\\",\\\\\\\"03dbc6764b8884a92e871274b87583e6d5c2a58819473e17e107ef3f6aa5a61626\\\\\\\"]\\\"\") +\n             \"\\nAs a json rpc call\\n\"\n-            + HelpExampleRpc(\"createmultisig\", \"2, \\\"[\\\\\\\"16sSauSf5pF2UkUwvKGq4qjNRzBZYqgEL5\\\\\\\",\\\\\\\"171sgjn4YtPu27adkKGrdDwzRTxnRkBfKV\\\\\\\"]\\\"\")\n+            + HelpExampleRpc(\"createmultisig\", \"2, \\\"[\\\\\\\"03789ed0bb717d88f7d321a368d905e7430207ebbd82bd342cf11ae157a7ace5fd\\\\\\\",\\\\\\\"03dbc6764b8884a92e871274b87583e6d5c2a58819473e17e107ef3f6aa5a61626\\\\\\\"]\\\"\")\n         ;\n         throw std::runtime_error(msg);\n     }\n \n+    int required = request.params[0].get_int();\n+\n+    // Get the public keys\n+    const UniValue& keys = request.params[1].get_array();\n+    std::vector<CPubKey> pubkeys;\n+    pubkeys.resize(keys.size());\n+    for (unsigned int i = 0; i < keys.size(); ++i) {\n+        if (IsHex(keys[i].get_str())) {\n+            _createmultisig_hex_to_pubkey(pubkeys.at(i), keys[i].get_str());\n+        } else {\n+#ifdef ENABLE_WALLET\n+            CWallet* const pwallet = GetWalletForJSONRPCRequest(request);\n+            if (IsDeprecatedRPCEnabled(\"createmultisig\") && EnsureWalletIsAvailable(pwallet, request.fHelp)) {\n+                _createmultisig_addr_to_pubkey(pwallet, pubkeys.at(i), keys[i].get_str());\n+            } else\n+#endif\n+            throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, strprintf(\"Invalid public key: %s Note that from v0.16, createmultisig no longer accepts addresses. Clients must transition to using addmultisigaddress to create multisig addresses with addresses known to the wallet before upgrading to v0.17. To use the deprecated functionality, start bitcoind with -deprecatedrpc=createmultisig\", keys[i].get_str()));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r149472055",
      "id" : 149472055,
      "in_reply_to_id" : 149438097,
      "original_commit_id" : "257d4fd6fb0ff0347284980f61c014c179f579d5",
      "original_position" : 150,
      "path" : "src/rpc/misc.cpp",
      "position" : null,
      "pull_request_review_id" : 74870593,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415",
      "updated_at" : "2017-12-23T01:01:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/149472055",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r149472257"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/149472257"
         }
      },
      "author_association" : "MEMBER",
      "body" : "This check is extraneous now since both `_createmultisig_addr_to_pubkey` and `_createmultisig_hex_to_pubkey` do the same check, so I removed it.",
      "commit_id" : "9e69c4ff98c0ed0f1af022d4d708e82f6910ce52",
      "created_at" : "2017-11-07T19:07:38Z",
      "diff_hunk" : "@@ -301,16 +273,39 @@ UniValue createmultisig(const JSONRPCRequest& request)\n             \"}\\n\"\n \n             \"\\nExamples:\\n\"\n-            \"\\nCreate a multisig address from 2 addresses\\n\"\n-            + HelpExampleCli(\"createmultisig\", \"2 \\\"[\\\\\\\"16sSauSf5pF2UkUwvKGq4qjNRzBZYqgEL5\\\\\\\",\\\\\\\"171sgjn4YtPu27adkKGrdDwzRTxnRkBfKV\\\\\\\"]\\\"\") +\n+            \"\\nCreate a multisig address from 2 public keys\\n\"\n+            + HelpExampleCli(\"createmultisig\", \"2 \\\"[\\\\\\\"03789ed0bb717d88f7d321a368d905e7430207ebbd82bd342cf11ae157a7ace5fd\\\\\\\",\\\\\\\"03dbc6764b8884a92e871274b87583e6d5c2a58819473e17e107ef3f6aa5a61626\\\\\\\"]\\\"\") +\n             \"\\nAs a json rpc call\\n\"\n-            + HelpExampleRpc(\"createmultisig\", \"2, \\\"[\\\\\\\"16sSauSf5pF2UkUwvKGq4qjNRzBZYqgEL5\\\\\\\",\\\\\\\"171sgjn4YtPu27adkKGrdDwzRTxnRkBfKV\\\\\\\"]\\\"\")\n+            + HelpExampleRpc(\"createmultisig\", \"2, \\\"[\\\\\\\"03789ed0bb717d88f7d321a368d905e7430207ebbd82bd342cf11ae157a7ace5fd\\\\\\\",\\\\\\\"03dbc6764b8884a92e871274b87583e6d5c2a58819473e17e107ef3f6aa5a61626\\\\\\\"]\\\"\")\n         ;\n         throw std::runtime_error(msg);\n     }\n \n+    int required = request.params[0].get_int();\n+\n+    // Get the public keys\n+    const UniValue& keys = request.params[1].get_array();\n+    std::vector<CPubKey> pubkeys;\n+    pubkeys.resize(keys.size());\n+    for (unsigned int i = 0; i < keys.size(); ++i) {\n+        if (IsHex(keys[i].get_str())) {\n+            _createmultisig_hex_to_pubkey(pubkeys.at(i), keys[i].get_str());\n+        } else {\n+#ifdef ENABLE_WALLET\n+            CWallet* const pwallet = GetWalletForJSONRPCRequest(request);\n+            if (IsDeprecatedRPCEnabled(\"createmultisig\") && EnsureWalletIsAvailable(pwallet, request.fHelp)) {\n+                _createmultisig_addr_to_pubkey(pwallet, pubkeys.at(i), keys[i].get_str());\n+            } else\n+#endif\n+            throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, strprintf(\"Invalid public key: %s Note that from v0.16, createmultisig no longer accepts addresses. Clients must transition to using addmultisigaddress to create multisig addresses with addresses known to the wallet before upgrading to v0.17. To use the deprecated functionality, start bitcoind with -deprecatedrpc=createmultisig\", keys[i].get_str()));\n+        }\n+        if (!pubkeys.at(i).IsFullyValid()) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r149472257",
      "id" : 149472257,
      "in_reply_to_id" : 149454192,
      "original_commit_id" : "257d4fd6fb0ff0347284980f61c014c179f579d5",
      "original_position" : 152,
      "path" : "src/rpc/misc.cpp",
      "position" : null,
      "pull_request_review_id" : 74870817,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415",
      "updated_at" : "2017-12-23T01:01:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/149472257",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r149519160"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/149519160"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Same as in the non-wallet call - this is superfluous now.",
      "commit_id" : "9e69c4ff98c0ed0f1af022d4d708e82f6910ce52",
      "created_at" : "2017-11-07T22:09:16Z",
      "diff_hunk" : "@@ -1141,13 +1168,39 @@ UniValue addmultisigaddress(const JSONRPCRequest& request)\n     if (!request.params[2].isNull())\n         strAccount = AccountFromValue(request.params[2]);\n \n+    int required = request.params[0].get_int();\n+\n+    // Get the public keys\n+    const UniValue& keys_or_addrs = request.params[1].get_array();\n+    std::vector<CPubKey> pubkeys;\n+    pubkeys.resize(keys_or_addrs.size());\n+    for (unsigned int i = 0; i < keys_or_addrs.size(); ++i) {\n+        if (IsHex(keys_or_addrs[i].get_str())) {\n+            _createmultisig_hex_to_pubkey(pubkeys.at(i), keys_or_addrs[i].get_str());\n+        } else {\n+            _createmultisig_addr_to_pubkey(pwallet, pubkeys.at(i), keys_or_addrs[i].get_str());\n+        }\n+        if (!pubkeys.at(i).IsFullyValid()) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r149519160",
      "id" : 149519160,
      "original_commit_id" : "36b9e675b93415bac9fe0bf8e9cd2243a6bee5aa",
      "original_position" : 74,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 74926361,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415",
      "updated_at" : "2017-12-23T01:01:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/149519160",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/649246?v=4",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r149519704"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/149519704"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit: for functions which are not put in headers but used expernally, can you put a comment where the function is defined noting that it is duplicated elsewhere so people wishing to change its API are aware.",
      "commit_id" : "9e69c4ff98c0ed0f1af022d4d708e82f6910ce52",
      "created_at" : "2017-11-07T22:11:31Z",
      "diff_hunk" : "@@ -212,85 +212,57 @@ class CWallet;\n /**\n  * Used by addmultisigaddress / createmultisig:\n  */\n-CScript _createmultisig_redeemScript(CWallet * const pwallet, const UniValue& params)\n+extern void _createmultisig_addr_to_pubkey(CWallet* const pwallet, CPubKey& pubkey_out, const std::string& addr_in);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r149519704",
      "id" : 149519704,
      "original_commit_id" : "36b9e675b93415bac9fe0bf8e9cd2243a6bee5aa",
      "original_position" : 5,
      "path" : "src/rpc/misc.cpp",
      "position" : null,
      "pull_request_review_id" : 74926361,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415",
      "updated_at" : "2017-12-23T01:01:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/149519704",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/649246?v=4",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r149519883"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/149519883"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit: really sucks that these are not put in headers - we're not just waiting to remove them in 0.17 when the deprecation goes away, but we're stuck with them. Can we find some place to put them?",
      "commit_id" : "9e69c4ff98c0ed0f1af022d4d708e82f6910ce52",
      "created_at" : "2017-11-07T22:12:10Z",
      "diff_hunk" : "@@ -1098,7 +1098,28 @@ UniValue sendmany(const JSONRPCRequest& request)\n }\n \n // Defined in rpc/misc.cpp\n-extern CScript _createmultisig_redeemScript(CWallet * const pwallet, const UniValue& params);\n+extern CScript _createmultisig_redeemScript(const int required, const std::vector<CPubKey>& pubkeys);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r149519883",
      "id" : 149519883,
      "original_commit_id" : "36b9e675b93415bac9fe0bf8e9cd2243a6bee5aa",
      "original_position" : 5,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 74926361,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415",
      "updated_at" : "2017-12-23T01:01:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/149519883",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/649246?v=4",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r149529163"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/149529163"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "> nit: really sucks that these are not put in headers - we're not just waiting to remove them in 0.17 when the deprecation goes away, but we're stuck with them. Can we find some place to put them?\r\n\r\nAgree these are really ugly. I would put them in rpc/util.h and rpc/util.cpp files, where other rpc helper functions like ParseConfirmTarget could live as well. As mentioned above, I would also change these to normal CamelCase, drop mention of multisig in _createmultisig_hex_to_pubkey and _createmultisig_addr_to_pubkey since they are not multisig-specific, and change the wallet argument to a keystore pointer in the latter since it is not wallet-specific.",
      "commit_id" : "9e69c4ff98c0ed0f1af022d4d708e82f6910ce52",
      "created_at" : "2017-11-07T22:52:58Z",
      "diff_hunk" : "@@ -1098,7 +1098,28 @@ UniValue sendmany(const JSONRPCRequest& request)\n }\n \n // Defined in rpc/misc.cpp\n-extern CScript _createmultisig_redeemScript(CWallet * const pwallet, const UniValue& params);\n+extern CScript _createmultisig_redeemScript(const int required, const std::vector<CPubKey>& pubkeys);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r149529163",
      "id" : 149529163,
      "in_reply_to_id" : 149519883,
      "original_commit_id" : "36b9e675b93415bac9fe0bf8e9cd2243a6bee5aa",
      "original_position" : 5,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 74938156,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415",
      "updated_at" : "2017-12-23T01:01:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/149529163",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r149572410"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/149572410"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Renamed to `AddrToPubKey` and the extern declaration was moved to `rpc/util.h`. Also added a comment with where it is defined.",
      "commit_id" : "9e69c4ff98c0ed0f1af022d4d708e82f6910ce52",
      "created_at" : "2017-11-08T04:25:19Z",
      "diff_hunk" : "@@ -212,85 +212,57 @@ class CWallet;\n /**\n  * Used by addmultisigaddress / createmultisig:\n  */\n-CScript _createmultisig_redeemScript(CWallet * const pwallet, const UniValue& params)\n+extern void _createmultisig_addr_to_pubkey(CWallet* const pwallet, CPubKey& pubkey_out, const std::string& addr_in);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r149572410",
      "id" : 149572410,
      "in_reply_to_id" : 149519704,
      "original_commit_id" : "36b9e675b93415bac9fe0bf8e9cd2243a6bee5aa",
      "original_position" : 5,
      "path" : "src/rpc/misc.cpp",
      "position" : null,
      "pull_request_review_id" : 74986986,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415",
      "updated_at" : "2017-12-23T01:01:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/149572410",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r149572459"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/149572459"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I created `rpc/util.cpp` and `rpc/util.h` and moved the functions there. I also renamed them to be `HexToPubKey` and `AddrToPubKey`.",
      "commit_id" : "9e69c4ff98c0ed0f1af022d4d708e82f6910ce52",
      "created_at" : "2017-11-08T04:25:53Z",
      "diff_hunk" : "@@ -1098,7 +1098,28 @@ UniValue sendmany(const JSONRPCRequest& request)\n }\n \n // Defined in rpc/misc.cpp\n-extern CScript _createmultisig_redeemScript(CWallet * const pwallet, const UniValue& params);\n+extern CScript _createmultisig_redeemScript(const int required, const std::vector<CPubKey>& pubkeys);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r149572459",
      "id" : 149572459,
      "in_reply_to_id" : 149519883,
      "original_commit_id" : "36b9e675b93415bac9fe0bf8e9cd2243a6bee5aa",
      "original_position" : 5,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 74987036,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415",
      "updated_at" : "2017-12-23T01:01:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/149572459",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r149572471"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/149572471"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Done.",
      "commit_id" : "9e69c4ff98c0ed0f1af022d4d708e82f6910ce52",
      "created_at" : "2017-11-08T04:26:04Z",
      "diff_hunk" : "@@ -1141,13 +1168,39 @@ UniValue addmultisigaddress(const JSONRPCRequest& request)\n     if (!request.params[2].isNull())\n         strAccount = AccountFromValue(request.params[2]);\n \n+    int required = request.params[0].get_int();\n+\n+    // Get the public keys\n+    const UniValue& keys_or_addrs = request.params[1].get_array();\n+    std::vector<CPubKey> pubkeys;\n+    pubkeys.resize(keys_or_addrs.size());\n+    for (unsigned int i = 0; i < keys_or_addrs.size(); ++i) {\n+        if (IsHex(keys_or_addrs[i].get_str())) {\n+            _createmultisig_hex_to_pubkey(pubkeys.at(i), keys_or_addrs[i].get_str());\n+        } else {\n+            _createmultisig_addr_to_pubkey(pwallet, pubkeys.at(i), keys_or_addrs[i].get_str());\n+        }\n+        if (!pubkeys.at(i).IsFullyValid()) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r149572471",
      "id" : 149572471,
      "in_reply_to_id" : 149519160,
      "original_commit_id" : "36b9e675b93415bac9fe0bf8e9cd2243a6bee5aa",
      "original_position" : 74,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 74987052,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415",
      "updated_at" : "2017-12-23T01:01:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/149572471",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Build fails locally and on Travis. Will review once build is fixed.",
      "created_at" : "2017-11-08T13:32:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11415#issuecomment-342818226",
      "id" : 342818226,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11415",
      "updated_at" : "2017-11-08T13:32:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/342818226",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Build fails locally and on Travis. Will review once build is fixed.\r\n\r\nEhh.. It works fine for me locally :/ (even after `git clean -fdx`)",
      "created_at" : "2017-11-08T16:46:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11415#issuecomment-342878478",
      "id" : 342878478,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11415",
      "updated_at" : "2017-11-08T16:46:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/342878478",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Ehh.. It works fine for me locally :/ (even after git clean -fdx)\r\n\r\nI get the errors from travis locally. Following fix worked for me:\r\n\r\n```diff\r\n--- a/src/rpc/server.cpp\r\n+++ b/src/rpc/server.cpp\r\n@@ -11,7 +11,7 @@\r\n #include \"random.h\"\r\n #include \"sync.h\"\r\n #include \"ui_interface.h\"\r\n-#include \"util.h\"\r\n+#include <util.h>\r\n #include \"utilstrencodings.h\"\r\n \r\n #include <univalue.h>\r\n```\r\n\r\n(There's a pending PR to update the include style in #11053)",
      "created_at" : "2017-11-08T17:26:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11415#issuecomment-342891668",
      "id" : 342891668,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11415",
      "updated_at" : "2017-11-08T17:26:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/342891668",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r149745940"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/149745940"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Could define it in rpc/util.cpp, since this function doesn't do anything wallet-specific (just s/CWallet/CKeyStore/)",
      "commit_id" : "9e69c4ff98c0ed0f1af022d4d708e82f6910ce52",
      "created_at" : "2017-11-08T17:51:36Z",
      "diff_hunk" : "@@ -0,0 +1,18 @@\n+// Copyright (c) 2017 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_RPC_UTIL_H\n+#define BITCOIN_RPC_UTIL_H\n+\n+class CWallet;\n+class CPubKey;\n+class CScript;\n+\n+// Defined in wallet/rpcwallet.cpp. Used to get a public key for an address if that address is in the wallet.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r149745940",
      "id" : 149745940,
      "original_commit_id" : "a5df27e2c692bb928535bc0c98b91bce63ba9826",
      "original_position" : 12,
      "path" : "src/rpc/util.h",
      "position" : null,
      "pull_request_review_id" : 75189290,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415",
      "updated_at" : "2017-12-23T01:01:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/149745940",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r149746201"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/149746201"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Could return CPubKey instead of using an output parameter. This would simplify both the function and the calling code (could get rid of vector resize).",
      "commit_id" : "9e69c4ff98c0ed0f1af022d4d708e82f6910ce52",
      "created_at" : "2017-11-08T17:52:35Z",
      "diff_hunk" : "@@ -0,0 +1,18 @@\n+// Copyright (c) 2017 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_RPC_UTIL_H\n+#define BITCOIN_RPC_UTIL_H\n+\n+class CWallet;\n+class CPubKey;\n+class CScript;\n+\n+// Defined in wallet/rpcwallet.cpp. Used to get a public key for an address if that address is in the wallet.\n+extern void AddrToPubKey(CWallet* const pwallet, CPubKey& pubkey_out, const std::string& addr_in);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r149746201",
      "id" : 149746201,
      "original_commit_id" : "a5df27e2c692bb928535bc0c98b91bce63ba9826",
      "original_position" : 13,
      "path" : "src/rpc/util.h",
      "position" : null,
      "pull_request_review_id" : 75189290,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415",
      "updated_at" : "2017-12-23T01:01:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/149746201",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r149746473"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/149746473"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Could return CPubKey instead of using an output parameter.",
      "commit_id" : "9e69c4ff98c0ed0f1af022d4d708e82f6910ce52",
      "created_at" : "2017-11-08T17:53:39Z",
      "diff_hunk" : "@@ -0,0 +1,18 @@\n+// Copyright (c) 2017 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_RPC_UTIL_H\n+#define BITCOIN_RPC_UTIL_H\n+\n+class CWallet;\n+class CPubKey;\n+class CScript;\n+\n+// Defined in wallet/rpcwallet.cpp. Used to get a public key for an address if that address is in the wallet.\n+extern void AddrToPubKey(CWallet* const pwallet, CPubKey& pubkey_out, const std::string& addr_in);\n+\n+void HexToPubKey(CPubKey& pubkey_out, const std::string& hex_in);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r149746473",
      "id" : 149746473,
      "original_commit_id" : "a5df27e2c692bb928535bc0c98b91bce63ba9826",
      "original_position" : 15,
      "path" : "src/rpc/util.h",
      "position" : null,
      "pull_request_review_id" : 75189290,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415",
      "updated_at" : "2017-12-23T01:01:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/149746473",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r149772549"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/149772549"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Done",
      "commit_id" : "9e69c4ff98c0ed0f1af022d4d708e82f6910ce52",
      "created_at" : "2017-11-08T19:29:06Z",
      "diff_hunk" : "@@ -0,0 +1,18 @@\n+// Copyright (c) 2017 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_RPC_UTIL_H\n+#define BITCOIN_RPC_UTIL_H\n+\n+class CWallet;\n+class CPubKey;\n+class CScript;\n+\n+// Defined in wallet/rpcwallet.cpp. Used to get a public key for an address if that address is in the wallet.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r149772549",
      "id" : 149772549,
      "in_reply_to_id" : 149745940,
      "original_commit_id" : "a5df27e2c692bb928535bc0c98b91bce63ba9826",
      "original_position" : 12,
      "path" : "src/rpc/util.h",
      "position" : null,
      "pull_request_review_id" : 75220456,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415",
      "updated_at" : "2017-12-23T01:01:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/149772549",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r149772570"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/149772570"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Done",
      "commit_id" : "9e69c4ff98c0ed0f1af022d4d708e82f6910ce52",
      "created_at" : "2017-11-08T19:29:11Z",
      "diff_hunk" : "@@ -0,0 +1,18 @@\n+// Copyright (c) 2017 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_RPC_UTIL_H\n+#define BITCOIN_RPC_UTIL_H\n+\n+class CWallet;\n+class CPubKey;\n+class CScript;\n+\n+// Defined in wallet/rpcwallet.cpp. Used to get a public key for an address if that address is in the wallet.\n+extern void AddrToPubKey(CWallet* const pwallet, CPubKey& pubkey_out, const std::string& addr_in);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r149772570",
      "id" : 149772570,
      "in_reply_to_id" : 149746201,
      "original_commit_id" : "a5df27e2c692bb928535bc0c98b91bce63ba9826",
      "original_position" : 13,
      "path" : "src/rpc/util.h",
      "position" : null,
      "pull_request_review_id" : 75220482,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415",
      "updated_at" : "2017-12-23T01:01:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/149772570",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r149772593"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/149772593"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Done",
      "commit_id" : "9e69c4ff98c0ed0f1af022d4d708e82f6910ce52",
      "created_at" : "2017-11-08T19:29:16Z",
      "diff_hunk" : "@@ -0,0 +1,18 @@\n+// Copyright (c) 2017 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_RPC_UTIL_H\n+#define BITCOIN_RPC_UTIL_H\n+\n+class CWallet;\n+class CPubKey;\n+class CScript;\n+\n+// Defined in wallet/rpcwallet.cpp. Used to get a public key for an address if that address is in the wallet.\n+extern void AddrToPubKey(CWallet* const pwallet, CPubKey& pubkey_out, const std::string& addr_in);\n+\n+void HexToPubKey(CPubKey& pubkey_out, const std::string& hex_in);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r149772593",
      "id" : 149772593,
      "in_reply_to_id" : 149746473,
      "original_commit_id" : "a5df27e2c692bb928535bc0c98b91bce63ba9826",
      "original_position" : 15,
      "path" : "src/rpc/util.h",
      "position" : null,
      "pull_request_review_id" : 75220510,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415",
      "updated_at" : "2017-12-23T01:01:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/149772593",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Addressed @ryanofsky's comments and am trying his fix.",
      "created_at" : "2017-11-08T19:29:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11415#issuecomment-342932192",
      "id" : 342932192,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11415",
      "updated_at" : "2017-11-08T19:29:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/342932192",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r149774636"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/149774636"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Could drop this include and just forward-declare CKeyStore. Might be good to add includes for \\<string\\> and \\<vector\\>.",
      "commit_id" : "9e69c4ff98c0ed0f1af022d4d708e82f6910ce52",
      "created_at" : "2017-11-08T19:36:55Z",
      "diff_hunk" : "@@ -0,0 +1,17 @@\n+// Copyright (c) 2017 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_RPC_UTIL_H\n+#define BITCOIN_RPC_UTIL_H\n+\n+#include \"keystore.h\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r149774636",
      "id" : 149774636,
      "original_commit_id" : "7af17a16134cd3485f1dce7fc9351705eec9cdb7",
      "original_position" : 8,
      "path" : "src/rpc/util.h",
      "position" : null,
      "pull_request_review_id" : 75223008,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415",
      "updated_at" : "2017-12-23T01:01:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/149774636",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r149776798"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/149776798"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I tried forward declaring CKeytStore and it didn't work.",
      "commit_id" : "9e69c4ff98c0ed0f1af022d4d708e82f6910ce52",
      "created_at" : "2017-11-08T19:45:03Z",
      "diff_hunk" : "@@ -0,0 +1,17 @@\n+// Copyright (c) 2017 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_RPC_UTIL_H\n+#define BITCOIN_RPC_UTIL_H\n+\n+#include \"keystore.h\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r149776798",
      "id" : 149776798,
      "in_reply_to_id" : 149774636,
      "original_commit_id" : "7af17a16134cd3485f1dce7fc9351705eec9cdb7",
      "original_position" : 8,
      "path" : "src/rpc/util.h",
      "position" : null,
      "pull_request_review_id" : 75225584,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415",
      "updated_at" : "2017-12-23T01:01:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/149776798",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r149778632"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/149778632"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Following change should work:\r\n\r\n```diff\r\ndiff --git a/src/rpc/util.h b/src/rpc/util.h\r\nindex f933b3da92..18f38e8cd3 100644\r\n--- a/src/rpc/util.h\r\n+++ b/src/rpc/util.h\r\n@@ -5,8 +5,7 @@\r\n #ifndef BITCOIN_RPC_UTIL_H\r\n #define BITCOIN_RPC_UTIL_H\r\n \r\n-#include \"keystore.h\"\r\n-\r\n+class CKeyStore;\r\n class CPubKey;\r\n class CScript;\r\n \r\ndiff --git a/src/rpc/util.cpp b/src/rpc/util.cpp\r\nindex 2ebec303cb..a288fe75f5 100644\r\n--- a/src/rpc/util.cpp\r\n+++ b/src/rpc/util.cpp\r\n@@ -3,6 +3,7 @@\r\n // file COPYING or http://www.opensource.org/licenses/mit-license.php.\r\n \r\n #include \"base58.h\"\r\n+#include \"keystore.h\"\r\n #include \"pubkey.h\"\r\n #include \"tinyformat.h\"\r\n #include \"rpc/protocol.h\"\r\n```",
      "commit_id" : "9e69c4ff98c0ed0f1af022d4d708e82f6910ce52",
      "created_at" : "2017-11-08T19:51:17Z",
      "diff_hunk" : "@@ -0,0 +1,17 @@\n+// Copyright (c) 2017 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_RPC_UTIL_H\n+#define BITCOIN_RPC_UTIL_H\n+\n+#include \"keystore.h\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r149778632",
      "id" : 149778632,
      "in_reply_to_id" : 149774636,
      "original_commit_id" : "7af17a16134cd3485f1dce7fc9351705eec9cdb7",
      "original_position" : 8,
      "path" : "src/rpc/util.h",
      "position" : null,
      "pull_request_review_id" : 75227622,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415",
      "updated_at" : "2017-12-23T01:01:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/149778632",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r149786947"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/149786947"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Done",
      "commit_id" : "9e69c4ff98c0ed0f1af022d4d708e82f6910ce52",
      "created_at" : "2017-11-08T20:25:27Z",
      "diff_hunk" : "@@ -0,0 +1,17 @@\n+// Copyright (c) 2017 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_RPC_UTIL_H\n+#define BITCOIN_RPC_UTIL_H\n+\n+#include \"keystore.h\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r149786947",
      "id" : 149786947,
      "in_reply_to_id" : 149774636,
      "original_commit_id" : "7af17a16134cd3485f1dce7fc9351705eec9cdb7",
      "original_position" : 8,
      "path" : "src/rpc/util.h",
      "position" : null,
      "pull_request_review_id" : 75237517,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415",
      "updated_at" : "2017-12-23T01:01:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/149786947",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r150242201"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/150242201"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I don't think we should change return value types based on `deprecatedrpc`... What if someone wants to use two different pieces of software that expects the old vs new interface? (For example, a developer running the current version of their software in production, but wishing to adapt to and use the new API in development of the next version.)",
      "commit_id" : "9e69c4ff98c0ed0f1af022d4d708e82f6910ce52",
      "created_at" : "2017-11-10T14:04:23Z",
      "diff_hunk" : "@@ -1115,16 +1113,22 @@ UniValue addmultisigaddress(const JSONRPCRequest& request)\n             \"If 'account' is specified (DEPRECATED), assign address to that account.\\n\"\n \n             \"\\nArguments:\\n\"\n-            \"1. nrequired        (numeric, required) The number of required signatures out of the n keys or addresses.\\n\"\n-            \"2. \\\"keys\\\"         (string, required) A json array of bitcoin addresses or hex-encoded public keys\\n\"\n+            \"1. nrequired                      (numeric, required) The number of required signatures out of the n keys or addresses.\\n\"\n+            \"2. \\\"keys\\\"                         (string, required) A json array of bitcoin addresses or hex-encoded public keys\\n\"\n             \"     [\\n\"\n-            \"       \\\"address\\\"  (string) bitcoin address or hex-encoded public key\\n\"\n+            \"       \\\"address\\\"                  (string) bitcoin address or hex-encoded public key\\n\"\n             \"       ...,\\n\"\n             \"     ]\\n\"\n-            \"3. \\\"account\\\"      (string, optional) DEPRECATED. An account to assign the addresses to.\\n\"\n+            \"3. \\\"account\\\"                      (string, optional) DEPRECATED. An account to assign the addresses to.\\n\"\n \n             \"\\nResult:\\n\"\n-            \"\\\"address\\\"         (string) A bitcoin address associated with the keys.\\n\"\n+            \"{\\n\"\n+            \"  \\\"address\\\":\\\"multisigaddress\\\",    (string) The value of the new multisig address.\\n\"\n+            \"  \\\"redeemScript\\\":\\\"script\\\"         (string) The string value of the hex-encoded redemption script.\\n\"\n+            \"}\\n\"\n+            \"\\nResult (DEPRECATED. To see this result in v0.16 instead, please start bitcoind with -deprecatedrpc=addmultisigaddress).\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r150242201",
      "id" : 150242201,
      "original_commit_id" : "84fbc440c3e48fd4d246f418b9f3b3d220a61505",
      "original_position" : 40,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : 40,
      "pull_request_review_id" : 75765077,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415",
      "updated_at" : "2017-12-23T01:01:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/150242201",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r150297107"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/150297107"
         }
      },
      "author_association" : "MEMBER",
      "body" : "@luke-jr - what you're describing is API versioning. Bitcoind doesn't currently support that, but I could certainly see it being useful if done in the right way.\r\n\r\nFor now, I think the approach of using deprecatedrpc is the best option we have.",
      "commit_id" : "9e69c4ff98c0ed0f1af022d4d708e82f6910ce52",
      "created_at" : "2017-11-10T17:43:37Z",
      "diff_hunk" : "@@ -1115,16 +1113,22 @@ UniValue addmultisigaddress(const JSONRPCRequest& request)\n             \"If 'account' is specified (DEPRECATED), assign address to that account.\\n\"\n \n             \"\\nArguments:\\n\"\n-            \"1. nrequired        (numeric, required) The number of required signatures out of the n keys or addresses.\\n\"\n-            \"2. \\\"keys\\\"         (string, required) A json array of bitcoin addresses or hex-encoded public keys\\n\"\n+            \"1. nrequired                      (numeric, required) The number of required signatures out of the n keys or addresses.\\n\"\n+            \"2. \\\"keys\\\"                         (string, required) A json array of bitcoin addresses or hex-encoded public keys\\n\"\n             \"     [\\n\"\n-            \"       \\\"address\\\"  (string) bitcoin address or hex-encoded public key\\n\"\n+            \"       \\\"address\\\"                  (string) bitcoin address or hex-encoded public key\\n\"\n             \"       ...,\\n\"\n             \"     ]\\n\"\n-            \"3. \\\"account\\\"      (string, optional) DEPRECATED. An account to assign the addresses to.\\n\"\n+            \"3. \\\"account\\\"                      (string, optional) DEPRECATED. An account to assign the addresses to.\\n\"\n \n             \"\\nResult:\\n\"\n-            \"\\\"address\\\"         (string) A bitcoin address associated with the keys.\\n\"\n+            \"{\\n\"\n+            \"  \\\"address\\\":\\\"multisigaddress\\\",    (string) The value of the new multisig address.\\n\"\n+            \"  \\\"redeemScript\\\":\\\"script\\\"         (string) The string value of the hex-encoded redemption script.\\n\"\n+            \"}\\n\"\n+            \"\\nResult (DEPRECATED. To see this result in v0.16 instead, please start bitcoind with -deprecatedrpc=addmultisigaddress).\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r150297107",
      "id" : 150297107,
      "in_reply_to_id" : 150242201,
      "original_commit_id" : "84fbc440c3e48fd4d246f418b9f3b3d220a61505",
      "original_position" : 40,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : 40,
      "pull_request_review_id" : 75832129,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415",
      "updated_at" : "2017-12-23T01:01:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/150297107",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Rebased",
      "created_at" : "2017-11-10T18:42:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11415#issuecomment-343553487",
      "id" : 343553487,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11415",
      "updated_at" : "2017-11-10T18:42:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/343553487",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r150958289"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/150958289"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Is there a possibility for an address to be misparsed as a hex string? I suppose it's vanishingly unlikely, but can we add an extra check here that the length of the string is 66 or 130 (ie 33 or 65 bytes). Same comment goes for  `addmultisigaddress`.",
      "commit_id" : "9e69c4ff98c0ed0f1af022d4d708e82f6910ce52",
      "created_at" : "2017-11-14T20:47:13Z",
      "diff_hunk" : "@@ -301,16 +235,37 @@ UniValue createmultisig(const JSONRPCRequest& request)\n             \"}\\n\"\n \n             \"\\nExamples:\\n\"\n-            \"\\nCreate a multisig address from 2 addresses\\n\"\n-            + HelpExampleCli(\"createmultisig\", \"2 \\\"[\\\\\\\"16sSauSf5pF2UkUwvKGq4qjNRzBZYqgEL5\\\\\\\",\\\\\\\"171sgjn4YtPu27adkKGrdDwzRTxnRkBfKV\\\\\\\"]\\\"\") +\n+            \"\\nCreate a multisig address from 2 public keys\\n\"\n+            + HelpExampleCli(\"createmultisig\", \"2 \\\"[\\\\\\\"03789ed0bb717d88f7d321a368d905e7430207ebbd82bd342cf11ae157a7ace5fd\\\\\\\",\\\\\\\"03dbc6764b8884a92e871274b87583e6d5c2a58819473e17e107ef3f6aa5a61626\\\\\\\"]\\\"\") +\n             \"\\nAs a json rpc call\\n\"\n-            + HelpExampleRpc(\"createmultisig\", \"2, \\\"[\\\\\\\"16sSauSf5pF2UkUwvKGq4qjNRzBZYqgEL5\\\\\\\",\\\\\\\"171sgjn4YtPu27adkKGrdDwzRTxnRkBfKV\\\\\\\"]\\\"\")\n+            + HelpExampleRpc(\"createmultisig\", \"2, \\\"[\\\\\\\"03789ed0bb717d88f7d321a368d905e7430207ebbd82bd342cf11ae157a7ace5fd\\\\\\\",\\\\\\\"03dbc6764b8884a92e871274b87583e6d5c2a58819473e17e107ef3f6aa5a61626\\\\\\\"]\\\"\")\n         ;\n         throw std::runtime_error(msg);\n     }\n \n+    int required = request.params[0].get_int();\n+\n+    // Get the public keys\n+    const UniValue& keys = request.params[1].get_array();\n+    std::vector<CPubKey> pubkeys;\n+    for (unsigned int i = 0; i < keys.size(); ++i) {\n+        if (IsHex(keys[i].get_str())) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r150958289",
      "id" : 150958289,
      "original_commit_id" : "43198606bdbb408c262e5dcb726022c9249f72b6",
      "original_position" : 127,
      "path" : "src/rpc/misc.cpp",
      "position" : null,
      "pull_request_review_id" : 76589047,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415",
      "updated_at" : "2017-12-23T01:01:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/150958289",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r150964053"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/150964053"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit: can you add a newline between `%s` and `Note`. At the moment, the error message runs together into one line:\r\n\r\n```\r\nInvalid public key: mmP95gb3sXa9sK4bq8c9KX1RNWnDaz8hbf Note that from v0.16, createmultisig no longer accepts addresses. Clients must transition to using addmultisigaddress to create multisig addresses with addresses known to the wallet before upgrading to v0.17. To use the deprecated functionality, start bitcoind with -deprecatedrpc=createmultisig\r\n```",
      "commit_id" : "9e69c4ff98c0ed0f1af022d4d708e82f6910ce52",
      "created_at" : "2017-11-14T21:10:53Z",
      "diff_hunk" : "@@ -301,16 +235,37 @@ UniValue createmultisig(const JSONRPCRequest& request)\n             \"}\\n\"\n \n             \"\\nExamples:\\n\"\n-            \"\\nCreate a multisig address from 2 addresses\\n\"\n-            + HelpExampleCli(\"createmultisig\", \"2 \\\"[\\\\\\\"16sSauSf5pF2UkUwvKGq4qjNRzBZYqgEL5\\\\\\\",\\\\\\\"171sgjn4YtPu27adkKGrdDwzRTxnRkBfKV\\\\\\\"]\\\"\") +\n+            \"\\nCreate a multisig address from 2 public keys\\n\"\n+            + HelpExampleCli(\"createmultisig\", \"2 \\\"[\\\\\\\"03789ed0bb717d88f7d321a368d905e7430207ebbd82bd342cf11ae157a7ace5fd\\\\\\\",\\\\\\\"03dbc6764b8884a92e871274b87583e6d5c2a58819473e17e107ef3f6aa5a61626\\\\\\\"]\\\"\") +\n             \"\\nAs a json rpc call\\n\"\n-            + HelpExampleRpc(\"createmultisig\", \"2, \\\"[\\\\\\\"16sSauSf5pF2UkUwvKGq4qjNRzBZYqgEL5\\\\\\\",\\\\\\\"171sgjn4YtPu27adkKGrdDwzRTxnRkBfKV\\\\\\\"]\\\"\")\n+            + HelpExampleRpc(\"createmultisig\", \"2, \\\"[\\\\\\\"03789ed0bb717d88f7d321a368d905e7430207ebbd82bd342cf11ae157a7ace5fd\\\\\\\",\\\\\\\"03dbc6764b8884a92e871274b87583e6d5c2a58819473e17e107ef3f6aa5a61626\\\\\\\"]\\\"\")\n         ;\n         throw std::runtime_error(msg);\n     }\n \n+    int required = request.params[0].get_int();\n+\n+    // Get the public keys\n+    const UniValue& keys = request.params[1].get_array();\n+    std::vector<CPubKey> pubkeys;\n+    for (unsigned int i = 0; i < keys.size(); ++i) {\n+        if (IsHex(keys[i].get_str())) {\n+            pubkeys.push_back(HexToPubKey(keys[i].get_str()));\n+        } else {\n+#ifdef ENABLE_WALLET\n+            CWallet* const pwallet = GetWalletForJSONRPCRequest(request);\n+            if (IsDeprecatedRPCEnabled(\"createmultisig\") && EnsureWalletIsAvailable(pwallet, false)) {\n+                pubkeys.push_back(AddrToPubKey(pwallet, keys[i].get_str()));\n+            } else\n+#endif\n+            throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, strprintf(\"Invalid public key: %s Note that from v0.16, createmultisig no longer accepts addresses.\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r150964053",
      "id" : 150964053,
      "original_commit_id" : "43198606bdbb408c262e5dcb726022c9249f72b6",
      "original_position" : 136,
      "path" : "src/rpc/misc.cpp",
      "position" : null,
      "pull_request_review_id" : 76589047,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415",
      "updated_at" : "2017-12-23T01:01:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/150964053",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r150969487"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/150969487"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Done",
      "commit_id" : "9e69c4ff98c0ed0f1af022d4d708e82f6910ce52",
      "created_at" : "2017-11-14T21:31:20Z",
      "diff_hunk" : "@@ -301,16 +235,37 @@ UniValue createmultisig(const JSONRPCRequest& request)\n             \"}\\n\"\n \n             \"\\nExamples:\\n\"\n-            \"\\nCreate a multisig address from 2 addresses\\n\"\n-            + HelpExampleCli(\"createmultisig\", \"2 \\\"[\\\\\\\"16sSauSf5pF2UkUwvKGq4qjNRzBZYqgEL5\\\\\\\",\\\\\\\"171sgjn4YtPu27adkKGrdDwzRTxnRkBfKV\\\\\\\"]\\\"\") +\n+            \"\\nCreate a multisig address from 2 public keys\\n\"\n+            + HelpExampleCli(\"createmultisig\", \"2 \\\"[\\\\\\\"03789ed0bb717d88f7d321a368d905e7430207ebbd82bd342cf11ae157a7ace5fd\\\\\\\",\\\\\\\"03dbc6764b8884a92e871274b87583e6d5c2a58819473e17e107ef3f6aa5a61626\\\\\\\"]\\\"\") +\n             \"\\nAs a json rpc call\\n\"\n-            + HelpExampleRpc(\"createmultisig\", \"2, \\\"[\\\\\\\"16sSauSf5pF2UkUwvKGq4qjNRzBZYqgEL5\\\\\\\",\\\\\\\"171sgjn4YtPu27adkKGrdDwzRTxnRkBfKV\\\\\\\"]\\\"\")\n+            + HelpExampleRpc(\"createmultisig\", \"2, \\\"[\\\\\\\"03789ed0bb717d88f7d321a368d905e7430207ebbd82bd342cf11ae157a7ace5fd\\\\\\\",\\\\\\\"03dbc6764b8884a92e871274b87583e6d5c2a58819473e17e107ef3f6aa5a61626\\\\\\\"]\\\"\")\n         ;\n         throw std::runtime_error(msg);\n     }\n \n+    int required = request.params[0].get_int();\n+\n+    // Get the public keys\n+    const UniValue& keys = request.params[1].get_array();\n+    std::vector<CPubKey> pubkeys;\n+    for (unsigned int i = 0; i < keys.size(); ++i) {\n+        if (IsHex(keys[i].get_str())) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r150969487",
      "id" : 150969487,
      "in_reply_to_id" : 150958289,
      "original_commit_id" : "43198606bdbb408c262e5dcb726022c9249f72b6",
      "original_position" : 127,
      "path" : "src/rpc/misc.cpp",
      "position" : null,
      "pull_request_review_id" : 76601947,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415",
      "updated_at" : "2017-12-23T01:01:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/150969487",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r150969498"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/150969498"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Done",
      "commit_id" : "9e69c4ff98c0ed0f1af022d4d708e82f6910ce52",
      "created_at" : "2017-11-14T21:31:25Z",
      "diff_hunk" : "@@ -301,16 +235,37 @@ UniValue createmultisig(const JSONRPCRequest& request)\n             \"}\\n\"\n \n             \"\\nExamples:\\n\"\n-            \"\\nCreate a multisig address from 2 addresses\\n\"\n-            + HelpExampleCli(\"createmultisig\", \"2 \\\"[\\\\\\\"16sSauSf5pF2UkUwvKGq4qjNRzBZYqgEL5\\\\\\\",\\\\\\\"171sgjn4YtPu27adkKGrdDwzRTxnRkBfKV\\\\\\\"]\\\"\") +\n+            \"\\nCreate a multisig address from 2 public keys\\n\"\n+            + HelpExampleCli(\"createmultisig\", \"2 \\\"[\\\\\\\"03789ed0bb717d88f7d321a368d905e7430207ebbd82bd342cf11ae157a7ace5fd\\\\\\\",\\\\\\\"03dbc6764b8884a92e871274b87583e6d5c2a58819473e17e107ef3f6aa5a61626\\\\\\\"]\\\"\") +\n             \"\\nAs a json rpc call\\n\"\n-            + HelpExampleRpc(\"createmultisig\", \"2, \\\"[\\\\\\\"16sSauSf5pF2UkUwvKGq4qjNRzBZYqgEL5\\\\\\\",\\\\\\\"171sgjn4YtPu27adkKGrdDwzRTxnRkBfKV\\\\\\\"]\\\"\")\n+            + HelpExampleRpc(\"createmultisig\", \"2, \\\"[\\\\\\\"03789ed0bb717d88f7d321a368d905e7430207ebbd82bd342cf11ae157a7ace5fd\\\\\\\",\\\\\\\"03dbc6764b8884a92e871274b87583e6d5c2a58819473e17e107ef3f6aa5a61626\\\\\\\"]\\\"\")\n         ;\n         throw std::runtime_error(msg);\n     }\n \n+    int required = request.params[0].get_int();\n+\n+    // Get the public keys\n+    const UniValue& keys = request.params[1].get_array();\n+    std::vector<CPubKey> pubkeys;\n+    for (unsigned int i = 0; i < keys.size(); ++i) {\n+        if (IsHex(keys[i].get_str())) {\n+            pubkeys.push_back(HexToPubKey(keys[i].get_str()));\n+        } else {\n+#ifdef ENABLE_WALLET\n+            CWallet* const pwallet = GetWalletForJSONRPCRequest(request);\n+            if (IsDeprecatedRPCEnabled(\"createmultisig\") && EnsureWalletIsAvailable(pwallet, false)) {\n+                pubkeys.push_back(AddrToPubKey(pwallet, keys[i].get_str()));\n+            } else\n+#endif\n+            throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, strprintf(\"Invalid public key: %s Note that from v0.16, createmultisig no longer accepts addresses.\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r150969498",
      "id" : 150969498,
      "in_reply_to_id" : 150964053,
      "original_commit_id" : "43198606bdbb408c262e5dcb726022c9249f72b6",
      "original_position" : 136,
      "path" : "src/rpc/misc.cpp",
      "position" : null,
      "pull_request_review_id" : 76601965,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415",
      "updated_at" : "2017-12-23T01:01:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/150969498",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Latest changes look good. Tested ACK bac7e31a84d47081e4bc441780ec2a25892d3447",
      "created_at" : "2017-11-14T21:40:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11415#issuecomment-344408029",
      "id" : 344408029,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11415",
      "updated_at" : "2017-11-14T21:40:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/344408029",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Rebased",
      "created_at" : "2017-11-30T16:48:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11415#issuecomment-348248522",
      "id" : 348248522,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11415",
      "updated_at" : "2017-11-30T16:48:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/348248522",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "utACK 18eb69cb3987def797c74110c2fc2d27a8d0a767.\r\n\r\nI've eyeballed the rebase. Changes are limited to fixing up the #include conflicts.",
      "created_at" : "2017-12-01T19:53:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11415#issuecomment-348598292",
      "id" : 348598292,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11415",
      "updated_at" : "2017-12-01T19:53:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/348598292",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@laanwj I think this is ready to be merged.",
      "created_at" : "2017-12-15T19:30:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11415#issuecomment-352091849",
      "id" : 352091849,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11415",
      "updated_at" : "2017-12-15T19:30:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/352091849",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Merge please?",
      "created_at" : "2017-12-22T23:08:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11415#issuecomment-353688401",
      "id" : 353688401,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11415",
      "updated_at" : "2017-12-22T23:08:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/353688401",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> deprectaed\r\n\r\nGrr. fixed.",
      "created_at" : "2017-12-22T23:16:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11415#issuecomment-353689089",
      "id" : 353689089,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11415",
      "updated_at" : "2017-12-22T23:16:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/353689089",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r158571492"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/158571492"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Remove *bitcoin addresses or* ?",
      "commit_id" : "9e69c4ff98c0ed0f1af022d4d708e82f6910ce52",
      "created_at" : "2017-12-23T00:26:20Z",
      "diff_hunk" : "@@ -209,88 +210,21 @@ UniValue validateaddress(const JSONRPCRequest& request)\n // Needed even with !ENABLE_WALLET, to pass (ignored) pointers around\n class CWallet;\n \n-/**\n- * Used by addmultisigaddress / createmultisig:\n- */\n-CScript _createmultisig_redeemScript(CWallet * const pwallet, const UniValue& params)\n-{\n-    int nRequired = params[0].get_int();\n-    const UniValue& keys = params[1].get_array();\n-\n-    // Gather public keys\n-    if (nRequired < 1)\n-        throw std::runtime_error(\"a multisignature address must require at least one key to redeem\");\n-    if ((int)keys.size() < nRequired)\n-        throw std::runtime_error(\n-            strprintf(\"not enough keys supplied \"\n-                      \"(got %u keys, but need at least %d to redeem)\", keys.size(), nRequired));\n-    if (keys.size() > 16)\n-        throw std::runtime_error(\"Number of addresses involved in the multisignature address creation > 16\\nReduce the number\");\n-    std::vector<CPubKey> pubkeys;\n-    pubkeys.resize(keys.size());\n-    for (unsigned int i = 0; i < keys.size(); i++)\n-    {\n-        const std::string& ks = keys[i].get_str();\n-#ifdef ENABLE_WALLET\n-        // Case 1: Bitcoin address and we have full public key:\n-        CTxDestination dest = DecodeDestination(ks);\n-        if (pwallet && IsValidDestination(dest)) {\n-            const CKeyID *keyID = boost::get<CKeyID>(&dest);\n-            if (!keyID) {\n-                throw std::runtime_error(strprintf(\"%s does not refer to a key\", ks));\n-            }\n-            CPubKey vchPubKey;\n-            if (!pwallet->GetPubKey(*keyID, vchPubKey)) {\n-                throw std::runtime_error(strprintf(\"no full public key for address %s\", ks));\n-            }\n-            if (!vchPubKey.IsFullyValid())\n-                throw std::runtime_error(\" Invalid public key: \"+ks);\n-            pubkeys[i] = vchPubKey;\n-        }\n-\n-        // Case 2: hex public key\n-        else\n-#endif\n-        if (IsHex(ks))\n-        {\n-            CPubKey vchPubKey(ParseHex(ks));\n-            if (!vchPubKey.IsFullyValid())\n-                throw std::runtime_error(\" Invalid public key: \"+ks);\n-            pubkeys[i] = vchPubKey;\n-        }\n-        else\n-        {\n-            throw std::runtime_error(\" Invalid public key: \"+ks);\n-        }\n-    }\n-    CScript result = GetScriptForMultisig(nRequired, pubkeys);\n-\n-    if (result.size() > MAX_SCRIPT_ELEMENT_SIZE)\n-        throw std::runtime_error(\n-                strprintf(\"redeemScript exceeds size limit: %d > %d\", result.size(), MAX_SCRIPT_ELEMENT_SIZE));\n-\n-    return result;\n-}\n-\n UniValue createmultisig(const JSONRPCRequest& request)\n {\n-#ifdef ENABLE_WALLET\n-    CWallet * const pwallet = GetWalletForJSONRPCRequest(request);\n-#else\n-    CWallet * const pwallet = nullptr;\n-#endif\n-\n     if (request.fHelp || request.params.size() < 2 || request.params.size() > 2)\n     {\n         std::string msg = \"createmultisig nrequired [\\\"key\\\",...]\\n\"\n             \"\\nCreates a multi-signature address with n signature of m keys required.\\n\"\n             \"It returns a json object with the address and redeemScript.\\n\"\n-\n+            \"DEPRECATION WARNING: Using addresses with createmultisig is deprecated. Clients must\\n\"\n+            \"transition to using addmultisigaddress to create multisig addresses with addresses known\\n\"\n+            \"to the wallet before upgrading to v0.17. To use the deprecated functionality, start bitcoind with -deprecatedrpc=createmultisig\\n\"\n             \"\\nArguments:\\n\"\n-            \"1. nrequired      (numeric, required) The number of required signatures out of the n keys or addresses.\\n\"\n-            \"2. \\\"keys\\\"       (string, required) A json array of keys which are bitcoin addresses or hex-encoded public keys\\n\"\n+            \"1. nrequired                    (numeric, required) The number of required signatures out of the n keys or addresses.\\n\"\n+            \"2. \\\"keys\\\"                       (string, required) A json array of keys which are bitcoin addresses or hex-encoded public keys\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r158571492",
      "id" : 158571492,
      "original_commit_id" : "d1916aa0c2eb8650b14ce11c9bf34d2a8a938586",
      "original_position" : 96,
      "path" : "src/rpc/misc.cpp",
      "position" : null,
      "pull_request_review_id" : 85411414,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415",
      "updated_at" : "2017-12-23T01:01:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/158571492",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r158571512"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/158571512"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Nit, use sentence case *(string) The hex-encoded ...*.",
      "commit_id" : "9e69c4ff98c0ed0f1af022d4d708e82f6910ce52",
      "created_at" : "2017-12-23T00:26:45Z",
      "diff_hunk" : "@@ -209,88 +210,21 @@ UniValue validateaddress(const JSONRPCRequest& request)\n // Needed even with !ENABLE_WALLET, to pass (ignored) pointers around\n class CWallet;\n \n-/**\n- * Used by addmultisigaddress / createmultisig:\n- */\n-CScript _createmultisig_redeemScript(CWallet * const pwallet, const UniValue& params)\n-{\n-    int nRequired = params[0].get_int();\n-    const UniValue& keys = params[1].get_array();\n-\n-    // Gather public keys\n-    if (nRequired < 1)\n-        throw std::runtime_error(\"a multisignature address must require at least one key to redeem\");\n-    if ((int)keys.size() < nRequired)\n-        throw std::runtime_error(\n-            strprintf(\"not enough keys supplied \"\n-                      \"(got %u keys, but need at least %d to redeem)\", keys.size(), nRequired));\n-    if (keys.size() > 16)\n-        throw std::runtime_error(\"Number of addresses involved in the multisignature address creation > 16\\nReduce the number\");\n-    std::vector<CPubKey> pubkeys;\n-    pubkeys.resize(keys.size());\n-    for (unsigned int i = 0; i < keys.size(); i++)\n-    {\n-        const std::string& ks = keys[i].get_str();\n-#ifdef ENABLE_WALLET\n-        // Case 1: Bitcoin address and we have full public key:\n-        CTxDestination dest = DecodeDestination(ks);\n-        if (pwallet && IsValidDestination(dest)) {\n-            const CKeyID *keyID = boost::get<CKeyID>(&dest);\n-            if (!keyID) {\n-                throw std::runtime_error(strprintf(\"%s does not refer to a key\", ks));\n-            }\n-            CPubKey vchPubKey;\n-            if (!pwallet->GetPubKey(*keyID, vchPubKey)) {\n-                throw std::runtime_error(strprintf(\"no full public key for address %s\", ks));\n-            }\n-            if (!vchPubKey.IsFullyValid())\n-                throw std::runtime_error(\" Invalid public key: \"+ks);\n-            pubkeys[i] = vchPubKey;\n-        }\n-\n-        // Case 2: hex public key\n-        else\n-#endif\n-        if (IsHex(ks))\n-        {\n-            CPubKey vchPubKey(ParseHex(ks));\n-            if (!vchPubKey.IsFullyValid())\n-                throw std::runtime_error(\" Invalid public key: \"+ks);\n-            pubkeys[i] = vchPubKey;\n-        }\n-        else\n-        {\n-            throw std::runtime_error(\" Invalid public key: \"+ks);\n-        }\n-    }\n-    CScript result = GetScriptForMultisig(nRequired, pubkeys);\n-\n-    if (result.size() > MAX_SCRIPT_ELEMENT_SIZE)\n-        throw std::runtime_error(\n-                strprintf(\"redeemScript exceeds size limit: %d > %d\", result.size(), MAX_SCRIPT_ELEMENT_SIZE));\n-\n-    return result;\n-}\n-\n UniValue createmultisig(const JSONRPCRequest& request)\n {\n-#ifdef ENABLE_WALLET\n-    CWallet * const pwallet = GetWalletForJSONRPCRequest(request);\n-#else\n-    CWallet * const pwallet = nullptr;\n-#endif\n-\n     if (request.fHelp || request.params.size() < 2 || request.params.size() > 2)\n     {\n         std::string msg = \"createmultisig nrequired [\\\"key\\\",...]\\n\"\n             \"\\nCreates a multi-signature address with n signature of m keys required.\\n\"\n             \"It returns a json object with the address and redeemScript.\\n\"\n-\n+            \"DEPRECATION WARNING: Using addresses with createmultisig is deprecated. Clients must\\n\"\n+            \"transition to using addmultisigaddress to create multisig addresses with addresses known\\n\"\n+            \"to the wallet before upgrading to v0.17. To use the deprecated functionality, start bitcoind with -deprecatedrpc=createmultisig\\n\"\n             \"\\nArguments:\\n\"\n-            \"1. nrequired      (numeric, required) The number of required signatures out of the n keys or addresses.\\n\"\n-            \"2. \\\"keys\\\"       (string, required) A json array of keys which are bitcoin addresses or hex-encoded public keys\\n\"\n+            \"1. nrequired                    (numeric, required) The number of required signatures out of the n keys or addresses.\\n\"\n+            \"2. \\\"keys\\\"                       (string, required) A json array of keys which are bitcoin addresses or hex-encoded public keys\\n\"\n             \"     [\\n\"\n-            \"       \\\"key\\\"    (string) bitcoin address or hex-encoded public key\\n\"\n+            \"       \\\"key\\\"                    (string) hex-encoded public key\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r158571512",
      "id" : 158571512,
      "original_commit_id" : "d1916aa0c2eb8650b14ce11c9bf34d2a8a938586",
      "original_position" : 99,
      "path" : "src/rpc/misc.cpp",
      "position" : null,
      "pull_request_review_id" : 85411414,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415",
      "updated_at" : "2017-12-23T01:01:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/158571512",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r158571695"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/158571695"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Nit, sort headers.",
      "commit_id" : "9e69c4ff98c0ed0f1af022d4d708e82f6910ce52",
      "created_at" : "2017-12-23T00:30:40Z",
      "diff_hunk" : "@@ -0,0 +1,68 @@\n+// Copyright (c) 2017 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include \"base58.h\"\n+#include \"pubkey.h\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r158571695",
      "id" : 158571695,
      "original_commit_id" : "d1916aa0c2eb8650b14ce11c9bf34d2a8a938586",
      "original_position" : 6,
      "path" : "src/rpc/util.cpp",
      "position" : null,
      "pull_request_review_id" : 85411414,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415",
      "updated_at" : "2017-12-23T01:01:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/158571695",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r158571791"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/158571791"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "No test for this error?",
      "commit_id" : "9e69c4ff98c0ed0f1af022d4d708e82f6910ce52",
      "created_at" : "2017-12-23T00:33:18Z",
      "diff_hunk" : "@@ -0,0 +1,68 @@\n+// Copyright (c) 2017 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include \"base58.h\"\n+#include \"pubkey.h\"\n+#include \"keystore.h\"\n+#include \"tinyformat.h\"\n+#include \"rpc/protocol.h\"\n+#include \"rpc/util.h\"\n+#include \"utilstrencodings.h\"\n+\n+// Converts a hex string to a public key if possible\n+CPubKey HexToPubKey(const std::string& hex_in)\n+{\n+    if (!IsHex(hex_in)) {\n+        throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Invalid public key: \" + hex_in);\n+    }\n+    CPubKey vchPubKey(ParseHex(hex_in));\n+    if (!vchPubKey.IsFullyValid()) {\n+        throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Invalid public key: \" + hex_in);\n+    }\n+    return vchPubKey;\n+}\n+\n+// Retrieves a public key for an address from the given CKeyStore\n+CPubKey AddrToPubKey(CKeyStore* const keystore, const std::string& addr_in)\n+{\n+    CTxDestination dest = DecodeDestination(addr_in);\n+    if (!IsValidDestination(dest)) {\n+        throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Invalid address: \" + addr_in);\n+    }\n+    const CKeyID *keyID = boost::get<CKeyID>(&dest);\n+    if (!keyID) {\n+        throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, strprintf(\"%s does not refer to a key\", addr_in));\n+    }\n+    CPubKey vchPubKey;\n+    if (!keystore->GetPubKey(*keyID, vchPubKey)) {\n+        throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, strprintf(\"no full public key for address %s\", addr_in));\n+    }\n+    if (!vchPubKey.IsFullyValid()) {\n+       throw JSONRPCError(RPC_INTERNAL_ERROR, \"Wallet contains an invalid public key\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r158571791",
      "id" : 158571791,
      "original_commit_id" : "d1916aa0c2eb8650b14ce11c9bf34d2a8a938586",
      "original_position" : 42,
      "path" : "src/rpc/util.cpp",
      "position" : 42,
      "pull_request_review_id" : 85411414,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415",
      "updated_at" : "2017-12-23T01:01:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/158571791",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r158571817"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/158571817"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "No test for this error?",
      "commit_id" : "9e69c4ff98c0ed0f1af022d4d708e82f6910ce52",
      "created_at" : "2017-12-23T00:33:46Z",
      "diff_hunk" : "@@ -0,0 +1,68 @@\n+// Copyright (c) 2017 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include \"base58.h\"\n+#include \"pubkey.h\"\n+#include \"keystore.h\"\n+#include \"tinyformat.h\"\n+#include \"rpc/protocol.h\"\n+#include \"rpc/util.h\"\n+#include \"utilstrencodings.h\"\n+\n+// Converts a hex string to a public key if possible\n+CPubKey HexToPubKey(const std::string& hex_in)\n+{\n+    if (!IsHex(hex_in)) {\n+        throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Invalid public key: \" + hex_in);\n+    }\n+    CPubKey vchPubKey(ParseHex(hex_in));\n+    if (!vchPubKey.IsFullyValid()) {\n+        throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Invalid public key: \" + hex_in);\n+    }\n+    return vchPubKey;\n+}\n+\n+// Retrieves a public key for an address from the given CKeyStore\n+CPubKey AddrToPubKey(CKeyStore* const keystore, const std::string& addr_in)\n+{\n+    CTxDestination dest = DecodeDestination(addr_in);\n+    if (!IsValidDestination(dest)) {\n+        throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Invalid address: \" + addr_in);\n+    }\n+    const CKeyID *keyID = boost::get<CKeyID>(&dest);\n+    if (!keyID) {\n+        throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, strprintf(\"%s does not refer to a key\", addr_in));\n+    }\n+    CPubKey vchPubKey;\n+    if (!keystore->GetPubKey(*keyID, vchPubKey)) {\n+        throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, strprintf(\"no full public key for address %s\", addr_in));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r158571817",
      "id" : 158571817,
      "original_commit_id" : "d1916aa0c2eb8650b14ce11c9bf34d2a8a938586",
      "original_position" : 39,
      "path" : "src/rpc/util.cpp",
      "position" : 39,
      "pull_request_review_id" : 85411414,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415",
      "updated_at" : "2017-12-23T01:01:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/158571817",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r158572673"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/158572673"
         }
      },
      "author_association" : "MEMBER",
      "body" : "This error is untestable. It requires a corrupted wallet.",
      "commit_id" : "9e69c4ff98c0ed0f1af022d4d708e82f6910ce52",
      "created_at" : "2017-12-23T00:57:12Z",
      "diff_hunk" : "@@ -0,0 +1,68 @@\n+// Copyright (c) 2017 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include \"base58.h\"\n+#include \"pubkey.h\"\n+#include \"keystore.h\"\n+#include \"tinyformat.h\"\n+#include \"rpc/protocol.h\"\n+#include \"rpc/util.h\"\n+#include \"utilstrencodings.h\"\n+\n+// Converts a hex string to a public key if possible\n+CPubKey HexToPubKey(const std::string& hex_in)\n+{\n+    if (!IsHex(hex_in)) {\n+        throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Invalid public key: \" + hex_in);\n+    }\n+    CPubKey vchPubKey(ParseHex(hex_in));\n+    if (!vchPubKey.IsFullyValid()) {\n+        throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Invalid public key: \" + hex_in);\n+    }\n+    return vchPubKey;\n+}\n+\n+// Retrieves a public key for an address from the given CKeyStore\n+CPubKey AddrToPubKey(CKeyStore* const keystore, const std::string& addr_in)\n+{\n+    CTxDestination dest = DecodeDestination(addr_in);\n+    if (!IsValidDestination(dest)) {\n+        throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Invalid address: \" + addr_in);\n+    }\n+    const CKeyID *keyID = boost::get<CKeyID>(&dest);\n+    if (!keyID) {\n+        throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, strprintf(\"%s does not refer to a key\", addr_in));\n+    }\n+    CPubKey vchPubKey;\n+    if (!keystore->GetPubKey(*keyID, vchPubKey)) {\n+        throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, strprintf(\"no full public key for address %s\", addr_in));\n+    }\n+    if (!vchPubKey.IsFullyValid()) {\n+       throw JSONRPCError(RPC_INTERNAL_ERROR, \"Wallet contains an invalid public key\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r158572673",
      "id" : 158572673,
      "in_reply_to_id" : 158571791,
      "original_commit_id" : "d1916aa0c2eb8650b14ce11c9bf34d2a8a938586",
      "original_position" : 42,
      "path" : "src/rpc/util.cpp",
      "position" : 42,
      "pull_request_review_id" : 85412715,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415",
      "updated_at" : "2017-12-23T01:01:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/158572673",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r158572817"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/158572817"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Done.",
      "commit_id" : "9e69c4ff98c0ed0f1af022d4d708e82f6910ce52",
      "created_at" : "2017-12-23T01:01:28Z",
      "diff_hunk" : "@@ -209,88 +210,21 @@ UniValue validateaddress(const JSONRPCRequest& request)\n // Needed even with !ENABLE_WALLET, to pass (ignored) pointers around\n class CWallet;\n \n-/**\n- * Used by addmultisigaddress / createmultisig:\n- */\n-CScript _createmultisig_redeemScript(CWallet * const pwallet, const UniValue& params)\n-{\n-    int nRequired = params[0].get_int();\n-    const UniValue& keys = params[1].get_array();\n-\n-    // Gather public keys\n-    if (nRequired < 1)\n-        throw std::runtime_error(\"a multisignature address must require at least one key to redeem\");\n-    if ((int)keys.size() < nRequired)\n-        throw std::runtime_error(\n-            strprintf(\"not enough keys supplied \"\n-                      \"(got %u keys, but need at least %d to redeem)\", keys.size(), nRequired));\n-    if (keys.size() > 16)\n-        throw std::runtime_error(\"Number of addresses involved in the multisignature address creation > 16\\nReduce the number\");\n-    std::vector<CPubKey> pubkeys;\n-    pubkeys.resize(keys.size());\n-    for (unsigned int i = 0; i < keys.size(); i++)\n-    {\n-        const std::string& ks = keys[i].get_str();\n-#ifdef ENABLE_WALLET\n-        // Case 1: Bitcoin address and we have full public key:\n-        CTxDestination dest = DecodeDestination(ks);\n-        if (pwallet && IsValidDestination(dest)) {\n-            const CKeyID *keyID = boost::get<CKeyID>(&dest);\n-            if (!keyID) {\n-                throw std::runtime_error(strprintf(\"%s does not refer to a key\", ks));\n-            }\n-            CPubKey vchPubKey;\n-            if (!pwallet->GetPubKey(*keyID, vchPubKey)) {\n-                throw std::runtime_error(strprintf(\"no full public key for address %s\", ks));\n-            }\n-            if (!vchPubKey.IsFullyValid())\n-                throw std::runtime_error(\" Invalid public key: \"+ks);\n-            pubkeys[i] = vchPubKey;\n-        }\n-\n-        // Case 2: hex public key\n-        else\n-#endif\n-        if (IsHex(ks))\n-        {\n-            CPubKey vchPubKey(ParseHex(ks));\n-            if (!vchPubKey.IsFullyValid())\n-                throw std::runtime_error(\" Invalid public key: \"+ks);\n-            pubkeys[i] = vchPubKey;\n-        }\n-        else\n-        {\n-            throw std::runtime_error(\" Invalid public key: \"+ks);\n-        }\n-    }\n-    CScript result = GetScriptForMultisig(nRequired, pubkeys);\n-\n-    if (result.size() > MAX_SCRIPT_ELEMENT_SIZE)\n-        throw std::runtime_error(\n-                strprintf(\"redeemScript exceeds size limit: %d > %d\", result.size(), MAX_SCRIPT_ELEMENT_SIZE));\n-\n-    return result;\n-}\n-\n UniValue createmultisig(const JSONRPCRequest& request)\n {\n-#ifdef ENABLE_WALLET\n-    CWallet * const pwallet = GetWalletForJSONRPCRequest(request);\n-#else\n-    CWallet * const pwallet = nullptr;\n-#endif\n-\n     if (request.fHelp || request.params.size() < 2 || request.params.size() > 2)\n     {\n         std::string msg = \"createmultisig nrequired [\\\"key\\\",...]\\n\"\n             \"\\nCreates a multi-signature address with n signature of m keys required.\\n\"\n             \"It returns a json object with the address and redeemScript.\\n\"\n-\n+            \"DEPRECATION WARNING: Using addresses with createmultisig is deprecated. Clients must\\n\"\n+            \"transition to using addmultisigaddress to create multisig addresses with addresses known\\n\"\n+            \"to the wallet before upgrading to v0.17. To use the deprecated functionality, start bitcoind with -deprecatedrpc=createmultisig\\n\"\n             \"\\nArguments:\\n\"\n-            \"1. nrequired      (numeric, required) The number of required signatures out of the n keys or addresses.\\n\"\n-            \"2. \\\"keys\\\"       (string, required) A json array of keys which are bitcoin addresses or hex-encoded public keys\\n\"\n+            \"1. nrequired                    (numeric, required) The number of required signatures out of the n keys or addresses.\\n\"\n+            \"2. \\\"keys\\\"                       (string, required) A json array of keys which are bitcoin addresses or hex-encoded public keys\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r158572817",
      "id" : 158572817,
      "in_reply_to_id" : 158571492,
      "original_commit_id" : "d1916aa0c2eb8650b14ce11c9bf34d2a8a938586",
      "original_position" : 96,
      "path" : "src/rpc/misc.cpp",
      "position" : null,
      "pull_request_review_id" : 85412878,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415",
      "updated_at" : "2017-12-23T01:01:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/158572817",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r158572819"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/158572819"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Done.",
      "commit_id" : "9e69c4ff98c0ed0f1af022d4d708e82f6910ce52",
      "created_at" : "2017-12-23T01:01:32Z",
      "diff_hunk" : "@@ -209,88 +210,21 @@ UniValue validateaddress(const JSONRPCRequest& request)\n // Needed even with !ENABLE_WALLET, to pass (ignored) pointers around\n class CWallet;\n \n-/**\n- * Used by addmultisigaddress / createmultisig:\n- */\n-CScript _createmultisig_redeemScript(CWallet * const pwallet, const UniValue& params)\n-{\n-    int nRequired = params[0].get_int();\n-    const UniValue& keys = params[1].get_array();\n-\n-    // Gather public keys\n-    if (nRequired < 1)\n-        throw std::runtime_error(\"a multisignature address must require at least one key to redeem\");\n-    if ((int)keys.size() < nRequired)\n-        throw std::runtime_error(\n-            strprintf(\"not enough keys supplied \"\n-                      \"(got %u keys, but need at least %d to redeem)\", keys.size(), nRequired));\n-    if (keys.size() > 16)\n-        throw std::runtime_error(\"Number of addresses involved in the multisignature address creation > 16\\nReduce the number\");\n-    std::vector<CPubKey> pubkeys;\n-    pubkeys.resize(keys.size());\n-    for (unsigned int i = 0; i < keys.size(); i++)\n-    {\n-        const std::string& ks = keys[i].get_str();\n-#ifdef ENABLE_WALLET\n-        // Case 1: Bitcoin address and we have full public key:\n-        CTxDestination dest = DecodeDestination(ks);\n-        if (pwallet && IsValidDestination(dest)) {\n-            const CKeyID *keyID = boost::get<CKeyID>(&dest);\n-            if (!keyID) {\n-                throw std::runtime_error(strprintf(\"%s does not refer to a key\", ks));\n-            }\n-            CPubKey vchPubKey;\n-            if (!pwallet->GetPubKey(*keyID, vchPubKey)) {\n-                throw std::runtime_error(strprintf(\"no full public key for address %s\", ks));\n-            }\n-            if (!vchPubKey.IsFullyValid())\n-                throw std::runtime_error(\" Invalid public key: \"+ks);\n-            pubkeys[i] = vchPubKey;\n-        }\n-\n-        // Case 2: hex public key\n-        else\n-#endif\n-        if (IsHex(ks))\n-        {\n-            CPubKey vchPubKey(ParseHex(ks));\n-            if (!vchPubKey.IsFullyValid())\n-                throw std::runtime_error(\" Invalid public key: \"+ks);\n-            pubkeys[i] = vchPubKey;\n-        }\n-        else\n-        {\n-            throw std::runtime_error(\" Invalid public key: \"+ks);\n-        }\n-    }\n-    CScript result = GetScriptForMultisig(nRequired, pubkeys);\n-\n-    if (result.size() > MAX_SCRIPT_ELEMENT_SIZE)\n-        throw std::runtime_error(\n-                strprintf(\"redeemScript exceeds size limit: %d > %d\", result.size(), MAX_SCRIPT_ELEMENT_SIZE));\n-\n-    return result;\n-}\n-\n UniValue createmultisig(const JSONRPCRequest& request)\n {\n-#ifdef ENABLE_WALLET\n-    CWallet * const pwallet = GetWalletForJSONRPCRequest(request);\n-#else\n-    CWallet * const pwallet = nullptr;\n-#endif\n-\n     if (request.fHelp || request.params.size() < 2 || request.params.size() > 2)\n     {\n         std::string msg = \"createmultisig nrequired [\\\"key\\\",...]\\n\"\n             \"\\nCreates a multi-signature address with n signature of m keys required.\\n\"\n             \"It returns a json object with the address and redeemScript.\\n\"\n-\n+            \"DEPRECATION WARNING: Using addresses with createmultisig is deprecated. Clients must\\n\"\n+            \"transition to using addmultisigaddress to create multisig addresses with addresses known\\n\"\n+            \"to the wallet before upgrading to v0.17. To use the deprecated functionality, start bitcoind with -deprecatedrpc=createmultisig\\n\"\n             \"\\nArguments:\\n\"\n-            \"1. nrequired      (numeric, required) The number of required signatures out of the n keys or addresses.\\n\"\n-            \"2. \\\"keys\\\"       (string, required) A json array of keys which are bitcoin addresses or hex-encoded public keys\\n\"\n+            \"1. nrequired                    (numeric, required) The number of required signatures out of the n keys or addresses.\\n\"\n+            \"2. \\\"keys\\\"                       (string, required) A json array of keys which are bitcoin addresses or hex-encoded public keys\\n\"\n             \"     [\\n\"\n-            \"       \\\"key\\\"    (string) bitcoin address or hex-encoded public key\\n\"\n+            \"       \\\"key\\\"                    (string) hex-encoded public key\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r158572819",
      "id" : 158572819,
      "in_reply_to_id" : 158571512,
      "original_commit_id" : "d1916aa0c2eb8650b14ce11c9bf34d2a8a938586",
      "original_position" : 99,
      "path" : "src/rpc/misc.cpp",
      "position" : null,
      "pull_request_review_id" : 85412880,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415",
      "updated_at" : "2017-12-23T01:01:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/158572819",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r158572822"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/158572822"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Done.",
      "commit_id" : "9e69c4ff98c0ed0f1af022d4d708e82f6910ce52",
      "created_at" : "2017-12-23T01:01:37Z",
      "diff_hunk" : "@@ -0,0 +1,68 @@\n+// Copyright (c) 2017 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include \"base58.h\"\n+#include \"pubkey.h\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r158572822",
      "id" : 158572822,
      "in_reply_to_id" : 158571695,
      "original_commit_id" : "d1916aa0c2eb8650b14ce11c9bf34d2a8a938586",
      "original_position" : 6,
      "path" : "src/rpc/util.cpp",
      "position" : null,
      "pull_request_review_id" : 85412885,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415",
      "updated_at" : "2017-12-23T01:01:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/158572822",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r158572894"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/158572894"
         }
      },
      "author_association" : "MEMBER",
      "body" : "AFAIK, this error is untestable and requires a corrupted wallet.",
      "commit_id" : "9e69c4ff98c0ed0f1af022d4d708e82f6910ce52",
      "created_at" : "2017-12-23T01:03:50Z",
      "diff_hunk" : "@@ -0,0 +1,68 @@\n+// Copyright (c) 2017 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include \"base58.h\"\n+#include \"pubkey.h\"\n+#include \"keystore.h\"\n+#include \"tinyformat.h\"\n+#include \"rpc/protocol.h\"\n+#include \"rpc/util.h\"\n+#include \"utilstrencodings.h\"\n+\n+// Converts a hex string to a public key if possible\n+CPubKey HexToPubKey(const std::string& hex_in)\n+{\n+    if (!IsHex(hex_in)) {\n+        throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Invalid public key: \" + hex_in);\n+    }\n+    CPubKey vchPubKey(ParseHex(hex_in));\n+    if (!vchPubKey.IsFullyValid()) {\n+        throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Invalid public key: \" + hex_in);\n+    }\n+    return vchPubKey;\n+}\n+\n+// Retrieves a public key for an address from the given CKeyStore\n+CPubKey AddrToPubKey(CKeyStore* const keystore, const std::string& addr_in)\n+{\n+    CTxDestination dest = DecodeDestination(addr_in);\n+    if (!IsValidDestination(dest)) {\n+        throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Invalid address: \" + addr_in);\n+    }\n+    const CKeyID *keyID = boost::get<CKeyID>(&dest);\n+    if (!keyID) {\n+        throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, strprintf(\"%s does not refer to a key\", addr_in));\n+    }\n+    CPubKey vchPubKey;\n+    if (!keystore->GetPubKey(*keyID, vchPubKey)) {\n+        throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, strprintf(\"no full public key for address %s\", addr_in));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11415#discussion_r158572894",
      "id" : 158572894,
      "in_reply_to_id" : 158571817,
      "original_commit_id" : "d1916aa0c2eb8650b14ce11c9bf34d2a8a938586",
      "original_position" : 39,
      "path" : "src/rpc/util.cpp",
      "position" : 39,
      "pull_request_review_id" : 85412962,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11415",
      "updated_at" : "2017-12-23T01:03:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/158572894",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Had to rebase and fix `wallet-dump.py` to fix the travis failure.",
      "created_at" : "2017-12-23T02:03:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11415#issuecomment-353700569",
      "id" : 353700569,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11415",
      "updated_at" : "2017-12-23T02:03:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/353700569",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Rebased again.",
      "created_at" : "2018-01-11T19:13:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11415#issuecomment-357030958",
      "id" : 357030958,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11415",
      "updated_at" : "2018-01-11T19:13:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/357030958",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Sadly this is going to need another substantial rebase if #12213 gets merged.\r\n\r\nThis has been rebased 5 times and has received several rounds of review:\r\n\r\n- ACK from me (x4)\r\n- utACK from @ryanofsky (x8)\r\n- utACK from @TheBlueMatt (x1)\r\n\r\n@achow101 and I have asked for merge a couple of times here and in IRC.\r\n\r\nMaintainers - is there anything we can do to get this unblocked? Are you waiting for additional reviewers?\r\n\r\nIt'd be a shame to have this go through another round of rebase/review.",
      "created_at" : "2018-01-23T21:00:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11415#issuecomment-359928672",
      "id" : 359928672,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11415",
      "updated_at" : "2018-01-23T21:00:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/359928672",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   }
]
