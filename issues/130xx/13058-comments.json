[
   {
      "author_association" : "MEMBER",
      "body" : "~~Builds on top of #10740. Please review that first.~~",
      "created_at" : "2018-04-23T17:24:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13058#issuecomment-383655175",
      "id" : 383655175,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13058",
      "updated_at" : "2018-05-17T19:54:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/383655175",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/13058#discussion_r183491698"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13058"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/183491698"
         }
      },
      "author_association" : "MEMBER",
      "body" : "As mentioned in #13028, I think this does not have sufficient concurrency protection (maybe okay since edge case). AFAIK, callers calling `CWallet::Verify` as well as inside the call, there is no lock being held, thus, I think, it is possible that there could be a race in `loadwallet` and `createwallet` bypassing the filename check.",
      "commit_id" : "8266c84615b85721c97cb0896e9bb2f2afc8e40d",
      "created_at" : "2018-04-23T18:20:43Z",
      "diff_hunk" : "@@ -3963,6 +3969,55 @@ std::vector<std::string> CWallet::GetDestValues(const std::string& prefix) const\n     return values;\n }\n \n+bool CWallet::Verify(std::string wallet_file, bool salvage_wallet, std::string& error_string, std::string& warning_string)\n+{\n+    // Do some checking on wallet path. It should be either a:\n+    //\n+    // 1. Path where a directory can be created.\n+    // 2. Path to an existing directory.\n+    // 3. Path to a symlink to a directory.\n+    // 4. For backwards compatibility, the name of a data file in -walletdir.\n+    fs::path wallet_path = fs::absolute(wallet_file, GetWalletDir());\n+    fs::file_type path_type = fs::symlink_status(wallet_path).type();\n+    if (!(path_type == fs::file_not_found || path_type == fs::directory_file ||\n+          (path_type == fs::symlink_file && fs::is_directory(wallet_path)) ||\n+          (path_type == fs::regular_file && fs::path(wallet_file).filename() == wallet_file))) {\n+        error_string = strprintf(\n+            _(\"Invalid -wallet path '%s'. -wallet path should point to a directory where wallet.dat and \"\n+              \"database/log.?????????? files can be stored, a location where such a directory could be created, \"\n+              \"or (for backwards compatibility) the name of an existing data file in -walletdir (%s)\"),\n+            wallet_file, GetWalletDir());\n+        return false;\n+    }\n+\n+    // Make sure that the wallet path doesn't clash with an existing wallet path\n+    std::set<fs::path> wallet_paths;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13058#discussion_r183491698",
      "id" : 183491698,
      "original_commit_id" : "f8b7016b52e7aab34b3f9773401a33c8f60a389c",
      "original_position" : 81,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 114500317,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13058",
      "updated_at" : "2018-05-25T16:12:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/183491698",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/178464?v=4",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/13058#discussion_r184878654"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13058"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/184878654"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Empty line.",
      "commit_id" : "8266c84615b85721c97cb0896e9bb2f2afc8e40d",
      "created_at" : "2018-04-29T10:41:37Z",
      "diff_hunk" : "@@ -2916,6 +2916,49 @@ UniValue loadwallet(const JSONRPCRequest& request)\n \n }\n \n+UniValue createwallet(const JSONRPCRequest& request)\n+{\n+    if (request.fHelp || request.params.size() != 1)\n+        throw std::runtime_error(\n+            \"createwallet \\\"filename\\\"\\n\"\n+            \"\\nCreates and loads a new wallet.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"wallet_name\\\"    (string, required) The name for the new wallet.\\n\"\n+            \"\\nResult:\\n\"\n+            \"<walletname>     (string) The wallet name if created successfully.\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"createwallet\", \"\\\"test.dat\\\"\")\n+            + HelpExampleRpc(\"createwallet\", \"\\\"test.dat\\\"\")\n+        );\n+    std::string wallet_name = request.params[0].get_str();\n+    std::string error;\n+\n+    fs::path wallet_path = fs::absolute(wallet_name, GetWalletDir());\n+    if (fs::symlink_status(wallet_path).type() != fs::file_not_found) {\n+        throw JSONRPCError(RPC_WALLET_ERROR, \"Wallet \" + wallet_name + \" already exists.\");\n+    }\n+\n+    // Wallet::Verify will check if we're trying to create a wallet with a duplication name.\n+    std::string dummy_warning;\n+    if (!CWallet::Verify(wallet_name, false, error, dummy_warning)) {\n+        throw JSONRPCError(RPC_WALLET_ERROR, \"Wallet file verification failed: \" + error);\n+    }\n+\n+    CWallet * const wallet = CWallet::CreateWalletFromFile(wallet_name, fs::absolute(wallet_name, GetWalletDir()));\n+    if (!wallet) {\n+        throw JSONRPCError(RPC_WALLET_ERROR, \"Wallet creation failed.\");\n+    }\n+    AddWallet(wallet);\n+\n+    wallet->postInitProcess();\n+\n+    UniValue obj(UniValue::VSTR);\n+    obj = wallet_name;\n+\n+    return obj;\n+",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13058#discussion_r184878654",
      "id" : 184878654,
      "original_commit_id" : "70277d29484e967b11a24d58485ce5262d1ddec8",
      "original_position" : 44,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 116162168,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13058",
      "updated_at" : "2018-05-25T16:12:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/184878654",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "rebased",
      "created_at" : "2018-05-16T21:56:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13058#issuecomment-389678636",
      "id" : 389678636,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13058",
      "updated_at" : "2018-05-16T21:56:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/389678636",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/13058#discussion_r189012629"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13058"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/189012629"
         }
      },
      "author_association" : "MEMBER",
      "body" : "This doesn't prevent concurrency which is very unlikely and so can be improved later. ",
      "commit_id" : "8266c84615b85721c97cb0896e9bb2f2afc8e40d",
      "created_at" : "2018-05-17T15:58:33Z",
      "diff_hunk" : "@@ -3041,6 +3041,49 @@ UniValue loadwallet(const JSONRPCRequest& request)\n     return obj;\n }\n \n+UniValue createwallet(const JSONRPCRequest& request)\n+{\n+    if (request.fHelp || request.params.size() != 1)\n+        throw std::runtime_error(\n+            \"createwallet \\\"filename\\\"\\n\"\n+            \"\\nCreates and loads a new wallet.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"wallet_name\\\"    (string, required) The name for the new wallet.\\n\"\n+            \"\\nResult:\\n\"\n+            \"<walletname>     (string) The wallet name if created successfully.\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"createwallet\", \"\\\"test.dat\\\"\")\n+            + HelpExampleRpc(\"createwallet\", \"\\\"test.dat\\\"\")\n+        );\n+    std::string wallet_name = request.params[0].get_str();\n+    std::string error;\n+\n+    fs::path wallet_path = fs::absolute(wallet_name, GetWalletDir());\n+    if (fs::symlink_status(wallet_path).type() != fs::file_not_found) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13058#discussion_r189012629",
      "id" : 189012629,
      "original_commit_id" : "6e6c113e7f765fe2339cad50b57f7d9ef23f5359",
      "original_position" : 22,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 121108307,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13058",
      "updated_at" : "2018-05-25T16:12:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/189012629",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/13058#discussion_r189013559"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13058"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/189013559"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Also call some method in `w9`, like `get_wallet_rpc('w9').getwalletinfo()`?",
      "commit_id" : "8266c84615b85721c97cb0896e9bb2f2afc8e40d",
      "created_at" : "2018-05-17T16:01:16Z",
      "diff_hunk" : "@@ -211,5 +211,15 @@ def run_test(self):\n         # Fail to load if wallet file is a symlink\n         assert_raises_rpc_error(-4, \"Wallet file verification failed: Invalid -wallet path 'w8_symlink'\", self.nodes[0].loadwallet, 'w8_symlink')\n \n+        self.log.info(\"Test dynamic wallet creation.\")\n+\n+        # Fail to create a wallet if it already exists.\n+        assert_raises_rpc_error(-4, \"Wallet w2 already exists.\", self.nodes[0].createwallet, 'w2')\n+\n+        # Successfully create a wallet with a new name\n+        self.nodes[0].createwallet('w9')\n+\n+        assert 'w9' in self.nodes[0].listwallets()\n+",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13058#discussion_r189013559",
      "id" : 189013559,
      "original_commit_id" : "6e6c113e7f765fe2339cad50b57f7d9ef23f5359",
      "original_position" : 13,
      "path" : "test/functional/wallet_multiwallet.py",
      "position" : null,
      "pull_request_review_id" : 121108307,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13058",
      "updated_at" : "2018-05-25T16:12:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/189013559",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/13058#discussion_r189013803"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13058"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/189013803"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Could test invalid argument.",
      "commit_id" : "8266c84615b85721c97cb0896e9bb2f2afc8e40d",
      "created_at" : "2018-05-17T16:02:00Z",
      "diff_hunk" : "@@ -211,5 +211,15 @@ def run_test(self):\n         # Fail to load if wallet file is a symlink\n         assert_raises_rpc_error(-4, \"Wallet file verification failed: Invalid -wallet path 'w8_symlink'\", self.nodes[0].loadwallet, 'w8_symlink')\n \n+        self.log.info(\"Test dynamic wallet creation.\")\n+",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13058#discussion_r189013803",
      "id" : 189013803,
      "original_commit_id" : "6e6c113e7f765fe2339cad50b57f7d9ef23f5359",
      "original_position" : 5,
      "path" : "test/functional/wallet_multiwallet.py",
      "position" : 5,
      "pull_request_review_id" : 121108307,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13058",
      "updated_at" : "2018-05-25T16:12:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/189013803",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/13058#discussion_r189013925"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13058"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/189013925"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Return same format as `loadwallet`?",
      "commit_id" : "8266c84615b85721c97cb0896e9bb2f2afc8e40d",
      "created_at" : "2018-05-17T16:02:23Z",
      "diff_hunk" : "@@ -3041,6 +3041,49 @@ UniValue loadwallet(const JSONRPCRequest& request)\n     return obj;\n }\n \n+UniValue createwallet(const JSONRPCRequest& request)\n+{\n+    if (request.fHelp || request.params.size() != 1)\n+        throw std::runtime_error(\n+            \"createwallet \\\"filename\\\"\\n\"\n+            \"\\nCreates and loads a new wallet.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"wallet_name\\\"    (string, required) The name for the new wallet.\\n\"\n+            \"\\nResult:\\n\"\n+            \"<walletname>     (string) The wallet name if created successfully.\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13058#discussion_r189013925",
      "id" : 189013925,
      "original_commit_id" : "6e6c113e7f765fe2339cad50b57f7d9ef23f5359",
      "original_position" : 13,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 121108307,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13058",
      "updated_at" : "2018-05-25T16:12:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/189013925",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/13058#discussion_r189014676"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13058"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/189014676"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Assert result.",
      "commit_id" : "8266c84615b85721c97cb0896e9bb2f2afc8e40d",
      "created_at" : "2018-05-17T16:04:40Z",
      "diff_hunk" : "@@ -211,5 +211,15 @@ def run_test(self):\n         # Fail to load if wallet file is a symlink\n         assert_raises_rpc_error(-4, \"Wallet file verification failed: Invalid -wallet path 'w8_symlink'\", self.nodes[0].loadwallet, 'w8_symlink')\n \n+        self.log.info(\"Test dynamic wallet creation.\")\n+\n+        # Fail to create a wallet if it already exists.\n+        assert_raises_rpc_error(-4, \"Wallet w2 already exists.\", self.nodes[0].createwallet, 'w2')\n+\n+        # Successfully create a wallet with a new name\n+        self.nodes[0].createwallet('w9')",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13058#discussion_r189014676",
      "id" : 189014676,
      "original_commit_id" : "6e6c113e7f765fe2339cad50b57f7d9ef23f5359",
      "original_position" : 10,
      "path" : "test/functional/wallet_multiwallet.py",
      "position" : null,
      "pull_request_review_id" : 121110872,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13058",
      "updated_at" : "2018-05-25T16:12:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/189014676",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/13058#discussion_r189089491"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13058"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/189089491"
         }
      },
      "author_association" : "MEMBER",
      "body" : "`CWallet::Verify()` below takes the `cs_wallets` lock, so I think the worst that can happen is the first wallet creation succeeds and the second fails `Verify()`.",
      "commit_id" : "8266c84615b85721c97cb0896e9bb2f2afc8e40d",
      "created_at" : "2018-05-17T20:24:03Z",
      "diff_hunk" : "@@ -3041,6 +3041,49 @@ UniValue loadwallet(const JSONRPCRequest& request)\n     return obj;\n }\n \n+UniValue createwallet(const JSONRPCRequest& request)\n+{\n+    if (request.fHelp || request.params.size() != 1)\n+        throw std::runtime_error(\n+            \"createwallet \\\"filename\\\"\\n\"\n+            \"\\nCreates and loads a new wallet.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"wallet_name\\\"    (string, required) The name for the new wallet.\\n\"\n+            \"\\nResult:\\n\"\n+            \"<walletname>     (string) The wallet name if created successfully.\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"createwallet\", \"\\\"test.dat\\\"\")\n+            + HelpExampleRpc(\"createwallet\", \"\\\"test.dat\\\"\")\n+        );\n+    std::string wallet_name = request.params[0].get_str();\n+    std::string error;\n+\n+    fs::path wallet_path = fs::absolute(wallet_name, GetWalletDir());\n+    if (fs::symlink_status(wallet_path).type() != fs::file_not_found) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13058#discussion_r189089491",
      "id" : 189089491,
      "in_reply_to_id" : 189012629,
      "original_commit_id" : "6e6c113e7f765fe2339cad50b57f7d9ef23f5359",
      "original_position" : 22,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 121202016,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13058",
      "updated_at" : "2018-05-25T16:12:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/189089491",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/13058#discussion_r189090386"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13058"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/189090386"
         }
      },
      "author_association" : "MEMBER",
      "body" : "We don't exhaustively test invalid args for RPCs (since it's just hitting the univalue type checking code).",
      "commit_id" : "8266c84615b85721c97cb0896e9bb2f2afc8e40d",
      "created_at" : "2018-05-17T20:27:02Z",
      "diff_hunk" : "@@ -211,5 +211,15 @@ def run_test(self):\n         # Fail to load if wallet file is a symlink\n         assert_raises_rpc_error(-4, \"Wallet file verification failed: Invalid -wallet path 'w8_symlink'\", self.nodes[0].loadwallet, 'w8_symlink')\n \n+        self.log.info(\"Test dynamic wallet creation.\")\n+",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13058#discussion_r189090386",
      "id" : 189090386,
      "in_reply_to_id" : 189013803,
      "original_commit_id" : "6e6c113e7f765fe2339cad50b57f7d9ef23f5359",
      "original_position" : 5,
      "path" : "test/functional/wallet_multiwallet.py",
      "position" : 5,
      "pull_request_review_id" : 121202997,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13058",
      "updated_at" : "2018-05-25T16:12:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/189090386",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/13058#discussion_r189091936"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13058"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/189091936"
         }
      },
      "author_association" : "MEMBER",
      "body" : "sure. Added",
      "commit_id" : "8266c84615b85721c97cb0896e9bb2f2afc8e40d",
      "created_at" : "2018-05-17T20:32:54Z",
      "diff_hunk" : "@@ -211,5 +211,15 @@ def run_test(self):\n         # Fail to load if wallet file is a symlink\n         assert_raises_rpc_error(-4, \"Wallet file verification failed: Invalid -wallet path 'w8_symlink'\", self.nodes[0].loadwallet, 'w8_symlink')\n \n+        self.log.info(\"Test dynamic wallet creation.\")\n+\n+        # Fail to create a wallet if it already exists.\n+        assert_raises_rpc_error(-4, \"Wallet w2 already exists.\", self.nodes[0].createwallet, 'w2')\n+\n+        # Successfully create a wallet with a new name\n+        self.nodes[0].createwallet('w9')\n+\n+        assert 'w9' in self.nodes[0].listwallets()\n+",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13058#discussion_r189091936",
      "id" : 189091936,
      "in_reply_to_id" : 189013559,
      "original_commit_id" : "6e6c113e7f765fe2339cad50b57f7d9ef23f5359",
      "original_position" : 13,
      "path" : "test/functional/wallet_multiwallet.py",
      "position" : null,
      "pull_request_review_id" : 121204977,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13058",
      "updated_at" : "2018-05-25T16:12:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/189091936",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/13058#discussion_r189092058"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13058"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/189092058"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Done",
      "commit_id" : "8266c84615b85721c97cb0896e9bb2f2afc8e40d",
      "created_at" : "2018-05-17T20:33:20Z",
      "diff_hunk" : "@@ -3041,6 +3041,49 @@ UniValue loadwallet(const JSONRPCRequest& request)\n     return obj;\n }\n \n+UniValue createwallet(const JSONRPCRequest& request)\n+{\n+    if (request.fHelp || request.params.size() != 1)\n+        throw std::runtime_error(\n+            \"createwallet \\\"filename\\\"\\n\"\n+            \"\\nCreates and loads a new wallet.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"wallet_name\\\"    (string, required) The name for the new wallet.\\n\"\n+            \"\\nResult:\\n\"\n+            \"<walletname>     (string) The wallet name if created successfully.\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13058#discussion_r189092058",
      "id" : 189092058,
      "in_reply_to_id" : 189013925,
      "original_commit_id" : "6e6c113e7f765fe2339cad50b57f7d9ef23f5359",
      "original_position" : 13,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 121205134,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13058",
      "updated_at" : "2018-05-25T16:12:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/189092058",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/13058#discussion_r189092102"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13058"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/189092102"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Done",
      "commit_id" : "8266c84615b85721c97cb0896e9bb2f2afc8e40d",
      "created_at" : "2018-05-17T20:33:29Z",
      "diff_hunk" : "@@ -211,5 +211,15 @@ def run_test(self):\n         # Fail to load if wallet file is a symlink\n         assert_raises_rpc_error(-4, \"Wallet file verification failed: Invalid -wallet path 'w8_symlink'\", self.nodes[0].loadwallet, 'w8_symlink')\n \n+        self.log.info(\"Test dynamic wallet creation.\")\n+\n+        # Fail to create a wallet if it already exists.\n+        assert_raises_rpc_error(-4, \"Wallet w2 already exists.\", self.nodes[0].createwallet, 'w2')\n+\n+        # Successfully create a wallet with a new name\n+        self.nodes[0].createwallet('w9')",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13058#discussion_r189092102",
      "id" : 189092102,
      "in_reply_to_id" : 189014676,
      "original_commit_id" : "6e6c113e7f765fe2339cad50b57f7d9ef23f5359",
      "original_position" : 10,
      "path" : "test/functional/wallet_multiwallet.py",
      "position" : null,
      "pull_request_review_id" : 121205188,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13058",
      "updated_at" : "2018-05-25T16:12:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/189092102",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Addressed @promag comments.",
      "created_at" : "2018-05-17T20:34:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13058#issuecomment-390002098",
      "id" : 390002098,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13058",
      "updated_at" : "2018-05-17T20:34:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/390002098",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Needs rebase.",
      "created_at" : "2018-05-18T09:06:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13058#issuecomment-390144903",
      "id" : 390144903,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13058",
      "updated_at" : "2018-05-18T09:06:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/390144903",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Tested ACK 53e71dc4474db083f99ca0d30ca3abd5a492b1a6.\r\nConceptually, I think adding an option for load/not-load could make sense,... or is the use care of pure wallet creation useless? Eventually create should never load since it should not hurt on RPC level to call a chain of commands to complete a task.",
      "created_at" : "2018-05-18T13:37:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13058#issuecomment-390209493",
      "id" : 390209493,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13058",
      "updated_at" : "2018-05-18T13:37:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/390209493",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/178464?v=4",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> I think adding an option for load/not-load could make sense,... or is the use care of pure wallet creation useless? Eventually create should never load.\r\n\r\nMy first thoughts would be that `walletcreate` should always load the wallet on creation. It seems unintuitive to have to call loadwallet immediately after creating a new wallet.\r\n\r\nIf there's a requirement for 'create without load', then I think that should be provided by a bitcoin-wallet-tool. There's no need to have a full node running if you just want to create a new wallet file.",
      "created_at" : "2018-05-21T17:52:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13058#issuecomment-390731005",
      "id" : 390731005,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13058",
      "updated_at" : "2018-05-21T17:52:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/390731005",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> My first thoughts would be that walletcreate should always load the wallet on creation. It seems unintuitive to have to call loadwallet immediately after creating a new wallet.\r\n\r\nNot sure here.\r\nWe do design an RPC interface/API and not end user function representations. An additional step seems acceptable if it widens the usability of the API.... though the question of what use cases a pure create could fulfil is one that may not have concrete answers today.",
      "created_at" : "2018-05-21T18:41:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13058#issuecomment-390744897",
      "id" : 390744897,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13058",
      "updated_at" : "2018-05-21T18:41:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/390744897",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/178464?v=4",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@jonasschnelli - I'm happy to take wider feedback on this. My preference would be to keep the current branch's behaviour (always load when creating) and decide whether to add create-without-load later with a new argument. I'm happy to change that though if others think we should have create-without-load now.",
      "created_at" : "2018-05-21T19:12:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13058#issuecomment-390753126",
      "id" : 390753126,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13058",
      "updated_at" : "2018-05-21T19:12:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/390753126",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Yes. Lets try to get more opinions... I guess it could also be added later (an option to make create not load).\r\nHowever, this is a great PR and I'd like to underline my tested ACK https://github.com/bitcoin/bitcoin/pull/13058#issuecomment-390209493",
      "created_at" : "2018-05-21T19:15:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13058#issuecomment-390753978",
      "id" : 390753978,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13058",
      "updated_at" : "2018-05-21T19:15:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/390753978",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/178464?v=4",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Well if `createwallet` creates and loads the wallet and there is no use case for just create, then a valid alternative would be to add an option to `loadwallet` to create in case it doesn't exist?",
      "created_at" : "2018-05-21T19:18:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13058#issuecomment-390754612",
      "id" : 390754612,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13058",
      "updated_at" : "2018-05-21T19:18:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/390754612",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> a valid alternative would be to add an option to loadwallet to create in case it doesn't exist.\r\n\r\nI'd prefer to keep these two methods separate. It seems to me that reloading an existing wallet and creating a new wallet are completely different operations and should have their own RPC methods.",
      "created_at" : "2018-05-21T20:03:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13058#issuecomment-390765767",
      "id" : 390765767,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13058",
      "updated_at" : "2018-05-21T20:03:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/390765767",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Needs rebase after #13063.",
      "created_at" : "2018-05-25T14:27:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13058#issuecomment-392075239",
      "id" : 392075239,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13058",
      "updated_at" : "2018-05-25T14:27:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/392075239",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/13058#discussion_r190911519"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13058"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/190911519"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit, remove empty line.",
      "commit_id" : "8266c84615b85721c97cb0896e9bb2f2afc8e40d",
      "created_at" : "2018-05-25T14:27:52Z",
      "diff_hunk" : "@@ -3044,6 +3044,53 @@ UniValue loadwallet(const JSONRPCRequest& request)\n     return obj;\n }\n \n+UniValue createwallet(const JSONRPCRequest& request)\n+{\n+    if (request.fHelp || request.params.size() != 1)\n+        throw std::runtime_error(\n+            \"createwallet \\\"filename\\\"\\n\"\n+            \"\\nCreates and loads a new wallet.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"wallet_name\\\"    (string, required) The name for the new wallet.\\n\"\n+            \"\\nResult:\\n\"\n+            \"{\\n\"\n+            \"  \\\"name\\\" :    <wallet_name>,        (string) The wallet name if created successfully.\\n\"\n+            \"  \\\"warning\\\" : <warning>,            (string) Warning message if wallet was not loaded cleanly.\\n\"\n+            \"}\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"createwallet\", \"\\\"test.dat\\\"\")\n+            + HelpExampleRpc(\"createwallet\", \"\\\"test.dat\\\"\")\n+        );\n+    std::string wallet_name = request.params[0].get_str();\n+    std::string error;\n+    std::string warning;\n+\n+    fs::path wallet_path = fs::absolute(wallet_name, GetWalletDir());\n+    if (fs::symlink_status(wallet_path).type() != fs::file_not_found) {\n+        throw JSONRPCError(RPC_WALLET_ERROR, \"Wallet \" + wallet_name + \" already exists.\");\n+    }\n+\n+    // Wallet::Verify will check if we're trying to create a wallet with a duplication name.\n+    if (!CWallet::Verify(wallet_name, false, error, warning)) {\n+        throw JSONRPCError(RPC_WALLET_ERROR, \"Wallet file verification failed: \" + error);\n+    }\n+\n+    CWallet * const wallet = CWallet::CreateWalletFromFile(wallet_name, fs::absolute(wallet_name, GetWalletDir()));\n+    if (!wallet) {\n+        throw JSONRPCError(RPC_WALLET_ERROR, \"Wallet creation failed.\");\n+    }\n+    AddWallet(wallet);\n+\n+    wallet->postInitProcess();\n+\n+    UniValue obj(UniValue::VOBJ);\n+    obj.pushKV(\"name\", wallet->GetName());\n+    obj.pushKV(\"warning\", warning);\n+\n+    return obj;\n+",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13058#discussion_r190911519",
      "id" : 190911519,
      "original_commit_id" : "e058f0d79ece5d4f23e2978f8fb2e9529e180bd5",
      "original_position" : 48,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 123393767,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13058",
      "updated_at" : "2018-05-25T16:12:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/190911519",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/13058#discussion_r190912794"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13058"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/190912794"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Here `wallet_name`, above `filename`   ",
      "commit_id" : "8266c84615b85721c97cb0896e9bb2f2afc8e40d",
      "created_at" : "2018-05-25T14:31:41Z",
      "diff_hunk" : "@@ -3044,6 +3044,53 @@ UniValue loadwallet(const JSONRPCRequest& request)\n     return obj;\n }\n \n+UniValue createwallet(const JSONRPCRequest& request)\n+{\n+    if (request.fHelp || request.params.size() != 1)\n+        throw std::runtime_error(\n+            \"createwallet \\\"filename\\\"\\n\"\n+            \"\\nCreates and loads a new wallet.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"wallet_name\\\"    (string, required) The name for the new wallet.\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13058#discussion_r190912794",
      "id" : 190912794,
      "original_commit_id" : "e058f0d79ece5d4f23e2978f8fb2e9529e180bd5",
      "original_position" : 11,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 123395289,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13058",
      "updated_at" : "2018-05-25T16:12:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/190912794",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/13058#discussion_r190927225"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13058"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/190927225"
         }
      },
      "author_association" : "MEMBER",
      "body" : "removed",
      "commit_id" : "8266c84615b85721c97cb0896e9bb2f2afc8e40d",
      "created_at" : "2018-05-25T15:19:22Z",
      "diff_hunk" : "@@ -3044,6 +3044,53 @@ UniValue loadwallet(const JSONRPCRequest& request)\n     return obj;\n }\n \n+UniValue createwallet(const JSONRPCRequest& request)\n+{\n+    if (request.fHelp || request.params.size() != 1)\n+        throw std::runtime_error(\n+            \"createwallet \\\"filename\\\"\\n\"\n+            \"\\nCreates and loads a new wallet.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"wallet_name\\\"    (string, required) The name for the new wallet.\\n\"\n+            \"\\nResult:\\n\"\n+            \"{\\n\"\n+            \"  \\\"name\\\" :    <wallet_name>,        (string) The wallet name if created successfully.\\n\"\n+            \"  \\\"warning\\\" : <warning>,            (string) Warning message if wallet was not loaded cleanly.\\n\"\n+            \"}\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"createwallet\", \"\\\"test.dat\\\"\")\n+            + HelpExampleRpc(\"createwallet\", \"\\\"test.dat\\\"\")\n+        );\n+    std::string wallet_name = request.params[0].get_str();\n+    std::string error;\n+    std::string warning;\n+\n+    fs::path wallet_path = fs::absolute(wallet_name, GetWalletDir());\n+    if (fs::symlink_status(wallet_path).type() != fs::file_not_found) {\n+        throw JSONRPCError(RPC_WALLET_ERROR, \"Wallet \" + wallet_name + \" already exists.\");\n+    }\n+\n+    // Wallet::Verify will check if we're trying to create a wallet with a duplication name.\n+    if (!CWallet::Verify(wallet_name, false, error, warning)) {\n+        throw JSONRPCError(RPC_WALLET_ERROR, \"Wallet file verification failed: \" + error);\n+    }\n+\n+    CWallet * const wallet = CWallet::CreateWalletFromFile(wallet_name, fs::absolute(wallet_name, GetWalletDir()));\n+    if (!wallet) {\n+        throw JSONRPCError(RPC_WALLET_ERROR, \"Wallet creation failed.\");\n+    }\n+    AddWallet(wallet);\n+\n+    wallet->postInitProcess();\n+\n+    UniValue obj(UniValue::VOBJ);\n+    obj.pushKV(\"name\", wallet->GetName());\n+    obj.pushKV(\"warning\", warning);\n+\n+    return obj;\n+",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13058#discussion_r190927225",
      "id" : 190927225,
      "in_reply_to_id" : 190911519,
      "original_commit_id" : "e058f0d79ece5d4f23e2978f8fb2e9529e180bd5",
      "original_position" : 48,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 123413460,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13058",
      "updated_at" : "2018-05-25T16:12:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/190927225",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/13058#discussion_r190927252"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13058"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/190927252"
         }
      },
      "author_association" : "MEMBER",
      "body" : "fixed",
      "commit_id" : "8266c84615b85721c97cb0896e9bb2f2afc8e40d",
      "created_at" : "2018-05-25T15:19:26Z",
      "diff_hunk" : "@@ -3044,6 +3044,53 @@ UniValue loadwallet(const JSONRPCRequest& request)\n     return obj;\n }\n \n+UniValue createwallet(const JSONRPCRequest& request)\n+{\n+    if (request.fHelp || request.params.size() != 1)\n+        throw std::runtime_error(\n+            \"createwallet \\\"filename\\\"\\n\"\n+            \"\\nCreates and loads a new wallet.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"wallet_name\\\"    (string, required) The name for the new wallet.\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13058#discussion_r190927252",
      "id" : 190927252,
      "in_reply_to_id" : 190912794,
      "original_commit_id" : "e058f0d79ece5d4f23e2978f8fb2e9529e180bd5",
      "original_position" : 11,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 123413488,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13058",
      "updated_at" : "2018-05-25T16:12:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/190927252",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Addressed @promag's comments.",
      "created_at" : "2018-05-25T15:20:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13058#issuecomment-392091663",
      "id" : 392091663,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13058",
      "updated_at" : "2018-05-25T15:20:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/392091663",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/13058#discussion_r190928812"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13058"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/190928812"
         }
      },
      "author_association" : "MEMBER",
      "body" : "```cpp\r\nstd::shared_ptr<CWallet> wallet = CWallet::CreateWalletFromFile(...);",
      "commit_id" : "8266c84615b85721c97cb0896e9bb2f2afc8e40d",
      "created_at" : "2018-05-25T15:24:14Z",
      "diff_hunk" : "@@ -3044,6 +3044,52 @@ UniValue loadwallet(const JSONRPCRequest& request)\n     return obj;\n }\n \n+UniValue createwallet(const JSONRPCRequest& request)\n+{\n+    if (request.fHelp || request.params.size() != 1)\n+        throw std::runtime_error(\n+            \"createwallet \\\"wallet_name\\\"\\n\"\n+            \"\\nCreates and loads a new wallet.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"wallet_name\\\"    (string, required) The name for the new wallet.\\n\"\n+            \"\\nResult:\\n\"\n+            \"{\\n\"\n+            \"  \\\"name\\\" :    <wallet_name>,        (string) The wallet name if created successfully.\\n\"\n+            \"  \\\"warning\\\" : <warning>,            (string) Warning message if wallet was not loaded cleanly.\\n\"\n+            \"}\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"createwallet\", \"\\\"test.dat\\\"\")\n+            + HelpExampleRpc(\"createwallet\", \"\\\"test.dat\\\"\")\n+        );\n+    std::string wallet_name = request.params[0].get_str();\n+    std::string error;\n+    std::string warning;\n+\n+    fs::path wallet_path = fs::absolute(wallet_name, GetWalletDir());\n+    if (fs::symlink_status(wallet_path).type() != fs::file_not_found) {\n+        throw JSONRPCError(RPC_WALLET_ERROR, \"Wallet \" + wallet_name + \" already exists.\");\n+    }\n+\n+    // Wallet::Verify will check if we're trying to create a wallet with a duplication name.\n+    if (!CWallet::Verify(wallet_name, false, error, warning)) {\n+        throw JSONRPCError(RPC_WALLET_ERROR, \"Wallet file verification failed: \" + error);\n+    }\n+\n+    CWallet * const wallet = CWallet::CreateWalletFromFile(wallet_name, fs::absolute(wallet_name, GetWalletDir()));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13058#discussion_r190928812",
      "id" : 190928812,
      "original_commit_id" : "eb01ebd6010fd87e90276cb270b13ae73cf97b9d",
      "original_position" : 35,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 123415323,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13058",
      "updated_at" : "2018-05-25T16:12:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/190928812",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/13058#discussion_r190942185"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13058"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/190942185"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Thanks promag. Rebased and fixed",
      "commit_id" : "8266c84615b85721c97cb0896e9bb2f2afc8e40d",
      "created_at" : "2018-05-25T16:12:32Z",
      "diff_hunk" : "@@ -3044,6 +3044,52 @@ UniValue loadwallet(const JSONRPCRequest& request)\n     return obj;\n }\n \n+UniValue createwallet(const JSONRPCRequest& request)\n+{\n+    if (request.fHelp || request.params.size() != 1)\n+        throw std::runtime_error(\n+            \"createwallet \\\"wallet_name\\\"\\n\"\n+            \"\\nCreates and loads a new wallet.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"wallet_name\\\"    (string, required) The name for the new wallet.\\n\"\n+            \"\\nResult:\\n\"\n+            \"{\\n\"\n+            \"  \\\"name\\\" :    <wallet_name>,        (string) The wallet name if created successfully.\\n\"\n+            \"  \\\"warning\\\" : <warning>,            (string) Warning message if wallet was not loaded cleanly.\\n\"\n+            \"}\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"createwallet\", \"\\\"test.dat\\\"\")\n+            + HelpExampleRpc(\"createwallet\", \"\\\"test.dat\\\"\")\n+        );\n+    std::string wallet_name = request.params[0].get_str();\n+    std::string error;\n+    std::string warning;\n+\n+    fs::path wallet_path = fs::absolute(wallet_name, GetWalletDir());\n+    if (fs::symlink_status(wallet_path).type() != fs::file_not_found) {\n+        throw JSONRPCError(RPC_WALLET_ERROR, \"Wallet \" + wallet_name + \" already exists.\");\n+    }\n+\n+    // Wallet::Verify will check if we're trying to create a wallet with a duplication name.\n+    if (!CWallet::Verify(wallet_name, false, error, warning)) {\n+        throw JSONRPCError(RPC_WALLET_ERROR, \"Wallet file verification failed: \" + error);\n+    }\n+\n+    CWallet * const wallet = CWallet::CreateWalletFromFile(wallet_name, fs::absolute(wallet_name, GetWalletDir()));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13058#discussion_r190942185",
      "id" : 190942185,
      "in_reply_to_id" : 190928812,
      "original_commit_id" : "eb01ebd6010fd87e90276cb270b13ae73cf97b9d",
      "original_position" : 35,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 123431834,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13058",
      "updated_at" : "2018-05-25T16:12:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/190942185",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/13058#discussion_r191935671"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13058"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/191935671"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit, `can be created (and loaded) by calling ...`?",
      "commit_id" : "8266c84615b85721c97cb0896e9bb2f2afc8e40d",
      "created_at" : "2018-05-30T21:55:49Z",
      "diff_hunk" : "@@ -1,8 +1,9 @@\n-Dynamic loading of wallets\n---------------------------\n+Dynamic loading and creation of wallets\n+---------------------------------------\n \n-Previously, wallets could only be loaded at startup, by specifying `-wallet` parameters on the command line or in the bitcoin.conf file. It is now possible to load wallets dynamically at runtime by calling the `loadwallet` RPC.\n+Previously, wallets could only be loaded or created at startup, by specifying `-wallet` parameters on the command line or in the bitcoin.conf file. It is now possible to load and create wallets dynamically at runtime:\n \n-The wallet can be specified as file/directory basename (which must be located in the `walletdir` directory), or as an absolute path to a file/directory.\n+- Existing wallets can be loaded by calling the `loadwallet` RPC. The wallet can be specified as file/directory basename (which must be located in the `walletdir` directory), or as an absolute path to a file/directory.\n+- New wallets can be created by calling the `createwallet` RPC. The provided name must not match a wallet file in the `walletdir` directory or the name of a wallet that is currently loaded.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13058#discussion_r191935671",
      "id" : 191935671,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE5MTkzNTY3MQ==",
      "original_commit_id" : "8266c84615b85721c97cb0896e9bb2f2afc8e40d",
      "original_position" : 11,
      "path" : "doc/release-notes-pr10740.md",
      "position" : 11,
      "pull_request_review_id" : 124608470,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13058",
      "updated_at" : "2018-05-30T21:55:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/191935671",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Tested ACK 8266c84.",
      "created_at" : "2018-05-30T21:56:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13058#issuecomment-393332862",
      "id" : 393332862,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13058",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDM5MzMzMjg2Mg==",
      "updated_at" : "2018-05-30T21:56:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/393332862",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/13058#discussion_r191987548"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13058"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/191987548"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Are these `.dat` suffixes neccessary? It would create a folder named test.dat on my Windows PC.",
      "commit_id" : "8266c84615b85721c97cb0896e9bb2f2afc8e40d",
      "created_at" : "2018-05-31T04:39:39Z",
      "diff_hunk" : "@@ -3114,6 +3114,52 @@ UniValue loadwallet(const JSONRPCRequest& request)\n     return obj;\n }\n \n+UniValue createwallet(const JSONRPCRequest& request)\n+{\n+    if (request.fHelp || request.params.size() != 1)\n+        throw std::runtime_error(\n+            \"createwallet \\\"wallet_name\\\"\\n\"\n+            \"\\nCreates and loads a new wallet.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"wallet_name\\\"    (string, required) The name for the new wallet.\\n\"\n+            \"\\nResult:\\n\"\n+            \"{\\n\"\n+            \"  \\\"name\\\" :    <wallet_name>,        (string) The wallet name if created successfully.\\n\"\n+            \"  \\\"warning\\\" : <warning>,            (string) Warning message if wallet was not loaded cleanly.\\n\"\n+            \"}\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"createwallet\", \"\\\"test.dat\\\"\")\n+            + HelpExampleRpc(\"createwallet\", \"\\\"test.dat\\\"\")",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13058#discussion_r191987548",
      "id" : 191987548,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE5MTk4NzU0OA==",
      "original_commit_id" : "8266c84615b85721c97cb0896e9bb2f2afc8e40d",
      "original_position" : 19,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : 19,
      "pull_request_review_id" : 124668640,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13058",
      "updated_at" : "2018-05-31T04:39:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/191987548",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/11154118?v=4",
         "events_url" : "https://api.github.com/users/ken2812221/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ken2812221/followers",
         "following_url" : "https://api.github.com/users/ken2812221/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ken2812221/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ken2812221",
         "id" : 11154118,
         "login" : "ken2812221",
         "node_id" : "MDQ6VXNlcjExMTU0MTE4",
         "organizations_url" : "https://api.github.com/users/ken2812221/orgs",
         "received_events_url" : "https://api.github.com/users/ken2812221/received_events",
         "repos_url" : "https://api.github.com/users/ken2812221/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ken2812221/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ken2812221/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ken2812221"
      }
   }
]
