{
   "assignee" : null,
   "assignees" : [],
   "author_association" : "MEMBER",
   "body" : "feature_block.py occasionally fails on Travis. I believe this is due to\r\na a race condition when reconnecting to bitcoind after a subtest that\r\nexpects disconnection. If the test runs ahead and sends the INV for the\r\nsubsequent test before we've received the initial sync getheaders, then\r\nwe may end up sending two headers messages - one as a response to the\r\ninitial sync getheaders and one in response to the INV getheaders. If\r\nboth of those headers fail validation with a DoS score of 50 or higher,\r\nthen we'll unexpectedly be disconnected.\r\n\r\nThere is only one validation failure that has a DoS score bewteen 50 and\r\n100, which is high-hash. That's why the test is failing immediately\r\nafter the \"Reject a block with invalid work\" subtest.\r\n\r\nFix is to wait for the initial getheaders from the peer before we\r\nstart populating our blockstore. That way we won't have any invalid\r\nheaders to respond to it with.",
   "closed_at" : "2018-04-22T01:02:54Z",
   "closed_by" : {
      "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
      "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
      "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/MarcoFalke",
      "id" : 6399679,
      "login" : "MarcoFalke",
      "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
      "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
      "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/MarcoFalke"
   },
   "comments" : 4,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13048/comments",
   "created_at" : "2018-04-20T19:51:03Z",
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13048/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/pull/13048",
   "id" : 316391306,
   "labels" : [
      {
         "color" : "d4c5f9",
         "default" : false,
         "id" : 62963516,
         "name" : "Tests",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/Tests"
      }
   ],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13048/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "number" : 13048,
   "pull_request" : {
      "diff_url" : "https://github.com/bitcoin/bitcoin/pull/13048.diff",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13048",
      "patch_url" : "https://github.com/bitcoin/bitcoin/pull/13048.patch",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13048"
   },
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "closed",
   "title" : "[tests] Fix feature_block flakiness",
   "updated_at" : "2018-04-22T01:02:54Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13048",
   "user" : {
      "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
      "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
      "followers_url" : "https://api.github.com/users/jnewbery/followers",
      "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/jnewbery",
      "id" : 1063656,
      "login" : "jnewbery",
      "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
      "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
      "repos_url" : "https://api.github.com/users/jnewbery/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/jnewbery"
   }
}
