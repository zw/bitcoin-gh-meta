[
   {
      "author_association" : "MEMBER",
      "body" : "Builds on top of #12953. Please remove that PR first.\r\n\r\nIn my opinion, the `getlabeladdress` should not have been introduced. However, it was included in #12892 to remove controversy and ensure that PR could be merged.\r\n\r\nThere are two main reasons for removing this RPC method:\r\n\r\n- Labels are associated with addresses (rather than addresses being associated with labels, as was the case with accounts). The `getlabeladdress` does not make sense in this model and blurs the distinction that \"labels are associated with addresses, instead of addresses associated with labels\".\r\n- Keeping `getlabeladdress` requires keeping the whole CAccount administration in place. Part of the reason for the account to label refactor is simplify the wallet mess and to get rid of that.\r\n\r\nMany contributors have already concept ACK'ed removing this method (@laanwj at https://github.com/bitcoin/bitcoin/pull/12892#issuecomment-379611854, @PierreRochard at https://github.com/bitcoin/bitcoin/pull/12892#issuecomment-379874953, @promag at https://github.com/bitcoin/bitcoin/pull/12892#pullrequestreview-110855143, @jonasschnelli at https://github.com/bitcoin/bitcoin/pull/12892#discussion_r179550228)\r\n\r\nMain opposition to removing this method came from @ryanofsky and @luke-jr . See https://github.com/bitcoin/bitcoin/pull/7729#issuecomment-199444036 onwards for a full discussion.\r\n",
      "created_at" : "2018-04-23T19:28:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13060#issuecomment-383694066",
      "id" : 383694066,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13060",
      "updated_at" : "2018-04-23T19:28:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/383694066",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Main opposition to removing this method came from @ryanofsky and @luke-jr \r\n\r\nNo opposition here, I just didn't think this should be removed or changed in the middle of a PR that otherwise was only adding functionality.\r\n\r\nBut I actually don't know what \"labels are associated with addresses rather than addresses being\r\nassociated with labels\" is supposed to mean. This sounds like a zen koan. It may be more accurate to say \"Only one label can be associated with an address, but many addresses can be associated with one label. Labels (unlike accounts) do not have a default receiving address.\"\r\n\r\nIt could also be good to update release notes with a workaround for the deprecated `getaccountadddress`, though I couldn't think of anything very straightforward. Could suggest combining `getnewaddress(label)`, `listreceivedbylabel`, and `getaddressesbylabel` for a replacement depending on the use-case.",
      "created_at" : "2018-04-23T20:11:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13060#issuecomment-383706996",
      "id" : 383706996,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13060",
      "updated_at" : "2018-04-23T20:12:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/383706996",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> I actually don't know what \"labels are associated with addresses rather than addresses being\r\nassociated with labels\".\r\n\r\nThe idea is that an address HAS labels (currently an address can have only one label, but it should be possible to extend that in future). Conversely an account HAS addresses, ie the address belongs to the account.\r\n\r\nIn a model where accounts have addresses, it makes sense for an account to have a 'default receiving address'. It doesn't make sense for a label to have a 'default receiving address', since a label is just a description that can be attached to one or more addresses.\r\n\r\nI don't think that's too mystical. The relationship of addresses owning labels is simple, and the existence of a 'label address' confuses that simple relationship.",
      "created_at" : "2018-04-23T20:22:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13060#issuecomment-383709983",
      "id" : 383709983,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13060",
      "updated_at" : "2018-04-23T20:22:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/383709983",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> It could also be good to update release notes with a workaround for the deprecated getaccountadddress, though I couldn't think of anything very straightforward.\r\n\r\nThere are two suggested workarounds here: https://github.com/bitcoin/bitcoin/pull/7729#issuecomment-200219840 and here: https://github.com/bitcoin/bitcoin/pull/7729#issuecomment-206929678.\r\n\r\nI'm happy to add those to the release notes if you think that's a good idea.",
      "created_at" : "2018-04-23T21:43:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13060#issuecomment-383732780",
      "id" : 383732780,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13060",
      "updated_at" : "2018-04-23T21:43:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/383732780",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "author_association" : "OWNER",
      "body" : "Concept ACK. Will review in detail after #12953 merged.\r\n(it has been merged, please rebase)",
      "created_at" : "2018-04-24T12:25:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13060#issuecomment-383911279",
      "id" : 383911279,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13060",
      "updated_at" : "2018-04-24T13:24:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/383911279",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Purged GitHub to get rid of the merged commits without rebase:\r\n\r\n<details><summary></summary>\r\n\r\n```\r\ngit push git@github.com:jnewbery/bitcoin.git a3d7d6ad9ff3b40904fae0b8d97b46126e810f3b:remove_getlabeladdress && git push git@github.com:jnewbery/bitcoin.git 8d22e03929f1c6fdcf8669fb01246b7099d861f2:remove_getlabeladdress -f\r\n```\r\n</details>",
      "created_at" : "2018-04-24T13:40:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13060#issuecomment-383934459",
      "id" : 383934459,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13060",
      "updated_at" : "2018-04-24T13:40:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/383934459",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/13060#discussion_r183962923"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13060"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/183962923"
         }
      },
      "author_association" : "OWNER",
      "body" : "`address = node.getnewaddress(label.name)`?\r\n(or is the point here to test setlabel?)\r\n",
      "commit_id" : "8d22e03929f1c6fdcf8669fb01246b7099d861f2",
      "created_at" : "2018-04-25T07:30:32Z",
      "diff_hunk" : "@@ -92,17 +92,25 @@ def _run_subtest(self, accounts_api, node):\n         # recognize the label/address associations.\n         labels = [Label(name, accounts_api) for name in (\"a\", \"b\", \"c\", \"d\", \"e\")]\n         for label in labels:\n-            label.add_receive_address(node.getlabeladdress(label=label.name, force=True))\n+            if accounts_api:\n+                address = node.getaccountaddress(label.name)\n+            else:\n+                address = node.getnewaddress()",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13060#discussion_r183962923",
      "id" : 183962923,
      "original_commit_id" : "8d22e03929f1c6fdcf8669fb01246b7099d861f2",
      "original_position" : 17,
      "path" : "test/functional/wallet_labels.py",
      "position" : 17,
      "pull_request_review_id" : 115060967,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13060",
      "updated_at" : "2018-04-25T07:31:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/183962923",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK.",
      "created_at" : "2018-04-29T10:40:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13060#issuecomment-385241932",
      "id" : 385241932,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13060",
      "updated_at" : "2018-04-29T10:40:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/385241932",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   }
]
