[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/13045#discussion_r183207203"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13045"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/183207203"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Nit: \"better better\" should be something else? :-)",
      "commit_id" : "8d3fe87523ffc86f164ae94da10a84ce0ca06412",
      "created_at" : "2018-04-21T11:03:13Z",
      "diff_hunk" : "@@ -2406,10 +2406,11 @@ bool static ProcessMessage(CNode* pfrom, const std::string& strCommand, CDataStr\n         if (pindex->nStatus & BLOCK_HAVE_DATA) // Nothing to do here\n             return true;\n \n-        if (pindex->nChainWork <= chainActive.Tip()->nChainWork || // We know something better\n+        if (pindex->nChainWork <= chainActive.Tip()->nChainWork || // We know same or better better",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13045#discussion_r183207203",
      "id" : 183207203,
      "original_commit_id" : "64025e11d565f16debc928247ee0f5b2f68eae7e",
      "original_position" : 5,
      "path" : "src/net_processing.cpp",
      "position" : null,
      "pull_request_review_id" : 114169961,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13045",
      "updated_at" : "2018-05-22T15:15:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/183207203",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@practicalswift fixed",
      "created_at" : "2018-04-21T12:43:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13045#issuecomment-383292218",
      "id" : 383292218,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13045",
      "updated_at" : "2018-04-21T12:43:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/383292218",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "why not simply request the compact block rather than a full block?",
      "created_at" : "2018-04-21T22:16:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13045#issuecomment-383335960",
      "id" : 383335960,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13045",
      "updated_at" : "2018-04-21T22:16:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/383335960",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1530283?v=4",
         "events_url" : "https://api.github.com/users/rebroad/events{/privacy}",
         "followers_url" : "https://api.github.com/users/rebroad/followers",
         "following_url" : "https://api.github.com/users/rebroad/following{/other_user}",
         "gists_url" : "https://api.github.com/users/rebroad/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/rebroad",
         "id" : 1530283,
         "login" : "rebroad",
         "organizations_url" : "https://api.github.com/users/rebroad/orgs",
         "received_events_url" : "https://api.github.com/users/rebroad/received_events",
         "repos_url" : "https://api.github.com/users/rebroad/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/rebroad/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/rebroad/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/rebroad"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Should mark the block as in flight if it wasn't already and we requested it. Probably should be checking if it's in flight from the same peer too (which would be required if you mark it, and should probably have been done either way).\n\n@promag because the mempool reconstruction will be useless so it'll be worse than a normal request.\n\nOn April 21, 2018 10:16:43 PM UTC, Rebroad <notifications@github.com> wrote:\n>why not simply request the compact block rather than a full block?\n>\n>-- \n>You are receiving this because you are subscribed to this thread.\n>Reply to this email directly or view it on GitHub:\n>https://github.com/bitcoin/bitcoin/pull/13045#issuecomment-383335960\n",
      "created_at" : "2018-04-21T22:55:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13045#issuecomment-383338354",
      "id" : 383338354,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13045",
      "updated_at" : "2018-04-21T22:55:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/383338354",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/649246?v=4",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@TheBlueMatt Added the filter-by-sender and marking block as in flight.",
      "created_at" : "2018-04-23T14:09:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13045#issuecomment-383588477",
      "id" : 383588477,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13045",
      "updated_at" : "2018-04-23T14:09:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/383588477",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/13045#discussion_r183544144"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13045"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/183544144"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit: how about unpacking `blockInFlightIt->second.first` to a local like `inFlightNodeId` or the like? It's used one other place in the file and is relatively inscrutable.",
      "commit_id" : "8d3fe87523ffc86f164ae94da10a84ce0ca06412",
      "created_at" : "2018-04-23T21:31:15Z",
      "diff_hunk" : "@@ -2406,11 +2406,15 @@ bool static ProcessMessage(CNode* pfrom, const std::string& strCommand, CDataStr\n         if (pindex->nStatus & BLOCK_HAVE_DATA) // Nothing to do here\n             return true;\n \n-        if (pindex->nChainWork <= chainActive.Tip()->nChainWork || // We know something better\n+        if (pindex->nChainWork <= chainActive.Tip()->nChainWork || // We know same or better\n                 pindex->nTx != 0) { // We had this block at some point, but pruned it\n-            if (fAlreadyInFlight) {\n-                // We requested this block for some reason, but our mempool will probably be useless\n+            if ((fAlreadyInFlight && blockInFlightIt->second.first == pfrom->GetId())",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13045#discussion_r183544144",
      "id" : 183544144,
      "original_commit_id" : "a61ea427d59432c9d2e163fa4ccda026fb85a57d",
      "original_position" : 9,
      "path" : "src/net_processing.cpp",
      "position" : null,
      "pull_request_review_id" : 114563577,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13045",
      "updated_at" : "2018-05-22T15:15:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/183544144",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/5470?v=4",
         "events_url" : "https://api.github.com/users/Empact/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Empact/followers",
         "following_url" : "https://api.github.com/users/Empact/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Empact/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Empact",
         "id" : 5470,
         "login" : "Empact",
         "organizations_url" : "https://api.github.com/users/Empact/orgs",
         "received_events_url" : "https://api.github.com/users/Empact/received_events",
         "repos_url" : "https://api.github.com/users/Empact/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Empact/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Empact/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Empact"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/13045#discussion_r183732526"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13045"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/183732526"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I cached the \"from same peer\" logic instead since it's used twice.",
      "commit_id" : "8d3fe87523ffc86f164ae94da10a84ce0ca06412",
      "created_at" : "2018-04-24T13:38:31Z",
      "diff_hunk" : "@@ -2406,11 +2406,15 @@ bool static ProcessMessage(CNode* pfrom, const std::string& strCommand, CDataStr\n         if (pindex->nStatus & BLOCK_HAVE_DATA) // Nothing to do here\n             return true;\n \n-        if (pindex->nChainWork <= chainActive.Tip()->nChainWork || // We know something better\n+        if (pindex->nChainWork <= chainActive.Tip()->nChainWork || // We know same or better\n                 pindex->nTx != 0) { // We had this block at some point, but pruned it\n-            if (fAlreadyInFlight) {\n-                // We requested this block for some reason, but our mempool will probably be useless\n+            if ((fAlreadyInFlight && blockInFlightIt->second.first == pfrom->GetId())",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13045#discussion_r183732526",
      "id" : 183732526,
      "in_reply_to_id" : 183544144,
      "original_commit_id" : "a61ea427d59432c9d2e163fa4ccda026fb85a57d",
      "original_position" : 9,
      "path" : "src/net_processing.cpp",
      "position" : null,
      "pull_request_review_id" : 114785420,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13045",
      "updated_at" : "2018-05-22T15:15:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/183732526",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "would it be worth keeping the txs that went into the latest block to hand\nfor this situation so that compact blocks can be used? what if the previous\ncompact block received had only one transaction in it, whereas this\ncompeting block has many transactions? by requesting a full block we would\nbe favouring the empty block when it would be better for the network to\nfavour the full block. therefore I'd still argue it's better to request a\ncompact block so to not give empty blocks an unfair advantage.\n\nOn Sat, 21 Apr 2018, 23:56 Matt Corallo, <notifications@github.com> wrote:\n\n> because the mempool reconstruction will be useless so it'll be worse than\n> a normal request.\n>\n",
      "created_at" : "2018-04-25T14:50:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13045#issuecomment-384315155",
      "id" : 384315155,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13045",
      "updated_at" : "2018-04-25T14:50:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/384315155",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1530283?v=4",
         "events_url" : "https://api.github.com/users/rebroad/events{/privacy}",
         "followers_url" : "https://api.github.com/users/rebroad/followers",
         "following_url" : "https://api.github.com/users/rebroad/following{/other_user}",
         "gists_url" : "https://api.github.com/users/rebroad/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/rebroad",
         "id" : 1530283,
         "login" : "rebroad",
         "organizations_url" : "https://api.github.com/users/rebroad/orgs",
         "received_events_url" : "https://api.github.com/users/rebroad/received_events",
         "repos_url" : "https://api.github.com/users/rebroad/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/rebroad/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/rebroad/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/rebroad"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@rebroad I think this goes a bit off-topic to incentives. As-is it would likely take a lot of work to support it, and I'd have no idea how to do it safely.",
      "created_at" : "2018-04-25T14:54:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13045#issuecomment-384316891",
      "id" : 384316891,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13045",
      "updated_at" : "2018-04-25T14:54:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/384316891",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/13045#discussion_r184387279"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13045"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/184387279"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I think this will actually request the full block that *is* the known chaintip. Probably need to check it isn't in chainActive first. It already is being checked that it connects, so this is all that is likely needed.",
      "commit_id" : "8d3fe87523ffc86f164ae94da10a84ce0ca06412",
      "created_at" : "2018-04-26T13:25:20Z",
      "diff_hunk" : "@@ -2402,15 +2402,20 @@ bool static ProcessMessage(CNode* pfrom, const std::string& strCommand, CDataStr\n \n         std::map<uint256, std::pair<NodeId, std::list<QueuedBlock>::iterator> >::iterator blockInFlightIt = mapBlocksInFlight.find(pindex->GetBlockHash());\n         bool fAlreadyInFlight = blockInFlightIt != mapBlocksInFlight.end();\n+        bool in_flight_from_same_peer = fAlreadyInFlight ? blockInFlightIt->second.first == pfrom->GetId() : false;\n \n         if (pindex->nStatus & BLOCK_HAVE_DATA) // Nothing to do here\n             return true;\n \n-        if (pindex->nChainWork <= chainActive.Tip()->nChainWork || // We know something better\n+        if (pindex->nChainWork <= chainActive.Tip()->nChainWork || // We know same or better\n                 pindex->nTx != 0) { // We had this block at some point, but pruned it\n-            if (fAlreadyInFlight) {\n-                // We requested this block for some reason, but our mempool will probably be useless\n+            if ((fAlreadyInFlight && in_flight_from_same_peer)\n+                    || pindex->nChainWork == chainActive.Tip()->nChainWork) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13045#discussion_r184387279",
      "id" : 184387279,
      "original_commit_id" : "b45a45672c29616782db6231f0e7d727c026fd35",
      "original_position" : 15,
      "path" : "src/net_processing.cpp",
      "position" : null,
      "pull_request_review_id" : 115572444,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13045",
      "updated_at" : "2018-05-22T15:15:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/184387279",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/13045#discussion_r184396953"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13045"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/184396953"
         }
      },
      "author_association" : "MEMBER",
      "body" : "oh, maybe not. two lines or so above we have this check:\r\n```\r\nif (pindex->nStatus & BLOCK_HAVE_DATA) // Nothing to do here\r\n            return true;\r\n```",
      "commit_id" : "8d3fe87523ffc86f164ae94da10a84ce0ca06412",
      "created_at" : "2018-04-26T13:52:37Z",
      "diff_hunk" : "@@ -2402,15 +2402,20 @@ bool static ProcessMessage(CNode* pfrom, const std::string& strCommand, CDataStr\n \n         std::map<uint256, std::pair<NodeId, std::list<QueuedBlock>::iterator> >::iterator blockInFlightIt = mapBlocksInFlight.find(pindex->GetBlockHash());\n         bool fAlreadyInFlight = blockInFlightIt != mapBlocksInFlight.end();\n+        bool in_flight_from_same_peer = fAlreadyInFlight ? blockInFlightIt->second.first == pfrom->GetId() : false;\n \n         if (pindex->nStatus & BLOCK_HAVE_DATA) // Nothing to do here\n             return true;\n \n-        if (pindex->nChainWork <= chainActive.Tip()->nChainWork || // We know something better\n+        if (pindex->nChainWork <= chainActive.Tip()->nChainWork || // We know same or better\n                 pindex->nTx != 0) { // We had this block at some point, but pruned it\n-            if (fAlreadyInFlight) {\n-                // We requested this block for some reason, but our mempool will probably be useless\n+            if ((fAlreadyInFlight && in_flight_from_same_peer)\n+                    || pindex->nChainWork == chainActive.Tip()->nChainWork) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13045#discussion_r184396953",
      "id" : 184396953,
      "in_reply_to_id" : 184387279,
      "original_commit_id" : "b45a45672c29616782db6231f0e7d727c026fd35",
      "original_position" : 15,
      "path" : "src/net_processing.cpp",
      "position" : null,
      "pull_request_review_id" : 115584204,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13045",
      "updated_at" : "2018-05-22T15:15:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/184396953",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/13045#discussion_r184836150"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13045"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/184836150"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I dont think we want to request the block if its already in flight from another peer, even if it has equal work with our tip.",
      "commit_id" : "8d3fe87523ffc86f164ae94da10a84ce0ca06412",
      "created_at" : "2018-04-28T02:06:50Z",
      "diff_hunk" : "@@ -2402,15 +2402,20 @@ bool static ProcessMessage(CNode* pfrom, const std::string& strCommand, CDataStr\n \n         std::map<uint256, std::pair<NodeId, std::list<QueuedBlock>::iterator> >::iterator blockInFlightIt = mapBlocksInFlight.find(pindex->GetBlockHash());\n         bool fAlreadyInFlight = blockInFlightIt != mapBlocksInFlight.end();\n+        bool in_flight_from_same_peer = fAlreadyInFlight ? blockInFlightIt->second.first == pfrom->GetId() : false;\n \n         if (pindex->nStatus & BLOCK_HAVE_DATA) // Nothing to do here\n             return true;\n \n-        if (pindex->nChainWork <= chainActive.Tip()->nChainWork || // We know something better\n+        if (pindex->nChainWork <= chainActive.Tip()->nChainWork || // We know same or better\n                 pindex->nTx != 0) { // We had this block at some point, but pruned it\n-            if (fAlreadyInFlight) {\n-                // We requested this block for some reason, but our mempool will probably be useless\n+            if ((fAlreadyInFlight && in_flight_from_same_peer)\n+                    || pindex->nChainWork == chainActive.Tip()->nChainWork) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13045#discussion_r184836150",
      "id" : 184836150,
      "in_reply_to_id" : 184387279,
      "original_commit_id" : "b45a45672c29616782db6231f0e7d727c026fd35",
      "original_position" : 15,
      "path" : "src/net_processing.cpp",
      "position" : null,
      "pull_request_review_id" : 116117497,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13045",
      "updated_at" : "2018-05-22T15:15:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/184836150",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/649246?v=4",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/13045#discussion_r184836307"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13045"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/184836307"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "This appears to be unused. That said, I think we should consider handling if peer accidentally sends us the block twice, thus queuedBlockIt->partialBlock is set after we call MarkBlockAsInFlight (probably by just wiping the partialBlock).",
      "commit_id" : "8d3fe87523ffc86f164ae94da10a84ce0ca06412",
      "created_at" : "2018-04-28T02:12:23Z",
      "diff_hunk" : "@@ -2402,15 +2402,20 @@ bool static ProcessMessage(CNode* pfrom, const std::string& strCommand, CDataStr\n \n         std::map<uint256, std::pair<NodeId, std::list<QueuedBlock>::iterator> >::iterator blockInFlightIt = mapBlocksInFlight.find(pindex->GetBlockHash());\n         bool fAlreadyInFlight = blockInFlightIt != mapBlocksInFlight.end();\n+        bool in_flight_from_same_peer = fAlreadyInFlight ? blockInFlightIt->second.first == pfrom->GetId() : false;\n \n         if (pindex->nStatus & BLOCK_HAVE_DATA) // Nothing to do here\n             return true;\n \n-        if (pindex->nChainWork <= chainActive.Tip()->nChainWork || // We know something better\n+        if (pindex->nChainWork <= chainActive.Tip()->nChainWork || // We know same or better\n                 pindex->nTx != 0) { // We had this block at some point, but pruned it\n-            if (fAlreadyInFlight) {\n-                // We requested this block for some reason, but our mempool will probably be useless\n+            if ((fAlreadyInFlight && in_flight_from_same_peer)\n+                    || pindex->nChainWork == chainActive.Tip()->nChainWork) {\n+                // We requested this block for some reason from the same peer\n+                // or just want same height block, but our mempool will probably be useless\n                 // so we just grab the block via normal getdata\n+                std::list<QueuedBlock>::iterator* queuedBlockIt = nullptr;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13045#discussion_r184836307",
      "id" : 184836307,
      "original_commit_id" : "b45a45672c29616782db6231f0e7d727c026fd35",
      "original_position" : 19,
      "path" : "src/net_processing.cpp",
      "position" : null,
      "pull_request_review_id" : 116117497,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13045",
      "updated_at" : "2018-05-22T15:15:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/184836307",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/649246?v=4",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/13045#discussion_r184981709"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13045"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/184981709"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Ok, replicated the logic from a few lines below covering the same case.",
      "commit_id" : "8d3fe87523ffc86f164ae94da10a84ce0ca06412",
      "created_at" : "2018-04-30T13:10:27Z",
      "diff_hunk" : "@@ -2402,15 +2402,20 @@ bool static ProcessMessage(CNode* pfrom, const std::string& strCommand, CDataStr\n \n         std::map<uint256, std::pair<NodeId, std::list<QueuedBlock>::iterator> >::iterator blockInFlightIt = mapBlocksInFlight.find(pindex->GetBlockHash());\n         bool fAlreadyInFlight = blockInFlightIt != mapBlocksInFlight.end();\n+        bool in_flight_from_same_peer = fAlreadyInFlight ? blockInFlightIt->second.first == pfrom->GetId() : false;\n \n         if (pindex->nStatus & BLOCK_HAVE_DATA) // Nothing to do here\n             return true;\n \n-        if (pindex->nChainWork <= chainActive.Tip()->nChainWork || // We know something better\n+        if (pindex->nChainWork <= chainActive.Tip()->nChainWork || // We know same or better\n                 pindex->nTx != 0) { // We had this block at some point, but pruned it\n-            if (fAlreadyInFlight) {\n-                // We requested this block for some reason, but our mempool will probably be useless\n+            if ((fAlreadyInFlight && in_flight_from_same_peer)\n+                    || pindex->nChainWork == chainActive.Tip()->nChainWork) {\n+                // We requested this block for some reason from the same peer\n+                // or just want same height block, but our mempool will probably be useless\n                 // so we just grab the block via normal getdata\n+                std::list<QueuedBlock>::iterator* queuedBlockIt = nullptr;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13045#discussion_r184981709",
      "id" : 184981709,
      "in_reply_to_id" : 184836307,
      "original_commit_id" : "b45a45672c29616782db6231f0e7d727c026fd35",
      "original_position" : 19,
      "path" : "src/net_processing.cpp",
      "position" : null,
      "pull_request_review_id" : 116280709,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13045",
      "updated_at" : "2018-05-22T15:15:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/184981709",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Comments addressed",
      "created_at" : "2018-04-30T13:10:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13045#issuecomment-385393537",
      "id" : 385393537,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13045",
      "updated_at" : "2018-04-30T13:10:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/385393537",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/13045#discussion_r188112641"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13045"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/188112641"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "You want to reset to nullptr here, as we're about to fetch via non-compact-blocks.",
      "commit_id" : "8d3fe87523ffc86f164ae94da10a84ce0ca06412",
      "created_at" : "2018-05-14T22:04:00Z",
      "diff_hunk" : "@@ -2402,15 +2402,28 @@ bool static ProcessMessage(CNode* pfrom, const std::string& strCommand, CDataStr\n \n         std::map<uint256, std::pair<NodeId, std::list<QueuedBlock>::iterator> >::iterator blockInFlightIt = mapBlocksInFlight.find(pindex->GetBlockHash());\n         bool fAlreadyInFlight = blockInFlightIt != mapBlocksInFlight.end();\n+        bool in_flight_from_same_peer = fAlreadyInFlight ? blockInFlightIt->second.first == pfrom->GetId() : false;\n \n         if (pindex->nStatus & BLOCK_HAVE_DATA) // Nothing to do here\n             return true;\n \n-        if (pindex->nChainWork <= chainActive.Tip()->nChainWork || // We know something better\n+        if (pindex->nChainWork <= chainActive.Tip()->nChainWork || // We know same or better\n                 pindex->nTx != 0) { // We had this block at some point, but pruned it\n-            if (fAlreadyInFlight) {\n-                // We requested this block for some reason, but our mempool will probably be useless\n+            if ((fAlreadyInFlight && in_flight_from_same_peer)\n+                    || (!fAlreadyInFlight && pindex->nChainWork == chainActive.Tip()->nChainWork)) {\n+                // We requested this block for some reason from the same peer\n+                // or just want same height block, but our mempool will probably be useless\n                 // so we just grab the block via normal getdata\n+                std::list<QueuedBlock>::iterator* queuedBlockIt = nullptr;\n+                if (!MarkBlockAsInFlight(pfrom->GetId(), pindex->GetBlockHash(), pindex, &queuedBlockIt)) {\n+                    if (!(*queuedBlockIt)->partialBlock) {\n+                        (*queuedBlockIt)->partialBlock.reset(new PartiallyDownloadedBlock(&mempool));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13045#discussion_r188112641",
      "id" : 188112641,
      "original_commit_id" : "b4a3207f3f4f0a7dc098b209a6301aaeb14e3bab",
      "original_position" : 22,
      "path" : "src/net_processing.cpp",
      "position" : null,
      "pull_request_review_id" : 120026933,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13045",
      "updated_at" : "2018-05-22T15:15:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/188112641",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/649246?v=4",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/13045#discussion_r188479264"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13045"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/188479264"
         }
      },
      "author_association" : "MEMBER",
      "body" : "done",
      "commit_id" : "8d3fe87523ffc86f164ae94da10a84ce0ca06412",
      "created_at" : "2018-05-16T01:09:46Z",
      "diff_hunk" : "@@ -2402,15 +2402,28 @@ bool static ProcessMessage(CNode* pfrom, const std::string& strCommand, CDataStr\n \n         std::map<uint256, std::pair<NodeId, std::list<QueuedBlock>::iterator> >::iterator blockInFlightIt = mapBlocksInFlight.find(pindex->GetBlockHash());\n         bool fAlreadyInFlight = blockInFlightIt != mapBlocksInFlight.end();\n+        bool in_flight_from_same_peer = fAlreadyInFlight ? blockInFlightIt->second.first == pfrom->GetId() : false;\n \n         if (pindex->nStatus & BLOCK_HAVE_DATA) // Nothing to do here\n             return true;\n \n-        if (pindex->nChainWork <= chainActive.Tip()->nChainWork || // We know something better\n+        if (pindex->nChainWork <= chainActive.Tip()->nChainWork || // We know same or better\n                 pindex->nTx != 0) { // We had this block at some point, but pruned it\n-            if (fAlreadyInFlight) {\n-                // We requested this block for some reason, but our mempool will probably be useless\n+            if ((fAlreadyInFlight && in_flight_from_same_peer)\n+                    || (!fAlreadyInFlight && pindex->nChainWork == chainActive.Tip()->nChainWork)) {\n+                // We requested this block for some reason from the same peer\n+                // or just want same height block, but our mempool will probably be useless\n                 // so we just grab the block via normal getdata\n+                std::list<QueuedBlock>::iterator* queuedBlockIt = nullptr;\n+                if (!MarkBlockAsInFlight(pfrom->GetId(), pindex->GetBlockHash(), pindex, &queuedBlockIt)) {\n+                    if (!(*queuedBlockIt)->partialBlock) {\n+                        (*queuedBlockIt)->partialBlock.reset(new PartiallyDownloadedBlock(&mempool));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13045#discussion_r188479264",
      "id" : 188479264,
      "in_reply_to_id" : 188112641,
      "original_commit_id" : "b4a3207f3f4f0a7dc098b209a6301aaeb14e3bab",
      "original_position" : 22,
      "path" : "src/net_processing.cpp",
      "position" : null,
      "pull_request_review_id" : 120465670,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13045",
      "updated_at" : "2018-05-22T15:15:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/188479264",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/13045#discussion_r188491800"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13045"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/188491800"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "`&&` over `?` here",
      "commit_id" : "8d3fe87523ffc86f164ae94da10a84ce0ca06412",
      "created_at" : "2018-05-16T03:01:54Z",
      "diff_hunk" : "@@ -2402,15 +2402,28 @@ bool static ProcessMessage(CNode* pfrom, const std::string& strCommand, CDataStr\n \n         std::map<uint256, std::pair<NodeId, std::list<QueuedBlock>::iterator> >::iterator blockInFlightIt = mapBlocksInFlight.find(pindex->GetBlockHash());\n         bool fAlreadyInFlight = blockInFlightIt != mapBlocksInFlight.end();\n+        bool in_flight_from_same_peer = fAlreadyInFlight ? blockInFlightIt->second.first == pfrom->GetId() : false;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13045#discussion_r188491800",
      "id" : 188491800,
      "original_commit_id" : "8f8eea2e3d0e1adcc54538c4e86b4901fcd262db",
      "original_position" : 4,
      "path" : "src/net_processing.cpp",
      "position" : null,
      "pull_request_review_id" : 120479951,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13045",
      "updated_at" : "2018-05-22T15:15:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/188491800",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/5470?v=4",
         "events_url" : "https://api.github.com/users/Empact/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Empact/followers",
         "following_url" : "https://api.github.com/users/Empact/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Empact/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Empact",
         "id" : 5470,
         "login" : "Empact",
         "organizations_url" : "https://api.github.com/users/Empact/orgs",
         "received_events_url" : "https://api.github.com/users/Empact/received_events",
         "repos_url" : "https://api.github.com/users/Empact/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Empact/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Empact/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Empact"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/13045#discussion_r188491936"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13045"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/188491936"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Redundant `fAlreadyInFlight` check",
      "commit_id" : "8d3fe87523ffc86f164ae94da10a84ce0ca06412",
      "created_at" : "2018-05-16T03:03:09Z",
      "diff_hunk" : "@@ -2402,15 +2402,28 @@ bool static ProcessMessage(CNode* pfrom, const std::string& strCommand, CDataStr\n \n         std::map<uint256, std::pair<NodeId, std::list<QueuedBlock>::iterator> >::iterator blockInFlightIt = mapBlocksInFlight.find(pindex->GetBlockHash());\n         bool fAlreadyInFlight = blockInFlightIt != mapBlocksInFlight.end();\n+        bool in_flight_from_same_peer = fAlreadyInFlight ? blockInFlightIt->second.first == pfrom->GetId() : false;\n \n         if (pindex->nStatus & BLOCK_HAVE_DATA) // Nothing to do here\n             return true;\n \n-        if (pindex->nChainWork <= chainActive.Tip()->nChainWork || // We know something better\n+        if (pindex->nChainWork <= chainActive.Tip()->nChainWork || // We know same or better\n                 pindex->nTx != 0) { // We had this block at some point, but pruned it\n-            if (fAlreadyInFlight) {\n-                // We requested this block for some reason, but our mempool will probably be useless\n+            if ((fAlreadyInFlight && in_flight_from_same_peer)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13045#discussion_r188491936",
      "id" : 188491936,
      "original_commit_id" : "8f8eea2e3d0e1adcc54538c4e86b4901fcd262db",
      "original_position" : 14,
      "path" : "src/net_processing.cpp",
      "position" : null,
      "pull_request_review_id" : 120480105,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13045",
      "updated_at" : "2018-05-22T15:15:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/188491936",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/5470?v=4",
         "events_url" : "https://api.github.com/users/Empact/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Empact/followers",
         "following_url" : "https://api.github.com/users/Empact/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Empact/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Empact",
         "id" : 5470,
         "login" : "Empact",
         "organizations_url" : "https://api.github.com/users/Empact/orgs",
         "received_events_url" : "https://api.github.com/users/Empact/received_events",
         "repos_url" : "https://api.github.com/users/Empact/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Empact/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Empact/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Empact"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/13045#discussion_r188492042"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13045"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/188492042"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit: snake_case for new vars",
      "commit_id" : "8d3fe87523ffc86f164ae94da10a84ce0ca06412",
      "created_at" : "2018-05-16T03:04:23Z",
      "diff_hunk" : "@@ -2402,15 +2402,28 @@ bool static ProcessMessage(CNode* pfrom, const std::string& strCommand, CDataStr\n \n         std::map<uint256, std::pair<NodeId, std::list<QueuedBlock>::iterator> >::iterator blockInFlightIt = mapBlocksInFlight.find(pindex->GetBlockHash());\n         bool fAlreadyInFlight = blockInFlightIt != mapBlocksInFlight.end();\n+        bool in_flight_from_same_peer = fAlreadyInFlight ? blockInFlightIt->second.first == pfrom->GetId() : false;\n \n         if (pindex->nStatus & BLOCK_HAVE_DATA) // Nothing to do here\n             return true;\n \n-        if (pindex->nChainWork <= chainActive.Tip()->nChainWork || // We know something better\n+        if (pindex->nChainWork <= chainActive.Tip()->nChainWork || // We know same or better\n                 pindex->nTx != 0) { // We had this block at some point, but pruned it\n-            if (fAlreadyInFlight) {\n-                // We requested this block for some reason, but our mempool will probably be useless\n+            if ((fAlreadyInFlight && in_flight_from_same_peer)\n+                    || (!fAlreadyInFlight && pindex->nChainWork == chainActive.Tip()->nChainWork)) {\n+                // We requested this block for some reason from the same peer\n+                // or just want same height block, but our mempool will probably be useless\n                 // so we just grab the block via normal getdata\n+                std::list<QueuedBlock>::iterator* queuedBlockIt = nullptr;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13045#discussion_r188492042",
      "id" : 188492042,
      "original_commit_id" : "8f8eea2e3d0e1adcc54538c4e86b4901fcd262db",
      "original_position" : 19,
      "path" : "src/net_processing.cpp",
      "position" : null,
      "pull_request_review_id" : 120480225,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13045",
      "updated_at" : "2018-05-22T15:15:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/188492042",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/5470?v=4",
         "events_url" : "https://api.github.com/users/Empact/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Empact/followers",
         "following_url" : "https://api.github.com/users/Empact/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Empact/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Empact",
         "id" : 5470,
         "login" : "Empact",
         "organizations_url" : "https://api.github.com/users/Empact/orgs",
         "received_events_url" : "https://api.github.com/users/Empact/received_events",
         "repos_url" : "https://api.github.com/users/Empact/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Empact/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Empact/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Empact"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/13045#discussion_r188492169"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13045"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/188492169"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Redundant `fAlreadyInFlight` check",
      "commit_id" : "8d3fe87523ffc86f164ae94da10a84ce0ca06412",
      "created_at" : "2018-05-16T03:05:49Z",
      "diff_hunk" : "@@ -2432,7 +2445,7 @@ bool static ProcessMessage(CNode* pfrom, const std::string& strCommand, CDataStr\n         // possibilities in compact block processing...\n         if (pindex->nHeight <= chainActive.Height() + 2) {\n             if ((!fAlreadyInFlight && nodestate->nBlocksInFlight < MAX_BLOCKS_IN_TRANSIT_PER_PEER) ||\n-                 (fAlreadyInFlight && blockInFlightIt->second.first == pfrom->GetId())) {\n+                 (fAlreadyInFlight && in_flight_from_same_peer)) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13045#discussion_r188492169",
      "id" : 188492169,
      "original_commit_id" : "8f8eea2e3d0e1adcc54538c4e86b4901fcd262db",
      "original_position" : 37,
      "path" : "src/net_processing.cpp",
      "position" : null,
      "pull_request_review_id" : 120480373,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13045",
      "updated_at" : "2018-05-22T15:15:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/188492169",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/5470?v=4",
         "events_url" : "https://api.github.com/users/Empact/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Empact/followers",
         "following_url" : "https://api.github.com/users/Empact/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Empact/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Empact",
         "id" : 5470,
         "login" : "Empact",
         "organizations_url" : "https://api.github.com/users/Empact/orgs",
         "received_events_url" : "https://api.github.com/users/Empact/received_events",
         "repos_url" : "https://api.github.com/users/Empact/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Empact/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Empact/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Empact"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@Empact comments addressed",
      "created_at" : "2018-05-21T15:37:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13045#issuecomment-390691911",
      "id" : 390691911,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13045",
      "updated_at" : "2018-05-21T15:37:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/390691911",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/13045#discussion_r189671678"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13045"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/189671678"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit: unnecessary parens",
      "commit_id" : "8d3fe87523ffc86f164ae94da10a84ce0ca06412",
      "created_at" : "2018-05-21T18:19:31Z",
      "diff_hunk" : "@@ -2402,15 +2402,28 @@ bool static ProcessMessage(CNode* pfrom, const std::string& strCommand, CDataStr\n \n         std::map<uint256, std::pair<NodeId, std::list<QueuedBlock>::iterator> >::iterator blockInFlightIt = mapBlocksInFlight.find(pindex->GetBlockHash());\n         bool fAlreadyInFlight = blockInFlightIt != mapBlocksInFlight.end();\n+        bool in_flight_from_same_peer = fAlreadyInFlight && blockInFlightIt->second.first == pfrom->GetId();\n \n         if (pindex->nStatus & BLOCK_HAVE_DATA) // Nothing to do here\n             return true;\n \n-        if (pindex->nChainWork <= chainActive.Tip()->nChainWork || // We know something better\n+        if (pindex->nChainWork <= chainActive.Tip()->nChainWork || // We know same or better\n                 pindex->nTx != 0) { // We had this block at some point, but pruned it\n-            if (fAlreadyInFlight) {\n-                // We requested this block for some reason, but our mempool will probably be useless\n+            if ((in_flight_from_same_peer)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13045#discussion_r189671678",
      "id" : 189671678,
      "original_commit_id" : "9fc77a9d8f001d7c43790109a1c4e95395d269b7",
      "original_position" : 14,
      "path" : "src/net_processing.cpp",
      "position" : null,
      "pull_request_review_id" : 121896519,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13045",
      "updated_at" : "2018-05-22T15:15:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/189671678",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/5470?v=4",
         "events_url" : "https://api.github.com/users/Empact/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Empact/followers",
         "following_url" : "https://api.github.com/users/Empact/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Empact/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Empact",
         "id" : 5470,
         "login" : "Empact",
         "organizations_url" : "https://api.github.com/users/Empact/orgs",
         "received_events_url" : "https://api.github.com/users/Empact/received_events",
         "repos_url" : "https://api.github.com/users/Empact/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Empact/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Empact/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Empact"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/13045#discussion_r189961477"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13045"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/189961477"
         }
      },
      "author_association" : "MEMBER",
      "body" : "done",
      "commit_id" : "8d3fe87523ffc86f164ae94da10a84ce0ca06412",
      "created_at" : "2018-05-22T16:07:37Z",
      "diff_hunk" : "@@ -2402,15 +2402,28 @@ bool static ProcessMessage(CNode* pfrom, const std::string& strCommand, CDataStr\n \n         std::map<uint256, std::pair<NodeId, std::list<QueuedBlock>::iterator> >::iterator blockInFlightIt = mapBlocksInFlight.find(pindex->GetBlockHash());\n         bool fAlreadyInFlight = blockInFlightIt != mapBlocksInFlight.end();\n+        bool in_flight_from_same_peer = fAlreadyInFlight && blockInFlightIt->second.first == pfrom->GetId();\n \n         if (pindex->nStatus & BLOCK_HAVE_DATA) // Nothing to do here\n             return true;\n \n-        if (pindex->nChainWork <= chainActive.Tip()->nChainWork || // We know something better\n+        if (pindex->nChainWork <= chainActive.Tip()->nChainWork || // We know same or better\n                 pindex->nTx != 0) { // We had this block at some point, but pruned it\n-            if (fAlreadyInFlight) {\n-                // We requested this block for some reason, but our mempool will probably be useless\n+            if ((in_flight_from_same_peer)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13045#discussion_r189961477",
      "id" : 189961477,
      "in_reply_to_id" : 189671678,
      "original_commit_id" : "9fc77a9d8f001d7c43790109a1c4e95395d269b7",
      "original_position" : 14,
      "path" : "src/net_processing.cpp",
      "position" : null,
      "pull_request_review_id" : 122242262,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13045",
      "updated_at" : "2018-05-22T16:07:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/189961477",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--5d09a71f8925f3f132321140b44b946d-->The last travis run for this pull request was 61 days ago and is thus outdated. To trigger a fresh travis build, this pull request should be closed and re-opened.",
      "created_at" : "2018-07-22T23:50:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13045#issuecomment-406906724",
      "id" : 406906724,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13045",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQwNjkwNjcyNA==",
      "updated_at" : "2018-07-22T23:50:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/406906724",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nNo conflicts as of last run.",
      "created_at" : "2019-03-15T17:52:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13045#issuecomment-473383985",
      "id" : 473383985,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13045",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ3MzM4Mzk4NQ==",
      "updated_at" : "2019-04-01T18:06:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/473383985",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   }
]
