{
   "assignee" : null,
   "body" : "bitcoin-qt crashes right after startup somewhere in db.\r\n\r\nBacktrace:\r\n<pre>\r\nProgram received signal SIGSEGV, Segmentation fault.\r\n0x00007ffff7384a56 in __txn_begin (env=0x8ce3a0, ip=<optimized out>, parent=0xa89ad0, txnpp=0x7fffffffbaf0, flags=<optimized out>) at /var/tmp/portage/sys-libs/db-4.8.30/work/db-4.8.30/build_unix/../dist/../txn/txn.c:220\r\n\tin /var/tmp/portage/sys-libs/db-4.8.30/work/db-4.8.30/build_unix/../dist/../txn/txn.c\r\n\r\n#0  0x00007ffff7384a56 in __txn_begin (env=0x8ce3a0, ip=<optimized out>, parent=0xa89ad0, txnpp=0x7fffffffbaf0, flags=<optimized out>) at /var/tmp/portage/sys-libs/db-4.8.30/work/db-4.8.30/build_unix/../dist/../txn/txn.c:220\r\n        dbenv = <optimized out>\r\n        region = <optimized out>\r\n        txn = 0xaa4500\r\n        ptd = 0x7fffe9b49220\r\n        td = 0x7fffe9b49380\r\n        ret = 0\r\n#1  0x00007ffff735b678 in __fop_file_setup (dbp=0x945c50, ip=0x0, txn=0xa89ad0, name=0x5a441e \"addr.dat\", mode=432, flags=8209, retidp=0x7fffffffbbe0) at /var/tmp/portage/sys-libs/db-4.8.30/work/db-4.8.30/build_unix/../dist/../fileops/fop_util.c:523\r\n        save_type = <optimized out>\r\n        fhp = 0x0\r\n        elock = {off = 0, ndx = 9789, gen = 0, mode = DB_LOCK_WRITE}\r\n        locker = 0x7fffe9ffd040\r\n        stxn = 0x0\r\n        env = 0x8ce3a0\r\n        len = 4294967296\r\n        dflags = 0\r\n        oflags = 0\r\n        mbuf = \"\\356\\001\\377\\023\\000\\000\\000\\000.S\\336\\367\\377\\177\\000\\000.bitcoinLK\\336\\367\\377\\177\\000\\000`\\272\\377\\377\\377\\177\\000\\000\\004\\000\\000\\000\\000\\000\\000\\000)\\000\\000\\000\\000\\000\\000\\000\\240\\306\\372\\367\\377\\177\\000\\000W\\343f\\036\\000\\000\\000\\000.S\\336\\367\\377\\177\\000\\000\\340\\342#\\367\\377\\177\\000\\000\\027\\000\\000\\000\\377\\177\\000\\000\\240\\272\\377\\377\\377\\177\\000\\000\\215\\233y\\000\\000\\000\\000\\000@\\241#\\367\\377\\177\\000\\000\\200\\251#\\367\\377\\177\\000\\000(v$\\367\\377\\177\\000\\000\\340\\342#\\367\\377\\177\\000\\000\\300D$\\367\\377\\177\\000\\000d\\002\\000\\000\\001\", '\\000' <repeats 11 times>, \" \\314\\372\\367\\377\\177\\000\\000\\270\\231\\373\\367\\377\\177\\000\\000\\343\\b%\\367\\377\\177\\000\\000(v$\\367\\377\\177\\000\\000\\300D$\\367\\377\\177\\000\\000\\000\\000\\000\\000\\001\\000\\000\\000x\\006\\000\\000\\001\", '\\000' <repeats 11 times>, \"\\020\\235\\373\\367\\377\\177\\000\\000\\340\\272\\377\\377\\377\\177\\000\\000 \\314\\372\\367\\377\\177\\000\\000\\b\\273\\377\\377\\377\\177\\000\\000W\\343f\\036\\000\\000\\000\\000\\270\\231\\373\\367\\377\\177\\000\\000\\064V\\336\\367\\377\\177\\000\\000\\000\\000\\000\\000\\000\\000\\000\\000\"...\r\n        created_locker = 1\r\n        create_ok = 1\r\n        ret = <optimized out>\r\n        retries = <optimized out>\r\n        t_ret = <optimized out>\r\n        tmp_created = 0\r\n        was_inval = 0\r\n        real_name = 0xa86770 \"/home/USER/.bitcoin/addr.dat\"\r\n        real_tmpname = 0x0\r\n        tmpname = 0xaa7b20 \"__db.80000001.ce781d07\"\r\n#2  0x00007ffff7332a33 in __db_open (dbp=0x945c50, ip=0x0, txn=0xa89ad0, fname=0x5a441e \"addr.dat\", dname=0x0, type=DB_BTREE, flags=8209, mode=0, meta_pgno=0) at /var/tmp/portage/sys-libs/db-4.8.30/work/db-4.8.30/build_unix/../dist/../db/db_open.c:177\r\n        tdbp = 0x7ffff7332404\r\n        env = 0x8ce3a0\r\n        ret = <optimized out>\r\n        id = 0\r\n#3  0x00007ffff7313941 in __db_master_open (subdbp=0x9456f0, ip=0x0, txn=0xa89ad0, name=0x5a441e \"addr.dat\", flags=8209, mode=0, dbpp=0x7fffffffbce0) at /var/tmp/portage/sys-libs/db-4.8.30/work/db-4.8.30/build_unix/../dist/../db/db.c:114\r\n        dbp = 0x945c50\r\n        ret = <optimized out>\r\n#4  0x00007ffff735a979 in __fop_subdb_setup (dbp=0x9456f0, ip=0x0, txn=0xa89ad0, mname=<optimized out>, name=0x5a4404 \"main\", mode=<optimized out>, flags=17) at /var/tmp/portage/sys-libs/db-4.8.30/work/db-4.8.30/build_unix/../dist/../fileops/fop_util.c:740\r\n        mdbp = 0x0\r\n        env = 0x8ce3a0\r\n        lkmode = <optimized out>\r\n        ret = <optimized out>\r\n        t_ret = <optimized out>\r\n#5  0x00007ffff7332cd4 in __db_open (dbp=0x9456f0, ip=0x0, txn=0xa89ad0, fname=0x5a441e \"addr.dat\", dname=0x5a4404 \"main\", type=DB_BTREE, flags=17, mode=0, meta_pgno=0) at /var/tmp/portage/sys-libs/db-4.8.30/work/db-4.8.30/build_unix/../dist/../db/db_open.c:186\r\n        tdbp = 0x7ffff7df03b5\r\n        env = 0x8ce3a0\r\n        ret = <optimized out>\r\n        id = 0\r\n#6  0x00007ffff732d1d6 in __db_open_pp (dbp=0x9456f0, txn=0xa89ad0, fname=0x5a441e \"addr.dat\", dname=0x5a4404 \"main\", type=DB_BTREE, flags=17, mode=0) at /var/tmp/portage/sys-libs/db-4.8.30/work/db-4.8.30/build_unix/../dist/../db/db_iface.c:1147\r\n        ip = 0x0\r\n        env = 0x8ce3a0\r\n        handle_check = <optimized out>\r\n        nosync = 1\r\n        remove_me = 0\r\n        ret = <optimized out>\r\n        t_ret = <optimized out>\r\n        txn_local = 1\r\n#7  0x00007ffff7269939 in Db::open (this=0xa83380, txnid=0x0, file=0x5a441e \"addr.dat\", database=0x5a4404 \"main\", type=<optimized out>, flags=<optimized out>, mode=0) at /var/tmp/portage/sys-libs/db-4.8.30/work/db-4.8.30/build_unix/../dist/../cxx/cxx_db.cpp:320\r\n        ret = 11158784\r\n        db = 0x9456f0\r\n#8  0x000000000049e457 in CDB::CDB (this=0x7fffffffc0e0, pszFile=0x5a441e \"addr.dat\", pszMode=<optimized out>) at src/db.cpp:118\r\n        criticalblock = {pcs = 0x8c93e0}\r\n        fcriticalblockonce = true\r\n        ret = <optimized out>\r\n        fCreate = true\r\n        nFlags = 17\r\n#9  0x000000000049ec37 in CAddrDB (pszMode=0x5a966a \"cr+\", this=0x7fffffffc0e0) at src/db.h:303\r\nNo locals.\r\n#10 LoadAddresses () at src/db.cpp:668\r\nNo locals.\r\n#11 0x000000000048a370 in AppInit2 (argc=<optimized out>, argv=0x7fffffffd5c8) at src/init.cpp:342\r\n        strLockFile = \"/home/USER/.bitcoin/.lock\"\r\n        strErrors = \"\"\r\n        nLoadWalletRet = <optimized out>\r\n        sa = {__sigaction_handler = {sa_handler = 0x4880e0 <HandleSIGTERM(int)>, sa_sigaction = 0x4880e0 <HandleSIGTERM(int)>}, sa_mask = {__val = {0 <repeats 16 times>}}, sa_flags = 0, sa_restorer = 0}\r\n        fTOR = <optimized out>\r\n        file = <optimized out>\r\n        lock = {m_file_hnd = 15}\r\n        nStart = 1322778161430\r\n        fFirstRun = 127\r\n        pindexRescan = <optimized out>\r\n#12 0x0000000000427184 in main (argc=1, argv=0x7fffffffd5c8) at src/qt/bitcoin.cpp:158\r\n        app = <incomplete type>\r\n        lang = {static null = {<No data fields>}, static shared_null = {ref = {_q_value = 440}, alloc = 0, size = 0, data = 0x8c76fa, clean = 0, simpletext = 0, righttoleft = 0, asciiCache = 0, capacity = 0, reserved = 0, array = {0}}, static shared_empty = {ref = {_q_value = 7}, alloc = 0, size = 0, data = 0x7ffff5ab58ba, clean = 0, simpletext = 0, righttoleft = 0, asciiCache = 0, capacity = 0, reserved = 0, array = {0}}, d = 0x98ba70, static codecForCStrings = 0x8eadc0}\r\n        qtTranslatorBase = <incomplete type>\r\n        translator = <incomplete type>\r\n        lang_territory = {static null = {<No data fields>}, static shared_null = {ref = {_q_value = 440}, alloc = 0, size = 0, data = 0x8c76fa, clean = 0, simpletext = 0, righttoleft = 0, asciiCache = 0, capacity = 0, reserved = 0, array = {0}}, static shared_empty = {ref = {_q_value = 7}, alloc = 0, size = 0, data = 0x7ffff5ab58ba, clean = 0, simpletext = 0, righttoleft = 0, asciiCache = 0, capacity = 0, reserved = 0, array = {0}}, d = 0x9b5800, static codecForCStrings = 0x8eadc0}\r\n        qtTranslator = <incomplete type>\r\n        translatorBase = <incomplete type>\r\n        splash = <incomplete type>\r\n</pre>\r\n\r\nemerge --info:\r\n<pre>\r\nPortage 2.2.0_alpha79 (default/linux/amd64/10.0/desktop/kde, gcc-4.6.2, glibc-2.14.1-r0, 3.1.1-gentoo x86_64)\r\n=================================================================\r\nSystem uname: Linux-3.1.1-gentoo-x86_64-AMD_Athlon-tm-_64_X2_Dual_Core_Processor_5000+-with-gentoo-2.1\r\nTimestamp of tree: Thu, 01 Dec 2011 21:45:01 +0000\r\ndistcc 3.2rc1 x86_64-pc-linux-gnu [disabled]\r\napp-shells/bash:          4.2_p20\r\ndev-java/java-config:     2.1.11-r3\r\ndev-lang/python:          2.7.2-r3, 3.2.2\r\ndev-util/cmake:           2.8.6-r4\r\ndev-util/pkgconfig:       0.26\r\nsys-apps/baselayout:      2.1\r\nsys-apps/openrc:          0.9.4\r\nsys-apps/sandbox:         2.5\r\nsys-devel/autoconf:       2.13, 2.68\r\nsys-devel/automake:       1.9.6-r3, 1.10.3, 1.11.1-r1\r\nsys-devel/binutils:       2.22\r\nsys-devel/gcc:            4.6.2\r\nsys-devel/gcc-config:     1.5-r2\r\nsys-devel/libtool:        2.4.2\r\nsys-devel/make:           3.82-r3\r\nsys-kernel/linux-headers: 2.6.39 (virtual/os-headers)\r\nsys-libs/glibc:           2.14.1\r\nRepositories: gentoo kde sunrise bitcoin local\r\nInstalled sets: @kdebase\r\nACCEPT_KEYWORDS=\"amd64 ~amd64\"\r\nACCEPT_LICENSE=\"* -@EULA\"\r\nCBUILD=\"x86_64-pc-linux-gnu\"\r\nCFLAGS=\"-pipe -O2 -march=athlon64-sse3 -ftree-vectorize\"\r\nCHOST=\"x86_64-pc-linux-gnu\"\r\nCONFIG_PROTECT=\"/etc /usr/share/config /usr/share/gnupg/qualified.txt /usr/share/themes/oxygen-gtk/gtk-2.0 /var/lib/neatx/home\"\r\nCONFIG_PROTECT_MASK=\"/etc/ca-certificates.conf /etc/env.d /etc/env.d/java/ /etc/fonts/fonts.conf /etc/gconf /etc/gentoo-release /etc/php/apache2-php5.4/ext-active/ /etc/php/cgi-php5.4/ext-active/ /etc/php/cli-php5.4/ext-active/ /etc/revdep-rebuild /etc/sandbox.d /etc/terminfo /etc/texmf/language.dat.d /etc/texmf/language.def.d /etc/texmf/updmap.d /etc/texmf/web2c\"\r\nCXXFLAGS=\"-pipe -O2 -march=athlon64-sse3 -ftree-vectorize\"\r\nDISTDIR=\"/var/cache/portage/distfiles\"\r\nEMERGE_DEFAULT_OPTS=\"--depclean-lib-check n --with-bdeps y --keep-going\"\r\nFEATURES=\"assume-digests binpkg-logs distlocks ebuild-locks fixlafiles news parallel-fetch preserve-libs protect-owned sandbox sfperms strict unknown-features-warn unmerge-logs unmerge-orphans userfetch userpriv usersandbox usersync\"\r\nFFLAGS=\"\"\r\nGENTOO_MIRRORS=\"ftp://linux.rz.ruhr-uni-bochum.de/gentoo-mirror/ ftp://linux.rz.ruhr-uni-bochum.de/gentoo-mirror/ http://distfiles.gentoo.org\"\r\nLANG=\"en_GB.UTF-8\"\r\nLDFLAGS=\"-Wl,-O1 -Wl,--as-needed -Wl,--hash-style=gnu -Wl,--hash-style=gnu\"\r\nLINGUAS=\"de\"\r\nMAKEOPTS=\"-j3\"\r\nPKGDIR=\"/var/cache/portage/packages\"\r\nPORTAGE_COMPRESS=\"xz\"\r\nPORTAGE_CONFIGROOT=\"/\"\r\nPORTAGE_RSYNC_OPTS=\"--recursive --links --safe-links --perms --times --compress --force --whole-file --delete --stats --timeout=180 --exclude=/distfiles --exclude=/local --exclude=/packages\"\r\nPORTAGE_TMPDIR=\"/var/tmp\"\r\nPORTDIR=\"/var/cache/portage/gentoo\"\r\nPORTDIR_OVERLAY=\"/var/cache/portage/layman/kde /var/cache/portage/layman/sunrise /var/cache/portage/layman/bitcoin /var/cache/portage/local\"\r\nUnset:  CPPFLAGS, CTARGET, INSTALL_MASK, LC_ALL, PORTAGE_BUNZIP2_COMMAND, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS\r\n</pre>",
   "closed_at" : "2011-12-01T23:56:10Z",
   "closed_by" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/63082?v=3",
      "events_url" : "https://api.github.com/users/devurandom/events{/privacy}",
      "followers_url" : "https://api.github.com/users/devurandom/followers",
      "following_url" : "https://api.github.com/users/devurandom/following{/other_user}",
      "gists_url" : "https://api.github.com/users/devurandom/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/devurandom",
      "id" : 63082,
      "login" : "devurandom",
      "organizations_url" : "https://api.github.com/users/devurandom/orgs",
      "received_events_url" : "https://api.github.com/users/devurandom/received_events",
      "repos_url" : "https://api.github.com/users/devurandom/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/devurandom/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/devurandom/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/devurandom"
   },
   "comments" : 4,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/672/comments",
   "created_at" : "2011-12-01T22:42:02Z",
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/672/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/issues/672",
   "id" : 2421426,
   "labels" : [],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/672/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "number" : 672,
   "state" : "closed",
   "title" : "bitcoin-qt crashes in db on startup",
   "updated_at" : "2011-12-02T06:51:03Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/672",
   "user" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/63082?v=3",
      "events_url" : "https://api.github.com/users/devurandom/events{/privacy}",
      "followers_url" : "https://api.github.com/users/devurandom/followers",
      "following_url" : "https://api.github.com/users/devurandom/following{/other_user}",
      "gists_url" : "https://api.github.com/users/devurandom/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/devurandom",
      "id" : 63082,
      "login" : "devurandom",
      "organizations_url" : "https://api.github.com/users/devurandom/orgs",
      "received_events_url" : "https://api.github.com/users/devurandom/received_events",
      "repos_url" : "https://api.github.com/users/devurandom/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/devurandom/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/devurandom/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/devurandom"
   }
}
