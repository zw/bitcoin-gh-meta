[
   {
      "author_association" : "MEMBER",
      "body" : "It's 3 weeks old, closing, will re-open if see a new one. I think I recall seeing this more recently, though.",
      "created_at" : "2022-05-18T05:54:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/25164#issuecomment-1129597933",
      "id" : 1129597933,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25164",
      "node_id" : "IC_kwDOABII585DVEvt",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1129597933/reactions"
      },
      "updated_at" : "2022-05-18T05:54:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1129597933",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "https://cirrus-ci.com/task/4746240760479744?logs=ci#L2770\r\n\r\n```\r\n node0 2023-06-30T14:46:07.294496Z [httpworker.1] [rpc/request.cpp:181] [parse] [rpc] ThreadRPCServer method=testmempoolaccept user=__cookie__ \r\n test  2023-06-30T14:46:07.295000Z TestFramework (ERROR): Assertion failed \r\n                                   Traceback (most recent call last):\r\n                                     File \"/tmp/cirrus-ci-build/ci/scratch/build/bitcoin-i686-pc-linux-gnu/test/functional/test_framework/test_framework.py\", line 131, in main\r\n                                       self.run_test()\r\n                                     File \"/tmp/cirrus-ci-build/ci/scratch/build/bitcoin-i686-pc-linux-gnu/test/functional/wallet_send.py\", line 580, in run_test\r\n                                       assert_fee_amount(testres[\"fees\"][\"base\"], testres[\"vsize\"], Decimal(0.0001))\r\n                                     File \"/tmp/cirrus-ci-build/ci/scratch/build/bitcoin-i686-pc-linux-gnu/test/functional/test_framework/util.py\", line 52, in assert_fee_amount\r\n                                       raise AssertionError(\"Fee of %s BTC too high! (Should be %s BTC)\" % (str(fee), str(target_fee)))\r\n                                   AssertionError: Fee of 0.00002520 BTC too high! (Should be 0.0000249 BTC)",
      "created_at" : "2023-07-06T10:18:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/25164#issuecomment-1623414316",
      "id" : 1623414316,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25164",
      "node_id" : "IC_kwDOABII585gw1Ys",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1623414316/reactions"
      },
      "updated_at" : "2023-07-06T10:18:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1623414316",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/maflcko/events{/privacy}",
         "followers_url" : "https://api.github.com/users/maflcko/followers",
         "following_url" : "https://api.github.com/users/maflcko/following{/other_user}",
         "gists_url" : "https://api.github.com/users/maflcko/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/maflcko",
         "id" : 6399679,
         "login" : "maflcko",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/maflcko/orgs",
         "received_events_url" : "https://api.github.com/users/maflcko/received_events",
         "repos_url" : "https://api.github.com/users/maflcko/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/maflcko/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/maflcko/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/maflcko"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Seen in `wallet_send.py --legacy-wallet`\r\n\r\nhttps://cirrus-ci.com/task/6115877712560128?logs=ci#L3429\r\n\r\n```\r\n node0 2023-08-01T23:17:59.093565Z [httpworker.1] [rpc/request.cpp:181] [parse] [rpc] ThreadRPCServer method=testmempoolaccept user=__cookie__ \r\n test  2023-08-01T23:17:59.094000Z TestFramework (ERROR): Assertion failed \r\n                                   Traceback (most recent call last):\r\n                                     File \"/tmp/cirrus-ci-build/ci/scratch/build/bitcoin-x86_64-pc-linux-gnu/test/functional/test_framework/test_framework.py\", line 131, in main\r\n                                       self.run_test()\r\n                                     File \"/tmp/cirrus-ci-build/ci/scratch/build/bitcoin-x86_64-pc-linux-gnu/test/functional/wallet_send.py\", line 580, in run_test\r\n                                       assert_fee_amount(testres[\"fees\"][\"base\"], testres[\"vsize\"], Decimal(0.0001))\r\n                                     File \"/tmp/cirrus-ci-build/ci/scratch/build/bitcoin-x86_64-pc-linux-gnu/test/functional/test_framework/util.py\", line 52, in assert_fee_amount\r\n                                       raise AssertionError(\"Fee of %s BTC too high! (Should be %s BTC)\" % (str(fee), str(target_fee)))\r\n                                   AssertionError: Fee of 0.00002520 BTC too high! (Should be 0.0000249 BTC)\r\n```\r\n",
      "created_at" : "2023-08-01T23:39:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/25164#issuecomment-1661246977",
      "id" : 1661246977,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25164",
      "node_id" : "IC_kwDOABII585jBJ4B",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1661246977/reactions"
      },
      "updated_at" : "2023-08-01T23:39:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1661246977",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "It still happens:\r\nhttps://cirrus-ci.com/task/6418676576944128\r\n\r\n```\r\n node0 2023-11-29T05:48:26.130808Z [httpworker.3] [txmempool.cpp:678] [check] [mempool] Checking mempool with 0 transactions and 0 inputs \r\n test  2023-11-29T05:48:26.131000Z TestFramework (ERROR): Assertion failed \r\n                                   Traceback (most recent call last):\r\n                                     File \"/ci_container_base/ci/scratch/build/bitcoin-x86_64-pc-linux-gnu/test/functional/test_framework/test_framework.py\", line 131, in main\r\n                                       self.run_test()\r\n                                     File \"/ci_container_base/ci/scratch/build/bitcoin-x86_64-pc-linux-gnu/test/functional/wallet_send.py\", line 577, in run_test\r\n                                       assert_fee_amount(testres[\"fees\"][\"base\"], testres[\"vsize\"], Decimal(0.0001))\r\n                                     File \"/ci_container_base/ci/scratch/build/bitcoin-x86_64-pc-linux-gnu/test/functional/test_framework/util.py\", line 52, in assert_fee_amount\r\n                                       raise AssertionError(\"Fee of %s BTC too high! (Should be %s BTC)\" % (str(fee), str(target_fee)))\r\n                                   AssertionError: Fee of 0.00002520 BTC too high! (Should be 0.0000249 BTC)\r\n```",
      "created_at" : "2023-12-01T20:14:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/25164#issuecomment-1836719951",
      "id" : 1836719951,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25164",
      "node_id" : "IC_kwDOABII585teh9P",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1836719951/reactions"
      },
      "updated_at" : "2023-12-01T20:14:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1836719951",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48763452?v=4",
         "events_url" : "https://api.github.com/users/mzumsande/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mzumsande/followers",
         "following_url" : "https://api.github.com/users/mzumsande/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mzumsande/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mzumsande",
         "id" : 48763452,
         "login" : "mzumsande",
         "node_id" : "MDQ6VXNlcjQ4NzYzNDUy",
         "organizations_url" : "https://api.github.com/users/mzumsande/orgs",
         "received_events_url" : "https://api.github.com/users/mzumsande/received_events",
         "repos_url" : "https://api.github.com/users/mzumsande/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mzumsande/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mzumsande"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "happened here too: https://cirrus-ci.com/task/4577902440742912?logs=ci#L2654",
      "created_at" : "2024-01-22T04:35:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/25164#issuecomment-1903232885",
      "id" : 1903232885,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25164",
      "node_id" : "IC_kwDOABII585xcQd1",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1903232885/reactions"
      },
      "updated_at" : "2024-01-22T04:35:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1903232885",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/44024636?v=4",
         "events_url" : "https://api.github.com/users/stratospher/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stratospher/followers",
         "following_url" : "https://api.github.com/users/stratospher/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stratospher/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stratospher",
         "id" : 44024636,
         "login" : "stratospher",
         "node_id" : "MDQ6VXNlcjQ0MDI0NjM2",
         "organizations_url" : "https://api.github.com/users/stratospher/orgs",
         "received_events_url" : "https://api.github.com/users/stratospher/received_events",
         "repos_url" : "https://api.github.com/users/stratospher/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stratospher/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stratospher/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stratospher"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Seen this on my local windows machine:\r\n\r\n```shell\r\n2024-02-21T21:14:35.394000Z TestFramework.node0 (DEBUG): TestNode.generate() dispatches `generate` call to `generatetoaddress`\r\n2024-02-21T21:14:36.537000Z TestFramework (ERROR): Assertion failed\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\Max\\source\\bitcoin\\test\\functional\\test_framework\\test_framework.py\", line 131, in main\r\n    self.run_test()\r\n  File \"C:\\Users\\Max\\source\\bitcoin/test/functional/wallet_send.py\", line 577, in run_test\r\n    assert_fee_amount(testres[\"fees\"][\"base\"], testres[\"vsize\"], Decimal(0.0001))\r\n  File \"C:\\Users\\Max\\source\\bitcoin\\test\\functional\\test_framework\\util.py\", line 52, in assert_fee_amount\r\n    raise AssertionError(\"Fee of %s BTC too high! (Should be %s BTC)\" % (str(fee), str(target_fee)))\r\nAssertionError: Fee of 0.00002520 BTC too high! (Should be 0.0000249 BTC)\r\n2024-02-21T21:14:36.546000Z TestFramework (DEBUG): Closing down network thread\r\n```\r\nCurrently running the functional tests in a loop and this happened once in 57 runs (so far).\r\n",
      "created_at" : "2024-02-22T10:55:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/25164#issuecomment-1959193449",
      "id" : 1959193449,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25164",
      "node_id" : "IC_kwDOABII5850xutp",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1959193449/reactions"
      },
      "updated_at" : "2024-02-22T10:55:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1959193449",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1204616?v=4",
         "events_url" : "https://api.github.com/users/m3dwards/events{/privacy}",
         "followers_url" : "https://api.github.com/users/m3dwards/followers",
         "following_url" : "https://api.github.com/users/m3dwards/following{/other_user}",
         "gists_url" : "https://api.github.com/users/m3dwards/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/m3dwards",
         "id" : 1204616,
         "login" : "m3dwards",
         "node_id" : "MDQ6VXNlcjEyMDQ2MTY=",
         "organizations_url" : "https://api.github.com/users/m3dwards/orgs",
         "received_events_url" : "https://api.github.com/users/m3dwards/received_events",
         "repos_url" : "https://api.github.com/users/m3dwards/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/m3dwards/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/m3dwards/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/m3dwards"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@m3dwards Can you run the test with `--tracerpc` to get more relevant values?",
      "created_at" : "2024-02-22T11:22:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/25164#issuecomment-1959245635",
      "id" : 1959245635,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25164",
      "node_id" : "IC_kwDOABII5850x7dD",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1959245635/reactions"
      },
      "updated_at" : "2024-02-22T11:22:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1959245635",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/maflcko/events{/privacy}",
         "followers_url" : "https://api.github.com/users/maflcko/followers",
         "following_url" : "https://api.github.com/users/maflcko/following{/other_user}",
         "gists_url" : "https://api.github.com/users/maflcko/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/maflcko",
         "id" : 6399679,
         "login" : "maflcko",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/maflcko/orgs",
         "received_events_url" : "https://api.github.com/users/maflcko/received_events",
         "repos_url" : "https://api.github.com/users/maflcko/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/maflcko/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/maflcko/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/maflcko"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "tracrpc:\r\n\r\n```\r\n-947-> testmempoolaccept [[\"020000000001025e84395d59a4af7b4f474089f038b218cffc3d897789106c1ab44e49294534400100000023220020c5f1c024f0f356de16a3d92568ed6018953e679557888a497a17d09c4af07b7efdffffff0d1ca8982f324c1a0ed4fd00b6c6f10606499c9a8b2f8063dbba620858962bcd0000000000fdffffff02285bcd1d000000001600140b85e98d35cc0ad560471e7f40dc3ae36af4944f002f685900000000160014d1ba99364539d6100b8298ea0f6ee85758758c4603463043021f6bb7da3ea2a872f1f2262ff7ac2e6053514ed09f05ee11e29d2093ccaf81d202200da4d86dfc7fb061f1ca07a2785cac597734f38d23fe1c3c9206d7a7a43c6650012103f4ae50fc994a2ac8d51106b756c4257ff0116afa3a36a67d42df549dc4ecb52e1976a9141ca5b97909bf44347c9cd041639ba93de5601a9d88ac02463043021f427eecb117e9de506282507ef35ae6be968e5914dbf501a9014d9a31c62772022037f565d04ea8ff7f15f150329bf42ba789e7b8f872ee3b31b79d78b500f0ddb2012102fedc3d1130f01b5bd8731d2aa1dba526bca499157135c863e9c45d4d227e786600000000\"]]\r\n<-947- [0.000885] [{\"txid\": \"2d57da659baff0592246fa64f6064a42026ba38b050434c8ca79620d847954ab\", \"wtxid\": \"0966f9996761e8bb4a635b1495ca9c0c9b883e1153a53573b14f188ed5bb4884\", \"allowed\": true, \"vsize\": 249, \"fees\": {\"base\": \"0.00002520\", \"effective-feerate\": \"0.00010120\", \"effective-includes\": [\"0966f9996761e8bb4a635b1495ca9c0c9b883e1153a53573b14f188ed5bb4884\"]}}]\r\n",
      "created_at" : "2024-02-23T09:50:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/25164#issuecomment-1961021000",
      "id" : 1961021000,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25164",
      "node_id" : "IC_kwDOABII58504s5I",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1961021000/reactions"
      },
      "updated_at" : "2024-02-23T09:50:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1961021000",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/maflcko/events{/privacy}",
         "followers_url" : "https://api.github.com/users/maflcko/followers",
         "following_url" : "https://api.github.com/users/maflcko/following{/other_user}",
         "gists_url" : "https://api.github.com/users/maflcko/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/maflcko",
         "id" : 6399679,
         "login" : "maflcko",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/maflcko/orgs",
         "received_events_url" : "https://api.github.com/users/maflcko/received_events",
         "repos_url" : "https://api.github.com/users/maflcko/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/maflcko/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/maflcko/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/maflcko"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Not sure how to best fix this. I guess increasing the wiggle room by a few more bytes will make it closer to impossible to hit:\r\n\r\n\r\n```diff\r\ndiff --git a/test/functional/test_framework/util.py b/test/functional/test_framework/util.py\r\nindex b4b05b1597..97d0d9ca37 100644\r\n--- a/test/functional/test_framework/util.py\r\n+++ b/test/functional/test_framework/util.py\r\n@@ -46,8 +46,8 @@ def assert_fee_amount(fee, tx_size, feerate_BTC_kvB):\r\n     target_fee = get_fee(tx_size, feerate_BTC_kvB)\r\n     if fee < target_fee:\r\n         raise AssertionError(\"Fee of %s BTC too low! (Should be %s BTC)\" % (str(fee), str(target_fee)))\r\n-    # allow the wallet's estimation to be at most 2 bytes off\r\n-    high_fee = get_fee(tx_size + 2, feerate_BTC_kvB)\r\n+    # allow the wallet's estimation to be at most 3 bytes off\r\n+    high_fee = get_fee(tx_size + 3, feerate_BTC_kvB)\r\n     if fee > high_fee:\r\n         raise AssertionError(\"Fee of %s BTC too high! (Should be %s BTC)\" % (str(fee), str(target_fee)))\r\n \r\n```\r\n\r\n",
      "created_at" : "2024-02-23T09:55:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/25164#issuecomment-1961029008",
      "id" : 1961029008,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25164",
      "node_id" : "IC_kwDOABII58504u2Q",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1961029008/reactions"
      },
      "updated_at" : "2024-02-23T09:55:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1961029008",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/maflcko/events{/privacy}",
         "followers_url" : "https://api.github.com/users/maflcko/followers",
         "following_url" : "https://api.github.com/users/maflcko/following{/other_user}",
         "gists_url" : "https://api.github.com/users/maflcko/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/maflcko",
         "id" : 6399679,
         "login" : "maflcko",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/maflcko/orgs",
         "received_events_url" : "https://api.github.com/users/maflcko/received_events",
         "repos_url" : "https://api.github.com/users/maflcko/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/maflcko/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/maflcko/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/maflcko"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "When passing, this test's expected fee of 0.00002500 does not match the actual of 0.00002520. It passes because of the 2 byte allowance in `assert_fee_amount`. This happens because the calculation for the expected weight of an input is slightly off. I believe a better weight calculation would remove the 1 byte buffers and correctly calculate the _length_ of the number of scriptWitnesses rather than just adding the count directly to the weight. After speaking with @achow101 the buffers were added to account for the fact that sometimes ECDSA signatures can be 1 byte shorter than normal but in that case the buffer makes the estimate even further from the reality so I have simply removed them.\r\n\r\n```diff\r\ndiff --git a/test/functional/wallet_send.py b/test/functional/wallet_send.py\r\nindex 6ce2a56bfc..fed34c250b 100755\r\n--- a/test/functional/wallet_send.py\r\n+++ b/test/functional/wallet_send.py\r\n@@ -543,11 +543,16 @@ class WalletSendTest(BitcoinTestFramework):\r\n                 break\r\n         psbt_in = dec[\"inputs\"][input_idx]\r\n         # Calculate the input weight\r\n-        # (prevout + sequence + length of scriptSig + scriptsig + 1 byte buffer) * WITNESS_SCALE_FACTOR + num scriptWitness stack items + (length of stack item + stack item) * N stack items + 1 byte buffer\r\n+        # (prevout + sequence + length of scriptSig + scriptsig) * WITNESS_SCALE_FACTOR + len of num scriptWitness stack items + (length of stack item + stack item) * N stack items\r\n+        # Note that occasionally this weight estimate may be slightly larger than the real weight\r\n+        # as sometimes ECDSA signatures are one byte shorter than expected with a probability of 1/128\r\n         len_scriptsig = len(psbt_in[\"final_scriptSig\"][\"hex\"]) // 2 if \"final_scriptSig\" in psbt_in else 0\r\n-        len_scriptsig += len(ser_compact_size(len_scriptsig)) + 1\r\n-        len_scriptwitness = (sum([(len(x) // 2) + len(ser_compact_size(len(x) // 2)) for x in psbt_in[\"final_scriptwitness\"]]) + len(psbt_in[\"final_scriptwitness\"]) + 1) if \"final_scriptwitness\" in psbt_in else 0\r\n-        input_weight = ((40 + len_scriptsig) * WITNESS_SCALE_FACTOR) + len_scriptwitness\r\n+        len_scriptsig += len(ser_compact_size(len_scriptsig))\r\n+        len_scriptwitness = (sum([(len(x) // 2) + len(ser_compact_size(len(x) // 2)) for x in psbt_in[\"final_scriptwitness\"]]) + len(ser_compact_size(len(psbt_in[\"final_scriptwitness\"])))) if \"final_scriptwitness\" in psbt_in else 0\r\n+        len_prevout_txid = 32\r\n+        len_prevout_index = 4\r\n+        len_sequence = 4\r\n+        input_weight = ((len_prevout_txid + len_prevout_index + len_sequence + len_scriptsig) * WITNESS_SCALE_FACTOR) + len_scriptwitness\r\n\r\n         # Input weight error conditions\r\n         assert_raises_rpc_error(\r\n```\r\n\r\nThe reason for the flake was because with a probability of 1/128, the signatures on the transaction can be 1 byte shorter potentially making the whole transaction 249 vbytes. The proposed change above not only makes the expected and actual fees match (usually) but would also prevent the flake as the real fee of 0.00002500 would be within 2 bytes of the expected fee of 0.00002490 as afforded by `assert_fee_amount`.\r\n\r\n@achow101 also suggested that an alternative solution could be to change the test to use taproot instead which has predictable signature lengths.\r\n\r\nIf we are happy with the solution proposed above, I can submit as PR.",
      "created_at" : "2024-02-27T16:41:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/25164#issuecomment-1967048108",
      "id" : 1967048108,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25164",
      "node_id" : "IC_kwDOABII5851PsWs",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1967048108/reactions"
      },
      "updated_at" : "2024-02-27T16:41:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1967048108",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1204616?v=4",
         "events_url" : "https://api.github.com/users/m3dwards/events{/privacy}",
         "followers_url" : "https://api.github.com/users/m3dwards/followers",
         "following_url" : "https://api.github.com/users/m3dwards/following{/other_user}",
         "gists_url" : "https://api.github.com/users/m3dwards/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/m3dwards",
         "id" : 1204616,
         "login" : "m3dwards",
         "node_id" : "MDQ6VXNlcjEyMDQ2MTY=",
         "organizations_url" : "https://api.github.com/users/m3dwards/orgs",
         "received_events_url" : "https://api.github.com/users/m3dwards/received_events",
         "repos_url" : "https://api.github.com/users/m3dwards/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/m3dwards/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/m3dwards/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/m3dwards"
      }
   }
]
