[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11099#discussion_r134128377"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11099"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/134128377"
         }
      },
      "body" : "This is not correct since it can fail.",
      "commit_id" : "c2b72f7d6dccbacda0b6b1c788564e2992a009e1",
      "created_at" : "2017-08-20T22:40:59Z",
      "diff_hunk" : "@@ -1531,6 +1531,21 @@ UniValue getchaintxstats(const JSONRPCRequest& request)\n     return ret;\n }\n \n+UniValue dumpmempool(const JSONRPCRequest& request)\n+{\n+    if (request.fHelp || request.params.size() > 0)\n+        throw std::runtime_error(\n+            \"dumpmempool\\n\"\n+            \"\\nDumps to disk the mempool (mempool.dat).\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"dumpmempool\", \"\")\n+            + HelpExampleRpc(\"dumpmempool\", \"\")\n+        );\n+\n+    DumpMempool();\n+    return \"Mempool dumped\";",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11099#discussion_r134128377",
      "id" : 134128377,
      "original_commit_id" : "b83be8d2a40e3aa4a1766a86c9a26c4517fea67c",
      "original_position" : 16,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 57384353,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11099",
      "updated_at" : "2017-08-24T11:53:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/134128377",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11099#discussion_r134128392"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11099"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/134128392"
         }
      },
      "body" : "Remove the filename?",
      "commit_id" : "c2b72f7d6dccbacda0b6b1c788564e2992a009e1",
      "created_at" : "2017-08-20T22:41:38Z",
      "diff_hunk" : "@@ -1531,6 +1531,21 @@ UniValue getchaintxstats(const JSONRPCRequest& request)\n     return ret;\n }\n \n+UniValue dumpmempool(const JSONRPCRequest& request)\n+{\n+    if (request.fHelp || request.params.size() > 0)\n+        throw std::runtime_error(\n+            \"dumpmempool\\n\"\n+            \"\\nDumps to disk the mempool (mempool.dat).\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11099#discussion_r134128392",
      "id" : 134128392,
      "original_commit_id" : "b83be8d2a40e3aa4a1766a86c9a26c4517fea67c",
      "original_position" : 9,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 57384353,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11099",
      "updated_at" : "2017-08-24T11:53:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/134128392",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "body" : "Suggestion, reword `Add dumpmempool RPC`.",
      "created_at" : "2017-08-20T22:46:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11099#issuecomment-323616955",
      "id" : 323616955,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11099",
      "updated_at" : "2017-08-20T22:46:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/323616955",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "body" : "@promag thanks, updated as for feedback and squashed",
      "created_at" : "2017-08-21T01:45:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11099#issuecomment-323627960",
      "id" : 323627960,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11099",
      "updated_at" : "2017-08-21T01:45:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/323627960",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/5269298?v=4",
         "events_url" : "https://api.github.com/users/greenaddress/events{/privacy}",
         "followers_url" : "https://api.github.com/users/greenaddress/followers",
         "following_url" : "https://api.github.com/users/greenaddress/following{/other_user}",
         "gists_url" : "https://api.github.com/users/greenaddress/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/greenaddress",
         "id" : 5269298,
         "login" : "greenaddress",
         "organizations_url" : "https://api.github.com/users/greenaddress/orgs",
         "received_events_url" : "https://api.github.com/users/greenaddress/received_events",
         "repos_url" : "https://api.github.com/users/greenaddress/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/greenaddress/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/greenaddress/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/greenaddress"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11099#discussion_r134171209"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11099"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/134171209"
         }
      },
      "body" : "Sort, move before `getblockchaininfo `.",
      "commit_id" : "c2b72f7d6dccbacda0b6b1c788564e2992a009e1",
      "created_at" : "2017-08-21T08:25:29Z",
      "diff_hunk" : "@@ -1552,6 +1568,7 @@ static const CRPCCommand commands[] =\n     { \"blockchain\",         \"gettxoutsetinfo\",        &gettxoutsetinfo,        true,  {} },\n     { \"blockchain\",         \"pruneblockchain\",        &pruneblockchain,        true,  {\"height\"} },\n     { \"blockchain\",         \"verifychain\",            &verifychain,            true,  {\"checklevel\",\"nblocks\"} },\n+    { \"blockchain\",         \"dumpmempool\",            &dumpmempool,            true,  {} },",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11099#discussion_r134171209",
      "id" : 134171209,
      "original_commit_id" : "07d3aacbcb1e17bfe7220ae52eb93d2d51c602dc",
      "original_position" : 27,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 57430762,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11099",
      "updated_at" : "2017-08-24T11:53:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/134171209",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11099#discussion_r134171514"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11099"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/134171514"
         }
      },
      "body" : "Missing `{ }`.",
      "commit_id" : "c2b72f7d6dccbacda0b6b1c788564e2992a009e1",
      "created_at" : "2017-08-21T08:26:52Z",
      "diff_hunk" : "@@ -1531,6 +1531,22 @@ UniValue getchaintxstats(const JSONRPCRequest& request)\n     return ret;\n }\n \n+UniValue dumpmempool(const JSONRPCRequest& request)\n+{\n+    if (request.fHelp || request.params.size() > 0)\n+        throw std::runtime_error(\n+            \"dumpmempool\\n\"\n+            \"\\nDumps to disk the mempool.\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"dumpmempool\", \"\")\n+            + HelpExampleRpc(\"dumpmempool\", \"\")\n+        );\n+\n+    if (!DumpMempool())",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11099#discussion_r134171514",
      "id" : 134171514,
      "original_commit_id" : "07d3aacbcb1e17bfe7220ae52eb93d2d51c602dc",
      "original_position" : 15,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 57430762,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11099",
      "updated_at" : "2017-08-24T11:53:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/134171514",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11099#discussion_r134171596"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11099"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/134171596"
         }
      },
      "body" : "Nit, new line before `return`.",
      "commit_id" : "c2b72f7d6dccbacda0b6b1c788564e2992a009e1",
      "created_at" : "2017-08-21T08:27:06Z",
      "diff_hunk" : "@@ -1531,6 +1531,22 @@ UniValue getchaintxstats(const JSONRPCRequest& request)\n     return ret;\n }\n \n+UniValue dumpmempool(const JSONRPCRequest& request)\n+{\n+    if (request.fHelp || request.params.size() > 0)\n+        throw std::runtime_error(\n+            \"dumpmempool\\n\"\n+            \"\\nDumps to disk the mempool.\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"dumpmempool\", \"\")\n+            + HelpExampleRpc(\"dumpmempool\", \"\")\n+        );\n+\n+    if (!DumpMempool())\n+        throw JSONRPCError(RPC_INTERNAL_ERROR, \"Unable to dump mempool to disk\");\n+    return \"Mempool dumped\";",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11099#discussion_r134171596",
      "id" : 134171596,
      "original_commit_id" : "07d3aacbcb1e17bfe7220ae52eb93d2d51c602dc",
      "original_position" : 17,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 57430762,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11099",
      "updated_at" : "2017-08-24T11:53:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/134171596",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "body" : "@promag thanks, updated as for feedback and split in two commits\r\n\r\nre: RPC_INTERNAL_ERROR - didn't immediately found something better, very open to suggestions\r\n\r\nAnything else you would add to the test?",
      "created_at" : "2017-08-21T11:26:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11099#issuecomment-323719469",
      "id" : 323719469,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11099",
      "updated_at" : "2017-08-21T11:26:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/323719469",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/5269298?v=4",
         "events_url" : "https://api.github.com/users/greenaddress/events{/privacy}",
         "followers_url" : "https://api.github.com/users/greenaddress/followers",
         "following_url" : "https://api.github.com/users/greenaddress/following{/other_user}",
         "gists_url" : "https://api.github.com/users/greenaddress/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/greenaddress",
         "id" : 5269298,
         "login" : "greenaddress",
         "organizations_url" : "https://api.github.com/users/greenaddress/orgs",
         "received_events_url" : "https://api.github.com/users/greenaddress/received_events",
         "repos_url" : "https://api.github.com/users/greenaddress/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/greenaddress/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/greenaddress/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/greenaddress"
      }
   },
   {
      "body" : "I meant maybe not throw, and have the bool in the response.",
      "created_at" : "2017-08-21T21:37:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11099#issuecomment-323859945",
      "id" : 323859945,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11099",
      "updated_at" : "2017-08-21T21:37:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/323859945",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "body" : "I think the condition is exceptional and deserve a throw of an exception & consistent with the other rpcs (though I don't know if there's a more appropriate exception for it)",
      "created_at" : "2017-08-21T22:02:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11099#issuecomment-323864706",
      "id" : 323864706,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11099",
      "updated_at" : "2017-08-21T22:02:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/323864706",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/5269298?v=4",
         "events_url" : "https://api.github.com/users/greenaddress/events{/privacy}",
         "followers_url" : "https://api.github.com/users/greenaddress/followers",
         "following_url" : "https://api.github.com/users/greenaddress/following{/other_user}",
         "gists_url" : "https://api.github.com/users/greenaddress/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/greenaddress",
         "id" : 5269298,
         "login" : "greenaddress",
         "organizations_url" : "https://api.github.com/users/greenaddress/orgs",
         "received_events_url" : "https://api.github.com/users/greenaddress/received_events",
         "repos_url" : "https://api.github.com/users/greenaddress/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/greenaddress/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/greenaddress/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/greenaddress"
      }
   },
   {
      "body" : "I almost agree with that if it wasn't the fact that the function doesn't throw.. but I have no strong opinion on that.\r\n\r\nIf the throw stays, then maybe `RPC_MISC_ERROR`. See what causes `RPC_INTERNAL_ERROR`, sound like really bad excpetions.",
      "created_at" : "2017-08-21T22:13:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11099#issuecomment-323866570",
      "id" : 323866570,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11099",
      "updated_at" : "2017-08-21T22:13:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/323866570",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11099#discussion_r134432363"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11099"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/134432363"
         }
      },
      "body" : "I'm not the one to complain about this: but should it be `\"Dumps the mempool to disk\"?",
      "commit_id" : "c2b72f7d6dccbacda0b6b1c788564e2992a009e1",
      "created_at" : "2017-08-22T09:41:38Z",
      "diff_hunk" : "@@ -1531,9 +1531,28 @@ UniValue getchaintxstats(const JSONRPCRequest& request)\n     return ret;\n }\n \n+UniValue dumpmempool(const JSONRPCRequest& request)\n+{\n+    if (request.fHelp || request.params.size() > 0)\n+        throw std::runtime_error(\n+            \"dumpmempool\\n\"\n+            \"\\nDumps to disk the mempool.\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11099#discussion_r134432363",
      "id" : 134432363,
      "original_commit_id" : "6df6ce09e454555ee6c2181f3b474ca57826bebd",
      "original_position" : 9,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 57720729,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11099",
      "updated_at" : "2017-08-24T11:53:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/134432363",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/178464?v=4",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11099#discussion_r134432492"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11099"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/134432492"
         }
      },
      "body" : "Because this is machine to machine communication, use `true` as ret val at this point?",
      "commit_id" : "c2b72f7d6dccbacda0b6b1c788564e2992a009e1",
      "created_at" : "2017-08-22T09:42:13Z",
      "diff_hunk" : "@@ -1531,9 +1531,28 @@ UniValue getchaintxstats(const JSONRPCRequest& request)\n     return ret;\n }\n \n+UniValue dumpmempool(const JSONRPCRequest& request)\n+{\n+    if (request.fHelp || request.params.size() > 0)\n+        throw std::runtime_error(\n+            \"dumpmempool\\n\"\n+            \"\\nDumps to disk the mempool.\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"dumpmempool\", \"\")\n+            + HelpExampleRpc(\"dumpmempool\", \"\")\n+        );\n+\n+    if (!DumpMempool()) {\n+        throw JSONRPCError(RPC_INTERNAL_ERROR, \"Unable to dump mempool to disk\");\n+    }\n+\n+    return \"Mempool dumped\";",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11099#discussion_r134432492",
      "id" : 134432492,
      "original_commit_id" : "6df6ce09e454555ee6c2181f3b474ca57826bebd",
      "original_position" : 19,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 57720729,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11099",
      "updated_at" : "2017-08-24T11:53:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/134432492",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/178464?v=4",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "thanks @jonasschnelli - good points\r\n\r\nadded a commit (which i think should be squashed at some point together with \"Add dumpmempool RPC\")",
      "created_at" : "2017-08-22T12:43:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11099#issuecomment-324014364",
      "id" : 324014364,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11099",
      "updated_at" : "2017-08-22T12:43:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/324014364",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/5269298?v=4",
         "events_url" : "https://api.github.com/users/greenaddress/events{/privacy}",
         "followers_url" : "https://api.github.com/users/greenaddress/followers",
         "following_url" : "https://api.github.com/users/greenaddress/following{/other_user}",
         "gists_url" : "https://api.github.com/users/greenaddress/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/greenaddress",
         "id" : 5269298,
         "login" : "greenaddress",
         "organizations_url" : "https://api.github.com/users/greenaddress/orgs",
         "received_events_url" : "https://api.github.com/users/greenaddress/received_events",
         "repos_url" : "https://api.github.com/users/greenaddress/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/greenaddress/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/greenaddress/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/greenaddress"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11099#discussion_r134650130"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11099"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/134650130"
         }
      },
      "body" : "Maybe `RPC_MISC_ERROR`. See what causes `RPC_INTERNAL_ERROR`, sounds like really bad exceptions.",
      "commit_id" : "c2b72f7d6dccbacda0b6b1c788564e2992a009e1",
      "created_at" : "2017-08-23T03:28:21Z",
      "diff_hunk" : "@@ -1531,9 +1531,28 @@ UniValue getchaintxstats(const JSONRPCRequest& request)\n     return ret;\n }\n \n+UniValue dumpmempool(const JSONRPCRequest& request)\n+{\n+    if (request.fHelp || request.params.size() != 0)\n+        throw std::runtime_error(\n+            \"dumpmempool\\n\"\n+            \"\\nDumps the mempool to disk.\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"dumpmempool\", \"\")\n+            + HelpExampleRpc(\"dumpmempool\", \"\")\n+        );\n+\n+    if (!DumpMempool()) {\n+        throw JSONRPCError(RPC_INTERNAL_ERROR, \"Unable to dump mempool to disk\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11099#discussion_r134650130",
      "id" : 134650130,
      "original_commit_id" : "d6322291ebe8d956c8b904dc39e500e7ec5ae3ea",
      "original_position" : 16,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 57965652,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11099",
      "updated_at" : "2017-08-24T11:53:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/134650130",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "body" : "utACK ~~cd0ea487422028bec1f5df62ab4c57909c2bcc90~~\r\n\r\nMaybe add an rational (possible use-cases) to the PR description. ",
      "created_at" : "2017-08-23T10:57:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11099#issuecomment-324294605",
      "id" : 324294605,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11099",
      "updated_at" : "2017-08-23T15:41:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/324294605",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/178464?v=4",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "@promag updated the exception, thanks\r\n\r\n@jonasschnelli updated the description. Please note your utACK points to a commit from @TheBlueMatt. GitHub also tells me there's some changes required, should I ignore that?",
      "created_at" : "2017-08-23T11:56:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11099#issuecomment-324306305",
      "id" : 324306305,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11099",
      "updated_at" : "2017-08-23T11:56:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/324306305",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/5269298?v=4",
         "events_url" : "https://api.github.com/users/greenaddress/events{/privacy}",
         "followers_url" : "https://api.github.com/users/greenaddress/followers",
         "following_url" : "https://api.github.com/users/greenaddress/following{/other_user}",
         "gists_url" : "https://api.github.com/users/greenaddress/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/greenaddress",
         "id" : 5269298,
         "login" : "greenaddress",
         "organizations_url" : "https://api.github.com/users/greenaddress/orgs",
         "received_events_url" : "https://api.github.com/users/greenaddress/received_events",
         "repos_url" : "https://api.github.com/users/greenaddress/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/greenaddress/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/greenaddress/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/greenaddress"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11099#discussion_r134730881"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11099"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/134730881"
         }
      },
      "body" : "Use `os.path.join`, so that it works on other operating systems as well.",
      "commit_id" : "c2b72f7d6dccbacda0b6b1c788564e2992a009e1",
      "created_at" : "2017-08-23T12:00:57Z",
      "diff_hunk" : "@@ -0,0 +1,43 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2014-2017 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test mempool dump.\n+\n+By default, bitcoind will dump mempool on shutdown and\n+then reload it on startup. Dump can also happen when requested via RPC.\n+\n+Test is as follows:\n+\n+  - start node0\n+  - check no mempool file exist\n+  - dump mempool and verify it then exists\n+  - move parent directory to cause fail to dump, verify exception\n+\n+\"\"\"\n+\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import *\n+import os\n+\n+class MempoolDumpTest(BitcoinTestFramework):\n+\n+    def __init__(self):\n+        super().__init__()\n+        self.num_nodes = 1\n+        self.setup_clean_chain = True\n+\n+    def run_test(self):\n+        self.log.debug(\"Verify mempool file doesn't exists\")\n+        mempooldat = self.options.tmpdir + \"/node0/regtest/mempool.dat\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11099#discussion_r134730881",
      "id" : 134730881,
      "original_commit_id" : "79fa1ffe39a42b8a3335d46aa7a8668cfd5ba9ab",
      "original_position" : 32,
      "path" : "test/functional/mempool_dump.py",
      "position" : null,
      "pull_request_review_id" : 58055545,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11099",
      "updated_at" : "2017-08-24T11:53:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/134730881",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11099#discussion_r134731366"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11099"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/134731366"
         }
      },
      "body" : "Might use `os.path.isfile` for better readability.",
      "commit_id" : "c2b72f7d6dccbacda0b6b1c788564e2992a009e1",
      "created_at" : "2017-08-23T12:02:57Z",
      "diff_hunk" : "@@ -0,0 +1,43 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2014-2017 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test mempool dump.\n+\n+By default, bitcoind will dump mempool on shutdown and\n+then reload it on startup. Dump can also happen when requested via RPC.\n+\n+Test is as follows:\n+\n+  - start node0\n+  - check no mempool file exist\n+  - dump mempool and verify it then exists\n+  - move parent directory to cause fail to dump, verify exception\n+\n+\"\"\"\n+\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import *\n+import os\n+\n+class MempoolDumpTest(BitcoinTestFramework):\n+\n+    def __init__(self):\n+        super().__init__()\n+        self.num_nodes = 1\n+        self.setup_clean_chain = True\n+\n+    def run_test(self):\n+        self.log.debug(\"Verify mempool file doesn't exists\")\n+        mempooldat = self.options.tmpdir + \"/node0/regtest/mempool.dat\"\n+        assert_raises(OSError, lambda: os.remove(mempooldat))",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11099#discussion_r134731366",
      "id" : 134731366,
      "original_commit_id" : "79fa1ffe39a42b8a3335d46aa7a8668cfd5ba9ab",
      "original_position" : 33,
      "path" : "test/functional/mempool_dump.py",
      "position" : null,
      "pull_request_review_id" : 58055545,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11099",
      "updated_at" : "2017-08-24T11:53:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/134731366",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11099#discussion_r134731519"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11099"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/134731519"
         }
      },
      "body" : "nit: No need for assert_equal, you can just `assert dumpmempool()`",
      "commit_id" : "c2b72f7d6dccbacda0b6b1c788564e2992a009e1",
      "created_at" : "2017-08-23T12:03:43Z",
      "diff_hunk" : "@@ -0,0 +1,43 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2014-2017 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test mempool dump.\n+\n+By default, bitcoind will dump mempool on shutdown and\n+then reload it on startup. Dump can also happen when requested via RPC.\n+\n+Test is as follows:\n+\n+  - start node0\n+  - check no mempool file exist\n+  - dump mempool and verify it then exists\n+  - move parent directory to cause fail to dump, verify exception\n+\n+\"\"\"\n+\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import *\n+import os\n+\n+class MempoolDumpTest(BitcoinTestFramework):\n+\n+    def __init__(self):\n+        super().__init__()\n+        self.num_nodes = 1\n+        self.setup_clean_chain = True\n+\n+    def run_test(self):\n+        self.log.debug(\"Verify mempool file doesn't exists\")\n+        mempooldat = self.options.tmpdir + \"/node0/regtest/mempool.dat\"\n+        assert_raises(OSError, lambda: os.remove(mempooldat))\n+        self.log.debug(\"Dump mempool to disk\")\n+        assert_equal(self.nodes[0].dumpmempool(), True)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11099#discussion_r134731519",
      "id" : 134731519,
      "original_commit_id" : "79fa1ffe39a42b8a3335d46aa7a8668cfd5ba9ab",
      "original_position" : 35,
      "path" : "test/functional/mempool_dump.py",
      "position" : null,
      "pull_request_review_id" : 58055545,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11099",
      "updated_at" : "2017-08-24T11:53:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/134731519",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11099#discussion_r134731692"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11099"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/134731692"
         }
      },
      "body" : "I don't think we allow the datadir to be moved while running. The tests should not rely on this.",
      "commit_id" : "c2b72f7d6dccbacda0b6b1c788564e2992a009e1",
      "created_at" : "2017-08-23T12:04:44Z",
      "diff_hunk" : "@@ -0,0 +1,43 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2014-2017 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test mempool dump.\n+\n+By default, bitcoind will dump mempool on shutdown and\n+then reload it on startup. Dump can also happen when requested via RPC.\n+\n+Test is as follows:\n+\n+  - start node0\n+  - check no mempool file exist\n+  - dump mempool and verify it then exists\n+  - move parent directory to cause fail to dump, verify exception\n+\n+\"\"\"\n+\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import *\n+import os\n+\n+class MempoolDumpTest(BitcoinTestFramework):\n+\n+    def __init__(self):\n+        super().__init__()\n+        self.num_nodes = 1\n+        self.setup_clean_chain = True\n+\n+    def run_test(self):\n+        self.log.debug(\"Verify mempool file doesn't exists\")\n+        mempooldat = self.options.tmpdir + \"/node0/regtest/mempool.dat\"\n+        assert_raises(OSError, lambda: os.remove(mempooldat))\n+        self.log.debug(\"Dump mempool to disk\")\n+        assert_equal(self.nodes[0].dumpmempool(), True)\n+        assert_equal(os.path.isfile(mempooldat), True)\n+        os.rename(self.options.tmpdir + \"/node0/regtest\", self.options.tmpdir + \"/node0/regtest_bk\")",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11099#discussion_r134731692",
      "id" : 134731692,
      "original_commit_id" : "79fa1ffe39a42b8a3335d46aa7a8668cfd5ba9ab",
      "original_position" : 37,
      "path" : "test/functional/mempool_dump.py",
      "position" : null,
      "pull_request_review_id" : 58055545,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11099",
      "updated_at" : "2017-08-24T11:53:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/134731692",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11099#discussion_r134731914"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11099"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/134731914"
         }
      },
      "body" : "You might be able to achieve the same error condition by changing the file permissions, though.",
      "commit_id" : "c2b72f7d6dccbacda0b6b1c788564e2992a009e1",
      "created_at" : "2017-08-23T12:05:51Z",
      "diff_hunk" : "@@ -0,0 +1,43 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2014-2017 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test mempool dump.\n+\n+By default, bitcoind will dump mempool on shutdown and\n+then reload it on startup. Dump can also happen when requested via RPC.\n+\n+Test is as follows:\n+\n+  - start node0\n+  - check no mempool file exist\n+  - dump mempool and verify it then exists\n+  - move parent directory to cause fail to dump, verify exception\n+\n+\"\"\"\n+\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import *\n+import os\n+\n+class MempoolDumpTest(BitcoinTestFramework):\n+\n+    def __init__(self):\n+        super().__init__()\n+        self.num_nodes = 1\n+        self.setup_clean_chain = True\n+\n+    def run_test(self):\n+        self.log.debug(\"Verify mempool file doesn't exists\")\n+        mempooldat = self.options.tmpdir + \"/node0/regtest/mempool.dat\"\n+        assert_raises(OSError, lambda: os.remove(mempooldat))\n+        self.log.debug(\"Dump mempool to disk\")\n+        assert_equal(self.nodes[0].dumpmempool(), True)\n+        assert_equal(os.path.isfile(mempooldat), True)\n+        os.rename(self.options.tmpdir + \"/node0/regtest\", self.options.tmpdir + \"/node0/regtest_bk\")",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11099#discussion_r134731914",
      "id" : 134731914,
      "original_commit_id" : "79fa1ffe39a42b8a3335d46aa7a8668cfd5ba9ab",
      "original_position" : 37,
      "path" : "test/functional/mempool_dump.py",
      "position" : null,
      "pull_request_review_id" : 58055545,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11099",
      "updated_at" : "2017-08-24T11:53:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/134731914",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "body" : "You might even combine the tests with the existing mempool persist test.",
      "created_at" : "2017-08-23T12:08:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11099#issuecomment-324308923",
      "id" : 324308923,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11099",
      "updated_at" : "2017-08-23T12:08:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/324308923",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "body" : "@MarcoFalke I tried with permissions and didn't work. I couldn't find another way to trigger the error.\r\n\r\nWill address the other feedback now",
      "created_at" : "2017-08-23T12:17:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11099#issuecomment-324311213",
      "id" : 324311213,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11099",
      "updated_at" : "2017-08-23T12:17:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/324311213",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/5269298?v=4",
         "events_url" : "https://api.github.com/users/greenaddress/events{/privacy}",
         "followers_url" : "https://api.github.com/users/greenaddress/followers",
         "following_url" : "https://api.github.com/users/greenaddress/following{/other_user}",
         "gists_url" : "https://api.github.com/users/greenaddress/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/greenaddress",
         "id" : 5269298,
         "login" : "greenaddress",
         "organizations_url" : "https://api.github.com/users/greenaddress/orgs",
         "received_events_url" : "https://api.github.com/users/greenaddress/received_events",
         "repos_url" : "https://api.github.com/users/greenaddress/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/greenaddress/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/greenaddress/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/greenaddress"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11099#discussion_r134795037"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11099"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/134795037"
         }
      },
      "body" : "Not sure what the convention is, or what's best practice, but to me having the `return false` statement within the catch block is more obvious.",
      "commit_id" : "c2b72f7d6dccbacda0b6b1c788564e2992a009e1",
      "created_at" : "2017-08-23T15:58:13Z",
      "diff_hunk" : "@@ -4368,9 +4368,11 @@ void DumpMempool(void)\n         RenameOver(GetDataDir() / \"mempool.dat.new\", GetDataDir() / \"mempool.dat\");\n         int64_t last = GetTimeMicros();\n         LogPrintf(\"Dumped mempool: %gs to copy, %gs to dump\\n\", (mid-start)*0.000001, (last-mid)*0.000001);\n+        return true;\n     } catch (const std::exception& e) {\n         LogPrintf(\"Failed to dump mempool: %s. Continuing anyway.\\n\", e.what());\n     }\n+    return false;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11099#discussion_r134795037",
      "id" : 134795037,
      "original_commit_id" : "0ade83e962ff6da0e345ead5ef31cc80d5523f93",
      "original_position" : 26,
      "path" : "src/validation.cpp",
      "position" : null,
      "pull_request_review_id" : 58129621,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11099",
      "updated_at" : "2017-08-24T11:53:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/134795037",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11099#discussion_r134795723"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11099"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/134795723"
         }
      },
      "body" : "nit: PEP8 import ordering please: std library imports first, then local project imports.",
      "commit_id" : "c2b72f7d6dccbacda0b6b1c788564e2992a009e1",
      "created_at" : "2017-08-23T16:00:32Z",
      "diff_hunk" : "@@ -0,0 +1,45 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2014-2017 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test mempool dump.\n+\n+By default, bitcoind will dump mempool on shutdown and\n+then reload it on startup. Dump can also happen when requested via RPC.\n+\n+Test is as follows:\n+\n+  - start node0\n+  - check no mempool file exist\n+  - dump mempool and verify it then exists\n+  - move parent directory to cause fail to dump, verify exception\n+\n+\"\"\"\n+\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import *\n+import os",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11099#discussion_r134795723",
      "id" : 134795723,
      "original_commit_id" : "0ade83e962ff6da0e345ead5ef31cc80d5523f93",
      "original_position" : 21,
      "path" : "test/functional/mempool_dump.py",
      "position" : null,
      "pull_request_review_id" : 58129621,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11099",
      "updated_at" : "2017-08-24T11:53:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/134795723",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11099#discussion_r134816629"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11099"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/134816629"
         }
      },
      "body" : "I'm not sure if this failure test is necessary. If bitcoind can't write to its data directory, I'm sure all kinds of bad things happen.",
      "commit_id" : "c2b72f7d6dccbacda0b6b1c788564e2992a009e1",
      "created_at" : "2017-08-23T17:27:04Z",
      "diff_hunk" : "@@ -0,0 +1,45 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2014-2017 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test mempool dump.\n+\n+By default, bitcoind will dump mempool on shutdown and\n+then reload it on startup. Dump can also happen when requested via RPC.\n+\n+Test is as follows:\n+\n+  - start node0\n+  - check no mempool file exist\n+  - dump mempool and verify it then exists\n+  - move parent directory to cause fail to dump, verify exception\n+\n+\"\"\"\n+\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import *\n+import os\n+\n+class MempoolDumpTest(BitcoinTestFramework):\n+\n+    def __init__(self):\n+        super().__init__()\n+        self.num_nodes = 1\n+        self.setup_clean_chain = True\n+\n+    def run_test(self):\n+        self.log.debug(\"Verify mempool file doesn't exists\")\n+        regtestdir = os.path.join(self.options.tmpdir, 'node0', 'regtest')\n+        mempooldat = os.path.join(regtestdir, 'mempool.dat')\n+        assert not os.path.isfile(mempooldat)\n+        self.log.debug(\"Dump mempool to disk\")\n+        assert self.nodes[0].dumpmempool()\n+        assert os.path.isfile(mempooldat)\n+        moveddir = os.path.join(self.options.tmpdir, 'node0', 'regtest_bk')",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11099#discussion_r134816629",
      "id" : 134816629,
      "original_commit_id" : "0ade83e962ff6da0e345ead5ef31cc80d5523f93",
      "original_position" : 38,
      "path" : "test/functional/mempool_dump.py",
      "position" : null,
      "pull_request_review_id" : 58129621,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11099",
      "updated_at" : "2017-08-24T11:53:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/134816629",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "body" : "> If the throw stays, then maybe RPC_MISC_ERROR. See what causes RPC_INTERNAL_ERROR, sound like really bad excpetions.\r\n\r\nI think either is fine. bitcoind should always be able to write to its data directory, so I would say failure to do so counts as an internal error.\r\n\r\n> Concept ACK, but I don't like the tests.\r\n\r\nI also don't like the test framework messing with bitcoind's data directory. I don't think the failure testcase is necessary. If bitcoind can't write to its datadirectory, there are more pressing issues than the RPC raising the correct error.\r\n\r\nAgree with @MarcoFalke that it might be a good idea to combine this with the mempool_persist.py test (if it can be done tidily).",
      "created_at" : "2017-08-23T17:30:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11099#issuecomment-324406691",
      "id" : 324406691,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11099",
      "updated_at" : "2017-08-23T17:30:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/324406691",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11099#discussion_r134841186"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11099"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/134841186"
         }
      },
      "body" : "I think it makes sense to check that there is no file, you dump and there is a file.",
      "commit_id" : "c2b72f7d6dccbacda0b6b1c788564e2992a009e1",
      "created_at" : "2017-08-23T18:57:28Z",
      "diff_hunk" : "@@ -0,0 +1,45 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2014-2017 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test mempool dump.\n+\n+By default, bitcoind will dump mempool on shutdown and\n+then reload it on startup. Dump can also happen when requested via RPC.\n+\n+Test is as follows:\n+\n+  - start node0\n+  - check no mempool file exist\n+  - dump mempool and verify it then exists\n+  - move parent directory to cause fail to dump, verify exception\n+\n+\"\"\"\n+\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import *\n+import os\n+\n+class MempoolDumpTest(BitcoinTestFramework):\n+\n+    def __init__(self):\n+        super().__init__()\n+        self.num_nodes = 1\n+        self.setup_clean_chain = True\n+\n+    def run_test(self):\n+        self.log.debug(\"Verify mempool file doesn't exists\")\n+        regtestdir = os.path.join(self.options.tmpdir, 'node0', 'regtest')\n+        mempooldat = os.path.join(regtestdir, 'mempool.dat')\n+        assert not os.path.isfile(mempooldat)\n+        self.log.debug(\"Dump mempool to disk\")\n+        assert self.nodes[0].dumpmempool()\n+        assert os.path.isfile(mempooldat)\n+        moveddir = os.path.join(self.options.tmpdir, 'node0', 'regtest_bk')",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11099#discussion_r134841186",
      "id" : 134841186,
      "original_commit_id" : "0ade83e962ff6da0e345ead5ef31cc80d5523f93",
      "original_position" : 38,
      "path" : "test/functional/mempool_dump.py",
      "position" : null,
      "pull_request_review_id" : 58181568,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11099",
      "updated_at" : "2017-08-24T11:53:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/134841186",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/5269298?v=4",
         "events_url" : "https://api.github.com/users/greenaddress/events{/privacy}",
         "followers_url" : "https://api.github.com/users/greenaddress/followers",
         "following_url" : "https://api.github.com/users/greenaddress/following{/other_user}",
         "gists_url" : "https://api.github.com/users/greenaddress/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/greenaddress",
         "id" : 5269298,
         "login" : "greenaddress",
         "organizations_url" : "https://api.github.com/users/greenaddress/orgs",
         "received_events_url" : "https://api.github.com/users/greenaddress/received_events",
         "repos_url" : "https://api.github.com/users/greenaddress/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/greenaddress/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/greenaddress/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/greenaddress"
      }
   },
   {
      "body" : "@jnewbery thanks, addressed some feedback. \r\n\r\nRe: testing I also don't like messing with the datadir but unless someone has better suggestions the options are keeping it or removing it. \r\n\r\n",
      "created_at" : "2017-08-23T18:57:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11099#issuecomment-324430795",
      "id" : 324430795,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11099",
      "updated_at" : "2017-08-23T19:01:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/324430795",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/5269298?v=4",
         "events_url" : "https://api.github.com/users/greenaddress/events{/privacy}",
         "followers_url" : "https://api.github.com/users/greenaddress/followers",
         "following_url" : "https://api.github.com/users/greenaddress/following{/other_user}",
         "gists_url" : "https://api.github.com/users/greenaddress/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/greenaddress",
         "id" : 5269298,
         "login" : "greenaddress",
         "organizations_url" : "https://api.github.com/users/greenaddress/orgs",
         "received_events_url" : "https://api.github.com/users/greenaddress/received_events",
         "repos_url" : "https://api.github.com/users/greenaddress/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/greenaddress/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/greenaddress/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/greenaddress"
      }
   },
   {
      "body" : "> the options are keeping it or removing it.\r\n\r\nI vote for removing it",
      "created_at" : "2017-08-23T19:52:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11099#issuecomment-324443871",
      "id" : 324443871,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11099",
      "updated_at" : "2017-08-23T19:52:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/324443871",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "body" : "> bitcoind should always be able to write to its data directory\r\n\r\n@jnewbery `DumpMempool()` ignores failures, treats them irrelevant, hence my initial point of removing the throw in the RPC.",
      "created_at" : "2017-08-23T21:20:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11099#issuecomment-324465985",
      "id" : 324465985,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11099",
      "updated_at" : "2017-08-23T21:20:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/324465985",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11099#discussion_r134876748"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11099"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/134876748"
         }
      },
      "body" : ">  I think it makes sense to check that there is no file, you dump and there is a file.\r\n\r\nYou do exactly this in the lines above. The comment is about `assert_raises_jsonrpc`, which raises due to the missing datadir. As mentioned earlier, this will likely introduce hard to reproduce test failures now or in the future.\r\n\r\nWith the current flakiness of the test framework in mind I am against adding such a failure test.",
      "commit_id" : "c2b72f7d6dccbacda0b6b1c788564e2992a009e1",
      "created_at" : "2017-08-23T21:32:47Z",
      "diff_hunk" : "@@ -0,0 +1,45 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2014-2017 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test mempool dump.\n+\n+By default, bitcoind will dump mempool on shutdown and\n+then reload it on startup. Dump can also happen when requested via RPC.\n+\n+Test is as follows:\n+\n+  - start node0\n+  - check no mempool file exist\n+  - dump mempool and verify it then exists\n+  - move parent directory to cause fail to dump, verify exception\n+\n+\"\"\"\n+\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import *\n+import os\n+\n+class MempoolDumpTest(BitcoinTestFramework):\n+\n+    def __init__(self):\n+        super().__init__()\n+        self.num_nodes = 1\n+        self.setup_clean_chain = True\n+\n+    def run_test(self):\n+        self.log.debug(\"Verify mempool file doesn't exists\")\n+        regtestdir = os.path.join(self.options.tmpdir, 'node0', 'regtest')\n+        mempooldat = os.path.join(regtestdir, 'mempool.dat')\n+        assert not os.path.isfile(mempooldat)\n+        self.log.debug(\"Dump mempool to disk\")\n+        assert self.nodes[0].dumpmempool()\n+        assert os.path.isfile(mempooldat)\n+        moveddir = os.path.join(self.options.tmpdir, 'node0', 'regtest_bk')",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11099#discussion_r134876748",
      "id" : 134876748,
      "original_commit_id" : "0ade83e962ff6da0e345ead5ef31cc80d5523f93",
      "original_position" : 38,
      "path" : "test/functional/mempool_dump.py",
      "position" : null,
      "pull_request_review_id" : 58222394,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11099",
      "updated_at" : "2017-08-24T11:53:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/134876748",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11099#discussion_r134877224"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11099"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/134877224"
         }
      },
      "body" : "What you might try instead is to copy the dumped mempool from node0 to node1 and check that it can be loaded. (The nodes are not connected, but share the same blockchain)\r\n\r\nAnyway, I just noticed you are using a clean blockchain and dump the empty mempool. Might be better to populate it a bit.",
      "commit_id" : "c2b72f7d6dccbacda0b6b1c788564e2992a009e1",
      "created_at" : "2017-08-23T21:35:12Z",
      "diff_hunk" : "@@ -0,0 +1,45 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2014-2017 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test mempool dump.\n+\n+By default, bitcoind will dump mempool on shutdown and\n+then reload it on startup. Dump can also happen when requested via RPC.\n+\n+Test is as follows:\n+\n+  - start node0\n+  - check no mempool file exist\n+  - dump mempool and verify it then exists\n+  - move parent directory to cause fail to dump, verify exception\n+\n+\"\"\"\n+\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import *\n+import os\n+\n+class MempoolDumpTest(BitcoinTestFramework):\n+\n+    def __init__(self):\n+        super().__init__()\n+        self.num_nodes = 1\n+        self.setup_clean_chain = True\n+\n+    def run_test(self):\n+        self.log.debug(\"Verify mempool file doesn't exists\")\n+        regtestdir = os.path.join(self.options.tmpdir, 'node0', 'regtest')\n+        mempooldat = os.path.join(regtestdir, 'mempool.dat')\n+        assert not os.path.isfile(mempooldat)\n+        self.log.debug(\"Dump mempool to disk\")\n+        assert self.nodes[0].dumpmempool()\n+        assert os.path.isfile(mempooldat)\n+        moveddir = os.path.join(self.options.tmpdir, 'node0', 'regtest_bk')",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11099#discussion_r134877224",
      "id" : 134877224,
      "original_commit_id" : "0ade83e962ff6da0e345ead5ef31cc80d5523f93",
      "original_position" : 38,
      "path" : "test/functional/mempool_dump.py",
      "position" : null,
      "pull_request_review_id" : 58222394,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11099",
      "updated_at" : "2017-08-24T11:53:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/134877224",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11099#discussion_r134879376"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11099"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/134879376"
         }
      },
      "body" : "A bit as in 1 transaction is enough?  ",
      "commit_id" : "c2b72f7d6dccbacda0b6b1c788564e2992a009e1",
      "created_at" : "2017-08-23T21:45:14Z",
      "diff_hunk" : "@@ -0,0 +1,45 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2014-2017 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test mempool dump.\n+\n+By default, bitcoind will dump mempool on shutdown and\n+then reload it on startup. Dump can also happen when requested via RPC.\n+\n+Test is as follows:\n+\n+  - start node0\n+  - check no mempool file exist\n+  - dump mempool and verify it then exists\n+  - move parent directory to cause fail to dump, verify exception\n+\n+\"\"\"\n+\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import *\n+import os\n+\n+class MempoolDumpTest(BitcoinTestFramework):\n+\n+    def __init__(self):\n+        super().__init__()\n+        self.num_nodes = 1\n+        self.setup_clean_chain = True\n+\n+    def run_test(self):\n+        self.log.debug(\"Verify mempool file doesn't exists\")\n+        regtestdir = os.path.join(self.options.tmpdir, 'node0', 'regtest')\n+        mempooldat = os.path.join(regtestdir, 'mempool.dat')\n+        assert not os.path.isfile(mempooldat)\n+        self.log.debug(\"Dump mempool to disk\")\n+        assert self.nodes[0].dumpmempool()\n+        assert os.path.isfile(mempooldat)\n+        moveddir = os.path.join(self.options.tmpdir, 'node0', 'regtest_bk')",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11099#discussion_r134879376",
      "id" : 134879376,
      "original_commit_id" : "0ade83e962ff6da0e345ead5ef31cc80d5523f93",
      "original_position" : 38,
      "path" : "test/functional/mempool_dump.py",
      "position" : null,
      "pull_request_review_id" : 58225360,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11099",
      "updated_at" : "2017-08-24T11:53:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/134879376",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11099#discussion_r134994627"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11099"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/134994627"
         }
      },
      "body" : "@MarcoFalke I made that change (about to push commit) and moved the test to mempool_persist as advised - however your suggestion still doesn't test the exception so I left that in, can easily remove the last 4 lines of the test if other agrees is better to not have it.",
      "commit_id" : "c2b72f7d6dccbacda0b6b1c788564e2992a009e1",
      "created_at" : "2017-08-24T11:53:33Z",
      "diff_hunk" : "@@ -0,0 +1,45 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2014-2017 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test mempool dump.\n+\n+By default, bitcoind will dump mempool on shutdown and\n+then reload it on startup. Dump can also happen when requested via RPC.\n+\n+Test is as follows:\n+\n+  - start node0\n+  - check no mempool file exist\n+  - dump mempool and verify it then exists\n+  - move parent directory to cause fail to dump, verify exception\n+\n+\"\"\"\n+\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import *\n+import os\n+\n+class MempoolDumpTest(BitcoinTestFramework):\n+\n+    def __init__(self):\n+        super().__init__()\n+        self.num_nodes = 1\n+        self.setup_clean_chain = True\n+\n+    def run_test(self):\n+        self.log.debug(\"Verify mempool file doesn't exists\")\n+        regtestdir = os.path.join(self.options.tmpdir, 'node0', 'regtest')\n+        mempooldat = os.path.join(regtestdir, 'mempool.dat')\n+        assert not os.path.isfile(mempooldat)\n+        self.log.debug(\"Dump mempool to disk\")\n+        assert self.nodes[0].dumpmempool()\n+        assert os.path.isfile(mempooldat)\n+        moveddir = os.path.join(self.options.tmpdir, 'node0', 'regtest_bk')",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11099#discussion_r134994627",
      "id" : 134994627,
      "original_commit_id" : "0ade83e962ff6da0e345ead5ef31cc80d5523f93",
      "original_position" : 38,
      "path" : "test/functional/mempool_dump.py",
      "position" : null,
      "pull_request_review_id" : 58353393,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11099",
      "updated_at" : "2017-08-24T11:53:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/134994627",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/5269298?v=4",
         "events_url" : "https://api.github.com/users/greenaddress/events{/privacy}",
         "followers_url" : "https://api.github.com/users/greenaddress/followers",
         "following_url" : "https://api.github.com/users/greenaddress/following{/other_user}",
         "gists_url" : "https://api.github.com/users/greenaddress/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/greenaddress",
         "id" : 5269298,
         "login" : "greenaddress",
         "organizations_url" : "https://api.github.com/users/greenaddress/orgs",
         "received_events_url" : "https://api.github.com/users/greenaddress/received_events",
         "repos_url" : "https://api.github.com/users/greenaddress/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/greenaddress/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/greenaddress/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/greenaddress"
      }
   },
   {
      "body" : "@MarcoFalke I've merged the tests and added your suggestion \"copy the dumped mempool from node0 to node1 and check that it can be loaded. (The nodes are not connected, but share the same blockchain)\"\r\n\r\nI left in the exception test for now.",
      "created_at" : "2017-08-24T11:55:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11099#issuecomment-324614261",
      "id" : 324614261,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11099",
      "updated_at" : "2017-08-24T14:27:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/324614261",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/5269298?v=4",
         "events_url" : "https://api.github.com/users/greenaddress/events{/privacy}",
         "followers_url" : "https://api.github.com/users/greenaddress/followers",
         "following_url" : "https://api.github.com/users/greenaddress/following{/other_user}",
         "gists_url" : "https://api.github.com/users/greenaddress/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/greenaddress",
         "id" : 5269298,
         "login" : "greenaddress",
         "organizations_url" : "https://api.github.com/users/greenaddress/orgs",
         "received_events_url" : "https://api.github.com/users/greenaddress/received_events",
         "repos_url" : "https://api.github.com/users/greenaddress/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/greenaddress/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/greenaddress/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/greenaddress"
      }
   },
   {
      "body" : "Updated slightly the tests only: removed the ugly rename of the node directory in favor of using permissions to make it fail in the test\r\n\r\n@MarcoFalke Permissions initially didn't work because there was a rename involved from a tmp file but it works if I use permissions on the tmp file that gets renamed ('mempool.dat.new') so switched to that\r\n\r\nI also removed from the test some redundant asserts re: os.remove doing its job (it already throws if it can't find a file or fails to remove it)\r\n",
      "created_at" : "2017-08-27T20:32:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11099#issuecomment-325222936",
      "id" : 325222936,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11099",
      "updated_at" : "2017-08-27T20:33:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/325222936",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/5269298?v=4",
         "events_url" : "https://api.github.com/users/greenaddress/events{/privacy}",
         "followers_url" : "https://api.github.com/users/greenaddress/followers",
         "following_url" : "https://api.github.com/users/greenaddress/following{/other_user}",
         "gists_url" : "https://api.github.com/users/greenaddress/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/greenaddress",
         "id" : 5269298,
         "login" : "greenaddress",
         "organizations_url" : "https://api.github.com/users/greenaddress/orgs",
         "received_events_url" : "https://api.github.com/users/greenaddress/received_events",
         "repos_url" : "https://api.github.com/users/greenaddress/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/greenaddress/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/greenaddress/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/greenaddress"
      }
   },
   {
      "body" : "utACK d0bfa6a11a66a8c08fe2630472546d0e60175fe3\r\n\r\n@jonasschnelli Have your concerns been addressed?",
      "created_at" : "2017-08-28T06:13:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11099#issuecomment-325268658",
      "id" : 325268658,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11099",
      "updated_at" : "2017-08-28T06:14:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/325268658",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   }
]
