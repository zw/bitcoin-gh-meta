{
   "assignee" : null,
   "assignees" : [],
   "author_association" : "NONE",
   "body" : "Bitcoin Core (currently v13.2) randomly crashes with IO error accessing some files if the data folder is stored on ReFS partition (mirrored Storage Space on Windows 10)\r\n`IO error: R:\\Bitcoin\\chainstate\\3176876.ldb: ÃÂÃÂÃÂ¾ÃÂÃÂµÃÂÃÂ ÃÂ½ÃÂµ ÃÂ¼ÃÂ¾ÃÂ¶ÃÂµÃÂ ÃÂ¿ÃÂ¾ÃÂ»ÃÂÃÂÃÂ¸ÃÂÃÂ ÃÂ´ÃÂ¾ÃÂÃÂÃÂÃÂ¿ ÃÂº ÃÂÃÂ°ÃÂ¹ÃÂ»ÃÂ, ÃÂÃÂ°ÃÂº ÃÂºÃÂ°ÃÂº ÃÂÃÂÃÂ¾ÃÂ ÃÂÃÂ°ÃÂ¹ÃÂ» ÃÂ·ÃÂ°ÃÂ½ÃÂÃÂ ÃÂ´ÃÂÃÂÃÂ³ÃÂ¸ÃÂ¼ ÃÂ¿ÃÂÃÂ¾ÃÂÃÂµÃÂÃÂÃÂ¾ÃÂ¼.`\r\ntranstation: The process cannot get access to the file because it is open by another process.\r\n\r\nProbably, because ReFS does checksum calculations on all files when accessing them, probably interfering with Bitcoin Core... Maybe the fact that ReFS is a \"Copy on Write\" filesystem may have an effect too...\r\n\r\n### Can you reliably reproduce the issue?\r\nThe issue is random probably due to a race condition between Bitcoin Core and ReFS housekeeping process when it creates new files in the data folder. I've just moved the data folder to ReFS partition now, and trying to sync the blockchain for the last 4 weeks it crashed twice already with the same kind of error in the log...\r\n\r\n### Machine specs:\r\n- OS: Windows 10 1607 x64\r\n- CPU: Core i5 760\r\n- RAM: 8GB\r\n- Disk size: 2TB\r\n- Disk Type (HD/SDD): Microsoft Storage Space in 2-way mirror with ReFS filesystem on it.\r\n\r\nPS: I'm totally aware that this is a very low-priority issue, because ReFS is not used by many people yet, and probably will not be used very much in the near future...",
   "closed_at" : "2018-03-06T22:20:41Z",
   "closed_by" : {
      "avatar_url" : "https://avatars2.githubusercontent.com/u/863730?v=4",
      "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
      "followers_url" : "https://api.github.com/users/fanquake/followers",
      "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
      "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/fanquake",
      "id" : 863730,
      "login" : "fanquake",
      "node_id" : "MDQ6VXNlcjg2MzczMA==",
      "organizations_url" : "https://api.github.com/users/fanquake/orgs",
      "received_events_url" : "https://api.github.com/users/fanquake/received_events",
      "repos_url" : "https://api.github.com/users/fanquake/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/fanquake"
   },
   "comments" : 7,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9563/comments",
   "created_at" : "2017-01-15T13:41:53Z",
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9563/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/issues/9563",
   "id" : 200869447,
   "labels" : [
      {
         "color" : "884400",
         "default" : false,
         "id" : 234877,
         "name" : "Windows",
         "node_id" : "MDU6TGFiZWwyMzQ4Nzc=",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/Windows"
      }
   ],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9563/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "node_id" : "MDU6SXNzdWUyMDA4Njk0NDc=",
   "number" : 9563,
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "closed",
   "title" : "Random IO errors if data folder is stored on Microsoft ReFS partition",
   "updated_at" : "2018-03-06T22:20:41Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9563",
   "user" : {
      "avatar_url" : "https://avatars3.githubusercontent.com/u/1861169?v=4",
      "events_url" : "https://api.github.com/users/eliotcougar/events{/privacy}",
      "followers_url" : "https://api.github.com/users/eliotcougar/followers",
      "following_url" : "https://api.github.com/users/eliotcougar/following{/other_user}",
      "gists_url" : "https://api.github.com/users/eliotcougar/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/eliotcougar",
      "id" : 1861169,
      "login" : "eliotcougar",
      "node_id" : "MDQ6VXNlcjE4NjExNjk=",
      "organizations_url" : "https://api.github.com/users/eliotcougar/orgs",
      "received_events_url" : "https://api.github.com/users/eliotcougar/received_events",
      "repos_url" : "https://api.github.com/users/eliotcougar/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/eliotcougar/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/eliotcougar/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/eliotcougar"
   }
}
