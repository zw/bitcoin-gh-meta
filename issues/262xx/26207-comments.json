[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26207#discussion_r984502255"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26207"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/984502255"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "This error and the previous ones could be covered in the functional test",
      "commit_id" : "e462602152f3f9a92b2946827b931fa8e5459acf",
      "created_at" : "2022-09-30T11:40:43Z",
      "diff_hunk" : "@@ -608,7 +608,20 @@ static bool rest_mempool(const std::any& context, HTTPRequest* req, const std::s\n     case RESTResponseFormat::JSON: {\n         std::string str_json;\n         if (param == \"contents\") {\n-            str_json = MempoolToJSON(*mempool, true).write() + \"\\n\";\n+            std::string raw_verbose = req->GetQueryParameter(\"verbose\").value_or(\"true\");\n+            if (raw_verbose != \"true\" && raw_verbose != \"false\") {\n+                return RESTERR(req, HTTP_BAD_REQUEST, \"The \\\"verbose\\\" query parameter must be either \\\"true\\\" or \\\"false\\\".\");\n+            }\n+            std::string raw_mempool_sequence = req->GetQueryParameter(\"mempool_sequence\").value_or(\"false\");\n+            if (raw_mempool_sequence != \"true\" && raw_mempool_sequence != \"false\") {\n+                return RESTERR(req, HTTP_BAD_REQUEST, \"The \\\"mempool_sequence\\\" query parameter must be either \\\"true\\\" or \\\"false\\\".\");\n+            }\n+            bool verbose = raw_verbose == \"true\";\n+            bool mempool_sequence = raw_mempool_sequence == \"true\";\n+            if (verbose && mempool_sequence) {\n+                return RESTERR(req, HTTP_BAD_REQUEST, \"Verbose results cannot contain mempool sequence values. (hint: set \\\"verbose=false\\\")\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26207#discussion_r984502255",
      "id" : 984502255,
      "line" : 622,
      "node_id" : "PRRC_kwDOABII5846rk_v",
      "original_commit_id" : "e462602152f3f9a92b2946827b931fa8e5459acf",
      "original_line" : 622,
      "original_position" : 16,
      "original_start_line" : null,
      "path" : "src/rest.cpp",
      "position" : 16,
      "pull_request_review_id" : 1126689063,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26207",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/984502255/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-09-30T11:40:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/984502255",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/19480819?v=4",
         "events_url" : "https://api.github.com/users/brunoerg/events{/privacy}",
         "followers_url" : "https://api.github.com/users/brunoerg/followers",
         "following_url" : "https://api.github.com/users/brunoerg/following{/other_user}",
         "gists_url" : "https://api.github.com/users/brunoerg/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/brunoerg",
         "id" : 19480819,
         "login" : "brunoerg",
         "node_id" : "MDQ6VXNlcjE5NDgwODE5",
         "organizations_url" : "https://api.github.com/users/brunoerg/orgs",
         "received_events_url" : "https://api.github.com/users/brunoerg/received_events",
         "repos_url" : "https://api.github.com/users/brunoerg/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/brunoerg/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/brunoerg/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/brunoerg"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26207#discussion_r984594417"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26207"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/984594417"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "maybe use a `const` here?\r\n```suggestion\r\n            const std::string raw_verbose = req->GetQueryParameter(\"verbose\").value_or(\"true\");\r\n```",
      "commit_id" : "e462602152f3f9a92b2946827b931fa8e5459acf",
      "created_at" : "2022-09-30T13:29:42Z",
      "diff_hunk" : "@@ -608,7 +608,20 @@ static bool rest_mempool(const std::any& context, HTTPRequest* req, const std::s\n     case RESTResponseFormat::JSON: {\n         std::string str_json;\n         if (param == \"contents\") {\n-            str_json = MempoolToJSON(*mempool, true).write() + \"\\n\";\n+            std::string raw_verbose = req->GetQueryParameter(\"verbose\").value_or(\"true\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26207#discussion_r984594417",
      "id" : 984594417,
      "line" : 611,
      "node_id" : "PRRC_kwDOABII5846r7fx",
      "original_commit_id" : "e462602152f3f9a92b2946827b931fa8e5459acf",
      "original_line" : 611,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/rest.cpp",
      "position" : 5,
      "pull_request_review_id" : 1126825986,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26207",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/984594417/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-09-30T13:29:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/984594417",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/19480819?v=4",
         "events_url" : "https://api.github.com/users/brunoerg/events{/privacy}",
         "followers_url" : "https://api.github.com/users/brunoerg/followers",
         "following_url" : "https://api.github.com/users/brunoerg/following{/other_user}",
         "gists_url" : "https://api.github.com/users/brunoerg/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/brunoerg",
         "id" : 19480819,
         "login" : "brunoerg",
         "node_id" : "MDQ6VXNlcjE5NDgwODE5",
         "organizations_url" : "https://api.github.com/users/brunoerg/orgs",
         "received_events_url" : "https://api.github.com/users/brunoerg/received_events",
         "repos_url" : "https://api.github.com/users/brunoerg/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/brunoerg/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/brunoerg/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/brunoerg"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> You should update the doc (REST-interface.md) as well\r\n\r\n@brunoerg would it make sense to update that file after there has been a release with this patch? I think that might confuse users who see those options in the doc but are unable to use them in any release.",
      "created_at" : "2022-10-01T16:18:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26207#issuecomment-1264411660",
      "id" : 1264411660,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26207",
      "node_id" : "IC_kwDOABII585LXWQM",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1264411660/reactions"
      },
      "updated_at" : "2022-10-01T16:18:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1264411660",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/237213?v=4",
         "events_url" : "https://api.github.com/users/andrewtoth/events{/privacy}",
         "followers_url" : "https://api.github.com/users/andrewtoth/followers",
         "following_url" : "https://api.github.com/users/andrewtoth/following{/other_user}",
         "gists_url" : "https://api.github.com/users/andrewtoth/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/andrewtoth",
         "id" : 237213,
         "login" : "andrewtoth",
         "node_id" : "MDQ6VXNlcjIzNzIxMw==",
         "organizations_url" : "https://api.github.com/users/andrewtoth/orgs",
         "received_events_url" : "https://api.github.com/users/andrewtoth/received_events",
         "repos_url" : "https://api.github.com/users/andrewtoth/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/andrewtoth/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/andrewtoth/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/andrewtoth"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26207#discussion_r985693970"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26207"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/985693970"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "```suggestion\r\n`GET /rest/mempool/contents.json?verbose=<true|false>&mempool_sequence=<true|false>`\r\n```",
      "commit_id" : "fd4c6dcae7fed44495af3faa7211604b9046394a",
      "created_at" : "2022-10-03T11:50:18Z",
      "diff_hunk" : "@@ -121,11 +121,13 @@ Returns various information about the transaction mempool.\n Only supports JSON as output format.\n Refer to the `getmempoolinfo` RPC help for details.\n \n-`GET /rest/mempool/contents.json`\n+`GET /rest/mempool/contents.json?verbose=false`",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26207#discussion_r985693970",
      "id" : 985693970,
      "line" : 124,
      "node_id" : "PRRC_kwDOABII5846wH8S",
      "original_commit_id" : "fd4c6dcae7fed44495af3faa7211604b9046394a",
      "original_line" : 124,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "doc/REST-interface.md",
      "position" : 5,
      "pull_request_review_id" : 1128237903,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26207",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/985693970/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-10-03T13:37:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/985693970",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26207#discussion_r985697102"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26207"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/985697102"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "We already refer to the `getrawmempool` RPC, as long as these arguments mirror the RPC I think we can leave out this extra documentation. ",
      "commit_id" : "fd4c6dcae7fed44495af3faa7211604b9046394a",
      "created_at" : "2022-10-03T11:54:11Z",
      "diff_hunk" : "@@ -121,11 +121,13 @@ Returns various information about the transaction mempool.\n Only supports JSON as output format.\n Refer to the `getmempoolinfo` RPC help for details.\n \n-`GET /rest/mempool/contents.json`\n+`GET /rest/mempool/contents.json?verbose=false`\n \n Returns the transactions in the mempool.\n Only supports JSON as output format.\n-Refer to the `getrawmempool` RPC help for details.\n+Refer to the `getrawmempool` RPC help for details. Supports the `verbose` and\n+`mempool_sequence` arguments as query parameters. Defaults to setting\n+`verbose=true`.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26207#discussion_r985697102",
      "id" : 985697102,
      "line" : 130,
      "node_id" : "PRRC_kwDOABII5846wItO",
      "original_commit_id" : "fd4c6dcae7fed44495af3faa7211604b9046394a",
      "original_line" : 130,
      "original_position" : 12,
      "original_start_line" : 128,
      "path" : "doc/REST-interface.md",
      "position" : 12,
      "pull_request_review_id" : 1128237903,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26207",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/985697102/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 128,
      "start_side" : "RIGHT",
      "updated_at" : "2022-10-03T13:37:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/985697102",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26207#discussion_r985768162"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26207"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/985768162"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I think the most elegant solution here would be to introduce a `HTTPRequest::GetQueryParameter<bool>` specialization that converts to and returns a bool, or throws an err if the string can't be parsed. However, that would require some more fundamental changes to how we deal with errors (which unfortunately we return instead of throw) here. Flagging it here for follow-up, feel free to grab it if you're keen.",
      "commit_id" : "fd4c6dcae7fed44495af3faa7211604b9046394a",
      "created_at" : "2022-10-03T13:14:37Z",
      "diff_hunk" : "@@ -608,7 +608,20 @@ static bool rest_mempool(const std::any& context, HTTPRequest* req, const std::s\n     case RESTResponseFormat::JSON: {\n         std::string str_json;\n         if (param == \"contents\") {\n-            str_json = MempoolToJSON(*mempool, true).write() + \"\\n\";\n+            const std::string raw_verbose = req->GetQueryParameter(\"verbose\").value_or(\"true\");\n+            if (raw_verbose != \"true\" && raw_verbose != \"false\") {\n+                return RESTERR(req, HTTP_BAD_REQUEST, \"The \\\"verbose\\\" query parameter must be either \\\"true\\\" or \\\"false\\\".\");\n+            }\n+            const std::string raw_mempool_sequence = req->GetQueryParameter(\"mempool_sequence\").value_or(\"false\");\n+            if (raw_mempool_sequence != \"true\" && raw_mempool_sequence != \"false\") {\n+                return RESTERR(req, HTTP_BAD_REQUEST, \"The \\\"mempool_sequence\\\" query parameter must be either \\\"true\\\" or \\\"false\\\".\");\n+            }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26207#discussion_r985768162",
      "id" : 985768162,
      "line" : 618,
      "node_id" : "PRRC_kwDOABII5846waDi",
      "original_commit_id" : "fd4c6dcae7fed44495af3faa7211604b9046394a",
      "original_line" : 618,
      "original_position" : 12,
      "original_start_line" : 612,
      "path" : "src/rest.cpp",
      "position" : 12,
      "pull_request_review_id" : 1128237903,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26207",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/985768162/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 612,
      "start_side" : "RIGHT",
      "updated_at" : "2022-10-03T13:37:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/985768162",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26207#discussion_r985768729"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26207"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/985768729"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "{} list initialization is preferred (+ in other places):\r\n```suggestion\r\n            const bool verbose{raw_verbose == \"true\"};\r\n```",
      "commit_id" : "fd4c6dcae7fed44495af3faa7211604b9046394a",
      "created_at" : "2022-10-03T13:15:17Z",
      "diff_hunk" : "@@ -608,7 +608,20 @@ static bool rest_mempool(const std::any& context, HTTPRequest* req, const std::s\n     case RESTResponseFormat::JSON: {\n         std::string str_json;\n         if (param == \"contents\") {\n-            str_json = MempoolToJSON(*mempool, true).write() + \"\\n\";\n+            const std::string raw_verbose = req->GetQueryParameter(\"verbose\").value_or(\"true\");\n+            if (raw_verbose != \"true\" && raw_verbose != \"false\") {\n+                return RESTERR(req, HTTP_BAD_REQUEST, \"The \\\"verbose\\\" query parameter must be either \\\"true\\\" or \\\"false\\\".\");\n+            }\n+            const std::string raw_mempool_sequence = req->GetQueryParameter(\"mempool_sequence\").value_or(\"false\");\n+            if (raw_mempool_sequence != \"true\" && raw_mempool_sequence != \"false\") {\n+                return RESTERR(req, HTTP_BAD_REQUEST, \"The \\\"mempool_sequence\\\" query parameter must be either \\\"true\\\" or \\\"false\\\".\");\n+            }\n+            const bool verbose = raw_verbose == \"true\";",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26207#discussion_r985768729",
      "id" : 985768729,
      "line" : 619,
      "node_id" : "PRRC_kwDOABII5846waMZ",
      "original_commit_id" : "fd4c6dcae7fed44495af3faa7211604b9046394a",
      "original_line" : 619,
      "original_position" : 13,
      "original_start_line" : null,
      "path" : "src/rest.cpp",
      "position" : 13,
      "pull_request_review_id" : 1128237903,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26207",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/985768729/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-10-03T13:37:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/985768729",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26207#discussion_r985825295"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26207"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/985825295"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Strong concept ACK on introducing a `HTTPRequest::GetQueryParameter<bool>`, it would be more elegant than using string (\"true\"/\"false\"), but I know it would require a lot of more work and maybe could be done in a follow-up. ",
      "commit_id" : "fd4c6dcae7fed44495af3faa7211604b9046394a",
      "created_at" : "2022-10-03T14:07:21Z",
      "diff_hunk" : "@@ -608,7 +608,20 @@ static bool rest_mempool(const std::any& context, HTTPRequest* req, const std::s\n     case RESTResponseFormat::JSON: {\n         std::string str_json;\n         if (param == \"contents\") {\n-            str_json = MempoolToJSON(*mempool, true).write() + \"\\n\";\n+            const std::string raw_verbose = req->GetQueryParameter(\"verbose\").value_or(\"true\");\n+            if (raw_verbose != \"true\" && raw_verbose != \"false\") {\n+                return RESTERR(req, HTTP_BAD_REQUEST, \"The \\\"verbose\\\" query parameter must be either \\\"true\\\" or \\\"false\\\".\");\n+            }\n+            const std::string raw_mempool_sequence = req->GetQueryParameter(\"mempool_sequence\").value_or(\"false\");\n+            if (raw_mempool_sequence != \"true\" && raw_mempool_sequence != \"false\") {\n+                return RESTERR(req, HTTP_BAD_REQUEST, \"The \\\"mempool_sequence\\\" query parameter must be either \\\"true\\\" or \\\"false\\\".\");\n+            }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26207#discussion_r985825295",
      "id" : 985825295,
      "in_reply_to_id" : 985768162,
      "line" : 618,
      "node_id" : "PRRC_kwDOABII5846woAP",
      "original_commit_id" : "fd4c6dcae7fed44495af3faa7211604b9046394a",
      "original_line" : 618,
      "original_position" : 12,
      "original_start_line" : 612,
      "path" : "src/rest.cpp",
      "position" : 12,
      "pull_request_review_id" : 1128457292,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26207",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/985825295/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 612,
      "start_side" : "RIGHT",
      "updated_at" : "2022-10-03T14:07:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/985825295",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/19480819?v=4",
         "events_url" : "https://api.github.com/users/brunoerg/events{/privacy}",
         "followers_url" : "https://api.github.com/users/brunoerg/followers",
         "following_url" : "https://api.github.com/users/brunoerg/following{/other_user}",
         "gists_url" : "https://api.github.com/users/brunoerg/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/brunoerg",
         "id" : 19480819,
         "login" : "brunoerg",
         "node_id" : "MDQ6VXNlcjE5NDgwODE5",
         "organizations_url" : "https://api.github.com/users/brunoerg/orgs",
         "received_events_url" : "https://api.github.com/users/brunoerg/received_events",
         "repos_url" : "https://api.github.com/users/brunoerg/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/brunoerg/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/brunoerg/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/brunoerg"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26207#discussion_r986403999"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26207"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/986403999"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I can definitely do that in a follow-up PR after this is merged.",
      "commit_id" : "c35c7d091b5c3af27a97095b6d4272c0b82d22e6",
      "created_at" : "2022-10-04T03:34:25Z",
      "diff_hunk" : "@@ -608,7 +608,20 @@ static bool rest_mempool(const std::any& context, HTTPRequest* req, const std::s\n     case RESTResponseFormat::JSON: {\n         std::string str_json;\n         if (param == \"contents\") {\n-            str_json = MempoolToJSON(*mempool, true).write() + \"\\n\";\n+            const std::string raw_verbose = req->GetQueryParameter(\"verbose\").value_or(\"true\");\n+            if (raw_verbose != \"true\" && raw_verbose != \"false\") {\n+                return RESTERR(req, HTTP_BAD_REQUEST, \"The \\\"verbose\\\" query parameter must be either \\\"true\\\" or \\\"false\\\".\");\n+            }\n+            const std::string raw_mempool_sequence = req->GetQueryParameter(\"mempool_sequence\").value_or(\"false\");\n+            if (raw_mempool_sequence != \"true\" && raw_mempool_sequence != \"false\") {\n+                return RESTERR(req, HTTP_BAD_REQUEST, \"The \\\"mempool_sequence\\\" query parameter must be either \\\"true\\\" or \\\"false\\\".\");\n+            }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26207#discussion_r986403999",
      "id" : 986403999,
      "in_reply_to_id" : 985768162,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5846y1Sf",
      "original_commit_id" : "fd4c6dcae7fed44495af3faa7211604b9046394a",
      "original_line" : 618,
      "original_position" : 12,
      "original_start_line" : 612,
      "path" : "src/rest.cpp",
      "position" : null,
      "pull_request_review_id" : 1129258510,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26207",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/986403999/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "updated_at" : "2022-10-04T03:34:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/986403999",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/237213?v=4",
         "events_url" : "https://api.github.com/users/andrewtoth/events{/privacy}",
         "followers_url" : "https://api.github.com/users/andrewtoth/followers",
         "following_url" : "https://api.github.com/users/andrewtoth/following{/other_user}",
         "gists_url" : "https://api.github.com/users/andrewtoth/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/andrewtoth",
         "id" : 237213,
         "login" : "andrewtoth",
         "node_id" : "MDQ6VXNlcjIzNzIxMw==",
         "organizations_url" : "https://api.github.com/users/andrewtoth/orgs",
         "received_events_url" : "https://api.github.com/users/andrewtoth/received_events",
         "repos_url" : "https://api.github.com/users/andrewtoth/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/andrewtoth/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/andrewtoth/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/andrewtoth"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> I'd suggest labeling this pull with the 25.0 milestone\r\n\r\n@stickies-v I don't think I have permissions to add labels. Otherwise I have addressed all feedback from yourself and @brunoerg .",
      "created_at" : "2022-10-04T03:35:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26207#issuecomment-1266353029",
      "id" : 1266353029,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26207",
      "node_id" : "IC_kwDOABII585LewOF",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1266353029/reactions"
      },
      "updated_at" : "2022-10-04T03:35:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1266353029",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/237213?v=4",
         "events_url" : "https://api.github.com/users/andrewtoth/events{/privacy}",
         "followers_url" : "https://api.github.com/users/andrewtoth/followers",
         "following_url" : "https://api.github.com/users/andrewtoth/following{/other_user}",
         "gists_url" : "https://api.github.com/users/andrewtoth/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/andrewtoth",
         "id" : 237213,
         "login" : "andrewtoth",
         "node_id" : "MDQ6VXNlcjIzNzIxMw==",
         "organizations_url" : "https://api.github.com/users/andrewtoth/orgs",
         "received_events_url" : "https://api.github.com/users/andrewtoth/received_events",
         "repos_url" : "https://api.github.com/users/andrewtoth/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/andrewtoth/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/andrewtoth/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/andrewtoth"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26207#discussion_r986724566"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26207"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/986724566"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "trailing whitespace is failing the linter:\r\n```suggestion\r\nRefer to the `getrawmempool` RPC help for details. Defaults to setting\r\n```",
      "commit_id" : "c35c7d091b5c3af27a97095b6d4272c0b82d22e6",
      "created_at" : "2022-10-04T10:59:04Z",
      "diff_hunk" : "@@ -123,11 +123,15 @@ Returns various information about the transaction mempool.\n Only supports JSON as output format.\n Refer to the `getmempoolinfo` RPC help for details.\n \n-`GET /rest/mempool/contents.json`\n+`GET /rest/mempool/contents.json?verbose=<true|false>&mempool_sequence=<true|false>`\n \n Returns the transactions in the mempool.\n Only supports JSON as output format.\n-Refer to the `getrawmempool` RPC help for details.\n+Refer to the `getrawmempool` RPC help for details. Defaults to setting ",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26207#discussion_r986724566",
      "id" : 986724566,
      "line" : 130,
      "node_id" : "PRRC_kwDOABII58460DjW",
      "original_commit_id" : "c35c7d091b5c3af27a97095b6d4272c0b82d22e6",
      "original_line" : 130,
      "original_position" : 10,
      "original_start_line" : null,
      "path" : "doc/REST-interface.md",
      "position" : 10,
      "pull_request_review_id" : 1129711009,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26207",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/986724566/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-10-04T11:20:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/986724566",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26207#discussion_r986725628"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26207"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/986725628"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "```suggestion\r\n`verbose=true` and `mempool_sequence=false`.\r\n```",
      "commit_id" : "c35c7d091b5c3af27a97095b6d4272c0b82d22e6",
      "created_at" : "2022-10-04T11:00:22Z",
      "diff_hunk" : "@@ -123,11 +123,15 @@ Returns various information about the transaction mempool.\n Only supports JSON as output format.\n Refer to the `getmempoolinfo` RPC help for details.\n \n-`GET /rest/mempool/contents.json`\n+`GET /rest/mempool/contents.json?verbose=<true|false>&mempool_sequence=<true|false>`\n \n Returns the transactions in the mempool.\n Only supports JSON as output format.\n-Refer to the `getrawmempool` RPC help for details.\n+Refer to the `getrawmempool` RPC help for details. Defaults to setting \n+`verbose=true`.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26207#discussion_r986725628",
      "id" : 986725628,
      "line" : 131,
      "node_id" : "PRRC_kwDOABII58460Dz8",
      "original_commit_id" : "c35c7d091b5c3af27a97095b6d4272c0b82d22e6",
      "original_line" : 131,
      "original_position" : 11,
      "original_start_line" : null,
      "path" : "doc/REST-interface.md",
      "position" : 11,
      "pull_request_review_id" : 1129711009,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26207",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/986725628/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-10-04T11:20:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/986725628",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26207#discussion_r986726752"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26207"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/986726752"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Actually, since `false` is default, perhaps better to set that as the first option?\r\n```suggestion\r\n`GET /rest/mempool/contents.json?verbose=<true|false>&mempool_sequence=<false|true>`\r\n```",
      "commit_id" : "c35c7d091b5c3af27a97095b6d4272c0b82d22e6",
      "created_at" : "2022-10-04T11:01:49Z",
      "diff_hunk" : "@@ -123,11 +123,15 @@ Returns various information about the transaction mempool.\n Only supports JSON as output format.\n Refer to the `getmempoolinfo` RPC help for details.\n \n-`GET /rest/mempool/contents.json`\n+`GET /rest/mempool/contents.json?verbose=<true|false>&mempool_sequence=<true|false>`",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26207#discussion_r986726752",
      "id" : 986726752,
      "line" : 126,
      "node_id" : "PRRC_kwDOABII58460EFg",
      "original_commit_id" : "c35c7d091b5c3af27a97095b6d4272c0b82d22e6",
      "original_line" : 126,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "doc/REST-interface.md",
      "position" : 5,
      "pull_request_review_id" : 1129711009,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26207",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/986726752/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-10-04T11:20:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/986726752",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69010457?v=4",
         "events_url" : "https://api.github.com/users/stickies-v/events{/privacy}",
         "followers_url" : "https://api.github.com/users/stickies-v/followers",
         "following_url" : "https://api.github.com/users/stickies-v/following{/other_user}",
         "gists_url" : "https://api.github.com/users/stickies-v/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/stickies-v",
         "id" : 69010457,
         "login" : "stickies-v",
         "node_id" : "MDQ6VXNlcjY5MDEwNDU3",
         "organizations_url" : "https://api.github.com/users/stickies-v/orgs",
         "received_events_url" : "https://api.github.com/users/stickies-v/received_events",
         "repos_url" : "https://api.github.com/users/stickies-v/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/stickies-v/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/stickies-v/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/stickies-v"
      }
   }
]
