[
   {
      "author_association" : "MEMBER",
      "body" : "There is a check, but for some reason it doesn't work\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/fd46c4c0018c41d36cd892ccb47485b572d65837/build-aux/m4/bitcoin_qt.m4#L249-L267",
      "created_at" : "2019-03-28T20:43:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/15688#issuecomment-477763400",
      "id" : 477763400,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15688",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ3Nzc2MzQwMA==",
      "updated_at" : "2019-03-28T20:43:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/477763400",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Note to self: check checks before making a PR...",
      "created_at" : "2019-03-29T07:45:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/15688#issuecomment-477901200",
      "id" : 477901200,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15688",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ3NzkwMTIwMA==",
      "updated_at" : "2019-03-29T07:45:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/477901200",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Yes @MarcoFalke , I've seen the check, but somehow that part of the code is never used (it is used only when there is no pkg-config, and this is forbidden on linux systems). On top of that, in the code there is no evaluation of the QT libraries version when pkg-config is active (again, pkg-config is always active on linux).\r\n\r\nI tested it with two systems (Debian Jessie and Debian Stretch), with depends and without, with pkgconfig and without (by embedding in the code not to use pkgconfig, like we do with `$host==*mingw*`) and adding `--with-gui=qt5` or not. Here are the results:\r\n\r\n| Environment | Pkgconfig | Depends (5.9.7) | --with-gui= | Result |\r\n| -- | -- | -- | -- | -- |\r\n| Jessie (5.3.2) | Yes | Yes |  | Yes (1) |\r\n| Jessie (5.3.2) | Yes | Yes | qt5 | Yes (3) |\r\n| Jessie (5.3.2) | Yes | No |  | Yes (1) |\r\n| Jessie (5.3.2) | Yes | No | qt5 | Yes (1) |\r\n| Jessie (5.3.2) | No | Yes |  | No (2) |\r\n| Jessie (5.3.2) | No | Yes | qt5 | Error (4) |\r\n| Jessie (5.3.2) | No | No |  | No (2) |\r\n| Jessie (5.3.2) | No | No | qt5 | Error (4) |\r\n| Stretch (5.7.1) | Yes | Yes |  | Yes (1) |\r\n| Stretch (5.7.1) | Yes | Yes | qt5 | Yes (3) |\r\n| Stretch (5.7.1) | Yes | No |  | Yes (1) |\r\n| Stretch (5.7.1) | Yes | No | qt5 | Yes (1) |\r\n| Stretch (5.7.1) | No | Yes |  | No (2) |\r\n| Stretch (5.7.1) | No | Yes | qt5 | Error (4) |\r\n| Stretch (5.7.1) | No | No |  | No (2) |\r\n| Stretch (5.7.1) | No | No | qt5 | Error (4) |\r\n\r\nResults:\r\n\r\n- Yes (1):\r\n```\r\nchecking for QT5... yes\r\nchecking for QT_TEST... yes\r\nchecking for QT_DBUS... yes\r\nchecking for static Qt... no\r\nchecking whether -fPIE can be used with this Qt config... no\r\nchecking for moc-qt5... no\r\nchecking for moc... /usr/lib/x86_64-linux-gnu/qt5/bin/moc\r\nchecking for uic-qt5... no\r\nchecking for uic... /usr/lib/x86_64-linux-gnu/qt5/bin/uic\r\nchecking for rcc-qt5... no\r\nchecking for rcc... /usr/lib/x86_64-linux-gnu/qt5/bin/rcc\r\nchecking for lrelease-qt5... no\r\nchecking for lrelease... /usr/lib/x86_64-linux-gnu/qt5/bin/lrelease\r\nchecking for lupdate-qt5... no\r\nchecking for lupdate... /usr/lib/x86_64-linux-gnu/qt5/bin/lupdate\r\nchecking whether to build Bitcoin Core GUI... yes (Qt5)\r\nchecking whether to build test_bitcoin-qt... yes\r\nconfig.status: creating share/qt/Info.plist\r\nwith gui / qt = yes\r\n```\r\n- No (2):\r\nThis happens every time there is pkg-config=no (hardcoded by me) and there is no option `--with-gui=qt5`.\r\n```\r\nchecking QtPlugin usability... no\r\nconfigure: WARNING: QtCore headers missing; bitcoin-qt frontend will not be built\r\nchecking QtPlugin presence... no\r\nchecking for QtPlugin... no\r\nchecking whether to build Bitcoin Core GUI... no (Qt5)\r\nwith gui / qt = no\r\n```\r\n- Yes (3):\r\nThis happens every time pkg-config is activated (it's always pre-activated on linux), and depends is on and there is the option `--with-gui=qt5`.\r\n```\r\nchecking for QT5... yes\r\nchecking for QT_TEST... yes\r\nchecking for QT_DBUS... yes\r\nchecking for static Qt... yes\r\nchecking for QTFONTDATABASE... yes\r\nchecking for QTEVENTDISPATCHER... yes\r\nchecking for QTTHEME... yes\r\nchecking for QTDEVICEDISCOVERY... yes\r\nchecking for QTACCESSIBILITY... yes\r\nchecking for QTFB... yes\r\nchecking for QTXCBQPA... yes\r\nchecking for static Qt plugins: -lqminimal... yes\r\nchecking for static Qt plugins: -lqxcb -lxcb-static... yes\r\nchecking whether -fPIE can be used with this Qt config... yes\r\nchecking for moc-qt5... no\r\nchecking for uic-qt5... no\r\nchecking for rcc-qt5... no\r\nchecking for lrelease-qt5... no\r\nchecking for lupdate-qt5... no\r\nchecking whether to build Bitcoin Core GUI... yes (Qt5)\r\nchecking whether to build test_bitcoin-qt... yes\r\nwith gui / qt = yes\r\n```\r\n\r\n- Error (4):\r\nThis happens every time I use the option `--with-gui=qt5` with pkg-config not active (it is always active for linux systems):\r\n```\r\nchecking QtPlugin usability... no\r\nchecking QtPlugin presence... no\r\nchecking for QtPlugin... no\r\nconfigure: error: QtCore headers missing\r\n```\r\n",
      "created_at" : "2019-03-29T21:12:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/15688#issuecomment-478151376",
      "id" : 478151376,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15688",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ3ODE1MTM3Ng==",
      "updated_at" : "2019-03-29T21:16:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/478151376",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/697159?v=4",
         "events_url" : "https://api.github.com/users/lucayepa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/lucayepa/followers",
         "following_url" : "https://api.github.com/users/lucayepa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/lucayepa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/lucayepa",
         "id" : 697159,
         "login" : "lucayepa",
         "node_id" : "MDQ6VXNlcjY5NzE1OQ==",
         "organizations_url" : "https://api.github.com/users/lucayepa/orgs",
         "received_events_url" : "https://api.github.com/users/lucayepa/received_events",
         "repos_url" : "https://api.github.com/users/lucayepa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/lucayepa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/lucayepa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/lucayepa"
      }
   }
]
