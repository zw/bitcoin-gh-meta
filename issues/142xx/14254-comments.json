[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->Reviewers, this pull request conflicts with the following ones:\n\n* #14252 (build: Run functional tests and benchmarks under the undefined behaviour sanitizer (UBSan) by practicalswift)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2018-09-18T13:54:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14254#issuecomment-422402520",
      "id" : 422402520,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14254",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQyMjQwMjUyMA==",
      "updated_at" : "2018-09-27T02:52:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/422402520",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "On Travis we're getting some really wild pointers :-)\r\n\r\nWhen running `test_bitcoin`:\r\n\r\n```\r\nRunning tests: addrman_tests from test/addrman_tests.cpp\r\nRunning tests: arith_uint256_tests from test/arith_uint256_tests.cpp\r\n=================================================================\r\n==26769==ERROR: AddressSanitizer: attempting free on address which was not malloc()-ed: 0x564a214c2610 in thread T0\r\n    #0 0x564a1d7dbf58  (/home/travis/build/bitcoin/bitcoin/build/bitcoin-x86_64-unknown-linux-gnu/src/test/test_bitcoin+0x3bbf58)\r\n    #1 0x564a1d620746  (/home/travis/build/bitcoin/bitcoin/build/bitcoin-x86_64-unknown-linux-gnu/src/test/test_bitcoin+0x200746)\r\n    #2 0x564a1f0f728c  (/home/travis/build/bitcoin/bitcoin/build/bitcoin-x86_64-unknown-linux-gnu/src/test/test_bitcoin+0x1cd728c)\r\n    #3 0x7fc74d810b27  (/lib/x86_64-linux-gnu/libc.so.6+0x21b27)\r\n    #4 0x564a1d6e2d59  (/home/travis/build/bitcoin/bitcoin/build/bitcoin-x86_64-unknown-linux-gnu/src/test/test_bitcoin+0x2c2d59)\r\nAddress 0x564a214c2610 is a wild pointer.\r\nSUMMARY: AddressSanitizer: bad-free (/home/travis/build/bitcoin/bitcoin/build/bitcoin-x86_64-unknown-linux-gnu/src/test/test_bitcoin+0x3bbf58)\r\n==26769==ABORTING\r\n```\r\n\r\nWhen running `test_bitcoin-qt`:\r\n\r\n```\r\n==26812==ERROR: AddressSanitizer: attempting free on address which was not malloc()-ed: 0x56336d106ea0 in thread T0\r\n    #0 0x56336986e0a8  (/home/travis/build/bitcoin/bitcoin/build/bitcoin-x86_64-unknown-linux-gnu/src/qt/test/test_bitcoin-qt+0x3040a8)\r\n    #1 0x563369726298  (/home/travis/build/bitcoin/bitcoin/build/bitcoin-x86_64-unknown-linux-gnu/src/qt/test/test_bitcoin-qt+0x1bc298)\r\n    #2 0x56336a8912dc  (/home/travis/build/bitcoin/bitcoin/build/bitcoin-x86_64-unknown-linux-gnu/src/qt/test/test_bitcoin-qt+0x13272dc)\r\n    #3 0x7f8c9e921b27  (/lib/x86_64-linux-gnu/libc.so.6+0x21b27)\r\n    #4 0x563369774ea9  (/home/travis/build/bitcoin/bitcoin/build/bitcoin-x86_64-unknown-linux-gnu/src/qt/test/test_bitcoin-qt+0x20aea9)\r\nAddress 0x56336d106ea0 is a wild pointer.\r\nSUMMARY: AddressSanitizer: bad-free (/home/travis/build/bitcoin/bitcoin/build/bitcoin-x86_64-unknown-linux-gnu/src/qt/test/test_bitcoin-qt+0x3040a8)\r\n==26812==ABORTING\r\n```\r\n\r\nSee [Travis output](https://travis-ci.org/bitcoin/bitcoin/jobs/430046285#L3745).\r\n\r\nI can't reproduce locally. I'll investigate!",
      "created_at" : "2018-09-18T14:15:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14254#issuecomment-422410706",
      "id" : 422410706,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14254",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQyMjQxMDcwNg==",
      "updated_at" : "2018-09-18T14:15:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/422410706",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14254#discussion_r218642112"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14254"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/218642112"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I think this environment variable can be moved to [.travis.yml](/bitcoin/bitcoin/tree/master/.travis.yml)",
      "commit_id" : "a2563be34efc56770c647aae32770aa6e3faf18a",
      "created_at" : "2018-09-19T01:15:13Z",
      "diff_hunk" : "@@ -7,7 +7,8 @@\n export LC_ALL=C.UTF-8\n \n travis_retry docker pull \"$DOCKER_NAME_TAG\"\n-env | grep -E '^(CCACHE_|WINEDEBUG|LC_ALL|BOOST_TEST_RANDOM|CONFIG_SHELL)' | tee /tmp/env\n+export ASAN_OPTIONS=\"check_initialization_order=1\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14254#discussion_r218642112",
      "id" : 218642112,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIxODY0MjExMg==",
      "original_commit_id" : "a2563be34efc56770c647aae32770aa6e3faf18a",
      "original_position" : 5,
      "path" : ".travis/test_04_install.sh",
      "position" : 5,
      "pull_request_review_id" : 156626124,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14254",
      "updated_at" : "2018-09-19T01:44:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/218642112",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/11154118?v=4",
         "events_url" : "https://api.github.com/users/ken2812221/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ken2812221/followers",
         "following_url" : "https://api.github.com/users/ken2812221/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ken2812221/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ken2812221",
         "id" : 11154118,
         "login" : "ken2812221",
         "node_id" : "MDQ6VXNlcjExMTU0MTE4",
         "organizations_url" : "https://api.github.com/users/ken2812221/orgs",
         "received_events_url" : "https://api.github.com/users/ken2812221/received_events",
         "repos_url" : "https://api.github.com/users/ken2812221/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ken2812221/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ken2812221/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ken2812221"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "On Travis we're getting some really wild pointers :-)\r\n\r\nWhen running `test_bitcoin`:\r\n\r\n```\r\n==26852==ERROR: AddressSanitizer: attempting free on address which was not malloc()-ed: 0x55f1c0b64610 in thread T0\r\n    #0 0x55f1bd627f58 in operator delete(void*) (/home/travis/build/practicalswift/bitcoin/build/bitcoin-x86_64-unknown-linux-gnu/src/test/test_bitcoin+0x3bbf58)\r\n    #1 0x55f1bd46c746 in __gnu_cxx::new_allocator<char>::deallocate(char*, unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.3.0/../../../../include/c++/7.3.0/ext/new_allocator.h:125:2\r\n    #2 0x55f1bd46c746 in std::allocator_traits<std::allocator<char> >::deallocate(std::allocator<char>&, char*, unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.3.0/../../../../include/c++/7.3.0/bits/alloc_traits.h:462\r\n    #3 0x55f1bd46c746 in std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >::_M_destroy(unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.3.0/../../../../include/c++/7.3.0/bits/basic_string.h:226\r\n    #4 0x55f1bd46c746 in std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >::_M_dispose() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.3.0/../../../../include/c++/7.3.0/bits/basic_string.h:221\r\n    #5 0x55f1bd46c746 in std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >::~basic_string() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.3.0/../../../../include/c++/7.3.0/bits/basic_string.h:647\r\n    #6 0x55f1bd46c746 in boost::unit_test::make_test_case(boost::function<void ()> const&, boost::unit_test::basic_cstring<char const>, boost::unit_test::basic_cstring<char const>, unsigned long) /usr/include/boost/test/tree/test_unit.hpp:249\r\n    #7 0x55f1bd46c746 in __cxx_global_var_init.86 /home/travis/build/practicalswift/bitcoin/build/bitcoin-x86_64-unknown-linux-gnu/src/test/arith_uint256_tests.cpp:223\r\n    #8 0x55f1bd46c746 in _GLOBAL__sub_I_arith_uint256_tests.cpp /home/travis/build/practicalswift/bitcoin/build/bitcoin-x86_64-unknown-linux-gnu/src/test/arith_uint256_tests.cpp\r\n    #9 0x55f1bef4328c in __libc_csu_init (/home/travis/build/practicalswift/bitcoin/build/bitcoin-x86_64-unknown-linux-gnu/src/test/test_bitcoin+0x1cd728c)\r\n    #10 0x7fa1f83ecb27 in __libc_start_main (/lib/x86_64-linux-gnu/libc.so.6+0x21b27)\r\n    #11 0x55f1bd52ed59 in _start (/home/travis/build/practicalswift/bitcoin/build/bitcoin-x86_64-unknown-linux-gnu/src/test/test_bitcoin+0x2c2d59)\r\nAddress 0x55f1c0b64610 is a wild pointer.\r\nSUMMARY: AddressSanitizer: bad-free (/home/travis/build/practicalswift/bitcoin/build/bitcoin-x86_64-unknown-linux-gnu/src/test/test_bitcoin+0x3bbf58) in operator delete(void*)\r\n```\r\n\r\nWhen running `test_bitcoin-qt`:\r\n\r\n```\r\n==26896==ERROR: AddressSanitizer: attempting free on address which was not malloc()-ed: 0x55e2a29c5ea0 in thread T0\r\n    #0 0x55e29fdfd0a8 in operator delete(void*) (/home/travis/build/practicalswift/bitcoin/build/bitcoin-x86_64-unknown-linux-gnu/src/qt/test/test_bitcoin-qt+0x3040a8)\r\n    #1 0x55e29fcb5298 in __gnu_cxx::new_allocator<char>::deallocate(char*, unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.3.0/../../../../include/c++/7.3.0/ext/new_allocator.h:125:2\r\n    #2 0x55e29fcb5298 in std::allocator_traits<std::allocator<char> >::deallocate(std::allocator<char>&, char*, unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.3.0/../../../../include/c++/7.3.0/bits/alloc_traits.h:462\r\n    #3 0x55e29fcb5298 in std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >::_M_destroy(unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/7.3.0/../../../../include/c++/7.3.0/bits/basic_string.h:226\r\n    #4 0x55e29fcb5298 in std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >::_M_dispose() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.3.0/../../../../include/c++/7.3.0/bits/basic_string.h:221\r\n    #5 0x55e29fcb5298 in std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >::~basic_string() /usr/bin/../lib/gcc/x86_64-linux-gnu/7.3.0/../../../../include/c++/7.3.0/bits/basic_string.h:647\r\n    #6 0x55e29fcb5298 in __cxx_global_var_init.98 /home/travis/build/practicalswift/bitcoin/build/bitcoin-x86_64-unknown-linux-gnu/src/rpc/blockchain.cpp:2197\r\n    #7 0x55e29fcb5298 in _GLOBAL__sub_I_blockchain.cpp /home/travis/build/practicalswift/bitcoin/build/bitcoin-x86_64-unknown-linux-gnu/src/rpc/blockchain.cpp\r\n    #8 0x55e2a0e202dc in __libc_csu_init (/home/travis/build/practicalswift/bitcoin/build/bitcoin-x86_64-unknown-linux-gnu/src/qt/test/test_bitcoin-qt+0x13272dc)\r\n    #9 0x7f845ce17b27 in __libc_start_main (/lib/x86_64-linux-gnu/libc.so.6+0x21b27)\r\n    #10 0x55e29fd03ea9 in _start (/home/travis/build/practicalswift/bitcoin/build/bitcoin-x86_64-unknown-linux-gnu/src/qt/test/test_bitcoin-qt+0x20aea9)\r\nAddress 0x55e2a29c5ea0 is a wild pointer.\r\nSUMMARY: AddressSanitizer: bad-free (/home/travis/build/practicalswift/bitcoin/build/bitcoin-x86_64-unknown-linux-gnu/src/qt/test/test_bitcoin-qt+0x3040a8) in operator delete(void*)\r\n```\r\n\r\nI can't reproduce locally. I'll investigate!",
      "created_at" : "2018-09-19T14:34:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14254#issuecomment-422827654",
      "id" : 422827654,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14254",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQyMjgyNzY1NA==",
      "updated_at" : "2018-09-19T14:35:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/422827654",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   }
]
