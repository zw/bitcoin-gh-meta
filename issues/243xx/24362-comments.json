[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "For privacy reasons I might want to have P2PKH change if sending to P2PKH recipient.",
      "created_at" : "2022-02-16T22:10:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24362#issuecomment-1042359326",
      "id" : 1042359326,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24362",
      "node_id" : "IC_kwDOABII584-ISQe",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1042359326/reactions"
      },
      "updated_at" : "2022-02-16T22:10:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1042359326",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4500994?v=4",
         "events_url" : "https://api.github.com/users/kristapsk/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kristapsk/followers",
         "following_url" : "https://api.github.com/users/kristapsk/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kristapsk/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kristapsk",
         "id" : 4500994,
         "login" : "kristapsk",
         "node_id" : "MDQ6VXNlcjQ1MDA5OTQ=",
         "organizations_url" : "https://api.github.com/users/kristapsk/orgs",
         "received_events_url" : "https://api.github.com/users/kristapsk/received_events",
         "repos_url" : "https://api.github.com/users/kristapsk/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kristapsk/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kristapsk/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kristapsk"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "If someone really doesn't want this behaviour, wouldn't they probably just not have a legacy/internal provider?",
      "created_at" : "2022-02-19T00:05:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24362#issuecomment-1045393509",
      "id" : 1045393509,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24362",
      "node_id" : "IC_kwDOABII584-T3Bl",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1045393509/reactions"
      },
      "updated_at" : "2022-02-19T00:05:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1045393509",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> If someone really doesn't want this behaviour, wouldn't they probably just not have a legacy/internal provider?\r\n\r\nIt is not possible to remove a provider. A user would have to create a blank wallet, create descriptors for the other address types, and import them. ",
      "created_at" : "2022-02-19T00:29:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24362#issuecomment-1045427883",
      "id" : 1045427883,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24362",
      "node_id" : "IC_kwDOABII584-T_ar",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1045427883/reactions"
      },
      "updated_at" : "2022-02-19T00:29:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1045427883",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : ">It is not possible to remove a provider.\r\n\r\nMaybe a better solution would be a way to disable using a provider?",
      "created_at" : "2022-02-19T16:12:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24362#issuecomment-1046051944",
      "id" : 1046051944,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24362",
      "node_id" : "IC_kwDOABII584-WXxo",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1046051944/reactions"
      },
      "updated_at" : "2022-02-19T16:12:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1046051944",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> For privacy reasons I might want to have P2PKH change if sending to P2PKH recipient.\r\n\r\nYou can still choose to by setting the startup option `-changetype`, or explicitly setting the change type or change address during transaction creation. However as a default behavior, I don't think we should be allowing P2PKH change.\r\n\r\n> Concept NACK\r\n> \r\n> As @kristapsk mentioned users should be able to express selectively.\r\n\r\nUsers are still able to. User overrides still allow P2PKH.",
      "created_at" : "2022-02-19T17:34:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24362#issuecomment-1046068356",
      "id" : 1046068356,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24362",
      "node_id" : "IC_kwDOABII584-WbyE",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1046068356/reactions"
      },
      "updated_at" : "2022-02-19T17:34:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1046068356",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Related #23831",
      "created_at" : "2022-02-19T18:00:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24362#issuecomment-1046073161",
      "id" : 1046073161,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24362",
      "node_id" : "IC_kwDOABII584-Wc9J",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1046073161/reactions"
      },
      "updated_at" : "2022-02-19T18:00:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1046073161",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> > It is not possible to remove a provider.\r\n> \r\n> Maybe a better solution would be a way to disable using a provider?\r\n\r\nIt's possible to deactivate a descriptor using `importdescriptors` with `active:false` which stops it from producing new addresses.",
      "created_at" : "2022-02-21T08:46:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24362#issuecomment-1046610613",
      "id" : 1046610613,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24362",
      "node_id" : "IC_kwDOABII584-YgK1",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1046610613/reactions"
      },
      "updated_at" : "2022-02-21T08:46:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1046610613",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1466284?v=4",
         "events_url" : "https://api.github.com/users/S3RK/events{/privacy}",
         "followers_url" : "https://api.github.com/users/S3RK/followers",
         "following_url" : "https://api.github.com/users/S3RK/following{/other_user}",
         "gists_url" : "https://api.github.com/users/S3RK/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/S3RK",
         "id" : 1466284,
         "login" : "S3RK",
         "node_id" : "MDQ6VXNlcjE0NjYyODQ=",
         "organizations_url" : "https://api.github.com/users/S3RK/orgs",
         "received_events_url" : "https://api.github.com/users/S3RK/received_events",
         "repos_url" : "https://api.github.com/users/S3RK/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/S3RK/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/S3RK/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/S3RK"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24362#discussion_r826146591"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24362"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/826146591"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "You can also delete the creation of the variable `any_pkh` in 2028, since it's not used anywhere.",
      "commit_id" : "04cb49deda731600b104b2f99d60fb1b960e782a",
      "created_at" : "2022-03-14T16:26:07Z",
      "diff_hunk" : "@@ -2036,8 +2036,6 @@ OutputType CWallet::TransactionChangeType(const std::optional<OutputType>& chang\n             any_wpkh = true;\n         } else if (type == TxoutType::SCRIPTHASH) {\n             any_sh = true;\n-        } else if (type == TxoutType::PUBKEYHASH) {\n-            any_pkh = true;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24362#discussion_r826146591",
      "id" : 826146591,
      "line" : 2040,
      "node_id" : "PRRC_kwDOABII584xPf8f",
      "original_commit_id" : "04cb49deda731600b104b2f99d60fb1b960e782a",
      "original_line" : 2040,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/wallet/wallet.cpp",
      "position" : 5,
      "pull_request_review_id" : 909069657,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24362",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/826146591/reactions"
      },
      "side" : "LEFT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-03-14T16:50:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/826146591",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4060799?v=4",
         "events_url" : "https://api.github.com/users/Xekyo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Xekyo/followers",
         "following_url" : "https://api.github.com/users/Xekyo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Xekyo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Xekyo",
         "id" : 4060799,
         "login" : "Xekyo",
         "node_id" : "MDQ6VXNlcjQwNjA3OTk=",
         "organizations_url" : "https://api.github.com/users/Xekyo/orgs",
         "received_events_url" : "https://api.github.com/users/Xekyo/received_events",
         "repos_url" : "https://api.github.com/users/Xekyo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Xekyo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Xekyo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Xekyo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24362#discussion_r826155262"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24362"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/826155262"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I do like the idea of nudging people to use bech32m by default, but what's the point of a \"default\" if we then default to something else? ",
      "commit_id" : "04cb49deda731600b104b2f99d60fb1b960e782a",
      "created_at" : "2022-03-14T16:34:40Z",
      "diff_hunk" : "@@ -2057,11 +2055,6 @@ OutputType CWallet::TransactionChangeType(const std::optional<OutputType>& chang\n         // As of 2021 about 80% of all SH are wrapping WPKH, so use that\n         return OutputType::P2SH_SEGWIT;\n     }\n-    const bool has_legacy_spkman(GetScriptPubKeyMan(OutputType::LEGACY, /*internal=*/true));\n-    if (has_legacy_spkman && any_pkh) {\n-        // Currently pkh is the only type supported by the LEGACY spkman\n-        return OutputType::LEGACY;\n-    }\n \n     if (has_bech32m_spkman) {\n         return OutputType::BECH32M;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24362#discussion_r826155262",
      "id" : 826155262,
      "line" : 2060,
      "node_id" : "PRRC_kwDOABII584xPiD-",
      "original_commit_id" : "04cb49deda731600b104b2f99d60fb1b960e782a",
      "original_line" : 2060,
      "original_position" : 20,
      "original_start_line" : null,
      "path" : "src/wallet/wallet.cpp",
      "position" : 20,
      "pull_request_review_id" : 909069657,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24362",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/826155262/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-03-14T16:50:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/826155262",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4060799?v=4",
         "events_url" : "https://api.github.com/users/Xekyo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Xekyo/followers",
         "following_url" : "https://api.github.com/users/Xekyo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Xekyo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Xekyo",
         "id" : 4060799,
         "login" : "Xekyo",
         "node_id" : "MDQ6VXNlcjQwNjA3OTk=",
         "organizations_url" : "https://api.github.com/users/Xekyo/orgs",
         "received_events_url" : "https://api.github.com/users/Xekyo/received_events",
         "repos_url" : "https://api.github.com/users/Xekyo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Xekyo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Xekyo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Xekyo"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> @josibake tried to convince me of the benefits of output matching generally recently, so I'd be curious to get a refresher of his arguments on this matter.\r\n\r\nMatching the change address to the payment address preserves the user's privacy at the time of the transaction and until the change UTXO is later spent. Additionally, users can take steps to keep from leaking information in a later transaction, e.g migrate the legacy UTXO to a newer output type (which on-chain would look like the UTXO was being spent to a bech32), before mixing it with other UTXOs to fund later transactions.\r\n\r\n> I am actually thinking right now that recipient output type matching could be a lot more beneficial, if we preferentially built input sets for coin selection from a single type of UTXOs. The resulting input sets would probably also be more waste-effective than mixed input sets, as e.g. legacy input sets would be preferred at low feerates and more modern output types should be more attractive at higher feerates than mixed sets of the same input count.\r\n\r\nThis is the ideal scenario! We keep output matching for all types to preserve privacy _and_ we have coin selection avoid mixing different output types when selecting inputs and always prefer to get rid of older output types when possible.\r\n\r\nI've been working on this in https://github.com/bitcoin/bitcoin/pull/24584 and would love feedback on the approach. This is better than not matching legacy addresses as it keeps the privacy improvements for all address types while also addressing concerns about later leaking information and concerns about creating new legacy UTXO's.\r\n\r\nConcept -0 on not matching change outputs for legacy, in favor of https://github.com/bitcoin/bitcoin/pull/24584",
      "created_at" : "2022-03-16T13:37:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24362#issuecomment-1069139384",
      "id" : 1069139384,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24362",
      "node_id" : "IC_kwDOABII584_ucW4",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1069139384/reactions"
      },
      "updated_at" : "2022-03-16T13:37:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1069139384",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7444140?v=4",
         "events_url" : "https://api.github.com/users/josibake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/josibake/followers",
         "following_url" : "https://api.github.com/users/josibake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/josibake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/josibake",
         "id" : 7444140,
         "login" : "josibake",
         "node_id" : "MDQ6VXNlcjc0NDQxNDA=",
         "organizations_url" : "https://api.github.com/users/josibake/orgs",
         "received_events_url" : "https://api.github.com/users/josibake/received_events",
         "repos_url" : "https://api.github.com/users/josibake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/josibake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/josibake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/josibake"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> while also addressing concerns about later leaking information and concerns about creating new legacy UTXO's.\r\n\r\nI don't think #https://github.com/bitcoin/bitcoin/pull/24584 affects the creation of legacy UTXO's unless I am missing something?",
      "created_at" : "2022-03-16T13:45:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24362#issuecomment-1069147923",
      "id" : 1069147923,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24362",
      "node_id" : "IC_kwDOABII584_uecT",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1069147923/reactions"
      },
      "updated_at" : "2022-03-16T13:45:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1069147923",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> I don't think ##24584 affects the creation of legacy UTXO's unless I am missing something?\r\n\r\nah, I could have worded that better. if we keep matching for legacy addresses, under #24584 new legacy UTXOs will still be created. the logic in #24584 tries to always spend these older outputs first so that they are quickly rotated into new type UTXOs.\r\n\r\n",
      "created_at" : "2022-03-16T14:28:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24362#issuecomment-1069190374",
      "id" : 1069190374,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24362",
      "node_id" : "IC_kwDOABII584_uozm",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1069190374/reactions"
      },
      "updated_at" : "2022-03-16T14:28:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1069190374",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7444140?v=4",
         "events_url" : "https://api.github.com/users/josibake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/josibake/followers",
         "following_url" : "https://api.github.com/users/josibake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/josibake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/josibake",
         "id" : 7444140,
         "login" : "josibake",
         "node_id" : "MDQ6VXNlcjc0NDQxNDA=",
         "organizations_url" : "https://api.github.com/users/josibake/orgs",
         "received_events_url" : "https://api.github.com/users/josibake/received_events",
         "repos_url" : "https://api.github.com/users/josibake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/josibake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/josibake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/josibake"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "ACK e33d46aefe747306befad39e8574128cbeeb67bd",
      "created_at" : "2022-07-27T16:45:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24362#issuecomment-1197007960",
      "id" : 1197007960,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24362",
      "node_id" : "IC_kwDOABII585HWORY",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1197007960/reactions"
      },
      "updated_at" : "2022-07-27T16:45:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1197007960",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4060799?v=4",
         "events_url" : "https://api.github.com/users/Xekyo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Xekyo/followers",
         "following_url" : "https://api.github.com/users/Xekyo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Xekyo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Xekyo",
         "id" : 4060799,
         "login" : "Xekyo",
         "node_id" : "MDQ6VXNlcjQwNjA3OTk=",
         "organizations_url" : "https://api.github.com/users/Xekyo/orgs",
         "received_events_url" : "https://api.github.com/users/Xekyo/received_events",
         "repos_url" : "https://api.github.com/users/Xekyo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Xekyo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Xekyo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Xekyo"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Rebased for silent merge conflict.",
      "created_at" : "2022-08-01T17:22:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24362#issuecomment-1201493776",
      "id" : 1201493776,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24362",
      "node_id" : "IC_kwDOABII585HnVcQ",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1201493776/reactions"
      },
      "updated_at" : "2022-08-01T17:22:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1201493776",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#25806](https://github.com/bitcoin/bitcoin/pull/25806) (wallet: single outputs grouping calculation by furszy)\n* [#25789](https://github.com/bitcoin/bitcoin/pull/25789) (test: clean and extend availablecoins_tests coverage by furszy)\n* [#25734](https://github.com/bitcoin/bitcoin/pull/25734) (wallet, refactor: #24584 follow-ups by josibake)\n* [#25729](https://github.com/bitcoin/bitcoin/pull/25729) (wallet: Check max transaction weight in CoinSelection by aureleoules)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2022-08-04T18:32:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24362#issuecomment-1205624497",
      "id" : 1205624497,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24362",
      "node_id" : "IC_kwDOABII585H3F6x",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1205624497/reactions"
      },
      "updated_at" : "2022-08-11T14:48:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1205624497",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "reACK 16ada8dc2cc6f94fc052ec46e9905f1d4a84db73",
      "created_at" : "2022-08-05T20:57:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24362#issuecomment-1206857919",
      "id" : 1206857919,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24362",
      "node_id" : "IC_kwDOABII585H7zC_",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1206857919/reactions"
      },
      "updated_at" : "2022-08-05T20:57:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1206857919",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4060799?v=4",
         "events_url" : "https://api.github.com/users/Xekyo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Xekyo/followers",
         "following_url" : "https://api.github.com/users/Xekyo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Xekyo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Xekyo",
         "id" : 4060799,
         "login" : "Xekyo",
         "node_id" : "MDQ6VXNlcjQwNjA3OTk=",
         "organizations_url" : "https://api.github.com/users/Xekyo/orgs",
         "received_events_url" : "https://api.github.com/users/Xekyo/received_events",
         "repos_url" : "https://api.github.com/users/Xekyo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Xekyo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Xekyo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Xekyo"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> We've long since moved away from using the legacy address type unless the user explicitly wants it, so we should not re-introduce using it as change automatically.\r\n\r\nWhy not? If the user is sending bitcoin to legacy address it should be okay to use a legacy change address by default.\r\n\r\nIsn't the PR undoing some of the privacy benefits added in https://github.com/bitcoin/bitcoin/pull/23789\r\n\r\n",
      "created_at" : "2022-08-05T21:23:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24362#issuecomment-1206883546",
      "id" : 1206883546,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24362",
      "node_id" : "IC_kwDOABII585H75Ta",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1206883546/reactions"
      },
      "updated_at" : "2022-08-05T21:23:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1206883546",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/94559964?v=4",
         "events_url" : "https://api.github.com/users/1440000bytes/events{/privacy}",
         "followers_url" : "https://api.github.com/users/1440000bytes/followers",
         "following_url" : "https://api.github.com/users/1440000bytes/following{/other_user}",
         "gists_url" : "https://api.github.com/users/1440000bytes/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/1440000bytes",
         "id" : 94559964,
         "login" : "1440000bytes",
         "node_id" : "U_kgDOBaLe3A",
         "organizations_url" : "https://api.github.com/users/1440000bytes/orgs",
         "received_events_url" : "https://api.github.com/users/1440000bytes/received_events",
         "repos_url" : "https://api.github.com/users/1440000bytes/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/1440000bytes/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/1440000bytes/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/1440000bytes"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I've been thinking more about the proposed change here. I would argue that before #24584, matching output types mostly improved privacy temporarily for the time between a transaction was created and the change output was spent, as the circumstances in which the change was later spent would more often reveal that it was the change, e.g. when it got spent together with more modern outputs which would indicate that the other output probably was the cause for using legacy outputs. There might have been more of a benefit if the change was a solitary input on the next transaction. However, especially given that there are many other heuristics that also hint at the change output, it seemed a bit unreasonable to increase the future cost of spending the change output by a factor 2.17Ã for this tenuous privacy benefit.\r\n\r\nAfter #24584 our wallets are presumably achieving single-type input sets for most transactions, and this actually changes the benefit of matching legacy outputs more to a question of âprivacy vs costâ. Although other heuristics that allow recognizing change would still not be impacted (e.g. based on amounts, or general wallet fingerprints matching between original and change transaction but not recipient transaction), but at least the legacy output is less likely to be mixed in with other outputs.\r\n\r\nOn the other hand, there is also a meta question of whether creating more legacy outputs helps sustain the acceptability of legacy use. Fewer legacy outputs on the network in general would also make matching legacy and then later spending legacy stick out more. Right now feerates are extremely low, so maybe the additional cost is currently worth the privacy benefit, but if the feerates go up significantly again, sitting on more legacy outputs would be more costlyâalthough they should get selected quickly at the current low feerates as well. And potential higher feerates in the future would prompt more people to switch to blockweight-efficient output types to lower their own future cost, which would reduce our creation of legacy outputs in turn then.\r\n\r\nSo, perhaps we don't need to get active at this time and remove matching of legacy outputs now. Most of the downsides will fix themselves in the long run anyway, and at current feerates the cost is likely low anyway.\r\n\r\nI.e. code looks good to me, I could see the argument go either way for various reasons.",
      "created_at" : "2022-08-09T20:04:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24362#issuecomment-1209820226",
      "id" : 1209820226,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24362",
      "node_id" : "IC_kwDOABII585IHGRC",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1209820226/reactions"
      },
      "updated_at" : "2022-08-09T20:04:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1209820226",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4060799?v=4",
         "events_url" : "https://api.github.com/users/Xekyo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Xekyo/followers",
         "following_url" : "https://api.github.com/users/Xekyo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Xekyo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Xekyo",
         "id" : 4060799,
         "login" : "Xekyo",
         "node_id" : "MDQ6VXNlcjQwNjA3OTk=",
         "organizations_url" : "https://api.github.com/users/Xekyo/orgs",
         "received_events_url" : "https://api.github.com/users/Xekyo/received_events",
         "repos_url" : "https://api.github.com/users/Xekyo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Xekyo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Xekyo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Xekyo"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Why not? If the user is sending bitcoin to legacy address it should be okay to use a legacy change address by default.\r\n\r\nNot necessarily. The user is sending Bitcoin to an address given to them by the recipient - they have no control over that address type. However the user may want to use segwit or taproot because those types are cheaper when spending. In a scenario where the user is trying to optimize for least fees (which many users do), it is actually not okay to send to change to legacy because that will incur higher fees in the future.\r\n\r\n> This affects privacy and makes no sense.\r\n\r\nPrivacy is not the end all be all of wallet design. Bitcoin Core's wallet is not a privacy focused wallet - we do not advertise as being private nor is privacy the primary focus. We try to encourage privacy and implement privacy improving behavior, but not to the detriment of other factors, such as cost to the user and effect on all the other nodes in the network. Given that legacy address types cost more to the user, cost more in block space, and can cost more to validate (in terms of CPU time), I think it is better for us to avoid making legacy outputs as much as possible, and that would include the contents of this PR. While it does have a negative impact on privacy, I do not think that the privacy gained from this behavior outweights the effects that continued legacy use has on everyone else.\r\n\r\nA potential alternative is to add an option that enables strict change type matching. Instead of removing this behavior entirely, it can be put behind a startup option or a transaction creation option so that users who do want the additional privacy can choose to enable it.",
      "created_at" : "2022-08-09T23:24:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24362#issuecomment-1209988683",
      "id" : 1209988683,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24362",
      "node_id" : "IC_kwDOABII585IHvZL",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1209988683/reactions"
      },
      "updated_at" : "2022-08-09T23:24:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1209988683",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Privacy is not the end all be all of wallet design. Bitcoin Core's wallet is not a privacy focused wallet - we do not advertise as being private nor is privacy the primary focus. We try to encourage privacy and implement privacy improving behavior, but not to the detriment of other factors, such as cost to the user and effect on all the other nodes in the network.  \r\n\r\nBitcoin Core may not be privacy focused in past. It all depends on users and reviewers.\r\n\r\n> Given that legacy address types cost more to the user, cost more in block space, and can cost more to validate (in terms of CPU time), I think it is better for us to avoid making legacy outputs as much as possible, and that would include the contents of this PR.\r\n\r\nUsers can decide if they want to use legacy or other addresses in that case if they have a choice. \r\n\r\n> While it does have a negative impact on privacy, I do not think that the privacy gained from this behavior outweights the effects that continued legacy use has on everyone else.\r\n\r\nPrivacy is either by default or nothing. Leaving loopholes for chain analysis firms to make algos based on these PRs does not make sense.",
      "created_at" : "2022-08-09T23:31:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24362#issuecomment-1209992824",
      "id" : 1209992824,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24362",
      "node_id" : "IC_kwDOABII585IHwZ4",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1209992824/reactions"
      },
      "updated_at" : "2022-08-09T23:34:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1209992824",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/94559964?v=4",
         "events_url" : "https://api.github.com/users/1440000bytes/events{/privacy}",
         "followers_url" : "https://api.github.com/users/1440000bytes/followers",
         "following_url" : "https://api.github.com/users/1440000bytes/following{/other_user}",
         "gists_url" : "https://api.github.com/users/1440000bytes/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/1440000bytes",
         "id" : 94559964,
         "login" : "1440000bytes",
         "node_id" : "U_kgDOBaLe3A",
         "organizations_url" : "https://api.github.com/users/1440000bytes/orgs",
         "received_events_url" : "https://api.github.com/users/1440000bytes/received_events",
         "repos_url" : "https://api.github.com/users/1440000bytes/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/1440000bytes/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/1440000bytes/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/1440000bytes"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Right now feerates are extremely low, so maybe the additional cost is currently worth the privacy benefit, but if the feerates go up significantly again, sitting on more legacy outputs would be more costlyâalthough they should get selected quickly at the current low feerates as well. And potential higher feerates in the future would prompt more people to switch to blockweight-efficient output types to lower their own future cost, which would reduce our creation of legacy outputs in turn then.\r\n> \r\n> So, perhaps we don't need to get active at this time and remove matching of legacy outputs now. Most of the downsides will fix themselves in the long run anyway, and at current feerates the cost is likely low anyway.\r\n\r\nThis sums up my feelings on this. I'd add that high feerates is a future problem, whereas privacy is a current problem. Not saying that we shouldn't be optimizing for fees now, but rather saying that I'd prefer we improve privacy today with slight tradeoffs in efficiency vs solutions that improve efficiency today at the expensive of privacy.\r\n\r\nIt's also worth mentioning that there are often ways to intervene with inefficient UTXOs (e.g migrating legacy UTXOs to newer types manually in low fee periods, improved coin-selection algos that are fee and address type aware, etc), whereas damaging privacy on-chain is a permanent mistake.\r\n",
      "created_at" : "2022-08-11T14:50:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24362#issuecomment-1212096008",
      "id" : 1212096008,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24362",
      "node_id" : "IC_kwDOABII585IPx4I",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1212096008/reactions"
      },
      "updated_at" : "2022-08-11T14:50:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1212096008",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7444140?v=4",
         "events_url" : "https://api.github.com/users/josibake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/josibake/followers",
         "following_url" : "https://api.github.com/users/josibake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/josibake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/josibake",
         "id" : 7444140,
         "login" : "josibake",
         "node_id" : "MDQ6VXNlcjc0NDQxNDA=",
         "organizations_url" : "https://api.github.com/users/josibake/orgs",
         "received_events_url" : "https://api.github.com/users/josibake/received_events",
         "repos_url" : "https://api.github.com/users/josibake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/josibake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/josibake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/josibake"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> However, especially given that there are many other heuristics that also hint at the change output\r\n\r\nJup, just to mention one example: The Bitcoin Core wallet already sets the locktime, which is a \"rare\" (~20%) signal, so most change can already be assumed correctly by just excluding the outputs that were spent without locktime set.\r\n\r\nIf locktime isn't enough there are plenty of other fields:\r\n* https://transactionfee.info/charts/transactions-height-based-locktime/\r\n* https://transactionfee.info/charts/transaction-versions/\r\n* https://transactionfee.info/charts/transactions-signaling-explicit-rbf/\r\n* feerate/fee (may be a constant if setxfee was used?)\r\n* ...",
      "created_at" : "2022-08-11T15:07:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24362#issuecomment-1212120369",
      "id" : 1212120369,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24362",
      "node_id" : "IC_kwDOABII585IP30x",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1212120369/reactions"
      },
      "updated_at" : "2022-08-11T15:07:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1212120369",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> > However, especially given that there are many other heuristics that also hint at the change output\r\n> \r\n> Jup, just to mention one example: The Bitcoin Core wallet already sets the locktime, which is a \"rare\" (~20%) signal, so most change can already be assumed correctly by just excluding the outputs that were spent without locktime set.\r\n> \r\n> If locktime isn't enough there are plenty of other fields:\r\n> \r\n> * https://transactionfee.info/charts/transactions-height-based-locktime/\r\n> * https://transactionfee.info/charts/transaction-versions/\r\n> * https://transactionfee.info/charts/transactions-signaling-explicit-rbf/\r\n> * feerate/fee (may be a constant if setxfee was used?)\r\n> * ...\r\n\r\nThere are a few other wallets that use same default locktime, version etc. as core and these aren't reasons to make privacy worse by not matching legacy address for change. Could be improvements in future or solved by discussion with devs of other wallets.",
      "created_at" : "2022-08-11T15:46:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24362#issuecomment-1212169204",
      "id" : 1212169204,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24362",
      "node_id" : "IC_kwDOABII585IQDv0",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1212169204/reactions"
      },
      "updated_at" : "2022-08-11T15:46:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1212169204",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/94559964?v=4",
         "events_url" : "https://api.github.com/users/1440000bytes/events{/privacy}",
         "followers_url" : "https://api.github.com/users/1440000bytes/followers",
         "following_url" : "https://api.github.com/users/1440000bytes/following{/other_user}",
         "gists_url" : "https://api.github.com/users/1440000bytes/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/1440000bytes",
         "id" : 94559964,
         "login" : "1440000bytes",
         "node_id" : "U_kgDOBaLe3A",
         "organizations_url" : "https://api.github.com/users/1440000bytes/orgs",
         "received_events_url" : "https://api.github.com/users/1440000bytes/received_events",
         "repos_url" : "https://api.github.com/users/1440000bytes/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/1440000bytes/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/1440000bytes/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/1440000bytes"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Users can decide if they want to use legacy or other addresses in that case if they have a choice.\r\n\r\n@1440000bytes: Just like they'd have a choice if this PR were mergedâthey would just have to explicitly select the legacy output type for their changeâ¦\r\n\r\nObviously, defaults matter which is why you care what the default is.\r\n\r\nThe argument is not about whether there is a privacy benefit (we all agree), but about **how the privacy benefit weighs compared to the increased cost**. I would request that you provide evidence for the tradeoff being worth it rather than just repeatedly demanding the best possible privacy at any costâthe former would be a contribution to the conversation, the latter lacks nuance and becomes just noise.\r\n\r\nAlso, if you don't mind, which other wallets match Bitcoin Core's fingerprints?",
      "created_at" : "2022-08-11T19:19:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24362#issuecomment-1212392059",
      "id" : 1212392059,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24362",
      "node_id" : "IC_kwDOABII585IQ6J7",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1212392059/reactions"
      },
      "updated_at" : "2022-08-11T19:19:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1212392059",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4060799?v=4",
         "events_url" : "https://api.github.com/users/Xekyo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Xekyo/followers",
         "following_url" : "https://api.github.com/users/Xekyo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Xekyo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Xekyo",
         "id" : 4060799,
         "login" : "Xekyo",
         "node_id" : "MDQ6VXNlcjQwNjA3OTk=",
         "organizations_url" : "https://api.github.com/users/Xekyo/orgs",
         "received_events_url" : "https://api.github.com/users/Xekyo/received_events",
         "repos_url" : "https://api.github.com/users/Xekyo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Xekyo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Xekyo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Xekyo"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "\r\n> @1440000bytes: Just like they'd have a choice if this PR were mergedâthey would just have to explicitly select the legacy output type for their changeâ¦\r\n> \r\n> Obviously, defaults matter which is why you care what the default is.\r\n\r\nThere are already so many things users have to look at if they want privacy. I care about the changes in this pull request because neither I want to make such mistakes in bitcoin transactions nor I want to see others being affected. Example:\r\n\r\nAlice: I just a did a transaction using bitcoin core and chainalysis won't be able to find change address in this\r\n\r\nBob: I hope you didn't send it to legacy address?\r\n\r\nAlice: :cry:\r\n\r\n`bumpfee` RPC doesn't even allow users selecting inputs, change etc.\r\n\r\nPrivacy is more important than other things and if this bothers some developers, there should be an option in GUI and bitcoin.conf to optimize certain things in transactions based on fees, privacy etc. Example:\r\n\r\n![image](https://user-images.githubusercontent.com/94559964/184239543-9ce290ad-ad46-4605-8567-ce228a437ede.png)\r\n\r\nAt least users won't have to carefully look at several things when doing bitcoin transactions.\r\n\r\n> The argument is not about whether there is a privacy benefit (we all agree), but about **how the privacy benefit weighs compared to the increased cost**. I would request that you provide evidence for the tradeoff being worth it rather than just repeatedly demanding the best possible privacy at any costâthe former would be a contribution to the conversation, the latter lacks nuance and becomes just noise.\r\n\r\n1. I am not demanding anything. I am disagreeing with the changes in this pull request as a reviewer and responding to comments.\r\n\r\n2. If we all agree there is a privacy benefit in not merging this pull request there is no point in speculating about future fees and fingerprints. If change address could be identified using other things, we should try to fix them if possible and not make things worse. If they really affect privacy then #23789 #24584 are useless and should never have been merged.\r\n\r\n> Also, if you don't mind, which other wallets match Bitcoin Core's fingerprints?\r\n\r\nBluewallet: Version 2, Locktime 0\r\nBlockstream Green: Version 2, Locktime 0\r\nHexa: Version 2, Locktime 0\r\n\r\nI am sure there might be more wallets that use same version and locktime. Some wallets also match the fingerprint partially because either locktime or version matches. Wallets that use Bitcoin Core RPC which I had also mentioned in earlier comments would most probably have the same fingerprint. Transactions could even be sent to other bitcoin core user. \r\n\r\n-- -\r\n\r\nI am working as developer for an exchange and we will be using bitcoin core wallets so it can be added to the list of exchanges that use same fingerprint.",
      "created_at" : "2022-08-11T21:02:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24362#issuecomment-1212489417",
      "id" : 1212489417,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24362",
      "node_id" : "IC_kwDOABII585IRR7J",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1212489417/reactions"
      },
      "updated_at" : "2022-08-11T21:02:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1212489417",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/94559964?v=4",
         "events_url" : "https://api.github.com/users/1440000bytes/events{/privacy}",
         "followers_url" : "https://api.github.com/users/1440000bytes/followers",
         "following_url" : "https://api.github.com/users/1440000bytes/following{/other_user}",
         "gists_url" : "https://api.github.com/users/1440000bytes/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/1440000bytes",
         "id" : 94559964,
         "login" : "1440000bytes",
         "node_id" : "U_kgDOBaLe3A",
         "organizations_url" : "https://api.github.com/users/1440000bytes/orgs",
         "received_events_url" : "https://api.github.com/users/1440000bytes/received_events",
         "repos_url" : "https://api.github.com/users/1440000bytes/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/1440000bytes/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/1440000bytes/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/1440000bytes"
      }
   }
]
