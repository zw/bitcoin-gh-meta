[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage\nFor detailed information about the code coverage, see the [test coverage report](https://corecheck.dev/bitcoin/bitcoin/pulls/28960).\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [ryanofsky](https://github.com/bitcoin/bitcoin/pull/28960#pullrequestreview-1885543942) |\n| Concept ACK | [dergoegge](https://github.com/bitcoin/bitcoin/pull/28960#issuecomment-1831605764), [darosior](https://github.com/bitcoin/bitcoin/pull/28960#pullrequestreview-1787282671) |\n| Approach ACK | [vasild](https://github.com/bitcoin/bitcoin/pull/28960#pullrequestreview-1879760071) |\n| Stale ACK | [jamesob](https://github.com/bitcoin/bitcoin/pull/28960#pullrequestreview-1818940398), [furszy](https://github.com/bitcoin/bitcoin/pull/28960#pullrequestreview-1884993957), [maflcko](https://github.com/bitcoin/bitcoin/pull/28960#pullrequestreview-1885045429) |\n\nIf your review is incorrectly listed, please react with ð to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#29415](https://github.com/bitcoin/bitcoin/pull/29415) (Broadcast own transactions only via short-lived Tor or I2P connections by vasild)\n* [#29278](https://github.com/bitcoin/bitcoin/pull/29278) (Wallet:  Add `maxfeerate` wallet startup option by ismaelsadeeq)\n* [#29242](https://github.com/bitcoin/bitcoin/pull/29242) (Mempool util: Add RBF diagram checks for single chunks against clusters of size 2 by instagibbs)\n* [#29236](https://github.com/bitcoin/bitcoin/pull/29236) (log: Nuke error(...) by maflcko)\n* [#29015](https://github.com/bitcoin/bitcoin/pull/29015) (kernel: Streamline util library by ryanofsky)\n* [#28984](https://github.com/bitcoin/bitcoin/pull/28984) (Cluster size 2 package rbf by instagibbs)\n* [#28830](https://github.com/bitcoin/bitcoin/pull/28830) ([refactor] Check CTxMemPool options in ctor by TheCharlatan)\n* [#28228](https://github.com/bitcoin/bitcoin/pull/28228) (kernel: Run sanity checks on context construction by TheCharlatan)\n* [#28031](https://github.com/bitcoin/bitcoin/pull/28031) (Package Relay 1/3: Introduce TxDownloadManager and improve orphan-handling by glozow)\n* [#27277](https://github.com/bitcoin/bitcoin/pull/27277) (Move log messages: tx enqueue to mempool, allocation to blockstorage by Sjors)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "created_at" : "2023-11-28T16:27:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#issuecomment-1830244579",
      "id" : 1830244579,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28960",
      "node_id" : "IC_kwDOABII585tF1Dj",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1830244579/reactions"
      },
      "updated_at" : "2024-02-16T16:29:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1830244579",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK",
      "created_at" : "2023-11-29T10:17:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#issuecomment-1831605764",
      "id" : 1831605764,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28960",
      "node_id" : "IC_kwDOABII585tLBYE",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1831605764/reactions"
      },
      "updated_at" : "2023-11-29T10:17:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1831605764",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8077169?v=4",
         "events_url" : "https://api.github.com/users/dergoegge/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dergoegge/followers",
         "following_url" : "https://api.github.com/users/dergoegge/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dergoegge/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dergoegge",
         "id" : 8077169,
         "login" : "dergoegge",
         "node_id" : "MDQ6VXNlcjgwNzcxNjk=",
         "organizations_url" : "https://api.github.com/users/dergoegge/orgs",
         "received_events_url" : "https://api.github.com/users/dergoegge/received_events",
         "repos_url" : "https://api.github.com/users/dergoegge/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dergoegge/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dergoegge/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dergoegge"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n",
      "created_at" : "2023-11-30T20:02:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#issuecomment-1834463262",
      "id" : 1834463262,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28960",
      "node_id" : "IC_kwDOABII585tV7Ae",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1834463262/reactions"
      },
      "updated_at" : "2023-11-30T20:02:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1834463262",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n",
      "created_at" : "2023-12-01T21:10:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#issuecomment-1836781327",
      "id" : 1836781327,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28960",
      "node_id" : "IC_kwDOABII585tew8P",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1836781327/reactions"
      },
      "updated_at" : "2023-12-01T21:10:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1836781327",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1412791517"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1412791517"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Why?",
      "commit_id" : "f86c3e858f6bf708746b7c8fbcfe25707ca6467e",
      "created_at" : "2023-12-02T12:16:05Z",
      "diff_hunk" : "@@ -113,7 +123,7 @@ int main(int argc, char* argv[])\n \n \n     // SETUP: Chainstate\n-    auto chainparams = CChainParams::Main();\n+    auto chainparams = CChainParams::SigNet({});",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1412791517",
      "id" : 1412791517,
      "line" : 126,
      "node_id" : "PRRC_kwDOABII585UNXzd",
      "original_commit_id" : "f86c3e858f6bf708746b7c8fbcfe25707ca6467e",
      "original_line" : 126,
      "original_position" : 60,
      "original_start_line" : null,
      "path" : "src/bitcoin-chainstate.cpp",
      "position" : 60,
      "pull_request_review_id" : 1760865264,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1412791517/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-12-02T12:16:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1412791517",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/22457751?v=4",
         "events_url" : "https://api.github.com/users/darosior/events{/privacy}",
         "followers_url" : "https://api.github.com/users/darosior/followers",
         "following_url" : "https://api.github.com/users/darosior/following{/other_user}",
         "gists_url" : "https://api.github.com/users/darosior/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/darosior",
         "id" : 22457751,
         "login" : "darosior",
         "node_id" : "MDQ6VXNlcjIyNDU3NzUx",
         "organizations_url" : "https://api.github.com/users/darosior/orgs",
         "received_events_url" : "https://api.github.com/users/darosior/received_events",
         "repos_url" : "https://api.github.com/users/darosior/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/darosior/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/darosior/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/darosior"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1412793508"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1412793508"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Just not done testing yet and SigNet is easier.",
      "commit_id" : "f86c3e858f6bf708746b7c8fbcfe25707ca6467e",
      "created_at" : "2023-12-02T12:32:19Z",
      "diff_hunk" : "@@ -113,7 +123,7 @@ int main(int argc, char* argv[])\n \n \n     // SETUP: Chainstate\n-    auto chainparams = CChainParams::Main();\n+    auto chainparams = CChainParams::SigNet({});",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1412793508",
      "id" : 1412793508,
      "in_reply_to_id" : 1412791517,
      "line" : 126,
      "node_id" : "PRRC_kwDOABII585UNYSk",
      "original_commit_id" : "f86c3e858f6bf708746b7c8fbcfe25707ca6467e",
      "original_line" : 126,
      "original_position" : 60,
      "original_start_line" : null,
      "path" : "src/bitcoin-chainstate.cpp",
      "position" : 60,
      "pull_request_review_id" : 1760867059,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1412793508/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-12-02T12:32:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1412793508",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Undrafting this now. I tested this approach extensively against my proof of concept [C FFI](https://github.com/TheCharlatan/bitcoin/pull/7) and proof of concept [Rust library](https://github.com/TheCharlatan/rust-bitcoinkernel), and think it's not that bad an interface to have. Not sure why the msvc build is failing (only seems to be the Qt build?).",
      "created_at" : "2023-12-02T22:16:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#issuecomment-1837267077",
      "id" : 1837267077,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28960",
      "node_id" : "IC_kwDOABII585tgniF",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1837267077/reactions"
      },
      "updated_at" : "2023-12-02T22:16:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1837267077",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Not sure why the msvc build is failing (only seems to be the Qt build?).\r\n\r\ncc @sipsorcery ",
      "created_at" : "2023-12-02T22:33:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#issuecomment-1837269861",
      "id" : 1837269861,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28960",
      "node_id" : "IC_kwDOABII585tgoNl",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1837269861/reactions"
      },
      "updated_at" : "2023-12-02T22:33:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1837269861",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Maybe something in txmempool.h that the msvc compiler doesn't like?\r\n\r\n```\r\nD:\\a\\bitcoin\\bitcoin\\src\\txmempool.h(457,60): error C2143: syntax error: missing ')' before 'public' [D:\\a\\bitcoin\\bitcoin\\build_msvc\\libbitcoin_qt\\libbitcoin_qt.vcxproj]\r\nD:\\a\\bitcoin\\bitcoin\\src\\txmempool.h(457,60): error C2143: syntax error: missing ';' before 'public' [D:\\a\\bitcoin\\bitcoin\\build_msvc\\libbitcoin_qt\\libbitcoin_qt.vcxproj]\r\nD:\\a\\bitcoin\\bitcoin\\src\\txmempool.h(457,67): error C2059: syntax error: ')' [D:\\a\\bitcoin\\bitcoin\\build_msvc\\libbitcoin_qt\\libbitcoin_qt.vcxproj]\r\n```\r\n\r\nGiven it's a compiler, rather than a linker, error should be easy enough to replicate. I'll try and do so 2morrow",
      "created_at" : "2023-12-06T23:29:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#issuecomment-1843853088",
      "id" : 1843853088,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28960",
      "node_id" : "IC_kwDOABII585t5vcg",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1843853088/reactions"
      },
      "updated_at" : "2023-12-06T23:29:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1843853088",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/197660?v=4",
         "events_url" : "https://api.github.com/users/sipsorcery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipsorcery/followers",
         "following_url" : "https://api.github.com/users/sipsorcery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipsorcery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipsorcery",
         "id" : 197660,
         "login" : "sipsorcery",
         "node_id" : "MDQ6VXNlcjE5NzY2MA==",
         "organizations_url" : "https://api.github.com/users/sipsorcery/orgs",
         "received_events_url" : "https://api.github.com/users/sipsorcery/received_events",
         "repos_url" : "https://api.github.com/users/sipsorcery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipsorcery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipsorcery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipsorcery"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "It's something to do with `CMainSignals&`. Wherever it's used in libbitcoin_qt the msvc compiler generates a syntax error of:\r\n\r\n`Error\tC2238\tunexpected token(s) preceding ';'`\t\r\n",
      "created_at" : "2023-12-08T23:32:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#issuecomment-1847971114",
      "id" : 1847971114,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28960",
      "node_id" : "IC_kwDOABII585uJc0q",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1847971114/reactions"
      },
      "updated_at" : "2023-12-08T23:32:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1847971114",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/197660?v=4",
         "events_url" : "https://api.github.com/users/sipsorcery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipsorcery/followers",
         "following_url" : "https://api.github.com/users/sipsorcery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipsorcery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipsorcery",
         "id" : 197660,
         "login" : "sipsorcery",
         "node_id" : "MDQ6VXNlcjE5NzY2MA==",
         "organizations_url" : "https://api.github.com/users/sipsorcery/orgs",
         "received_events_url" : "https://api.github.com/users/sipsorcery/received_events",
         "repos_url" : "https://api.github.com/users/sipsorcery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipsorcery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipsorcery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipsorcery"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> It's something to do with `CMainSignals&`. Wherever it's used in libbitcoin_qt the msvc compiler generates a syntax error of:\r\n> \r\n> `Error C2238 unexpected token(s) preceding ';'`\r\n\r\nFixed in #29044.",
      "created_at" : "2023-12-09T16:19:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#issuecomment-1848453153",
      "id" : 1848453153,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28960",
      "node_id" : "IC_kwDOABII585uLSgh",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1848453153/reactions"
      },
      "updated_at" : "2023-12-09T16:19:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1848453153",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "This shouldn't have been closed i think @fanquake.",
      "created_at" : "2023-12-11T11:31:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#issuecomment-1849887372",
      "id" : 1849887372,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28960",
      "node_id" : "IC_kwDOABII585uQwqM",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1849887372/reactions"
      },
      "updated_at" : "2023-12-11T11:31:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1849887372",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/22457751?v=4",
         "events_url" : "https://api.github.com/users/darosior/events{/privacy}",
         "followers_url" : "https://api.github.com/users/darosior/followers",
         "following_url" : "https://api.github.com/users/darosior/following{/other_user}",
         "gists_url" : "https://api.github.com/users/darosior/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/darosior",
         "id" : 22457751,
         "login" : "darosior",
         "node_id" : "MDQ6VXNlcjIyNDU3NzUx",
         "organizations_url" : "https://api.github.com/users/darosior/orgs",
         "received_events_url" : "https://api.github.com/users/darosior/received_events",
         "repos_url" : "https://api.github.com/users/darosior/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/darosior/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/darosior/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/darosior"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n",
      "created_at" : "2023-12-11T17:15:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#issuecomment-1850513110",
      "id" : 1850513110,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28960",
      "node_id" : "IC_kwDOABII585uTJbW",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1850513110/reactions"
      },
      "updated_at" : "2023-12-11T17:15:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1850513110",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1438670874"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1438670874"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Technically i think this reference can be dangling at `Shutdown()` (if there is still some wallets loaded) since we don't `reset()` the `node.wallet_loader` before resetting `node.main_signals`.",
      "commit_id" : "717093f24b1ad65bc18b23eab492cfdcc2511e69",
      "created_at" : "2023-12-30T17:59:10Z",
      "diff_hunk" : "@@ -458,17 +459,20 @@ class NotificationsProxy : public CValidationInterface\n \n class NotificationsHandlerImpl : public Handler\n {\n+private:\n+    CMainSignals& m_signals;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1438670874",
      "id" : 1438670874,
      "line" : 465,
      "node_id" : "PRRC_kwDOABII585VwGAa",
      "original_commit_id" : "4b9a37e461aee0c24f798123cdb023a783a130c6",
      "original_line" : 463,
      "original_position" : 13,
      "original_start_line" : null,
      "path" : "src/node/interfaces.cpp",
      "position" : 22,
      "pull_request_review_id" : 1799576749,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1438670874/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-12-30T17:59:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1438670874",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/22457751?v=4",
         "events_url" : "https://api.github.com/users/darosior/events{/privacy}",
         "followers_url" : "https://api.github.com/users/darosior/followers",
         "following_url" : "https://api.github.com/users/darosior/following{/other_user}",
         "gists_url" : "https://api.github.com/users/darosior/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/darosior",
         "id" : 22457751,
         "login" : "darosior",
         "node_id" : "MDQ6VXNlcjIyNDU3NzUx",
         "organizations_url" : "https://api.github.com/users/darosior/orgs",
         "received_events_url" : "https://api.github.com/users/darosior/received_events",
         "repos_url" : "https://api.github.com/users/darosior/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/darosior/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/darosior/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/darosior"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1440249695"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1440249695"
         }
      },
      "author_association" : "MEMBER",
      "body" : "why is this moved to the header?",
      "commit_id" : "717093f24b1ad65bc18b23eab492cfdcc2511e69",
      "created_at" : "2024-01-03T09:44:32Z",
      "diff_hunk" : "@@ -189,16 +155,53 @@ class CValidationInterface {\n     friend class ValidationInterfaceTest;\n };\n \n-class MainSignalsImpl;\n+/**\n+ * MainSignalsImpl manages a list of shared_ptr<CValidationInterface> callbacks.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1440249695",
      "id" : 1440249695,
      "line" : 160,
      "node_id" : "PRRC_kwDOABII585V2Hdf",
      "original_commit_id" : "4b9a37e461aee0c24f798123cdb023a783a130c6",
      "original_line" : 159,
      "original_position" : 74,
      "original_start_line" : null,
      "path" : "src/validationinterface.h",
      "position" : 75,
      "pull_request_review_id" : 1801668068,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1440249695/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-03T09:44:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1440249695",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/maflcko/events{/privacy}",
         "followers_url" : "https://api.github.com/users/maflcko/followers",
         "following_url" : "https://api.github.com/users/maflcko/following{/other_user}",
         "gists_url" : "https://api.github.com/users/maflcko/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/maflcko",
         "id" : 6399679,
         "login" : "maflcko",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/maflcko/orgs",
         "received_events_url" : "https://api.github.com/users/maflcko/received_events",
         "repos_url" : "https://api.github.com/users/maflcko/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/maflcko/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/maflcko/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/maflcko"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1440318695"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1440318695"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Felt more natural to give a `CMainSignals` ownership of `MainSignalsImpl` instead of a `std::unique_ptr<MainSignalsImpl`, so it needs the full declaration of the class.",
      "commit_id" : "717093f24b1ad65bc18b23eab492cfdcc2511e69",
      "created_at" : "2024-01-03T10:54:51Z",
      "diff_hunk" : "@@ -189,16 +155,53 @@ class CValidationInterface {\n     friend class ValidationInterfaceTest;\n };\n \n-class MainSignalsImpl;\n+/**\n+ * MainSignalsImpl manages a list of shared_ptr<CValidationInterface> callbacks.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1440318695",
      "id" : 1440318695,
      "in_reply_to_id" : 1440249695,
      "line" : 160,
      "node_id" : "PRRC_kwDOABII585V2YTn",
      "original_commit_id" : "4b9a37e461aee0c24f798123cdb023a783a130c6",
      "original_line" : 159,
      "original_position" : 74,
      "original_start_line" : null,
      "path" : "src/validationinterface.h",
      "position" : 75,
      "pull_request_review_id" : 1801777178,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1440318695/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-03T10:54:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1440318695",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1440323203"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1440323203"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Mmh, the destruction of `wallet_loader` is a bit weird, but doesn't it get reset when `node.chain_clients.clear()` is called at `Shutdown(...)`?",
      "commit_id" : "717093f24b1ad65bc18b23eab492cfdcc2511e69",
      "created_at" : "2024-01-03T11:00:08Z",
      "diff_hunk" : "@@ -458,17 +459,20 @@ class NotificationsProxy : public CValidationInterface\n \n class NotificationsHandlerImpl : public Handler\n {\n+private:\n+    CMainSignals& m_signals;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1440323203",
      "id" : 1440323203,
      "in_reply_to_id" : 1438670874,
      "line" : 465,
      "node_id" : "PRRC_kwDOABII585V2ZaD",
      "original_commit_id" : "4b9a37e461aee0c24f798123cdb023a783a130c6",
      "original_line" : 463,
      "original_position" : 13,
      "original_start_line" : null,
      "path" : "src/node/interfaces.cpp",
      "position" : 22,
      "pull_request_review_id" : 1801784309,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1440323203/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-03T11:00:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1440323203",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1440329179"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1440329179"
         }
      },
      "author_association" : "MEMBER",
      "body" : "ok, but in the commit 4b9a37e461aee0c24f798123cdb023a783a130c6 I was looking at, the unique_ptr remains unchanged",
      "commit_id" : "717093f24b1ad65bc18b23eab492cfdcc2511e69",
      "created_at" : "2024-01-03T11:07:35Z",
      "diff_hunk" : "@@ -189,16 +155,53 @@ class CValidationInterface {\n     friend class ValidationInterfaceTest;\n };\n \n-class MainSignalsImpl;\n+/**\n+ * MainSignalsImpl manages a list of shared_ptr<CValidationInterface> callbacks.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1440329179",
      "id" : 1440329179,
      "in_reply_to_id" : 1440249695,
      "line" : 160,
      "node_id" : "PRRC_kwDOABII585V2a3b",
      "original_commit_id" : "4b9a37e461aee0c24f798123cdb023a783a130c6",
      "original_line" : 159,
      "original_position" : 74,
      "original_start_line" : null,
      "path" : "src/validationinterface.h",
      "position" : 75,
      "pull_request_review_id" : 1801794213,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1440329179/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-03T11:07:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1440329179",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/maflcko/events{/privacy}",
         "followers_url" : "https://api.github.com/users/maflcko/followers",
         "following_url" : "https://api.github.com/users/maflcko/following{/other_user}",
         "gists_url" : "https://api.github.com/users/maflcko/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/maflcko",
         "id" : 6399679,
         "login" : "maflcko",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/maflcko/orgs",
         "received_events_url" : "https://api.github.com/users/maflcko/received_events",
         "repos_url" : "https://api.github.com/users/maflcko/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/maflcko/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/maflcko/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/maflcko"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1440349190"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1440349190"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Ah, right, the ownership of the loader is in `node.chain_clients`:\r\nhttps://github.com/bitcoin/bitcoin/blob/65c05db660b2ca1d0076b0d8573a6760b3228068/src/wallet/init.cpp#L129-L131\r\n\r\nSo it's dropped before `node.main_signals` is.",
      "commit_id" : "717093f24b1ad65bc18b23eab492cfdcc2511e69",
      "created_at" : "2024-01-03T11:32:53Z",
      "diff_hunk" : "@@ -458,17 +459,20 @@ class NotificationsProxy : public CValidationInterface\n \n class NotificationsHandlerImpl : public Handler\n {\n+private:\n+    CMainSignals& m_signals;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1440349190",
      "id" : 1440349190,
      "in_reply_to_id" : 1438670874,
      "line" : 465,
      "node_id" : "PRRC_kwDOABII585V2fwG",
      "original_commit_id" : "4b9a37e461aee0c24f798123cdb023a783a130c6",
      "original_line" : 463,
      "original_position" : 13,
      "original_start_line" : null,
      "path" : "src/node/interfaces.cpp",
      "position" : 22,
      "pull_request_review_id" : 1801827744,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1440349190/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-03T11:32:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1440349190",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/22457751?v=4",
         "events_url" : "https://api.github.com/users/darosior/events{/privacy}",
         "followers_url" : "https://api.github.com/users/darosior/followers",
         "following_url" : "https://api.github.com/users/darosior/following{/other_user}",
         "gists_url" : "https://api.github.com/users/darosior/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/darosior",
         "id" : 22457751,
         "login" : "darosior",
         "node_id" : "MDQ6VXNlcjIyNDU3NzUx",
         "organizations_url" : "https://api.github.com/users/darosior/orgs",
         "received_events_url" : "https://api.github.com/users/darosior/received_events",
         "repos_url" : "https://api.github.com/users/darosior/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/darosior/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/darosior/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/darosior"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n",
      "created_at" : "2024-01-03T13:12:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#issuecomment-1875354008",
      "id" : 1875354008,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28960",
      "node_id" : "IC_kwDOABII585vx6GY",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1875354008/reactions"
      },
      "updated_at" : "2024-01-03T13:12:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1875354008",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Rebased 717093f24b1ad65bc18b23eab492cfdcc2511e69 -> d63b2e88780dc78fd531b053653361a0bf3fcbea ([noGlobalSignals_0](https://github.com/TheCharlatan/bitcoin/tree/noGlobalSignals_0) -> [noGlobalSignals_1](https://github.com/TheCharlatan/bitcoin/tree/noGlobalSignals_1),  [compare](https://github.com/TheCharlatan/bitcoin/compare/noGlobalSignals_0..noGlobalSignals_1))\r\n\r\n* Fix conflict with #29013",
      "created_at" : "2024-01-03T15:13:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#issuecomment-1875530051",
      "id" : 1875530051,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28960",
      "node_id" : "IC_kwDOABII585vylFD",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1875530051/reactions"
      },
      "updated_at" : "2024-01-03T15:13:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1875530051",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1450864735"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1450864735"
         }
      },
      "author_association" : "MEMBER",
      "body" : "https://github.com/bitcoin/bitcoin/pull/28960/commits/d63b2e88780dc78fd531b053653361a0bf3fcbea\r\n\r\nI guess this periodic call was originally included to demonstrate how you might use the scheduler from the libbitcoinkernel interface, but now that we've removed the scheduler from the interface there isn't really an equivalent. Clients would be expected to run their own async event managers and periodic schedulers, which makes sense - and I guess is the whole point of this change!",
      "commit_id" : "5755454fb5cc4067fc94e2682116e0fc5c9dfc58",
      "created_at" : "2024-01-12T19:46:41Z",
      "diff_hunk" : "@@ -68,16 +67,27 @@ int main(int argc, char* argv[])\n     Assert(InitSignatureCache(validation_cache_sizes.signature_cache_bytes));\n     Assert(InitScriptExecutionCache(validation_cache_sizes.script_execution_cache_bytes));\n \n+    class DummyQueue : public ValidationInterfaceQueue\n+    {\n+    public:\n+        DummyQueue() {}\n+        void AddToProcessQueue(std::function<void()> func) override\n+        {\n+            func();\n+        }\n \n-    // SETUP: Scheduling and Background Signals\n-    CScheduler scheduler{};\n-    // Start the lightweight task scheduler thread\n-    scheduler.m_service_thread = std::thread(util::TraceThread, \"scheduler\", [&] { scheduler.serviceQueue(); });\n+        void EmptyQueue() override\n+        {\n+            return;\n+        }\n \n-    CMainSignals main_signals{scheduler};\n+        size_t CallbacksPending() override\n+        {\n+            return 0;\n+        }\n+    };\n \n-    // Gather some entropy once per minute.\n-    scheduler.scheduleEvery(RandAddPeriodic, std::chrono::minutes{1});",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1450864735",
      "id" : 1450864735,
      "line" : 78,
      "node_id" : "PRRC_kwDOABII585WenBf",
      "original_commit_id" : "d63b2e88780dc78fd531b053653361a0bf3fcbea",
      "original_line" : 78,
      "original_position" : 50,
      "original_start_line" : null,
      "path" : "src/bitcoin-chainstate.cpp",
      "position" : 43,
      "pull_request_review_id" : 1818940398,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1450864735/reactions"
      },
      "side" : "LEFT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-12T20:06:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1450864735",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/73197?v=4",
         "events_url" : "https://api.github.com/users/jamesob/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jamesob/followers",
         "following_url" : "https://api.github.com/users/jamesob/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jamesob/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jamesob",
         "id" : 73197,
         "login" : "jamesob",
         "node_id" : "MDQ6VXNlcjczMTk3",
         "organizations_url" : "https://api.github.com/users/jamesob/orgs",
         "received_events_url" : "https://api.github.com/users/jamesob/received_events",
         "repos_url" : "https://api.github.com/users/jamesob/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jamesob/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jamesob/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jamesob"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1453382756"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1453382756"
         }
      },
      "author_association" : "MEMBER",
      "body" : "in the first commit: Any reason to re-order this and remove the doc comment?",
      "commit_id" : "5755454fb5cc4067fc94e2682116e0fc5c9dfc58",
      "created_at" : "2024-01-16T12:49:01Z",
      "diff_hunk" : "@@ -209,6 +212,43 @@ class CMainSignals {\n \n     size_t CallbacksPending();\n \n+    /** Register subscriber */\n+    void RegisterValidationInterface(CValidationInterface* callbacks);\n+    /** Unregister subscriber. DEPRECATED. This is not safe to use when the RPC server or main message handler thread is running. */\n+    void UnregisterValidationInterface(CValidationInterface* callbacks);\n+    /** Unregister all subscribers */\n+    void UnregisterAllValidationInterfaces();\n+\n+    // Alternate registration functions that release a shared_ptr after the last\n+    // notification is sent. These are useful for race-free cleanup, since\n+    // unregistration is nonblocking and can return before the last notification is\n+    // processed.\n+    /** Unregister subscriber */\n+    void UnregisterSharedValidationInterface(std::shared_ptr<CValidationInterface> callbacks);\n+\n+    void RegisterSharedValidationInterface(std::shared_ptr<CValidationInterface>);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1453382756",
      "id" : 1453382756,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585WoNxk",
      "original_commit_id" : "cfb94ef2b3ef6cebd6d01897663c375c969db727",
      "original_line" : 229,
      "original_position" : 146,
      "original_start_line" : 228,
      "path" : "src/validationinterface.h",
      "position" : null,
      "pull_request_review_id" : 1823257728,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1453382756/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2024-01-16T14:42:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1453382756",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/maflcko/events{/privacy}",
         "followers_url" : "https://api.github.com/users/maflcko/followers",
         "following_url" : "https://api.github.com/users/maflcko/following{/other_user}",
         "gists_url" : "https://api.github.com/users/maflcko/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/maflcko",
         "id" : 6399679,
         "login" : "maflcko",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/maflcko/orgs",
         "received_events_url" : "https://api.github.com/users/maflcko/received_events",
         "repos_url" : "https://api.github.com/users/maflcko/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/maflcko/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/maflcko/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/maflcko"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1453405057"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1453405057"
         }
      },
      "author_association" : "MEMBER",
      "body" : "first commit: Why check below, but not here, for nullptr?",
      "commit_id" : "5755454fb5cc4067fc94e2682116e0fc5c9dfc58",
      "created_at" : "2024-01-16T13:08:43Z",
      "diff_hunk" : "@@ -291,7 +291,7 @@ void Shutdown(NodeContext& node)\n \n     // Because these depend on each-other, we make sure that neither can be\n     // using the other before destroying them.\n-    if (node.peerman) UnregisterValidationInterface(node.peerman.get());\n+    if (node.peerman) node.main_signals->UnregisterValidationInterface(node.peerman.get());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1453405057",
      "id" : 1453405057,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585WoTOB",
      "original_commit_id" : "cfb94ef2b3ef6cebd6d01897663c375c969db727",
      "original_line" : 294,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_review_id" : 1823257728,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1453405057/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-16T14:42:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1453405057",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/maflcko/events{/privacy}",
         "followers_url" : "https://api.github.com/users/maflcko/followers",
         "following_url" : "https://api.github.com/users/maflcko/following{/other_user}",
         "gists_url" : "https://api.github.com/users/maflcko/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/maflcko",
         "id" : 6399679,
         "login" : "maflcko",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/maflcko/orgs",
         "received_events_url" : "https://api.github.com/users/maflcko/received_events",
         "repos_url" : "https://api.github.com/users/maflcko/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/maflcko/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/maflcko/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/maflcko"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1453413538"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1453413538"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit in the first commit: Could drop `signals` and use `active_chainstate.GetMainSignals()` instead?",
      "commit_id" : "5755454fb5cc4067fc94e2682116e0fc5c9dfc58",
      "created_at" : "2024-01-16T13:16:10Z",
      "diff_hunk" : "@@ -429,11 +429,12 @@ namespace {\n class MemPoolAccept\n {\n public:\n-    explicit MemPoolAccept(CTxMemPool& mempool, Chainstate& active_chainstate) :\n+    explicit MemPoolAccept(CTxMemPool& mempool, Chainstate& active_chainstate, CMainSignals& signals) :\n         m_pool(mempool),\n         m_view(&m_dummy),\n         m_viewmempool(&active_chainstate.CoinsTip(), m_pool),\n-        m_active_chainstate(active_chainstate)\n+        m_active_chainstate(active_chainstate),\n+        m_signals{signals}",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1453413538",
      "id" : 1453413538,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585WoVSi",
      "original_commit_id" : "cfb94ef2b3ef6cebd6d01897663c375c969db727",
      "original_line" : 437,
      "original_position" : 11,
      "original_start_line" : null,
      "path" : "src/validation.cpp",
      "position" : null,
      "pull_request_review_id" : 1823257728,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1453413538/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-16T14:42:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1453413538",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/maflcko/events{/privacy}",
         "followers_url" : "https://api.github.com/users/maflcko/followers",
         "following_url" : "https://api.github.com/users/maflcko/following{/other_user}",
         "gists_url" : "https://api.github.com/users/maflcko/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/maflcko",
         "id" : 6399679,
         "login" : "maflcko",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/maflcko/orgs",
         "received_events_url" : "https://api.github.com/users/maflcko/received_events",
         "repos_url" : "https://api.github.com/users/maflcko/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/maflcko/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/maflcko/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/maflcko"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1453516899"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1453516899"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Wouldn't it be better to use existing `chainman` references to get the signals reference, instead of using unchecked pointer dereferences? (Same in all other places)",
      "commit_id" : "5755454fb5cc4067fc94e2682116e0fc5c9dfc58",
      "created_at" : "2024-01-16T14:34:51Z",
      "diff_hunk" : "@@ -761,12 +765,12 @@ class ChainImpl : public Chain\n     }\n     std::unique_ptr<Handler> handleNotifications(std::shared_ptr<Notifications> notifications) override\n     {\n-        return std::make_unique<NotificationsHandlerImpl>(std::move(notifications));\n+        return std::make_unique<NotificationsHandlerImpl>(std::move(notifications), *m_node.main_signals);\n     }\n     void waitForNotificationsIfTipChanged(const uint256& old_tip) override\n     {\n         if (!old_tip.IsNull() && old_tip == WITH_LOCK(::cs_main, return chainman().ActiveChain().Tip()->GetBlockHash())) return;\n-        SyncWithValidationInterfaceQueue();\n+        m_node.main_signals->SyncWithValidationInterfaceQueue();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1453516899",
      "id" : 1453516899,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585Wouhj",
      "original_commit_id" : "cfb94ef2b3ef6cebd6d01897663c375c969db727",
      "original_line" : 773,
      "original_position" : 44,
      "original_start_line" : null,
      "path" : "src/node/interfaces.cpp",
      "position" : null,
      "pull_request_review_id" : 1823257728,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1453516899/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-16T14:42:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1453516899",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/maflcko/events{/privacy}",
         "followers_url" : "https://api.github.com/users/maflcko/followers",
         "following_url" : "https://api.github.com/users/maflcko/following{/other_user}",
         "gists_url" : "https://api.github.com/users/maflcko/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/maflcko",
         "id" : 6399679,
         "login" : "maflcko",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/maflcko/orgs",
         "received_events_url" : "https://api.github.com/users/maflcko/received_events",
         "repos_url" : "https://api.github.com/users/maflcko/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/maflcko/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/maflcko/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/maflcko"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1453524696"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1453524696"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit: Any reason to call it \"main\", when main.cpp has long been split up and renamed to validation.cpp? Could call it `validation_signals`, or leave it as is.",
      "commit_id" : "5755454fb5cc4067fc94e2682116e0fc5c9dfc58",
      "created_at" : "2024-01-16T14:40:25Z",
      "diff_hunk" : "@@ -72,6 +73,7 @@ struct NodeContext {\n     std::function<void()> rpc_interruption_point = [] {};\n     std::unique_ptr<KernelNotifications> notifications;\n     std::atomic<int> exit_status{EXIT_SUCCESS};\n+    std::unique_ptr<CMainSignals> main_signals;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1453524696",
      "id" : 1453524696,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585WowbY",
      "original_commit_id" : "cfb94ef2b3ef6cebd6d01897663c375c969db727",
      "original_line" : 76,
      "original_position" : 12,
      "original_start_line" : null,
      "path" : "src/node/context.h",
      "position" : null,
      "pull_request_review_id" : 1823257728,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1453524696/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-16T14:42:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1453524696",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/maflcko/events{/privacy}",
         "followers_url" : "https://api.github.com/users/maflcko/followers",
         "following_url" : "https://api.github.com/users/maflcko/following{/other_user}",
         "gists_url" : "https://api.github.com/users/maflcko/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/maflcko",
         "id" : 6399679,
         "login" : "maflcko",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/maflcko/orgs",
         "received_events_url" : "https://api.github.com/users/maflcko/received_events",
         "repos_url" : "https://api.github.com/users/maflcko/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/maflcko/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/maflcko/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/maflcko"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Thank you for the review @maflcko,\r\n\r\nUpdated d63b2e88780dc78fd531b053653361a0bf3fcbea -> 5755454fb5cc4067fc94e2682116e0fc5c9dfc58 ([noGlobalSignals_1](https://github.com/TheCharlatan/bitcoin/tree/noGlobalSignals_1) -> [noGlobalSignals_2](https://github.com/TheCharlatan/bitcoin/tree/noGlobalSignals_2), [compare](https://github.com/TheCharlatan/bitcoin/compare/noGlobalSignals_1..noGlobalSignals_2))\r\n\r\n* Added a new first scripted-diff commit for renaming `MainSignals` to `ValidationSignals` as suggested by @maflcko's [comment_1](https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1453405057) and [comment_2](https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1453524696). Since most of the touched lines in the scripted-diff end up being touched anyway, this seems like a good opportunity for a rename.\r\n* Addressed @maflcko's [comment](https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1453382756), making the diffs a bit more move-only.\r\n* Addressed @maflcko's [comment](https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1453405057), consistently checking if `node.main_signals` is initialized in `init.cpp`'s `Shutdown()`.\r\n* Addressed @maflcko's [comment](https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1453413538), dropping `m_signals` member in `MemPoolAccept` and instead using `active_chainstate.GetValidationSignals()`.\r\n* Addressed @maflcko's [comment](https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1453516899), using `chainman.m_signals` reference instead of the `m_node.main_signals` `unique_ptr`. Also applied this suggestion in some other places where references to the signals are available.\r\n\r\n\r\n",
      "created_at" : "2024-01-17T08:21:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#issuecomment-1895309927",
      "id" : 1895309927,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28960",
      "node_id" : "IC_kwDOABII585w-CJn",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1895309927/reactions"
      },
      "updated_at" : "2024-01-17T08:21:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1895309927",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1454918683"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1454918683"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Ah, I think we need the full declaration here, because other modules are now instantiating the `CMainSignals`.",
      "commit_id" : "5755454fb5cc4067fc94e2682116e0fc5c9dfc58",
      "created_at" : "2024-01-17T08:22:21Z",
      "diff_hunk" : "@@ -189,16 +155,53 @@ class CValidationInterface {\n     friend class ValidationInterfaceTest;\n };\n \n-class MainSignalsImpl;\n+/**\n+ * MainSignalsImpl manages a list of shared_ptr<CValidationInterface> callbacks.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1454918683",
      "id" : 1454918683,
      "in_reply_to_id" : 1440249695,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585WuEwb",
      "original_commit_id" : "4b9a37e461aee0c24f798123cdb023a783a130c6",
      "original_line" : 160,
      "original_position" : 74,
      "original_start_line" : null,
      "path" : "src/validationinterface.h",
      "position" : null,
      "pull_request_review_id" : 1826730420,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1454918683/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-17T08:22:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1454918683",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1455548750"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1455548750"
         }
      },
      "author_association" : "MEMBER",
      "body" : "second commit: I still don't understand why sometimes a nullptr check is done and sometimes not",
      "commit_id" : "5755454fb5cc4067fc94e2682116e0fc5c9dfc58",
      "created_at" : "2024-01-17T13:21:20Z",
      "diff_hunk" : "@@ -399,7 +399,7 @@ bool BaseIndex::StartBackgroundSync()\n \n void BaseIndex::Stop()\n {\n-    UnregisterValidationInterface(this);\n+    m_chain->context()->validation_signals->UnregisterValidationInterface(this);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1455548750",
      "id" : 1455548750,
      "line" : 402,
      "node_id" : "PRRC_kwDOABII585WwelO",
      "original_commit_id" : "a8267363f2cf70d9e63a6cac177437e9fd3193b4",
      "original_line" : 402,
      "original_position" : 23,
      "original_start_line" : null,
      "path" : "src/index/base.cpp",
      "position" : 23,
      "pull_request_review_id" : 1827284733,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1455548750/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-17T14:17:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1455548750",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/maflcko/events{/privacy}",
         "followers_url" : "https://api.github.com/users/maflcko/followers",
         "following_url" : "https://api.github.com/users/maflcko/following{/other_user}",
         "gists_url" : "https://api.github.com/users/maflcko/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/maflcko",
         "id" : 6399679,
         "login" : "maflcko",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/maflcko/orgs",
         "received_events_url" : "https://api.github.com/users/maflcko/received_events",
         "repos_url" : "https://api.github.com/users/maflcko/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/maflcko/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/maflcko/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/maflcko"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1455680501"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1455680501"
         }
      },
      "author_association" : "MEMBER",
      "body" : "What is the point of asserting here, when previously it wasn't (and already ran into UB)?",
      "commit_id" : "5755454fb5cc4067fc94e2682116e0fc5c9dfc58",
      "created_at" : "2024-01-17T14:16:45Z",
      "diff_hunk" : "@@ -1504,9 +1509,13 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\n     LogPrintf(\"* Using %.1f MiB for in-memory UTXO set (plus up to %.1f MiB of unused mempool space)\\n\", cache_sizes.coins * (1.0 / 1024 / 1024), mempool_opts.max_size_bytes * (1.0 / 1024 / 1024));\n \n     for (bool fLoaded = false; !fLoaded && !ShutdownRequested(node);) {\n-        node.mempool = std::make_unique<CTxMemPool>(mempool_opts);\n+        node.mempool = std::make_unique<CTxMemPool>(mempool_opts, *Assert(node.validation_signals));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1455680501",
      "id" : 1455680501,
      "line" : 1506,
      "node_id" : "PRRC_kwDOABII585Ww-v1",
      "original_commit_id" : "a8267363f2cf70d9e63a6cac177437e9fd3193b4",
      "original_line" : 1512,
      "original_position" : 85,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : 94,
      "pull_request_review_id" : 1827284733,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1455680501/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-17T14:17:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1455680501",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/maflcko/events{/privacy}",
         "followers_url" : "https://api.github.com/users/maflcko/followers",
         "following_url" : "https://api.github.com/users/maflcko/following{/other_user}",
         "gists_url" : "https://api.github.com/users/maflcko/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/maflcko",
         "id" : 6399679,
         "login" : "maflcko",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/maflcko/orgs",
         "received_events_url" : "https://api.github.com/users/maflcko/received_events",
         "repos_url" : "https://api.github.com/users/maflcko/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/maflcko/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/maflcko/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/maflcko"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1455681352"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1455681352"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Maybe assert in the first line of this function and create a reference?",
      "commit_id" : "5755454fb5cc4067fc94e2682116e0fc5c9dfc58",
      "created_at" : "2024-01-17T14:17:04Z",
      "diff_hunk" : "@@ -1504,9 +1509,13 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\n     LogPrintf(\"* Using %.1f MiB for in-memory UTXO set (plus up to %.1f MiB of unused mempool space)\\n\", cache_sizes.coins * (1.0 / 1024 / 1024), mempool_opts.max_size_bytes * (1.0 / 1024 / 1024));\n \n     for (bool fLoaded = false; !fLoaded && !ShutdownRequested(node);) {\n-        node.mempool = std::make_unique<CTxMemPool>(mempool_opts);\n+        node.mempool = std::make_unique<CTxMemPool>(mempool_opts, *Assert(node.validation_signals));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1455681352",
      "id" : 1455681352,
      "in_reply_to_id" : 1455680501,
      "line" : 1506,
      "node_id" : "PRRC_kwDOABII585Ww-9I",
      "original_commit_id" : "a8267363f2cf70d9e63a6cac177437e9fd3193b4",
      "original_line" : 1512,
      "original_position" : 85,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : 94,
      "pull_request_review_id" : 1827284733,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1455681352/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-17T14:17:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1455681352",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/maflcko/events{/privacy}",
         "followers_url" : "https://api.github.com/users/maflcko/followers",
         "following_url" : "https://api.github.com/users/maflcko/following{/other_user}",
         "gists_url" : "https://api.github.com/users/maflcko/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/maflcko",
         "id" : 6399679,
         "login" : "maflcko",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/maflcko/orgs",
         "received_events_url" : "https://api.github.com/users/maflcko/received_events",
         "repos_url" : "https://api.github.com/users/maflcko/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/maflcko/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/maflcko/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/maflcko"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1455749485"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1455749485"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I'm also not sure what to do with this one. We seem to be fine with not doing nullptr checks for very similar code, e.g. `base.cpp:89`, so I did not include any checks here. Maybe it is better to add a reference to the signals to `BaseIndex`?",
      "commit_id" : "5755454fb5cc4067fc94e2682116e0fc5c9dfc58",
      "created_at" : "2024-01-17T14:43:44Z",
      "diff_hunk" : "@@ -399,7 +399,7 @@ bool BaseIndex::StartBackgroundSync()\n \n void BaseIndex::Stop()\n {\n-    UnregisterValidationInterface(this);\n+    m_chain->context()->validation_signals->UnregisterValidationInterface(this);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1455749485",
      "id" : 1455749485,
      "in_reply_to_id" : 1455548750,
      "line" : 402,
      "node_id" : "PRRC_kwDOABII585WxPlt",
      "original_commit_id" : "a8267363f2cf70d9e63a6cac177437e9fd3193b4",
      "original_line" : 402,
      "original_position" : 23,
      "original_start_line" : null,
      "path" : "src/index/base.cpp",
      "position" : 23,
      "pull_request_review_id" : 1827466242,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1455749485/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-17T14:43:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1455749485",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1455760981"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1455760981"
         }
      },
      "author_association" : "MEMBER",
      "body" : "> We seem to be fine with not doing nullptr checks for very similar code, e.g. base.cpp:89\r\n\r\nThat isn't run during shutdown, but during start, so the code path should be exercised in tests. Also, it is only \"temporary\", so will be removed in any case. Whereas the code here is run during shutdown, for which it is hard (impossible?) to test all code path permutations. Also it isn't temporary, is it?",
      "commit_id" : "5755454fb5cc4067fc94e2682116e0fc5c9dfc58",
      "created_at" : "2024-01-17T14:48:15Z",
      "diff_hunk" : "@@ -399,7 +399,7 @@ bool BaseIndex::StartBackgroundSync()\n \n void BaseIndex::Stop()\n {\n-    UnregisterValidationInterface(this);\n+    m_chain->context()->validation_signals->UnregisterValidationInterface(this);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1455760981",
      "id" : 1455760981,
      "in_reply_to_id" : 1455548750,
      "line" : 402,
      "node_id" : "PRRC_kwDOABII585WxSZV",
      "original_commit_id" : "a8267363f2cf70d9e63a6cac177437e9fd3193b4",
      "original_line" : 402,
      "original_position" : 23,
      "original_start_line" : null,
      "path" : "src/index/base.cpp",
      "position" : 23,
      "pull_request_review_id" : 1827476586,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1455760981/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-17T14:48:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1455760981",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/maflcko/events{/privacy}",
         "followers_url" : "https://api.github.com/users/maflcko/followers",
         "following_url" : "https://api.github.com/users/maflcko/following{/other_user}",
         "gists_url" : "https://api.github.com/users/maflcko/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/maflcko",
         "id" : 6399679,
         "login" : "maflcko",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/maflcko/orgs",
         "received_events_url" : "https://api.github.com/users/maflcko/received_events",
         "repos_url" : "https://api.github.com/users/maflcko/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/maflcko/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/maflcko/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/maflcko"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1455808582"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1455808582"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Right, not temporary, and in the `Stop` case we should guard against early destruction of the signals in the `Shutdown` procedure. I'll add an `Assert` for this case.",
      "commit_id" : "487b12e18ce007379a997da48b5ee97f459f6342",
      "created_at" : "2024-01-17T15:07:47Z",
      "diff_hunk" : "@@ -399,7 +399,7 @@ bool BaseIndex::StartBackgroundSync()\n \n void BaseIndex::Stop()\n {\n-    UnregisterValidationInterface(this);\n+    m_chain->context()->validation_signals->UnregisterValidationInterface(this);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1455808582",
      "id" : 1455808582,
      "in_reply_to_id" : 1455548750,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585WxeBG",
      "original_commit_id" : "a8267363f2cf70d9e63a6cac177437e9fd3193b4",
      "original_line" : 402,
      "original_position" : 23,
      "original_start_line" : null,
      "path" : "src/index/base.cpp",
      "position" : null,
      "pull_request_review_id" : 1827522001,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1455808582/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-17T15:07:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1455808582",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "5755454fb5cc4067fc94e2682116e0fc5c9dfc58 -> 487b12e18ce007379a997da48b5ee97f459f6342 ([noGlobalSignals_2](https://github.com/TheCharlatan/bitcoin/tree/noGlobalSignals_2) -> [noGlobalSignals_3](https://github.com/TheCharlatan/bitcoin/tree/noGlobalSignals_3), [compare](https://github.com/TheCharlatan/bitcoin/compare/noGlobalSignals_2..noGlobalSignals_3))\r\n\r\n* Addressed @maflcko's [comment](https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1455548750), adding `Assert` to guard against early destruction of the signals in `base.cpp`.\r\n* Addressed @maflcko's [comment](https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1455680501), creating a reference of the signals at the top of `AppInitMain`.\r\n* Applied the same pattern to the `scheduler` in `AppInitMain`.",
      "created_at" : "2024-01-17T16:34:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#issuecomment-1896179668",
      "id" : 1896179668,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28960",
      "node_id" : "IC_kwDOABII585xBWfU",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1896179668/reactions"
      },
      "updated_at" : "2024-01-17T16:34:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1896179668",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK. This change removes removes `g_signals` and lets kernel applications call validation functions with separate schedulers so signals from different functions don't need to interfere with each other. It also lets kernel applications define their own scheduling logic, which may be useful if they want to control when notifications are processed.\r\n\r\nI think naming and organization could be improved though. Like `kernel::ValidationInterfaceQueue` seems seems like it should be called `util::SchedulerInterface` (since it is an abstract class and doesn't have to do with validation), and `DummyQueue` seems like it should be called `util::ImmediateScheduler` (since it is a fully functional class and not a dummy object).\r\n\r\nI'm not totally sure that `ImmediateScheduler` will be sufficient for libbitcoinkernel applications, and seems possible application may want to use `SingleThreadedSchedulerClient` instead (which I would call `SerialScheduler`) instead of an immediate scheduler, to avoiding having to spawn their own threads and deal with potential deadlocks. But it seems fine to exclude for now since we can always include it later if there is a use-case.\r\n\r\nEDIT: If we want to avoid \"Scheduler\" in the interface name because the interface doesn't let the caller control scheduling (the only scheduling option for callers is _whenever_) you could replace Scheduler in suggestions above with something like TaskQueue, WorkQueue, CallbackRunner, etc. But I think Scheduler is ok because the class controls scheduling even if the caller doesn't.",
      "created_at" : "2024-01-17T21:57:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#issuecomment-1896988088",
      "id" : 1896988088,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28960",
      "node_id" : "IC_kwDOABII585xEb24",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1896988088/reactions"
      },
      "updated_at" : "2024-01-17T22:23:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1896988088",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Thank you for looking this over @ryanofsky,\r\n\r\nUpdated 487b12e18ce007379a997da48b5ee97f459f6342 -> e3592ee55756c08bda3075b54cbff719d3fb964f ([noGlobalSignals_3](https://github.com/TheCharlatan/bitcoin/tree/noGlobalSignals_3) -> [noGlobalSignals_4](https://github.com/TheCharlatan/bitcoin/tree/noGlobalSignals_4), [compare](https://github.com/TheCharlatan/bitcoin/compare/noGlobalSignals_3..noGlobalSignals_4))\r\n\r\n* Addressed @ryanofsky's [comment](https://github.com/bitcoin/bitcoin/pull/28960#issuecomment-1896988088), renaming `ValidationInterfaceQueue` to `TaskQueueInterface` and `DummyQueue` to `ImmediateTaskQueue`.\r\n* Addressed @ryanofsky's [comment](https://github.com/bitcoin/bitcoin/pull/28960#issuecomment-1896988088), moving `ImmediateTaskQueue` and `TaskQueueInterface` to their own modules in `util/`.\r\n",
      "created_at" : "2024-01-18T10:32:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#issuecomment-1898213458",
      "id" : 1898213458,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28960",
      "node_id" : "IC_kwDOABII585xJHBS",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1898213458/reactions"
      },
      "updated_at" : "2024-01-18T10:32:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1898213458",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1457639359"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1457639359"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"scripted-diff: Rename MainSignals to ValidationSignals\" (0fd494c4a856d7aefd4fd94a4d5f18ab5e59c2a2)\r\n\r\nNot important, but I think it would be a little nicer if scripted diff was last commit instead of first commit, because it's hard to tell whether renames are good or bad when the code is in flux, and better when you can see that names match state of the final code. Moving the scripted diff would also reduce churn within the PR so commit diffs are smaller and lines like this (which are being completely replaced later) do not change multiple times.",
      "commit_id" : "492ff2c504d1da3f4ae8704a5485a286ee76f0d9",
      "created_at" : "2024-01-18T15:45:29Z",
      "diff_hunk" : "@@ -77,7 +77,7 @@ int main(int argc, char* argv[])\n     // Gather some entropy once per minute.\n     scheduler.scheduleEvery(RandAddPeriodic, std::chrono::minutes{1});\n \n-    GetMainSignals().RegisterBackgroundSignalScheduler(scheduler);\n+    GetValidationSignals().RegisterBackgroundSignalScheduler(scheduler);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1457639359",
      "id" : 1457639359,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585W4c-_",
      "original_commit_id" : "0fd494c4a856d7aefd4fd94a4d5f18ab5e59c2a2",
      "original_line" : 80,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/bitcoin-chainstate.cpp",
      "position" : null,
      "pull_request_review_id" : 1830011358,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1457639359/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-18T18:49:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1457639359",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1457656786"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1457656786"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"[refactor] De-globalize ValidationSignals\" (6ffa572edd9693a3217eb201b9d147b44c5b4eb5)\r\n\r\nThese wallet tests should be calling `wallet.chain().waitForNotificationsIfTipChanged({})` instead of `test_setup->m_node.validation_signals->SyncWithValidationInterfaceQueue`. This would make them more realistic and less tied to test and node internals.",
      "commit_id" : "492ff2c504d1da3f4ae8704a5485a286ee76f0d9",
      "created_at" : "2024-01-18T15:58:05Z",
      "diff_hunk" : "@@ -39,7 +39,7 @@ static void WalletBalance(benchmark::Bench& bench, const bool set_dirty, const b\n         generatetoaddress(test_setup->m_node, address_mine.value_or(ADDRESS_WATCHONLY));\n         generatetoaddress(test_setup->m_node, ADDRESS_WATCHONLY);\n     }\n-    SyncWithValidationInterfaceQueue();\n+    test_setup->m_node.validation_signals->SyncWithValidationInterfaceQueue();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1457656786",
      "id" : 1457656786,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585W4hPS",
      "original_commit_id" : "6ffa572edd9693a3217eb201b9d147b44c5b4eb5",
      "original_line" : 42,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/bench/wallet_balance.cpp",
      "position" : null,
      "pull_request_review_id" : 1830011358,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1457656786/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-18T18:49:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1457656786",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1457662881"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1457662881"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"[refactor] De-globalize ValidationSignals\" (6ffa572edd9693a3217eb201b9d147b44c5b4eb5)\r\n\r\nMentioned earlier, but you should drop the new parameter here and just call `wallet->chain().waitForNotificationsIfTipChanged({})` instead of `SyncWithValidationInterfaceQueue`, for the same reasons",
      "commit_id" : "492ff2c504d1da3f4ae8704a5485a286ee76f0d9",
      "created_at" : "2024-01-18T16:02:26Z",
      "diff_hunk" : "@@ -69,9 +69,9 @@ std::shared_ptr<CWallet> TestLoadWallet(WalletContext& context)\n     return TestLoadWallet(std::move(database), context, options.create_flags);\n }\n \n-void TestUnloadWallet(std::shared_ptr<CWallet>&& wallet)\n+void TestUnloadWallet(std::shared_ptr<CWallet>&& wallet, ValidationSignals& validation_signals)\n {\n-    SyncWithValidationInterfaceQueue();\n+    validation_signals.SyncWithValidationInterfaceQueue();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1457662881",
      "id" : 1457662881,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585W4iuh",
      "original_commit_id" : "6ffa572edd9693a3217eb201b9d147b44c5b4eb5",
      "original_line" : 74,
      "original_position" : 8,
      "original_start_line" : null,
      "path" : "src/wallet/test/util.cpp",
      "position" : null,
      "pull_request_review_id" : 1830011358,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1457662881/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-18T18:49:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1457662881",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1457667372"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1457667372"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"[refactor] De-globalize ValidationSignals\" (6ffa572edd9693a3217eb201b9d147b44c5b4eb5)\r\n\r\nWould suggest organizing the parameters {validation_signals, interrupt, chainman_opts, blockman_opts} so ChainstateManager dependencies are first and ChainstateManager options are last. Also so dependencies and options are both ordered from high level to low level.",
      "commit_id" : "492ff2c504d1da3f4ae8704a5485a286ee76f0d9",
      "created_at" : "2024-01-18T16:05:53Z",
      "diff_hunk" : "@@ -126,7 +128,7 @@ int main(int argc, char* argv[])\n         .notifications = chainman_opts.notifications,\n     };\n     util::SignalInterrupt interrupt;\n-    ChainstateManager chainman{interrupt, chainman_opts, blockman_opts};\n+    ChainstateManager chainman{interrupt, chainman_opts, blockman_opts, validation_signals};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1457667372",
      "id" : 1457667372,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585W4j0s",
      "original_commit_id" : "6ffa572edd9693a3217eb201b9d147b44c5b4eb5",
      "original_line" : 131,
      "original_position" : 19,
      "original_start_line" : null,
      "path" : "src/bitcoin-chainstate.cpp",
      "position" : null,
      "pull_request_review_id" : 1830011358,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1457667372/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-18T18:49:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1457667372",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1457671335"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1457671335"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"[refactor] De-globalize ValidationSignals\" (6ffa572edd9693a3217eb201b9d147b44c5b4eb5)\r\n\r\nNote: This is ugly, but #24230 replaces it with `m_chain->attachChain()`. Other changes to indexing code in this PR, which also don't look great, have similar replacements.",
      "commit_id" : "492ff2c504d1da3f4ae8704a5485a286ee76f0d9",
      "created_at" : "2024-01-18T16:08:57Z",
      "diff_hunk" : "@@ -89,7 +89,7 @@ bool BaseIndex::Init()\n         return &m_chain->context()->chainman->GetChainstateForIndexing());\n     // Register to validation interface before setting the 'm_synced' flag, so that\n     // callbacks are not missed once m_synced is true.\n-    RegisterValidationInterface(this);\n+    m_chain->context()->validation_signals->RegisterValidationInterface(this);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1457671335",
      "id" : 1457671335,
      "line" : 92,
      "node_id" : "PRRC_kwDOABII585W4kyn",
      "original_commit_id" : "6ffa572edd9693a3217eb201b9d147b44c5b4eb5",
      "original_line" : 92,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/index/base.cpp",
      "position" : 5,
      "pull_request_review_id" : 1830011358,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1457671335/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-18T18:49:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1457671335",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1457678045"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1457678045"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"[refactor] De-globalize ValidationSignals\" (6ffa572edd9693a3217eb201b9d147b44c5b4eb5)\r\n\r\nSlight preference for passing validation_signals dependency parameter first and mempool_opts options parameter second, for consistency with ChainstateManager, and since signals dependency is required in theory it should be possible to omit the options parameter.\r\n\r\nIt might also be worth asking whether the signals parameter actually should be required, since mempool class does not need to send signals to function. We could add a `ValidationSignals*` option to `CTxMemPool::Options` that is allowed to be null, as an alternative to making this a required parameter.",
      "commit_id" : "492ff2c504d1da3f4ae8704a5485a286ee76f0d9",
      "created_at" : "2024-01-18T16:13:53Z",
      "diff_hunk" : "@@ -1504,9 +1510,13 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\n     LogPrintf(\"* Using %.1f MiB for in-memory UTXO set (plus up to %.1f MiB of unused mempool space)\\n\", cache_sizes.coins * (1.0 / 1024 / 1024), mempool_opts.max_size_bytes * (1.0 / 1024 / 1024));\n \n     for (bool fLoaded = false; !fLoaded && !ShutdownRequested(node);) {\n-        node.mempool = std::make_unique<CTxMemPool>(mempool_opts);\n+        node.mempool = std::make_unique<CTxMemPool>(mempool_opts, validation_signals);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1457678045",
      "id" : 1457678045,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585W4mbd",
      "original_commit_id" : "6ffa572edd9693a3217eb201b9d147b44c5b4eb5",
      "original_line" : 1513,
      "original_position" : 93,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_review_id" : 1830011358,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1457678045/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-18T18:49:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1457678045",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1457683117"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1457683117"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"[refactor] De-globalize ValidationSignals\" (6ffa572edd9693a3217eb201b9d147b44c5b4eb5)\r\n\r\nNote: At some point we should see if it makes sense to deduplicate this function with `AppInit`  and `BasicTestingSetup::BasicTestingSetup` since all three functions are doing very similar things.",
      "commit_id" : "492ff2c504d1da3f4ae8704a5485a286ee76f0d9",
      "created_at" : "2024-01-18T16:17:43Z",
      "diff_hunk" : "@@ -99,6 +99,7 @@ class NodeImpl : public Node\n         if (!AppInitBasicSetup(args(), Assert(context())->exit_status)) return false;\n         if (!AppInitParameterInteraction(args())) return false;\n \n+        m_context->validation_signals = std::make_unique<ValidationSignals>();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1457683117",
      "id" : 1457683117,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585W4nqt",
      "original_commit_id" : "6ffa572edd9693a3217eb201b9d147b44c5b4eb5",
      "original_line" : 102,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/node/interfaces.cpp",
      "position" : null,
      "pull_request_review_id" : 1830011358,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1457683117/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-18T18:49:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1457683117",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1457687097"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1457687097"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"[refactor] De-globalize ValidationSignals\" (6ffa572edd9693a3217eb201b9d147b44c5b4eb5)\r\n\r\nWould again suggest making make signals parameter first. `signals` is the hard dependency and input, `notifications` is the option and output.",
      "commit_id" : "492ff2c504d1da3f4ae8704a5485a286ee76f0d9",
      "created_at" : "2024-01-18T16:20:02Z",
      "diff_hunk" : "@@ -459,17 +460,20 @@ class NotificationsProxy : public CValidationInterface\n \n class NotificationsHandlerImpl : public Handler\n {\n+private:\n+    ValidationSignals& m_signals;\n+\n public:\n-    explicit NotificationsHandlerImpl(std::shared_ptr<Chain::Notifications> notifications)\n-        : m_proxy(std::make_shared<NotificationsProxy>(std::move(notifications)))\n+    explicit NotificationsHandlerImpl(std::shared_ptr<Chain::Notifications> notifications, ValidationSignals& signals)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1457687097",
      "id" : 1457687097,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585W4oo5",
      "original_commit_id" : "6ffa572edd9693a3217eb201b9d147b44c5b4eb5",
      "original_line" : 467,
      "original_position" : 18,
      "original_start_line" : null,
      "path" : "src/node/interfaces.cpp",
      "position" : null,
      "pull_request_review_id" : 1830011358,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1457687097/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-18T18:49:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1457687097",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1457699474"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1457699474"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"[refactor] De-globalize ValidationSignals\" (6ffa572edd9693a3217eb201b9d147b44c5b4eb5)\r\n\r\n`m_signals` declaration should be moved directly above `m_proxy` declaration. IMO it is a bad practice to mix up method declarations and variable declarations in a class definition. The most important thing you can know about a class is what it information contains and what it represents, and that is difficult to do if you can't easily see a list of its member variables.\r\n\r\nAdditionally, all members of these classes should all be public to reduce boilerplate:\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/6ffa572edd9693a3217eb201b9d147b44c5b4eb5/src/node/interfaces.cpp#L75-L76",
      "commit_id" : "492ff2c504d1da3f4ae8704a5485a286ee76f0d9",
      "created_at" : "2024-01-18T16:28:47Z",
      "diff_hunk" : "@@ -459,17 +460,20 @@ class NotificationsProxy : public CValidationInterface\n \n class NotificationsHandlerImpl : public Handler\n {\n+private:\n+    ValidationSignals& m_signals;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1457699474",
      "id" : 1457699474,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585W4rqS",
      "original_commit_id" : "6ffa572edd9693a3217eb201b9d147b44c5b4eb5",
      "original_line" : 464,
      "original_position" : 13,
      "original_start_line" : null,
      "path" : "src/node/interfaces.cpp",
      "position" : null,
      "pull_request_review_id" : 1830011358,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1457699474/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-18T18:49:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1457699474",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1457711001"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1457711001"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"[refactor] De-globalize ValidationSignals\" (6ffa572edd9693a3217eb201b9d147b44c5b4eb5)\r\n\r\nAny particular reason this is called m_signal not m_signals like the rest of the code? It is true that the Call method only sends one signal, but that is a property of the Call method, not the class. The Call method could easily send multiple signals, or another method could.",
      "commit_id" : "492ff2c504d1da3f4ae8704a5485a286ee76f0d9",
      "created_at" : "2024-01-18T16:37:43Z",
      "diff_hunk" : "@@ -64,14 +64,15 @@ class TestInterface : public CValidationInterface\n     {\n         if (m_on_call) m_on_call();\n     }\n-    static void Call()\n+    void Call()\n     {\n         CBlock block;\n         BlockValidationState state;\n-        GetValidationSignals().BlockChecked(block, state);\n+        m_signal.BlockChecked(block, state);\n     }\n     std::function<void()> m_on_call;\n     std::function<void()> m_on_destroy;\n+    ValidationSignals& m_signal;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1457711001",
      "id" : 1457711001,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585W4ueZ",
      "original_commit_id" : "6ffa572edd9693a3217eb201b9d147b44c5b4eb5",
      "original_line" : 75,
      "original_position" : 45,
      "original_start_line" : null,
      "path" : "src/test/validationinterface_tests.cpp",
      "position" : null,
      "pull_request_review_id" : 1830011358,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1457711001/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-18T18:49:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1457711001",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1457719624"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1457719624"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"[refactor] De-globalize ValidationSignals\" (6ffa572edd9693a3217eb201b9d147b44c5b4eb5)\r\n\r\nI think it would make sense to move this member variable declaration after `mapDeltas` and before `m_max_size_bytes` member variable declarations below. Both `m_signals` and `m_max_size_bytes` are public members that are externally controlled (passed in as constructor arguments) so they would seem to belong together.",
      "commit_id" : "492ff2c504d1da3f4ae8704a5485a286ee76f0d9",
      "created_at" : "2024-01-18T16:44:33Z",
      "diff_hunk" : "@@ -396,6 +397,9 @@ class CTxMemPool\n     using Limits = kernel::MemPoolLimits;\n \n     uint64_t CalculateDescendantMaximum(txiter entry) const EXCLUSIVE_LOCKS_REQUIRED(cs);\n+\n+    ValidationSignals& m_signals;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1457719624",
      "id" : 1457719624,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585W4wlI",
      "original_commit_id" : "6ffa572edd9693a3217eb201b9d147b44c5b4eb5",
      "original_line" : 401,
      "original_position" : 13,
      "original_start_line" : null,
      "path" : "src/txmempool.h",
      "position" : null,
      "pull_request_review_id" : 1830011358,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1457719624/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-18T18:49:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1457719624",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1457724122"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1457724122"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"[refactor] De-globalize ValidationSignals\" (6ffa572edd9693a3217eb201b9d147b44c5b4eb5)\r\n\r\nIt seems like it would be less verbose and more appropriate to use `m_pool.m_signals` instead of `m_active_chainstate.GetValidationSignals()` here and below on line 1272",
      "commit_id" : "492ff2c504d1da3f4ae8704a5485a286ee76f0d9",
      "created_at" : "2024-01-18T16:48:05Z",
      "diff_hunk" : "@@ -1220,7 +1220,7 @@ bool MemPoolAccept::SubmitPackage(const ATMPArgs& args, std::vector<Workspace>&\n                                                        args.m_bypass_limits, args.m_package_submission,\n                                                        IsCurrentForFeeEstimation(m_active_chainstate),\n                                                        m_pool.HasNoInputsOf(tx));\n-        GetValidationSignals().TransactionAddedToMempool(tx_info, m_pool.GetAndIncrementSequence());\n+        m_active_chainstate.GetValidationSignals().TransactionAddedToMempool(tx_info, m_pool.GetAndIncrementSequence());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1457724122",
      "id" : 1457724122,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585W4xra",
      "original_commit_id" : "6ffa572edd9693a3217eb201b9d147b44c5b4eb5",
      "original_line" : 1223,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/validation.cpp",
      "position" : null,
      "pull_request_review_id" : 1830011358,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1457724122/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-18T18:49:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1457724122",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1457731191"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1457731191"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"[refactor] De-globalize ValidationSignals\" (6ffa572edd9693a3217eb201b9d147b44c5b4eb5)\r\n\r\nMaybe consider eliminating this and just using `m_chainman.m_signals` directly. IMO that would be clearer and more consistent than having code occasionally call this method, and this method isn't actually called very many places.",
      "commit_id" : "492ff2c504d1da3f4ae8704a5485a286ee76f0d9",
      "created_at" : "2024-01-18T16:53:32Z",
      "diff_hunk" : "@@ -1705,6 +1705,11 @@ const CBlockIndex* Chainstate::SnapshotBase()\n     return m_cached_snapshot_base;\n }\n \n+ValidationSignals& Chainstate::GetValidationSignals()",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1457731191",
      "id" : 1457731191,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585W4zZ3",
      "original_commit_id" : "6ffa572edd9693a3217eb201b9d147b44c5b4eb5",
      "original_line" : 1708,
      "original_position" : 22,
      "original_start_line" : null,
      "path" : "src/validation.cpp",
      "position" : null,
      "pull_request_review_id" : 1830011358,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1457731191/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-18T18:49:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1457731191",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1457739617"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1457739617"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"[refactor] De-globalize ValidationSignals\" (6ffa572edd9693a3217eb201b9d147b44c5b4eb5)\r\n\r\nI don't see a reason this class should be to be moved to the header, instead of just forward-declared like previously.\r\n\r\nI'm guessing maybe you were seeing link errors due to the `std::unique_ptr<ValidationSignalsImpl>` member below? If so this can be fixed by adding `ValidationSignals();` `~ValidationSignals();` to the header file and definitions to the cpp file. That way the compiler will not try to generate constructors and destructors while processing the header file and complain about the incomplete ValidationSignalsImpl definition.\r\n",
      "commit_id" : "492ff2c504d1da3f4ae8704a5485a286ee76f0d9",
      "created_at" : "2024-01-18T17:00:13Z",
      "diff_hunk" : "@@ -189,16 +155,54 @@ class CValidationInterface {\n     friend class ValidationInterfaceTest;\n };\n \n-class ValidationSignalsImpl;\n+/**\n+ * ValidationSignalsImpl manages a list of shared_ptr<CValidationInterface> callbacks.\n+ *\n+ * A std::unordered_map is used to track what callbacks are currently\n+ * registered, and a std::list is used to store the callbacks that are\n+ * currently registered as well as any callbacks that are just unregistered\n+ * and about to be deleted when they are done executing.\n+ */\n+class ValidationSignalsImpl",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1457739617",
      "id" : 1457739617,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585W41dh",
      "original_commit_id" : "6ffa572edd9693a3217eb201b9d147b44c5b4eb5",
      "original_line" : 166,
      "original_position" : 81,
      "original_start_line" : null,
      "path" : "src/validationinterface.h",
      "position" : null,
      "pull_request_review_id" : 1830011358,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1457739617/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-18T18:49:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1457739617",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1457757251"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1457757251"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"[refactor] De-globalize ValidationSignals\" (6ffa572edd9693a3217eb201b9d147b44c5b4eb5)\r\n\r\nThis commit is very large, and would suggest splitting it up. The changes to validationinterface.h and validationinterface.cpp are unlike the other changes in the commit, and it would be nice if they could be done separately in an earlier commit. All the other changes are basically small 1-line replacements and insertions, while the validationinterface.h and validationinterface.cpp changes are moving around larger blocks of code.\r\n\r\nIt should be pretty easy to split this commit up by adding the new ValidationSignals methods with documention in an the earlier commit, while keeping the old standalone functions as one-line wrappers without documentation, and then deleting the wrappers in the next commit.",
      "commit_id" : "492ff2c504d1da3f4ae8704a5485a286ee76f0d9",
      "created_at" : "2024-01-18T17:15:09Z",
      "diff_hunk" : "@@ -209,6 +213,43 @@ class ValidationSignals {\n \n     size_t CallbacksPending();\n \n+    /** Register subscriber */",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1457757251",
      "id" : 1457757251,
      "line" : 180,
      "node_id" : "PRRC_kwDOABII585W45xD",
      "original_commit_id" : "6ffa572edd9693a3217eb201b9d147b44c5b4eb5",
      "original_line" : 180,
      "original_position" : 133,
      "original_start_line" : null,
      "path" : "src/validationinterface.h",
      "position" : 109,
      "pull_request_review_id" : 1830011358,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1457757251/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-18T18:49:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1457757251",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1457779597"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1457779597"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"[refactor] Make MainSignalsImpl RAII styled\" (06191f38997a02460482efa6b519607406fe5c44)\r\n\r\nOk, looking at this diff, now I understand why `ValidationSignalsImpl` was moved from the .cpp to the .h in the previous commit.\r\n\r\nBut I would not recommend this change, because it makes the previous diff and this diff both substantially larger than they need to be, and it makes the code organization nonsensical.\r\n\r\nPreviously, the code was using a pointer-to-implementation pattern to keep the external class definition smaller and more stable. Arguably there's isn't a reason to do this anymore, because the external class isn't a global variable that is initialized before main() runs anymore. But the logical way to clean up it would be to consolidate the two class definitions into a single class, not just embed one class inside the other class.\r\n\r\nI think the best thing to do here would be to keep this m_internals as a unique_ptr to reduce the size of this PR and not make unnecessary changes. You can still achieve the goal of making ValidationSignals class an RAII class by just doing `m_internals = std::make_unique<ValidationSignalsImpl>(scheduler);` in the constructor rather than in a separate ` `RegisterBackgroundSignalScheduler` method. This would eliminate most of the diffs in this commit and keep the ValidationSignals implementation coherent.",
      "commit_id" : "492ff2c504d1da3f4ae8704a5485a286ee76f0d9",
      "created_at" : "2024-01-18T17:34:18Z",
      "diff_hunk" : "@@ -201,13 +201,11 @@ class ValidationSignalsImpl\n \n class ValidationSignals {\n private:\n-    std::unique_ptr<ValidationSignalsImpl> m_internals;\n+    ValidationSignalsImpl m_internals;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1457779597",
      "id" : 1457779597,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585W4_ON",
      "original_commit_id" : "06191f38997a02460482efa6b519607406fe5c44",
      "original_line" : 204,
      "original_position" : 5,
      "original_start_line" : 204,
      "path" : "src/validationinterface.h",
      "position" : null,
      "pull_request_review_id" : 1830011358,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1457779597/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "LEFT",
      "subject_type" : "line",
      "updated_at" : "2024-01-18T18:49:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1457779597",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1457796715"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1457796715"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"[refactor] Move scheduler client to CMainSignals\" (3a6241064ed8bc35d7e159978d40049ed3680a44)\r\n\r\nI don't think this change makes sense, and would suggest reverting. The point of the internals class is to contain the internals, following the pointer-to-implementation pattern (https://en.cppreference.com/w/cpp/language/pimpl) and keeping the ValidationSignals internal reliance on the scheduder out of the header, and out of view of callers.\r\n\r\nIf some of the internals are inside the internals class and other internals are outside of the internals class, it creates an arbitrary and hard to explain inconsistency. There should be some real benefits to this change for it to make sense.",
      "commit_id" : "492ff2c504d1da3f4ae8704a5485a286ee76f0d9",
      "created_at" : "2024-01-18T17:49:50Z",
      "diff_hunk" : "@@ -193,16 +188,18 @@ class ValidationSignalsImpl\n     template <typename F> void Iterate(F&& f) EXCLUSIVE_LOCKS_REQUIRED(!m_mutex);\n \n     friend class ValidationSignals;\n-\n-public:\n-    explicit ValidationSignalsImpl(CScheduler& scheduler LIFETIMEBOUND) : m_schedulerClient(scheduler) {}\n };\n \n \n class ValidationSignals {\n private:\n     ValidationSignalsImpl m_internals;\n \n+    // We are not allowed to assume the scheduler only runs in one thread,\n+    // but must ensure all callbacks happen in-order, so we end up creating\n+    // our own queue here :(\n+    SingleThreadedSchedulerClient m_schedulerClient;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1457796715",
      "id" : 1457796715,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585W5DZr",
      "original_commit_id" : "3a6241064ed8bc35d7e159978d40049ed3680a44",
      "original_line" : 201,
      "original_position" : 29,
      "original_start_line" : null,
      "path" : "src/validationinterface.h",
      "position" : null,
      "pull_request_review_id" : 1830011358,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1457796715/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-18T18:49:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1457796715",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1457805770"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1457805770"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"kernel: Remove dependency on CScheduler\" (e3592ee55756c08bda3075b54cbff719d3fb964f)\r\n\r\nI think `immediate_task_queue.h` and `task_queue_interface.h` should be consolidated into a single `task_queue.h` so functionality provided is clear and discoverable. Both classes are very small and lightweight, and the interface class is header-only, so it should not introduce any build overhead or any significant compile overhead to combine them. It would also be good to mention in a comment that other implementations of the task queue interface are possible, such as the `SingleThreadedSchedulerClient` implementation in scheduler.cpp.\r\n\r\nThinking more about [naming](https://github.com/bitcoin/bitcoin/pull/28960#issuecomment-1896988088), I think having \"queue\" in the name is not great because it implies an order of execution and existence of a queue which may not exist. I think a better name would be `TaskRunner` as the only thing the interface provides is a way to run tasks without control over when and how they will be run.\r\n\r\nI think there should also be a scripted diff renaming `SingleThreadedSchedulerClient` to `SerialTaskRunner` to keep class names consistent. And renaming `AddToProcessQueue` to `Insert` or `insert`, `EmptyQueue` to `Clear` or `clear` and `CallbacksPending` to `Size` or `size` to be consistent with c++ container conventions.",
      "commit_id" : "492ff2c504d1da3f4ae8704a5485a286ee76f0d9",
      "created_at" : "2024-01-18T17:58:49Z",
      "diff_hunk" : "@@ -0,0 +1,25 @@\n+// Copyright (c) 2024-present The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_UTIL_IMMEDIATE_TASK_QUEUE_H\n+#define BITCOIN_UTIL_IMMEDIATE_TASK_QUEUE_H\n+\n+#include <util/task_queue_interface.h>\n+\n+#include <cstddef>\n+#include <functional>\n+\n+namespace util {\n+\n+class ImmediateTaskQueue : public TaskQueueInterface",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1457805770",
      "id" : 1457805770,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585W5FnK",
      "original_commit_id" : "e3592ee55756c08bda3075b54cbff719d3fb964f",
      "original_line" : 15,
      "original_position" : 15,
      "original_start_line" : null,
      "path" : "src/util/immediate_task_queue.h",
      "position" : null,
      "pull_request_review_id" : 1830011358,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1457805770/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-18T18:49:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1457805770",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1457841713"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1457841713"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Probably not important, but the comments in this file become slightly out of date because the final line in `validation.cpp` looks like `if (signals.CallbacksPending() > 10)`",
      "commit_id" : "492ff2c504d1da3f4ae8704a5485a286ee76f0d9",
      "created_at" : "2024-01-18T18:35:06Z",
      "diff_hunk" : "@@ -17,21 +17,21 @@ NON_DETERMINISTIC_TESTS=(\n     \"blockfilter_index_tests/blockfilter_index_initial_sync\"  # src/checkqueue.h: In CCheckQueue::Loop(): while (queue.empty()) { ... }\n     \"coinselector_tests/knapsack_solver_test\"                 # coinselector_tests.cpp: if (equal_sets(setCoinsRet, setCoinsRet2))\n     \"fs_tests/fsbridge_fstream\"                               # deterministic test failure?\n-    \"miner_tests/CreateNewBlock_validity\"                     # validation.cpp: if (GetMainSignals().CallbacksPending() > 10)\n+    \"miner_tests/CreateNewBlock_validity\"                     # validation.cpp: if (GetValidationSignals().CallbacksPending() > 10)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1457841713",
      "id" : 1457841713,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585W5OYx",
      "original_commit_id" : "e3592ee55756c08bda3075b54cbff719d3fb964f",
      "original_line" : 20,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "contrib/devtools/test_deterministic_coverage.sh",
      "position" : null,
      "pull_request_review_id" : 1830011358,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1457841713/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-18T18:49:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1457841713",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Thank you for the review and detailed comments @ryanofsky!\r\n\r\nRebased e3592ee55756c08bda3075b54cbff719d3fb964f -> 2ef630f3e49f11cbae7abe2dc31c2a908bb5e6ba ([noGlobalSignals_4](https://github.com/TheCharlatan/bitcoin/tree/noGlobalSignals_4) -> [noGlobalSignals_5](https://github.com/TheCharlatan/bitcoin/tree/noGlobalSignals_5), [compare](https://github.com/TheCharlatan/bitcoin/compare/noGlobalSignals_4..noGlobalSignals_5))\r\n\r\nUpdated 2ef630f3e49f11cbae7abe2dc31c2a908bb5e6ba -> 492ff2c504d1da3f4ae8704a5485a286ee76f0d9 ([noGlobalSignals_5](https://github.com/TheCharlatan/bitcoin/tree/noGlobalSignals_5) -> [noGlobalSignals_6](https://github.com/TheCharlatan/bitcoin/tree/noGlobalSignals_6), [compare](https://github.com/TheCharlatan/bitcoin/compare/noGlobalSignals_5..noGlobalSignals_6))\r\n\r\n* Addressed @ryanofsky's [comment](https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1457639359), removing the renaming of `GetMainSignals()`, but leaving the current commit order intact. Not renaming `GetMainSignals()` reduces churn and is not useful in any case, since it is removed later on.\r\n* Addressed @ryanofsky's [comment_1](https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1457656786) and [comment_2](https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1457662881), using `wallet->chain().waitForNotificationsIfTipChanged()` instead of `test_setup->m_node.validation_signals->SyncWithValidationInterfaceQueue()`.\r\n* Addressed @ryanofsky's [comment_1](https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1457667372), [comment_2](https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1457678045), [comment_3](https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1457687097), [comment_4](https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1457699474), [comment_5](https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1457719624), fixing ordering of the various `signals` declarations.\r\n* Addressed @ryanofsky's [comment](https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1457711001), fixing naming from `m_signal` to `m_signals` in the `validationinterface_tests`.\r\n* Addressed @ryanofsky's [comment_1](https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1457731191), [comment_2](https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1457724122), removing the `GetValidationSignals()` helper in `ChainState` and replacing it with direct access to available `m_signals` references.\r\n* Addressed @ryanofsky's [comment_1](https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1457739617), [comment_2](https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1457779597), no longer moving `ValidationSignalsImpl` to the header.\r\n* Addressed @ryanofsky's [comment](https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1457757251), splitting the second commit de-globalizing the signals into two commits; one for moving functions into the `ValidationSignals` class, and another for actually removing the `g_signals`.\r\n* Addressed @ryanofsky's [comment](https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1457796715), dropping the commit that moved the scheduler client to the `ValidationSignals`. Note that this patch set still retains the move of the `m_serial_task_runner` to the `ValidationSignals` in the last commit. This should be fine, since no additional details are leaked, and it makes the responsibilities of `ValidationSignalsImpl` more singular.\r\n* Addressed @ryanofsky's [comment](https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1457805770), adding a scripted-diff commit for renaming the `SingleThreadedScheduler` to `SerialTaskRunner` and correspondingly adjust its related class methods.\r\n* Addressed @ryanofsky's [comment](https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1457805770), merging the two previously introduced headers into one `util/task_queue.h`.\r\n",
      "created_at" : "2024-01-19T11:22:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#issuecomment-1900227084",
      "id" : 1900227084,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28960",
      "node_id" : "IC_kwDOABII585xQyoM",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1900227084/reactions"
      },
      "updated_at" : "2024-01-19T12:41:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1900227084",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1458838935"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1458838935"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "> It might also be worth asking whether the signals parameter actually should be required.\r\n\r\nIt is used in `CTxMemPool` methods, so should be required, no? Or are you saying these classes should be given the option to not be sending signals in the first place? In that case, I don't see what the difference between the mempool and the other validation classes is. The signals could be optional in the chainman too.",
      "commit_id" : "492ff2c504d1da3f4ae8704a5485a286ee76f0d9",
      "created_at" : "2024-01-19T11:26:30Z",
      "diff_hunk" : "@@ -1504,9 +1510,13 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\n     LogPrintf(\"* Using %.1f MiB for in-memory UTXO set (plus up to %.1f MiB of unused mempool space)\\n\", cache_sizes.coins * (1.0 / 1024 / 1024), mempool_opts.max_size_bytes * (1.0 / 1024 / 1024));\n \n     for (bool fLoaded = false; !fLoaded && !ShutdownRequested(node);) {\n-        node.mempool = std::make_unique<CTxMemPool>(mempool_opts);\n+        node.mempool = std::make_unique<CTxMemPool>(mempool_opts, validation_signals);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1458838935",
      "id" : 1458838935,
      "in_reply_to_id" : 1457678045,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585W9B2X",
      "original_commit_id" : "6ffa572edd9693a3217eb201b9d147b44c5b4eb5",
      "original_line" : 1513,
      "original_position" : 93,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_review_id" : 1832213207,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1458838935/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-19T11:26:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1458838935",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1458922669"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1458922669"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "re: https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1458838935\r\n\r\n> The signals could be optional in the chainman too.\r\n\r\nYes, absolutely. The question is in cases where libbitcoinkernel applications don't care about receiving signals (if maybe just they are just validating a block), should they be forced to declare `ValidationSignals validation_signals{std::make_unique<util::ImmediateTaskRunner>()};` and pass a `validation_signals` parameter to the ChainstateManager object that won't do any real work. Eliminating this requirement might be good for libbitocoinkernel usability, but it would make validation code a little more verbose, because it would need to check if the signals object is null before sending signal. I don't have a real opinion about this, so I think the current approach seems pretty reasonable.\r\n\r\nThe mempool case is slightly different though. It sends fewer signals than validation code, and maybe requiring a new CTxMempool constructor argument will add pointless verbosity to mempool tests. So I think the mempool case is more worth thinking about and maybe getting some feedback from others familiar the mempool code. They may prefer to let this be optional.",
      "commit_id" : "492ff2c504d1da3f4ae8704a5485a286ee76f0d9",
      "created_at" : "2024-01-19T12:23:49Z",
      "diff_hunk" : "@@ -1504,9 +1510,13 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\n     LogPrintf(\"* Using %.1f MiB for in-memory UTXO set (plus up to %.1f MiB of unused mempool space)\\n\", cache_sizes.coins * (1.0 / 1024 / 1024), mempool_opts.max_size_bytes * (1.0 / 1024 / 1024));\n \n     for (bool fLoaded = false; !fLoaded && !ShutdownRequested(node);) {\n-        node.mempool = std::make_unique<CTxMemPool>(mempool_opts);\n+        node.mempool = std::make_unique<CTxMemPool>(mempool_opts, validation_signals);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1458922669",
      "id" : 1458922669,
      "in_reply_to_id" : 1457678045,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585W9WSt",
      "original_commit_id" : "6ffa572edd9693a3217eb201b9d147b44c5b4eb5",
      "original_line" : 1513,
      "original_position" : 93,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_review_id" : 1832387071,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1458922669/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-19T12:23:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1458922669",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--85328a0da195eb286784d51f73fa0af9-->\n\nð§ At least one of the CI tasks failed. Make sure to run all tests locally, according to the\ndocumentation.\n\nPossibly this is due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n<sub>Debug: https://github.com/bitcoin/bitcoin/runs/20654065729</sub>",
      "created_at" : "2024-01-19T12:24:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#issuecomment-1900324259",
      "id" : 1900324259,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28960",
      "node_id" : "IC_kwDOABII585xRKWj",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1900324259/reactions"
      },
      "updated_at" : "2024-01-19T12:24:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1900324259",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1459116286"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459116286"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"refactor: De-globalize g_signals\" (e7c060866267fb99c77f80a959bfeb5204d1d3a5)\r\n\r\nI think it would be more consistent to use the  local `validation_signals` variable here instead of the node variable. Same on line 1608 below",
      "commit_id" : "492ff2c504d1da3f4ae8704a5485a286ee76f0d9",
      "created_at" : "2024-01-19T14:36:19Z",
      "diff_hunk" : "@@ -1506,7 +1516,7 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\n \n             // Drain the validation interface queue to ensure that the old indexes\n             // don't have any pending work.\n-            SyncWithValidationInterfaceQueue();\n+            Assert(node.validation_signals)->SyncWithValidationInterfaceQueue();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1459116286",
      "id" : 1459116286,
      "line" : 1514,
      "node_id" : "PRRC_kwDOABII585W-Fj-",
      "original_commit_id" : "e7c060866267fb99c77f80a959bfeb5204d1d3a5",
      "original_line" : 1519,
      "original_position" : 109,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : 134,
      "pull_request_review_id" : 1832865694,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459116286/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-19T15:31:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459116286",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1459145667"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459145667"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"refactor: De-globalize g_signals\" (e7c060866267fb99c77f80a959bfeb5204d1d3a5)\r\n\r\nMaybe move this declaration up next to the notifications member since both are ways of receiving notifications from validation code.\r\n\r\n-  `NodeContext::notifications` sends high level messages about sync status and errors and warnings, which are blocking and only received by a single recipient (the UI).\r\n-  `NodeContext::validation_signals` sends lower messages about blocks and transactions, which are non-blocking, and are sent to multiple recipients (wallets, indexes, and the fee estimator). \r\n\r\nMight be useful to compare these in a code comment.",
      "commit_id" : "492ff2c504d1da3f4ae8704a5485a286ee76f0d9",
      "created_at" : "2024-01-19T14:51:45Z",
      "diff_hunk" : "@@ -72,6 +73,7 @@ struct NodeContext {\n     std::function<void()> rpc_interruption_point = [] {};\n     std::unique_ptr<KernelNotifications> notifications;\n     std::atomic<int> exit_status{EXIT_SUCCESS};\n+    std::unique_ptr<ValidationSignals> validation_signals;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1459145667",
      "id" : 1459145667,
      "line" : 76,
      "node_id" : "PRRC_kwDOABII585W-MvD",
      "original_commit_id" : "e7c060866267fb99c77f80a959bfeb5204d1d3a5",
      "original_line" : 76,
      "original_position" : 12,
      "original_start_line" : null,
      "path" : "src/node/context.h",
      "position" : 12,
      "pull_request_review_id" : 1832865694,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459145667/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-19T15:31:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459145667",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1459152304"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459152304"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"refactor: De-globalize g_signals\" (e7c060866267fb99c77f80a959bfeb5204d1d3a5)\r\n\r\nPossible inconsistency between signal/signals here ",
      "commit_id" : "492ff2c504d1da3f4ae8704a5485a286ee76f0d9",
      "created_at" : "2024-01-19T14:55:31Z",
      "diff_hunk" : "@@ -52,8 +52,8 @@ BOOST_AUTO_TEST_CASE(unregister_validation_interface_race)\n class TestInterface : public CValidationInterface\n {\n public:\n-    TestInterface(std::function<void()> on_call = nullptr, std::function<void()> on_destroy = nullptr)\n-        : m_on_call(std::move(on_call)), m_on_destroy(std::move(on_destroy))\n+    TestInterface(ValidationSignals& signal, std::function<void()> on_call = nullptr, std::function<void()> on_destroy = nullptr)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1459152304",
      "id" : 1459152304,
      "line" : 55,
      "node_id" : "PRRC_kwDOABII585W-OWw",
      "original_commit_id" : "e7c060866267fb99c77f80a959bfeb5204d1d3a5",
      "original_line" : 55,
      "original_position" : 26,
      "original_start_line" : null,
      "path" : "src/test/validationinterface_tests.cpp",
      "position" : 26,
      "pull_request_review_id" : 1832865694,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459152304/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-19T15:31:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459152304",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1459154811"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459154811"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"refactor: De-globalize g_signals\" (e7c060866267fb99c77f80a959bfeb5204d1d3a5)\r\n\r\nMaybe some unintended whitespace changes here and below",
      "commit_id" : "492ff2c504d1da3f4ae8704a5485a286ee76f0d9",
      "created_at" : "2024-01-19T14:57:04Z",
      "diff_hunk" : "@@ -396,6 +397,7 @@ class CTxMemPool\n     using Limits = kernel::MemPoolLimits;\n \n     uint64_t CalculateDescendantMaximum(txiter entry) const EXCLUSIVE_LOCKS_REQUIRED(cs);\n+",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1459154811",
      "id" : 1459154811,
      "line" : 400,
      "node_id" : "PRRC_kwDOABII585W-O97",
      "original_commit_id" : "e7c060866267fb99c77f80a959bfeb5204d1d3a5",
      "original_line" : 400,
      "original_position" : 12,
      "original_start_line" : null,
      "path" : "src/txmempool.h",
      "position" : 12,
      "pull_request_review_id" : 1832865694,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459154811/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-19T15:31:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459154811",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1459163630"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459163630"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"refactor: De-globalize g_signals\" (e7c060866267fb99c77f80a959bfeb5204d1d3a5)\r\n\r\nI see 2 changes to this function which are necessary, and 9 changes which are not needed. It's not important, but I'd suggest reverting all the changes in this function except the on lines 1145-6 above and lines 1167-8 below. Moving the `std::make_unique<CScheduler>()` call is the most important change here, and the other changes do not seem like a significant cleanup and are distracting.",
      "commit_id" : "492ff2c504d1da3f4ae8704a5485a286ee76f0d9",
      "created_at" : "2024-01-19T15:02:49Z",
      "diff_hunk" : "@@ -1142,19 +1142,16 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\n         return InitError(strprintf(_(\"Unable to allocate memory for -maxsigcachesize: '%s' MiB\"), args.GetIntArg(\"-maxsigcachesize\", DEFAULT_MAX_SIG_CACHE_BYTES >> 20)));\n     }\n \n-    assert(!node.scheduler);\n-    node.scheduler = std::make_unique<CScheduler>();\n-\n     // Start the lightweight task scheduler thread\n-    node.scheduler->m_service_thread = std::thread(util::TraceThread, \"scheduler\", [&] { node.scheduler->serviceQueue(); });",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1459163630",
      "id" : 1459163630,
      "line" : 1143,
      "node_id" : "PRRC_kwDOABII585W-RHu",
      "original_commit_id" : "552a653b99c7743799def64016edb9cc9c6f13f2",
      "original_line" : 1149,
      "original_position" : 24,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : 69,
      "pull_request_review_id" : 1832865694,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459163630/reactions"
      },
      "side" : "LEFT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-19T15:31:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459163630",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1459176013"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459176013"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"scripted-diff: Rename SingleThreadedSchedulerClient to SerialTaskRunner\" (46defde7a60afe186629481b738225919f874342)\r\n\r\nI think I made a bad suggestion earlier to call this method \"clear\". I mistakenly thought this was discarding callbacks, but it appears to wait for all the callbacks to run. In light of this, I think it would be better to call this method \"flush\" or \"wait\".",
      "commit_id" : "492ff2c504d1da3f4ae8704a5485a286ee76f0d9",
      "created_at" : "2024-01-19T15:11:13Z",
      "diff_hunk" : "@@ -182,7 +182,7 @@ void SingleThreadedSchedulerClient::AddToProcessQueue(std::function<void()> func\n     MaybeScheduleProcessQueue();\n }\n \n-void SingleThreadedSchedulerClient::EmptyQueue()\n+void SerialTaskRunner::clear()",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1459176013",
      "id" : 1459176013,
      "line" : 185,
      "node_id" : "PRRC_kwDOABII585W-UJN",
      "original_commit_id" : "46defde7a60afe186629481b738225919f874342",
      "original_line" : 185,
      "original_position" : 43,
      "original_start_line" : null,
      "path" : "src/scheduler.cpp",
      "position" : 43,
      "pull_request_review_id" : 1832865694,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459176013/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-19T15:31:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459176013",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1459185693"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459185693"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"kernel: Remove dependency on CScheduler\" (492ff2c504d1da3f4ae8704a5485a286ee76f0d9)\r\n\r\nI think it would be clearer just to inline these methods and eliminate this file. If not eliminating this file, I would also consider it renaming it to just `util/task_runner.cpp` so it easier to find next to the header file.",
      "commit_id" : "492ff2c504d1da3f4ae8704a5485a286ee76f0d9",
      "created_at" : "2024-01-19T15:17:36Z",
      "diff_hunk" : "@@ -0,0 +1,26 @@\n+// Copyright (c) 2024-present The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <util/task_runner.h>\n+\n+#include <functional>\n+\n+namespace util {\n+\n+void ImmediateTaskRunner::insert(std::function<void()> func)\n+{\n+    func();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1459185693",
      "id" : 1459185693,
      "line" : 13,
      "node_id" : "PRRC_kwDOABII585W-Wgd",
      "original_commit_id" : "492ff2c504d1da3f4ae8704a5485a286ee76f0d9",
      "original_line" : 13,
      "original_position" : 13,
      "original_start_line" : null,
      "path" : "src/util/immediate_task_runner.cpp",
      "position" : 13,
      "pull_request_review_id" : 1832865694,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459185693/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-19T15:31:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459185693",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1459197068"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459197068"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"kernel: Remove dependency on CScheduler\" (492ff2c504d1da3f4ae8704a5485a286ee76f0d9)\r\n\r\nI'd consider the leaving this declaration inside the ValidationSignalsImpl class instead of moving it here. This would adhere more closely to the [pointer-to-implementation](https://en.cppreference.com/w/cpp/language/pimpl) pattern and ensure future ValidationSignalsImpl methods can access all private members of the class, not just some of them. It would also just move less code around unnecessarily.",
      "commit_id" : "492ff2c504d1da3f4ae8704a5485a286ee76f0d9",
      "created_at" : "2024-01-19T15:24:57Z",
      "diff_hunk" : "@@ -160,8 +162,13 @@ class ValidationSignals {\n private:\n     std::unique_ptr<ValidationSignalsImpl> m_internals;\n \n+    // We are not allowed to assume the scheduler only runs in one thread,\n+    // but must ensure all callbacks happen in-order, so we end up creating\n+    // our own queue here :(\n+    std::unique_ptr<util::TaskRunnerInterface> m_serial_task_runner;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1459197068",
      "id" : 1459197068,
      "line" : 168,
      "node_id" : "PRRC_kwDOABII585W-ZSM",
      "original_commit_id" : "492ff2c504d1da3f4ae8704a5485a286ee76f0d9",
      "original_line" : 168,
      "original_position" : 23,
      "original_start_line" : null,
      "path" : "src/validationinterface.h",
      "position" : 23,
      "pull_request_review_id" : 1832865694,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459197068/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-19T15:31:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459197068",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1459267014"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459267014"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Would have to capture it then in the lambda, which seems less clear to me.",
      "commit_id" : "492ff2c504d1da3f4ae8704a5485a286ee76f0d9",
      "created_at" : "2024-01-19T16:11:00Z",
      "diff_hunk" : "@@ -1506,7 +1516,7 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\n \n             // Drain the validation interface queue to ensure that the old indexes\n             // don't have any pending work.\n-            SyncWithValidationInterfaceQueue();\n+            Assert(node.validation_signals)->SyncWithValidationInterfaceQueue();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1459267014",
      "id" : 1459267014,
      "in_reply_to_id" : 1459116286,
      "line" : 1514,
      "node_id" : "PRRC_kwDOABII585W-qXG",
      "original_commit_id" : "e7c060866267fb99c77f80a959bfeb5204d1d3a5",
      "original_line" : 1519,
      "original_position" : 109,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : 134,
      "pull_request_review_id" : 1833167076,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459267014/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-19T16:11:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459267014",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1459279757"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459279757"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "> ensure future ValidationSignalsImpl methods can access all private members of the class, not just some of them.\r\n\r\nI don't follow here. `ValidationSignalsImpl` is not a friend of `ValidationSignals`, so I'm not sure which access you are talking about here. Moving it just seems more SOLID to me and I am not sure how this is violating the pimpl pattern, but I feel like I am missing something.\r\n\r\n",
      "commit_id" : "492ff2c504d1da3f4ae8704a5485a286ee76f0d9",
      "created_at" : "2024-01-19T16:19:18Z",
      "diff_hunk" : "@@ -160,8 +162,13 @@ class ValidationSignals {\n private:\n     std::unique_ptr<ValidationSignalsImpl> m_internals;\n \n+    // We are not allowed to assume the scheduler only runs in one thread,\n+    // but must ensure all callbacks happen in-order, so we end up creating\n+    // our own queue here :(\n+    std::unique_ptr<util::TaskRunnerInterface> m_serial_task_runner;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1459279757",
      "id" : 1459279757,
      "in_reply_to_id" : 1459197068,
      "line" : 168,
      "node_id" : "PRRC_kwDOABII585W-teN",
      "original_commit_id" : "492ff2c504d1da3f4ae8704a5485a286ee76f0d9",
      "original_line" : 168,
      "original_position" : 23,
      "original_start_line" : null,
      "path" : "src/validationinterface.h",
      "position" : 23,
      "pull_request_review_id" : 1833189430,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459279757/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-19T16:19:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459279757",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1459324535"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459324535"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Leaving this for now. The pattern was suggested here https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1455681352 and I think it makes sense to apply it to the scheduler as well.",
      "commit_id" : "492ff2c504d1da3f4ae8704a5485a286ee76f0d9",
      "created_at" : "2024-01-19T16:45:11Z",
      "diff_hunk" : "@@ -1142,19 +1142,16 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\n         return InitError(strprintf(_(\"Unable to allocate memory for -maxsigcachesize: '%s' MiB\"), args.GetIntArg(\"-maxsigcachesize\", DEFAULT_MAX_SIG_CACHE_BYTES >> 20)));\n     }\n \n-    assert(!node.scheduler);\n-    node.scheduler = std::make_unique<CScheduler>();\n-\n     // Start the lightweight task scheduler thread\n-    node.scheduler->m_service_thread = std::thread(util::TraceThread, \"scheduler\", [&] { node.scheduler->serviceQueue(); });",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1459324535",
      "id" : 1459324535,
      "in_reply_to_id" : 1459163630,
      "line" : 1143,
      "node_id" : "PRRC_kwDOABII585W-4Z3",
      "original_commit_id" : "552a653b99c7743799def64016edb9cc9c6f13f2",
      "original_line" : 1149,
      "original_position" : 24,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : 69,
      "pull_request_review_id" : 1833235155,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459324535/reactions"
      },
      "side" : "LEFT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-19T16:45:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459324535",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Updated 492ff2c504d1da3f4ae8704a5485a286ee76f0d9 -> f442a3a5b2a0a58bc263fbb9c87e8e4715de103a ([noGlobalSignals_6](https://github.com/TheCharlatan/bitcoin/tree/noGlobalSignals_6) -> [noGlobalSignals_7](https://github.com/TheCharlatan/bitcoin/tree/noGlobalSignals_7), [compare](https://github.com/TheCharlatan/bitcoin/compare/noGlobalSignals_6..noGlobalSignals_7))\r\n\r\n* Addressed @ryanofsky's [comment](https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1459116286), using appropriate variable for accessing signals in commit \"De-globalize g_signals\"\r\n* Addressed @ryanofsky's [comment](https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1459145667), moving the declartion of `validation_signals` within `NodeContext` and adding some docstrings to the `notifications` and `validation_signals` fields.\r\n* Addressed @ryanofsky's [comment](https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1459152304), missing consistency with naming `signals` in `validationinterface_tests`.\r\n* Addressed @ryanofsky's [comment](https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1459154811), reverting unintended whitespace change\r\n* Addressed @ryanofsky's [comment](https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1459176013), renaming `SerialTaskRunner`'s `clear` to `flush`.\r\n* Addressed @ryanofsky's [comment](https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1459185693), removing `immediate_task_runner` and instead inlining its content.\r\n",
      "created_at" : "2024-01-19T17:02:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#issuecomment-1900772624",
      "id" : 1900772624,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28960",
      "node_id" : "IC_kwDOABII585xS30Q",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1900772624/reactions"
      },
      "updated_at" : "2024-01-19T17:02:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1900772624",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1459989847"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459989847"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "re: https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1459279757\r\n\r\n[Pointer-to-implementation](https://en.cppreference.com/w/cpp/language/pimpl) is a c++ specific pattern. It's a simple trick to divide a *single* class into two halves so that the private parts of the class are in the .cpp file rather than the .h file. It doesn't have to do with SOLID principles or object oriented design.\r\n\r\nThe typical way to define a class in c++ is\r\n\r\n```\r\nclass MyClass\r\n{\r\npublic:\r\n   // MyClass public methods and members\r\nprivate:\r\n   // MyClass private methods and members\r\n};\r\n```\r\nThis works well in most cases, but in some cases you don't want to expose private parts of the class in the header. For example if you are trying to avoid adding private dependencies to the header, or trying to define a stable ABI. In these cases, you can use the pointer to implementation trick to divide `MyClass` into two parts, with the public part in the header file:\r\n\r\n```c++\r\nclass MyClass\r\n{\r\npublic:\r\n   // MyClass public methods only\r\nprivate:\r\n   std::unique_ptr<MyClassImpl> m_impl;\r\n};\r\n```\r\n\r\nAnd the private part in the cpp file:\r\n\r\n```c++\r\nclass MyClassImpl\r\n{\r\n       // MyClass private members and methods.\r\n};\r\n```\r\n\r\nThe problem with f442a3a5b2a0a58bc263fbb9c87e8e4715de103a is that it is not following either of these two approaches, but instead taking a hybrid approach when private state is split up across both the public and private classes. This is bad, because if it means that the private methods only have access to part of the private state, not all of it.\r\n\r\nIn OO terms, ValidationSignals and ValidationSignalsImpl do not represent separate classes. They just represent the public and private parts of a single class, that are declared in separate halves because of C++ headers weirdness that doesn't exist in other languages.\r\n\r\nIf you actually think that ValidationSignals and ValidationSignalsImpl *should* be separate OO classes, I think you will want to rename the ValidationSignalsImpl to reflect the actual role of this class rather than taking the name of the class which contains it.",
      "commit_id" : "f442a3a5b2a0a58bc263fbb9c87e8e4715de103a",
      "created_at" : "2024-01-19T23:26:37Z",
      "diff_hunk" : "@@ -160,8 +162,13 @@ class ValidationSignals {\n private:\n     std::unique_ptr<ValidationSignalsImpl> m_internals;\n \n+    // We are not allowed to assume the scheduler only runs in one thread,\n+    // but must ensure all callbacks happen in-order, so we end up creating\n+    // our own queue here :(\n+    std::unique_ptr<util::TaskRunnerInterface> m_serial_task_runner;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1459989847",
      "id" : 1459989847,
      "in_reply_to_id" : 1459197068,
      "line" : 168,
      "node_id" : "PRRC_kwDOABII585XBa1X",
      "original_commit_id" : "492ff2c504d1da3f4ae8704a5485a286ee76f0d9",
      "original_line" : 168,
      "original_position" : 23,
      "original_start_line" : null,
      "path" : "src/validationinterface.h",
      "position" : 92,
      "pull_request_review_id" : 1833942330,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459989847/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-19T23:29:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459989847",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Thank you @ryanofsky,\r\n\r\nUpdated f442a3a5b2a0a58bc263fbb9c87e8e4715de103a -> 38e25f67b4b2aeb3dd13f4f9ffa689f47718aa17 ([noGlobalSignals_7](https://github.com/TheCharlatan/bitcoin/tree/noGlobalSignals_7) -> [noGlobalSignals_8](https://github.com/TheCharlatan/bitcoin/tree/noGlobalSignals_8), [compare](https://github.com/TheCharlatan/bitcoin/compare/noGlobalSignals_7..noGlobalSignals_8))\r\n\r\n* Fixup scripted-diff\r\n* Addressed @ryanofsky's [comment](https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1459989847), moved `TaskRunnerInterface` unique pointer member to implementation class.\r\n* Reworded docstrings for `task_runner.h` a bit.\r\n",
      "created_at" : "2024-01-20T09:35:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#issuecomment-1902037507",
      "id" : 1902037507,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28960",
      "node_id" : "IC_kwDOABII585xXsoD",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1902037507/reactions"
      },
      "updated_at" : "2024-01-20T09:35:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1902037507",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Updated 38e25f67b4b2aeb3dd13f4f9ffa689f47718aa17 -> 22048c19e236e4b683f1c8192883545d5c68f793 ([noGlobalSignals_8](https://github.com/TheCharlatan/bitcoin/tree/noGlobalSignals_8) -> [noGlobalSignals_9](https://github.com/TheCharlatan/bitcoin/tree/noGlobalSignals_9), [compare](https://github.com/TheCharlatan/bitcoin/compare/noGlobalSignals_8..noGlobalSignals_9))\r\n\r\n* Improved scripted-diff to exclude renaming a method.",
      "created_at" : "2024-01-20T10:43:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#issuecomment-1902062244",
      "id" : 1902062244,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28960",
      "node_id" : "IC_kwDOABII585xXyqk",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1902062244/reactions"
      },
      "updated_at" : "2024-01-20T10:43:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1902062244",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1462013455"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1462013455"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"[refactor] Prepare for g_signals de-globalization\" (4083720b33763ad2547a3e1ef9bb16cc979f5d31)\r\n\r\nI was confused about how this was compiling given \"scripted-diff: Rename MainSignals to ValidationSignals\" in the previous commit. But I guess it that commit did not actually rename the GetMainSignals function.\r\n\r\nWould maybe suggest clarifying that commit message to mention it only renames the main signals class not the function. And again, not important, but I think it would be a little better if the script diff renames were done last to avoid confusing intermediate states, and make it easier to determine whether new names make sense in the context of the final code.",
      "commit_id" : "22048c19e236e4b683f1c8192883545d5c68f793",
      "created_at" : "2024-01-22T15:17:12Z",
      "diff_hunk" : "@@ -273,3 +277,33 @@ void ValidationSignals::NewPoWValidBlock(const CBlockIndex *pindex, const std::s\n     LOG_EVENT(\"%s: block hash=%s\", __func__, block->GetHash().ToString());\n     m_internals->Iterate([&](CValidationInterface& callbacks) { callbacks.NewPoWValidBlock(pindex, block); });\n }\n+\n+// These functions are temporary and will be removed in the following commit\n+void RegisterValidationInterface(CValidationInterface* callbacks)\n+{\n+    GetMainSignals().RegisterValidationInterface(callbacks);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1462013455",
      "id" : 1462013455,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585XJI4P",
      "original_commit_id" : "4083720b33763ad2547a3e1ef9bb16cc979f5d31",
      "original_line" : 284,
      "original_position" : 79,
      "original_start_line" : null,
      "path" : "src/validationinterface.cpp",
      "position" : null,
      "pull_request_review_id" : 1836718832,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1462013455/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-22T16:11:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1462013455",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1462034146"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1462034146"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"[refactor] Make MainSignalsImpl RAII styled\" (35ee50f762aee78944f563b74a5e9a677980400d)\r\n\r\nThis change is moving the scheduler creation and RegisterBackgroundSignalScheduler assignment from ChainTestingSetup to BasicTestingSetup, but it is leaving the `m_service_thread` scheduler thread creation in ChainTestingSetup. This makes me wonder whether the validation_signals instance created here works, and whether it should be created in ChainTestingSetup instead of BasicTestingSetup. That would seem cleaner. Or if that is not possible, it would be helpful to have a comment here saying why the scheduler is needed here, how it works without a thread, and mentioning that ChainTestingSetup may create a thread for it later",
      "commit_id" : "22048c19e236e4b683f1c8192883545d5c68f793",
      "created_at" : "2024-01-22T15:31:52Z",
      "diff_hunk" : "@@ -138,7 +138,8 @@ BasicTestingSetup::BasicTestingSetup(const ChainType chainType, const std::vecto\n     InitLogging(*m_node.args);\n     AppInitParameterInteraction(*m_node.args);\n     LogInstance().StartLogging();\n-    m_node.validation_signals = std::make_unique<ValidationSignals>();\n+    m_node.scheduler = std::make_unique<CScheduler>();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1462034146",
      "id" : 1462034146,
      "line" : 141,
      "node_id" : "PRRC_kwDOABII585XJN7i",
      "original_commit_id" : "35ee50f762aee78944f563b74a5e9a677980400d",
      "original_line" : 141,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/test/util/setup_common.cpp",
      "position" : 4,
      "pull_request_review_id" : 1836718832,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1462034146/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-22T16:11:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1462034146",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1462039246"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1462039246"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"scripted-diff: Rename SingleThreadedSchedulerClient to SerialTaskRunner\" (70793430bb072ceae589f4d44c49ce2c5db23216)\r\n\r\nHarmless, but `s 'SinglethreadedSchedulerClient'   'SerialTaskRunner'  ''` is repeated twice in the scripted diff script",
      "commit_id" : "22048c19e236e4b683f1c8192883545d5c68f793",
      "created_at" : "2024-01-22T15:35:33Z",
      "diff_hunk" : "@@ -129,7 +129,7 @@ bool CScheduler::AreThreadsServicingQueue() const\n }\n \n \n-void SingleThreadedSchedulerClient::MaybeScheduleProcessQueue()\n+void SerialTaskRunner::MaybeScheduleProcessQueue()",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1462039246",
      "id" : 1462039246,
      "line" : 132,
      "node_id" : "PRRC_kwDOABII585XJPLO",
      "original_commit_id" : "70793430bb072ceae589f4d44c49ce2c5db23216",
      "original_line" : 132,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/scheduler.cpp",
      "position" : 5,
      "pull_request_review_id" : 1836718832,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1462039246/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-22T16:10:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1462039246",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1464847173"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1464847173"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "This is on purpose (note the lower case `t`) to fix a documentation typo. I could have added a regex for doing it in one line, but that seems even less readable.",
      "commit_id" : "22048c19e236e4b683f1c8192883545d5c68f793",
      "created_at" : "2024-01-24T12:31:33Z",
      "diff_hunk" : "@@ -129,7 +129,7 @@ bool CScheduler::AreThreadsServicingQueue() const\n }\n \n \n-void SingleThreadedSchedulerClient::MaybeScheduleProcessQueue()\n+void SerialTaskRunner::MaybeScheduleProcessQueue()",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1464847173",
      "id" : 1464847173,
      "in_reply_to_id" : 1462039246,
      "line" : 132,
      "node_id" : "PRRC_kwDOABII585XT8tF",
      "original_commit_id" : "70793430bb072ceae589f4d44c49ce2c5db23216",
      "original_line" : 132,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/scheduler.cpp",
      "position" : 5,
      "pull_request_review_id" : 1841266783,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1464847173/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-24T12:31:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1464847173",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1465145033"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1465145033"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Good catch!\r\nI think the real problem here is though that the scheduler is now created too early, so I'll revert moving its initialization out of `AppInitMain` and will instead leave it there and initialize the signals right after it. Then we can have all these components be initialized in `ChainTestingSetup`.",
      "commit_id" : "bdd985af62ff9e94490ecc701d6063eaab172add",
      "created_at" : "2024-01-24T15:56:07Z",
      "diff_hunk" : "@@ -138,7 +138,8 @@ BasicTestingSetup::BasicTestingSetup(const ChainType chainType, const std::vecto\n     InitLogging(*m_node.args);\n     AppInitParameterInteraction(*m_node.args);\n     LogInstance().StartLogging();\n-    m_node.validation_signals = std::make_unique<ValidationSignals>();\n+    m_node.scheduler = std::make_unique<CScheduler>();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1465145033",
      "id" : 1465145033,
      "in_reply_to_id" : 1462034146,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585XVFbJ",
      "original_commit_id" : "35ee50f762aee78944f563b74a5e9a677980400d",
      "original_line" : 141,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/test/util/setup_common.cpp",
      "position" : null,
      "pull_request_review_id" : 1841743867,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1465145033/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-24T15:56:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1465145033",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Thank you for the continued feedback @ryanofsky!\r\n\r\nUpdated 22048c19e236e4b683f1c8192883545d5c68f793 -> bdd985af62ff9e94490ecc701d6063eaab172add ([noGlobalSignals_9](https://github.com/TheCharlatan/bitcoin/tree/noGlobalSignals_9) -> [noGlobalSignals_10](https://github.com/TheCharlatan/bitcoin/tree/noGlobalSignals_10), [compare](https://github.com/TheCharlatan/bitcoin/compare/noGlobalSignals_9..noGlobalSignals_10))\r\n\r\n* Addressed @ryanofsky's [comment](https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1462013455), moving the scripted-diff renaming `MainSignals` to `ValidationSignals` to after the de-globalization and RAII-styling.\r\n* Addressed @ryanofsky's [comment](https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1462034146), moving the `MainSignals` initialization to `AppInitMain`, which is closer to where the other validation components are initialized as well. This also reverts moving the `CScheduler` initialization out of `AppInitMain`.\r\n* Addressed @ryanofsky's [comment](https://github.com/bitcoin/bitcoin/pull/28960#pullrequestreview-1836718832), adding a new first commit for making the signals in `CTxMemPool` and `ChainstateManager` optional. I convinced myself over the past few days that this might be more desirable.\r\n\r\n\r\n\r\n\r\n",
      "created_at" : "2024-01-24T15:56:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#issuecomment-1908419204",
      "id" : 1908419204,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28960",
      "node_id" : "IC_kwDOABII585xwCqE",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1908419204/reactions"
      },
      "updated_at" : "2024-01-24T17:06:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1908419204",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1465280323"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1465280323"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"[refactor] Make MainSignals RAII styled\" (dddaa962cfbeb96a8148535e74e1b53c9c717376)\r\n\r\nMaybe unintended diff moving this line",
      "commit_id" : "536429372dfd9759dc8f089962f3a15a94b54751",
      "created_at" : "2024-01-24T17:06:39Z",
      "diff_hunk" : "@@ -168,12 +168,11 @@ ChainTestingSetup::ChainTestingSetup(const ChainType chainType, const std::vecto\n {\n     const CChainParams& chainparams = Params();\n \n+    m_node.scheduler = std::make_unique<CScheduler>();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1465280323",
      "id" : 1465280323,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585XVmdD",
      "original_commit_id" : "dddaa962cfbeb96a8148535e74e1b53c9c717376",
      "original_line" : 171,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/test/util/setup_common.cpp",
      "position" : null,
      "pull_request_review_id" : 1841942054,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1465280323/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-24T19:25:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1465280323",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Updated bdd985af62ff9e94490ecc701d6063eaab172add -> 536429372dfd9759dc8f089962f3a15a94b54751 ([noGlobalSignals_10](https://github.com/TheCharlatan/bitcoin/tree/noGlobalSignals_10) -> [noGlobalSignals_11](https://github.com/TheCharlatan/bitcoin/tree/noGlobalSignals_11), [compare](https://github.com/TheCharlatan/bitcoin/compare/noGlobalSignals_10..noGlobalSignals_11))\r\n\r\n* Addresesd @ryanofsky's [comment](https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1465280323), reverting unintended diff\r\n* Fixed a small formatting issue\r\n",
      "created_at" : "2024-01-24T20:55:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#issuecomment-1908900398",
      "id" : 1908900398,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28960",
      "node_id" : "IC_kwDOABII585xx4Iu",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1908900398/reactions"
      },
      "updated_at" : "2024-01-24T20:55:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1908900398",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1469679940"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1469679940"
         }
      },
      "author_association" : "MEMBER",
      "body" : "This could be an `if (!m_pool.m_signals) continue;`, and be placed few lines above, at line 1217 (same for `AcceptSingleTransaction`).",
      "commit_id" : "536429372dfd9759dc8f089962f3a15a94b54751",
      "created_at" : "2024-01-29T14:33:13Z",
      "diff_hunk" : "@@ -1220,15 +1220,17 @@ bool MemPoolAccept::SubmitPackage(const ATMPArgs& args, std::vector<Workspace>&\n                                                        args.m_bypass_limits, args.m_package_submission,\n                                                        IsCurrentForFeeEstimation(m_active_chainstate),\n                                                        m_pool.HasNoInputsOf(tx));\n-        GetMainSignals().TransactionAddedToMempool(tx_info, m_pool.GetAndIncrementSequence());\n+        if (m_pool.m_signals) {\n+            m_pool.m_signals->TransactionAddedToMempool(tx_info, m_pool.GetAndIncrementSequence());\n+        }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1469679940",
      "id" : 1469679940,
      "line" : 1225,
      "node_id" : "PRRC_kwDOABII585XmYlE",
      "original_commit_id" : "65f6f8ff939dcb6cb1129770937bb8e0bcf55410",
      "original_line" : 1225,
      "original_position" : 7,
      "original_start_line" : 1223,
      "path" : "src/validation.cpp",
      "position" : 7,
      "pull_request_review_id" : 1848819305,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1469679940/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 1223,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2024-01-31T14:53:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1469679940",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1472858901"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1472858901"
         }
      },
      "author_association" : "MEMBER",
      "body" : "In 38d32ba2e9:\r\n\r\nnit: I think that you could also remove the `<validationinterface.h>` include with this change.",
      "commit_id" : "536429372dfd9759dc8f089962f3a15a94b54751",
      "created_at" : "2024-01-31T13:56:02Z",
      "diff_hunk" : "@@ -22,7 +22,7 @@ CTxMemPool::Options MemPoolOptionsForTest(const NodeContext& node)\n         // Default to always checking mempool regardless of\n         // chainparams.DefaultConsistencyChecks for tests\n         .check_ratio = 1,\n-        .signals = &GetMainSignals(),\n+        .signals = node.validation_signals.get(),",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1472858901",
      "id" : 1472858901,
      "line" : 25,
      "node_id" : "PRRC_kwDOABII585XygsV",
      "original_commit_id" : "38d32ba2e9e0347bd6c72be4922a570650243575",
      "original_line" : 25,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/test/util/txmempool.cpp",
      "position" : 12,
      "pull_request_review_id" : 1848819305,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1472858901/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-31T14:53:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1472858901",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1472869158"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1472869158"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit:\r\n```suggestion\r\n    node.validation_signals->RegisterSharedValidationInterface(outpoints_updater);\r\n```\r\n\r\n(same for the ones below)",
      "commit_id" : "536429372dfd9759dc8f089962f3a15a94b54751",
      "created_at" : "2024-01-31T14:02:49Z",
      "diff_hunk" : "@@ -145,7 +145,7 @@ FUZZ_TARGET(tx_package_eval, .init = initialize_tx_pool)\n     }\n \n     auto outpoints_updater = std::make_shared<OutpointsUpdater>(mempool_outpoints);\n-    RegisterSharedValidationInterface(outpoints_updater);\n+    g_setup->m_node.validation_signals->RegisterSharedValidationInterface(outpoints_updater);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1472869158",
      "id" : 1472869158,
      "line" : 148,
      "node_id" : "PRRC_kwDOABII585XyjMm",
      "original_commit_id" : "38d32ba2e9e0347bd6c72be4922a570650243575",
      "original_line" : 148,
      "original_position" : 14,
      "original_start_line" : null,
      "path" : "src/test/fuzz/package_eval.cpp",
      "position" : 14,
      "pull_request_review_id" : 1848819305,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1472869158/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-31T14:53:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1472869158",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1472896308"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1472896308"
         }
      },
      "author_association" : "MEMBER",
      "body" : "In 38d32ba2:\r\n\r\nThis is not entirely accurate. `BlockChecked` and `NewPoWValidBlock` run synchronously.",
      "commit_id" : "536429372dfd9759dc8f089962f3a15a94b54751",
      "created_at" : "2024-01-31T14:21:22Z",
      "diff_hunk" : "@@ -70,7 +71,10 @@ struct NodeContext {\n     interfaces::WalletLoader* wallet_loader{nullptr};\n     std::unique_ptr<CScheduler> scheduler;\n     std::function<void()> rpc_interruption_point = [] {};\n+    //! Issues blocking calls about sync status, errors and warnings\n     std::unique_ptr<KernelNotifications> notifications;\n+    //! Issues non-blocking calls about blocks and transactions",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1472896308",
      "id" : 1472896308,
      "line" : 76,
      "node_id" : "PRRC_kwDOABII585Xyp00",
      "original_commit_id" : "38d32ba2e9e0347bd6c72be4922a570650243575",
      "original_line" : 76,
      "original_position" : 14,
      "original_start_line" : null,
      "path" : "src/node/context.h",
      "position" : 14,
      "pull_request_review_id" : 1848819305,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1472896308/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-31T14:53:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1472896308",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1472906800"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1472906800"
         }
      },
      "author_association" : "MEMBER",
      "body" : "In 38d32ba2:\r\n\r\nWhat about setting `callback_set=false` if `validation_signals` is null?",
      "commit_id" : "536429372dfd9759dc8f089962f3a15a94b54751",
      "created_at" : "2024-01-31T14:28:32Z",
      "diff_hunk" : "@@ -101,7 +101,7 @@ TransactionError BroadcastTransaction(NodeContext& node, const CTransactionRef t\n                 // with a transaction to/from their wallet, immediately call some\n                 // wallet RPC, and get a stale result because callbacks have not\n                 // yet been processed.\n-                CallFunctionInValidationInterfaceQueue([&promise] {\n+                node.validation_signals->CallFunctionInValidationInterfaceQueue([&promise] {\n                     promise.set_value();\n                 });\n                 callback_set = true;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1472906800",
      "id" : 1472906800,
      "line" : 107,
      "node_id" : "PRRC_kwDOABII585XysYw",
      "original_commit_id" : "38d32ba2e9e0347bd6c72be4922a570650243575",
      "original_line" : 107,
      "original_position" : 8,
      "original_start_line" : 104,
      "path" : "src/node/transaction.cpp",
      "position" : 8,
      "pull_request_review_id" : 1848819305,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1472906800/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 104,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2024-01-31T14:53:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1472906800",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1472920940"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1472920940"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit:\r\n```suggestion\r\n        node.validation_signals->RegisterSharedValidationInterface(txr);\r\n```\r\n\r\nSame for the others below.",
      "commit_id" : "536429372dfd9759dc8f089962f3a15a94b54751",
      "created_at" : "2024-01-31T14:38:04Z",
      "diff_hunk" : "@@ -286,7 +286,7 @@ FUZZ_TARGET(tx_pool_standard, .init = initialize_tx_pool)\n         std::set<CTransactionRef> removed;\n         std::set<CTransactionRef> added;\n         auto txr = std::make_shared<TransactionsDelta>(removed, added);\n-        RegisterSharedValidationInterface(txr);\n+        g_setup->m_node.validation_signals->RegisterSharedValidationInterface(txr);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1472920940",
      "id" : 1472920940,
      "line" : 289,
      "node_id" : "PRRC_kwDOABII585Xyv1s",
      "original_commit_id" : "38d32ba2e9e0347bd6c72be4922a570650243575",
      "original_line" : 289,
      "original_position" : 23,
      "original_start_line" : null,
      "path" : "src/test/fuzz/tx_pool.cpp",
      "position" : 23,
      "pull_request_review_id" : 1848819305,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1472920940/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-31T14:53:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1472920940",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1473075595"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1473075595"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I'm not sure if this should be optional. Was thinking before about asserting here. Wdyt?",
      "commit_id" : "536429372dfd9759dc8f089962f3a15a94b54751",
      "created_at" : "2024-01-31T16:03:10Z",
      "diff_hunk" : "@@ -101,7 +101,7 @@ TransactionError BroadcastTransaction(NodeContext& node, const CTransactionRef t\n                 // with a transaction to/from their wallet, immediately call some\n                 // wallet RPC, and get a stale result because callbacks have not\n                 // yet been processed.\n-                CallFunctionInValidationInterfaceQueue([&promise] {\n+                node.validation_signals->CallFunctionInValidationInterfaceQueue([&promise] {\n                     promise.set_value();\n                 });\n                 callback_set = true;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1473075595",
      "id" : 1473075595,
      "in_reply_to_id" : 1472906800,
      "line" : 107,
      "node_id" : "PRRC_kwDOABII585XzVmL",
      "original_commit_id" : "38d32ba2e9e0347bd6c72be4922a570650243575",
      "original_line" : 107,
      "original_position" : 8,
      "original_start_line" : 104,
      "path" : "src/node/transaction.cpp",
      "position" : 8,
      "pull_request_review_id" : 1854184786,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1473075595/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 104,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2024-01-31T16:03:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1473075595",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1473174956"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1473174956"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "> I'm not sure if this should be optional. Was thinking before about asserting here. Wdyt?\r\n\r\nI don't see a benefit to aborting when the wait_callback option is true and there is no callback. There is no callback if the transaction is already in the mempool, and we are ok with ignoring the wait_callback option in that case. Would suggest changing line 95 to `if (wait_callback && node.validation_signals)`\r\n",
      "commit_id" : "cb47c334e0b3d654b5b56ae762aa2a2c33ae2743",
      "created_at" : "2024-01-31T17:11:02Z",
      "diff_hunk" : "@@ -101,7 +101,7 @@ TransactionError BroadcastTransaction(NodeContext& node, const CTransactionRef t\n                 // with a transaction to/from their wallet, immediately call some\n                 // wallet RPC, and get a stale result because callbacks have not\n                 // yet been processed.\n-                CallFunctionInValidationInterfaceQueue([&promise] {\n+                node.validation_signals->CallFunctionInValidationInterfaceQueue([&promise] {\n                     promise.set_value();\n                 });\n                 callback_set = true;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1473174956",
      "id" : 1473174956,
      "in_reply_to_id" : 1472906800,
      "line" : 107,
      "node_id" : "PRRC_kwDOABII585Xzt2s",
      "original_commit_id" : "38d32ba2e9e0347bd6c72be4922a570650243575",
      "original_line" : 107,
      "original_position" : 8,
      "original_start_line" : 104,
      "path" : "src/node/transaction.cpp",
      "position" : 17,
      "pull_request_review_id" : 1854352083,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1473174956/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 104,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2024-01-31T17:11:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1473174956",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Thank you for the review @furszy!\r\n\r\nUpdated 536429372dfd9759dc8f089962f3a15a94b54751 -> cb47c334e0b3d654b5b56ae762aa2a2c33ae2743 ([noGlobalSignals_11](https://github.com/TheCharlatan/bitcoin/tree/noGlobalSignals_11) -> [noGlobalSignals_12](https://github.com/TheCharlatan/bitcoin/tree/noGlobalSignals_12), [compare](https://github.com/TheCharlatan/bitcoin/compare/noGlobalSignals_11..noGlobalSignals_12))\r\n\r\n* Addressed @furszy's [comment](https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1469679940), improving logic around optional m_signals in validation code a bit.\r\n* Addressed @furszy's [comment](https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1472858901), dropping unneeded include\r\n* Addressed @furszy's [comment_1](https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1472869158) and [comment_2](https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1472920940), using available `node` reference instead of `g_setup->m_node` pointer in the fuzz tests.\r\n* Addressed @furszy's [comment](https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1472906800), applying ryanofsky's suggestion for gating setting the callback.",
      "created_at" : "2024-01-31T17:38:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#issuecomment-1919591341",
      "id" : 1919591341,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28960",
      "node_id" : "IC_kwDOABII585yaqOt",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1919591341/reactions"
      },
      "updated_at" : "2024-01-31T17:38:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1919591341",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--85328a0da195eb286784d51f73fa0af9-->\n\nð§ At least one of the CI tasks failed. Make sure to run all tests locally, according to the\ndocumentation.\n\nPossibly this is due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n<sub>Debug: https://github.com/bitcoin/bitcoin/runs/21074804475</sub>",
      "created_at" : "2024-01-31T19:20:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#issuecomment-1919774261",
      "id" : 1919774261,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28960",
      "node_id" : "IC_kwDOABII585ybW41",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1919774261/reactions"
      },
      "updated_at" : "2024-01-31T19:20:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1919774261",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Rebased cb47c334e0b3d654b5b56ae762aa2a2c33ae2743 -> 6752d218caeed1111f2520130c156b9ef42ba805 ([noGlobalSignals_12](https://github.com/TheCharlatan/bitcoin/tree/noGlobalSignals_12) -> [noGlobalSignals_13](https://github.com/TheCharlatan/bitcoin/tree/noGlobalSignals_13), [compare](https://github.com/TheCharlatan/bitcoin/compare/noGlobalSignals_12..noGlobalSignals_13))\r\n\r\n* Fixed silent merge conflict with https://github.com/bitcoin/bitcoin/pull/28170",
      "created_at" : "2024-01-31T20:43:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#issuecomment-1919923411",
      "id" : 1919923411,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28960",
      "node_id" : "IC_kwDOABII585yb7TT",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1919923411/reactions"
      },
      "updated_at" : "2024-01-31T20:43:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1919923411",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1474600461"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1474600461"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"refactor: De-globalize g_signals\" (09310dded4c063ae2a10d66082ba699a441a604d)\r\n\r\nThese changes seem to be part of wrong commit. The lines of code that these are referencing changed in earlier commit fe891bead4fabb945c21a7110459e3e18952a08c, not this commit, and now use `signals` instead of `m_signals`.",
      "commit_id" : "c02fd0379c425f486f1b80a81962c1aa68b8a852",
      "created_at" : "2024-02-01T14:46:28Z",
      "diff_hunk" : "@@ -17,21 +17,21 @@ NON_DETERMINISTIC_TESTS=(\n     \"blockfilter_index_tests/blockfilter_index_initial_sync\"  # src/checkqueue.h: In CCheckQueue::Loop(): while (queue.empty()) { ... }\n     \"coinselector_tests/knapsack_solver_test\"                 # coinselector_tests.cpp: if (equal_sets(setCoinsRet, setCoinsRet2))\n     \"fs_tests/fsbridge_fstream\"                               # deterministic test failure?\n-    \"miner_tests/CreateNewBlock_validity\"                     # validation.cpp: if (GetMainSignals().CallbacksPending() > 10)\n+    \"miner_tests/CreateNewBlock_validity\"                     # validation.cpp: if (m_signals.CallbacksPending() > 10)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1474600461",
      "id" : 1474600461,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585X5J4N",
      "original_commit_id" : "09310dded4c063ae2a10d66082ba699a441a604d",
      "original_line" : 20,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "contrib/devtools/test_deterministic_coverage.sh",
      "position" : null,
      "pull_request_review_id" : 1856695173,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1474600461/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-02-01T15:03:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1474600461",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n",
      "created_at" : "2024-02-10T04:46:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#issuecomment-1936862622",
      "id" : 1936862622,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28960",
      "node_id" : "IC_kwDOABII585zci2e",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1936862622/reactions"
      },
      "updated_at" : "2024-02-10T04:46:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1936862622",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Rebased 6752d218caeed1111f2520130c156b9ef42ba805 -> ed3ca5831515c26cf4242de9d13dbe0eb82f6d03 ([noGlobalSignals_13](https://github.com/TheCharlatan/bitcoin/tree/noGlobalSignals_13) -> [noGlobalSignals_14](https://github.com/TheCharlatan/bitcoin/tree/noGlobalSignals_14), [compare](https://github.com/TheCharlatan/bitcoin/compare/noGlobalSignals_13..noGlobalSignals_14))\r\n\r\n* Fixed conflict with https://github.com/bitcoin/bitcoin/pull/28948\r\n\r\nUpdated ed3ca5831515c26cf4242de9d13dbe0eb82f6d03 -> c02fd0379c425f486f1b80a81962c1aa68b8a852 ([noGlobalSignals_14](https://github.com/TheCharlatan/bitcoin/tree/noGlobalSignals_14) -> [noGlobalSignals_15](https://github.com/TheCharlatan/bitcoin/tree/noGlobalSignals_15), [compare](https://github.com/TheCharlatan/bitcoin/compare/noGlobalSignals_14..noGlobalSignals_15))\r\n\r\n* Addressed @ryanofsky's [comment](https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1474600461), fixed variable name in comment and moved the change to the correct commit.",
      "created_at" : "2024-02-10T07:45:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#issuecomment-1936918798",
      "id" : 1936918798,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28960",
      "node_id" : "IC_kwDOABII585zcwkO",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1936918798/reactions"
      },
      "updated_at" : "2024-02-10T07:45:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1936918798",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1489155423"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1489155423"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "The pointer can be `const` to hint the reader and the compiler that it will never start pointing to something else after it has been initialized in the constructor.\r\n\r\n```suggestion\r\n    ValidationSignals* const m_signals;\r\n```\r\n\r\nFor example constructs like:\r\n\r\n```cpp\r\nif (m_signals) {\r\n    ...\r\n    m_signals->whatever();\r\n}\r\n```\r\nare only safe because `m_signals` cannot change after the check.\r\n\r\n_(but see other suggestions, if this is to be changed to `shared_ptr`)_",
      "commit_id" : "c02fd0379c425f486f1b80a81962c1aa68b8a852",
      "created_at" : "2024-02-14T09:21:00Z",
      "diff_hunk" : "@@ -447,6 +448,8 @@ class CTxMemPool\n \n     const Limits m_limits;\n \n+    ValidationSignals* m_signals;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1489155423",
      "id" : 1489155423,
      "line" : 451,
      "node_id" : "PRRC_kwDOABII585YwrVf",
      "original_commit_id" : "c02fd0379c425f486f1b80a81962c1aa68b8a852",
      "original_line" : 451,
      "original_position" : 12,
      "original_start_line" : null,
      "path" : "src/txmempool.h",
      "position" : 12,
      "pull_request_review_id" : 1879760071,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1489155423/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-02-14T16:27:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1489155423",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1489303118"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1489303118"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit: in commit message of a38dfb797f175aab45352f85fa80371861b22cd5 `[refactor] Prepare for g_signals de-globalization`:\r\n\r\n`s/ValidationSignals/CMainSignals/`",
      "commit_id" : "c02fd0379c425f486f1b80a81962c1aa68b8a852",
      "created_at" : "2024-02-14T11:11:07Z",
      "diff_hunk" : "@@ -94,77 +95,56 @@ class MainSignalsImpl\n     }\n };\n \n-static CMainSignals g_signals;\n+ValidationSignals::ValidationSignals(std::unique_ptr<util::TaskRunnerInterface> task_runner)\n+    : m_internals{std::make_unique<ValidationSignalsImpl>(std::move(task_runner))} {}\n \n-void CMainSignals::RegisterBackgroundSignalScheduler(CScheduler& scheduler)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1489303118",
      "id" : 1489303118,
      "line" : 99,
      "node_id" : "PRRC_kwDOABII585YxPZO",
      "original_commit_id" : "c02fd0379c425f486f1b80a81962c1aa68b8a852",
      "original_line" : 99,
      "original_position" : 56,
      "original_start_line" : null,
      "path" : "src/validationinterface.cpp",
      "position" : 56,
      "pull_request_review_id" : 1879760071,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1489303118/reactions"
      },
      "side" : "LEFT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-02-14T16:24:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1489303118",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1489357931"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1489357931"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit, feel free to ignore: maybe `uint256::ZERO` is clearer?\r\n```suggestion\r\n    wallet.chain().waitForNotificationsIfTipChanged(uint256::ZERO);\r\n```",
      "commit_id" : "c02fd0379c425f486f1b80a81962c1aa68b8a852",
      "created_at" : "2024-02-14T11:57:15Z",
      "diff_hunk" : "@@ -39,7 +39,8 @@ static void WalletBalance(benchmark::Bench& bench, const bool set_dirty, const b\n         generatetoaddress(test_setup->m_node, address_mine.value_or(ADDRESS_WATCHONLY));\n         generatetoaddress(test_setup->m_node, ADDRESS_WATCHONLY);\n     }\n-    SyncWithValidationInterfaceQueue();\n+    // Calls SyncWithValidationInterfaceQueue\n+    wallet.chain().waitForNotificationsIfTipChanged({});",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1489357931",
      "id" : 1489357931,
      "line" : 43,
      "node_id" : "PRRC_kwDOABII585Yxcxr",
      "original_commit_id" : "c02fd0379c425f486f1b80a81962c1aa68b8a852",
      "original_line" : 43,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "src/bench/wallet_balance.cpp",
      "position" : 6,
      "pull_request_review_id" : 1879760071,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1489357931/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-02-14T16:24:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1489357931",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1489457095"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1489457095"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Here a reference to `signals` is saved inside `NotificationsHandlerImpl` and is returned opaquely to the caller as a `Handler`. The caller has to make sure that the `Handler` they get does not live longer than `chainman().m_options.signals` but they have no idea about the latter. I understand that this is ok in the current code, but in general this is a recipe for disaster.\r\n\r\nA cleaner and safer approach is to change the type of `ChainstateManagerOpts::signals` from `ValidationSignals*` to `std::shared_ptr<ValidationSignals>` and just copy it around and save `std::shared_ptr<ValidationSignals>` inside `NotificationsHandlerImpl` instead of `ValidationSignals&`.",
      "commit_id" : "c02fd0379c425f486f1b80a81962c1aa68b8a852",
      "created_at" : "2024-02-14T13:23:52Z",
      "diff_hunk" : "@@ -761,12 +762,12 @@ class ChainImpl : public Chain\n     }\n     std::unique_ptr<Handler> handleNotifications(std::shared_ptr<Notifications> notifications) override\n     {\n-        return std::make_unique<NotificationsHandlerImpl>(std::move(notifications));\n+        return std::make_unique<NotificationsHandlerImpl>(*Assert(chainman().m_options.signals), std::move(notifications));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1489457095",
      "id" : 1489457095,
      "line" : 765,
      "node_id" : "PRRC_kwDOABII585Yx0_H",
      "original_commit_id" : "c02fd0379c425f486f1b80a81962c1aa68b8a852",
      "original_line" : 765,
      "original_position" : 30,
      "original_start_line" : null,
      "path" : "src/node/interfaces.cpp",
      "position" : 30,
      "pull_request_review_id" : 1879760071,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1489457095/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-02-14T16:24:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1489457095",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1489463065"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1489463065"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Elsewhere (including from `BaseIndex::Stop()`) there is a check whether `validation_signals` is null, which I think is missing here and in `BaseIndex::Init()`.",
      "commit_id" : "c02fd0379c425f486f1b80a81962c1aa68b8a852",
      "created_at" : "2024-02-14T13:27:45Z",
      "diff_hunk" : "@@ -380,7 +380,7 @@ bool BaseIndex::BlockUntilSyncedToCurrentChain() const\n     }\n \n     LogPrintf(\"%s: %s is catching up on block notifications\\n\", __func__, GetName());\n-    SyncWithValidationInterfaceQueue();\n+    m_chain->context()->validation_signals->SyncWithValidationInterfaceQueue();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1489463065",
      "id" : 1489463065,
      "line" : 383,
      "node_id" : "PRRC_kwDOABII585Yx2cZ",
      "original_commit_id" : "c02fd0379c425f486f1b80a81962c1aa68b8a852",
      "original_line" : 383,
      "original_position" : 14,
      "original_start_line" : null,
      "path" : "src/index/base.cpp",
      "position" : 14,
      "pull_request_review_id" : 1879760071,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1489463065/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-02-14T16:24:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1489463065",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1489527335"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1489527335"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Before we had a global `g_signals` and code that wished to access it called `GetMainSignals()`. This was safe wrt lifetime of the object.\r\n\r\nWith this PR it lives in `NodeContext::validation_signals` as `std::unique_ptr<ValidationSignals>`. Also (for covenience?) the object being pointed to by the `unique_ptr` is extracted from the `unique_ptr` and saved as a raw pointer in `ChainstateManager::Options::signals` and `CTxMemPool::Options::signals`. This defeats the idea of `unique_ptr` because after it goes out of scope and destroys the object, the raw pointers will still exist and point to garbage. Even if not possible with the current code, this pattern better be avoided.\r\n\r\nIt would be better to store `shared_ptr<ValidationSignals>` in all 3 places because that will eliminate any lifetime dependencies - e.g. object A must be destroyed before object B.",
      "commit_id" : "c02fd0379c425f486f1b80a81962c1aa68b8a852",
      "created_at" : "2024-02-14T14:12:37Z",
      "diff_hunk" : "@@ -1158,7 +1163,9 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\n         }\n     }, std::chrono::minutes{5});\n \n-    GetMainSignals().RegisterBackgroundSignalScheduler(*node.scheduler);\n+    assert(!node.validation_signals);\n+    node.validation_signals = std::make_unique<ValidationSignals>(std::make_unique<SerialTaskRunner>(scheduler));\n+    auto& validation_signals = *node.validation_signals;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1489527335",
      "id" : 1489527335,
      "line" : 1168,
      "node_id" : "PRRC_kwDOABII585YyGIn",
      "original_commit_id" : "c02fd0379c425f486f1b80a81962c1aa68b8a852",
      "original_line" : 1168,
      "original_position" : 81,
      "original_start_line" : 1166,
      "path" : "src/init.cpp",
      "position" : 81,
      "pull_request_review_id" : 1879760071,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1489527335/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 1166,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2024-02-14T16:24:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1489527335",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1489594742"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1489594742"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Method names should begin with capital letter:\r\n\r\n```suggestion\r\nvoid SerialTaskRunner::Insert(std::function<void()> func)\r\n```\r\n\r\nSame for `SerialTaskRunner::flush()` and `SerialTaskRunner::size()`",
      "commit_id" : "c02fd0379c425f486f1b80a81962c1aa68b8a852",
      "created_at" : "2024-02-14T14:49:49Z",
      "diff_hunk" : "@@ -173,7 +173,7 @@ void SingleThreadedSchedulerClient::ProcessQueue()\n     callback();\n }\n \n-void SingleThreadedSchedulerClient::AddToProcessQueue(std::function<void()> func)\n+void SerialTaskRunner::insert(std::function<void()> func)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1489594742",
      "id" : 1489594742,
      "line" : 176,
      "node_id" : "PRRC_kwDOABII585YyWl2",
      "original_commit_id" : "c02fd0379c425f486f1b80a81962c1aa68b8a852",
      "original_line" : 176,
      "original_position" : 34,
      "original_start_line" : null,
      "path" : "src/scheduler.cpp",
      "position" : 34,
      "pull_request_review_id" : 1879760071,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1489594742/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-02-14T16:24:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1489594742",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1489711685"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1489711685"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I think the terms \"subscriber\" and \"validation interface event\" don't belong here.\r\n\r\n```suggestion\r\n     * Execute a given task.\r\n     * The callback can either be queued for later/asynchronous/threaded\r\n```",
      "commit_id" : "c02fd0379c425f486f1b80a81962c1aa68b8a852",
      "created_at" : "2024-02-14T15:58:01Z",
      "diff_hunk" : "@@ -0,0 +1,53 @@\n+// Copyright (c) 2024-present The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_UTIL_TASK_RUNNER_H\n+#define BITCOIN_UTIL_TASK_RUNNER_H\n+\n+#include <cstddef>\n+#include <functional>\n+\n+namespace util {\n+\n+/**\n+ * This header provides an interface and simple implementation for a task\n+ * runner. Another threaded, serial implementation using a queue is available in\n+ * the scheduler module's SerialTaskRunner.\n+ */\n+\n+class TaskRunnerInterface\n+{\n+public:\n+    virtual ~TaskRunnerInterface() {}\n+\n+    /**\n+     * This is called for each subscriber on each validation interface event.\n+     * The callback can either be queued for later/asynchronous/threaded",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1489711685",
      "id" : 1489711685,
      "line" : 26,
      "node_id" : "PRRC_kwDOABII585YyzJF",
      "original_commit_id" : "c02fd0379c425f486f1b80a81962c1aa68b8a852",
      "original_line" : 26,
      "original_position" : 26,
      "original_start_line" : 25,
      "path" : "src/util/task_runner.h",
      "position" : 26,
      "pull_request_review_id" : 1879760071,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1489711685/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 25,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2024-02-14T16:24:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1489711685",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1489725106"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1489725106"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Doxygen attaches this comment to the `TaskRunnerInterface` class in the generated documentation which I guess is not the intention.\r\n\r\n```suggestion\r\n/** @file\r\n *\r\n * This header provides an interface and simple implementation for a task\r\n * runner. Another threaded, serial implementation using a queue is available in\r\n * the scheduler module's SerialTaskRunner.\r\n */\r\n\r\n/**\r\n * Interface for a task runner.\r\n */\r\nclass TaskRunnerInterface\r\n```\r\n\r\nSee https://www.doxygen.nl/manual/commands.html#cmdfile",
      "commit_id" : "c02fd0379c425f486f1b80a81962c1aa68b8a852",
      "created_at" : "2024-02-14T16:07:41Z",
      "diff_hunk" : "@@ -0,0 +1,53 @@\n+// Copyright (c) 2024-present The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_UTIL_TASK_RUNNER_H\n+#define BITCOIN_UTIL_TASK_RUNNER_H\n+\n+#include <cstddef>\n+#include <functional>\n+\n+namespace util {\n+\n+/**\n+ * This header provides an interface and simple implementation for a task\n+ * runner. Another threaded, serial implementation using a queue is available in\n+ * the scheduler module's SerialTaskRunner.\n+ */\n+\n+class TaskRunnerInterface",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1489725106",
      "id" : 1489725106,
      "line" : 19,
      "node_id" : "PRRC_kwDOABII585Yy2ay",
      "original_commit_id" : "c02fd0379c425f486f1b80a81962c1aa68b8a852",
      "original_line" : 19,
      "original_position" : 19,
      "original_start_line" : 13,
      "path" : "src/util/task_runner.h",
      "position" : 19,
      "pull_request_review_id" : 1879760071,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1489725106/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 13,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2024-02-14T16:24:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1489725106",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1489727076"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1489727076"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit:\r\n```suggestion\r\n    void flush() override {}\r\n```",
      "commit_id" : "c02fd0379c425f486f1b80a81962c1aa68b8a852",
      "created_at" : "2024-02-14T16:09:05Z",
      "diff_hunk" : "@@ -0,0 +1,53 @@\n+// Copyright (c) 2024-present The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_UTIL_TASK_RUNNER_H\n+#define BITCOIN_UTIL_TASK_RUNNER_H\n+\n+#include <cstddef>\n+#include <functional>\n+\n+namespace util {\n+\n+/**\n+ * This header provides an interface and simple implementation for a task\n+ * runner. Another threaded, serial implementation using a queue is available in\n+ * the scheduler module's SerialTaskRunner.\n+ */\n+\n+class TaskRunnerInterface\n+{\n+public:\n+    virtual ~TaskRunnerInterface() {}\n+\n+    /**\n+     * This is called for each subscriber on each validation interface event.\n+     * The callback can either be queued for later/asynchronous/threaded\n+     * processing, or be executed immediately for synchronous processing.\n+     * Synchronous processing will block validation.\n+     */\n+    virtual void insert(std::function<void()> func) = 0;\n+\n+    /**\n+     * Forces the processing of all pending events.\n+     */\n+    virtual void flush() = 0;\n+\n+    /**\n+     * Returns the number of currently pending events.\n+     */\n+    virtual size_t size() = 0;\n+};\n+\n+class ImmediateTaskRunner : public TaskRunnerInterface\n+{\n+public:\n+    void insert(std::function<void()> func) override { func(); }\n+    void flush() override { return; }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1489727076",
      "id" : 1489727076,
      "line" : 47,
      "node_id" : "PRRC_kwDOABII585Yy25k",
      "original_commit_id" : "c02fd0379c425f486f1b80a81962c1aa68b8a852",
      "original_line" : 47,
      "original_position" : 47,
      "original_start_line" : null,
      "path" : "src/util/task_runner.h",
      "position" : 47,
      "pull_request_review_id" : 1879760071,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1489727076/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-02-14T16:24:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1489727076",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1489734545"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1489734545"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "```diff\r\n- We are not allowed to assume the scheduler only runs in one thread\r\n+ We are not allowed to assume the task runner has only one thread\r\n```",
      "commit_id" : "c02fd0379c425f486f1b80a81962c1aa68b8a852",
      "created_at" : "2024-02-14T16:14:22Z",
      "diff_hunk" : "@@ -45,9 +45,10 @@ class MainSignalsImpl\n     // We are not allowed to assume the scheduler only runs in one thread,\n     // but must ensure all callbacks happen in-order, so we end up creating\n     // our own queue here :(\n-    SingleThreadedSchedulerClient m_schedulerClient;\n+    std::unique_ptr<util::TaskRunnerInterface> m_task_runner;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1489734545",
      "id" : 1489734545,
      "line" : 48,
      "node_id" : "PRRC_kwDOABII585Yy4uR",
      "original_commit_id" : "c02fd0379c425f486f1b80a81962c1aa68b8a852",
      "original_line" : 48,
      "original_position" : 40,
      "original_start_line" : 45,
      "path" : "src/validationinterface.cpp",
      "position" : 40,
      "pull_request_review_id" : 1879760071,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1489734545/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 45,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2024-02-14T16:24:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1489734545",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1490966954"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1490966954"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "The pointers in the options and in `CTxMemPool` are supposed to be optional values (see the first commit message). Using a raw pointer for optional non-owned values seems like an acceptable pattern.",
      "commit_id" : "c02fd0379c425f486f1b80a81962c1aa68b8a852",
      "created_at" : "2024-02-15T12:54:39Z",
      "diff_hunk" : "@@ -1158,7 +1163,9 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\n         }\n     }, std::chrono::minutes{5});\n \n-    GetMainSignals().RegisterBackgroundSignalScheduler(*node.scheduler);\n+    assert(!node.validation_signals);\n+    node.validation_signals = std::make_unique<ValidationSignals>(std::make_unique<SerialTaskRunner>(scheduler));\n+    auto& validation_signals = *node.validation_signals;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1490966954",
      "id" : 1490966954,
      "in_reply_to_id" : 1489527335,
      "line" : 1168,
      "node_id" : "PRRC_kwDOABII585Y3lmq",
      "original_commit_id" : "c02fd0379c425f486f1b80a81962c1aa68b8a852",
      "original_line" : 1168,
      "original_position" : 81,
      "original_start_line" : 1166,
      "path" : "src/init.cpp",
      "position" : 81,
      "pull_request_review_id" : 1882696438,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1490966954/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 1166,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2024-02-15T12:54:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1490966954",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1490999199"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1490999199"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "re: https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1489457095\r\n\r\n@vasild, this seems like an argument to always use shared_ptr or unique_ptr everywhere and never use plain pointers or references. If you would not want a plain reference to be stored here, is there any case where you would want one to be stored?\r\n\r\nTo me, the lifetime of the signals object seems pretty easy to determine and reason about. In bitcoind and bitcoin-qt, there is only one signals object, it is created when the application starts, and destroyed when the application ends. In libbitcoinkernel applications and tests, there may be be more than one signals object or no signal objects, but if signals are used, it should be easy for applications to make sure they outlive other objects like ChainstateManager or CTxMemPool that reference them, and it seems like this would happen naturally as a byproduct of handling the signals.\r\n\r\nI think by contrast using a shared_ptr here would be undesirable, because it would make lifetime of the signals object less predictable. I think it's nice that `NodeContext::validation_signals` is a unique_ptr instead of a shared_ptr so we know exactly when it is created and destroyed, and in general I think of shared_ptr's as something that should be used a last resort when the lifetime of an object truly is unpredictable and needs shared_ptr complexity and semantics. Both ways would work of course, but current approach seems better, IMO",
      "commit_id" : "c02fd0379c425f486f1b80a81962c1aa68b8a852",
      "created_at" : "2024-02-15T13:20:22Z",
      "diff_hunk" : "@@ -761,12 +762,12 @@ class ChainImpl : public Chain\n     }\n     std::unique_ptr<Handler> handleNotifications(std::shared_ptr<Notifications> notifications) override\n     {\n-        return std::make_unique<NotificationsHandlerImpl>(std::move(notifications));\n+        return std::make_unique<NotificationsHandlerImpl>(*Assert(chainman().m_options.signals), std::move(notifications));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1490999199",
      "id" : 1490999199,
      "in_reply_to_id" : 1489457095,
      "line" : 765,
      "node_id" : "PRRC_kwDOABII585Y3tef",
      "original_commit_id" : "c02fd0379c425f486f1b80a81962c1aa68b8a852",
      "original_line" : 765,
      "original_position" : 30,
      "original_start_line" : null,
      "path" : "src/node/interfaces.cpp",
      "position" : 30,
      "pull_request_review_id" : 1882748094,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1490999199/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-02-15T13:20:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1490999199",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1491014229"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1491014229"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "See the comments [here](https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1455548750) for the reasoning. Basically we want to guard in the shutdown (`Stop`) case and it is less important to do so in the rest, since we have tests heavily exercising those paths. Question is also on which de-reference we should be guarding and what to do about the existing unguarded lines that call `m_chain` and its members.",
      "commit_id" : "c02fd0379c425f486f1b80a81962c1aa68b8a852",
      "created_at" : "2024-02-15T13:31:39Z",
      "diff_hunk" : "@@ -380,7 +380,7 @@ bool BaseIndex::BlockUntilSyncedToCurrentChain() const\n     }\n \n     LogPrintf(\"%s: %s is catching up on block notifications\\n\", __func__, GetName());\n-    SyncWithValidationInterfaceQueue();\n+    m_chain->context()->validation_signals->SyncWithValidationInterfaceQueue();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1491014229",
      "id" : 1491014229,
      "in_reply_to_id" : 1489463065,
      "line" : 383,
      "node_id" : "PRRC_kwDOABII585Y3xJV",
      "original_commit_id" : "c02fd0379c425f486f1b80a81962c1aa68b8a852",
      "original_line" : 383,
      "original_position" : 14,
      "original_start_line" : null,
      "path" : "src/index/base.cpp",
      "position" : 14,
      "pull_request_review_id" : 1882772091,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1491014229/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-02-15T13:31:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1491014229",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1491028554"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1491028554"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I think this is fine here. We use lower case names for similar `insert` and `size` methods that mimic the standard library  in our codebase already, and we always have this guideline in the [dev-notes](https://github.com/bitcoin/bitcoin/blob/master/doc/developer-notes.md#internal-interface-naming-style), that indicates that these kind of interface classes could be lower case.",
      "commit_id" : "c02fd0379c425f486f1b80a81962c1aa68b8a852",
      "created_at" : "2024-02-15T13:42:24Z",
      "diff_hunk" : "@@ -173,7 +173,7 @@ void SingleThreadedSchedulerClient::ProcessQueue()\n     callback();\n }\n \n-void SingleThreadedSchedulerClient::AddToProcessQueue(std::function<void()> func)\n+void SerialTaskRunner::insert(std::function<void()> func)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1491028554",
      "id" : 1491028554,
      "in_reply_to_id" : 1489594742,
      "line" : 176,
      "node_id" : "PRRC_kwDOABII585Y30pK",
      "original_commit_id" : "c02fd0379c425f486f1b80a81962c1aa68b8a852",
      "original_line" : 176,
      "original_position" : 34,
      "original_start_line" : null,
      "path" : "src/scheduler.cpp",
      "position" : 34,
      "pull_request_review_id" : 1882795080,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1491028554/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-02-15T13:42:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1491028554",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Thank you for the review @vasild,\r\n\r\nUpdated c02fd0379c425f486f1b80a81962c1aa68b8a852 -> 4e270f3aa70f0bb4e7053d84d5cdd1a1fdcf85c2 ([noGlobalSignals_15](https://github.com/TheCharlatan/bitcoin/tree/noGlobalSignals_15) -> [noGlobalSignals_16](https://github.com/TheCharlatan/bitcoin/tree/noGlobalSignals_16), [compare](https://github.com/TheCharlatan/bitcoin/compare/noGlobalSignals_15..noGlobalSignals_16))\r\n\r\n* Addressed @vasild's [comment](https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1489155423), added `const` qualifier to `m_signals` pointer in `CTxMemPool`.\r\n* Addressed @vasild's [comment](https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1489303118), fixed naming in commit message.\r\n* Addressed @vasild's [comment](https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1489357931), added `uint256::Zero` as argument to `waitForNotificationsIfTipChanged` call.\r\n* Addressed @vasild's [comment](https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1489711685), rewording docstring for `TaskRunnerInterface`'s `insert` method.\r\n* Addressed @vasild's [comment](https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1489725106), added `@file` qualifier to docstring for `task_runner.h` file.\r\n* Addressed @vasild's [comment](https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1489727076), removed unneeded `return` statement.\r\n* Addressed @vasild's [comment](https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1489734545), fixed re-naming issue in comment describing `m_task_runner`.\r\n\r\n* Added `validation_signals` helper in `node/interfaces` instead of reaching into a `ChainstateManager` member for accessing the `ValidationSignals`.\r\n\r\n",
      "created_at" : "2024-02-15T16:05:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#issuecomment-1946417576",
      "id" : 1946417576,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28960",
      "node_id" : "IC_kwDOABII5850A_mo",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1946417576/reactions"
      },
      "updated_at" : "2024-02-15T16:05:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1946417576",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1491319580"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1491319580"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"kernel: Remove dependency on CScheduler\" (4e270f3aa70f0bb4e7053d84d5cdd1a1fdcf85c2)\r\n\r\nThe comment isn't accurate if you \"change scheduler\" to \"task runner\". The comment is trying to say \"We can't assume CScheduler only runs in one thread, but must ensure all callbacks happen in-order, so we end up creating our own queue inside SingleThreadedSchedulerClient.\"\r\n\r\nNow that SingleThreadedSchedulerClient is replaced by `std::unique_ptr<util::TaskRunnerInterface>` the comment doesn't really belong in this file, but I think would be helpful if it were reverted and moved to describe [`SerialTaskRunner::m_callbacks_pending`](https://github.com/bitcoin/bitcoin/blob/4e270f3aa70f0bb4e7053d84d5cdd1a1fdcf85c2/src/scheduler.h#L130)",
      "commit_id" : "4e270f3aa70f0bb4e7053d84d5cdd1a1fdcf85c2",
      "created_at" : "2024-02-15T16:46:55Z",
      "diff_hunk" : "@@ -42,12 +42,13 @@ class MainSignalsImpl\n     std::unordered_map<CValidationInterface*, std::list<ListEntry>::iterator> m_map GUARDED_BY(m_mutex);\n \n public:\n-    // We are not allowed to assume the scheduler only runs in one thread,\n+    // We are not allowed to assume the task runner only runs in one thread,\n     // but must ensure all callbacks happen in-order, so we end up creating\n     // our own queue here :(\n-    SingleThreadedSchedulerClient m_schedulerClient;\n+    std::unique_ptr<util::TaskRunnerInterface> m_task_runner;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1491319580",
      "id" : 1491319580,
      "line" : 48,
      "node_id" : "PRRC_kwDOABII585Y47sc",
      "original_commit_id" : "4e270f3aa70f0bb4e7053d84d5cdd1a1fdcf85c2",
      "original_line" : 48,
      "original_position" : 44,
      "original_start_line" : 45,
      "path" : "src/validationinterface.cpp",
      "position" : 44,
      "pull_request_review_id" : 1883338109,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1491319580/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 45,
      "start_side" : "LEFT",
      "subject_type" : "line",
      "updated_at" : "2024-02-15T16:46:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1491319580",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1491345962"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1491345962"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Right, not sure what I was thinking here. Will revert and apply your suggestion.",
      "commit_id" : "316c7c845036cbffa22b9e44f31dca8573ffb639",
      "created_at" : "2024-02-15T17:04:06Z",
      "diff_hunk" : "@@ -42,12 +42,13 @@ class MainSignalsImpl\n     std::unordered_map<CValidationInterface*, std::list<ListEntry>::iterator> m_map GUARDED_BY(m_mutex);\n \n public:\n-    // We are not allowed to assume the scheduler only runs in one thread,\n+    // We are not allowed to assume the task runner only runs in one thread,\n     // but must ensure all callbacks happen in-order, so we end up creating\n     // our own queue here :(\n-    SingleThreadedSchedulerClient m_schedulerClient;\n+    std::unique_ptr<util::TaskRunnerInterface> m_task_runner;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1491345962",
      "id" : 1491345962,
      "in_reply_to_id" : 1491319580,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585Y5CIq",
      "original_commit_id" : "4e270f3aa70f0bb4e7053d84d5cdd1a1fdcf85c2",
      "original_line" : 45,
      "original_position" : 44,
      "original_start_line" : 45,
      "path" : "src/validationinterface.cpp",
      "position" : null,
      "pull_request_review_id" : 1883376800,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1491345962/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "LEFT",
      "subject_type" : "line",
      "updated_at" : "2024-02-15T17:04:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1491345962",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Updated 4e270f3aa70f0bb4e7053d84d5cdd1a1fdcf85c2 -> 75931055b84d1f0e9f44d3d3efc28785fd23e66c ([noGlobalSignals_16](https://github.com/TheCharlatan/bitcoin/tree/noGlobalSignals_16) -> [noGlobalSignals_17](https://github.com/TheCharlatan/bitcoin/tree/noGlobalSignals_17), [compare](https://github.com/TheCharlatan/bitcoin/compare/noGlobalSignals_16..noGlobalSignals_17))\r\n\r\n* Addressed @ryanofsky's [comment](https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1491319580), reverted previous comment change and instead moved the comment to describe `m_callbacks_pending`.\r\n\r\n\r\n",
      "created_at" : "2024-02-15T17:11:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#issuecomment-1946629608",
      "id" : 1946629608,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28960",
      "node_id" : "IC_kwDOABII5850BzXo",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1946629608/reactions"
      },
      "updated_at" : "2024-02-15T17:11:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1946629608",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1491488517"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1491488517"
         }
      },
      "author_association" : "MEMBER",
      "body" : "What do you mean with this last sentence?\r\nValidation events' subscribers will not call this function. This function will be called by the event dispatching side.",
      "commit_id" : "316c7c845036cbffa22b9e44f31dca8573ffb639",
      "created_at" : "2024-02-15T19:03:15Z",
      "diff_hunk" : "@@ -0,0 +1,54 @@\n+// Copyright (c) 2024-present The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_UTIL_TASK_RUNNER_H\n+#define BITCOIN_UTIL_TASK_RUNNER_H\n+\n+#include <cstddef>\n+#include <functional>\n+\n+namespace util {\n+\n+/** @file\n+ * This header provides an interface and simple implementation for a task\n+ * runner. Another threaded, serial implementation using a queue is available in\n+ * the scheduler module's SerialTaskRunner.\n+ */\n+\n+class TaskRunnerInterface\n+{\n+public:\n+    virtual ~TaskRunnerInterface() {}\n+\n+    /**\n+     * The callback can either be queued for later/asynchronous/threaded\n+     * processing, or be executed immediately for synchronous processing. When\n+     * used in the ValidationSignals synchronous processing will block\n+     * validation. Each subscriber will call this on each validation\n+     * interface event.\n+     */\n+    virtual void insert(std::function<void()> func) = 0;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1491488517",
      "id" : 1491488517,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585Y5k8F",
      "original_commit_id" : "75931055b84d1f0e9f44d3d3efc28785fd23e66c",
      "original_line" : 31,
      "original_position" : 31,
      "original_start_line" : 28,
      "path" : "src/util/task_runner.h",
      "position" : null,
      "pull_request_review_id" : 1883605873,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1491488517/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2024-02-15T19:03:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1491488517",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Updated 75931055b84d1f0e9f44d3d3efc28785fd23e66c -> 316c7c845036cbffa22b9e44f31dca8573ffb639 ([noGlobalSignals_17](https://github.com/TheCharlatan/bitcoin/tree/noGlobalSignals_17) -> [noGlobalSignals_18](https://github.com/TheCharlatan/bitcoin/tree/noGlobalSignals_18), [compare](https://github.com/TheCharlatan/bitcoin/compare/noGlobalSignals_17..noGlobalSignals_18))\r\n\r\n* Addressed @furszy's [comment](https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1491488517), correcting docstring.",
      "created_at" : "2024-02-16T09:22:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#issuecomment-1948024853",
      "id" : 1948024853,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28960",
      "node_id" : "IC_kwDOABII5850HIAV",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1948024853/reactions"
      },
      "updated_at" : "2024-02-16T09:22:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1948024853",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1492391457"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1492391457"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I'm still unsure about the way this is written. Maybe better to write something like \"`func` usually contains a loop that dispatches a single validation event to all subscribers sequentially. This will block validation if it is processed synchronously\".",
      "commit_id" : "316c7c845036cbffa22b9e44f31dca8573ffb639",
      "created_at" : "2024-02-16T12:27:32Z",
      "diff_hunk" : "@@ -0,0 +1,54 @@\n+// Copyright (c) 2024-present The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_UTIL_TASK_RUNNER_H\n+#define BITCOIN_UTIL_TASK_RUNNER_H\n+\n+#include <cstddef>\n+#include <functional>\n+\n+namespace util {\n+\n+/** @file\n+ * This header provides an interface and simple implementation for a task\n+ * runner. Another threaded, serial implementation using a queue is available in\n+ * the scheduler module's SerialTaskRunner.\n+ */\n+\n+class TaskRunnerInterface\n+{\n+public:\n+    virtual ~TaskRunnerInterface() {}\n+\n+    /**\n+     * The callback can either be queued for later/asynchronous/threaded\n+     * processing, or be executed immediately for synchronous processing. When\n+     * used in the ValidationSignals synchronous processing will block\n+     * validation. It is called for each subscriber on each validation\n+     * interface event.\n+     */\n+    virtual void insert(std::function<void()> func) = 0;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1492391457",
      "id" : 1492391457,
      "line" : 31,
      "node_id" : "PRRC_kwDOABII585Y9BYh",
      "original_commit_id" : "316c7c845036cbffa22b9e44f31dca8573ffb639",
      "original_line" : 31,
      "original_position" : 31,
      "original_start_line" : 28,
      "path" : "src/util/task_runner.h",
      "position" : 31,
      "pull_request_review_id" : 1884993957,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1492391457/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 28,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2024-02-16T12:27:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1492391457",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1492401601"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1492401601"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Would be a nice follow-up to remove the non-deterministic scheduler from all tests, unless they are explicitly testing the scheduler.\r\n\r\ncc @aureleoules , who was asking for a solution to this for the corecheck infra",
      "commit_id" : "316c7c845036cbffa22b9e44f31dca8573ffb639",
      "created_at" : "2024-02-16T12:36:59Z",
      "diff_hunk" : "@@ -17,21 +17,21 @@ NON_DETERMINISTIC_TESTS=(\n     \"blockfilter_index_tests/blockfilter_index_initial_sync\"  # src/checkqueue.h: In CCheckQueue::Loop(): while (queue.empty()) { ... }\n     \"coinselector_tests/knapsack_solver_test\"                 # coinselector_tests.cpp: if (equal_sets(setCoinsRet, setCoinsRet2))\n     \"fs_tests/fsbridge_fstream\"                               # deterministic test failure?\n-    \"miner_tests/CreateNewBlock_validity\"                     # validation.cpp: if (GetMainSignals().CallbacksPending() > 10)\n+    \"miner_tests/CreateNewBlock_validity\"                     # validation.cpp: if (signals.CallbacksPending() > 10)\n     \"scheduler_tests/manythreads\"                             # scheduler.cpp: CScheduler::serviceQueue()\n     \"scheduler_tests/singlethreadedscheduler_ordered\"         # scheduler.cpp: CScheduler::serviceQueue()\n-    \"txvalidationcache_tests/checkinputs_test\"                # validation.cpp: if (GetMainSignals().CallbacksPending() > 10)\n-    \"txvalidationcache_tests/tx_mempool_block_doublespend\"    # validation.cpp: if (GetMainSignals().CallbacksPending() > 10)\n-    \"txindex_tests/txindex_initial_sync\"                      # validation.cpp: if (GetMainSignals().CallbacksPending() > 10)\n-    \"txvalidation_tests/tx_mempool_reject_coinbase\"           # validation.cpp: if (GetMainSignals().CallbacksPending() > 10)\n-    \"validation_block_tests/processnewblock_signals_ordering\" # validation.cpp: if (GetMainSignals().CallbacksPending() > 10)\n-    \"wallet_tests/coin_mark_dirty_immature_credit\"            # validation.cpp: if (GetMainSignals().CallbacksPending() > 10)\n-    \"wallet_tests/dummy_input_size_test\"                      # validation.cpp: if (GetMainSignals().CallbacksPending() > 10)\n-    \"wallet_tests/importmulti_rescan\"                         # validation.cpp: if (GetMainSignals().CallbacksPending() > 10)\n-    \"wallet_tests/importwallet_rescan\"                        # validation.cpp: if (GetMainSignals().CallbacksPending() > 10)\n-    \"wallet_tests/ListCoins\"                                  # validation.cpp: if (GetMainSignals().CallbacksPending() > 10)\n-    \"wallet_tests/scan_for_wallet_transactions\"               # validation.cpp: if (GetMainSignals().CallbacksPending() > 10)\n-    \"wallet_tests/wallet_disableprivkeys\"                     # validation.cpp: if (GetMainSignals().CallbacksPending() > 10)\n+    \"txvalidationcache_tests/checkinputs_test\"                # validation.cpp: if (signals.CallbacksPending() > 10)\n+    \"txvalidationcache_tests/tx_mempool_block_doublespend\"    # validation.cpp: if (signals.CallbacksPending() > 10)\n+    \"txindex_tests/txindex_initial_sync\"                      # validation.cpp: if (signals.CallbacksPending() > 10)\n+    \"txvalidation_tests/tx_mempool_reject_coinbase\"           # validation.cpp: if (signals.CallbacksPending() > 10)\n+    \"validation_block_tests/processnewblock_signals_ordering\" # validation.cpp: if (signals.CallbacksPending() > 10)\n+    \"wallet_tests/coin_mark_dirty_immature_credit\"            # validation.cpp: if (signals.CallbacksPending() > 10)\n+    \"wallet_tests/dummy_input_size_test\"                      # validation.cpp: if (signals.CallbacksPending() > 10)\n+    \"wallet_tests/importmulti_rescan\"                         # validation.cpp: if (signals.CallbacksPending() > 10)\n+    \"wallet_tests/importwallet_rescan\"                        # validation.cpp: if (signals.CallbacksPending() > 10)\n+    \"wallet_tests/ListCoins\"                                  # validation.cpp: if (signals.CallbacksPending() > 10)\n+    \"wallet_tests/scan_for_wallet_transactions\"               # validation.cpp: if (signals.CallbacksPending() > 10)\n+    \"wallet_tests/wallet_disableprivkeys\"                     # validation.cpp: if (signals.CallbacksPending() > 10)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1492401601",
      "id" : 1492401601,
      "line" : 34,
      "node_id" : "PRRC_kwDOABII585Y9D3B",
      "original_commit_id" : "316c7c845036cbffa22b9e44f31dca8573ffb639",
      "original_line" : 34,
      "original_position" : 31,
      "original_start_line" : null,
      "path" : "contrib/devtools/test_deterministic_coverage.sh",
      "position" : 31,
      "pull_request_review_id" : 1885022553,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1492401601/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-02-16T12:36:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1492401601",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/maflcko/events{/privacy}",
         "followers_url" : "https://api.github.com/users/maflcko/followers",
         "following_url" : "https://api.github.com/users/maflcko/following{/other_user}",
         "gists_url" : "https://api.github.com/users/maflcko/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/maflcko",
         "id" : 6399679,
         "login" : "maflcko",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/maflcko/orgs",
         "received_events_url" : "https://api.github.com/users/maflcko/received_events",
         "repos_url" : "https://api.github.com/users/maflcko/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/maflcko/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/maflcko/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/maflcko"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1492409498"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1492409498"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Are you sure this is correct? Would it be possible that it is called once for each validation interface event, and the inserted function would then iterate over each subscriber?",
      "commit_id" : "316c7c845036cbffa22b9e44f31dca8573ffb639",
      "created_at" : "2024-02-16T12:44:59Z",
      "diff_hunk" : "@@ -0,0 +1,54 @@\n+// Copyright (c) 2024-present The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_UTIL_TASK_RUNNER_H\n+#define BITCOIN_UTIL_TASK_RUNNER_H\n+\n+#include <cstddef>\n+#include <functional>\n+\n+namespace util {\n+\n+/** @file\n+ * This header provides an interface and simple implementation for a task\n+ * runner. Another threaded, serial implementation using a queue is available in\n+ * the scheduler module's SerialTaskRunner.\n+ */\n+\n+class TaskRunnerInterface\n+{\n+public:\n+    virtual ~TaskRunnerInterface() {}\n+\n+    /**\n+     * The callback can either be queued for later/asynchronous/threaded\n+     * processing, or be executed immediately for synchronous processing. When\n+     * used in the ValidationSignals synchronous processing will block\n+     * validation. It is called for each subscriber on each validation\n+     * interface event.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1492409498",
      "id" : 1492409498,
      "line" : 29,
      "node_id" : "PRRC_kwDOABII585Y9Fya",
      "original_commit_id" : "316c7c845036cbffa22b9e44f31dca8573ffb639",
      "original_line" : 29,
      "original_position" : 29,
      "original_start_line" : null,
      "path" : "src/util/task_runner.h",
      "position" : 29,
      "pull_request_review_id" : 1885045429,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1492409498/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-02-16T12:45:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1492409498",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/maflcko/events{/privacy}",
         "followers_url" : "https://api.github.com/users/maflcko/followers",
         "following_url" : "https://api.github.com/users/maflcko/following{/other_user}",
         "gists_url" : "https://api.github.com/users/maflcko/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/maflcko",
         "id" : 6399679,
         "login" : "maflcko",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/maflcko/orgs",
         "received_events_url" : "https://api.github.com/users/maflcko/received_events",
         "repos_url" : "https://api.github.com/users/maflcko/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/maflcko/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/maflcko/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/maflcko"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1492412912"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1492412912"
         }
      },
      "author_association" : "MEMBER",
      "body" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1492391457",
      "commit_id" : "316c7c845036cbffa22b9e44f31dca8573ffb639",
      "created_at" : "2024-02-16T12:48:30Z",
      "diff_hunk" : "@@ -0,0 +1,54 @@\n+// Copyright (c) 2024-present The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_UTIL_TASK_RUNNER_H\n+#define BITCOIN_UTIL_TASK_RUNNER_H\n+\n+#include <cstddef>\n+#include <functional>\n+\n+namespace util {\n+\n+/** @file\n+ * This header provides an interface and simple implementation for a task\n+ * runner. Another threaded, serial implementation using a queue is available in\n+ * the scheduler module's SerialTaskRunner.\n+ */\n+\n+class TaskRunnerInterface\n+{\n+public:\n+    virtual ~TaskRunnerInterface() {}\n+\n+    /**\n+     * The callback can either be queued for later/asynchronous/threaded\n+     * processing, or be executed immediately for synchronous processing. When\n+     * used in the ValidationSignals synchronous processing will block\n+     * validation. It is called for each subscriber on each validation\n+     * interface event.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1492412912",
      "id" : 1492412912,
      "in_reply_to_id" : 1492409498,
      "line" : 29,
      "node_id" : "PRRC_kwDOABII585Y9Gnw",
      "original_commit_id" : "316c7c845036cbffa22b9e44f31dca8573ffb639",
      "original_line" : 29,
      "original_position" : 29,
      "original_start_line" : null,
      "path" : "src/util/task_runner.h",
      "position" : 29,
      "pull_request_review_id" : 1885055514,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1492412912/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-02-16T12:48:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1492412912",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1492523347"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1492523347"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "re: https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1492409498\r\n\r\nYeah the sentence \"When used in the ValidationSignals synchronous processing will block validation. It is called for each subscriber on each validation interface event.\" is a little misleading because only one task per event is inserted, regardless of number of subscribers. In the future we might want to change this so indexes/wallets don't block each other, but that is the current implementation.\r\n\r\nI would fix this by deleting this sentence here, because this information is more relevant to ValidationSignals anyway than the TaskRunnerInterface class. A good place to move it would be to the ValidationSignals constructor:\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/316c7c845036cbffa22b9e44f31dca8573ffb639/src/validationinterface.h#L166\r\n\r\nAnd I like furszy's suggested wording https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1492391457",
      "commit_id" : "316c7c845036cbffa22b9e44f31dca8573ffb639",
      "created_at" : "2024-02-16T14:14:37Z",
      "diff_hunk" : "@@ -0,0 +1,54 @@\n+// Copyright (c) 2024-present The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_UTIL_TASK_RUNNER_H\n+#define BITCOIN_UTIL_TASK_RUNNER_H\n+\n+#include <cstddef>\n+#include <functional>\n+\n+namespace util {\n+\n+/** @file\n+ * This header provides an interface and simple implementation for a task\n+ * runner. Another threaded, serial implementation using a queue is available in\n+ * the scheduler module's SerialTaskRunner.\n+ */\n+\n+class TaskRunnerInterface\n+{\n+public:\n+    virtual ~TaskRunnerInterface() {}\n+\n+    /**\n+     * The callback can either be queued for later/asynchronous/threaded\n+     * processing, or be executed immediately for synchronous processing. When\n+     * used in the ValidationSignals synchronous processing will block\n+     * validation. It is called for each subscriber on each validation\n+     * interface event.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1492523347",
      "id" : 1492523347,
      "in_reply_to_id" : 1492409498,
      "line" : 29,
      "node_id" : "PRRC_kwDOABII585Y9hlT",
      "original_commit_id" : "316c7c845036cbffa22b9e44f31dca8573ffb639",
      "original_line" : 29,
      "original_position" : 29,
      "original_start_line" : null,
      "path" : "src/util/task_runner.h",
      "position" : 29,
      "pull_request_review_id" : 1885256566,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1492523347/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-02-16T14:16:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1492523347",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Thank you for the comments,\r\n\r\nUpdated 316c7c845036cbffa22b9e44f31dca8573ffb639 -> d5228efb5391b31a9a0673019e43e7fa2cd4ac07 ([noGlobalSignals_18](https://github.com/TheCharlatan/bitcoin/tree/noGlobalSignals_18) -> [noGlobalSignals_19](https://github.com/TheCharlatan/bitcoin/tree/noGlobalSignals_19), [compare](https://github.com/TheCharlatan/bitcoin/compare/noGlobalSignals_18..noGlobalSignals_19))\r\n\r\n* Addressed [comment_1](https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1492523347), [comment_2](https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1492391457), fixing and moving a comment.",
      "created_at" : "2024-02-16T16:19:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#issuecomment-1948788558",
      "id" : 1948788558,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28960",
      "node_id" : "IC_kwDOABII5850KCdO",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1948788558/reactions"
      },
      "updated_at" : "2024-02-16T16:19:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1948788558",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "node_id" : "MDQ6VXNlcjg0MjE3OTM=",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1492705747"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1492705747"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "You can have optional stuff with `shared_ptr` as well (if it is empty).",
      "commit_id" : "d5228efb5391b31a9a0673019e43e7fa2cd4ac07",
      "created_at" : "2024-02-16T16:21:36Z",
      "diff_hunk" : "@@ -1158,7 +1163,9 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\n         }\n     }, std::chrono::minutes{5});\n \n-    GetMainSignals().RegisterBackgroundSignalScheduler(*node.scheduler);\n+    assert(!node.validation_signals);\n+    node.validation_signals = std::make_unique<ValidationSignals>(std::make_unique<SerialTaskRunner>(scheduler));\n+    auto& validation_signals = *node.validation_signals;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1492705747",
      "id" : 1492705747,
      "in_reply_to_id" : 1489527335,
      "line" : 1168,
      "node_id" : "PRRC_kwDOABII585Y-OHT",
      "original_commit_id" : "c02fd0379c425f486f1b80a81962c1aa68b8a852",
      "original_line" : 1168,
      "original_position" : 81,
      "original_start_line" : 1166,
      "path" : "src/init.cpp",
      "position" : 81,
      "pull_request_review_id" : 1885530662,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1492705747/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 1166,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2024-02-16T16:21:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1492705747",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1492732536"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1492732536"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "> this seems like an argument to always use shared_ptr or unique_ptr everywhere and never use plain pointers or references.\r\n\r\nRaw pointers and references are ok to be used for arguments to functions. Or as automatic variables that obviously don't outlive the referenced object (on-stack local variables inside the body of a function).\r\n\r\n> If you would not want a plain reference to be stored here, is there any case where you would want one to be stored?\r\n\r\nIf you store raw pointers or references as class members that rises the burden of lifetime management. It could quickly become dangerous. Maybe I would \"want\" to store that if it is super obvious that it is not going to outlive the target. Maybe if both are created and destroyed together. Smart pointers were introduced to solve issues with manual lifetime management.\r\n\r\n> To me, the lifetime of the signals object seems pretty easy to determine and reason about ...\r\n\r\nTo you yes, but what about a random Bitcoin Core developer some time in the future? For me personally, what followed in that paragraph of explanation is not \"easy\".\r\n\r\n> I think by contrast using a shared_ptr here would be undesirable, because it would make lifetime of the signals object less predictable. I think it's nice that NodeContext::validation_signals is a unique_ptr instead of a shared_ptr so we know exactly when it is created and destroyed ...\r\n\r\nWhy do you need to predict it? With a few `shared_ptr`s you simply don't care and the code is safe from \"use after free\" bugs. That's automatic lifetime management.",
      "commit_id" : "d5228efb5391b31a9a0673019e43e7fa2cd4ac07",
      "created_at" : "2024-02-16T16:45:00Z",
      "diff_hunk" : "@@ -761,12 +762,12 @@ class ChainImpl : public Chain\n     }\n     std::unique_ptr<Handler> handleNotifications(std::shared_ptr<Notifications> notifications) override\n     {\n-        return std::make_unique<NotificationsHandlerImpl>(std::move(notifications));\n+        return std::make_unique<NotificationsHandlerImpl>(*Assert(chainman().m_options.signals), std::move(notifications));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1492732536",
      "id" : 1492732536,
      "in_reply_to_id" : 1489457095,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585Y-Up4",
      "original_commit_id" : "c02fd0379c425f486f1b80a81962c1aa68b8a852",
      "original_line" : 765,
      "original_position" : 30,
      "original_start_line" : null,
      "path" : "src/node/interfaces.cpp",
      "position" : null,
      "pull_request_review_id" : 1885573035,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1492732536/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-02-16T16:45:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1492732536",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1492799393"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1492799393"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "> With a few shared_ptrs you simply don't care and the code is safe from \"use after free\" bugs. That's automatic lifetime management.\r\n\r\nOf course, thanks for clarifying. C++ is a very flexible language and you can certainly use it in the style you are suggesting where everything is basically garbage collected, and use after free bugs never happen. There are benefits to doing this, but also drawbacks. IMO, the main drawbacks of using shared_ptr are (1) that it can make lifetime of objects unpredictable, so it is hard to reason about when objects get destroyed and (2) that it tends to be viral, because as soon as one object is wrapped in a shared_ptr, references to outside state in the object also need to be use shared_ptr, because the lifetime of the object is unpredictable and you don't want use-after-free bugs to happen internally. If you are ok with overhead/complexity/unpredictability of shared_ptr (https://ddanilov.me/shared-ptr-is-evil/) and having it spread, these things are not problems. But it would seem unfortunate to me to force users of the libbitcoinkernel library to use shared_ptrs when there is not an actual need for reference counting here.\r\n\r\nThere are specific places where I would agree shared_ptrs and reference counting are very helpful, but unless I am misinterpreting, it sounds like the approach you are advocating is to basically never use raw pointers or references as class and struct members, and only use unique_ptr/shared_ptr/weak_ptr. This is a reasonable approach, but is a little idiosyncratic, not the way most of the bitcoin codebase is written, and does have some tradeoffs.",
      "commit_id" : "d5228efb5391b31a9a0673019e43e7fa2cd4ac07",
      "created_at" : "2024-02-16T17:44:59Z",
      "diff_hunk" : "@@ -761,12 +762,12 @@ class ChainImpl : public Chain\n     }\n     std::unique_ptr<Handler> handleNotifications(std::shared_ptr<Notifications> notifications) override\n     {\n-        return std::make_unique<NotificationsHandlerImpl>(std::move(notifications));\n+        return std::make_unique<NotificationsHandlerImpl>(*Assert(chainman().m_options.signals), std::move(notifications));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1492799393",
      "id" : 1492799393,
      "in_reply_to_id" : 1489457095,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585Y-k-h",
      "original_commit_id" : "c02fd0379c425f486f1b80a81962c1aa68b8a852",
      "original_line" : 765,
      "original_position" : 30,
      "original_start_line" : null,
      "path" : "src/node/interfaces.cpp",
      "position" : null,
      "pull_request_review_id" : 1885683658,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1492799393/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-02-16T17:46:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1492799393",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1492837763"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1492837763"
         }
      },
      "author_association" : "MEMBER",
      "body" : ">  A good place to move it would be to the ValidationSignals constructor\r\nI would rather place it above the imp class declaration, but just a tiny styling nit.",
      "commit_id" : "d5228efb5391b31a9a0673019e43e7fa2cd4ac07",
      "created_at" : "2024-02-16T18:23:43Z",
      "diff_hunk" : "@@ -0,0 +1,54 @@\n+// Copyright (c) 2024-present The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_UTIL_TASK_RUNNER_H\n+#define BITCOIN_UTIL_TASK_RUNNER_H\n+\n+#include <cstddef>\n+#include <functional>\n+\n+namespace util {\n+\n+/** @file\n+ * This header provides an interface and simple implementation for a task\n+ * runner. Another threaded, serial implementation using a queue is available in\n+ * the scheduler module's SerialTaskRunner.\n+ */\n+\n+class TaskRunnerInterface\n+{\n+public:\n+    virtual ~TaskRunnerInterface() {}\n+\n+    /**\n+     * The callback can either be queued for later/asynchronous/threaded\n+     * processing, or be executed immediately for synchronous processing. When\n+     * used in the ValidationSignals synchronous processing will block\n+     * validation. It is called for each subscriber on each validation\n+     * interface event.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28960#discussion_r1492837763",
      "id" : 1492837763,
      "in_reply_to_id" : 1492409498,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585Y-uWD",
      "original_commit_id" : "316c7c845036cbffa22b9e44f31dca8573ffb639",
      "original_line" : 29,
      "original_position" : 29,
      "original_start_line" : null,
      "path" : "src/util/task_runner.h",
      "position" : null,
      "pull_request_review_id" : 1885740077,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28960",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1492837763/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-02-16T18:24:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1492837763",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   }
]
