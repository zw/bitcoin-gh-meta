{
   "active_lock_reason" : null,
   "assignee" : null,
   "assignees" : [],
   "author_association" : "CONTRIBUTOR",
   "body" : "Does a random selection limited to three more output groups than largest-first selection would select to fund the transaction. If the limit is exceeded during selection, the output group with the lowest effective value is discarded.\r\n\r\nAdds a coin selection algorithm that minimizes the weight of the input set while creating change.\r\n\r\nMotivations\r\n---\r\n\r\n- At high feerates, using unnecessary inputs can [significantly increase the fees](https://bitcoin.stackexchange.com/q/120408/5406)\r\n- Users are upset when fees are relatively large compared to the amount sent\r\n- [Minimizing the input set](https://github.com/bitcoin/bitcoin/pull/27877) is an NP-hard problem\r\n- Always minimizing the weight of the input set can lead to fragmentation of the walletâs UTXO pool\r\n\r\nApproach\r\n---\r\n\r\nBitcoin Core uses multiple coin selection algorithms to generate candidate input sets. It then picks the least wasteful input set per the weight metric, but none of the deployed algorithms explicitly look for low-weight input sets. Gutter Guard Selector determines a likely minimum count `c` of output groups that are necessary to fund the transaction via largest-first selection. It then performs a random selection while limiting the selected output groups to `c + 3`. If this limit is exceeded during selection, the output group with the lowest effective value is dropped from the current selection.\r\n\r\nTrade-offs\r\n---\r\n\r\nWhile largest-first selection or minimizing the input set might grind a walletâs UTXO pool to dust if overused, because the number of inputs is equal to the number of change outputs returned to the wallet, the Gutter Guard Selector will reduce the UTXO pool of a highly fragmented wallet by at least three UTXOs. In the case of a selection with many UTXOs larger than the target, a solution with fewer inputs and less weight may be found. When the wallet is operating in consolidatory mode during low feerates, other coin selection algorithms may be even more consolidatory anyway. However, at high feerates, Gutter Guard Selector ensures that there is an input set candidate that isnât [absurdly wasteful](https://bitcoin.stackexchange.com/q/100437/5406) and therefore curbs the worst case.",
   "closed_at" : null,
   "closed_by" : null,
   "comments" : 1,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28977/comments",
   "created_at" : "2023-11-30T21:26:01Z",
   "draft" : true,
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28977/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/pull/28977",
   "id" : 2019534641,
   "labels" : [],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28977/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "node_id" : "PR_kwDOABII585g08U6",
   "number" : 28977,
   "performed_via_github_app" : null,
   "pull_request" : {
      "diff_url" : "https://github.com/bitcoin/bitcoin/pull/28977.diff",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/28977",
      "merged_at" : null,
      "patch_url" : "https://github.com/bitcoin/bitcoin/pull/28977.patch",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/28977"
   },
   "reactions" : {
      "+1" : 0,
      "-1" : 0,
      "confused" : 0,
      "eyes" : 0,
      "heart" : 0,
      "hooray" : 0,
      "laugh" : 0,
      "rocket" : 0,
      "total_count" : 0,
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28977/reactions"
   },
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "open",
   "state_reason" : null,
   "timeline_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28977/timeline",
   "title" : "Add Gutter Guard Selector",
   "updated_at" : "2023-11-30T22:53:12Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/28977",
   "user" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/4060799?v=4",
      "events_url" : "https://api.github.com/users/murchandamus/events{/privacy}",
      "followers_url" : "https://api.github.com/users/murchandamus/followers",
      "following_url" : "https://api.github.com/users/murchandamus/following{/other_user}",
      "gists_url" : "https://api.github.com/users/murchandamus/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/murchandamus",
      "id" : 4060799,
      "login" : "murchandamus",
      "node_id" : "MDQ6VXNlcjQwNjA3OTk=",
      "organizations_url" : "https://api.github.com/users/murchandamus/orgs",
      "received_events_url" : "https://api.github.com/users/murchandamus/received_events",
      "repos_url" : "https://api.github.com/users/murchandamus/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/murchandamus/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/murchandamus/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/murchandamus"
   }
}
