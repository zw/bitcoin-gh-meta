{
   "assignee" : null,
   "assignees" : [],
   "author_association" : "NONE",
   "body" : "\r\n\r\n<!-- Describe the issue -->\r\nSetting up a new linux box with Ubuntu 16.0.4 LTS on a 2009 MacPro. during initial network sync downloading hangs at around block 477890. This has been observed with ppa version 0.15.1 and with 0.15.99.0-b5e4b9b. The command bicoin-cli reconsiderblock [\"block hash\"] will occasionally advance, but usually 1-2 blocks at most.\r\n<!--- What behavior did you expect? -->\r\nExpected bitcoind to sync with no problems. Even with a stuck block, I expected reconsiderblock to be able to unstick and allow the network syncing to proceed.\r\n\r\n<!--- What was the actual behavior (provide screenshots if the issue is GUI-related)? -->\r\nsnipet of debug.log when problem occured\r\n2018-01-23 22:48:30 UpdateTip: new best=000000000000000000a87c7f93a33b243350a891c275a7f64febb7377ae4bb65 height=477892 version=0x20000002 log2_work=86.83599 tx=242351572 date='2017-07-28 0$\r\n2018-01-23 22:48:30 UpdateTip: new best=00000000000000000131d93cad98313b8c64ad61220b704c62dd9ef454972403 height=477893 version=0x20000012 log2_work=86.836028 tx=242353398 date='2017-07-28 $\r\n2018-01-23 22:48:31 ERROR: ConnectBlock: CheckQueue failed\r\n2018-01-23 22:48:31 Misbehaving: 199.188.204.106:8333 peer=27 (0 -> 100) BAN THRESHOLD EXCEEDED\r\n2018-01-23 22:48:31 InvalidChainFound: invalid block=000000000000000000cba89109e4baf645122d0211d93e808456e0c9cfb53a35  height=477894  log2_work=86.836067  date=2017-07-28 02:03:09\r\n2018-01-23 22:48:31 InvalidChainFound:  current best=00000000000000000131d93cad98313b8c64ad61220b704c62dd9ef454972403  height=477893  log2_work=86.836028  date=2017-07-28 01:43:21\r\n2018-01-23 22:48:31 ERROR: ConnectTip(): ConnectBlock 000000000000000000cba89109e4baf645122d0211d93e808456e0c9cfb53a35 failed\r\n2018-01-23 22:48:31 InvalidChainFound: invalid block=000000000000000000cba89109e4baf645122d0211d93e808456e0c9cfb53a35  height=477894  log2_work=86.836067  date=2017-07-28 02:03:09\r\n2018-01-23 22:48:31 InvalidChainFound:  current best=00000000000000000131d93cad98313b8c64ad61220b704c62dd9ef454972403  height=477893  log2_work=86.836028  date=2017-07-28 01:43:21\r\n2018-01-23 22:48:31 Pre-allocating up to position 0x6000000 in blk00951.dat\r\n2018-01-23 22:48:31 Pre-allocating up to position 0x7000000 in blk00951.dat\r\n2018-01-23 22:48:32 New outbound peer connected: version: 70015, blocks=505769, peer=1274\r\n2018-01-23 22:48:34 Pre-allocating up to position 0x8000000 in blk00951.dat\r\n2018-01-23 22:48:36 Leaving block file 951: CBlockFileInfo(blocks=156, size=134139846, heights=477850...478413, time=2017-07-27...2017-07-31)\r\n2018-01-23 22:48:37 Pre-allocating up to position 0x1000000 in blk00952.dat\r\n2018-01-23 22:48:40 Pre-allocating up to position 0x2000000 in blk00952.dat\r\n2018-01-23 22:49:09 Pre-allocating up to position 0x3000000 in blk00952.dat\r\n2018-01-23 22:49:43 ERROR: AcceptBlockHeader: prev block invalid\r\n2018-01-23 22:49:43 Misbehaving: 110.10.81.224:8333 peer=338 (0 -> 100) BAN THRESHOLD EXCEEDED\r\n2018-01-23 22:49:43 ERROR: invalid header received\r\n2018-01-23 22:49:43 ERROR: AcceptBlockHeader: prev block invalid\r\n\r\n\r\nsnipet of a reconsiderblock from debug.log\r\n2018-01-24 00:39:14 ERROR: ConnectBlock: CheckQueue failed\r\n2018-01-24 00:39:14 InvalidChainFound: invalid block=0000000000000000012f0e4974243ef26af7317366ffccdaac013105582d34c5  height=478058  log2_work=86.842382  date=2017-07-29 03:40:27\r\n2018-01-24 00:39:14 InvalidChainFound:  current best=00000000000000000094c2fdb70a5b2ff7e0ddbf664eb63d08d0215151c8fa5b  height=478057  log2_work=86.842344  date=2017-07-29 03:39:12\r\n2018-01-24 00:39:14 ERROR: ConnectTip(): ConnectBlock 0000000000000000012f0e4974243ef26af7317366ffccdaac013105582d34c5 failed\r\n2018-01-24 00:39:14 InvalidChainFound: invalid block=0000000000000000012f0e4974243ef26af7317366ffccdaac013105582d34c5  height=478058  log2_work=86.842382  date=2017-07-29 03:40:27\r\n2018-01-24 00:39:14 InvalidChainFound:  current best=00000000000000000094c2fdb70a5b2ff7e0ddbf664eb63d08d0215151c8fa5b  height=478057  log2_work=86.842344  date=2017-07-29 03:39:12\r\n2018-01-24 00:39:16 UpdateTip: new best=0000000000000000012f0e4974243ef26af7317366ffccdaac013105582d34c5 height=478058 version=0x20000002 log2_work=86.842382 tx=242624309 date='2017-07-29 $\r\n2018-01-24 00:39:16 UpdateTip: new best=00000000000000000139f00fb5619f60df2ea7382939bd03b95a3d671248eb4b height=478059 version=0x20000002 log2_work=86.842421 tx=242625377 date='2017-07-29 $\r\n2018-01-24 00:39:17 Pre-allocating up to position 0xf00000 in rev00949.dat\r\n2018-01-24 00:39:17 UpdateTip: new best=0000000000000000002efc240da85b16fdcaa0ed5de19481797291fd153949db height=478060 version=0x20000012 log2_work=86.842459 tx=242626018 date='2017-07-29 $\r\n2018-01-24 00:39:17 UpdateTip: new best=00000000000000000077ec2249bd5635244183fbde7088f33c34e4e63934f51b height=478061 version=0x20000002 log2_work=86.842497 tx=242627176 date='2017-07-29 $\r\n2018-01-24 00:39:17 ERROR: ConnectBlock: CheckQueue failed\r\n2018-01-24 00:39:17 InvalidChainFound: invalid block=0000000000000000008987b70cb2bc48e9c670ff4b7d8cd17b64f68e21c14c63  height=478062  log2_work=86.842536  date=2017-07-29 04:05:25\r\n2018-01-24 00:39:17 InvalidChainFound:  current best=00000000000000000077ec2249bd5635244183fbde7088f33c34e4e63934f51b  height=478061  log2_work=86.842497  date=2017-07-29 03:55:33\r\n2018-01-24 00:39:17 ERROR: ConnectTip(): ConnectBlock 0000000000000000008987b70cb2bc48e9c670ff4b7d8cd17b64f68e21c14c63 failed\r\n2018-01-24 00:39:17 InvalidChainFound: invalid block=0000000000000000008987b70cb2bc48e9c670ff4b7d8cd17b64f68e21c14c63  height=478062  log2_work=86.842536  date=2017-07-29 04:05:25\r\n2018-01-24 00:39:17 InvalidChainFound:  current best=00000000000000000077ec2249bd5635244183fbde7088f33c34e4e63934f51b  height=478061  log2_work=86.842497  date=2017-07-29 03:55:33\r\n2018-01-24 00:40:12 socket recv error Connection reset by peer (104)\r\n2018-01-24 00:41:16 socket recv error Connection reset by peer (104)\r\n2018-01-24 00:42:05 version handshake timeout from 357\r\n\r\n<!--- How reliably can you reproduce the issue, what are the steps to do so? -->\r\nI have been able to reproduce this 4 times on fresh OS installs using the ppa 0.15.1. I then compiled the source for 0.15.99 to see if that would cause the problem. The machine is clean with just enough dependencies to compile and test the code without error. I have not tried downloading a 0.14.2 version as that was the released version for the blocks in question. I will do this tomorrow. There was similar problem with bitcoinx reported here at the same block height.\r\nhttps://www.reddit.com/r/BitcoinAirdrops/comments/7r4jmc/anyone_else_troubles_syncing_btx_bitcoinx_at/\r\n\r\n<!-- What version of Bitcoin Core are you using, where did you get it (website, self-compiled, etc)? -->\r\nVarious:\r\nppa 0.15.1\r\nSelf compiled 0.15.99.0-b5e4b9b\r\n\r\n<!-- What type of machine are you observing the error on (OS/CPU and disk type)? -->\r\nUbuntu 16.0.4 LTS (fully up to date fresh install)\r\n2009 MacPro w/ (x8) 2.2GHz Intel/ 64GB RAM and 3TB (apple hardware) J5 RAID with (4) Seagate 2TB hard drives (the swap space is 69GB but isn't used)\r\n\r\n<!-- Any extra information that might be useful in the debugging process. -->\r\n<!--- This is normally the contents of a `debug.log` or `config.log` file. Raw text or a link to a pastebin type site are preferred. -->\r\nSee above\r\n",
   "closed_at" : null,
   "closed_by" : null,
   "comments" : 9,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12256/comments",
   "created_at" : "2018-01-24T05:59:45Z",
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12256/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/issues/12256",
   "id" : 291093369,
   "labels" : [
      {
         "color" : "770000",
         "default" : false,
         "id" : 234878,
         "name" : "Linux/Unix",
         "node_id" : "MDU6TGFiZWwyMzQ4Nzg=",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/Linux/Unix"
      }
   ],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12256/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "node_id" : "MDU6SXNzdWUyOTEwOTMzNjk=",
   "number" : 12256,
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "open",
   "title" : "Initial sync hangs around block 477890",
   "updated_at" : "2018-02-04T18:20:19Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12256",
   "user" : {
      "avatar_url" : "https://avatars1.githubusercontent.com/u/9408922?v=4",
      "events_url" : "https://api.github.com/users/crabel99/events{/privacy}",
      "followers_url" : "https://api.github.com/users/crabel99/followers",
      "following_url" : "https://api.github.com/users/crabel99/following{/other_user}",
      "gists_url" : "https://api.github.com/users/crabel99/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/crabel99",
      "id" : 9408922,
      "login" : "crabel99",
      "node_id" : "MDQ6VXNlcjk0MDg5MjI=",
      "organizations_url" : "https://api.github.com/users/crabel99/orgs",
      "received_events_url" : "https://api.github.com/users/crabel99/received_events",
      "repos_url" : "https://api.github.com/users/crabel99/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/crabel99/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/crabel99/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/crabel99"
   }
}
