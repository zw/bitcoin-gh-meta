[
   {
      "body" : "Automatic sanity-testing: PASSED, see http://jenkins.bluematt.me/pull-tester/fbe2c07e79b69e5405616d7f67452499739f925c for binaries and test log.\nThis test script verifies pulls every time they are updated. It, however, dies sometimes and fails to test properly.  If you are waiting on a test, please check timestamps to verify that the test.log is moving at http://jenkins.bluematt.me/pull-tester/current/\nContact BlueMatt on freenode if something looks broken.",
      "created_at" : "2014-03-30T20:28:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3982#issuecomment-39038371",
      "id" : 39038371,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3982",
      "updated_at" : "2014-03-30T20:28:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/39038371",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2110907?v=3",
         "events_url" : "https://api.github.com/users/BitcoinPullTester/events{/privacy}",
         "followers_url" : "https://api.github.com/users/BitcoinPullTester/followers",
         "following_url" : "https://api.github.com/users/BitcoinPullTester/following{/other_user}",
         "gists_url" : "https://api.github.com/users/BitcoinPullTester/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/BitcoinPullTester",
         "id" : 2110907,
         "login" : "BitcoinPullTester",
         "organizations_url" : "https://api.github.com/users/BitcoinPullTester/orgs",
         "received_events_url" : "https://api.github.com/users/BitcoinPullTester/received_events",
         "repos_url" : "https://api.github.com/users/BitcoinPullTester/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/BitcoinPullTester/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/BitcoinPullTester/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/BitcoinPullTester"
      }
   },
   {
      "body" : "The method of extending \"version\" to enumerate new features is godawful.  Would love to just send key/value pairs at the end, or add a \"capabilities\" message and appropriate detection gadgetry for that new message, etc.",
      "created_at" : "2014-03-30T23:32:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3982#issuecomment-39044106",
      "id" : 39044106,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3982",
      "updated_at" : "2014-03-30T23:32:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/39044106",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/494411?v=3",
         "events_url" : "https://api.github.com/users/jgarzik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jgarzik/followers",
         "following_url" : "https://api.github.com/users/jgarzik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jgarzik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jgarzik",
         "id" : 494411,
         "login" : "jgarzik",
         "organizations_url" : "https://api.github.com/users/jgarzik/orgs",
         "received_events_url" : "https://api.github.com/users/jgarzik/received_events",
         "repos_url" : "https://api.github.com/users/jgarzik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jgarzik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jgarzik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jgarzik"
      }
   },
   {
      "body" : "Let's just all give up and use JSON communication!",
      "created_at" : "2014-03-31T00:59:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3982#issuecomment-39046383",
      "id" : 39046383,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3982",
      "updated_at" : "2014-03-31T00:59:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/39046383",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1073681?v=3",
         "events_url" : "https://api.github.com/users/bardiharborow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/bardiharborow/followers",
         "following_url" : "https://api.github.com/users/bardiharborow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/bardiharborow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/bardiharborow",
         "id" : 1073681,
         "login" : "bardiharborow",
         "organizations_url" : "https://api.github.com/users/bardiharborow/orgs",
         "received_events_url" : "https://api.github.com/users/bardiharborow/received_events",
         "repos_url" : "https://api.github.com/users/bardiharborow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/bardiharborow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/bardiharborow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/bardiharborow"
      }
   },
   {
      "body" : "Thank you Mr. Sarcasm.  We have already seen \"version\" screwups in the field.  The proposal has an engineering genesis.  And no, it would not be JSON.\r\n",
      "created_at" : "2014-03-31T01:02:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3982#issuecomment-39046454",
      "id" : 39046454,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3982",
      "updated_at" : "2014-03-31T01:02:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/39046454",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/494411?v=3",
         "events_url" : "https://api.github.com/users/jgarzik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jgarzik/followers",
         "following_url" : "https://api.github.com/users/jgarzik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jgarzik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jgarzik",
         "id" : 494411,
         "login" : "jgarzik",
         "organizations_url" : "https://api.github.com/users/jgarzik/orgs",
         "received_events_url" : "https://api.github.com/users/jgarzik/received_events",
         "repos_url" : "https://api.github.com/users/jgarzik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jgarzik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jgarzik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jgarzik"
      }
   },
   {
      "body" : "@jgarzik I do agree that the current method isn't the best, but nevertheless I think that it's important that so long as the code works the way it does, it treats the extension of the fields consistently.  Since this is what defines the protocol, it seems rather odd that three fields which were introduced with protocol version 106 are treated differently.\r\n\r\nI'm not sure if you were just talking in general, which I agree with, or specifically in relation to this pull request.  If it was unclear from my initial text, this pull request is not adding any new features.  It is simply modifying the existing message to treat the extension fields consistently.",
      "created_at" : "2014-03-31T01:46:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3982#issuecomment-39047746",
      "id" : 39047746,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3982",
      "updated_at" : "2014-03-31T01:49:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/39047746",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2115102?v=3",
         "events_url" : "https://api.github.com/users/davecgh/events{/privacy}",
         "followers_url" : "https://api.github.com/users/davecgh/followers",
         "following_url" : "https://api.github.com/users/davecgh/following{/other_user}",
         "gists_url" : "https://api.github.com/users/davecgh/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/davecgh",
         "id" : 2115102,
         "login" : "davecgh",
         "organizations_url" : "https://api.github.com/users/davecgh/orgs",
         "received_events_url" : "https://api.github.com/users/davecgh/received_events",
         "repos_url" : "https://api.github.com/users/davecgh/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/davecgh/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/davecgh/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/davecgh"
      }
   },
   {
      "body" : "Speaking generally",
      "created_at" : "2014-03-31T02:09:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3982#issuecomment-39048606",
      "id" : 39048606,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3982",
      "updated_at" : "2014-03-31T02:09:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/39048606",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/494411?v=3",
         "events_url" : "https://api.github.com/users/jgarzik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jgarzik/followers",
         "following_url" : "https://api.github.com/users/jgarzik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jgarzik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jgarzik",
         "id" : 494411,
         "login" : "jgarzik",
         "organizations_url" : "https://api.github.com/users/jgarzik/orgs",
         "received_events_url" : "https://api.github.com/users/jgarzik/received_events",
         "repos_url" : "https://api.github.com/users/jgarzik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jgarzik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jgarzik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jgarzik"
      }
   },
   {
      "body" : "It does look more consistent this way.\r\n\r\nHowever as sending `addrFrom` but not `nNonce` causes a parse error with all current clients, changing the 'protocol description' to be more permissive is deceptive.\r\n",
      "created_at" : "2014-03-31T02:31:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3982#issuecomment-39049412",
      "id" : 39049412,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3982",
      "updated_at" : "2014-03-31T02:31:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/39049412",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "@sipa @jgarzik @gavinandresen what are we going to do here? Does this change make sense?",
      "created_at" : "2014-05-12T14:48:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3982#issuecomment-42841072",
      "id" : 42841072,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3982",
      "updated_at" : "2014-05-12T14:48:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/42841072",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "I'm fine with improving the uniformity of how we deal with \"version\"'s\noptional fields. We shouldn't continue that practice though. I think new\nfeature should just be negotiated separately through their own initiation\nmessage (which will automatically be ignored by clients that don't\nunderstand it).",
      "created_at" : "2014-05-12T15:01:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3982#issuecomment-42842880",
      "id" : 42842880,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3982",
      "updated_at" : "2014-05-12T15:01:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/42842880",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Bringing the discussion back to the specific change at hand...  This change is IMO pointless.  \"weak NAK\" (ie. NAK/-1 but willing to be convinced otherwise)\r\n\r\nAll existing clients have a more strict definition, and there is no value in changing that so far down the stack of version information that is normally provided.  We want all clients to send other datums such as strSubVer, which would necessarily imply this change is never triggered.\r\n\r\nThis change satisfies programmer OCD while being incompatible (less strict) with all existing clients, if this behavior is elected to be used.\r\n",
      "created_at" : "2014-05-20T11:29:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3982#issuecomment-43613913",
      "id" : 43613913,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3982",
      "updated_at" : "2014-05-20T11:29:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/43613913",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/494411?v=3",
         "events_url" : "https://api.github.com/users/jgarzik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jgarzik/followers",
         "following_url" : "https://api.github.com/users/jgarzik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jgarzik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jgarzik",
         "id" : 494411,
         "login" : "jgarzik",
         "organizations_url" : "https://api.github.com/users/jgarzik/orgs",
         "received_events_url" : "https://api.github.com/users/jgarzik/received_events",
         "repos_url" : "https://api.github.com/users/jgarzik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jgarzik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jgarzik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jgarzik"
      }
   },
   {
      "body" : "As to the specific concerns about breaking existing clients, as @jgarzik notes, any client that implements anything greater than protocol version 106 (which is all of them) will necessarily require all of the fields.  Further, the client back in the protocol version 106 days will not break since it included all three fields as well thereby satisfying both the current inconsistent implementation and the proposed corrected one.\r\n\r\nHowever, I disagree on the point about it only being programmer driven OCD.  The problem is \"the code is the spec\".  As long as that is the case, I contend the code needs to accurately reflect the fact that the protocol version 106 introduced three fields, all of which are optional.  As the code is currently written, that is not the case.  It indicates that three fields were introduced, where two of the three are required if any are present, and the third is optional.  This is completely inconsistent with the rest of the \"spec\" which can easily lead to mistakes in other implementations or really anything that wants to speak the wire protocol.\r\n\r\nAll of that said, regardless of this particular pull request, I think everyone in the thread agrees that future changes should be negotiated through another mechanism.",
      "created_at" : "2014-05-20T14:54:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3982#issuecomment-43636701",
      "id" : 43636701,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3982",
      "updated_at" : "2014-05-20T14:54:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/43636701",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2115102?v=3",
         "events_url" : "https://api.github.com/users/davecgh/events{/privacy}",
         "followers_url" : "https://api.github.com/users/davecgh/followers",
         "following_url" : "https://api.github.com/users/davecgh/following{/other_user}",
         "gists_url" : "https://api.github.com/users/davecgh/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/davecgh",
         "id" : 2115102,
         "login" : "davecgh",
         "organizations_url" : "https://api.github.com/users/davecgh/orgs",
         "received_events_url" : "https://api.github.com/users/davecgh/received_events",
         "repos_url" : "https://api.github.com/users/davecgh/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/davecgh/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/davecgh/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/davecgh"
      }
   },
   {
      "body" : "The current code accurately reflects network behavior as it was implemented.\r\n\r\nThere are zero clients on the network who care that this is optional, as any such clients have been forked away by the checksum change.\r\n",
      "created_at" : "2014-05-20T15:01:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3982#issuecomment-43637733",
      "id" : 43637733,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3982",
      "updated_at" : "2014-05-20T15:01:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/43637733",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/494411?v=3",
         "events_url" : "https://api.github.com/users/jgarzik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jgarzik/followers",
         "following_url" : "https://api.github.com/users/jgarzik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jgarzik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jgarzik",
         "id" : 494411,
         "login" : "jgarzik",
         "organizations_url" : "https://api.github.com/users/jgarzik/orgs",
         "received_events_url" : "https://api.github.com/users/jgarzik/received_events",
         "repos_url" : "https://api.github.com/users/jgarzik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jgarzik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jgarzik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jgarzik"
      }
   },
   {
      "body" : "Ok, consensus seems to be that this is unnecessary.\r\n\r\nAt some point when the minimum version is raised, we make all these fields required. For future protocol changes a different extension scheme should be used instead of 'add optional fields to the end of the buffer'.",
      "created_at" : "2014-05-28T14:07:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3982#issuecomment-44410725",
      "id" : 44410725,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3982",
      "updated_at" : "2014-05-28T14:07:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/44410725",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   }
]
