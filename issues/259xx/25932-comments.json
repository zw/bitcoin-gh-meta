[
   {
      "author_association" : "NONE",
      "body" : "Concept ACK, Approach ACK",
      "created_at" : "2022-08-27T01:22:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25932#issuecomment-1229088887",
      "id" : 1229088887,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25932",
      "node_id" : "IC_kwDOABII585JQmh3",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1229088887/reactions"
      },
      "updated_at" : "2022-08-27T01:22:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1229088887",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8263430?v=4",
         "events_url" : "https://api.github.com/users/AryanJ-NYC/events{/privacy}",
         "followers_url" : "https://api.github.com/users/AryanJ-NYC/followers",
         "following_url" : "https://api.github.com/users/AryanJ-NYC/following{/other_user}",
         "gists_url" : "https://api.github.com/users/AryanJ-NYC/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/AryanJ-NYC",
         "id" : 8263430,
         "login" : "AryanJ-NYC",
         "node_id" : "MDQ6VXNlcjgyNjM0MzA=",
         "organizations_url" : "https://api.github.com/users/AryanJ-NYC/orgs",
         "received_events_url" : "https://api.github.com/users/AryanJ-NYC/received_events",
         "repos_url" : "https://api.github.com/users/AryanJ-NYC/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/AryanJ-NYC/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/AryanJ-NYC/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/AryanJ-NYC"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nNo conflicts as of last run.",
      "created_at" : "2022-09-13T15:43:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25932#issuecomment-1245598163",
      "id" : 1245598163,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25932",
      "node_id" : "IC_kwDOABII585KPlHT",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1245598163/reactions"
      },
      "updated_at" : "2022-09-14T23:48:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1245598163",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25932#discussion_r972373694"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25932"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/972373694"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "ACK 1a2d94ac586e2ecb55994205fceec14322a949fd\r\n\r\nSince the feerate is loop invariant, that boolean will always evaluate the same across one coin selection attempt, and it would be even better to just pull it out of the loop:\r\n\r\n```suggestion\r\n    [before loop]\r\n    bool is_high_feerate = utxo_pool.at(0).fee > utxo_pool.at(0).long_term_fee;\r\n    [â¦]\r\n            (is_high_feerate && curr_waste > best_waste)) { // Don't select things which we know will be more wasteful if the waste is increasing\r\n```",
      "commit_id" : "8ada8bb313eb95d55e9e1ac121bc6143a569e896",
      "created_at" : "2022-09-15T20:01:15Z",
      "diff_hunk" : "@@ -93,7 +93,7 @@ std::optional<SelectionResult> SelectCoinsBnB(std::vector<OutputGroup>& utxo_poo\n         bool backtrack = false;\n         if (curr_value + curr_available_value < selection_target || // Cannot possibly reach target with the amount remaining in the curr_available_value.\n             curr_value > selection_target + cost_of_change || // Selected value is out of range, go back and try other branch\n-            (curr_waste > best_waste && (utxo_pool.at(0).fee - utxo_pool.at(0).long_term_fee) > 0)) { // Don't select things which we know will be more wasteful if the waste is increasing\n+            (curr_waste > best_waste && (utxo_pool.at(0).fee > utxo_pool.at(0).long_term_fee))) { // Don't select things which we know will be more wasteful if the waste is increasing",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25932#discussion_r972373694",
      "id" : 972373694,
      "line" : null,
      "node_id" : "PRRC_kwDOABII58459T6-",
      "original_commit_id" : "1a2d94ac586e2ecb55994205fceec14322a949fd",
      "original_line" : 96,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/wallet/coinselection.cpp",
      "position" : null,
      "pull_request_review_id" : 1109768232,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25932",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/972373694/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-09-15T20:01:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/972373694",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4060799?v=4",
         "events_url" : "https://api.github.com/users/Xekyo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Xekyo/followers",
         "following_url" : "https://api.github.com/users/Xekyo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Xekyo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Xekyo",
         "id" : 4060799,
         "login" : "Xekyo",
         "node_id" : "MDQ6VXNlcjQwNjA3OTk=",
         "organizations_url" : "https://api.github.com/users/Xekyo/orgs",
         "received_events_url" : "https://api.github.com/users/Xekyo/received_events",
         "repos_url" : "https://api.github.com/users/Xekyo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Xekyo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Xekyo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Xekyo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25932#discussion_r972861519"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25932"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/972861519"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I considered this as well.  To my surprise moving the comparison outside of the loop didn't make any benchmark difference.  My guess is the compiler must be smart enough to do some optimization, or the benchmark tests aren't sensitive enough to detect a change.\r\n\r\nThat bieng said, I do think it's more readable outside of the for loop (and doesn't need to be compared every iteration).  @Xekyo does this look better https://github.com/bitcoin/bitcoin/pull/25932/commits/8ada8bb313eb95d55e9e1ac121bc6143a569e896?",
      "commit_id" : "8ada8bb313eb95d55e9e1ac121bc6143a569e896",
      "created_at" : "2022-09-16T10:02:44Z",
      "diff_hunk" : "@@ -93,7 +93,7 @@ std::optional<SelectionResult> SelectCoinsBnB(std::vector<OutputGroup>& utxo_poo\n         bool backtrack = false;\n         if (curr_value + curr_available_value < selection_target || // Cannot possibly reach target with the amount remaining in the curr_available_value.\n             curr_value > selection_target + cost_of_change || // Selected value is out of range, go back and try other branch\n-            (curr_waste > best_waste && (utxo_pool.at(0).fee - utxo_pool.at(0).long_term_fee) > 0)) { // Don't select things which we know will be more wasteful if the waste is increasing\n+            (curr_waste > best_waste && (utxo_pool.at(0).fee > utxo_pool.at(0).long_term_fee))) { // Don't select things which we know will be more wasteful if the waste is increasing",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25932#discussion_r972861519",
      "id" : 972861519,
      "in_reply_to_id" : 972373694,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5845_LBP",
      "original_commit_id" : "1a2d94ac586e2ecb55994205fceec14322a949fd",
      "original_line" : 96,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/wallet/coinselection.cpp",
      "position" : null,
      "pull_request_review_id" : 1110445321,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25932",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/972861519/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-09-16T10:36:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/972861519",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/817736?v=4",
         "events_url" : "https://api.github.com/users/yancyribbens/events{/privacy}",
         "followers_url" : "https://api.github.com/users/yancyribbens/followers",
         "following_url" : "https://api.github.com/users/yancyribbens/following{/other_user}",
         "gists_url" : "https://api.github.com/users/yancyribbens/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/yancyribbens",
         "id" : 817736,
         "login" : "yancyribbens",
         "node_id" : "MDQ6VXNlcjgxNzczNg==",
         "organizations_url" : "https://api.github.com/users/yancyribbens/orgs",
         "received_events_url" : "https://api.github.com/users/yancyribbens/received_events",
         "repos_url" : "https://api.github.com/users/yancyribbens/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/yancyribbens/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/yancyribbens/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/yancyribbens"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25932#discussion_r972969826"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25932"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/972969826"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Maybe this is better as two separate commits.  https://github.com/bitcoin/bitcoin/pull/25932/commits/365aca40453995163bbd17231251512f9f9a103b and https://github.com/bitcoin/bitcoin/pull/25932/commits/953ce061d5e8392d9f4c5bcedd27a2eeb08296db",
      "commit_id" : "953ce061d5e8392d9f4c5bcedd27a2eeb08296db",
      "created_at" : "2022-09-16T12:26:58Z",
      "diff_hunk" : "@@ -93,7 +93,7 @@ std::optional<SelectionResult> SelectCoinsBnB(std::vector<OutputGroup>& utxo_poo\n         bool backtrack = false;\n         if (curr_value + curr_available_value < selection_target || // Cannot possibly reach target with the amount remaining in the curr_available_value.\n             curr_value > selection_target + cost_of_change || // Selected value is out of range, go back and try other branch\n-            (curr_waste > best_waste && (utxo_pool.at(0).fee - utxo_pool.at(0).long_term_fee) > 0)) { // Don't select things which we know will be more wasteful if the waste is increasing\n+            (curr_waste > best_waste && (utxo_pool.at(0).fee > utxo_pool.at(0).long_term_fee))) { // Don't select things which we know will be more wasteful if the waste is increasing",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25932#discussion_r972969826",
      "id" : 972969826,
      "in_reply_to_id" : 972373694,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5845_ldi",
      "original_commit_id" : "1a2d94ac586e2ecb55994205fceec14322a949fd",
      "original_line" : 96,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/wallet/coinselection.cpp",
      "position" : null,
      "pull_request_review_id" : 1110603908,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25932",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/972969826/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-09-16T12:26:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/972969826",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/817736?v=4",
         "events_url" : "https://api.github.com/users/yancyribbens/events{/privacy}",
         "followers_url" : "https://api.github.com/users/yancyribbens/followers",
         "following_url" : "https://api.github.com/users/yancyribbens/following{/other_user}",
         "gists_url" : "https://api.github.com/users/yancyribbens/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/yancyribbens",
         "id" : 817736,
         "login" : "yancyribbens",
         "node_id" : "MDQ6VXNlcjgxNzczNg==",
         "organizations_url" : "https://api.github.com/users/yancyribbens/orgs",
         "received_events_url" : "https://api.github.com/users/yancyribbens/received_events",
         "repos_url" : "https://api.github.com/users/yancyribbens/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/yancyribbens/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/yancyribbens/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/yancyribbens"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25932#discussion_r973098386"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25932"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/973098386"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "This is not a good description of what the algorithm does. BnB deterministically searches the combination tree of the UTXO pool and retains the input set with the _minimal waste score_ among the input sets it traverses. It doesn't guarantee to find the minimal waste score, and it doesn't guarantee to minimize the input set at high feerates. The result may end up being the minimal input set at high fees but might not be. E.g. if the feerate were 10.001 sat/vB and the LTFRE 10 sat/vB, the waste score could prefer a signficantly larger input set that results in a smaller excess over a smaller one with large excess, even while this bool classify the coin selection situation as `is_feerate_expensive = True`.\r\n\r\nMeanwhile at low feerates BnB does not guarantee to maximimize the input setâit also keeps the input set with lowest waste score. Since the depth-first search starts with the most valuable UTXOs, input sets with a smaller count are traversed before ones with larger count are visited. Even then, the UTXO types may cause a smaller count to be preferred because the total weight of older output types could be bigger than a smaller count of modern outputs. Depending on the UTXO pool size, it may very well not find the maximal input set within the 100,000 tries:\r\nit doesn't take many UTXOs for the 100,000 tries to get exhausted before all relevant combinations are visited. Depending on the variance of the present values some 400+ UTXOs can suffice already, but wallets may have thousands or even tens of thousands of UTXOs.\r\n\r\nIf you insist on adding a comment perhaps use something along the lines of:\r\n```suggestion\r\n    // Check if the current feerate is higher than the long-term feerate estimate. \r\n    // Since BnB prefers the input set with the lowest waste score, this results in a preference \r\n    // for smaller input sets at high feerates and bigger input sets at lower feerates.\r\n```\r\nYou might want to consider adding this to the comment on the function though, as that point is not well-covered there.",
      "commit_id" : "f4994fe4a63c92cf232a5a7a41e01a49c421542d",
      "created_at" : "2022-09-16T14:40:01Z",
      "diff_hunk" : "@@ -87,13 +87,18 @@ std::optional<SelectionResult> SelectCoinsBnB(std::vector<OutputGroup>& utxo_poo\n     std::vector<size_t> best_selection;\n     CAmount best_waste = MAX_MONEY;\n \n+    // Check if the current feerate is expensive.  If it is expensive, we minimize the size of\n+    // the result set and thus minimizing the transaction fee.  If the fees are not expensive,\n+    // we maximize the result set to reduce the amount of UTXOs (fragmentation).",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25932#discussion_r973098386",
      "id" : 973098386,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5846AE2S",
      "original_commit_id" : "953ce061d5e8392d9f4c5bcedd27a2eeb08296db",
      "original_line" : 92,
      "original_position" : 6,
      "original_start_line" : 90,
      "path" : "src/wallet/coinselection.cpp",
      "position" : null,
      "pull_request_review_id" : 1110796799,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25932",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/973098386/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "updated_at" : "2022-09-16T16:18:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/973098386",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4060799?v=4",
         "events_url" : "https://api.github.com/users/Xekyo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Xekyo/followers",
         "following_url" : "https://api.github.com/users/Xekyo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Xekyo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Xekyo",
         "id" : 4060799,
         "login" : "Xekyo",
         "node_id" : "MDQ6VXNlcjQwNjA3OTk=",
         "organizations_url" : "https://api.github.com/users/Xekyo/orgs",
         "received_events_url" : "https://api.github.com/users/Xekyo/received_events",
         "repos_url" : "https://api.github.com/users/Xekyo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Xekyo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Xekyo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Xekyo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25932#discussion_r973125473"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25932"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/973125473"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I don't think \"expensive\" is the best term to refer to a feerate. Creating a transaction at a high feerate is expensive, but the feerate itself doesn't cost anything. Perhaps:\r\n```suggestion\r\n    bool is_feerate_high = utxo_pool.at(0).fee > utxo_pool.at(0).long_term_fee;\r\n```",
      "commit_id" : "f4994fe4a63c92cf232a5a7a41e01a49c421542d",
      "created_at" : "2022-09-16T15:03:43Z",
      "diff_hunk" : "@@ -87,13 +87,18 @@ std::optional<SelectionResult> SelectCoinsBnB(std::vector<OutputGroup>& utxo_poo\n     std::vector<size_t> best_selection;\n     CAmount best_waste = MAX_MONEY;\n \n+    // Check if the current feerate is expensive.  If it is expensive, we minimize the size of\n+    // the result set and thus minimizing the transaction fee.  If the fees are not expensive,\n+    // we maximize the result set to reduce the amount of UTXOs (fragmentation).\n+    bool is_feerate_expensive = utxo_pool.at(0).fee > utxo_pool.at(0).long_term_fee;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25932#discussion_r973125473",
      "id" : 973125473,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5846ALdh",
      "original_commit_id" : "953ce061d5e8392d9f4c5bcedd27a2eeb08296db",
      "original_line" : 93,
      "original_position" : 7,
      "original_start_line" : null,
      "path" : "src/wallet/coinselection.cpp",
      "position" : null,
      "pull_request_review_id" : 1110796799,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25932",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/973125473/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-09-16T16:18:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/973125473",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4060799?v=4",
         "events_url" : "https://api.github.com/users/Xekyo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Xekyo/followers",
         "following_url" : "https://api.github.com/users/Xekyo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Xekyo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Xekyo",
         "id" : 4060799,
         "login" : "Xekyo",
         "node_id" : "MDQ6VXNlcjQwNjA3OTk=",
         "organizations_url" : "https://api.github.com/users/Xekyo/orgs",
         "received_events_url" : "https://api.github.com/users/Xekyo/received_events",
         "repos_url" : "https://api.github.com/users/Xekyo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Xekyo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Xekyo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Xekyo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25932#discussion_r973555174"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25932"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/973555174"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "My comment was misleading it looks like.  It's true that a true maximum or true min may not be found before the iteration limit.  Also, I appreciate you pointing out that how many or how few UTXO's are targeted can depend on how much the longterm and short term fees differ.  Perhaps we can just do without a comment here since the statement is self explanatory.  I agree that further comment on how the selection process works is better to place on the function.",
      "commit_id" : "f4994fe4a63c92cf232a5a7a41e01a49c421542d",
      "created_at" : "2022-09-17T07:48:04Z",
      "diff_hunk" : "@@ -87,13 +87,18 @@ std::optional<SelectionResult> SelectCoinsBnB(std::vector<OutputGroup>& utxo_poo\n     std::vector<size_t> best_selection;\n     CAmount best_waste = MAX_MONEY;\n \n+    // Check if the current feerate is expensive.  If it is expensive, we minimize the size of\n+    // the result set and thus minimizing the transaction fee.  If the fees are not expensive,\n+    // we maximize the result set to reduce the amount of UTXOs (fragmentation).",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25932#discussion_r973555174",
      "id" : 973555174,
      "in_reply_to_id" : 973098386,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5846B0Xm",
      "original_commit_id" : "953ce061d5e8392d9f4c5bcedd27a2eeb08296db",
      "original_line" : 92,
      "original_position" : 6,
      "original_start_line" : 90,
      "path" : "src/wallet/coinselection.cpp",
      "position" : null,
      "pull_request_review_id" : 1111413074,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25932",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/973555174/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "updated_at" : "2022-09-17T07:48:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/973555174",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/817736?v=4",
         "events_url" : "https://api.github.com/users/yancyribbens/events{/privacy}",
         "followers_url" : "https://api.github.com/users/yancyribbens/followers",
         "following_url" : "https://api.github.com/users/yancyribbens/following{/other_user}",
         "gists_url" : "https://api.github.com/users/yancyribbens/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/yancyribbens",
         "id" : 817736,
         "login" : "yancyribbens",
         "node_id" : "MDQ6VXNlcjgxNzczNg==",
         "organizations_url" : "https://api.github.com/users/yancyribbens/orgs",
         "received_events_url" : "https://api.github.com/users/yancyribbens/received_events",
         "repos_url" : "https://api.github.com/users/yancyribbens/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/yancyribbens/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/yancyribbens/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/yancyribbens"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25932#discussion_r973555855"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25932"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/973555855"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "My thought process was simply that we are checking if the current fee rate is expensive compared to the longterm fee rate.  The reason I like expensive is it's a monetary term and \"high\" can pertain to many things.  Since you feel strongly about using \"high\" I'll change it to your suggestion.\r\n\r\n",
      "commit_id" : "f4994fe4a63c92cf232a5a7a41e01a49c421542d",
      "created_at" : "2022-09-17T07:55:01Z",
      "diff_hunk" : "@@ -87,13 +87,18 @@ std::optional<SelectionResult> SelectCoinsBnB(std::vector<OutputGroup>& utxo_poo\n     std::vector<size_t> best_selection;\n     CAmount best_waste = MAX_MONEY;\n \n+    // Check if the current feerate is expensive.  If it is expensive, we minimize the size of\n+    // the result set and thus minimizing the transaction fee.  If the fees are not expensive,\n+    // we maximize the result set to reduce the amount of UTXOs (fragmentation).\n+    bool is_feerate_expensive = utxo_pool.at(0).fee > utxo_pool.at(0).long_term_fee;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25932#discussion_r973555855",
      "id" : 973555855,
      "in_reply_to_id" : 973125473,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5846B0iP",
      "original_commit_id" : "953ce061d5e8392d9f4c5bcedd27a2eeb08296db",
      "original_line" : 93,
      "original_position" : 7,
      "original_start_line" : null,
      "path" : "src/wallet/coinselection.cpp",
      "position" : null,
      "pull_request_review_id" : 1111413598,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25932",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/973555855/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-09-17T07:55:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/973555855",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/817736?v=4",
         "events_url" : "https://api.github.com/users/yancyribbens/events{/privacy}",
         "followers_url" : "https://api.github.com/users/yancyribbens/followers",
         "following_url" : "https://api.github.com/users/yancyribbens/following{/other_user}",
         "gists_url" : "https://api.github.com/users/yancyribbens/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/yancyribbens",
         "id" : 817736,
         "login" : "yancyribbens",
         "node_id" : "MDQ6VXNlcjgxNzczNg==",
         "organizations_url" : "https://api.github.com/users/yancyribbens/orgs",
         "received_events_url" : "https://api.github.com/users/yancyribbens/received_events",
         "repos_url" : "https://api.github.com/users/yancyribbens/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/yancyribbens/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/yancyribbens/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/yancyribbens"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@Xekyo does this look better? https://github.com/bitcoin/bitcoin/pull/25932/commits/81d4a2b14ff65fe07085ef2a967a466015370ce3",
      "created_at" : "2022-09-17T07:59:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25932#issuecomment-1250024467",
      "id" : 1250024467,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25932",
      "node_id" : "IC_kwDOABII585KgdwT",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1250024467/reactions"
      },
      "updated_at" : "2022-09-17T08:03:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1250024467",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/817736?v=4",
         "events_url" : "https://api.github.com/users/yancyribbens/events{/privacy}",
         "followers_url" : "https://api.github.com/users/yancyribbens/followers",
         "following_url" : "https://api.github.com/users/yancyribbens/following{/other_user}",
         "gists_url" : "https://api.github.com/users/yancyribbens/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/yancyribbens",
         "id" : 817736,
         "login" : "yancyribbens",
         "node_id" : "MDQ6VXNlcjgxNzczNg==",
         "organizations_url" : "https://api.github.com/users/yancyribbens/orgs",
         "received_events_url" : "https://api.github.com/users/yancyribbens/received_events",
         "repos_url" : "https://api.github.com/users/yancyribbens/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/yancyribbens/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/yancyribbens/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/yancyribbens"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25932#discussion_r975721059"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25932"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/975721059"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "A non-representative survey among my colleagues resulted in three out of three (including one native English speaker with a finance background) agreeing with me: a transaction is expensive when its feerate is high.\r\n\r\nI therefore maintain that feerates are âhighâ or âlowâ, not âexpensiveâ or âcheapâ.",
      "commit_id" : "81d4a2b14ff65fe07085ef2a967a466015370ce3",
      "created_at" : "2022-09-20T19:06:46Z",
      "diff_hunk" : "@@ -87,13 +87,18 @@ std::optional<SelectionResult> SelectCoinsBnB(std::vector<OutputGroup>& utxo_poo\n     std::vector<size_t> best_selection;\n     CAmount best_waste = MAX_MONEY;\n \n+    // Check if the current feerate is expensive.  If it is expensive, we minimize the size of\n+    // the result set and thus minimizing the transaction fee.  If the fees are not expensive,\n+    // we maximize the result set to reduce the amount of UTXOs (fragmentation).\n+    bool is_feerate_expensive = utxo_pool.at(0).fee > utxo_pool.at(0).long_term_fee;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25932#discussion_r975721059",
      "id" : 975721059,
      "in_reply_to_id" : 973125473,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5846KFJj",
      "original_commit_id" : "953ce061d5e8392d9f4c5bcedd27a2eeb08296db",
      "original_line" : 93,
      "original_position" : 7,
      "original_start_line" : null,
      "path" : "src/wallet/coinselection.cpp",
      "position" : null,
      "pull_request_review_id" : 1114341174,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25932",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/975721059/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-09-20T19:06:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/975721059",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4060799?v=4",
         "events_url" : "https://api.github.com/users/Xekyo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Xekyo/followers",
         "following_url" : "https://api.github.com/users/Xekyo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Xekyo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Xekyo",
         "id" : 4060799,
         "login" : "Xekyo",
         "node_id" : "MDQ6VXNlcjQwNjA3OTk=",
         "organizations_url" : "https://api.github.com/users/Xekyo/orgs",
         "received_events_url" : "https://api.github.com/users/Xekyo/received_events",
         "repos_url" : "https://api.github.com/users/Xekyo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Xekyo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Xekyo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Xekyo"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "ACK 81d4a2b14ff65fe07085ef2a967a466015370ce3",
      "created_at" : "2022-09-20T19:08:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25932#issuecomment-1252792490",
      "id" : 1252792490,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25932",
      "node_id" : "IC_kwDOABII585KrBiq",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1252792490/reactions"
      },
      "updated_at" : "2022-09-20T19:08:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1252792490",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4060799?v=4",
         "events_url" : "https://api.github.com/users/Xekyo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Xekyo/followers",
         "following_url" : "https://api.github.com/users/Xekyo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Xekyo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Xekyo",
         "id" : 4060799,
         "login" : "Xekyo",
         "node_id" : "MDQ6VXNlcjQwNjA3OTk=",
         "organizations_url" : "https://api.github.com/users/Xekyo/orgs",
         "received_events_url" : "https://api.github.com/users/Xekyo/received_events",
         "repos_url" : "https://api.github.com/users/Xekyo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Xekyo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Xekyo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Xekyo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25932#discussion_r976035333"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25932"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/976035333"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "It occurred to me that in the study of computation, expensive is sometimes used to describe a computation that takes a lot of resource, therefore it's not purely a finical term.  Also, since we are terming the transaction as expensive, it does make sense to term the feerate as high.",
      "commit_id" : "81d4a2b14ff65fe07085ef2a967a466015370ce3",
      "created_at" : "2022-09-21T04:59:13Z",
      "diff_hunk" : "@@ -87,13 +87,18 @@ std::optional<SelectionResult> SelectCoinsBnB(std::vector<OutputGroup>& utxo_poo\n     std::vector<size_t> best_selection;\n     CAmount best_waste = MAX_MONEY;\n \n+    // Check if the current feerate is expensive.  If it is expensive, we minimize the size of\n+    // the result set and thus minimizing the transaction fee.  If the fees are not expensive,\n+    // we maximize the result set to reduce the amount of UTXOs (fragmentation).\n+    bool is_feerate_expensive = utxo_pool.at(0).fee > utxo_pool.at(0).long_term_fee;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25932#discussion_r976035333",
      "id" : 976035333,
      "in_reply_to_id" : 973125473,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5846LR4F",
      "original_commit_id" : "953ce061d5e8392d9f4c5bcedd27a2eeb08296db",
      "original_line" : 93,
      "original_position" : 7,
      "original_start_line" : null,
      "path" : "src/wallet/coinselection.cpp",
      "position" : null,
      "pull_request_review_id" : 1114757636,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25932",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/976035333/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-09-21T04:59:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/976035333",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/817736?v=4",
         "events_url" : "https://api.github.com/users/yancyribbens/events{/privacy}",
         "followers_url" : "https://api.github.com/users/yancyribbens/followers",
         "following_url" : "https://api.github.com/users/yancyribbens/following{/other_user}",
         "gists_url" : "https://api.github.com/users/yancyribbens/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/yancyribbens",
         "id" : 817736,
         "login" : "yancyribbens",
         "node_id" : "MDQ6VXNlcjgxNzczNg==",
         "organizations_url" : "https://api.github.com/users/yancyribbens/orgs",
         "received_events_url" : "https://api.github.com/users/yancyribbens/received_events",
         "repos_url" : "https://api.github.com/users/yancyribbens/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/yancyribbens/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/yancyribbens/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/yancyribbens"
      }
   }
]
