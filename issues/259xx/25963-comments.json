[
   {
      "author_association" : "MEMBER",
      "body" : "The Clang tidy CI passed, so opening this up for review.",
      "created_at" : "2022-08-31T11:31:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25963#issuecomment-1232815605",
      "id" : 1232815605,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25963",
      "node_id" : "IC_kwDOABII585Je0X1",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1232815605/reactions"
      },
      "updated_at" : "2022-08-31T11:31:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1232815605",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "The change on line 52 makes sense, but the one on 316 seems like a step backwards?",
      "created_at" : "2022-08-31T11:47:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25963#issuecomment-1232831065",
      "id" : 1232831065,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25963",
      "node_id" : "IC_kwDOABII585Je4JZ",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1232831065/reactions"
      },
      "updated_at" : "2022-08-31T11:47:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1232831065",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> The change on line 52 makes sense, but the one on 316 seems like a step backwards?\r\n\r\nHm, RVO wouldn't be affected by the move of an argument (rather than of the object itself)?\r\n\r\nRepushed without that change to see if the tidy job remains appeased. ",
      "created_at" : "2022-08-31T12:04:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25963#issuecomment-1232847140",
      "id" : 1232847140,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25963",
      "node_id" : "IC_kwDOABII585Je8Ek",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1232847140/reactions"
      },
      "updated_at" : "2022-08-31T12:04:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1232847140",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Hm, RVO wouldn't be affected by the move of an argument (rather than of the object itself)?\r\n\r\nI don't see how RVO could apply here. It's an argument to a constructor. The fact that that constructor is invoked in a return statement doesn't matter.",
      "created_at" : "2022-08-31T12:09:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25963#issuecomment-1232852027",
      "id" : 1232852027,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25963",
      "node_id" : "IC_kwDOABII585Je9Q7",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1232852027/reactions"
      },
      "updated_at" : "2022-08-31T12:09:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1232852027",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "```\r\nsrc/headerssync.cpp:316:26: error: passing result of std::move() as a const reference argument; no move will actually happen [performance-move-const-arg,-warnings-as-errors]\r\n    return CBlockLocator{std::move(locator)};\r\n                         ^~~~~~~~~~       ~\r\n```\r\n",
      "created_at" : "2022-08-31T12:27:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25963#issuecomment-1232871099",
      "id" : 1232871099,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25963",
      "node_id" : "IC_kwDOABII585JfB67",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1232871099/reactions"
      },
      "updated_at" : "2022-08-31T12:27:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1232871099",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@jonatack Oh! The issue is just that `CBlockLocator` has no constructor that accepts an rvalue `uint256`. The `std::move` there has no effect, but the correct solution is adding an rvalue-accepting constructor, not getting rid of the `std::move`.",
      "created_at" : "2022-08-31T12:45:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25963#issuecomment-1232890688",
      "id" : 1232890688,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25963",
      "node_id" : "IC_kwDOABII585JfGtA",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1232890688/reactions"
      },
      "updated_at" : "2022-08-31T12:47:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1232890688",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> @jonatack Oh! The issue is just that `CBlockLocator` has no constructor that accepts an rvalue `uint256`. The `std::move` there has no effect, but the correct solution is adding an rvalue-accepting constructor, not getting rid of the `std::move`.\r\n\r\nAh interesting! Learning.",
      "created_at" : "2022-08-31T12:53:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25963#issuecomment-1232899363",
      "id" : 1232899363,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25963",
      "node_id" : "IC_kwDOABII585JfI0j",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1232899363/reactions"
      },
      "updated_at" : "2022-08-31T12:53:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1232899363",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "ACK af7a40c1830c16cb0005a4fb121f631e01be9f80\r\n(the previous push with the two changes)\r\n\r\nBoth warnings are legit because no move will happen in either case.\r\n\r\nBut consider this, like @sipa suggested above, would avoid copying:\r\n\r\n<details>\r\n<summary>diff</summary>\r\n\r\n```diff\r\ndiff --git i/src/chain.cpp w/src/chain.cpp\r\nindex 19c35b5012..66a0830394 100644\r\n--- i/src/chain.cpp\r\n+++ w/src/chain.cpp\r\n@@ -46,13 +46,13 @@ std::vector<uint256> LocatorEntries(const CBlockIndex* index)\r\n     }\r\n     return have;\r\n }\r\n\r\n CBlockLocator GetLocator(const CBlockIndex* index)\r\n {\r\n-    return CBlockLocator{std::move(LocatorEntries(index))};\r\n+    return CBlockLocator{LocatorEntries(index)};\r\n }\r\n\r\n CBlockLocator CChain::GetLocator() const\r\n {\r\n     return ::GetLocator(Tip());\r\n }\r\ndiff --git i/src/primitives/block.h w/src/primitives/block.h\r\nindex 76aba6c899..8c51d280b8 100644\r\n--- i/src/primitives/block.h\r\n+++ w/src/primitives/block.h\r\n@@ -120,13 +120,13 @@ public:\r\n struct CBlockLocator\r\n {\r\n     std::vector<uint256> vHave;\r\n\r\n     CBlockLocator() {}\r\n\r\n-    explicit CBlockLocator(const std::vector<uint256>& vHaveIn) : vHave(vHaveIn) {}\r\n+    explicit CBlockLocator(std::vector<uint256>&& vHaveIn) : vHave(std::move(vHaveIn)) {}\r\n\r\n     SERIALIZE_METHODS(CBlockLocator, obj)\r\n     {\r\n         int nVersion = s.GetVersion();\r\n         if (!(s.GetType() & SER_GETHASH))\r\n             READWRITE(nVersion);\r\n```\r\n</details>\r\n",
      "created_at" : "2022-08-31T12:54:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25963#issuecomment-1232901221",
      "id" : 1232901221,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25963",
      "node_id" : "IC_kwDOABII585JfJRl",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1232901221/reactions"
      },
      "updated_at" : "2022-08-31T12:54:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1232901221",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Using `&&` would *force* all call sites to use `std::move`. Thus, it makes it impossible to use on `const&`.\r\n\r\nYou can simply change the constructor to allow anything:\r\n\r\n```\r\nexplicit CBlockLocator(std::vector<uint256> have) : vHave{std::move(have)} {}",
      "created_at" : "2022-08-31T12:58:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25963#issuecomment-1232905329",
      "id" : 1232905329,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25963",
      "node_id" : "IC_kwDOABII585JfKRx",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1232905329/reactions"
      },
      "updated_at" : "2022-08-31T12:58:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1232905329",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@MarcoFalke I think all call sites already pass in rvalues. And an rvalue argument is still more efficient than a by-value one, as it avoids constructing the temporary vector entirely (not just avoiding allocating its storage buffer).",
      "created_at" : "2022-08-31T13:05:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25963#issuecomment-1232912392",
      "id" : 1232912392,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25963",
      "node_id" : "IC_kwDOABII585JfMAI",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1232912392/reactions"
      },
      "updated_at" : "2022-08-31T13:05:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1232912392",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> an rvalue argument is still more efficient than a by-value one\r\n\r\nCorrect. Personally, I think it is fine to have an overhead equivalent to constructing an empty vector. When there is a new call-site with a const reference in the future, the constructor will need to be changed anyway. Either a single one that accepts a pure value, or a new one that accepts a `const&` (alongside the `&&` constructor), which is what the stdlib is usually doing.\r\n\r\nBut anything should be fine here.\r\n\r\nreview ACK 6b24dfe24d2ed50ea0b06ce1919db3dc0e871a03",
      "created_at" : "2022-08-31T13:13:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25963#issuecomment-1232922429",
      "id" : 1232922429,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25963",
      "node_id" : "IC_kwDOABII585JfOc9",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1232922429/reactions"
      },
      "updated_at" : "2022-08-31T13:16:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1232922429",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "With a by-value argument there is construct+move+move, with an rval argument, there is construct+move:\r\n\r\n<details>\r\n<summary>rv.cc</summary>\r\n\r\n```cpp\r\n#include <iostream>\r\n\r\n/* The rule of five. */\r\nclass R5\r\n{\r\npublic:\r\n    R5(int x, double y)\r\n    {\r\n        x_ = x;\r\n        y_ = y;\r\n        std::cout << \"R5::R5() this=\" << this << \" x=\" << x_ << \", y=\" << y_ << std::endl;\r\n    }\r\n\r\n    ~R5()\r\n    {\r\n        std::cout << \"R5::~R5() this=\" << this << \" x=\" << x_ << \", y=\" << y_ << std::endl;\r\n    }\r\n\r\n    R5(const R5& other)\r\n    {\r\n        std::cout << \"R5::R5(const R5&) this=\" << this << \" other=\" << &other << \" x=\" << other.x_\r\n                  << \", y=\" << other.y_ << std::endl;\r\n        x_ = other.x_;\r\n        y_ = other.y_;\r\n    }\r\n\r\n    R5(R5&& other)\r\n    {\r\n        std::cout << \"R5::R5(R5&&) this=\" << this << \" other=\" << &other << \" x=\" << other.x_\r\n                  << \", y=\" << other.y_ << std::endl;\r\n        x_ = other.x_;\r\n        y_ = other.y_;\r\n        other.x_ = 0;\r\n        other.y_ = 0;\r\n    }\r\n\r\n    R5& operator=(const R5& other)\r\n    {\r\n        std::cout << \"R5::operator=(const R5&) this=\" << this << \" x=\" << x_ << \", y=\" << y_\r\n                  << \" other=\" << &other << \" x=\" << other.x_ << \", y=\" << other.y_ << std::endl;\r\n        x_ = other.x_;\r\n        y_ = other.y_;\r\n        return *this;\r\n    }\r\n\r\n    R5& operator=(R5&& other)\r\n    {\r\n        std::cout << \"R5::operator=(R5&&) this=\" << this << \" x=\" << x_ << \", y=\" << y_\r\n                  << \" other=\" << &other << \" x=\" << other.x_ << \", y=\" << other.y_ << std::endl;\r\n        x_ = other.x_;\r\n        y_ = other.y_;\r\n        other.x_ = 0;\r\n        other.y_ = 0;\r\n        return *this;\r\n    }\r\n\r\n    std::ostream& operator<<(std::ostream& os) { return os << \"(x=\" << x_ << \", y=\" << y_ << \")\"; }\r\n\r\n    int x_;\r\n    double y_;\r\n};\r\n\r\nclass CBlockLocator\r\n{\r\npublic:\r\n#if 0\r\n    explicit CBlockLocator(R5 r5) : m_r5{std::move(r5)} {}\r\n#else\r\n    explicit CBlockLocator(R5&& r5) : m_r5{std::move(r5)} {}\r\n#endif\r\n\r\n    R5 m_r5;\r\n};\r\n\r\nCBlockLocator f3()\r\n{\r\n    R5 r5{2, 3.4};\r\n    return CBlockLocator{std::move(r5)};\r\n}\r\n\r\nint main(int, char**)\r\n{\r\n    f3();\r\n    return 0;\r\n}\r\n```\r\n\r\n</details>\r\n\r\noutput with `R5 r5` arg:\r\n\r\n```\r\nR5::R5() this=0x7fffffffe5e8 x=2, y=3.4\r\nR5::R5(R5&&) this=0x7fffffffe5d8 other=0x7fffffffe5e8 x=2, y=3.4\r\nR5::R5(R5&&) this=0x7fffffffe610 other=0x7fffffffe5d8 x=2, y=3.4\r\nR5::~R5() this=0x7fffffffe5d8 x=0, y=0\r\nR5::~R5() this=0x7fffffffe5e8 x=0, y=0\r\nR5::~R5() this=0x7fffffffe610 x=2, y=3.4\r\n```\r\n\r\noutput with `R5&& r5` arg:\r\n\r\n```\r\nR5::R5() this=0x7fffffffe5e8 x=2, y=3.4\r\nR5::R5(R5&&) this=0x7fffffffe610 other=0x7fffffffe5e8 x=2, y=3.4\r\nR5::~R5() this=0x7fffffffe5e8 x=0, y=0\r\nR5::~R5() this=0x7fffffffe610 x=2, y=3.4\r\n```\r\n",
      "created_at" : "2022-08-31T13:28:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25963#issuecomment-1232939426",
      "id" : 1232939426,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25963",
      "node_id" : "IC_kwDOABII585JfSmi",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1232939426/reactions"
      },
      "updated_at" : "2022-08-31T13:28:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1232939426",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Correct. Personally, I think it is fine to have an overhead equivalent to constructing an empty vector. When there is a new call-site with a const reference in the future, the constructor will need to be changed anyway. Either a single one that accepts a pure value, or a new one that accepts a const& (alongside the && constructor), which is what the stdlib is usually doing.\r\n\r\nYes, to be clear: none of the changes in this PR are relevant for performance. `CBlockLocator`s are constructed sufficiently rarely that shaving off (maybe) a microsecond here and there isn't going to be measurable. But if we're already talking about changing the code anyway, it's good to follow best practices. ",
      "created_at" : "2022-08-31T13:46:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25963#issuecomment-1232961859",
      "id" : 1232961859,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25963",
      "node_id" : "IC_kwDOABII585JfYFD",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1232961859/reactions"
      },
      "updated_at" : "2022-08-31T13:46:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1232961859",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   }
]
