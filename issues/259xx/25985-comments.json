[
   {
      "author_association" : "MEMBER",
      "body" : "It would be nice if we could figure out why macOS SQLite is different from self built so that we can replicate those performance improvements in our depends build.",
      "created_at" : "2022-09-02T16:31:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25985#issuecomment-1235699568",
      "id" : 1235699568,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25985",
      "node_id" : "IC_kwDOABII585Jp0dw",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1235699568/reactions"
      },
      "updated_at" : "2022-09-02T16:31:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1235699568",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK\r\n\r\nThe Homebrew [docs](https://docs.brew.sh/How-to-Build-Software-Outside-Homebrew-with-Homebrew-keg-only-Dependencies#what-does-keg-only-mean) recommend to \"not remove macOS native tools and forcefully replace them with symlinks back to the Homebrew-provided tool.\"\r\n\r\nBut I couldn't find anything on whether MacOS's version of SQLite is different to the brew version of SQLite (assuming the same version numbers). That difference in performance is surely not entirely explained by different version numbers being used.",
      "created_at" : "2022-09-02T17:03:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25985#issuecomment-1235726102",
      "id" : 1235726102,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25985",
      "node_id" : "IC_kwDOABII585Jp68W",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1235726102/reactions"
      },
      "updated_at" : "2022-09-02T17:03:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1235726102",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/16323900?v=4",
         "events_url" : "https://api.github.com/users/michaelfolkson/events{/privacy}",
         "followers_url" : "https://api.github.com/users/michaelfolkson/followers",
         "following_url" : "https://api.github.com/users/michaelfolkson/following{/other_user}",
         "gists_url" : "https://api.github.com/users/michaelfolkson/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/michaelfolkson",
         "id" : 16323900,
         "login" : "michaelfolkson",
         "node_id" : "MDQ6VXNlcjE2MzIzOTAw",
         "organizations_url" : "https://api.github.com/users/michaelfolkson/orgs",
         "received_events_url" : "https://api.github.com/users/michaelfolkson/received_events",
         "repos_url" : "https://api.github.com/users/michaelfolkson/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/michaelfolkson/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/michaelfolkson/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/michaelfolkson"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK\r\n\r\nit's not correct to say there was \"no rationale\", it's in the pr description: \r\n> On master (https://github.com/bitcoin/bitcoin/commit/7ae86b3c6845873ca96650fc69beb4ae5285c801) installed Homebrew sqlite package is ignored during build on macOS.\r\n> This PR fixes this issue and update macOS build docs.\r\n\r\nBut we now know we'd prefer not to use the brew version.",
      "created_at" : "2022-09-02T20:08:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25985#issuecomment-1235859207",
      "id" : 1235859207,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25985",
      "node_id" : "IC_kwDOABII585JqbcH",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1235859207/reactions"
      },
      "updated_at" : "2022-09-02T20:08:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1235859207",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/23396902?v=4",
         "events_url" : "https://api.github.com/users/jarolrod/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jarolrod/followers",
         "following_url" : "https://api.github.com/users/jarolrod/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jarolrod/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jarolrod",
         "id" : 23396902,
         "login" : "jarolrod",
         "node_id" : "MDQ6VXNlcjIzMzk2OTAy",
         "organizations_url" : "https://api.github.com/users/jarolrod/orgs",
         "received_events_url" : "https://api.github.com/users/jarolrod/received_events",
         "repos_url" : "https://api.github.com/users/jarolrod/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jarolrod/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jarolrod/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jarolrod"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> It would be nice if we could figure out why macOS SQLite is different from self built so that we can replicate those performance improvements in our depends build.\r\n\r\nI agree. Started having a look through https://github.com/apple-oss-distributions to see if there might be any clues.\r\n\r\n> it's not correct to say there was \"no rationale\", it's in the pr description:\r\n\r\nThe description just says we should prefer brew installed sqlite if it happens to be installed. There's no reasoning given as to why we should prefer that instead of just using the system library (i.e it's faster, has newer features we require, system libs are severely outdated/buggy) etc.\r\n",
      "created_at" : "2022-09-02T20:24:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25985#issuecomment-1235869475",
      "id" : 1235869475,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25985",
      "node_id" : "IC_kwDOABII585Jqd8j",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1235869475/reactions"
      },
      "updated_at" : "2022-09-02T20:24:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1235869475",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "What is the sqlite version on macOS 10.15?",
      "created_at" : "2022-09-03T07:05:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25985#issuecomment-1236063775",
      "id" : 1236063775,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25985",
      "node_id" : "IC_kwDOABII585JrNYf",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1236063775/reactions"
      },
      "updated_at" : "2022-09-03T07:05:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1236063775",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Tested d216d714aae36e6f1c95f82aef81a0be74dee2f3\r\n\r\nOn the first machine the system library is twice as fast, on the second machine there's no difference (or it's even slightly slower). I checked in the log that right Sqlite version was indeed used.\r\n\r\nI agree with @hebasto that we should check if this holds for older (supported) macOS versions. Perhaps a safer approach is to pick whichever version is higher.\r\n\r\nMachine 1 MacBook Pro (2.3 GHz 8-Core Intel Core i9), macOS 12.5.1\r\n * with Sqlite 3.39.2 via homebrew: 3.8s\r\n * system Sqlite 3.37.0: 2.0s\r\n \r\nMachine 2: iMac (3.4 GHz Quad-Core Intel Core i5): macOS 12.5.1\r\n * with Sqlite 3.39.2 via homebrew: 0.5s\r\n * system Sqlite 3.37.0: 0.6s\r\n\r\n\r\nNote that machine 2 is _much_ slower than machine 1, yet sqlite performs faster. There's something else going on, possibly specific to my setup. I got even more extreme results with the `migratewallet` RPC. ",
      "created_at" : "2022-09-05T11:31:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25985#issuecomment-1236878280",
      "id" : 1236878280,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25985",
      "node_id" : "IC_kwDOABII585JuUPI",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1236878280/reactions"
      },
      "updated_at" : "2022-09-05T11:31:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1236878280",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Perhaps a safer approach is to pick whichever version is higher.\n\nNACK. More often than not, that would just result in the situation where we get worse performance. We aren't using features from newer versions, and Apple already backports bug and security fixes to the system libs.",
      "created_at" : "2022-09-05T14:43:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25985#issuecomment-1237148610",
      "id" : 1237148610,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25985",
      "node_id" : "IC_kwDOABII585JvWPC",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1237148610/reactions"
      },
      "updated_at" : "2022-09-05T14:43:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1237148610",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> What is the sqlite version on macOS 10.15?\r\n\r\nLooks like it is 3.28.0+.",
      "created_at" : "2022-09-08T15:27:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25985#issuecomment-1240875102",
      "id" : 1240875102,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25985",
      "node_id" : "IC_kwDOABII585J9kBe",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1240875102/reactions"
      },
      "updated_at" : "2022-09-08T15:27:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1240875102",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "So this is preferring the macOS/native sqlite over the Homebrew sqlite, right?\r\n(I assume we already prefer depends-built if it's been made available.)\r\n\r\nCan the user still explicitly override it and build with Homebrew's if they so choose? (`--with-sqlite=/some/path`?)",
      "created_at" : "2022-09-10T04:13:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25985#issuecomment-1242620938",
      "id" : 1242620938,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25985",
      "node_id" : "IC_kwDOABII585KEOQK",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1242620938/reactions"
      },
      "updated_at" : "2022-09-10T04:13:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1242620938",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> So this is preferring the macOS/native sqlite over the Homebrew sqlite, right?\r\n\r\nYes. See also #25724.\r\n\r\n> (I assume we already prefer depends-built if it's been made available.)\r\n\r\nIf by \"made available\", you mean a `CONFIG_SITE`/`--prefix` was passed to configure, then yes.\r\n\r\n> Can the user still explicitly override it and build with Homebrew's if they so choose? \r\n\r\nYes. The user can ultimately still choose whichever sqlite they prefer. i.e set `LDFLAGS` & `CPPFLAGS` to point to brews sqlite, and that will be used.",
      "created_at" : "2022-09-10T10:32:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25985#issuecomment-1242698475",
      "id" : 1242698475,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25985",
      "node_id" : "IC_kwDOABII585KEhLr",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1242698475/reactions"
      },
      "updated_at" : "2022-09-10T10:32:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1242698475",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Not sure if this issue applies to arm64 (intel only) or if I'm testing incorrectly. Installed sqlite3 from homebrew and I'm not seeing a difference between master and this branch on a MacBook Pro 16 (M1 Max), macOS 12.3. In both cases the example takes 5 seconds. Tested back and forth a few times.\r\n\r\n```\r\n$  clang -v\r\nApple clang version 13.1.6 (clang-1316.0.21.2.5)\r\nTarget: arm64-apple-darwin21.4.0\r\nThread model: posix\r\nInstalledDir: /Library/Developer/CommandLineTools/usr/bin\r\n\r\n$ ./configure --with-incompatible-bdb --enable-suppress-external-warnings CC=clang CXX=clang++\r\n\r\n$ ./src/bitcoin-cli -rpcwallet=speedy importdescriptors   0.00s user 0.00s system 0% cpu 5.293 total\r\n\r\n$ sqlite3 --version\r\n3.37.0 2021-12-09 01:34:53 9ff244ce0739f8ee52a3e9671adb4ee54c83c640b02e3f9d185fd2f9a179aapl\r\n```\r\n",
      "created_at" : "2022-09-10T11:32:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25985#issuecomment-1242710261",
      "id" : 1242710261,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25985",
      "node_id" : "IC_kwDOABII585KEkD1",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1242710261/reactions"
      },
      "updated_at" : "2022-09-10T11:32:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1242710261",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Ah, the system sqlite3 3.37 was being used in either case. Needed to restart the terminal to pick up the link (`echo 'export PATH=\"/opt/homebrew/opt/sqlite/bin:$PATH\"' >> ~/.zshrc`) to sqlite3 `3.39.3 2022-09-05`, after which both master and this branch run the example rpc after configure + make in around half a second (macOS Monterey 12.3).",
      "created_at" : "2022-09-10T11:34:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25985#issuecomment-1242710694",
      "id" : 1242710694,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25985",
      "node_id" : "IC_kwDOABII585KEkKm",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1242710694/reactions"
      },
      "updated_at" : "2022-09-12T17:02:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1242710694",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Just tried (the latest master) with macOS 10.15 Catalina, freshly installed on a 2015 Macbook Pro, Intel i5 dual core:\r\n\r\n* with Sqlite 3.39.3 via homebrew: 1.6s\r\n* system Sqlite 3.28.0: 1.6s\r\n\r\n(caveat: I only synced a fraction of mainnet and then paused it, so the rescan part is a bit faster: 1ms on the 2015 machine vs 423ms on the 2019 machine)",
      "created_at" : "2022-09-12T16:23:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25985#issuecomment-1243982513",
      "id" : 1243982513,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25985",
      "node_id" : "IC_kwDOABII585KJaqx",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1243982513/reactions"
      },
      "updated_at" : "2022-09-12T16:23:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1243982513",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I'm not sure what to make of the benchmarking / results being posted here. I think in some cases not quite the right thing is being tested, or results are being mixed up. However the general case still seems to be that the brew libs are either the same speed, or much slower than the system libs.\r\n\r\nI haven't seen an argument for always prefering the brew libs, and in that case you're just rolling the dice for much worse performance, and ending up with #25724.\r\n\r\nNote that the benchmarking can also be performed without using `brew` at all. You can just compare a build with system libs, vs a depends build, as [sqlite as compiled via brew](https://github.com/Homebrew/homebrew-core/blob/b2381b8146258ea40e08b634fd693defdd957748/Formula/sqlite.rb#L32), is going to be ~the same as the lib you get when compiling in depends.\r\n\r\nLooking at the macOS sqlite system lib, it's pretty clear that it contains code that isn't in the open source sqlite. There are a number of additional symbols, including `__sqlite3_apple_archive, __sqlite3_apple_archive_type, __sqlite3_apple_unarchive, __sqlite3_purgeEligiblePagerCacheMemory` etc. As well as `_sqlite3_key, _sqlite3_key_v2`, which indicate the presence of non-free sqlite extensions, such as [The SQLite Encryption Extension](https://sqlite.org/com/see.html).",
      "created_at" : "2022-09-13T10:00:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25985#issuecomment-1245181352",
      "id" : 1245181352,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25985",
      "node_id" : "IC_kwDOABII585KN_Wo",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1245181352/reactions"
      },
      "updated_at" : "2022-09-13T13:29:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1245181352",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> However the general case still seems to be that the brew libs are either the same speed, or much slower than the system libs.\r\n\r\nThat's what I was testing.\r\n\r\nConcept ACK\r\n\r\nThe presence of a Homebrew version doesn't mean the user intended it for Bitcoin. Relying on ~closed source~ non free Apple stuff that's sometimes faster, but in (so far) unpredictable ways, doesn't seem very appealing either.\r\n\r\nBut the fact that the non-homebrew version _sometimes_ is dramatically faster, is probably a good enough reason to prefer it.",
      "created_at" : "2022-09-13T13:26:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25985#issuecomment-1245413314",
      "id" : 1245413314,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25985",
      "node_id" : "IC_kwDOABII585KO3_C",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1245413314/reactions"
      },
      "updated_at" : "2022-09-13T13:27:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1245413314",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "This seems to fix my performance issues on my m1 mac when running tests against bitcoind.\r\n\r\nThis is on the official v23 release (36 seconds)\r\n\r\n<img width=\"1107\" alt=\"Screen Shot 2022-09-13 at 3 50 02 PM\" src=\"https://user-images.githubusercontent.com/3514957/190006656-e6f8bf5e-8d02-495b-9b45-dcc1e450da72.png\">\r\n\r\nThis is on d216d714aae36e6f1c95f82aef81a0be74dee2f3 (!5 seconds!)\r\n\r\n<img width=\"1107\" alt=\"Screen Shot 2022-09-13 at 3 49 52 PM\" src=\"https://user-images.githubusercontent.com/3514957/190006709-0b866e70-780b-4fac-852c-0e612c47f8a6.png\">\r\n\r\nSo this is a dramatic performance improvement for our test harness!\r\n\r\nIn case anyone wants stack exchange reputation, consider answering this question: https://bitcoin.stackexchange.com/questions/113898/bitcoin-v23-is-10-times-slower-than-v22-on-macos-for-basic-regtest-tests",
      "created_at" : "2022-09-13T20:52:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25985#issuecomment-1245942400",
      "id" : 1245942400,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25985",
      "node_id" : "IC_kwDOABII585KQ5KA",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1245942400/reactions"
      },
      "updated_at" : "2022-09-13T20:57:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1245942400",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3514957?v=4",
         "events_url" : "https://api.github.com/users/Christewart/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Christewart/followers",
         "following_url" : "https://api.github.com/users/Christewart/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Christewart/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Christewart",
         "id" : 3514957,
         "login" : "Christewart",
         "node_id" : "MDQ6VXNlcjM1MTQ5NTc=",
         "organizations_url" : "https://api.github.com/users/Christewart/orgs",
         "received_events_url" : "https://api.github.com/users/Christewart/received_events",
         "repos_url" : "https://api.github.com/users/Christewart/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Christewart/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Christewart/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Christewart"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> This seems to fix my performance issues on my m1 mac when running tests against bitcoind.\r\n\r\nThanks for confirming this fixes the performance issues you've been seeing. While the release binaries still wont be \"fixed\", if/when this is merged, the situation for compiling locally / development should be much improved.\r\n\r\n> In case anyone wants stack exchange reputation, consider answering this question: https://bitcoin.stackexchange.com/questions/113898/bitcoin-v23-is-10-times-slower-than-v22-on-macos-for-basic-regtest-tests\r\n\r\n>> I'm mostly interested in running integration tests for a project and it looks like I cannot upgrade to the new version yet without solving this.\r\n\r\nGood to know that they were using x86_64, so we can further rule out an x86_64 vs arm64 (M1) difference. The fact that developers are landing on the solution of \"not upgrading\", is another reason to fix this.",
      "created_at" : "2022-09-14T09:59:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25985#issuecomment-1246527321",
      "id" : 1246527321,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25985",
      "node_id" : "IC_kwDOABII585KTH9Z",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1246527321/reactions"
      },
      "updated_at" : "2022-09-14T09:59:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1246527321",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "ACK d216d714aae36e6f1c95f82aef81a0be74dee2f3\r\n\r\nI also observe a significant performance improvement with this.",
      "created_at" : "2022-09-15T21:24:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25985#issuecomment-1248646985",
      "id" : 1248646985,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25985",
      "node_id" : "IC_kwDOABII585KbNdJ",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1248646985/reactions"
      },
      "updated_at" : "2022-09-15T21:24:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1248646985",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> This reverts [ee7b84e](https://github.com/bitcoin/bitcoin/commit/ee7b84e63cbeadd5e680d69ff0548275581e9241) from #20527.\r\n> That change was made without any rationale\r\n\r\nThat is untrue. Besides #20527 description. one could refer #20498. Build docs implied that Bitcoin Core uses Homebrew's `sqlite` package. And #20527 made it explicit.\r\n\r\nI'd say the opposite: this reversion is unjustified.\r\n\r\n1. Relying on Apple's `sqlite` package undermines Bitcoin Core security.\r\n\r\n> when building from source on macOS, it just results in drastically worse performance\r\n\r\n2. Then such performance issue should be fixed in Homebrew's `sqlite` package.\r\n\r\n> The user can ultimately still choose whichever sqlite they prefer. i.e set `LDFLAGS` & `CPPFLAGS` to point to brews sqlite, and that will be used.\r\n\r\n3. If users want to use Apple's `sqlite`, they can use the same approach. No code change is required at all.\r\n\r\nNACK from me.",
      "created_at" : "2022-09-16T07:38:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25985#issuecomment-1249026927",
      "id" : 1249026927,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25985",
      "node_id" : "IC_kwDOABII585KcqNv",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1249026927/reactions"
      },
      "updated_at" : "2022-09-16T07:38:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1249026927",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Besides https://github.com/bitcoin/bitcoin/pull/20527 description. one could refer https://github.com/bitcoin/bitcoin/issues/20498.\r\n\r\nThere is nothing in either of these threads that gives reasoning for why a brew installed sqlite should be preferred. #20498 just seems to be figuring out if macOS comes with a sqlite system library.\r\n\r\n> Relying on Apple's sqlite package undermines Bitcoin Core security.\r\n\r\nHow so? This isn't being used in the release binaries. It's for developers/users self-compiling on macos. Self compilation / developer envinronments already come with lessened security assumptions, because your dependencies are coming from third party package managers, the OS, etc.\r\n\r\n> Then such performance issue should be fixed in Homebrew's sqlite package.\r\n\r\nWhat you mean? Homebrew just [compiles the unmodified sqlite source](https://github.com/Homebrew/homebrew-core/blob/master/Formula/sqlite.rb), there is nothing to \"fix\" there. Fixing this likely requires upstreaming changes to sqlite. If we actually had those changes, we could also be applying them in depends (and fixing this for releases).\r\n\r\n> If users want to use Apple's sqlite, they can use the same approach. No code change is required at all.\r\n\r\nSo you suggest we leave this as-is, and just continually tell downstream projects / confused devs that to get reasonable performance in their developer environments, they have to compile differently, and avoid homebrews sqlite, even though our build system is setup to prefer it by default?\r\n\r\nHere's another instance of a project, this time BDK, running into this same problem: https://github.com/bitcoindevkit/bdk/issues/749.",
      "created_at" : "2022-09-16T08:09:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25985#issuecomment-1249055016",
      "id" : 1249055016,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25985",
      "node_id" : "IC_kwDOABII585KcxEo",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1249055016/reactions"
      },
      "updated_at" : "2022-09-16T08:09:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1249055016",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> > Relying on Apple's sqlite package undermines Bitcoin Core security.\r\n> \r\n> How so?\r\n\r\nLike that:\r\n\r\n> Looking at the macOS sqlite system lib, it's pretty clear that it contains code that isn't in the open source sqlite.\r\n\r\n---\r\n\r\n> > If users want to use Apple's sqlite, they can use the same approach. No code change is required at all.\r\n> \r\n> So you suggest we leave this as-is, and just continually tell downstream projects / confused devs that to get reasonable performance in their developer environments, they have to compile differently, and avoid homebrews sqlite, even though our build system is setup to prefer it by default?\r\n\r\nOur defaults must prioritize security, not performance.\r\n\r\nTo avoid confusing, using of an Apple's library can be provided as an example in our docs.\r\n\r\n",
      "created_at" : "2022-09-16T08:20:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25985#issuecomment-1249065366",
      "id" : 1249065366,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25985",
      "node_id" : "IC_kwDOABII585KczmW",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1249065366/reactions"
      },
      "updated_at" : "2022-09-16T08:20:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1249065366",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Like that:\r\n\r\nCan you clarify what you mean by security? I don't quite understand why we must avoid the system sqlite lib at all costs, while at the same time we are going to happily load any other number of apple shared libs (which are complete black boxes) at runtime (also true for release binaries).\r\n\r\n> Our defaults must prioritize security, not performance.\r\n> To avoid confusing, using of an Apple's library can be provided as an example in our docs.\r\n\r\nIn our release binaries, I agree. However, self-compilation on macOS, is almost always going to be a developer environment, which as I mentioned above, already comes with lessened security assumptions.\r\n\r\nIn this case, from a security perspective, why is using Apples sqlite dylib, any worse than using homebrews? In both cases, you're using a precompiled library, provided by a third party. Are homebrews prebuilt libs even deterministic/reproducible? (I know you can tell brew to build from source, but 99.9% of users installing sqlite from brew are not doing that)?",
      "created_at" : "2022-09-16T08:38:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25985#issuecomment-1249087215",
      "id" : 1249087215,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25985",
      "node_id" : "IC_kwDOABII585Kc47v",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1249087215/reactions"
      },
      "updated_at" : "2022-09-16T08:38:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1249087215",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Can you clarify what you mean by security?\r\n\r\nInvulnerability. As much as possible.\r\n\r\nFor instance, did someone test that Apple's system library won't crash Bitcoin Core in corner cases?\r\n\r\nEvery macOS update can potentially lead to any unpredictable consequences.\r\n\r\n> I don't quite understand why we must avoid the system sqlite lib at all costs, while at the same time we are going to happily load any other number of apple shared libs (which are complete black boxes) at runtime (also true for release binaries).\r\n\r\nDo we have open-source alternatives for other Apple's library?\r\n\r\nMy question is similar: why we must use Apple's modified version of an open-source library?\r\n\r\n> However, self-compilation on macOS, is almost always going to be a developer environment\r\n\r\nCorrect. That is why just to document usage of a system library is enough.\r\n\r\n> In this case, from a security perspective, why is using Apples sqlite dylib, any worse than using homebrews? In both cases, you're using a precompiled library, provided by a third party. Are homebrews prebuilt libs even deterministic/reproducible? (I know you can tell brew to build from source, but 99.9% of users installing sqlite from brew are not doing that)?\r\n\r\nApple even doesn't provide such an opportunity.\r\n\r\n\r\n\r\n\r\n",
      "created_at" : "2022-09-16T08:58:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25985#issuecomment-1249107848",
      "id" : 1249107848,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25985",
      "node_id" : "IC_kwDOABII585Kc9-I",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1249107848/reactions"
      },
      "updated_at" : "2022-09-16T08:59:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1249107848",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : ">Self compilation / developer envinronments already come with lessened security assumptions, because your dependencies are coming from third party package managers, the OS, etc.\r\n\r\nSelf-compilation is the ideal / best practice for security. There is no reason to assume these are developer environments, and strong NACK on doing anything that would compromise self-compilation as the recommended ideal for end users / production usage.\r\n\r\nThe OS is always inherently trusted. Static linking is a reduction in security as a tradeoff. (But because the OS is always trusted, using the OS sqlite by default does make sense.)\r\n\r\n>So you suggest we leave this as-is, and just continually tell downstream projects / confused devs that to get reasonable performance in their developer environments,\r\n\r\nThe real question here is, why is upstream sqlite performance such a problem?\r\n\r\nSure, maybe Apple has an optimised version, but stock sqlite _should_ perform well enough, right?",
      "created_at" : "2022-09-16T20:29:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25985#issuecomment-1249784030",
      "id" : 1249784030,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25985",
      "node_id" : "IC_kwDOABII585KfjDe",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1249784030/reactions"
      },
      "updated_at" : "2022-09-16T20:29:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1249784030",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Sure, maybe Apple has an optimised version, but stock sqlite should perform well enough, right?\r\n\r\nIt *should*, but it *doesn't*, as measured using the example in the OP. There's a 10x performance speedup from just switching from homebrew/depends/self-compiled sqlite to system sqlite, at least on x86 Macs.",
      "created_at" : "2022-09-16T23:18:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25985#issuecomment-1249930740",
      "id" : 1249930740,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25985",
      "node_id" : "IC_kwDOABII585KgG30",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1249930740/reactions"
      },
      "updated_at" : "2022-09-16T23:19:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1249930740",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Is ~3.4s really so bad for importing a bunch of descriptors?",
      "created_at" : "2022-09-16T23:49:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25985#issuecomment-1249940984",
      "id" : 1249940984,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25985",
      "node_id" : "IC_kwDOABII585KgJX4",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1249940984/reactions"
      },
      "updated_at" : "2022-09-16T23:49:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1249940984",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Is ~3.4s really so bad for importing a bunch of descriptors?\r\n\r\nWell it gets worse as more are imported at the same time. The original example was larger and took 30 seconds vs 3 seconds. The problem is also that downstream software which imports many descriptors may run into RPC client timeouts (although arguably that's a problem with their RPC client). Also this performance issue effects other things too, although they are less directly measurable.",
      "created_at" : "2022-09-17T00:38:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25985#issuecomment-1249960979",
      "id" : 1249960979,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25985",
      "node_id" : "IC_kwDOABII585KgOQT",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1249960979/reactions"
      },
      "updated_at" : "2022-09-17T00:39:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1249960979",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Possibly related: https://bonsaidb.io/blog/acid-on-apple/",
      "created_at" : "2022-09-17T16:55:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25985#issuecomment-1250104991",
      "id" : 1250104991,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25985",
      "node_id" : "IC_kwDOABII585Kgxaf",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1250104991/reactions"
      },
      "updated_at" : "2022-09-17T16:55:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1250104991",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Possibly related: https://bonsaidb.io/blog/acid-on-apple/\r\n\r\nAha! I think this describes the problem exactly. Disabling `fullfsync` gets us the performance of using system sqlite. The question is whether it is safe for us to do that.",
      "created_at" : "2022-09-17T18:02:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25985#issuecomment-1250115720",
      "id" : 1250115720,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25985",
      "node_id" : "IC_kwDOABII585Kg0CI",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1250115720/reactions"
      },
      "updated_at" : "2022-09-17T18:02:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1250115720",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Aha! I think this describes the problem exactly. Disabling fullfsync gets us the performance of using system sqlite. The question is whether it is safe for us to do that.\r\n\r\nIt's quite possible that Apple is making assumptions about sqlite & the OS, that allows it to make these modifications / other improvements, that we likely cannot. In any case, we should still want this change, (assuming we could come up with a safe patchset for depends (for 25.0)), otherwise by picking brews sqlite, we would then still be choosing the worst of 3 available options, for performance, and continuing to cause confusion / issues downstream.",
      "created_at" : "2022-09-17T18:36:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25985#issuecomment-1250121010",
      "id" : 1250121010,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25985",
      "node_id" : "IC_kwDOABII585Kg1Uy",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1250121010/reactions"
      },
      "updated_at" : "2022-09-17T18:36:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1250121010",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nNo conflicts as of last run.",
      "created_at" : "2022-09-23T04:19:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25985#issuecomment-1255784872",
      "id" : 1255784872,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25985",
      "node_id" : "IC_kwDOABII585K2cGo",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1255784872/reactions"
      },
      "updated_at" : "2022-09-24T23:26:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1255784872",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> NACK from me.\r\n\r\nAfter having an offline discussion with @fanquake, I agree with his points.\r\n\r\nConcept ACK.\r\n\r\nOur [docs](https://github.com/bitcoin/bitcoin/blob/master/doc/build-osx.md#descriptor-wallet-support) say:\r\n> `sqlite` is required to support for descriptor wallets.\r\n>\r\n> macOS ships with a useable `sqlite` package, meaning you don't need to install anything.\r\n\r\nBut Homebrew can install its `sqlite` package as an other package's dependency, and next time during configuring another `sqlite` library will be used with no user's intention. And this PR prevents such cases.",
      "created_at" : "2022-09-23T08:55:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25985#issuecomment-1255957106",
      "id" : 1255957106,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25985",
      "node_id" : "IC_kwDOABII585K3GJy",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1255957106/reactions"
      },
      "updated_at" : "2022-09-23T08:58:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1255957106",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> There is no reason to assume these are developer environments\r\n\r\nI agree with this point. Although most users won't self compile, I would not assume that most people who self compile are (experienced) developers.\r\n\r\n> I don't quite understand why we must avoid the system sqlite lib at all costs, while at the same time we are going to happily load any other number of apple shared libs (which are complete black boxes) at runtime (also true for release binaries).\r\n\r\nI also agree with this. If (a rogue) Apple (employee) wanted to steal coins, there are probably more obscure corners of their black box library to put the backdoor in than SQlite.\r\n\r\n> Is ~3.4s really so bad for importing a bunch of descriptors?\r\n\r\nIt's actually worse that this, migrating a legacy wallet to descriptors takes more than ten minutes for me and leaves the wallet in an incorrect state. That said, this PR actually doesn't fix that problem for me, but it might for others.\r\n\r\nI do hope we can fix the real problem soon(tm), it seems @achow101 is optimistic.",
      "created_at" : "2022-09-23T09:11:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25985#issuecomment-1255971784",
      "id" : 1255971784,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25985",
      "node_id" : "IC_kwDOABII585K3JvI",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1255971784/reactions"
      },
      "updated_at" : "2022-09-23T09:12:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1255971784",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "I encountered the issue when working with BDK.\r\nThis fixed the issue for me. Previously it took ~1 minute to complete, now it takes ~3 seconds.\r\n\r\nOS: Mac OS Monterey 12.6\r\nProcessor: Intel Core i5\r\nSQLite Version 3.37.0",
      "created_at" : "2022-10-14T17:49:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25985#issuecomment-1279296348",
      "id" : 1279296348,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25985",
      "node_id" : "IC_kwDOABII585MQINc",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1279296348/reactions"
      },
      "updated_at" : "2022-10-14T18:03:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1279296348",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/21229375?v=4",
         "events_url" : "https://api.github.com/users/jbesraa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jbesraa/followers",
         "following_url" : "https://api.github.com/users/jbesraa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jbesraa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jbesraa",
         "id" : 21229375,
         "login" : "jbesraa",
         "node_id" : "MDQ6VXNlcjIxMjI5Mzc1",
         "organizations_url" : "https://api.github.com/users/jbesraa/orgs",
         "received_events_url" : "https://api.github.com/users/jbesraa/received_events",
         "repos_url" : "https://api.github.com/users/jbesraa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jbesraa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jbesraa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jbesraa"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Would be nice if this is back ported on the effected version ",
      "created_at" : "2022-10-17T15:19:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25985#issuecomment-1281039679",
      "id" : 1281039679,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25985",
      "node_id" : "IC_kwDOABII585MWx0_",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1281039679/reactions"
      },
      "updated_at" : "2022-10-17T15:19:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1281039679",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/15256660?v=4",
         "events_url" : "https://api.github.com/users/benthecarman/events{/privacy}",
         "followers_url" : "https://api.github.com/users/benthecarman/followers",
         "following_url" : "https://api.github.com/users/benthecarman/following{/other_user}",
         "gists_url" : "https://api.github.com/users/benthecarman/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/benthecarman",
         "id" : 15256660,
         "login" : "benthecarman",
         "node_id" : "MDQ6VXNlcjE1MjU2NjYw",
         "organizations_url" : "https://api.github.com/users/benthecarman/orgs",
         "received_events_url" : "https://api.github.com/users/benthecarman/received_events",
         "repos_url" : "https://api.github.com/users/benthecarman/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/benthecarman/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/benthecarman/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/benthecarman"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "It can be merged into 24.x as-is (https://github.com/bitcoin/bitcoin/pull/26327), but for the other branches, someone will need to cherry-pick. ",
      "created_at" : "2022-10-17T15:37:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25985#issuecomment-1281072001",
      "id" : 1281072001,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25985",
      "node_id" : "IC_kwDOABII585MW5uB",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1281072001/reactions"
      },
      "updated_at" : "2022-10-17T15:37:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1281072001",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   }
]
