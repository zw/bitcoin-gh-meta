[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "To me it seems that this could partition the network. In the addresses database of my node there are 2778 addresses that have advertised v2 out of 72821 total.\r\n\r\n> This would be extremely helpful for those who depend on V2 for confirming a connection is a \"bonafide\" node.\r\n\r\nTrying to better understand your usecase. Do you want to check a connection to a particular node (e.g. one that you control or \"trust\")? Note that if that node supports v2, then bitcoind will already connect to it using v2 currently. Note also that even if v2 is used, this alone does not mean that MITM did not happen. You have to manually verify the session ids for that.\r\n\r\nFor ensuring you really connect to the intended node (avoid MITM) using Tor or I2P may be easier or better alternative. In those networks the address represents the peer's public key and naturally when you establish a connection you know you are talking to the one who possesses the private key which corresponds to the address / public key.",
      "created_at" : "2024-03-11T10:24:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/29618#issuecomment-1988076800",
      "id" : 1988076800,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29618",
      "node_id" : "IC_kwDOABII5852f6UA",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1988076800/reactions"
      },
      "updated_at" : "2024-03-11T10:24:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1988076800",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> To me it seems that this could partition the network. In the addresses database of my node there are 2778 addresses that have advertised v2 out of 72821 total.\r\n\r\nIt would only partition the network if almost all v2 nodes had v2-only enabled. As long as this option defaults to off, I don't see any real risk of that happening.\r\n\r\n> Note also that even if v2 is used, this alone does not mean that MITM did not happen. You have to manually verify the session ids for that.\r\n\r\nThe fact that people can check session ids is a reasonable deterrent to MITM attacks, as many attackers would not want their attack to be detected. I think it's fine to have a default-off option to enforce this to get a bit of extra privacy.",
      "created_at" : "2024-03-12T16:59:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/29618#issuecomment-1992135814",
      "id" : 1992135814,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29618",
      "node_id" : "IC_kwDOABII5852vZSG",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1992135814/reactions"
      },
      "updated_at" : "2024-03-12T16:59:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1992135814",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7042?v=4",
         "events_url" : "https://api.github.com/users/petertodd/events{/privacy}",
         "followers_url" : "https://api.github.com/users/petertodd/followers",
         "following_url" : "https://api.github.com/users/petertodd/following{/other_user}",
         "gists_url" : "https://api.github.com/users/petertodd/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/petertodd",
         "id" : 7042,
         "login" : "petertodd",
         "node_id" : "MDQ6VXNlcjcwNDI=",
         "organizations_url" : "https://api.github.com/users/petertodd/orgs",
         "received_events_url" : "https://api.github.com/users/petertodd/received_events",
         "repos_url" : "https://api.github.com/users/petertodd/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/petertodd/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/petertodd/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/petertodd"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> It would only partition the network if almost all v2 nodes had v2-only enabled. As long as this option defaults to off, I don't see any real risk of that happening.\r\n\r\nWe have various other options that could partition the network (`-onlynet`) or have other bad consequences  (`-nolisten`, `-blocksonly`, `-prune`) if everyone used them, plus we could add a warning in the doc that only users who actually need it should use it.\r\n\r\n> Perhaps a setting like listenonly=v2\r\n\r\n`listen` usually refers to inbound connections, this should be an option that applies to both outbound and inbound connections (maybe a third option to `-v2transport`).",
      "created_at" : "2024-03-12T19:17:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/29618#issuecomment-1992370467",
      "id" : 1992370467,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29618",
      "node_id" : "IC_kwDOABII5852wSkj",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1992370467/reactions"
      },
      "updated_at" : "2024-03-12T19:17:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1992370467",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48763452?v=4",
         "events_url" : "https://api.github.com/users/mzumsande/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mzumsande/followers",
         "following_url" : "https://api.github.com/users/mzumsande/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mzumsande/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mzumsande",
         "id" : 48763452,
         "login" : "mzumsande",
         "node_id" : "MDQ6VXNlcjQ4NzYzNDUy",
         "organizations_url" : "https://api.github.com/users/mzumsande/orgs",
         "received_events_url" : "https://api.github.com/users/mzumsande/received_events",
         "repos_url" : "https://api.github.com/users/mzumsande/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mzumsande/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mzumsande"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Ok, forget about the partitioning aspect (for now). Seems 3 different things are mixed here:\r\n\r\n1. Opening v2-only connection to a particular node (e.g. by `addnode` RPC). I got the impression that the OP is missing the fact that if this particular node supports v2 then a v2 connection will be opened even now.\r\n2. Opening v2-only connections for all outbound connections to clearnet peers (for Tor, I2P and CJDNS v1 is as fine because they do encryption anyway).\r\n3. Accepting v2-only incoming connections over clearnet.",
      "created_at" : "2024-03-13T08:16:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/29618#issuecomment-1993789136",
      "id" : 1993789136,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29618",
      "node_id" : "IC_kwDOABII58521s7Q",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1993789136/reactions"
      },
      "updated_at" : "2024-03-13T08:16:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1993789136",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I think that all three types should be affected by a v2-only option for it to be consistent:\r\n* Don't attempt to make v1 outbound connections\r\n* Don't accept v1 inbound connections\r\n* The v1 downgrade mechanism should be disabled for both manual and automatic connections",
      "created_at" : "2024-03-13T13:26:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/29618#issuecomment-1994403879",
      "id" : 1994403879,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29618",
      "node_id" : "IC_kwDOABII58524DAn",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1994403879/reactions"
      },
      "updated_at" : "2024-03-13T13:26:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1994403879",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48763452?v=4",
         "events_url" : "https://api.github.com/users/mzumsande/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mzumsande/followers",
         "following_url" : "https://api.github.com/users/mzumsande/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mzumsande/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mzumsande",
         "id" : 48763452,
         "login" : "mzumsande",
         "node_id" : "MDQ6VXNlcjQ4NzYzNDUy",
         "organizations_url" : "https://api.github.com/users/mzumsande/orgs",
         "received_events_url" : "https://api.github.com/users/mzumsande/received_events",
         "repos_url" : "https://api.github.com/users/mzumsande/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mzumsande/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mzumsande"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I think a per-IP v2only option makes more sense at first, e.g. as an argument to addnode/connect/seednode/..., a suffix to the IP address, or perhaps through a whitelisting permission. If you know a particular peer of your supports V2, it makes sense to enforce it.\r\n\r\nA blanket v2only for the entire node I think is pretty dangerous right now, not for partition risk, but because it'd be trivial for an attacker to spin up enough v2 nodes right now so that they'd eclipse v2only nodes. I think an option like this only makes sense when v2 nodes are widespread.",
      "created_at" : "2024-03-13T13:31:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/29618#issuecomment-1994415042",
      "id" : 1994415042,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29618",
      "node_id" : "IC_kwDOABII58524FvC",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1994415042/reactions"
      },
      "updated_at" : "2024-03-13T13:31:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1994415042",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "> To me it seems that this could partition the network. In the addresses database of my node there are 2778 addresses that have advertised v2 out of 72821 total.\r\n\r\nThank you for taking the time to respond and consider my feature request.\r\n\r\nI understand your concern about potential network partitioning, but I believe that similar risks exist with other features in Bitcoin as well. While I acknowledge that relying solely on V2 protocol connections may limit the available nodes, I believe it's crucial for those who rely on V2 for verifying the authenticity of connections.\r\n\r\n> For ensuring you really connect to the intended node (avoid MITM) using Tor or I2P may be easier or better alternative. In those networks the address represents the peer's public key and naturally when you establish a connection you know you are talking to the one who possesses the private key which corresponds to the address / public key.\r\n\r\nRegarding your suggestion about using Tor or I2P connections, I appreciate the alternative, but it's important to note that some corporate networks restrict or outright disallow connections over these networks. Additionally, in certain regions, Tor and I2P connections may be filtered out, making it essential to have the option to connect over regular IPV4 and IPV6. In such cases, being able to identify V2 connections can be instrumental.\r\n\r\nFurthermore, while it's true that V2 protocol usage alone does not guarantee protection against MITM attacks, it does provide an additional layer of security, especially for those who require confirmation of a \"bonafide\" node.\r\n\r\nTherefore, I still believe that having the ability to specify V2 protocol connections would be beneficial, particularly in scenarios where other options are restricted or unavailable.\r\n\r\n",
      "created_at" : "2024-03-13T17:17:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/29618#issuecomment-1995055321",
      "id" : 1995055321,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29618",
      "node_id" : "IC_kwDOABII58526iDZ",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1995055321/reactions"
      },
      "updated_at" : "2024-03-13T17:17:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1995055321",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/101424448?v=4",
         "events_url" : "https://api.github.com/users/iotamega/events{/privacy}",
         "followers_url" : "https://api.github.com/users/iotamega/followers",
         "following_url" : "https://api.github.com/users/iotamega/following{/other_user}",
         "gists_url" : "https://api.github.com/users/iotamega/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/iotamega",
         "id" : 101424448,
         "login" : "iotamega",
         "node_id" : "U_kgDOBgudQA",
         "organizations_url" : "https://api.github.com/users/iotamega/orgs",
         "received_events_url" : "https://api.github.com/users/iotamega/received_events",
         "repos_url" : "https://api.github.com/users/iotamega/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/iotamega/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/iotamega/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/iotamega"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> A blanket v2only for the entire node I think is pretty dangerous right now, not for partition risk, but because it'd be trivial for an attacker to spin up enough v2 nodes right now so that they'd eclipse v2only nodes. I think an option like this only makes sense when v2 nodes are widespread.\r\n\r\nNot sure if that would be a problem. v2 will be enabled by default in Bitcoin Core version v27, the earliest possible release for a v2-only option would be v28 anyway. Unless users change their upgrade behavior drastically, this means that 30-50% of all nodes will support v2 by then (current percentage for v26 is 39.6% according to https://bitnodes.io/nodes/).\r\n",
      "created_at" : "2024-03-13T18:28:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/29618#issuecomment-1995295577",
      "id" : 1995295577,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29618",
      "node_id" : "IC_kwDOABII58527ctZ",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1995295577/reactions"
      },
      "updated_at" : "2024-03-13T18:28:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1995295577",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48763452?v=4",
         "events_url" : "https://api.github.com/users/mzumsande/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mzumsande/followers",
         "following_url" : "https://api.github.com/users/mzumsande/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mzumsande/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mzumsande",
         "id" : 48763452,
         "login" : "mzumsande",
         "node_id" : "MDQ6VXNlcjQ4NzYzNDUy",
         "organizations_url" : "https://api.github.com/users/mzumsande/orgs",
         "received_events_url" : "https://api.github.com/users/mzumsande/received_events",
         "repos_url" : "https://api.github.com/users/mzumsande/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mzumsande/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mzumsande"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "> It would only partition the network if almost all v2 nodes had v2-only enabled. As long as this option defaults to off, I don't see any real risk of that happening.\r\n\r\nRegarding the risk of network partitioning, I completely agree that it would only become a concern if the V2-only option were enabled by default across a significant portion of V2 nodes. Given the nature of the Bitcoin network and the conservative approach typically taken with introducing new features, I imagine any implementation of this option would default to off, minimizing the risk of network partitioning.\r\n\r\nIn regions where internet traffic is closely monitored or filtered, having the ability to enforce V2-only connections could indeed mitigate potential issues arising from such restrictions. By providing node operators with additional controls, we empower them to navigate these challenges more effectively.\r\n\r\nI believe that while the introduction of a V2-only option should be approached cautiously and with consideration for potential network impacts, it holds significant promise for enhancing privacy and security, particularly in regions where internet freedoms are limited.",
      "created_at" : "2024-03-13T18:32:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/29618#issuecomment-1995308323",
      "id" : 1995308323,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29618",
      "node_id" : "IC_kwDOABII58527f0j",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1995308323/reactions"
      },
      "updated_at" : "2024-03-13T18:32:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1995308323",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/101424448?v=4",
         "events_url" : "https://api.github.com/users/iotamega/events{/privacy}",
         "followers_url" : "https://api.github.com/users/iotamega/followers",
         "following_url" : "https://api.github.com/users/iotamega/following{/other_user}",
         "gists_url" : "https://api.github.com/users/iotamega/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/iotamega",
         "id" : 101424448,
         "login" : "iotamega",
         "node_id" : "U_kgDOBgudQA",
         "organizations_url" : "https://api.github.com/users/iotamega/orgs",
         "received_events_url" : "https://api.github.com/users/iotamega/received_events",
         "repos_url" : "https://api.github.com/users/iotamega/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/iotamega/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/iotamega/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/iotamega"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "> We have various other options that could partition the network (`-onlynet`) or have other bad consequences (`-nolisten`, `-blocksonly`, `-prune`) if everyone used them, plus we could add a warning in the doc that only users who actually need it should use it.\r\n\r\nI like the idea of updating the docs to reflect what it is, the use cases for it, and why you shouldn't just do it without thinking about the overall impact.\r\n\r\n> `listen` usually refers to inbound connections, this should be an option that applies to both outbound and inbound connections (maybe a third option to `-v2transport`).\r\n\r\nGreat points, I do imagine this applying to inbound and outbound so this makes sense. My bad on giving it a \"listen\" indication as I just sort of had this idea after reviewing some logs from some less friendly countries and came here and tapped out the feature request without giving it as much thought as I should have.\r\n\r\nI'd also say it would be even better if you had granular control if it applied to one or the other but understand the simplicity of just making it apply across the board.",
      "created_at" : "2024-03-15T20:41:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/29618#issuecomment-2000413028",
      "id" : 2000413028,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29618",
      "node_id" : "IC_kwDOABII5853O-Fk",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2000413028/reactions"
      },
      "updated_at" : "2024-03-15T20:41:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2000413028",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/101424448?v=4",
         "events_url" : "https://api.github.com/users/iotamega/events{/privacy}",
         "followers_url" : "https://api.github.com/users/iotamega/followers",
         "following_url" : "https://api.github.com/users/iotamega/following{/other_user}",
         "gists_url" : "https://api.github.com/users/iotamega/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/iotamega",
         "id" : 101424448,
         "login" : "iotamega",
         "node_id" : "U_kgDOBgudQA",
         "organizations_url" : "https://api.github.com/users/iotamega/orgs",
         "received_events_url" : "https://api.github.com/users/iotamega/received_events",
         "repos_url" : "https://api.github.com/users/iotamega/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/iotamega/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/iotamega/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/iotamega"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "A few things to add and a few questions to understand the aspects this better:\r\n\r\nAny v2only option should apply only to IPv4 and IPv6 peers, but not to Tor, I2P, CJDNS because the latter already have (stronger) MITM prevention and encryption.\r\n\r\nPer-address v2only option\r\n---\r\nSurely one would set such an option for an address of a peer already known to support v2. For such a peer, v2 connection would already be established currently. So what is the point of having such an option? To make sure MITM does not interfere with the v2 handshake in order to force v1? In this case, knowing the peer supports v2, is the inability to establish v2 equivalent to having v2 with mismatching session ids, showing that MITM is happening?\r\n\r\nGlobal v2only as described in https://github.com/bitcoin/bitcoin/issues/29618#issuecomment-1994403879\r\n---\r\nConsidering a scenario where a node has clearnet-v1 and clearnet-v2 connections. Do clearnet-v1 connections hurt in any way? Is their presence harmful so that we would want to remove them with a v2only option, other than taking up slots? When picking up automatic outbound peers, we take care to have at least one peer from each of the reachable networks. Should we then insist on having at least one clearnet-v2 connection? In other words, treat ipv4-v1 and ipv4-v2 as separate networks for the purpose of choosing outbound peers?",
      "created_at" : "2024-03-18T17:35:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/29618#issuecomment-2004539385",
      "id" : 2004539385,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29618",
      "node_id" : "IC_kwDOABII5853etf5",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2004539385/reactions"
      },
      "updated_at" : "2024-03-18T17:35:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2004539385",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "> 1. Opening v2-only connection to a particular node (e.g. by `addnode` RPC). I got the impression that the OP is missing the fact that if this particular node supports v2 then a v2 connection will be opened even now.\r\n\r\nYes, I'm aware of this and have started using the appropriate flag for such connections. However, it's worth noting that until I explicitly set the flag, my nodes weren't utilizing V2 connections by default. I understand that this behavior may change to be on by default in version 27 if I am reading everything correctly.\r\n\r\n> 2. Opening v2-only connections for all outbound connections to clearnet peers (for Tor, I2P and CJDNS v1 is as fine because they do encryption anyway).\r\n\r\nAdditionally, it would be preferable if the connection couldn't be established when using addnode in certain situations. For instance, if you're in an environment where the default fallback could potentially expose you to security risks, having this control would be invaluable. I imagine this setting not using the fallback and simply not connecting to the node if possible.\r\n\r\n> 3. Accepting v2-only incoming connections over clearnet.\r\n\r\nA global option for accepting V2-only incoming connections over clearnet would indeed be ideal. This makes sense, especially considering that encryption is already provided in environments like Tor, I2P, and CJDNS. Having this option available would offer greater flexibility and security for node operators.\r\n\r\nThank you for bringing up these points, and I appreciate the opportunity to further discuss and refine these ideas.\r\n",
      "created_at" : "2024-03-18T20:23:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/29618#issuecomment-2004907779",
      "id" : 2004907779,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29618",
      "node_id" : "IC_kwDOABII5853gHcD",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2004907779/reactions"
      },
      "updated_at" : "2024-03-18T20:23:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2004907779",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/101424448?v=4",
         "events_url" : "https://api.github.com/users/iotamega/events{/privacy}",
         "followers_url" : "https://api.github.com/users/iotamega/followers",
         "following_url" : "https://api.github.com/users/iotamega/following{/other_user}",
         "gists_url" : "https://api.github.com/users/iotamega/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/iotamega",
         "id" : 101424448,
         "login" : "iotamega",
         "node_id" : "U_kgDOBgudQA",
         "organizations_url" : "https://api.github.com/users/iotamega/orgs",
         "received_events_url" : "https://api.github.com/users/iotamega/received_events",
         "repos_url" : "https://api.github.com/users/iotamega/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/iotamega/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/iotamega/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/iotamega"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "> I think that all three types should be affected by a v2-only option for it to be consistent:\r\n> \r\n> * Don't attempt to make v1 outbound connections\r\n> * Don't accept v1 inbound connections\r\n> * The v1 downgrade mechanism should be disabled for both manual and automatic connections\r\n\r\nI think this best sums up the sort of functionality I am imagining.",
      "created_at" : "2024-03-19T04:49:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/29618#issuecomment-2005756004",
      "id" : 2005756004,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29618",
      "node_id" : "IC_kwDOABII5853jWhk",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2005756004/reactions"
      },
      "updated_at" : "2024-03-19T04:49:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2005756004",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/101424448?v=4",
         "events_url" : "https://api.github.com/users/iotamega/events{/privacy}",
         "followers_url" : "https://api.github.com/users/iotamega/followers",
         "following_url" : "https://api.github.com/users/iotamega/following{/other_user}",
         "gists_url" : "https://api.github.com/users/iotamega/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/iotamega",
         "id" : 101424448,
         "login" : "iotamega",
         "node_id" : "U_kgDOBgudQA",
         "organizations_url" : "https://api.github.com/users/iotamega/orgs",
         "received_events_url" : "https://api.github.com/users/iotamega/received_events",
         "repos_url" : "https://api.github.com/users/iotamega/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/iotamega/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/iotamega/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/iotamega"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> it's worth noting that until I explicitly set the flag, my nodes weren't utilizing V2 connections by default. I understand that this behavior may change to be on by default in version 27 if I am reading everything correctly.\r\n\r\nYes, that is correct. In 27 the global `-v2transport` defaults to `true` and the optional v2 argument to the `addnode` RPC, if not provided, defaults to `-v2transport`.\r\n\r\n> For instance, if you're in an environment where the default fallback could potentially expose you to security risks\r\n\r\nBe careful, it is better not to assume that v2 hides the fact that it is bitcoin traffic going through. That is - that \"you\" are running a bitcoin node. Why is that?\r\n* For automatic outbound connections - your node picks addresses to connect to from a publicly available list of listening bitcoin nodes. So, as soon as your router/ISP/corp/gov/spy sees a TCP connection to an address:port from that list, they know that this is bitcoin traffic, even if they cannot see the traffic itself.\r\n* For manual connections by e.g. `addnode` RPC to another node that is listening but has not announced their address:port publicly to the bitcoin network. The adversary can see the TCP connection from you to that address:port and can try to connect to address:port themselves and figure out that it is a listening bitcoin node.\r\n\r\nOr are you talking about the contents of the traffic itself? There is usually nothing sensitive going through in the p2p traffic. Maybe only if you broadcast your own transactions, is this the \"security risks\" you mentioned?",
      "created_at" : "2024-03-19T09:20:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/29618#issuecomment-2006460478",
      "id" : 2006460478,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29618",
      "node_id" : "IC_kwDOABII5853mCg-",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2006460478/reactions"
      },
      "updated_at" : "2024-03-19T09:44:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2006460478",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   }
]
