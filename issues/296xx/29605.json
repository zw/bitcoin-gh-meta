{
   "active_lock_reason" : null,
   "assignee" : null,
   "assignees" : [],
   "author_association" : "MEMBER",
   "body" : "This is a follow-up of #28016 motivated by https://github.com/bitcoin/bitcoin/pull/28016#pullrequestreview-1913140932 and https://github.com/bitcoin/bitcoin/pull/28016#issuecomment-1984448937.\r\n\r\nThe current behavior of seednode fetching is pretty eager: we do it as the first step under `ThreadOpenNetworkConnections` even if some peers may be queryable from our addrman. This poses two potential issues:\r\n\r\n- First, if permanently set (e.g. running with seednode in a config file) we'd be signaling such seed every time we restart our node\r\n- Second, we will be giving the seed node way too much influence over our addrman, populating the latter even with data from the former even when unnecessary\r\n\r\nThis changes the behavior to only add seednodes to `m_addr_fetch` if our addrman is empty, or little by little after we've spent some time trying addresses from our addrman. Also, seednodes are added to `m_addr_fetch` in random order, to avoid signaling the same node in case more than one seed is added and we happen to try them over multiple restarts",
   "closed_at" : null,
   "closed_by" : null,
   "comments" : 3,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29605/comments",
   "created_at" : "2024-03-08T21:42:14Z",
   "draft" : false,
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29605/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/pull/29605",
   "id" : 2176817837,
   "labels" : [
      {
         "color" : "006b75",
         "default" : false,
         "description" : null,
         "id" : 98298007,
         "name" : "P2P",
         "node_id" : "MDU6TGFiZWw5ODI5ODAwNw==",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/P2P"
      },
      {
         "color" : "cccccc",
         "default" : false,
         "description" : "",
         "id" : 5334691551,
         "name" : "CI failed",
         "node_id" : "LA_kwDOABII588AAAABPfju3w",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/CI%20failed"
      }
   ],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29605/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "node_id" : "PR_kwDOABII585pH8Qh",
   "number" : 29605,
   "performed_via_github_app" : null,
   "pull_request" : {
      "diff_url" : "https://github.com/bitcoin/bitcoin/pull/29605.diff",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29605",
      "merged_at" : null,
      "patch_url" : "https://github.com/bitcoin/bitcoin/pull/29605.patch",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29605"
   },
   "reactions" : {
      "+1" : 0,
      "-1" : 0,
      "confused" : 0,
      "eyes" : 0,
      "heart" : 0,
      "hooray" : 0,
      "laugh" : 0,
      "rocket" : 0,
      "total_count" : 0,
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29605/reactions"
   },
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "open",
   "state_reason" : null,
   "timeline_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29605/timeline",
   "title" : "net: Favor peers from addrman over fetching seednodes",
   "updated_at" : "2024-03-08T22:09:07Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29605",
   "user" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/6665628?v=4",
      "events_url" : "https://api.github.com/users/sr-gi/events{/privacy}",
      "followers_url" : "https://api.github.com/users/sr-gi/followers",
      "following_url" : "https://api.github.com/users/sr-gi/following{/other_user}",
      "gists_url" : "https://api.github.com/users/sr-gi/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/sr-gi",
      "id" : 6665628,
      "login" : "sr-gi",
      "node_id" : "MDQ6VXNlcjY2NjU2Mjg=",
      "organizations_url" : "https://api.github.com/users/sr-gi/orgs",
      "received_events_url" : "https://api.github.com/users/sr-gi/received_events",
      "repos_url" : "https://api.github.com/users/sr-gi/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/sr-gi/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/sr-gi/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/sr-gi"
   }
}
