[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage\nFor detailed information about the code coverage, see the [test coverage report](https://corecheck.dev/bitcoin/bitcoin/pulls/29653).\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\nA summary of reviews will appear here.\n",
      "created_at" : "2024-03-14T22:33:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29653#issuecomment-1998592081",
      "id" : 1998592081,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29653",
      "node_id" : "IC_kwDOABII5853IBhR",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1998592081/reactions"
      },
      "updated_at" : "2024-03-14T22:33:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1998592081",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "cc @0xB10C",
      "created_at" : "2024-03-15T10:03:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29653#issuecomment-1999324417",
      "id" : 1999324417,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29653",
      "node_id" : "IC_kwDOABII5853K0UB",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1999324417/reactions"
      },
      "updated_at" : "2024-03-15T10:03:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1999324417",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@cbergqvist \r\n\r\nThank you for working on this!\r\n\r\nThe suggested approach seems fragile to me. For example, if our depends build system fails to build all qt tools, the main build system could silently pick them from the system packages:\r\n```\r\nchecking for lrelease-qt5... no\r\nchecking for lrelease5... no\r\nchecking for lrelease... no\r\nchecking for lrelease-qt5... no\r\nchecking for lrelease5... no\r\nchecking for lrelease... /usr/bin/lrelease\r\nchecking for lupdate-qt5... no\r\nchecking for lupdate5... no\r\nchecking for lupdate... /home/hebasto/git/bitcoin/depends/x86_64-pc-linux-gnu/native/bin/lupdate\r\nchecking for lconvert-qt5... no\r\nchecking for lconvert5... no\r\nchecking for lconvert... /home/hebasto/git/bitcoin/depends/x86_64-pc-linux-gnu/native/bin/lconvert\r\n```\r\n\r\n---\r\n\r\nWe are close to [migrating](https://github.com/bitcoin/bitcoin/issues/28607) the build system to CMake. You are encouraged to review and test the staging [branch](https://github.com/hebasto/bitcoin/tree/cmake-staging) on NixOS :)",
      "created_at" : "2024-03-15T10:27:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29653#issuecomment-1999363735",
      "id" : 1999363735,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29653",
      "node_id" : "IC_kwDOABII5853K96X",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1999363735/reactions"
      },
      "updated_at" : "2024-03-15T10:27:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1999363735",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Thanks for the timely feedback @hebasto! I'll move this to a draft and see if I can figure out a cleaner approach.\r\n\r\nHappy to test out the CMake branch when I get the time. :)",
      "created_at" : "2024-03-15T15:08:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29653#issuecomment-1999869909",
      "id" : 1999869909,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29653",
      "node_id" : "IC_kwDOABII5853M5fV",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1999869909/reactions"
      },
      "updated_at" : "2024-03-15T15:08:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1999869909",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/581308?v=4",
         "events_url" : "https://api.github.com/users/cbergqvist/events{/privacy}",
         "followers_url" : "https://api.github.com/users/cbergqvist/followers",
         "following_url" : "https://api.github.com/users/cbergqvist/following{/other_user}",
         "gists_url" : "https://api.github.com/users/cbergqvist/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/cbergqvist",
         "id" : 581308,
         "login" : "cbergqvist",
         "node_id" : "MDQ6VXNlcjU4MTMwOA==",
         "organizations_url" : "https://api.github.com/users/cbergqvist/orgs",
         "received_events_url" : "https://api.github.com/users/cbergqvist/received_events",
         "repos_url" : "https://api.github.com/users/cbergqvist/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/cbergqvist/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/cbergqvist/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/cbergqvist"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "My latest understanding is that this issue stems from an ongoing struggle waged by the `nixpkgs` maintainers. Whereas other distros install `qtbase` and `qttools` binaries in the same dir, Nix has them in separate directories and cannot have `qttools` modify `qtbase`. Possible approaches could be to have `qttools` be an optional part of `qtbase`, or make some kind of aggregation derivation with symlinks back to the the binaries of the two derivations.\r\n\r\nExhibits:\r\n1. https://github.com/NixOS/nixpkgs/pull/280943/files#diff-1842f86517293a0958f8b03fd0c28149b86c88bcd32276f9565b334c8f523610R39-R41\r\n2. https://github.com/NixOS/nixpkgs/blob/9af9c1c87ed3e3ed271934cb896e0cdd33dae212/pkgs/tools/graphics/gnuplot/default.nix#L44-L45\r\n3. https://github.com/NixOS/nixpkgs/blob/9af9c1c87ed3e3ed271934cb896e0cdd33dae212/pkgs/tools/graphics/nifskope/qttools-bins.patch#L18-L19\r\n\r\n## Alternative solution\r\n\r\nWas able to resolve the situation through:\r\n* Undoing the change in this PR.\r\n* Modifying my `shell.nix` to specify **both dirs** to `./configure` through `--with-qt-bindir=${pkgs.qt5.qtbase.dev}/bin:${pkgs.qt5.qttools.dev}/bin` (the linked gist in the summary has been updated).\r\n\r\n## Possible remaining action\r\n\r\nOne could still improve the `BITCOIN_QT_PATH_PROGS` documentation stating\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/015ac13dcc964a31ef06dfdb565f88f901607f0e/build-aux/m4/bitcoin_qt.m4#L33\r\n\r\nwith\r\n```\r\ndnl Inputs: $3: If specified, look for $2 here instead of $PATH\r\n```\r\nBut especially as it is being phased out in favor of CMake, I'm fine with just closing this PR.\r\n\r\nWill let it linger a few days in case anyone cares to comment.",
      "created_at" : "2024-03-15T22:01:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29653#issuecomment-2000540527",
      "id" : 2000540527,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29653",
      "node_id" : "IC_kwDOABII5853PdNv",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2000540527/reactions"
      },
      "updated_at" : "2024-03-15T22:01:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2000540527",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/581308?v=4",
         "events_url" : "https://api.github.com/users/cbergqvist/events{/privacy}",
         "followers_url" : "https://api.github.com/users/cbergqvist/followers",
         "following_url" : "https://api.github.com/users/cbergqvist/following{/other_user}",
         "gists_url" : "https://api.github.com/users/cbergqvist/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/cbergqvist",
         "id" : 581308,
         "login" : "cbergqvist",
         "node_id" : "MDQ6VXNlcjU4MTMwOA==",
         "organizations_url" : "https://api.github.com/users/cbergqvist/orgs",
         "received_events_url" : "https://api.github.com/users/cbergqvist/received_events",
         "repos_url" : "https://api.github.com/users/cbergqvist/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/cbergqvist/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/cbergqvist/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/cbergqvist"
      }
   }
]
