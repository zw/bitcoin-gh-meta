[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11120#discussion_r134954343"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11120"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/134954343"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Remove `or` maybe? I.e. `Result: (empty if proof is invalid)\\n`",
      "commit_id" : "7045e31c8b80f107fa8ae4360c14dc1cd4b1afbf",
      "created_at" : "2017-08-24T08:21:04Z",
      "diff_hunk" : "@@ -258,19 +258,23 @@ UniValue verifytxoutproof(const JSONRPCRequest& request)\n     if (request.fHelp || request.params.size() != 1)\n         throw std::runtime_error(\n             \"verifytxoutproof \\\"proof\\\"\\n\"\n-            \"\\nVerifies that a proof points to a transaction in a block, returning the transaction it commits to\\n\"\n-            \"and throwing an RPC error if the block is not in our best chain\\n\"\n+            \"\\nVerifies that a proof points to a transaction in a block, returning the blockhash and transactions it commits to\\n\"\n+            \", throwing an RPC error if the block is not in our best chain\\n\"\n             \"\\nArguments:\\n\"\n             \"1. \\\"proof\\\"    (string, required) The hex-encoded proof generated by gettxoutproof\\n\"\n-            \"\\nResult:\\n\"\n-            \"[\\\"txid\\\"]      (array, strings) The txid(s) which the proof commits to, or empty array if the proof is invalid\\n\"\n+            \"\\nResult: (or empty if proof is invalid)\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11120#discussion_r134954343",
      "id" : 134954343,
      "original_commit_id" : "d77cded0b1d026f030ee424b89a01cfd6b7b9000",
      "original_position" : 12,
      "path" : "src/rpc/rawtransaction.cpp",
      "position" : null,
      "pull_request_review_id" : 58306840,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11120",
      "updated_at" : "2018-03-07T18:21:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/134954343",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "body" : "updated with nit fix",
      "created_at" : "2017-08-24T13:34:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11120#issuecomment-324636599",
      "id" : 324636599,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11120",
      "updated_at" : "2017-08-24T13:34:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/324636599",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11120#discussion_r135263051"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11120"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135263051"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Nit, `,` in the above line?",
      "commit_id" : "7045e31c8b80f107fa8ae4360c14dc1cd4b1afbf",
      "created_at" : "2017-08-25T13:50:30Z",
      "diff_hunk" : "@@ -258,19 +258,23 @@ UniValue verifytxoutproof(const JSONRPCRequest& request)\n     if (request.fHelp || request.params.size() != 1)\n         throw std::runtime_error(\n             \"verifytxoutproof \\\"proof\\\"\\n\"\n-            \"\\nVerifies that a proof points to a transaction in a block, returning the transaction it commits to\\n\"\n-            \"and throwing an RPC error if the block is not in our best chain\\n\"\n+            \"\\nVerifies that a proof points to a transaction in a block, returning the blockhash and transactions it commits to\\n\"\n+            \", throwing an RPC error if the block is not in our best chain\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11120#discussion_r135263051",
      "id" : 135263051,
      "original_commit_id" : "e7f9824f49a8910ef58ad4604e8ea5184dcec8aa",
      "original_position" : 7,
      "path" : "src/rpc/rawtransaction.cpp",
      "position" : null,
      "pull_request_review_id" : 58658246,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11120",
      "updated_at" : "2018-03-07T18:21:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135263051",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11120#discussion_r135263165"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11120"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135263165"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "`... the block hash and ...`",
      "commit_id" : "7045e31c8b80f107fa8ae4360c14dc1cd4b1afbf",
      "created_at" : "2017-08-25T13:51:04Z",
      "diff_hunk" : "@@ -258,19 +258,23 @@ UniValue verifytxoutproof(const JSONRPCRequest& request)\n     if (request.fHelp || request.params.size() != 1)\n         throw std::runtime_error(\n             \"verifytxoutproof \\\"proof\\\"\\n\"\n-            \"\\nVerifies that a proof points to a transaction in a block, returning the transaction it commits to\\n\"\n-            \"and throwing an RPC error if the block is not in our best chain\\n\"\n+            \"\\nVerifies that a proof points to a transaction in a block, returning the blockhash and transactions it commits to\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11120#discussion_r135263165",
      "id" : 135263165,
      "original_commit_id" : "e7f9824f49a8910ef58ad4604e8ea5184dcec8aa",
      "original_position" : 6,
      "path" : "src/rpc/rawtransaction.cpp",
      "position" : null,
      "pull_request_review_id" : 58658246,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11120",
      "updated_at" : "2018-03-07T18:21:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135263165",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11120#discussion_r135264288"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11120"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135264288"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "This is breaking change as the result is now an object instead of an array, needs release note.",
      "commit_id" : "954ec5bb98c81a0a16cc239b972a05cdfb56787e",
      "created_at" : "2017-08-25T13:56:08Z",
      "diff_hunk" : "@@ -258,19 +258,23 @@ UniValue verifytxoutproof(const JSONRPCRequest& request)\n     if (request.fHelp || request.params.size() != 1)\n         throw std::runtime_error(\n             \"verifytxoutproof \\\"proof\\\"\\n\"\n-            \"\\nVerifies that a proof points to a transaction in a block, returning the transaction it commits to\\n\"\n-            \"and throwing an RPC error if the block is not in our best chain\\n\"\n+            \"\\nVerifies that a proof points to a transaction in a block, returning the blockhash and transactions it commits to\\n\"\n+            \", throwing an RPC error if the block is not in our best chain\\n\"\n             \"\\nArguments:\\n\"\n             \"1. \\\"proof\\\"    (string, required) The hex-encoded proof generated by gettxoutproof\\n\"\n-            \"\\nResult:\\n\"\n-            \"[\\\"txid\\\"]      (array, strings) The txid(s) which the proof commits to, or empty array if the proof is invalid\\n\"\n+            \"\\nResult: (empty if proof is invalid)\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11120#discussion_r135264288",
      "id" : 135264288,
      "original_commit_id" : "e7f9824f49a8910ef58ad4604e8ea5184dcec8aa",
      "original_position" : 12,
      "path" : "src/rpc/rawtransaction.cpp",
      "position" : 12,
      "pull_request_review_id" : 58658246,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11120",
      "updated_at" : "2018-03-06T18:45:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135264288",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11120#discussion_r135264478"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11120"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135264478"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Nit, add curly braces.",
      "commit_id" : "7045e31c8b80f107fa8ae4360c14dc1cd4b1afbf",
      "created_at" : "2017-08-25T13:56:53Z",
      "diff_hunk" : "@@ -283,7 +287,10 @@ UniValue verifytxoutproof(const JSONRPCRequest& request)\n         throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Block not found in chain\");\n \n     for (const uint256& hash : vMatch)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11120#discussion_r135264478",
      "id" : 135264478,
      "original_commit_id" : "e7f9824f49a8910ef58ad4604e8ea5184dcec8aa",
      "original_position" : 32,
      "path" : "src/rpc/rawtransaction.cpp",
      "position" : null,
      "pull_request_review_id" : 58658246,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11120",
      "updated_at" : "2018-03-07T18:21:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135264478",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11120#discussion_r135266093"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11120"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135266093"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I was gonna mention that but chose not to. Agree though, I think that would look better.",
      "commit_id" : "7045e31c8b80f107fa8ae4360c14dc1cd4b1afbf",
      "created_at" : "2017-08-25T14:04:08Z",
      "diff_hunk" : "@@ -258,19 +258,23 @@ UniValue verifytxoutproof(const JSONRPCRequest& request)\n     if (request.fHelp || request.params.size() != 1)\n         throw std::runtime_error(\n             \"verifytxoutproof \\\"proof\\\"\\n\"\n-            \"\\nVerifies that a proof points to a transaction in a block, returning the transaction it commits to\\n\"\n-            \"and throwing an RPC error if the block is not in our best chain\\n\"\n+            \"\\nVerifies that a proof points to a transaction in a block, returning the blockhash and transactions it commits to\\n\"\n+            \", throwing an RPC error if the block is not in our best chain\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11120#discussion_r135266093",
      "id" : 135266093,
      "in_reply_to_id" : 135263051,
      "original_commit_id" : "e7f9824f49a8910ef58ad4604e8ea5184dcec8aa",
      "original_position" : 7,
      "path" : "src/rpc/rawtransaction.cpp",
      "position" : null,
      "pull_request_review_id" : 58661961,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11120",
      "updated_at" : "2018-03-07T18:21:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135266093",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "body" : "fixed @promag nits, curly-bracketed the surrounding statements since I'm touching it already",
      "created_at" : "2017-08-25T14:07:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11120#issuecomment-324930717",
      "id" : 324930717,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11120",
      "updated_at" : "2017-08-25T14:07:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/324930717",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11120#discussion_r135271467"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11120"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135271467"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Push `blockhash` first.",
      "commit_id" : "7045e31c8b80f107fa8ae4360c14dc1cd4b1afbf",
      "created_at" : "2017-08-25T14:26:36Z",
      "diff_hunk" : "@@ -258,32 +258,42 @@ UniValue verifytxoutproof(const JSONRPCRequest& request)\n     if (request.fHelp || request.params.size() != 1)\n         throw std::runtime_error(\n             \"verifytxoutproof \\\"proof\\\"\\n\"\n-            \"\\nVerifies that a proof points to a transaction in a block, returning the transaction it commits to\\n\"\n-            \"and throwing an RPC error if the block is not in our best chain\\n\"\n+            \"\\nVerifies that a proof points to a transaction in a block, returning the block hash and transactions it commits to,\\n\"\n+            \"throwing an RPC error if the block is not in our best chain\\n\"\n             \"\\nArguments:\\n\"\n             \"1. \\\"proof\\\"    (string, required) The hex-encoded proof generated by gettxoutproof\\n\"\n-            \"\\nResult:\\n\"\n-            \"[\\\"txid\\\"]      (array, strings) The txid(s) which the proof commits to, or empty array if the proof is invalid\\n\"\n+            \"\\nResult: (empty if proof is invalid)\\n\"\n+            \"{\\n\"\n+            \"    \\\"blockhash\\\"   (string) The blockhash the included proof commits to\\n\"\n+            \"    [\\\"txid\\\"]      (array, strings) The txid(s) which the proof commits to\\n\"\n+            \"}\\n\"\n         );\n \n     CDataStream ssMB(ParseHexV(request.params[0], \"proof\"), SER_NETWORK, PROTOCOL_VERSION | SERIALIZE_TRANSACTION_NO_WITNESS);\n     CMerkleBlock merkleBlock;\n     ssMB >> merkleBlock;\n \n-    UniValue res(UniValue::VARR);\n+    UniValue res(UniValue::VOBJ);\n+    UniValue txids(UniValue::VARR);\n \n     std::vector<uint256> vMatch;\n     std::vector<unsigned int> vIndex;\n-    if (merkleBlock.txn.ExtractMatches(vMatch, vIndex) != merkleBlock.header.hashMerkleRoot)\n+    if (merkleBlock.txn.ExtractMatches(vMatch, vIndex) != merkleBlock.header.hashMerkleRoot) {\n         return res;\n+    }\n \n     LOCK(cs_main);\n \n-    if (!mapBlockIndex.count(merkleBlock.header.GetHash()) || !chainActive.Contains(mapBlockIndex[merkleBlock.header.GetHash()]))\n+    if (!mapBlockIndex.count(merkleBlock.header.GetHash()) || !chainActive.Contains(mapBlockIndex[merkleBlock.header.GetHash()])) {\n         throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Block not found in chain\");\n+    }\n+\n+    for (const uint256& hash : vMatch) {\n+        txids.push_back(hash.GetHex());\n+    }\n \n-    for (const uint256& hash : vMatch)\n-        res.push_back(hash.GetHex());\n+    res.push_back(Pair(\"txids\", txids));\n+    res.push_back(Pair(\"blockhash\", merkleBlock.header.GetHash().GetHex()));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11120#discussion_r135271467",
      "id" : 135271467,
      "original_commit_id" : "57d35fff538e07fe043ce147223227ee732d2261",
      "original_position" : 48,
      "path" : "src/rpc/rawtransaction.cpp",
      "position" : null,
      "pull_request_review_id" : 58668396,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11120",
      "updated_at" : "2018-03-07T18:21:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135271467",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11120#discussion_r135367340"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11120"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135367340"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I'm curious about the reason for this request. Alphabetical ordering?",
      "commit_id" : "7045e31c8b80f107fa8ae4360c14dc1cd4b1afbf",
      "created_at" : "2017-08-25T22:47:33Z",
      "diff_hunk" : "@@ -258,32 +258,42 @@ UniValue verifytxoutproof(const JSONRPCRequest& request)\n     if (request.fHelp || request.params.size() != 1)\n         throw std::runtime_error(\n             \"verifytxoutproof \\\"proof\\\"\\n\"\n-            \"\\nVerifies that a proof points to a transaction in a block, returning the transaction it commits to\\n\"\n-            \"and throwing an RPC error if the block is not in our best chain\\n\"\n+            \"\\nVerifies that a proof points to a transaction in a block, returning the block hash and transactions it commits to,\\n\"\n+            \"throwing an RPC error if the block is not in our best chain\\n\"\n             \"\\nArguments:\\n\"\n             \"1. \\\"proof\\\"    (string, required) The hex-encoded proof generated by gettxoutproof\\n\"\n-            \"\\nResult:\\n\"\n-            \"[\\\"txid\\\"]      (array, strings) The txid(s) which the proof commits to, or empty array if the proof is invalid\\n\"\n+            \"\\nResult: (empty if proof is invalid)\\n\"\n+            \"{\\n\"\n+            \"    \\\"blockhash\\\"   (string) The blockhash the included proof commits to\\n\"\n+            \"    [\\\"txid\\\"]      (array, strings) The txid(s) which the proof commits to\\n\"\n+            \"}\\n\"\n         );\n \n     CDataStream ssMB(ParseHexV(request.params[0], \"proof\"), SER_NETWORK, PROTOCOL_VERSION | SERIALIZE_TRANSACTION_NO_WITNESS);\n     CMerkleBlock merkleBlock;\n     ssMB >> merkleBlock;\n \n-    UniValue res(UniValue::VARR);\n+    UniValue res(UniValue::VOBJ);\n+    UniValue txids(UniValue::VARR);\n \n     std::vector<uint256> vMatch;\n     std::vector<unsigned int> vIndex;\n-    if (merkleBlock.txn.ExtractMatches(vMatch, vIndex) != merkleBlock.header.hashMerkleRoot)\n+    if (merkleBlock.txn.ExtractMatches(vMatch, vIndex) != merkleBlock.header.hashMerkleRoot) {\n         return res;\n+    }\n \n     LOCK(cs_main);\n \n-    if (!mapBlockIndex.count(merkleBlock.header.GetHash()) || !chainActive.Contains(mapBlockIndex[merkleBlock.header.GetHash()]))\n+    if (!mapBlockIndex.count(merkleBlock.header.GetHash()) || !chainActive.Contains(mapBlockIndex[merkleBlock.header.GetHash()])) {\n         throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Block not found in chain\");\n+    }\n+\n+    for (const uint256& hash : vMatch) {\n+        txids.push_back(hash.GetHex());\n+    }\n \n-    for (const uint256& hash : vMatch)\n-        res.push_back(hash.GetHex());\n+    res.push_back(Pair(\"txids\", txids));\n+    res.push_back(Pair(\"blockhash\", merkleBlock.header.GetHash().GetHex()));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11120#discussion_r135367340",
      "id" : 135367340,
      "in_reply_to_id" : 135271467,
      "original_commit_id" : "57d35fff538e07fe043ce147223227ee732d2261",
      "original_position" : 48,
      "path" : "src/rpc/rawtransaction.cpp",
      "position" : null,
      "pull_request_review_id" : 58779382,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11120",
      "updated_at" : "2018-03-07T18:21:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135367340",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11120#discussion_r135371711"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11120"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135371711"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Also matches the documentation above.",
      "commit_id" : "7045e31c8b80f107fa8ae4360c14dc1cd4b1afbf",
      "created_at" : "2017-08-25T23:35:30Z",
      "diff_hunk" : "@@ -258,32 +258,42 @@ UniValue verifytxoutproof(const JSONRPCRequest& request)\n     if (request.fHelp || request.params.size() != 1)\n         throw std::runtime_error(\n             \"verifytxoutproof \\\"proof\\\"\\n\"\n-            \"\\nVerifies that a proof points to a transaction in a block, returning the transaction it commits to\\n\"\n-            \"and throwing an RPC error if the block is not in our best chain\\n\"\n+            \"\\nVerifies that a proof points to a transaction in a block, returning the block hash and transactions it commits to,\\n\"\n+            \"throwing an RPC error if the block is not in our best chain\\n\"\n             \"\\nArguments:\\n\"\n             \"1. \\\"proof\\\"    (string, required) The hex-encoded proof generated by gettxoutproof\\n\"\n-            \"\\nResult:\\n\"\n-            \"[\\\"txid\\\"]      (array, strings) The txid(s) which the proof commits to, or empty array if the proof is invalid\\n\"\n+            \"\\nResult: (empty if proof is invalid)\\n\"\n+            \"{\\n\"\n+            \"    \\\"blockhash\\\"   (string) The blockhash the included proof commits to\\n\"\n+            \"    [\\\"txid\\\"]      (array, strings) The txid(s) which the proof commits to\\n\"\n+            \"}\\n\"\n         );\n \n     CDataStream ssMB(ParseHexV(request.params[0], \"proof\"), SER_NETWORK, PROTOCOL_VERSION | SERIALIZE_TRANSACTION_NO_WITNESS);\n     CMerkleBlock merkleBlock;\n     ssMB >> merkleBlock;\n \n-    UniValue res(UniValue::VARR);\n+    UniValue res(UniValue::VOBJ);\n+    UniValue txids(UniValue::VARR);\n \n     std::vector<uint256> vMatch;\n     std::vector<unsigned int> vIndex;\n-    if (merkleBlock.txn.ExtractMatches(vMatch, vIndex) != merkleBlock.header.hashMerkleRoot)\n+    if (merkleBlock.txn.ExtractMatches(vMatch, vIndex) != merkleBlock.header.hashMerkleRoot) {\n         return res;\n+    }\n \n     LOCK(cs_main);\n \n-    if (!mapBlockIndex.count(merkleBlock.header.GetHash()) || !chainActive.Contains(mapBlockIndex[merkleBlock.header.GetHash()]))\n+    if (!mapBlockIndex.count(merkleBlock.header.GetHash()) || !chainActive.Contains(mapBlockIndex[merkleBlock.header.GetHash()])) {\n         throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Block not found in chain\");\n+    }\n+\n+    for (const uint256& hash : vMatch) {\n+        txids.push_back(hash.GetHex());\n+    }\n \n-    for (const uint256& hash : vMatch)\n-        res.push_back(hash.GetHex());\n+    res.push_back(Pair(\"txids\", txids));\n+    res.push_back(Pair(\"blockhash\", merkleBlock.header.GetHash().GetHex()));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11120#discussion_r135371711",
      "id" : 135371711,
      "in_reply_to_id" : 135271467,
      "original_commit_id" : "57d35fff538e07fe043ce147223227ee732d2261",
      "original_position" : 48,
      "path" : "src/rpc/rawtransaction.cpp",
      "position" : null,
      "pull_request_review_id" : 58784193,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11120",
      "updated_at" : "2018-03-07T18:21:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/135371711",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "rebased, re-added legacy behavior under deprecation",
      "created_at" : "2018-03-06T18:04:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11120#issuecomment-370872672",
      "id" : 370872672,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11120",
      "updated_at" : "2018-03-06T18:04:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/370872672",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "ping @kallewoof ",
      "created_at" : "2018-03-06T18:08:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11120#issuecomment-370874121",
      "id" : 370874121,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11120",
      "updated_at" : "2018-03-06T18:08:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/370874121",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11120#discussion_r172610703"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11120"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172610703"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I'm not sure about the `in v0.17 instead` wording -- what about when bitcoin hits v0.18?",
      "commit_id" : "7045e31c8b80f107fa8ae4360c14dc1cd4b1afbf",
      "created_at" : "2018-03-06T18:16:45Z",
      "diff_hunk" : "@@ -294,6 +294,8 @@ UniValue verifytxoutproof(const JSONRPCRequest& request)\n             \"    \\\"blockhash\\\"   (string) The blockhash the included proof commits to\\n\"\n             \"    [\\\"txid\\\"]      (array, strings) The txid(s) which the proof commits to\\n\"\n             \"}\\n\"\n+            \"\\nResult: (DEPRECATED. To see this result in v0.17 instead, please start bitcoind with -deprecatedrpc=verifytxoutproof. Empty if proof is invalid)\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11120#discussion_r172610703",
      "id" : 172610703,
      "original_commit_id" : "a3716960de5555572408efdab4eba75484c8c1e3",
      "original_position" : 4,
      "path" : "src/rpc/rawtransaction.cpp",
      "position" : null,
      "pull_request_review_id" : 101657491,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11120",
      "updated_at" : "2018-03-07T18:21:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172610703",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11120#discussion_r172611506"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11120"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172611506"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I thought the same, but there are other occurrences in the code. I would remove the version though.",
      "commit_id" : "7045e31c8b80f107fa8ae4360c14dc1cd4b1afbf",
      "created_at" : "2018-03-06T18:19:24Z",
      "diff_hunk" : "@@ -294,6 +294,8 @@ UniValue verifytxoutproof(const JSONRPCRequest& request)\n             \"    \\\"blockhash\\\"   (string) The blockhash the included proof commits to\\n\"\n             \"    [\\\"txid\\\"]      (array, strings) The txid(s) which the proof commits to\\n\"\n             \"}\\n\"\n+            \"\\nResult: (DEPRECATED. To see this result in v0.17 instead, please start bitcoind with -deprecatedrpc=verifytxoutproof. Empty if proof is invalid)\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11120#discussion_r172611506",
      "id" : 172611506,
      "in_reply_to_id" : 172610703,
      "original_commit_id" : "a3716960de5555572408efdab4eba75484c8c1e3",
      "original_position" : 4,
      "path" : "src/rpc/rawtransaction.cpp",
      "position" : null,
      "pull_request_review_id" : 101658403,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11120",
      "updated_at" : "2018-03-07T18:21:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172611506",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@instagibbs See https://github.com/bitcoin/bitcoin/pull/11872/files#diff-ef76fd6674f07db88c3422fdbf0bcf9fR65 for release note example.",
      "created_at" : "2018-03-06T18:19:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11120#issuecomment-370877514",
      "id" : 370877514,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11120",
      "updated_at" : "2018-03-06T18:19:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/370877514",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11120#discussion_r172613318"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11120"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172613318"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I'm a bit confused, if this is merged now, it definitely would be the way to see the old text for 0.17. Now, perhaps the note should also say when it will be removed?",
      "commit_id" : "7045e31c8b80f107fa8ae4360c14dc1cd4b1afbf",
      "created_at" : "2018-03-06T18:25:19Z",
      "diff_hunk" : "@@ -294,6 +294,8 @@ UniValue verifytxoutproof(const JSONRPCRequest& request)\n             \"    \\\"blockhash\\\"   (string) The blockhash the included proof commits to\\n\"\n             \"    [\\\"txid\\\"]      (array, strings) The txid(s) which the proof commits to\\n\"\n             \"}\\n\"\n+            \"\\nResult: (DEPRECATED. To see this result in v0.17 instead, please start bitcoind with -deprecatedrpc=verifytxoutproof. Empty if proof is invalid)\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11120#discussion_r172613318",
      "id" : 172613318,
      "in_reply_to_id" : 172610703,
      "original_commit_id" : "a3716960de5555572408efdab4eba75484c8c1e3",
      "original_position" : 4,
      "path" : "src/rpc/rawtransaction.cpp",
      "position" : null,
      "pull_request_review_id" : 101660567,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11120",
      "updated_at" : "2018-03-07T18:21:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172613318",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11120#discussion_r172614067"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11120"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172614067"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Pushed a new wording, hopefully clearer and more pertinent to the user.",
      "commit_id" : "7045e31c8b80f107fa8ae4360c14dc1cd4b1afbf",
      "created_at" : "2018-03-06T18:27:34Z",
      "diff_hunk" : "@@ -294,6 +294,8 @@ UniValue verifytxoutproof(const JSONRPCRequest& request)\n             \"    \\\"blockhash\\\"   (string) The blockhash the included proof commits to\\n\"\n             \"    [\\\"txid\\\"]      (array, strings) The txid(s) which the proof commits to\\n\"\n             \"}\\n\"\n+            \"\\nResult: (DEPRECATED. To see this result in v0.17 instead, please start bitcoind with -deprecatedrpc=verifytxoutproof. Empty if proof is invalid)\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11120#discussion_r172614067",
      "id" : 172614067,
      "in_reply_to_id" : 172610703,
      "original_commit_id" : "a3716960de5555572408efdab4eba75484c8c1e3",
      "original_position" : 4,
      "path" : "src/rpc/rawtransaction.cpp",
      "position" : null,
      "pull_request_review_id" : 101661440,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11120",
      "updated_at" : "2018-03-07T18:21:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172614067",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "fixed up deprecation message, added release notes",
      "created_at" : "2018-03-06T18:36:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11120#issuecomment-370882839",
      "id" : 370882839,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11120",
      "updated_at" : "2018-03-06T18:36:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/370882839",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11120#discussion_r172617558"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11120"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172617558"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Nit, missing period, sorry.",
      "commit_id" : "7045e31c8b80f107fa8ae4360c14dc1cd4b1afbf",
      "created_at" : "2018-03-06T18:39:20Z",
      "diff_hunk" : "@@ -62,6 +62,7 @@ RPC changes\n ### Low-level changes\n \n - The `fundrawtransaction` rpc will reject the previously deprecated `reserveChangeKey` option.\n+- The `verifytxoutproof` rpc will output an object instead of an array unless `-deprecatedrpc=verifytxoutproof` is set",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11120#discussion_r172617558",
      "id" : 172617558,
      "original_commit_id" : "423c9d6e086f5b6c9246858acc90ddd065e1a5f4",
      "original_position" : 4,
      "path" : "doc/release-notes.md",
      "position" : null,
      "pull_request_review_id" : 101665712,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11120",
      "updated_at" : "2018-03-07T18:21:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172617558",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "fixed up release note nit. I think the only way to return `{}` is to have a non-matching hash header... too lazy to construct one in paste it in.",
      "created_at" : "2018-03-06T18:46:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11120#issuecomment-370885931",
      "id" : 370885931,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11120",
      "updated_at" : "2018-03-06T18:46:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/370885931",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@instagibbs here is one\r\n```\r\nverifytxoutproof 0000000000000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000\r\n{\r\n}\r\n```\r\nMaybe it should throw an error in this case?",
      "created_at" : "2018-03-06T19:16:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11120#issuecomment-370894980",
      "id" : 370894980,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11120",
      "updated_at" : "2018-03-06T19:16:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/370894980",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@promag yeah I'll catch the deprecated case of `[]` and throw an error for new behavior",
      "created_at" : "2018-03-07T17:53:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11120#issuecomment-371224525",
      "id" : 371224525,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11120",
      "updated_at" : "2018-03-07T17:53:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/371224525",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11120#discussion_r172935978"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11120"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172935978"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "s/RPC_INVALID_ADDRESS_OR_KEY/RPC_INVALID_PARAMETER?\r\n\r\nAdd a test for the error, like:\r\n```py\r\nassert_raises_rpc_error(-8, 'No valid transaction commitments are found in the proof', self.nodes[2].gettxoutproof, \r\n'0000000000000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000')\r\n```",
      "commit_id" : "7045e31c8b80f107fa8ae4360c14dc1cd4b1afbf",
      "created_at" : "2018-03-07T18:17:52Z",
      "diff_hunk" : "@@ -285,33 +285,53 @@ UniValue verifytxoutproof(const JSONRPCRequest& request)\n     if (request.fHelp || request.params.size() != 1)\n         throw std::runtime_error(\n             \"verifytxoutproof \\\"proof\\\"\\n\"\n-            \"\\nVerifies that a proof points to a transaction in a block, returning the transaction it commits to\\n\"\n-            \"and throwing an RPC error if the block is not in our best chain\\n\"\n+            \"\\nVerifies that a proof points to a transaction in a block, returning the block hash and transactions it commits to,\\n\"\n+            \"throwing an RPC error if the block is not in our best chain\\n\"\n             \"\\nArguments:\\n\"\n             \"1. \\\"proof\\\"    (string, required) The hex-encoded proof generated by gettxoutproof\\n\"\n             \"\\nResult:\\n\"\n-            \"[\\\"txid\\\"]      (array, strings) The txid(s) which the proof commits to, or empty array if the proof is invalid\\n\"\n+            \"{\\n\"\n+            \"    \\\"blockhash\\\"   (string) The blockhash the included proof commits to\\n\"\n+            \"    [\\\"txid\\\"]      (array, strings) The txid(s) which the proof commits to\\n\"\n+            \"}\\n\"\n+            \"\\nResult: (DEPRECATED. To see this result, please start bitcoind with -deprecatedrpc=verifytxoutproof. This option will be removed in v0.18. Empty if proof is invalid)\\n\"\n+            \"[\\\"txid\\\"]      (array, strings) The txid(s) which the proof commits to\\n\"\n         );\n \n     CDataStream ssMB(ParseHexV(request.params[0], \"proof\"), SER_NETWORK, PROTOCOL_VERSION | SERIALIZE_TRANSACTION_NO_WITNESS);\n     CMerkleBlock merkleBlock;\n     ssMB >> merkleBlock;\n \n-    UniValue res(UniValue::VARR);\n+    UniValue res(UniValue::VOBJ);\n+    UniValue txids(UniValue::VARR);\n \n     std::vector<uint256> vMatch;\n     std::vector<unsigned int> vIndex;\n-    if (merkleBlock.txn.ExtractMatches(vMatch, vIndex) != merkleBlock.header.hashMerkleRoot)\n-        return res;\n+    if (merkleBlock.txn.ExtractMatches(vMatch, vIndex) != merkleBlock.header.hashMerkleRoot) {\n+        if (IsDeprecatedRPCEnabled(\"verifytxoutproof\")) {\n+            return txids;\n+        } else {\n+            throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"No valid transaction commitments are found in the proof\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11120#discussion_r172935978",
      "id" : 172935978,
      "original_commit_id" : "ce6ae10e5ccb672f803df899233e96c98706eecf",
      "original_position" : 36,
      "path" : "src/rpc/rawtransaction.cpp",
      "position" : null,
      "pull_request_review_id" : 102039844,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11120",
      "updated_at" : "2018-03-07T18:21:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/172935978",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "done",
      "created_at" : "2018-03-07T18:21:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11120#issuecomment-371233873",
      "id" : 371233873,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11120",
      "updated_at" : "2018-03-07T18:21:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/371233873",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Needs rebase to fix travis (sorry)",
      "created_at" : "2018-03-08T15:21:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11120#issuecomment-371518976",
      "id" : 371518976,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11120",
      "updated_at" : "2018-03-08T15:21:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/371518976",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "rebased",
      "created_at" : "2018-03-08T15:24:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11120#issuecomment-371520157",
      "id" : 371520157,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11120",
      "updated_at" : "2018-03-08T15:24:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/371520157",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   }
]
