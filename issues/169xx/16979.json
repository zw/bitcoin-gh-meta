{
   "assignee" : null,
   "assignees" : [],
   "author_association" : "MEMBER",
   "body" : "Having a default number (`DEFAULT_HTTP_THREADS=4;`) of HTTP worker threads.\r\n\r\nA single `gettxoutsetinfo` RPC call returns:\r\n```bash\r\nhebasto@odroid:~$ time bitcoin-cli gettxoutsetinfo\r\n{\r\n  \"height\": 596966,\r\n  \"bestblock\": \"0000000000000000000016b72d77ce09ff1ffd98824e671e92c4e6b536e05b2c\",\r\n  \"transactions\": 36147771,\r\n  \"txouts\": 62227414,\r\n  \"bogosize\": 4681101424,\r\n  \"hash_serialized_2\": \"5523a667c0b00094c104b37f85d469b8db9c7615d861e17a22bbdef36717f3e1\",\r\n  \"disk_size\": 3761251169,\r\n  \"total_amount\": 17961904.82206827\r\n}\r\n\r\nreal\t6m36.365s\r\nuser\t0m0.006s\r\nsys\t0m0.012s\r\n```\r\n... and a worker thread gets the \"sleeping\" status (from the `top` output).\r\n\r\nWhen running **two** `gettxoutsetinfo` RPC calls from two terminals (nearly) simultaneously, each of them returns with a timeout error:\r\n```bash\r\nhebasto@odroid:~$ time bitcoin-cli gettxoutsetinfo\r\nerror: Could not connect to the server 127.0.0.1:8332 (error code 0 - \"timeout reached\")\r\n\r\nMake sure the bitcoind server is running and that you are connecting to the correct RPC port.\r\n\r\nreal\t15m0.120s\r\nuser\t0m0.008s\r\nsys\t0m0.012s\r\n```\r\n\r\n... and two worker threads do not sleep and still consume CPU cycles ~until `bitcoind` is stopped~ too long.\r\n\r\n**System information**\r\n\r\n<!-- What version of Bitcoin Core are you using, where did you get it (website, self-compiled, etc)? -->\r\n\r\n```bash\r\nhebasto@odroid:~$ bitcoind -version | head -n 1\r\nBitcoin Core Daemon version v0.18.0\r\nhebasto@odroid:~$ lsb_release -ds\r\nUbuntu 18.04.3 LTS\r\n```\r\n\r\n<!-- What type of machine are you observing the error on (OS/CPU and disk type)? -->\r\nHardware: [ODROID-HC1](https://www.hardkernel.com/shop/odroid-hc1-home-cloud-one/)\r\n",
   "closed_at" : null,
   "closed_by" : null,
   "comments" : 0,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16979/comments",
   "created_at" : "2019-09-28T12:55:27Z",
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16979/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/issues/16979",
   "id" : 499769191,
   "labels" : [
      {
         "color" : "FBBAAB",
         "default" : false,
         "id" : 64585,
         "name" : "Bug",
         "node_id" : "MDU6TGFiZWw2NDU4NQ==",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/Bug"
      },
      {
         "color" : "0052cc",
         "default" : false,
         "id" : 98279177,
         "name" : "RPC/REST/ZMQ",
         "node_id" : "MDU6TGFiZWw5ODI3OTE3Nw==",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/RPC/REST/ZMQ"
      }
   ],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16979/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "node_id" : "MDU6SXNzdWU0OTk3NjkxOTE=",
   "number" : 16979,
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "open",
   "title" : "rpc: Worker threads still run after timeout error for two gettxoutsetinfo RPC calls",
   "updated_at" : "2019-09-28T13:03:44Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16979",
   "user" : {
      "avatar_url" : "https://avatars1.githubusercontent.com/u/32963518?v=4",
      "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
      "followers_url" : "https://api.github.com/users/hebasto/followers",
      "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
      "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/hebasto",
      "id" : 32963518,
      "login" : "hebasto",
      "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
      "organizations_url" : "https://api.github.com/users/hebasto/orgs",
      "received_events_url" : "https://api.github.com/users/hebasto/received_events",
      "repos_url" : "https://api.github.com/users/hebasto/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/hebasto"
   }
}
