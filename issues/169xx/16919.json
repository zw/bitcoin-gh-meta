{
   "assignee" : null,
   "assignees" : [],
   "author_association" : "CONTRIBUTOR",
   "body" : "#15138 dropped `IsLimited` in favor of `IsReachable`, which is misleading. \r\n\r\nHistorically, it was correctly pointed out back in #7553 that \"We do not know that a class of Network is reachable, only that it is not.\" That PR introduced `vfLimited`, and was a nice solution to #7098 (a problem that was partly due to this confusion).\r\n\r\n-----\r\n\r\nIn fact, prior to #15138 there was a clue in a comment that might have shed light on this situation... The previous comment for `IsReachable` read\r\nhttps://github.com/bitcoin/bitcoin/blob/0ed279cb4e4198e20a552c279c09134626bbb0bd/src/net.cpp#L295-L299\r\n\r\nWhich was removed and replaced with https://github.com/bitcoin/bitcoin/blob/d6b076c17bc7d513243711563b262524ef0ba74c/src/net.h#L529-L530\r\n\r\nThe missing clue is that **`IsReachable` returning true _doesn't_ mean \"the network is reachable\", it only means that \"we can probably connect to\" the network, or in other words, that \"we're not limited by any user setting or missing any requirements (e.g. tor daemon) to connect to the network\".**\r\n\r\nIn other words, \"limited\" is more accurate than \"reachable\".\r\n\r\nLet's look at two snippets to see why \"reachable\" can be error-prone and inaccurate.\r\n\r\n-----\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/7d4bc60f1fee785d355fe4d376c0a369fc64dd68/src/init.cpp#L1362-L1377\r\n\r\nIn the above code snippet, we set `NET_ONION` to be \"`Reachable`\" if we have any proxy at all, which doesn't make sense: the proxy might be just a normal SOCKS proxy, and we wouldn't be able to reach the Tor network.\r\n\r\nHowever, if we were to use the concept of \"limited\" it makes more sense: we are not limited from the Tor network if there is a proxy present, as there is a larger than 0 chance that it is a Tor proxy we can use to connect to the Tor network. Conversely, if there were no proxy, we are \"limited\" from the Tor network by the fact that Bitcoin Core can't connect to Tor without a proxy.\r\n\r\n-----\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/7d4bc60f1fee785d355fe4d376c0a369fc64dd68/src/init.cpp#L1339-L1352\r\n\r\nHere, we are setting all known networks that are not specified by `-onlynet` to be not \"reachable\", but what's more a more accurate description is that these networks are \"limited,\" in this case by a user setting.\r\n\r\n-----\r\n\r\nWhat makes things even more confusing is our `getnetworkinfo` RPC help:\r\nhttps://github.com/bitcoin/bitcoin/blob/7d4bc60f1fee785d355fe4d376c0a369fc64dd68/src/rpc/net.cpp#L465-L466\r\n\r\nWhen this is the actual way we calculate these values:\r\nhttps://github.com/bitcoin/bitcoin/blob/7d4bc60f1fee785d355fe4d376c0a369fc64dd68/src/rpc/net.cpp#L434-L435\r\n\r\n-----\r\n\r\nI propose we keep only the concept of a network being \"limited\", which seems to be more accurate and less error-prone. We should also document this clearly.",
   "closed_at" : null,
   "closed_by" : null,
   "comments" : 0,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16919/comments",
   "created_at" : "2019-09-19T19:31:46Z",
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16919/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/issues/16919",
   "id" : 495986693,
   "labels" : [
      {
         "color" : "ebd775",
         "default" : false,
         "id" : 64584,
         "name" : "Brainstorming",
         "node_id" : "MDU6TGFiZWw2NDU4NA==",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/Brainstorming"
      },
      {
         "color" : "006b75",
         "default" : false,
         "id" : 98298007,
         "name" : "P2P",
         "node_id" : "MDU6TGFiZWw5ODI5ODAwNw==",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/P2P"
      }
   ],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16919/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "node_id" : "MDU6SXNzdWU0OTU5ODY2OTM=",
   "number" : 16919,
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "open",
   "title" : "Misleading/inaccurate `{Is,Set}Reachable` naming",
   "updated_at" : "2019-09-19T19:43:05Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16919",
   "user" : {
      "avatar_url" : "https://avatars1.githubusercontent.com/u/3445290?v=4",
      "events_url" : "https://api.github.com/users/dongcarl/events{/privacy}",
      "followers_url" : "https://api.github.com/users/dongcarl/followers",
      "following_url" : "https://api.github.com/users/dongcarl/following{/other_user}",
      "gists_url" : "https://api.github.com/users/dongcarl/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/dongcarl",
      "id" : 3445290,
      "login" : "dongcarl",
      "node_id" : "MDQ6VXNlcjM0NDUyOTA=",
      "organizations_url" : "https://api.github.com/users/dongcarl/orgs",
      "received_events_url" : "https://api.github.com/users/dongcarl/received_events",
      "repos_url" : "https://api.github.com/users/dongcarl/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/dongcarl/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/dongcarl"
   }
}
