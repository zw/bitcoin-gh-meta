[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK",
      "created_at" : "2019-09-23T19:14:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#issuecomment-534243460",
      "id" : 534243460,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16944",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUzNDI0MzQ2MA==",
      "updated_at" : "2019-09-23T19:14:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/534243460",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/45598?v=4",
         "events_url" : "https://api.github.com/users/jb55/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jb55/followers",
         "following_url" : "https://api.github.com/users/jb55/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jb55/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jb55",
         "id" : 45598,
         "login" : "jb55",
         "node_id" : "MDQ6VXNlcjQ1NTk4",
         "organizations_url" : "https://api.github.com/users/jb55/orgs",
         "received_events_url" : "https://api.github.com/users/jb55/received_events",
         "repos_url" : "https://api.github.com/users/jb55/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jb55/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jb55/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jb55"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Would love to see this happen +1",
      "created_at" : "2019-09-23T19:18:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#issuecomment-534244571",
      "id" : 534244571,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16944",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUzNDI0NDU3MQ==",
      "updated_at" : "2019-09-23T19:18:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/534244571",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/797193?v=4",
         "events_url" : "https://api.github.com/users/nvk/events{/privacy}",
         "followers_url" : "https://api.github.com/users/nvk/followers",
         "following_url" : "https://api.github.com/users/nvk/following{/other_user}",
         "gists_url" : "https://api.github.com/users/nvk/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/nvk",
         "id" : 797193,
         "login" : "nvk",
         "node_id" : "MDQ6VXNlcjc5NzE5Mw==",
         "organizations_url" : "https://api.github.com/users/nvk/orgs",
         "received_events_url" : "https://api.github.com/users/nvk/received_events",
         "repos_url" : "https://api.github.com/users/nvk/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/nvk/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/nvk/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/nvk"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#16710](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/16710.html) (build: Enable -Wsuggest-override if available by hebasto)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2019-09-23T20:01:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#issuecomment-534260562",
      "id" : 534260562,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16944",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUzNDI2MDU2Mg==",
      "updated_at" : "2019-10-03T20:58:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/534260562",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "concept ACK.\r\n\r\nI do however think a proper dialogue will be required to let the user know what's going on at a minimum rather than magic resulting in a clipboard result.\r\n\r\nvery light testing also shows it appears it does what's on the tin. I'll do lots more testing later once approach is settled.",
      "created_at" : "2019-09-23T20:28:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#issuecomment-534270538",
      "id" : 534270538,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16944",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUzNDI3MDUzOA==",
      "updated_at" : "2019-09-23T20:31:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/534270538",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "So as some of you saw, I did some related work quite awhile ago. I have a dialog with support for creating/saving/loading/signing/sending these. It's somewhat modeled after the offline signing UI in Armory. I was never _happy_ with the UI, and I think designing this to be intuitive is really hard, but I think it may already be an improvement over clipboard-only.\r\n\r\nLet me spend a few minutes figuring out what the most recent version is that builds cleanly and works, and I will link it here so people can try it.",
      "created_at" : "2019-09-23T20:58:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#issuecomment-534282105",
      "id" : 534282105,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16944",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUzNDI4MjEwNQ==",
      "updated_at" : "2019-09-23T20:58:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/534282105",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/458997?v=4",
         "events_url" : "https://api.github.com/users/gwillen/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gwillen/followers",
         "following_url" : "https://api.github.com/users/gwillen/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gwillen/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gwillen",
         "id" : 458997,
         "login" : "gwillen",
         "node_id" : "MDQ6VXNlcjQ1ODk5Nw==",
         "organizations_url" : "https://api.github.com/users/gwillen/orgs",
         "received_events_url" : "https://api.github.com/users/gwillen/received_events",
         "repos_url" : "https://api.github.com/users/gwillen/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gwillen/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gwillen/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gwillen"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK.",
      "created_at" : "2019-09-23T21:42:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#issuecomment-534297117",
      "id" : 534297117,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16944",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUzNDI5NzExNw==",
      "updated_at" : "2019-09-23T21:42:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/534297117",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Ok, if you'd like to see my work on this, please have a look at https://github.com/gwillen/bitcoin/tree/feature-offline-v2 .\r\n\r\nYou will need to check preferences->wallet->enable offline transaction features. Then you'll get an 'Offline' menu, a new offline transactions dialog box, and a new pair of checkboxes in the 'send' dialog: \"Include watchonly coins\" and \"create offline transaction\" (which is forced on if you include watchonly). If you select the latter, the 'send' button becomes \"Create unsigned\" and will take you to the new dialog.\r\n\r\nThere is still some amount of jank to be ironed out, there are some XXX comments in the source and some missing error handling.\r\n\r\nI've had this vaguely shelved for awhile, but I'd be happy to bring it out and work aggressively on it now if desired; I'd also be happy to bring it out less aggressively and start prepping it as a possible sequel to the PR under discussion here.",
      "created_at" : "2019-09-23T22:20:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#issuecomment-534307676",
      "id" : 534307676,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16944",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUzNDMwNzY3Ng==",
      "updated_at" : "2019-09-23T22:22:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/534307676",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/458997?v=4",
         "events_url" : "https://api.github.com/users/gwillen/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gwillen/followers",
         "following_url" : "https://api.github.com/users/gwillen/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gwillen/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gwillen",
         "id" : 458997,
         "login" : "gwillen",
         "node_id" : "MDQ6VXNlcjQ1ODk5Nw==",
         "organizations_url" : "https://api.github.com/users/gwillen/orgs",
         "received_events_url" : "https://api.github.com/users/gwillen/received_events",
         "repos_url" : "https://api.github.com/users/gwillen/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gwillen/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gwillen/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gwillen"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@gwillen can you make a (draft) PR with that branch? If you rebase on top of this, you can probably drop the \"Enable offline transaction features\" checkbox as well as the \"include watchonly coins\" and \"create unsigned \"checkboxes, in favor of only allowing the functionality with watch-only wallets.\r\n\r\nI like how the send button text changes, so I'll steal that for this PR :-)\r\n\r\n<img width=\"898\" alt=\"Schermafbeelding 2019-09-24 om 13 49 21\" src=\"https://user-images.githubusercontent.com/10217/65509165-219dd100-ded2-11e9-8a3e-c6c9c93dc371.png\">\r\n\r\nOnce we have descriptor wallets and better HWI integration, the simple distinction between watch-only and wallets with private keys will no longer work. For example you might be part of a 2 of 3 multisig, with the keys in the wallet. Or maybe you don't have keys in the Core wallet, but your hardware wallet can sign its part via USB.\r\n\r\nSo in terms of your wizard, I would split into two wizards: one for composing & exporting, and one for loading.\r\n\r\n<img width=\"910\" alt=\"Schermafbeelding 2019-09-24 om 14 09 54\" src=\"https://user-images.githubusercontent.com/10217/65511729-1b125800-ded8-11e9-9a77-510e0902fcef.png\">\r\n\r\nThere's probably a step 0 where you attempt to (partially) sign with your own keys and with any connected devices. If that's not enough, then you go to step 1 where you can export the PSBT via clipboard or file system.\r\n\r\nI would introduce a fresh dialog for loading, maybe co-signing and then broadcasting a transaction. ",
      "created_at" : "2019-09-24T12:36:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#issuecomment-534538035",
      "id" : 534538035,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16944",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUzNDUzODAzNQ==",
      "updated_at" : "2019-09-24T12:39:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/534538035",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Let's continue the UX brainstom here: #16954",
      "created_at" : "2019-09-24T13:34:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#issuecomment-534560388",
      "id" : 534560388,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16944",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUzNDU2MDM4OA==",
      "updated_at" : "2019-09-24T13:34:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/534560388",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I'm afraid the current version of this PR introduces a bug in `CWallet::ListCoins`.\r\n\r\nFirst, note that `==` has higher precedence than the ternary conditional:\r\n\r\n```\r\n[cling]$ 1 == 2 ? 3 : 4\r\n(int) 4\r\n[cling]$ (1 == 2) ? 3 : 4\r\n(int) 4\r\n[cling]$ 1 == (2 ? 3 : 4)\r\n(bool) false\r\n```\r\n\r\nSecond, some context:\r\n\r\n```\r\nunsigned int IsMine(...);\r\nbool IsWalletFlagSet(...);\r\nint ISMINE_WATCH_ONLY = 1;\r\nint ISMINE_SPENDABLE = 2;\r\n```\r\n\r\nThis is being suggested in this PR:\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/41c5165aa30d65d40ef3921bf4760c13f5d42b21/src/wallet/wallet.cpp#L2592-L2593\r\n\r\nShortened to highlight the issue:\r\n\r\n```\r\nif (... &&\r\n    IsMine(it->second.tx->vout[output.n]) ==\r\n      IsWalletFlagSet(WALLET_FLAG_DISABLE_PRIVATE_KEYS) ?\r\n      ISMINE_WATCH_ONLY : ISMINE_SPENDABLE) {\r\n```\r\n\r\nWhich -- given the precedence rules -- is equivalent to:\r\n\r\n```\r\nif (... &&\r\n    (IsMine(it->second.tx->vout[output.n]) ==\r\n      IsWalletFlagSet(WALLET_FLAG_DISABLE_PRIVATE_KEYS)) ?\r\n      ISMINE_WATCH_ONLY : ISMINE_SPENDABLE) {\r\n```\r\n\r\nWhich -- given that `ISMINE_WATCH_ONLY` and `ISMINE_SPENDABLE` are both non-zero integer constants (`1` and `2`) that will be evaluated in a boolean context -- is equivalent to:\r\n\r\n```\r\nif (... && true) {\r\n```\r\n\r\nOr simply:\r\n\r\n```\r\nif (...) {\r\n```\r\n\r\n:)\r\n\r\nI think the intention was:\r\n\r\n```\r\nif (... &&\r\n    IsMine(it->second.tx->vout[output.n]) ==\r\n      (IsWalletFlagSet(WALLET_FLAG_DISABLE_PRIVATE_KEYS) ?\r\n      ISMINE_WATCH_ONLY : ISMINE_SPENDABLE)) {\r\n```\r\n\r\nCould that be the case? :)\r\n\r\n",
      "created_at" : "2019-09-25T11:23:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#issuecomment-534976077",
      "id" : 534976077,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16944",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUzNDk3NjA3Nw==",
      "updated_at" : "2019-09-25T11:26:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/534976077",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r328116392"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/328116392"
         }
      },
      "author_association" : "MEMBER",
      "body" : "As @practicalswift notes you likely wanted parenths around this new clause",
      "commit_id" : "da869592ecf82f8a03eb4ab2339d6bffa3dcea58",
      "created_at" : "2019-09-25T13:19:04Z",
      "diff_hunk" : "@@ -2590,7 +2590,7 @@ std::map<CTxDestination, std::vector<COutput>> CWallet::ListCoins(interfaces::Ch\n         if (it != mapWallet.end()) {\n             int depth = it->second.GetDepthInMainChain(locked_chain);\n             if (depth >= 0 && output.n < it->second.tx->vout.size() &&\n-                IsMine(it->second.tx->vout[output.n]) == ISMINE_SPENDABLE) {\n+                IsMine(it->second.tx->vout[output.n]) == IsWalletFlagSet(WALLET_FLAG_DISABLE_PRIVATE_KEYS) ? ISMINE_WATCH_ONLY : ISMINE_SPENDABLE) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r328116392",
      "id" : 328116392,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMyODExNjM5Mg==",
      "original_commit_id" : "0e88841b33dcb0865690fb1316f22a16aa27d8a9",
      "original_position" : 14,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 293068945,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944",
      "updated_at" : "2019-09-26T14:26:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/328116392",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r328117961"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/328117961"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit: annotate the optional bool args for clarity",
      "commit_id" : "da869592ecf82f8a03eb4ab2339d6bffa3dcea58",
      "created_at" : "2019-09-25T13:22:05Z",
      "diff_hunk" : "@@ -383,17 +386,36 @@ void SendCoinsDialog::on_sendButton_clicked()\n         return;\n     }\n \n-    // now send the prepared transaction\n-    WalletModel::SendCoinsReturn sendStatus = model->sendCoins(currentTransaction);\n-    // process sendStatus and on error generate message shown to user\n-    processSendCoinsReturn(sendStatus);\n+    bool done = false;\n+    if (model->privateKeysDisabled()) {\n+        done = true;\n+        CMutableTransaction mtx = CMutableTransaction{*(currentTransaction.getWtx())};\n+        PartiallySignedTransaction psbtx(mtx);\n+        bool complete = false;\n+        const TransactionError err = model->wallet().fillPSBT(psbtx, complete, SIGHASH_ALL, false, true);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r328117961",
      "id" : 328117961,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMyODExNzk2MQ==",
      "original_commit_id" : "078583e2c5a174ea081333f46790cf2dfdc3c738",
      "original_position" : 42,
      "path" : "src/qt/sendcoinsdialog.cpp",
      "position" : null,
      "pull_request_review_id" : 293068945,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944",
      "updated_at" : "2019-09-26T14:26:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/328117961",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r328121141"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/328121141"
         }
      },
      "author_association" : "MEMBER",
      "body" : "`done` isn't really helping me parse what is going on here, maybe call it `send_failure` and reverse the meaning?",
      "commit_id" : "da869592ecf82f8a03eb4ab2339d6bffa3dcea58",
      "created_at" : "2019-09-25T13:27:59Z",
      "diff_hunk" : "@@ -383,17 +386,36 @@ void SendCoinsDialog::on_sendButton_clicked()\n         return;\n     }\n \n-    // now send the prepared transaction\n-    WalletModel::SendCoinsReturn sendStatus = model->sendCoins(currentTransaction);\n-    // process sendStatus and on error generate message shown to user\n-    processSendCoinsReturn(sendStatus);\n+    bool done = false;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r328121141",
      "id" : 328121141,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMyODEyMTE0MQ==",
      "original_commit_id" : "078583e2c5a174ea081333f46790cf2dfdc3c738",
      "original_position" : 36,
      "path" : "src/qt/sendcoinsdialog.cpp",
      "position" : null,
      "pull_request_review_id" : 293068945,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944",
      "updated_at" : "2019-09-26T14:26:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/328121141",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "The final dialogue should have the \"Yes\" text replace with \"Copy unsigned tx to clipboard\" or something self-explanatory.\r\n\r\nReally \"Yes\" should be \"Send\" in the average case anyways(think I might PR that change separately)",
      "created_at" : "2019-09-25T13:36:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#issuecomment-535026260",
      "id" : 535026260,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16944",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUzNTAyNjI2MA==",
      "updated_at" : "2019-09-25T13:36:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/535026260",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r328358110"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/328358110"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Should be \"clipboard\" :)",
      "commit_id" : "da869592ecf82f8a03eb4ab2339d6bffa3dcea58",
      "created_at" : "2019-09-25T21:56:09Z",
      "diff_hunk" : "@@ -383,17 +392,36 @@ void SendCoinsDialog::on_sendButton_clicked()\n         return;\n     }\n \n-    // now send the prepared transaction\n-    WalletModel::SendCoinsReturn sendStatus = model->sendCoins(currentTransaction);\n-    // process sendStatus and on error generate message shown to user\n-    processSendCoinsReturn(sendStatus);\n+    bool done = false;\n+    if (model->privateKeysDisabled()) {\n+        done = true;\n+        CMutableTransaction mtx = CMutableTransaction{*(currentTransaction.getWtx())};\n+        PartiallySignedTransaction psbtx(mtx);\n+        bool complete = false;\n+        const TransactionError err = model->wallet().fillPSBT(psbtx, complete, SIGHASH_ALL, false, true);\n+        assert(!complete);\n+        assert(err == TransactionError::OK);\n+        // Serialize the PSBT\n+        CDataStream ssTx(SER_NETWORK, PROTOCOL_VERSION);\n+        ssTx << psbtx;\n+        GUIUtil::setClipboard(EncodeBase64(ssTx.str()).c_str());\n+        Q_EMIT message(tr(\"PSBT copied\"), \"Copied to clipbboard\", CClientUIInterface::MSG_INFORMATION);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r328358110",
      "id" : 328358110,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMyODM1ODExMA==",
      "original_commit_id" : "41c5165aa30d65d40ef3921bf4760c13f5d42b21",
      "original_position" : 62,
      "path" : "src/qt/sendcoinsdialog.cpp",
      "position" : null,
      "pull_request_review_id" : 293387152,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944",
      "updated_at" : "2019-09-26T14:26:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/328358110",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Fixed the precedence bug @practicalswift found.\r\n\r\nI added some additional copy:\r\n<img width=\"391\" alt=\"Schermafbeelding 2019-09-26 om 11 15 42\" src=\"https://user-images.githubusercontent.com/10217/65675777-04424180-e04f-11e9-9bd2-426104c2bda8.png\">\r\n\r\n<img width=\"627\" alt=\"Schermafbeelding 2019-09-26 om 11 30 25\" src=\"https://user-images.githubusercontent.com/10217/65676974-14f3b700-e051-11e9-91d4-479afd086d30.png\">\r\n\r\nWith that I don't think it's necessary to show a dialog with the PSBT text. See also #16966 for a more rigorous approach (I'm trying to keep that an easy rebase), where it will be easier to integrate @gwillen's PSBT management changes (save to disk, check progress, etc).",
      "created_at" : "2019-09-26T09:46:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#issuecomment-535427802",
      "id" : 535427802,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16944",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUzNTQyNzgwMg==",
      "updated_at" : "2019-09-26T09:46:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/535427802",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "\"e.g., and offline Bitcoin Core wallet, or a PSBT-compatible hardware wallet\"\r\n\r\nI think that change would make me happy.",
      "created_at" : "2019-09-26T14:12:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#issuecomment-535521894",
      "id" : 535521894,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16944",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUzNTUyMTg5NA==",
      "updated_at" : "2019-09-26T14:12:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/535521894",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@instagibbs done (I didn't update the screenshots)",
      "created_at" : "2019-09-26T14:27:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#issuecomment-535529063",
      "id" : 535529063,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16944",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUzNTUyOTA2Mw==",
      "updated_at" : "2019-09-26T14:27:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/535529063",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "tACK https://github.com/bitcoin/bitcoin/pull/16944/commits/da869592ecf82f8a03eb4ab2339d6bffa3dcea58\r\n\r\nRan both watch-only and non-watch-only modes, tested coin control in watch-only mode, tested a Core -> HWI -> Core round-trip and successfully finalized a PSBT with the desired properties.",
      "created_at" : "2019-09-26T15:02:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#issuecomment-535546393",
      "id" : 535546393,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16944",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUzNTU0NjM5Mw==",
      "updated_at" : "2019-09-26T15:02:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/535546393",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r329785733"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/329785733"
         }
      },
      "author_association" : "MEMBER",
      "body" : "This doesn't need to be outside of the `else` block since it isn't used in the no private keys case.",
      "commit_id" : "da869592ecf82f8a03eb4ab2339d6bffa3dcea58",
      "created_at" : "2019-09-30T21:04:23Z",
      "diff_hunk" : "@@ -383,17 +408,35 @@ void SendCoinsDialog::on_sendButton_clicked()\n         return;\n     }\n \n-    // now send the prepared transaction\n-    WalletModel::SendCoinsReturn sendStatus = model->sendCoins(currentTransaction);\n-    // process sendStatus and on error generate message shown to user\n-    processSendCoinsReturn(sendStatus);\n+    bool send_failure = false;\n+    if (model->privateKeysDisabled()) {\n+        CMutableTransaction mtx = CMutableTransaction{*(currentTransaction.getWtx())};\n+        PartiallySignedTransaction psbtx(mtx);\n+        bool complete = false;\n+        const TransactionError err = model->wallet().fillPSBT(psbtx, complete, SIGHASH_ALL, false /* sign */, true /* bip32derivs */);\n+        assert(!complete);\n+        assert(err == TransactionError::OK);\n+        // Serialize the PSBT\n+        CDataStream ssTx(SER_NETWORK, PROTOCOL_VERSION);\n+        ssTx << psbtx;\n+        GUIUtil::setClipboard(EncodeBase64(ssTx.str()).c_str());\n+        Q_EMIT message(tr(\"PSBT copied\"), \"Copied to clipboard\", CClientUIInterface::MSG_INFORMATION);\n+    } else {\n+        // now send the prepared transaction\n+        WalletModel::SendCoinsReturn sendStatus = model->sendCoins(currentTransaction);\n+        // process sendStatus and on error generate message shown to user\n+        processSendCoinsReturn(sendStatus);\n \n-    if (sendStatus.status == WalletModel::OK)\n-    {\n+        if (sendStatus.status == WalletModel::OK) {\n+            Q_EMIT coinsSent(currentTransaction.getWtx()->GetHash());\n+        } else {\n+            send_failure = true;\n+        }\n+    }\n+    if (!send_failure) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r329785733",
      "id" : 329785733,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMyOTc4NTczMw==",
      "original_commit_id" : "da869592ecf82f8a03eb4ab2339d6bffa3dcea58",
      "original_position" : 95,
      "path" : "src/qt/sendcoinsdialog.cpp",
      "position" : 95,
      "pull_request_review_id" : 295250484,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944",
      "updated_at" : "2019-09-30T21:05:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/329785733",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r330122504"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/330122504"
         }
      },
      "author_association" : "MEMBER",
      "body" : "In the no private keys case we also clear the form. We just assume (with an `assert`) that PSBT creation can never fail, which is why `send_failure` is always `false`. ",
      "commit_id" : "da869592ecf82f8a03eb4ab2339d6bffa3dcea58",
      "created_at" : "2019-10-01T15:26:09Z",
      "diff_hunk" : "@@ -383,17 +408,35 @@ void SendCoinsDialog::on_sendButton_clicked()\n         return;\n     }\n \n-    // now send the prepared transaction\n-    WalletModel::SendCoinsReturn sendStatus = model->sendCoins(currentTransaction);\n-    // process sendStatus and on error generate message shown to user\n-    processSendCoinsReturn(sendStatus);\n+    bool send_failure = false;\n+    if (model->privateKeysDisabled()) {\n+        CMutableTransaction mtx = CMutableTransaction{*(currentTransaction.getWtx())};\n+        PartiallySignedTransaction psbtx(mtx);\n+        bool complete = false;\n+        const TransactionError err = model->wallet().fillPSBT(psbtx, complete, SIGHASH_ALL, false /* sign */, true /* bip32derivs */);\n+        assert(!complete);\n+        assert(err == TransactionError::OK);\n+        // Serialize the PSBT\n+        CDataStream ssTx(SER_NETWORK, PROTOCOL_VERSION);\n+        ssTx << psbtx;\n+        GUIUtil::setClipboard(EncodeBase64(ssTx.str()).c_str());\n+        Q_EMIT message(tr(\"PSBT copied\"), \"Copied to clipboard\", CClientUIInterface::MSG_INFORMATION);\n+    } else {\n+        // now send the prepared transaction\n+        WalletModel::SendCoinsReturn sendStatus = model->sendCoins(currentTransaction);\n+        // process sendStatus and on error generate message shown to user\n+        processSendCoinsReturn(sendStatus);\n \n-    if (sendStatus.status == WalletModel::OK)\n-    {\n+        if (sendStatus.status == WalletModel::OK) {\n+            Q_EMIT coinsSent(currentTransaction.getWtx()->GetHash());\n+        } else {\n+            send_failure = true;\n+        }\n+    }\n+    if (!send_failure) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r330122504",
      "id" : 330122504,
      "in_reply_to_id" : 329785733,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMzMDEyMjUwNA==",
      "original_commit_id" : "da869592ecf82f8a03eb4ab2339d6bffa3dcea58",
      "original_position" : 95,
      "path" : "src/qt/sendcoinsdialog.cpp",
      "position" : 95,
      "pull_request_review_id" : 295691930,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944",
      "updated_at" : "2019-10-01T15:26:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/330122504",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "The confirmation dialog is a `QMessageBox`, which isn't very flexible. #16966 is a better place to tweak things (and I want to avoid rebase hell there).",
      "created_at" : "2019-10-01T15:28:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#issuecomment-537091541",
      "id" : 537091541,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16944",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUzNzA5MTU0MQ==",
      "updated_at" : "2019-10-01T15:28:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/537091541",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "What am I missing?\r\n```\r\ngetbalances\r\n{\r\n  \"mine\": {\r\n    \"trusted\": 0.00000000,\r\n    \"untrusted_pending\": 0.00000000,\r\n    \"immature\": 0.00000000\r\n  },\r\n  \"watchonly\": {\r\n    \"trusted\": 11202.50000000,\r\n    \"untrusted_pending\": 0.00000000,\r\n    \"immature\": 1250.00003320\r\n  }\r\n}\r\n```\r\nAnd then I get \"The amount exceeds your balance.\"",
      "created_at" : "2019-10-01T22:33:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#issuecomment-537260062",
      "id" : 537260062,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16944",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUzNzI2MDA2Mg==",
      "updated_at" : "2019-10-01T22:33:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/537260062",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "My experience was that coin selection refused to select watchonly coins when I wanted it to, even if I set watchonly to true in the coincontrol object passed to preparetransaction (and hence createtransaction), unless I made some more-invasive changes, linked below. I'm not sure if that's what you're seeing, @promag. \r\n\r\nIn particular, see my changes to CWallet::ListCoins: https://github.com/gwillen/bitcoin/compare/35991b162fd142d76d83e672002846c8a40eb794...gwillen:feature-offline-v2#diff-b2bb174788c7409b671c46ccc86034bdR2362\r\n\r\nwhich aren't quite the same as the ones in this PR. When I call AvailableCoins, I force on fWatchOnly in the CCoinControl object that I hand it, which the code did not previously do even if it was called for (I had to add a flag to ListCoins.) Curiously, it seems like it worked for me _without_ the spendability-related changes that this PR makes. Not sure what's up there.",
      "created_at" : "2019-10-02T03:41:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#issuecomment-537321922",
      "id" : 537321922,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16944",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUzNzMyMTkyMg==",
      "updated_at" : "2019-10-02T03:42:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/537321922",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/458997?v=4",
         "events_url" : "https://api.github.com/users/gwillen/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gwillen/followers",
         "following_url" : "https://api.github.com/users/gwillen/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gwillen/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gwillen",
         "id" : 458997,
         "login" : "gwillen",
         "node_id" : "MDQ6VXNlcjQ1ODk5Nw==",
         "organizations_url" : "https://api.github.com/users/gwillen/orgs",
         "received_events_url" : "https://api.github.com/users/gwillen/received_events",
         "repos_url" : "https://api.github.com/users/gwillen/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gwillen/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gwillen/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gwillen"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@promag how did you insert the watch-only keys into that wallet? I've only tested with [HWI](https://github.com/bitcoin-core/HWI) which imports as follows:\r\n\r\n`[{\"desc\": \"wpkh([8...4P/0/*)#36sal9a4\", \"internal\": false, \"range\": [0, 1000], \"timestamp\": \"now\", \"keypool\": true, \"watchonly\": true}, {\"desc\": \"wpkh([80..P/1/*)#nl2rc26w\", \"internal\": true, \"range\": [0, 1000], \"timestamp\": \"now\", \"keypool\": true, \"watchonly\": true}]`\r\n\r\nWhat does `getaddressinfo` tell you about the coins you're trying to spend?\r\n\r\nDoes `walletcreatefundedpsbt` fail the same way?",
      "created_at" : "2019-10-02T10:13:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#issuecomment-537428633",
      "id" : 537428633,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16944",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUzNzQyODYzMw==",
      "updated_at" : "2019-10-02T10:13:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/537428633",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "needs rebase",
      "created_at" : "2019-10-02T14:53:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#issuecomment-537531165",
      "id" : 537531165,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16944",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUzNzUzMTE2NQ==",
      "updated_at" : "2019-10-02T14:53:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/537531165",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->Needs rebase",
      "created_at" : "2019-10-02T14:59:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#issuecomment-537534197",
      "id" : 537534197,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16944",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUzNzUzNDE5Nw==",
      "updated_at" : "2019-10-02T14:59:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/537534197",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@Sjors result of `getaddressinfo`:\r\n\r\n```\r\n{\r\n  \"address\": \"2N9wHFC4dSkZMu3BCspQkApJ9Pf4coHQWUF\",\r\n  \"scriptPubKey\": \"a914b7155eadf2015c0fe4d1e17c4e29d5d58659a9d987\",\r\n  \"ismine\": false,\r\n  \"solvable\": true,\r\n  \"desc\": \"sh(wpkh([528979b9]03dce9cd688fd0a9f6dac92627691eb609b8096123455676b5b57db6abaa32f666))#w8dysyn3\",\r\n  \"iswatchonly\": true,\r\n  \"isscript\": true,\r\n  \"iswitness\": false,\r\n  \"script\": \"witness_v0_keyhash\",\r\n  \"hex\": \"0014528979b9bff424bdefb6e7d6cf98f692eb5a9d05\",\r\n  \"pubkey\": \"03dce9cd688fd0a9f6dac92627691eb609b8096123455676b5b57db6abaa32f666\",\r\n  \"embedded\": {\r\n    \"isscript\": false,\r\n    \"iswitness\": true,\r\n    \"witness_version\": 0,\r\n    \"witness_program\": \"528979b9bff424bdefb6e7d6cf98f692eb5a9d05\",\r\n    \"pubkey\": \"03dce9cd688fd0a9f6dac92627691eb609b8096123455676b5b57db6abaa32f666\",\r\n    \"address\": \"bcrt1q22yhnwdl7sjtmmakultvlx8kjt4448g9nrg59w\",\r\n    \"scriptPubKey\": \"0014528979b9bff424bdefb6e7d6cf98f692eb5a9d05\"\r\n  },\r\n  \"label\": \"\",\r\n  \"ischange\": false,\r\n  \"timestamp\": 1,\r\n  \"labels\": [\r\n    {\r\n      \"name\": \"\",\r\n      \"purpose\": \"receive\"\r\n    }\r\n  ]\r\n}\r\n```\r\nI've used `importpubkey`.\r\n\r\n> Does `walletcreatefundedpsbt` fail the same way?\r\n\r\nI'll try it.",
      "created_at" : "2019-10-02T15:43:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#issuecomment-537554079",
      "id" : 537554079,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16944",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUzNzU1NDA3OQ==",
      "updated_at" : "2019-10-02T15:43:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/537554079",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@promag able to reproduce issue? I'm willing to help debug.",
      "created_at" : "2019-10-08T15:29:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#issuecomment-539569112",
      "id" : 539569112,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16944",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUzOTU2OTExMg==",
      "updated_at" : "2019-10-08T15:29:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/539569112",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> @promag able to reproduce issue?\r\n\r\n@instagibbs no, currently it's working ",
      "created_at" : "2019-10-08T17:40:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#issuecomment-539623657",
      "id" : 539623657,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16944",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUzOTYyMzY1Nw==",
      "updated_at" : "2019-10-08T17:40:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/539623657",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "code review and tACK 428bdc8041e2c1479b650207110de081a91a19eb\r\n\r\nTested:\r\n1) wallet with privkeys, button is \"Send\", coin control works as intended\r\n2) wallet with imported descriptors, button lets you make psbt(that I am able to sign remote, and finalize), coin control works as expected\r\n3) wallet with imported addresses only, button also \"Create unsigned\" but no funds available, nothing shows up in coin control either",
      "created_at" : "2019-10-08T20:50:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#issuecomment-539698694",
      "id" : 539698694,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16944",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUzOTY5ODY5NA==",
      "updated_at" : "2019-10-08T20:52:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/539698694",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@Sjors and @gwillen thanks for working on this!  I use both the GUI and a Bitcoin Core-based cold wallet, so I'm very appreciative of this type of improvement.\r\n\r\nNit-ish.  If I try to create an unsigned spend by clicking \"Use available balance\" and checking \"Subtract fee from amount\", my transaction shouldn't have a change output.  However, on a wallet where I haven't created a keypool, I get an error message about not having a change address.\r\n\r\n![2019-10-09-10_09_12_440747090](https://user-images.githubusercontent.com/61096/66516633-30ad8300-ea7d-11e9-8c21-83697fa75e47.png)\r\n\r\nI also get a second error after that error (\"Transaction creation failed\") which seems like error message overkill.\r\n\r\nAfter importing a key to the keypool, this generated the prompt as expected.  However, I hit cancel, tried again, and it failed with the above error message.  It seems it marked the change address it allocated as used even though (1) the transaction didn't include a change address and (2) the PSBT was never sent to the clipboard (so, even if there had been a change address, it would never have been user-accessible).\r\n\r\nAfter importing another single key into the keypool and this time not cancelling, it worked as expected.  I was able to take the PSBT from the clipboard, run it through my other wallet's `walletprocesspsbt`, copy it back, run `finalizepsbt`, run `sendrawtransaction`, and verify it entered the mempool of my connected regtest node.\r\n\r\nI also tried this on a mixed wallet with some private keys and some watch-only keys, and I can confirm that it doesn't work there (as it shouldn't, per the OP).  For reference, I ran everything manually (no HWI) and only tested single-sig on regtest.\r\n\r\nThanks again for working on this!",
      "created_at" : "2019-10-09T20:46:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#issuecomment-540187262",
      "id" : 540187262,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16944",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU0MDE4NzI2Mg==",
      "updated_at" : "2019-10-09T20:46:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/540187262",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/61096?v=4",
         "events_url" : "https://api.github.com/users/harding/events{/privacy}",
         "followers_url" : "https://api.github.com/users/harding/followers",
         "following_url" : "https://api.github.com/users/harding/following{/other_user}",
         "gists_url" : "https://api.github.com/users/harding/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/harding",
         "id" : 61096,
         "login" : "harding",
         "node_id" : "MDQ6VXNlcjYxMDk2",
         "organizations_url" : "https://api.github.com/users/harding/orgs",
         "received_events_url" : "https://api.github.com/users/harding/received_events",
         "repos_url" : "https://api.github.com/users/harding/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/harding/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/harding/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/harding"
      }
   }
]
