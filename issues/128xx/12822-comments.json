[
   {
      "author_association" : "OWNER",
      "body" : "ACK if you add documentation on how to handle cases like this next time.",
      "created_at" : "2018-03-29T12:43:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12822#issuecomment-377223065",
      "id" : 377223065,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12822",
      "updated_at" : "2018-03-29T12:43:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/377223065",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Added some documentation as requested, should be more clear in the future, I believe.",
      "created_at" : "2018-03-29T14:33:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12822#issuecomment-377254632",
      "id" : 377254632,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12822",
      "updated_at" : "2018-03-29T14:33:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/377254632",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/649246?v=4",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12822#discussion_r178078548"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12822"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/178078548"
         }
      },
      "author_association" : "OWNER",
      "body" : "q: Is there a command to get a list of commits signed by a certain key? If so makes sense to mention that here.",
      "commit_id" : "94715767a33c90ef06dea4f25e2733fa20fa0f36",
      "created_at" : "2018-03-29T14:43:09Z",
      "diff_hunk" : "@@ -24,3 +24,24 @@ keys:\n Note that the above isn't a good UI/UX yet, and needs significant improvements\n to make it more convenient and reduce the chance of errors; pull-reqs\n improving this process would be much appreciated.\n+\n+Configuration files\n+-------------------\n+\n+* `trusted-git-root`: This file should contain a single git commit hash which is the first unsigned git commit (hence it is the \"root of trust\").\n+* `trusted-sha512-root-commit`: This file should contain a single git commit hash which is the first commit without a SHA512 root commitment.\n+* `trusted-keys`: This file should contain a \\n-delimited list of all PGP fingerprints of authorized commit signers (primary, not subkeys).\n+* `allow-revsig-commits`: This file should contain a \\n-delimited list of git commit hashes. See next section for more info.\n+\n+Key expiry/revocation\n+---------------------\n+\n+When a key (or subkey) which has signed old commits expires or is revoked,\n+verify-commits will start failing to verify all commits which were signed by\n+said key. In order to avoid bumping the root-of-trust `trusted-git-root`\n+file, individual commits which were signed by such a key can be added to the\n+`allow-revsig-commits` file. That way, the PGP signatures are still verified",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12822#discussion_r178078548",
      "id" : 178078548,
      "original_commit_id" : "94715767a33c90ef06dea4f25e2733fa20fa0f36",
      "original_position" : 20,
      "path" : "contrib/verify-commits/README.md",
      "position" : 20,
      "pull_request_review_id" : 108075908,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12822",
      "updated_at" : "2018-03-29T14:43:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/178078548",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12822#discussion_r178079191"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12822"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/178079191"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Not currently, I generated the diff here with this patch:\r\n\r\n```\r\ndiff --git a/contrib/verify-commits/verify-commits.sh b/contrib/verify-commits/verify-commits.sh\r\nindex 532b97a438..eb41d90941 100755\r\n--- a/contrib/verify-commits/verify-commits.sh\r\n+++ b/contrib/verify-commits/verify-commits.sh\r\n@@ -62,17 +62,22 @@ while true; do\r\n        fi\r\n \r\n        if ! git -c \"gpg.program=${DIR}/gpg.sh\" verify-commit \"$CURRENT_COMMIT\" > /dev/null; then\r\n-               if [ \"$PREV_COMMIT\" != \"\" ]; then\r\n-                       echo \"No parent of $PREV_COMMIT was signed with a trusted key!\" > /dev/stderr\r\n-                       echo \"Parents are:\" > /dev/stderr\r\n-                       PARENTS=$(git show -s --format=format:%P $PREV_COMMIT)\r\n-                       for PARENT in $PARENTS; do\r\n-                               git show -s $PARENT > /dev/stderr\r\n-                       done\r\n+               export BITCOIN_VERIFY_COMMITS_ALLOW_REVSIG=1\r\n+               if git -c \"gpg.program=${DIR}/gpg.sh\" verify-commit \"$CURRENT_COMMIT\" > /dev/null; then\r\n+                       echo \"$CURRENT_COMMIT\" > /dev/stderr\r\n                else\r\n-                       echo \"$CURRENT_COMMIT was not signed with a trusted key!\" > /dev/stderr\r\n+                       if [ \"$PREV_COMMIT\" != \"\" ]; then\r\n+                               echo \"No parent of $PREV_COMMIT was signed with a trusted key!\" > /dev/stderr\r\n+                               echo \"Parents are:\" > /dev/stderr\r\n+                               PARENTS=$(git show -s --format=format:%P $PREV_COMMIT)\r\n+                               for PARENT in $PARENTS; do\r\n+                                       git show -s $PARENT > /dev/stderr\r\n+                               done\r\n+                       else\r\n+                               echo \"$CURRENT_COMMIT was not signed with a trusted key!\" > /dev/stderr\r\n+                       fi\r\n+                       exit 1\r\n                fi\r\n-               exit 1\r\n        fi\r\n \r\n        # We always verify the top of the tree\r\n```",
      "commit_id" : "94715767a33c90ef06dea4f25e2733fa20fa0f36",
      "created_at" : "2018-03-29T14:45:02Z",
      "diff_hunk" : "@@ -24,3 +24,24 @@ keys:\n Note that the above isn't a good UI/UX yet, and needs significant improvements\n to make it more convenient and reduce the chance of errors; pull-reqs\n improving this process would be much appreciated.\n+\n+Configuration files\n+-------------------\n+\n+* `trusted-git-root`: This file should contain a single git commit hash which is the first unsigned git commit (hence it is the \"root of trust\").\n+* `trusted-sha512-root-commit`: This file should contain a single git commit hash which is the first commit without a SHA512 root commitment.\n+* `trusted-keys`: This file should contain a \\n-delimited list of all PGP fingerprints of authorized commit signers (primary, not subkeys).\n+* `allow-revsig-commits`: This file should contain a \\n-delimited list of git commit hashes. See next section for more info.\n+\n+Key expiry/revocation\n+---------------------\n+\n+When a key (or subkey) which has signed old commits expires or is revoked,\n+verify-commits will start failing to verify all commits which were signed by\n+said key. In order to avoid bumping the root-of-trust `trusted-git-root`\n+file, individual commits which were signed by such a key can be added to the\n+`allow-revsig-commits` file. That way, the PGP signatures are still verified",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12822#discussion_r178079191",
      "id" : 178079191,
      "in_reply_to_id" : 178078548,
      "original_commit_id" : "94715767a33c90ef06dea4f25e2733fa20fa0f36",
      "original_position" : 20,
      "path" : "contrib/verify-commits/README.md",
      "position" : 20,
      "pull_request_review_id" : 108076726,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12822",
      "updated_at" : "2018-03-29T14:45:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/178079191",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/649246?v=4",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "author_association" : "OWNER",
      "body" : "BTW: as I've started timestamping merge commits using opentimestamps, in theory it would be possible to verify the old commits using the expired key without worrying about backdating attacks. But that's probably quite involved, just an idea for the future.",
      "created_at" : "2018-03-29T14:46:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12822#issuecomment-377258958",
      "id" : 377258958,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12822",
      "updated_at" : "2018-03-29T14:46:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/377258958",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12822#discussion_r178086841"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12822"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/178086841"
         }
      },
      "author_association" : "OWNER",
      "body" : "Ah yes, patching the tool to print them out makes sense.",
      "commit_id" : "94715767a33c90ef06dea4f25e2733fa20fa0f36",
      "created_at" : "2018-03-29T15:07:14Z",
      "diff_hunk" : "@@ -24,3 +24,24 @@ keys:\n Note that the above isn't a good UI/UX yet, and needs significant improvements\n to make it more convenient and reduce the chance of errors; pull-reqs\n improving this process would be much appreciated.\n+\n+Configuration files\n+-------------------\n+\n+* `trusted-git-root`: This file should contain a single git commit hash which is the first unsigned git commit (hence it is the \"root of trust\").\n+* `trusted-sha512-root-commit`: This file should contain a single git commit hash which is the first commit without a SHA512 root commitment.\n+* `trusted-keys`: This file should contain a \\n-delimited list of all PGP fingerprints of authorized commit signers (primary, not subkeys).\n+* `allow-revsig-commits`: This file should contain a \\n-delimited list of git commit hashes. See next section for more info.\n+\n+Key expiry/revocation\n+---------------------\n+\n+When a key (or subkey) which has signed old commits expires or is revoked,\n+verify-commits will start failing to verify all commits which were signed by\n+said key. In order to avoid bumping the root-of-trust `trusted-git-root`\n+file, individual commits which were signed by such a key can be added to the\n+`allow-revsig-commits` file. That way, the PGP signatures are still verified",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12822#discussion_r178086841",
      "id" : 178086841,
      "in_reply_to_id" : 178078548,
      "original_commit_id" : "94715767a33c90ef06dea4f25e2733fa20fa0f36",
      "original_position" : 20,
      "path" : "contrib/verify-commits/README.md",
      "position" : 20,
      "pull_request_review_id" : 108086333,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12822",
      "updated_at" : "2018-03-29T15:07:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/178086841",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   }
]
