[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12878#discussion_r179046912"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12878"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/179046912"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Oops, these probably should be merged back into the previous check\r\n",
      "commit_id" : "77a733a99a75bdd04ad94df830e5bdc8a6040959",
      "created_at" : "2018-04-04T07:22:37Z",
      "diff_hunk" : "@@ -265,6 +270,106 @@ BOOST_AUTO_TEST_CASE(util_GetBoolArgEdgeCases)\n     BOOST_CHECK(testArgs.GetBoolArg(\"-bar\", false) == true);\n }\n \n+BOOST_AUTO_TEST_CASE(util_ReadConfigStream)\n+{\n+    const char *str_config =\n+       \"a=\\n\"\n+       \"b=1\\n\"\n+       \"ccc=argument\\n\"\n+       \"ccc=multiple\\n\"\n+       \"d=e\\n\"\n+       \"nofff=1\\n\"\n+       \"noggg=0\\n\"\n+       \"h=1\\n\"    // negated edge cases in config behave very oddly\n+       \"noh=1\\n\"\n+       \"noi=1\\n\"\n+       \"i=1\\n\";\n+\n+    TestArgsManager test_args;\n+\n+    test_args.ReadConfigString(str_config);\n+    // expectation: a, b, ccc, d, fff, ggg end up in map\n+\n+    BOOST_CHECK(test_args.GetMapArgs().size() == 8);\n+    BOOST_CHECK(test_args.GetMapMultiArgs().size() == 8);\n+\n+    BOOST_CHECK(test_args.GetMapArgs().count(\"-a\")\n+                && test_args.GetMapArgs().count(\"-b\")\n+                && test_args.GetMapArgs().count(\"-ccc\")\n+                && test_args.GetMapArgs().count(\"-d\")\n+                && test_args.GetMapArgs().count(\"-fff\")\n+                && test_args.GetMapArgs().count(\"-ggg\")\n+                && test_args.GetMapArgs().count(\"-h\")\n+                && test_args.GetMapArgs().count(\"-i\")\n+               );\n+\n+    BOOST_CHECK(test_args.IsArgSet(\"-a\")\n+                && test_args.IsArgSet(\"-b\")\n+                && test_args.IsArgSet(\"-ccc\")\n+                && test_args.IsArgSet(\"-d\")\n+                && test_args.IsArgSet(\"-fff\")\n+                && test_args.IsArgSet(\"-ggg\")\n+                && test_args.IsArgSet(\"-h\")\n+                && test_args.IsArgSet(\"-i\")\n+                && !test_args.IsArgSet(\"-zzz\")\n+               );\n+\n+    BOOST_CHECK(test_args.GetArg(\"-a\", \"xxx\") == \"\"\n+                && test_args.GetArg(\"-b\", \"xxx\") == \"1\"\n+                && test_args.GetArg(\"-ccc\", \"xxx\") == \"argument\"\n+                && test_args.GetArg(\"-d\", \"xxx\") == \"e\"\n+                && test_args.GetArg(\"-fff\", \"xxx\") == \"0\"\n+                && test_args.GetArg(\"-ggg\", \"xxx\") == \"1\"\n+                && test_args.GetArg(\"-zzz\", \"xxx\") == \"xxx\"\n+               );\n+    BOOST_CHECK(1\n+                && test_args.GetArg(\"-h\", \"xxx\") == \"1\" ); // 1st value takes precedence\n+    BOOST_CHECK(1\n+                && test_args.GetArg(\"-i\", \"xxx\") == \"0\" ); // 1st value takes precedence\n+",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12878#discussion_r179046912",
      "id" : 179046912,
      "original_commit_id" : "0068900bf239993de7f4c124f53beaf28366294b",
      "original_position" : 72,
      "path" : "src/test/util_tests.cpp",
      "position" : null,
      "pull_request_review_id" : 109214721,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12878",
      "updated_at" : "2018-04-05T18:50:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/179046912",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12878#discussion_r179157828"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12878"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/179157828"
         }
      },
      "author_association" : "MEMBER",
      "body" : "This comment is wrong (since 55a89751faaada5598771d10401030e9e86eecbd when `MAX_NETWORK_TYPES` was removed). May as well remove it now that you're moving the function.",
      "commit_id" : "77a733a99a75bdd04ad94df830e5bdc8a6040959",
      "created_at" : "2018-04-04T14:22:26Z",
      "diff_hunk" : "@@ -305,6 +307,12 @@ class ArgsManager\n     // been set. Also called directly in testing.\n     void ForceSetArg(const std::string& strArg, const std::string& strValue);\n \n+    /**\n+     * Looks for -regtest, -testnet and returns the appropriate BIP70 chain name.\n+     * @return CBaseChainParams::MAX_NETWORK_TYPES if an invalid combination is given. CBaseChainParams::MAIN by default.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12878#discussion_r179157828",
      "id" : 179157828,
      "original_commit_id" : "7edc29f0ce7ba0ea64dc0d64afcdc05bb88e4440",
      "original_position" : 15,
      "path" : "src/util.h",
      "position" : null,
      "pull_request_review_id" : 109348348,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12878",
      "updated_at" : "2018-04-05T18:50:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/179157828",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12878#discussion_r179163873"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12878"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/179163873"
         }
      },
      "author_association" : "MEMBER",
      "body" : "remove comment?",
      "commit_id" : "77a733a99a75bdd04ad94df830e5bdc8a6040959",
      "created_at" : "2018-04-04T14:37:01Z",
      "diff_hunk" : "@@ -735,35 +735,56 @@ fs::path GetConfigFile(const std::string& confPath)\n     return AbsPathForConfigVal(fs::path(confPath), false);\n }\n \n-void ArgsManager::ReadConfigFile(const std::string& confPath)\n+void ArgsManager::ReadConfigStream(std::istream& stream)\n {\n-    fs::ifstream streamConfig(GetConfigFile(confPath));\n-    if (!streamConfig.good())\n-        return; // No bitcoin.conf file is OK\n+    // assert(streamConfig.good());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12878#discussion_r179163873",
      "id" : 179163873,
      "original_commit_id" : "7edc29f0ce7ba0ea64dc0d64afcdc05bb88e4440",
      "original_position" : 10,
      "path" : "src/util.cpp",
      "position" : null,
      "pull_request_review_id" : 109348348,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12878",
      "updated_at" : "2018-04-05T18:50:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/179163873",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12878#discussion_r179166079"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12878"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/179166079"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I don't understand this comment. Can you make it more explicit about what you mean, or remove?",
      "commit_id" : "77a733a99a75bdd04ad94df830e5bdc8a6040959",
      "created_at" : "2018-04-04T14:42:10Z",
      "diff_hunk" : "@@ -253,16 +258,150 @@ BOOST_AUTO_TEST_CASE(util_GetBoolArgEdgeCases)\n {\n     // Test some awful edge cases that hopefully no user will ever exercise.\n     TestArgsManager testArgs;\n+\n+    // Params test\n     const char *argv_test[] = {\"ignored\", \"-nofoo\", \"-foo\", \"-nobar=0\"};\n     testArgs.ParseParameters(4, (char**)argv_test);\n \n     // This was passed twice, second one overrides the negative setting.\n     BOOST_CHECK(!testArgs.IsArgNegated(\"-foo\"));\n-    BOOST_CHECK(testArgs.GetBoolArg(\"-foo\", false) == true);\n+    BOOST_CHECK(testArgs.GetArg(\"-foo\", \"xxx\") == \"\");\n+\n+    // A double negative is a positive.\n+    BOOST_CHECK(testArgs.IsArgNegated(\"-bar\"));\n+    BOOST_CHECK(testArgs.GetArg(\"-bar\", \"xxx\") == \"1\");\n+\n+    // Config test\n+    const char *conf_test = \"nofoo=1\\nfoo=1\\nnobar=0\\n\";\n+    testArgs.ParseParameters(1, (char**)argv_test);\n+    testArgs.ReadConfigString(conf_test);\n+\n+    // This was passed twice, second one overrides the negative setting,\n+    // but not the value.\n+    BOOST_CHECK(!testArgs.IsArgNegated(\"-foo\"));\n+    BOOST_CHECK(testArgs.GetArg(\"-foo\", \"xxx\") == \"0\");\n \n     // A double negative is a positive.\n     BOOST_CHECK(testArgs.IsArgNegated(\"-bar\"));\n-    BOOST_CHECK(testArgs.GetBoolArg(\"-bar\", false) == true);\n+    BOOST_CHECK(testArgs.GetArg(\"-bar\", \"xxx\") == \"1\");\n+\n+    // Combined test\n+    const char *combo_test_args[] = {\"ignored\", \"-nofoo\", \"-bar\"};\n+    const char *combo_test_conf = \"foo=1\\nnobar=1\\n\";\n+    testArgs.ParseParameters(3, (char**)combo_test_args);\n+    testArgs.ReadConfigString(combo_test_conf);\n+\n+    // Command line overrides, but doesn't erase old setting\n+    BOOST_CHECK(!testArgs.IsArgNegated(\"-foo\"));\n+    BOOST_CHECK(testArgs.GetArg(\"-foo\", \"xxx\") == \"0\");\n+    BOOST_CHECK(testArgs.GetArgs(\"-foo\").size() == 2\n+                && testArgs.GetArgs(\"-foo\").front() == \"0\"\n+                && testArgs.GetArgs(\"-foo\").back() == \"1\");\n+\n+    // Command line overrides, but doesn't erase old setting\n+    BOOST_CHECK(testArgs.IsArgNegated(\"-bar\"));\n+    BOOST_CHECK(testArgs.GetArg(\"-bar\", \"xxx\") == \"\");\n+    BOOST_CHECK(testArgs.GetArgs(\"-bar\").size() == 2\n+                && testArgs.GetArgs(\"-bar\").front() == \"\"\n+                && testArgs.GetArgs(\"-bar\").back() == \"0\");\n+}\n+\n+BOOST_AUTO_TEST_CASE(util_ReadConfigStream)\n+{\n+    const char *str_config =\n+       \"a=\\n\"\n+       \"b=1\\n\"\n+       \"ccc=argument\\n\"\n+       \"ccc=multiple\\n\"\n+       \"d=e\\n\"\n+       \"nofff=1\\n\"\n+       \"noggg=0\\n\"\n+       \"h=1\\n\"    // negated edge cases in config behave very oddly",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12878#discussion_r179166079",
      "id" : 179166079,
      "original_commit_id" : "7edc29f0ce7ba0ea64dc0d64afcdc05bb88e4440",
      "original_position" : 76,
      "path" : "src/test/util_tests.cpp",
      "position" : null,
      "pull_request_review_id" : 109348348,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12878",
      "updated_at" : "2018-04-05T18:50:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/179166079",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12878#discussion_r179166647"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12878"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/179166647"
         }
      },
      "author_association" : "MEMBER",
      "body" : "and `h` and `i`?",
      "commit_id" : "77a733a99a75bdd04ad94df830e5bdc8a6040959",
      "created_at" : "2018-04-04T14:43:44Z",
      "diff_hunk" : "@@ -253,16 +258,150 @@ BOOST_AUTO_TEST_CASE(util_GetBoolArgEdgeCases)\n {\n     // Test some awful edge cases that hopefully no user will ever exercise.\n     TestArgsManager testArgs;\n+\n+    // Params test\n     const char *argv_test[] = {\"ignored\", \"-nofoo\", \"-foo\", \"-nobar=0\"};\n     testArgs.ParseParameters(4, (char**)argv_test);\n \n     // This was passed twice, second one overrides the negative setting.\n     BOOST_CHECK(!testArgs.IsArgNegated(\"-foo\"));\n-    BOOST_CHECK(testArgs.GetBoolArg(\"-foo\", false) == true);\n+    BOOST_CHECK(testArgs.GetArg(\"-foo\", \"xxx\") == \"\");\n+\n+    // A double negative is a positive.\n+    BOOST_CHECK(testArgs.IsArgNegated(\"-bar\"));\n+    BOOST_CHECK(testArgs.GetArg(\"-bar\", \"xxx\") == \"1\");\n+\n+    // Config test\n+    const char *conf_test = \"nofoo=1\\nfoo=1\\nnobar=0\\n\";\n+    testArgs.ParseParameters(1, (char**)argv_test);\n+    testArgs.ReadConfigString(conf_test);\n+\n+    // This was passed twice, second one overrides the negative setting,\n+    // but not the value.\n+    BOOST_CHECK(!testArgs.IsArgNegated(\"-foo\"));\n+    BOOST_CHECK(testArgs.GetArg(\"-foo\", \"xxx\") == \"0\");\n \n     // A double negative is a positive.\n     BOOST_CHECK(testArgs.IsArgNegated(\"-bar\"));\n-    BOOST_CHECK(testArgs.GetBoolArg(\"-bar\", false) == true);\n+    BOOST_CHECK(testArgs.GetArg(\"-bar\", \"xxx\") == \"1\");\n+\n+    // Combined test\n+    const char *combo_test_args[] = {\"ignored\", \"-nofoo\", \"-bar\"};\n+    const char *combo_test_conf = \"foo=1\\nnobar=1\\n\";\n+    testArgs.ParseParameters(3, (char**)combo_test_args);\n+    testArgs.ReadConfigString(combo_test_conf);\n+\n+    // Command line overrides, but doesn't erase old setting\n+    BOOST_CHECK(!testArgs.IsArgNegated(\"-foo\"));\n+    BOOST_CHECK(testArgs.GetArg(\"-foo\", \"xxx\") == \"0\");\n+    BOOST_CHECK(testArgs.GetArgs(\"-foo\").size() == 2\n+                && testArgs.GetArgs(\"-foo\").front() == \"0\"\n+                && testArgs.GetArgs(\"-foo\").back() == \"1\");\n+\n+    // Command line overrides, but doesn't erase old setting\n+    BOOST_CHECK(testArgs.IsArgNegated(\"-bar\"));\n+    BOOST_CHECK(testArgs.GetArg(\"-bar\", \"xxx\") == \"\");\n+    BOOST_CHECK(testArgs.GetArgs(\"-bar\").size() == 2\n+                && testArgs.GetArgs(\"-bar\").front() == \"\"\n+                && testArgs.GetArgs(\"-bar\").back() == \"0\");\n+}\n+\n+BOOST_AUTO_TEST_CASE(util_ReadConfigStream)\n+{\n+    const char *str_config =\n+       \"a=\\n\"\n+       \"b=1\\n\"\n+       \"ccc=argument\\n\"\n+       \"ccc=multiple\\n\"\n+       \"d=e\\n\"\n+       \"nofff=1\\n\"\n+       \"noggg=0\\n\"\n+       \"h=1\\n\"    // negated edge cases in config behave very oddly\n+       \"noh=1\\n\"\n+       \"noi=1\\n\"\n+       \"i=1\\n\";\n+\n+    TestArgsManager test_args;\n+\n+    test_args.ReadConfigString(str_config);\n+    // expectation: a, b, ccc, d, fff, ggg end up in map",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12878#discussion_r179166647",
      "id" : 179166647,
      "original_commit_id" : "7edc29f0ce7ba0ea64dc0d64afcdc05bb88e4440",
      "original_position" : 84,
      "path" : "src/test/util_tests.cpp",
      "position" : null,
      "pull_request_review_id" : 109348348,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12878",
      "updated_at" : "2018-04-05T18:50:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/179166647",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12878#discussion_r179170959"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12878"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/179170959"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I think this is clearer in C++11:\r\n\r\n`    for (auto def : { false, true }) {`",
      "commit_id" : "77a733a99a75bdd04ad94df830e5bdc8a6040959",
      "created_at" : "2018-04-04T14:55:25Z",
      "diff_hunk" : "@@ -253,16 +258,150 @@ BOOST_AUTO_TEST_CASE(util_GetBoolArgEdgeCases)\n {\n     // Test some awful edge cases that hopefully no user will ever exercise.\n     TestArgsManager testArgs;\n+\n+    // Params test\n     const char *argv_test[] = {\"ignored\", \"-nofoo\", \"-foo\", \"-nobar=0\"};\n     testArgs.ParseParameters(4, (char**)argv_test);\n \n     // This was passed twice, second one overrides the negative setting.\n     BOOST_CHECK(!testArgs.IsArgNegated(\"-foo\"));\n-    BOOST_CHECK(testArgs.GetBoolArg(\"-foo\", false) == true);\n+    BOOST_CHECK(testArgs.GetArg(\"-foo\", \"xxx\") == \"\");\n+\n+    // A double negative is a positive.\n+    BOOST_CHECK(testArgs.IsArgNegated(\"-bar\"));\n+    BOOST_CHECK(testArgs.GetArg(\"-bar\", \"xxx\") == \"1\");\n+\n+    // Config test\n+    const char *conf_test = \"nofoo=1\\nfoo=1\\nnobar=0\\n\";\n+    testArgs.ParseParameters(1, (char**)argv_test);\n+    testArgs.ReadConfigString(conf_test);\n+\n+    // This was passed twice, second one overrides the negative setting,\n+    // but not the value.\n+    BOOST_CHECK(!testArgs.IsArgNegated(\"-foo\"));\n+    BOOST_CHECK(testArgs.GetArg(\"-foo\", \"xxx\") == \"0\");\n \n     // A double negative is a positive.\n     BOOST_CHECK(testArgs.IsArgNegated(\"-bar\"));\n-    BOOST_CHECK(testArgs.GetBoolArg(\"-bar\", false) == true);\n+    BOOST_CHECK(testArgs.GetArg(\"-bar\", \"xxx\") == \"1\");\n+\n+    // Combined test\n+    const char *combo_test_args[] = {\"ignored\", \"-nofoo\", \"-bar\"};\n+    const char *combo_test_conf = \"foo=1\\nnobar=1\\n\";\n+    testArgs.ParseParameters(3, (char**)combo_test_args);\n+    testArgs.ReadConfigString(combo_test_conf);\n+\n+    // Command line overrides, but doesn't erase old setting\n+    BOOST_CHECK(!testArgs.IsArgNegated(\"-foo\"));\n+    BOOST_CHECK(testArgs.GetArg(\"-foo\", \"xxx\") == \"0\");\n+    BOOST_CHECK(testArgs.GetArgs(\"-foo\").size() == 2\n+                && testArgs.GetArgs(\"-foo\").front() == \"0\"\n+                && testArgs.GetArgs(\"-foo\").back() == \"1\");\n+\n+    // Command line overrides, but doesn't erase old setting\n+    BOOST_CHECK(testArgs.IsArgNegated(\"-bar\"));\n+    BOOST_CHECK(testArgs.GetArg(\"-bar\", \"xxx\") == \"\");\n+    BOOST_CHECK(testArgs.GetArgs(\"-bar\").size() == 2\n+                && testArgs.GetArgs(\"-bar\").front() == \"\"\n+                && testArgs.GetArgs(\"-bar\").back() == \"0\");\n+}\n+\n+BOOST_AUTO_TEST_CASE(util_ReadConfigStream)\n+{\n+    const char *str_config =\n+       \"a=\\n\"\n+       \"b=1\\n\"\n+       \"ccc=argument\\n\"\n+       \"ccc=multiple\\n\"\n+       \"d=e\\n\"\n+       \"nofff=1\\n\"\n+       \"noggg=0\\n\"\n+       \"h=1\\n\"    // negated edge cases in config behave very oddly\n+       \"noh=1\\n\"\n+       \"noi=1\\n\"\n+       \"i=1\\n\";\n+\n+    TestArgsManager test_args;\n+\n+    test_args.ReadConfigString(str_config);\n+    // expectation: a, b, ccc, d, fff, ggg end up in map\n+\n+    BOOST_CHECK(test_args.GetMapArgs().size() == 8);\n+    BOOST_CHECK(test_args.GetMapMultiArgs().size() == 8);\n+\n+    BOOST_CHECK(test_args.GetMapArgs().count(\"-a\")\n+                && test_args.GetMapArgs().count(\"-b\")\n+                && test_args.GetMapArgs().count(\"-ccc\")\n+                && test_args.GetMapArgs().count(\"-d\")\n+                && test_args.GetMapArgs().count(\"-fff\")\n+                && test_args.GetMapArgs().count(\"-ggg\")\n+                && test_args.GetMapArgs().count(\"-h\")\n+                && test_args.GetMapArgs().count(\"-i\")\n+               );\n+\n+    BOOST_CHECK(test_args.IsArgSet(\"-a\")\n+                && test_args.IsArgSet(\"-b\")\n+                && test_args.IsArgSet(\"-ccc\")\n+                && test_args.IsArgSet(\"-d\")\n+                && test_args.IsArgSet(\"-fff\")\n+                && test_args.IsArgSet(\"-ggg\")\n+                && test_args.IsArgSet(\"-h\")\n+                && test_args.IsArgSet(\"-i\")\n+                && !test_args.IsArgSet(\"-zzz\")\n+               );\n+\n+    BOOST_CHECK(test_args.GetArg(\"-a\", \"xxx\") == \"\"\n+                && test_args.GetArg(\"-b\", \"xxx\") == \"1\"\n+                && test_args.GetArg(\"-ccc\", \"xxx\") == \"argument\"\n+                && test_args.GetArg(\"-d\", \"xxx\") == \"e\"\n+                && test_args.GetArg(\"-fff\", \"xxx\") == \"0\"\n+                && test_args.GetArg(\"-ggg\", \"xxx\") == \"1\"\n+                && test_args.GetArg(\"-h\", \"xxx\") == \"1\" // 1st value takes precedence\n+                && test_args.GetArg(\"-i\", \"xxx\") == \"0\" // 1st value takes precedence\n+                && test_args.GetArg(\"-zzz\", \"xxx\") == \"xxx\"\n+               );\n+\n+    for (int i = 0; i < 2; i++) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12878#discussion_r179170959",
      "id" : 179170959,
      "original_commit_id" : "7edc29f0ce7ba0ea64dc0d64afcdc05bb88e4440",
      "original_position" : 121,
      "path" : "src/test/util_tests.cpp",
      "position" : null,
      "pull_request_review_id" : 109348348,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12878",
      "updated_at" : "2018-04-05T18:50:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/179170959",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12878#discussion_r179173614"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12878"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/179173614"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Why no: `    BOOST_CHECK(test_args.GetArgs(\"-ggg\").size() == 1);` ?",
      "commit_id" : "77a733a99a75bdd04ad94df830e5bdc8a6040959",
      "created_at" : "2018-04-04T15:02:16Z",
      "diff_hunk" : "@@ -253,16 +258,150 @@ BOOST_AUTO_TEST_CASE(util_GetBoolArgEdgeCases)\n {\n     // Test some awful edge cases that hopefully no user will ever exercise.\n     TestArgsManager testArgs;\n+\n+    // Params test\n     const char *argv_test[] = {\"ignored\", \"-nofoo\", \"-foo\", \"-nobar=0\"};\n     testArgs.ParseParameters(4, (char**)argv_test);\n \n     // This was passed twice, second one overrides the negative setting.\n     BOOST_CHECK(!testArgs.IsArgNegated(\"-foo\"));\n-    BOOST_CHECK(testArgs.GetBoolArg(\"-foo\", false) == true);\n+    BOOST_CHECK(testArgs.GetArg(\"-foo\", \"xxx\") == \"\");\n+\n+    // A double negative is a positive.\n+    BOOST_CHECK(testArgs.IsArgNegated(\"-bar\"));\n+    BOOST_CHECK(testArgs.GetArg(\"-bar\", \"xxx\") == \"1\");\n+\n+    // Config test\n+    const char *conf_test = \"nofoo=1\\nfoo=1\\nnobar=0\\n\";\n+    testArgs.ParseParameters(1, (char**)argv_test);\n+    testArgs.ReadConfigString(conf_test);\n+\n+    // This was passed twice, second one overrides the negative setting,\n+    // but not the value.\n+    BOOST_CHECK(!testArgs.IsArgNegated(\"-foo\"));\n+    BOOST_CHECK(testArgs.GetArg(\"-foo\", \"xxx\") == \"0\");\n \n     // A double negative is a positive.\n     BOOST_CHECK(testArgs.IsArgNegated(\"-bar\"));\n-    BOOST_CHECK(testArgs.GetBoolArg(\"-bar\", false) == true);\n+    BOOST_CHECK(testArgs.GetArg(\"-bar\", \"xxx\") == \"1\");\n+\n+    // Combined test\n+    const char *combo_test_args[] = {\"ignored\", \"-nofoo\", \"-bar\"};\n+    const char *combo_test_conf = \"foo=1\\nnobar=1\\n\";\n+    testArgs.ParseParameters(3, (char**)combo_test_args);\n+    testArgs.ReadConfigString(combo_test_conf);\n+\n+    // Command line overrides, but doesn't erase old setting\n+    BOOST_CHECK(!testArgs.IsArgNegated(\"-foo\"));\n+    BOOST_CHECK(testArgs.GetArg(\"-foo\", \"xxx\") == \"0\");\n+    BOOST_CHECK(testArgs.GetArgs(\"-foo\").size() == 2\n+                && testArgs.GetArgs(\"-foo\").front() == \"0\"\n+                && testArgs.GetArgs(\"-foo\").back() == \"1\");\n+\n+    // Command line overrides, but doesn't erase old setting\n+    BOOST_CHECK(testArgs.IsArgNegated(\"-bar\"));\n+    BOOST_CHECK(testArgs.GetArg(\"-bar\", \"xxx\") == \"\");\n+    BOOST_CHECK(testArgs.GetArgs(\"-bar\").size() == 2\n+                && testArgs.GetArgs(\"-bar\").front() == \"\"\n+                && testArgs.GetArgs(\"-bar\").back() == \"0\");\n+}\n+\n+BOOST_AUTO_TEST_CASE(util_ReadConfigStream)\n+{\n+    const char *str_config =\n+       \"a=\\n\"\n+       \"b=1\\n\"\n+       \"ccc=argument\\n\"\n+       \"ccc=multiple\\n\"\n+       \"d=e\\n\"\n+       \"nofff=1\\n\"\n+       \"noggg=0\\n\"\n+       \"h=1\\n\"    // negated edge cases in config behave very oddly\n+       \"noh=1\\n\"\n+       \"noi=1\\n\"\n+       \"i=1\\n\";\n+\n+    TestArgsManager test_args;\n+\n+    test_args.ReadConfigString(str_config);\n+    // expectation: a, b, ccc, d, fff, ggg end up in map\n+\n+    BOOST_CHECK(test_args.GetMapArgs().size() == 8);\n+    BOOST_CHECK(test_args.GetMapMultiArgs().size() == 8);\n+\n+    BOOST_CHECK(test_args.GetMapArgs().count(\"-a\")\n+                && test_args.GetMapArgs().count(\"-b\")\n+                && test_args.GetMapArgs().count(\"-ccc\")\n+                && test_args.GetMapArgs().count(\"-d\")\n+                && test_args.GetMapArgs().count(\"-fff\")\n+                && test_args.GetMapArgs().count(\"-ggg\")\n+                && test_args.GetMapArgs().count(\"-h\")\n+                && test_args.GetMapArgs().count(\"-i\")\n+               );\n+\n+    BOOST_CHECK(test_args.IsArgSet(\"-a\")\n+                && test_args.IsArgSet(\"-b\")\n+                && test_args.IsArgSet(\"-ccc\")\n+                && test_args.IsArgSet(\"-d\")\n+                && test_args.IsArgSet(\"-fff\")\n+                && test_args.IsArgSet(\"-ggg\")\n+                && test_args.IsArgSet(\"-h\")\n+                && test_args.IsArgSet(\"-i\")\n+                && !test_args.IsArgSet(\"-zzz\")\n+               );\n+\n+    BOOST_CHECK(test_args.GetArg(\"-a\", \"xxx\") == \"\"\n+                && test_args.GetArg(\"-b\", \"xxx\") == \"1\"\n+                && test_args.GetArg(\"-ccc\", \"xxx\") == \"argument\"\n+                && test_args.GetArg(\"-d\", \"xxx\") == \"e\"\n+                && test_args.GetArg(\"-fff\", \"xxx\") == \"0\"\n+                && test_args.GetArg(\"-ggg\", \"xxx\") == \"1\"\n+                && test_args.GetArg(\"-h\", \"xxx\") == \"1\" // 1st value takes precedence\n+                && test_args.GetArg(\"-i\", \"xxx\") == \"0\" // 1st value takes precedence\n+                && test_args.GetArg(\"-zzz\", \"xxx\") == \"xxx\"\n+               );\n+\n+    for (int i = 0; i < 2; i++) {\n+        bool def = (i > 0);\n+        BOOST_CHECK(test_args.GetBoolArg(\"-a\", def)\n+                     && test_args.GetBoolArg(\"-b\", def)\n+                     && !test_args.GetBoolArg(\"-ccc\", def)\n+                     && !test_args.GetBoolArg(\"-d\", def)\n+                     && !test_args.GetBoolArg(\"-fff\", def)\n+                     && test_args.GetBoolArg(\"-ggg\", def)\n+                     && test_args.GetBoolArg(\"-h\", def)\n+                     && !test_args.GetBoolArg(\"-i\", def)\n+                     && test_args.GetBoolArg(\"-zzz\", def) == def\n+                   );\n+    }\n+\n+    BOOST_CHECK(test_args.GetArgs(\"-a\").size() == 1\n+                && test_args.GetArgs(\"-a\").front() == \"\");\n+    BOOST_CHECK(test_args.GetArgs(\"-ccc\").size() == 2\n+                && test_args.GetArgs(\"-ccc\").front() == \"argument\"\n+                && test_args.GetArgs(\"-ccc\").back() == \"multiple\");\n+    BOOST_CHECK(test_args.GetArgs(\"-fff\").size() == 1\n+                && test_args.GetArgs(\"-fff\").front() == \"0\");\n+    BOOST_CHECK(test_args.GetArgs(\"-nofff\").size() == 0);\n+    BOOST_CHECK(test_args.GetArgs(\"-h\").size() == 2",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12878#discussion_r179173614",
      "id" : 179173614,
      "original_commit_id" : "7edc29f0ce7ba0ea64dc0d64afcdc05bb88e4440",
      "original_position" : 143,
      "path" : "src/test/util_tests.cpp",
      "position" : null,
      "pull_request_review_id" : 109348348,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12878",
      "updated_at" : "2018-04-05T18:50:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/179173614",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12878#discussion_r179173942"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12878"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/179173942"
         }
      },
      "author_association" : "MEMBER",
      "body" : "> IsArgNegated==true when noggg=0\r\n\r\nyuck. Can we change that?",
      "commit_id" : "77a733a99a75bdd04ad94df830e5bdc8a6040959",
      "created_at" : "2018-04-04T15:03:10Z",
      "diff_hunk" : "@@ -253,16 +258,150 @@ BOOST_AUTO_TEST_CASE(util_GetBoolArgEdgeCases)\n {\n     // Test some awful edge cases that hopefully no user will ever exercise.\n     TestArgsManager testArgs;\n+\n+    // Params test\n     const char *argv_test[] = {\"ignored\", \"-nofoo\", \"-foo\", \"-nobar=0\"};\n     testArgs.ParseParameters(4, (char**)argv_test);\n \n     // This was passed twice, second one overrides the negative setting.\n     BOOST_CHECK(!testArgs.IsArgNegated(\"-foo\"));\n-    BOOST_CHECK(testArgs.GetBoolArg(\"-foo\", false) == true);\n+    BOOST_CHECK(testArgs.GetArg(\"-foo\", \"xxx\") == \"\");\n+\n+    // A double negative is a positive.\n+    BOOST_CHECK(testArgs.IsArgNegated(\"-bar\"));\n+    BOOST_CHECK(testArgs.GetArg(\"-bar\", \"xxx\") == \"1\");\n+\n+    // Config test\n+    const char *conf_test = \"nofoo=1\\nfoo=1\\nnobar=0\\n\";\n+    testArgs.ParseParameters(1, (char**)argv_test);\n+    testArgs.ReadConfigString(conf_test);\n+\n+    // This was passed twice, second one overrides the negative setting,\n+    // but not the value.\n+    BOOST_CHECK(!testArgs.IsArgNegated(\"-foo\"));\n+    BOOST_CHECK(testArgs.GetArg(\"-foo\", \"xxx\") == \"0\");\n \n     // A double negative is a positive.\n     BOOST_CHECK(testArgs.IsArgNegated(\"-bar\"));\n-    BOOST_CHECK(testArgs.GetBoolArg(\"-bar\", false) == true);\n+    BOOST_CHECK(testArgs.GetArg(\"-bar\", \"xxx\") == \"1\");\n+\n+    // Combined test\n+    const char *combo_test_args[] = {\"ignored\", \"-nofoo\", \"-bar\"};\n+    const char *combo_test_conf = \"foo=1\\nnobar=1\\n\";\n+    testArgs.ParseParameters(3, (char**)combo_test_args);\n+    testArgs.ReadConfigString(combo_test_conf);\n+\n+    // Command line overrides, but doesn't erase old setting\n+    BOOST_CHECK(!testArgs.IsArgNegated(\"-foo\"));\n+    BOOST_CHECK(testArgs.GetArg(\"-foo\", \"xxx\") == \"0\");\n+    BOOST_CHECK(testArgs.GetArgs(\"-foo\").size() == 2\n+                && testArgs.GetArgs(\"-foo\").front() == \"0\"\n+                && testArgs.GetArgs(\"-foo\").back() == \"1\");\n+\n+    // Command line overrides, but doesn't erase old setting\n+    BOOST_CHECK(testArgs.IsArgNegated(\"-bar\"));\n+    BOOST_CHECK(testArgs.GetArg(\"-bar\", \"xxx\") == \"\");\n+    BOOST_CHECK(testArgs.GetArgs(\"-bar\").size() == 2\n+                && testArgs.GetArgs(\"-bar\").front() == \"\"\n+                && testArgs.GetArgs(\"-bar\").back() == \"0\");\n+}\n+\n+BOOST_AUTO_TEST_CASE(util_ReadConfigStream)\n+{\n+    const char *str_config =\n+       \"a=\\n\"\n+       \"b=1\\n\"\n+       \"ccc=argument\\n\"\n+       \"ccc=multiple\\n\"\n+       \"d=e\\n\"\n+       \"nofff=1\\n\"\n+       \"noggg=0\\n\"\n+       \"h=1\\n\"    // negated edge cases in config behave very oddly\n+       \"noh=1\\n\"\n+       \"noi=1\\n\"\n+       \"i=1\\n\";\n+\n+    TestArgsManager test_args;\n+\n+    test_args.ReadConfigString(str_config);\n+    // expectation: a, b, ccc, d, fff, ggg end up in map\n+\n+    BOOST_CHECK(test_args.GetMapArgs().size() == 8);\n+    BOOST_CHECK(test_args.GetMapMultiArgs().size() == 8);\n+\n+    BOOST_CHECK(test_args.GetMapArgs().count(\"-a\")\n+                && test_args.GetMapArgs().count(\"-b\")\n+                && test_args.GetMapArgs().count(\"-ccc\")\n+                && test_args.GetMapArgs().count(\"-d\")\n+                && test_args.GetMapArgs().count(\"-fff\")\n+                && test_args.GetMapArgs().count(\"-ggg\")\n+                && test_args.GetMapArgs().count(\"-h\")\n+                && test_args.GetMapArgs().count(\"-i\")\n+               );\n+\n+    BOOST_CHECK(test_args.IsArgSet(\"-a\")\n+                && test_args.IsArgSet(\"-b\")\n+                && test_args.IsArgSet(\"-ccc\")\n+                && test_args.IsArgSet(\"-d\")\n+                && test_args.IsArgSet(\"-fff\")\n+                && test_args.IsArgSet(\"-ggg\")\n+                && test_args.IsArgSet(\"-h\")\n+                && test_args.IsArgSet(\"-i\")\n+                && !test_args.IsArgSet(\"-zzz\")\n+               );\n+\n+    BOOST_CHECK(test_args.GetArg(\"-a\", \"xxx\") == \"\"\n+                && test_args.GetArg(\"-b\", \"xxx\") == \"1\"\n+                && test_args.GetArg(\"-ccc\", \"xxx\") == \"argument\"\n+                && test_args.GetArg(\"-d\", \"xxx\") == \"e\"\n+                && test_args.GetArg(\"-fff\", \"xxx\") == \"0\"\n+                && test_args.GetArg(\"-ggg\", \"xxx\") == \"1\"\n+                && test_args.GetArg(\"-h\", \"xxx\") == \"1\" // 1st value takes precedence\n+                && test_args.GetArg(\"-i\", \"xxx\") == \"0\" // 1st value takes precedence\n+                && test_args.GetArg(\"-zzz\", \"xxx\") == \"xxx\"\n+               );\n+\n+    for (int i = 0; i < 2; i++) {\n+        bool def = (i > 0);\n+        BOOST_CHECK(test_args.GetBoolArg(\"-a\", def)\n+                     && test_args.GetBoolArg(\"-b\", def)\n+                     && !test_args.GetBoolArg(\"-ccc\", def)\n+                     && !test_args.GetBoolArg(\"-d\", def)\n+                     && !test_args.GetBoolArg(\"-fff\", def)\n+                     && test_args.GetBoolArg(\"-ggg\", def)\n+                     && test_args.GetBoolArg(\"-h\", def)\n+                     && !test_args.GetBoolArg(\"-i\", def)\n+                     && test_args.GetBoolArg(\"-zzz\", def) == def\n+                   );\n+    }\n+\n+    BOOST_CHECK(test_args.GetArgs(\"-a\").size() == 1\n+                && test_args.GetArgs(\"-a\").front() == \"\");\n+    BOOST_CHECK(test_args.GetArgs(\"-ccc\").size() == 2\n+                && test_args.GetArgs(\"-ccc\").front() == \"argument\"\n+                && test_args.GetArgs(\"-ccc\").back() == \"multiple\");\n+    BOOST_CHECK(test_args.GetArgs(\"-fff\").size() == 1\n+                && test_args.GetArgs(\"-fff\").front() == \"0\");\n+    BOOST_CHECK(test_args.GetArgs(\"-nofff\").size() == 0);\n+    BOOST_CHECK(test_args.GetArgs(\"-h\").size() == 2\n+                && test_args.GetArgs(\"-h\").front() == \"1\"\n+                && test_args.GetArgs(\"-h\").back() == \"0\");\n+    BOOST_CHECK(test_args.GetArgs(\"-noh\").size() == 0);\n+    BOOST_CHECK(test_args.GetArgs(\"-i\").size() == 2\n+                && test_args.GetArgs(\"-i\").front() == \"0\"\n+                && test_args.GetArgs(\"-i\").back() == \"1\");\n+    BOOST_CHECK(test_args.GetArgs(\"-noi\").size() == 0);\n+    BOOST_CHECK(test_args.GetArgs(\"-zzz\").size() == 0);\n+\n+    BOOST_CHECK(!test_args.IsArgNegated(\"-a\"));\n+    BOOST_CHECK(!test_args.IsArgNegated(\"-b\"));\n+    BOOST_CHECK(!test_args.IsArgNegated(\"-ccc\"));\n+    BOOST_CHECK(!test_args.IsArgNegated(\"-d\"));\n+    BOOST_CHECK(test_args.IsArgNegated(\"-fff\"));\n+    BOOST_CHECK(test_args.IsArgNegated(\"-ggg\")); // IsArgNegated==true when noggg=0",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12878#discussion_r179173942",
      "id" : 179173942,
      "original_commit_id" : "7edc29f0ce7ba0ea64dc0d64afcdc05bb88e4440",
      "original_position" : 158,
      "path" : "src/test/util_tests.cpp",
      "position" : 162,
      "pull_request_review_id" : 109348348,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12878",
      "updated_at" : "2018-04-05T18:50:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/179173942",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12878#discussion_r179296164"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12878"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/179296164"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "It's changed in #11862 (and easy to change on its own as well). I think it makes sense for this PR to just refactor/add tests rather than change functionality though.",
      "commit_id" : "77a733a99a75bdd04ad94df830e5bdc8a6040959",
      "created_at" : "2018-04-04T21:59:49Z",
      "diff_hunk" : "@@ -253,16 +258,150 @@ BOOST_AUTO_TEST_CASE(util_GetBoolArgEdgeCases)\n {\n     // Test some awful edge cases that hopefully no user will ever exercise.\n     TestArgsManager testArgs;\n+\n+    // Params test\n     const char *argv_test[] = {\"ignored\", \"-nofoo\", \"-foo\", \"-nobar=0\"};\n     testArgs.ParseParameters(4, (char**)argv_test);\n \n     // This was passed twice, second one overrides the negative setting.\n     BOOST_CHECK(!testArgs.IsArgNegated(\"-foo\"));\n-    BOOST_CHECK(testArgs.GetBoolArg(\"-foo\", false) == true);\n+    BOOST_CHECK(testArgs.GetArg(\"-foo\", \"xxx\") == \"\");\n+\n+    // A double negative is a positive.\n+    BOOST_CHECK(testArgs.IsArgNegated(\"-bar\"));\n+    BOOST_CHECK(testArgs.GetArg(\"-bar\", \"xxx\") == \"1\");\n+\n+    // Config test\n+    const char *conf_test = \"nofoo=1\\nfoo=1\\nnobar=0\\n\";\n+    testArgs.ParseParameters(1, (char**)argv_test);\n+    testArgs.ReadConfigString(conf_test);\n+\n+    // This was passed twice, second one overrides the negative setting,\n+    // but not the value.\n+    BOOST_CHECK(!testArgs.IsArgNegated(\"-foo\"));\n+    BOOST_CHECK(testArgs.GetArg(\"-foo\", \"xxx\") == \"0\");\n \n     // A double negative is a positive.\n     BOOST_CHECK(testArgs.IsArgNegated(\"-bar\"));\n-    BOOST_CHECK(testArgs.GetBoolArg(\"-bar\", false) == true);\n+    BOOST_CHECK(testArgs.GetArg(\"-bar\", \"xxx\") == \"1\");\n+\n+    // Combined test\n+    const char *combo_test_args[] = {\"ignored\", \"-nofoo\", \"-bar\"};\n+    const char *combo_test_conf = \"foo=1\\nnobar=1\\n\";\n+    testArgs.ParseParameters(3, (char**)combo_test_args);\n+    testArgs.ReadConfigString(combo_test_conf);\n+\n+    // Command line overrides, but doesn't erase old setting\n+    BOOST_CHECK(!testArgs.IsArgNegated(\"-foo\"));\n+    BOOST_CHECK(testArgs.GetArg(\"-foo\", \"xxx\") == \"0\");\n+    BOOST_CHECK(testArgs.GetArgs(\"-foo\").size() == 2\n+                && testArgs.GetArgs(\"-foo\").front() == \"0\"\n+                && testArgs.GetArgs(\"-foo\").back() == \"1\");\n+\n+    // Command line overrides, but doesn't erase old setting\n+    BOOST_CHECK(testArgs.IsArgNegated(\"-bar\"));\n+    BOOST_CHECK(testArgs.GetArg(\"-bar\", \"xxx\") == \"\");\n+    BOOST_CHECK(testArgs.GetArgs(\"-bar\").size() == 2\n+                && testArgs.GetArgs(\"-bar\").front() == \"\"\n+                && testArgs.GetArgs(\"-bar\").back() == \"0\");\n+}\n+\n+BOOST_AUTO_TEST_CASE(util_ReadConfigStream)\n+{\n+    const char *str_config =\n+       \"a=\\n\"\n+       \"b=1\\n\"\n+       \"ccc=argument\\n\"\n+       \"ccc=multiple\\n\"\n+       \"d=e\\n\"\n+       \"nofff=1\\n\"\n+       \"noggg=0\\n\"\n+       \"h=1\\n\"    // negated edge cases in config behave very oddly\n+       \"noh=1\\n\"\n+       \"noi=1\\n\"\n+       \"i=1\\n\";\n+\n+    TestArgsManager test_args;\n+\n+    test_args.ReadConfigString(str_config);\n+    // expectation: a, b, ccc, d, fff, ggg end up in map\n+\n+    BOOST_CHECK(test_args.GetMapArgs().size() == 8);\n+    BOOST_CHECK(test_args.GetMapMultiArgs().size() == 8);\n+\n+    BOOST_CHECK(test_args.GetMapArgs().count(\"-a\")\n+                && test_args.GetMapArgs().count(\"-b\")\n+                && test_args.GetMapArgs().count(\"-ccc\")\n+                && test_args.GetMapArgs().count(\"-d\")\n+                && test_args.GetMapArgs().count(\"-fff\")\n+                && test_args.GetMapArgs().count(\"-ggg\")\n+                && test_args.GetMapArgs().count(\"-h\")\n+                && test_args.GetMapArgs().count(\"-i\")\n+               );\n+\n+    BOOST_CHECK(test_args.IsArgSet(\"-a\")\n+                && test_args.IsArgSet(\"-b\")\n+                && test_args.IsArgSet(\"-ccc\")\n+                && test_args.IsArgSet(\"-d\")\n+                && test_args.IsArgSet(\"-fff\")\n+                && test_args.IsArgSet(\"-ggg\")\n+                && test_args.IsArgSet(\"-h\")\n+                && test_args.IsArgSet(\"-i\")\n+                && !test_args.IsArgSet(\"-zzz\")\n+               );\n+\n+    BOOST_CHECK(test_args.GetArg(\"-a\", \"xxx\") == \"\"\n+                && test_args.GetArg(\"-b\", \"xxx\") == \"1\"\n+                && test_args.GetArg(\"-ccc\", \"xxx\") == \"argument\"\n+                && test_args.GetArg(\"-d\", \"xxx\") == \"e\"\n+                && test_args.GetArg(\"-fff\", \"xxx\") == \"0\"\n+                && test_args.GetArg(\"-ggg\", \"xxx\") == \"1\"\n+                && test_args.GetArg(\"-h\", \"xxx\") == \"1\" // 1st value takes precedence\n+                && test_args.GetArg(\"-i\", \"xxx\") == \"0\" // 1st value takes precedence\n+                && test_args.GetArg(\"-zzz\", \"xxx\") == \"xxx\"\n+               );\n+\n+    for (int i = 0; i < 2; i++) {\n+        bool def = (i > 0);\n+        BOOST_CHECK(test_args.GetBoolArg(\"-a\", def)\n+                     && test_args.GetBoolArg(\"-b\", def)\n+                     && !test_args.GetBoolArg(\"-ccc\", def)\n+                     && !test_args.GetBoolArg(\"-d\", def)\n+                     && !test_args.GetBoolArg(\"-fff\", def)\n+                     && test_args.GetBoolArg(\"-ggg\", def)\n+                     && test_args.GetBoolArg(\"-h\", def)\n+                     && !test_args.GetBoolArg(\"-i\", def)\n+                     && test_args.GetBoolArg(\"-zzz\", def) == def\n+                   );\n+    }\n+\n+    BOOST_CHECK(test_args.GetArgs(\"-a\").size() == 1\n+                && test_args.GetArgs(\"-a\").front() == \"\");\n+    BOOST_CHECK(test_args.GetArgs(\"-ccc\").size() == 2\n+                && test_args.GetArgs(\"-ccc\").front() == \"argument\"\n+                && test_args.GetArgs(\"-ccc\").back() == \"multiple\");\n+    BOOST_CHECK(test_args.GetArgs(\"-fff\").size() == 1\n+                && test_args.GetArgs(\"-fff\").front() == \"0\");\n+    BOOST_CHECK(test_args.GetArgs(\"-nofff\").size() == 0);\n+    BOOST_CHECK(test_args.GetArgs(\"-h\").size() == 2\n+                && test_args.GetArgs(\"-h\").front() == \"1\"\n+                && test_args.GetArgs(\"-h\").back() == \"0\");\n+    BOOST_CHECK(test_args.GetArgs(\"-noh\").size() == 0);\n+    BOOST_CHECK(test_args.GetArgs(\"-i\").size() == 2\n+                && test_args.GetArgs(\"-i\").front() == \"0\"\n+                && test_args.GetArgs(\"-i\").back() == \"1\");\n+    BOOST_CHECK(test_args.GetArgs(\"-noi\").size() == 0);\n+    BOOST_CHECK(test_args.GetArgs(\"-zzz\").size() == 0);\n+\n+    BOOST_CHECK(!test_args.IsArgNegated(\"-a\"));\n+    BOOST_CHECK(!test_args.IsArgNegated(\"-b\"));\n+    BOOST_CHECK(!test_args.IsArgNegated(\"-ccc\"));\n+    BOOST_CHECK(!test_args.IsArgNegated(\"-d\"));\n+    BOOST_CHECK(test_args.IsArgNegated(\"-fff\"));\n+    BOOST_CHECK(test_args.IsArgNegated(\"-ggg\")); // IsArgNegated==true when noggg=0",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12878#discussion_r179296164",
      "id" : 179296164,
      "in_reply_to_id" : 179173942,
      "original_commit_id" : "7edc29f0ce7ba0ea64dc0d64afcdc05bb88e4440",
      "original_position" : 158,
      "path" : "src/test/util_tests.cpp",
      "position" : 162,
      "pull_request_review_id" : 109515905,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12878",
      "updated_at" : "2018-04-05T18:50:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/179296164",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12878#discussion_r179311284"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12878"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/179311284"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Yeah, it is. But no point to `auto` instead of `bool` :)",
      "commit_id" : "77a733a99a75bdd04ad94df830e5bdc8a6040959",
      "created_at" : "2018-04-04T23:19:10Z",
      "diff_hunk" : "@@ -253,16 +258,150 @@ BOOST_AUTO_TEST_CASE(util_GetBoolArgEdgeCases)\n {\n     // Test some awful edge cases that hopefully no user will ever exercise.\n     TestArgsManager testArgs;\n+\n+    // Params test\n     const char *argv_test[] = {\"ignored\", \"-nofoo\", \"-foo\", \"-nobar=0\"};\n     testArgs.ParseParameters(4, (char**)argv_test);\n \n     // This was passed twice, second one overrides the negative setting.\n     BOOST_CHECK(!testArgs.IsArgNegated(\"-foo\"));\n-    BOOST_CHECK(testArgs.GetBoolArg(\"-foo\", false) == true);\n+    BOOST_CHECK(testArgs.GetArg(\"-foo\", \"xxx\") == \"\");\n+\n+    // A double negative is a positive.\n+    BOOST_CHECK(testArgs.IsArgNegated(\"-bar\"));\n+    BOOST_CHECK(testArgs.GetArg(\"-bar\", \"xxx\") == \"1\");\n+\n+    // Config test\n+    const char *conf_test = \"nofoo=1\\nfoo=1\\nnobar=0\\n\";\n+    testArgs.ParseParameters(1, (char**)argv_test);\n+    testArgs.ReadConfigString(conf_test);\n+\n+    // This was passed twice, second one overrides the negative setting,\n+    // but not the value.\n+    BOOST_CHECK(!testArgs.IsArgNegated(\"-foo\"));\n+    BOOST_CHECK(testArgs.GetArg(\"-foo\", \"xxx\") == \"0\");\n \n     // A double negative is a positive.\n     BOOST_CHECK(testArgs.IsArgNegated(\"-bar\"));\n-    BOOST_CHECK(testArgs.GetBoolArg(\"-bar\", false) == true);\n+    BOOST_CHECK(testArgs.GetArg(\"-bar\", \"xxx\") == \"1\");\n+\n+    // Combined test\n+    const char *combo_test_args[] = {\"ignored\", \"-nofoo\", \"-bar\"};\n+    const char *combo_test_conf = \"foo=1\\nnobar=1\\n\";\n+    testArgs.ParseParameters(3, (char**)combo_test_args);\n+    testArgs.ReadConfigString(combo_test_conf);\n+\n+    // Command line overrides, but doesn't erase old setting\n+    BOOST_CHECK(!testArgs.IsArgNegated(\"-foo\"));\n+    BOOST_CHECK(testArgs.GetArg(\"-foo\", \"xxx\") == \"0\");\n+    BOOST_CHECK(testArgs.GetArgs(\"-foo\").size() == 2\n+                && testArgs.GetArgs(\"-foo\").front() == \"0\"\n+                && testArgs.GetArgs(\"-foo\").back() == \"1\");\n+\n+    // Command line overrides, but doesn't erase old setting\n+    BOOST_CHECK(testArgs.IsArgNegated(\"-bar\"));\n+    BOOST_CHECK(testArgs.GetArg(\"-bar\", \"xxx\") == \"\");\n+    BOOST_CHECK(testArgs.GetArgs(\"-bar\").size() == 2\n+                && testArgs.GetArgs(\"-bar\").front() == \"\"\n+                && testArgs.GetArgs(\"-bar\").back() == \"0\");\n+}\n+\n+BOOST_AUTO_TEST_CASE(util_ReadConfigStream)\n+{\n+    const char *str_config =\n+       \"a=\\n\"\n+       \"b=1\\n\"\n+       \"ccc=argument\\n\"\n+       \"ccc=multiple\\n\"\n+       \"d=e\\n\"\n+       \"nofff=1\\n\"\n+       \"noggg=0\\n\"\n+       \"h=1\\n\"    // negated edge cases in config behave very oddly\n+       \"noh=1\\n\"\n+       \"noi=1\\n\"\n+       \"i=1\\n\";\n+\n+    TestArgsManager test_args;\n+\n+    test_args.ReadConfigString(str_config);\n+    // expectation: a, b, ccc, d, fff, ggg end up in map\n+\n+    BOOST_CHECK(test_args.GetMapArgs().size() == 8);\n+    BOOST_CHECK(test_args.GetMapMultiArgs().size() == 8);\n+\n+    BOOST_CHECK(test_args.GetMapArgs().count(\"-a\")\n+                && test_args.GetMapArgs().count(\"-b\")\n+                && test_args.GetMapArgs().count(\"-ccc\")\n+                && test_args.GetMapArgs().count(\"-d\")\n+                && test_args.GetMapArgs().count(\"-fff\")\n+                && test_args.GetMapArgs().count(\"-ggg\")\n+                && test_args.GetMapArgs().count(\"-h\")\n+                && test_args.GetMapArgs().count(\"-i\")\n+               );\n+\n+    BOOST_CHECK(test_args.IsArgSet(\"-a\")\n+                && test_args.IsArgSet(\"-b\")\n+                && test_args.IsArgSet(\"-ccc\")\n+                && test_args.IsArgSet(\"-d\")\n+                && test_args.IsArgSet(\"-fff\")\n+                && test_args.IsArgSet(\"-ggg\")\n+                && test_args.IsArgSet(\"-h\")\n+                && test_args.IsArgSet(\"-i\")\n+                && !test_args.IsArgSet(\"-zzz\")\n+               );\n+\n+    BOOST_CHECK(test_args.GetArg(\"-a\", \"xxx\") == \"\"\n+                && test_args.GetArg(\"-b\", \"xxx\") == \"1\"\n+                && test_args.GetArg(\"-ccc\", \"xxx\") == \"argument\"\n+                && test_args.GetArg(\"-d\", \"xxx\") == \"e\"\n+                && test_args.GetArg(\"-fff\", \"xxx\") == \"0\"\n+                && test_args.GetArg(\"-ggg\", \"xxx\") == \"1\"\n+                && test_args.GetArg(\"-h\", \"xxx\") == \"1\" // 1st value takes precedence\n+                && test_args.GetArg(\"-i\", \"xxx\") == \"0\" // 1st value takes precedence\n+                && test_args.GetArg(\"-zzz\", \"xxx\") == \"xxx\"\n+               );\n+\n+    for (int i = 0; i < 2; i++) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12878#discussion_r179311284",
      "id" : 179311284,
      "in_reply_to_id" : 179170959,
      "original_commit_id" : "7edc29f0ce7ba0ea64dc0d64afcdc05bb88e4440",
      "original_position" : 121,
      "path" : "src/test/util_tests.cpp",
      "position" : null,
      "pull_request_review_id" : 109533126,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12878",
      "updated_at" : "2018-04-05T18:50:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/179311284",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Bumped to address @jnewbery's suggestions. Unsquashed changes are at https://github.com/ajtowns/bitcoin/commits/netconf-refactor-track with commit 26d3faaa28c794b48df2a12cdb4a9a71de3d1a96 here having the same tree  as commit 3467454beff8e7b2df87f9a0e29391eb14a8e6c3 on the -track branch:\r\n\r\n```\r\n$ for a in netconf-refactor{,-track}; do git log -1 --pretty=\"%h -> %T\" $a; done\r\n26d3faaa28 -> ef5b209a05c28afb98e0ce8e05e9cbc54dfebeaf\r\n3467454bef -> ef5b209a05c28afb98e0ce8e05e9cbc54dfebeaf\r\n```",
      "created_at" : "2018-04-04T23:52:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12878#issuecomment-378780320",
      "id" : 378780320,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12878",
      "updated_at" : "2018-04-04T23:52:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/378780320",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12878#discussion_r179330564"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12878"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/179330564"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Could just call this `ChainName` given `gArgs` is all about the command line / config files already.",
      "commit_id" : "77a733a99a75bdd04ad94df830e5bdc8a6040959",
      "created_at" : "2018-04-05T01:34:05Z",
      "diff_hunk" : "@@ -735,35 +735,55 @@ fs::path GetConfigFile(const std::string& confPath)\n     return AbsPathForConfigVal(fs::path(confPath), false);\n }\n \n-void ArgsManager::ReadConfigFile(const std::string& confPath)\n+void ArgsManager::ReadConfigStream(std::istream& stream)\n {\n-    fs::ifstream streamConfig(GetConfigFile(confPath));\n-    if (!streamConfig.good())\n-        return; // No bitcoin.conf file is OK\n+    LOCK(cs_args);\n \n+    std::set<std::string> setOptions;\n+    setOptions.insert(\"*\");\n+\n+    for (boost::program_options::detail::config_file_iterator it(stream, setOptions), end; it != end; ++it)\n     {\n-        LOCK(cs_args);\n-        std::set<std::string> setOptions;\n-        setOptions.insert(\"*\");\n+        // Don't overwrite existing settings so command line settings override bitcoin.conf\n+        std::string strKey = std::string(\"-\") + it->string_key;\n+        std::string strValue = it->value[0];\n+        InterpretNegatedOption(strKey, strValue);\n+        if (mapArgs.count(strKey) == 0)\n+            mapArgs[strKey] = strValue;\n+        mapMultiArgs[strKey].push_back(strValue);\n+    }\n+}\n \n-        for (boost::program_options::detail::config_file_iterator it(streamConfig, setOptions), end; it != end; ++it)\n-        {\n-            // Don't overwrite existing settings so command line settings override bitcoin.conf\n-            std::string strKey = std::string(\"-\") + it->string_key;\n-            std::string strValue = it->value[0];\n-            InterpretNegatedOption(strKey, strValue);\n-            if (mapArgs.count(strKey) == 0)\n-                mapArgs[strKey] = strValue;\n-            mapMultiArgs[strKey].push_back(strValue);\n-        }\n+void ArgsManager::ReadConfigFile(const std::string& confPath)\n+{\n+    fs::ifstream stream(GetConfigFile(confPath));\n+\n+    // ok to not have a config file\n+    if (stream.good()) {\n+        ReadConfigStream(stream);\n     }\n+\n     // If datadir is changed in .conf file:\n     ClearDatadirCache();\n     if (!fs::is_directory(GetDataDir(false))) {\n         throw std::runtime_error(strprintf(\"specified data directory \\\"%s\\\" does not exist.\", gArgs.GetArg(\"-datadir\", \"\").c_str()));\n     }\n }\n \n+std::string ArgsManager::ChainNameFromCommandLine() const",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12878#discussion_r179330564",
      "id" : 179330564,
      "original_commit_id" : "26d3faaa28c794b48df2a12cdb4a9a71de3d1a96",
      "original_position" : 56,
      "path" : "src/util.cpp",
      "position" : null,
      "pull_request_review_id" : 109554929,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12878",
      "updated_at" : "2018-04-05T18:50:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/179330564",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/5470?v=4",
         "events_url" : "https://api.github.com/users/Empact/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Empact/followers",
         "following_url" : "https://api.github.com/users/Empact/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Empact/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Empact",
         "id" : 5470,
         "login" : "Empact",
         "organizations_url" : "https://api.github.com/users/Empact/orgs",
         "received_events_url" : "https://api.github.com/users/Empact/received_events",
         "repos_url" : "https://api.github.com/users/Empact/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Empact/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Empact/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Empact"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12878#discussion_r179332381"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12878"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/179332381"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : ":+1:  Probably GetChainName() would be slightly more consistent...",
      "commit_id" : "77a733a99a75bdd04ad94df830e5bdc8a6040959",
      "created_at" : "2018-04-05T01:51:00Z",
      "diff_hunk" : "@@ -735,35 +735,55 @@ fs::path GetConfigFile(const std::string& confPath)\n     return AbsPathForConfigVal(fs::path(confPath), false);\n }\n \n-void ArgsManager::ReadConfigFile(const std::string& confPath)\n+void ArgsManager::ReadConfigStream(std::istream& stream)\n {\n-    fs::ifstream streamConfig(GetConfigFile(confPath));\n-    if (!streamConfig.good())\n-        return; // No bitcoin.conf file is OK\n+    LOCK(cs_args);\n \n+    std::set<std::string> setOptions;\n+    setOptions.insert(\"*\");\n+\n+    for (boost::program_options::detail::config_file_iterator it(stream, setOptions), end; it != end; ++it)\n     {\n-        LOCK(cs_args);\n-        std::set<std::string> setOptions;\n-        setOptions.insert(\"*\");\n+        // Don't overwrite existing settings so command line settings override bitcoin.conf\n+        std::string strKey = std::string(\"-\") + it->string_key;\n+        std::string strValue = it->value[0];\n+        InterpretNegatedOption(strKey, strValue);\n+        if (mapArgs.count(strKey) == 0)\n+            mapArgs[strKey] = strValue;\n+        mapMultiArgs[strKey].push_back(strValue);\n+    }\n+}\n \n-        for (boost::program_options::detail::config_file_iterator it(streamConfig, setOptions), end; it != end; ++it)\n-        {\n-            // Don't overwrite existing settings so command line settings override bitcoin.conf\n-            std::string strKey = std::string(\"-\") + it->string_key;\n-            std::string strValue = it->value[0];\n-            InterpretNegatedOption(strKey, strValue);\n-            if (mapArgs.count(strKey) == 0)\n-                mapArgs[strKey] = strValue;\n-            mapMultiArgs[strKey].push_back(strValue);\n-        }\n+void ArgsManager::ReadConfigFile(const std::string& confPath)\n+{\n+    fs::ifstream stream(GetConfigFile(confPath));\n+\n+    // ok to not have a config file\n+    if (stream.good()) {\n+        ReadConfigStream(stream);\n     }\n+\n     // If datadir is changed in .conf file:\n     ClearDatadirCache();\n     if (!fs::is_directory(GetDataDir(false))) {\n         throw std::runtime_error(strprintf(\"specified data directory \\\"%s\\\" does not exist.\", gArgs.GetArg(\"-datadir\", \"\").c_str()));\n     }\n }\n \n+std::string ArgsManager::ChainNameFromCommandLine() const",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12878#discussion_r179332381",
      "id" : 179332381,
      "in_reply_to_id" : 179330564,
      "original_commit_id" : "26d3faaa28c794b48df2a12cdb4a9a71de3d1a96",
      "original_position" : 56,
      "path" : "src/util.cpp",
      "position" : null,
      "pull_request_review_id" : 109556961,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12878",
      "updated_at" : "2018-04-05T18:50:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/179332381",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12878#discussion_r179492185"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12878"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/179492185"
         }
      },
      "author_association" : "MEMBER",
      "body" : "sounds good. Keep this PR as refactor only and do behaviour changes in #11862.",
      "commit_id" : "77a733a99a75bdd04ad94df830e5bdc8a6040959",
      "created_at" : "2018-04-05T14:56:46Z",
      "diff_hunk" : "@@ -253,16 +258,150 @@ BOOST_AUTO_TEST_CASE(util_GetBoolArgEdgeCases)\n {\n     // Test some awful edge cases that hopefully no user will ever exercise.\n     TestArgsManager testArgs;\n+\n+    // Params test\n     const char *argv_test[] = {\"ignored\", \"-nofoo\", \"-foo\", \"-nobar=0\"};\n     testArgs.ParseParameters(4, (char**)argv_test);\n \n     // This was passed twice, second one overrides the negative setting.\n     BOOST_CHECK(!testArgs.IsArgNegated(\"-foo\"));\n-    BOOST_CHECK(testArgs.GetBoolArg(\"-foo\", false) == true);\n+    BOOST_CHECK(testArgs.GetArg(\"-foo\", \"xxx\") == \"\");\n+\n+    // A double negative is a positive.\n+    BOOST_CHECK(testArgs.IsArgNegated(\"-bar\"));\n+    BOOST_CHECK(testArgs.GetArg(\"-bar\", \"xxx\") == \"1\");\n+\n+    // Config test\n+    const char *conf_test = \"nofoo=1\\nfoo=1\\nnobar=0\\n\";\n+    testArgs.ParseParameters(1, (char**)argv_test);\n+    testArgs.ReadConfigString(conf_test);\n+\n+    // This was passed twice, second one overrides the negative setting,\n+    // but not the value.\n+    BOOST_CHECK(!testArgs.IsArgNegated(\"-foo\"));\n+    BOOST_CHECK(testArgs.GetArg(\"-foo\", \"xxx\") == \"0\");\n \n     // A double negative is a positive.\n     BOOST_CHECK(testArgs.IsArgNegated(\"-bar\"));\n-    BOOST_CHECK(testArgs.GetBoolArg(\"-bar\", false) == true);\n+    BOOST_CHECK(testArgs.GetArg(\"-bar\", \"xxx\") == \"1\");\n+\n+    // Combined test\n+    const char *combo_test_args[] = {\"ignored\", \"-nofoo\", \"-bar\"};\n+    const char *combo_test_conf = \"foo=1\\nnobar=1\\n\";\n+    testArgs.ParseParameters(3, (char**)combo_test_args);\n+    testArgs.ReadConfigString(combo_test_conf);\n+\n+    // Command line overrides, but doesn't erase old setting\n+    BOOST_CHECK(!testArgs.IsArgNegated(\"-foo\"));\n+    BOOST_CHECK(testArgs.GetArg(\"-foo\", \"xxx\") == \"0\");\n+    BOOST_CHECK(testArgs.GetArgs(\"-foo\").size() == 2\n+                && testArgs.GetArgs(\"-foo\").front() == \"0\"\n+                && testArgs.GetArgs(\"-foo\").back() == \"1\");\n+\n+    // Command line overrides, but doesn't erase old setting\n+    BOOST_CHECK(testArgs.IsArgNegated(\"-bar\"));\n+    BOOST_CHECK(testArgs.GetArg(\"-bar\", \"xxx\") == \"\");\n+    BOOST_CHECK(testArgs.GetArgs(\"-bar\").size() == 2\n+                && testArgs.GetArgs(\"-bar\").front() == \"\"\n+                && testArgs.GetArgs(\"-bar\").back() == \"0\");\n+}\n+\n+BOOST_AUTO_TEST_CASE(util_ReadConfigStream)\n+{\n+    const char *str_config =\n+       \"a=\\n\"\n+       \"b=1\\n\"\n+       \"ccc=argument\\n\"\n+       \"ccc=multiple\\n\"\n+       \"d=e\\n\"\n+       \"nofff=1\\n\"\n+       \"noggg=0\\n\"\n+       \"h=1\\n\"    // negated edge cases in config behave very oddly\n+       \"noh=1\\n\"\n+       \"noi=1\\n\"\n+       \"i=1\\n\";\n+\n+    TestArgsManager test_args;\n+\n+    test_args.ReadConfigString(str_config);\n+    // expectation: a, b, ccc, d, fff, ggg end up in map\n+\n+    BOOST_CHECK(test_args.GetMapArgs().size() == 8);\n+    BOOST_CHECK(test_args.GetMapMultiArgs().size() == 8);\n+\n+    BOOST_CHECK(test_args.GetMapArgs().count(\"-a\")\n+                && test_args.GetMapArgs().count(\"-b\")\n+                && test_args.GetMapArgs().count(\"-ccc\")\n+                && test_args.GetMapArgs().count(\"-d\")\n+                && test_args.GetMapArgs().count(\"-fff\")\n+                && test_args.GetMapArgs().count(\"-ggg\")\n+                && test_args.GetMapArgs().count(\"-h\")\n+                && test_args.GetMapArgs().count(\"-i\")\n+               );\n+\n+    BOOST_CHECK(test_args.IsArgSet(\"-a\")\n+                && test_args.IsArgSet(\"-b\")\n+                && test_args.IsArgSet(\"-ccc\")\n+                && test_args.IsArgSet(\"-d\")\n+                && test_args.IsArgSet(\"-fff\")\n+                && test_args.IsArgSet(\"-ggg\")\n+                && test_args.IsArgSet(\"-h\")\n+                && test_args.IsArgSet(\"-i\")\n+                && !test_args.IsArgSet(\"-zzz\")\n+               );\n+\n+    BOOST_CHECK(test_args.GetArg(\"-a\", \"xxx\") == \"\"\n+                && test_args.GetArg(\"-b\", \"xxx\") == \"1\"\n+                && test_args.GetArg(\"-ccc\", \"xxx\") == \"argument\"\n+                && test_args.GetArg(\"-d\", \"xxx\") == \"e\"\n+                && test_args.GetArg(\"-fff\", \"xxx\") == \"0\"\n+                && test_args.GetArg(\"-ggg\", \"xxx\") == \"1\"\n+                && test_args.GetArg(\"-h\", \"xxx\") == \"1\" // 1st value takes precedence\n+                && test_args.GetArg(\"-i\", \"xxx\") == \"0\" // 1st value takes precedence\n+                && test_args.GetArg(\"-zzz\", \"xxx\") == \"xxx\"\n+               );\n+\n+    for (int i = 0; i < 2; i++) {\n+        bool def = (i > 0);\n+        BOOST_CHECK(test_args.GetBoolArg(\"-a\", def)\n+                     && test_args.GetBoolArg(\"-b\", def)\n+                     && !test_args.GetBoolArg(\"-ccc\", def)\n+                     && !test_args.GetBoolArg(\"-d\", def)\n+                     && !test_args.GetBoolArg(\"-fff\", def)\n+                     && test_args.GetBoolArg(\"-ggg\", def)\n+                     && test_args.GetBoolArg(\"-h\", def)\n+                     && !test_args.GetBoolArg(\"-i\", def)\n+                     && test_args.GetBoolArg(\"-zzz\", def) == def\n+                   );\n+    }\n+\n+    BOOST_CHECK(test_args.GetArgs(\"-a\").size() == 1\n+                && test_args.GetArgs(\"-a\").front() == \"\");\n+    BOOST_CHECK(test_args.GetArgs(\"-ccc\").size() == 2\n+                && test_args.GetArgs(\"-ccc\").front() == \"argument\"\n+                && test_args.GetArgs(\"-ccc\").back() == \"multiple\");\n+    BOOST_CHECK(test_args.GetArgs(\"-fff\").size() == 1\n+                && test_args.GetArgs(\"-fff\").front() == \"0\");\n+    BOOST_CHECK(test_args.GetArgs(\"-nofff\").size() == 0);\n+    BOOST_CHECK(test_args.GetArgs(\"-h\").size() == 2\n+                && test_args.GetArgs(\"-h\").front() == \"1\"\n+                && test_args.GetArgs(\"-h\").back() == \"0\");\n+    BOOST_CHECK(test_args.GetArgs(\"-noh\").size() == 0);\n+    BOOST_CHECK(test_args.GetArgs(\"-i\").size() == 2\n+                && test_args.GetArgs(\"-i\").front() == \"0\"\n+                && test_args.GetArgs(\"-i\").back() == \"1\");\n+    BOOST_CHECK(test_args.GetArgs(\"-noi\").size() == 0);\n+    BOOST_CHECK(test_args.GetArgs(\"-zzz\").size() == 0);\n+\n+    BOOST_CHECK(!test_args.IsArgNegated(\"-a\"));\n+    BOOST_CHECK(!test_args.IsArgNegated(\"-b\"));\n+    BOOST_CHECK(!test_args.IsArgNegated(\"-ccc\"));\n+    BOOST_CHECK(!test_args.IsArgNegated(\"-d\"));\n+    BOOST_CHECK(test_args.IsArgNegated(\"-fff\"));\n+    BOOST_CHECK(test_args.IsArgNegated(\"-ggg\")); // IsArgNegated==true when noggg=0",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12878#discussion_r179492185",
      "id" : 179492185,
      "in_reply_to_id" : 179173942,
      "original_commit_id" : "7edc29f0ce7ba0ea64dc0d64afcdc05bb88e4440",
      "original_position" : 158,
      "path" : "src/test/util_tests.cpp",
      "position" : 162,
      "pull_request_review_id" : 109746157,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12878",
      "updated_at" : "2018-04-05T18:50:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/179492185",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12878#discussion_r179492489"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12878"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/179492489"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Agree that `GetChainName()` is a better name. Can be done in this PR or a future PR.",
      "commit_id" : "77a733a99a75bdd04ad94df830e5bdc8a6040959",
      "created_at" : "2018-04-05T14:57:36Z",
      "diff_hunk" : "@@ -735,35 +735,55 @@ fs::path GetConfigFile(const std::string& confPath)\n     return AbsPathForConfigVal(fs::path(confPath), false);\n }\n \n-void ArgsManager::ReadConfigFile(const std::string& confPath)\n+void ArgsManager::ReadConfigStream(std::istream& stream)\n {\n-    fs::ifstream streamConfig(GetConfigFile(confPath));\n-    if (!streamConfig.good())\n-        return; // No bitcoin.conf file is OK\n+    LOCK(cs_args);\n \n+    std::set<std::string> setOptions;\n+    setOptions.insert(\"*\");\n+\n+    for (boost::program_options::detail::config_file_iterator it(stream, setOptions), end; it != end; ++it)\n     {\n-        LOCK(cs_args);\n-        std::set<std::string> setOptions;\n-        setOptions.insert(\"*\");\n+        // Don't overwrite existing settings so command line settings override bitcoin.conf\n+        std::string strKey = std::string(\"-\") + it->string_key;\n+        std::string strValue = it->value[0];\n+        InterpretNegatedOption(strKey, strValue);\n+        if (mapArgs.count(strKey) == 0)\n+            mapArgs[strKey] = strValue;\n+        mapMultiArgs[strKey].push_back(strValue);\n+    }\n+}\n \n-        for (boost::program_options::detail::config_file_iterator it(streamConfig, setOptions), end; it != end; ++it)\n-        {\n-            // Don't overwrite existing settings so command line settings override bitcoin.conf\n-            std::string strKey = std::string(\"-\") + it->string_key;\n-            std::string strValue = it->value[0];\n-            InterpretNegatedOption(strKey, strValue);\n-            if (mapArgs.count(strKey) == 0)\n-                mapArgs[strKey] = strValue;\n-            mapMultiArgs[strKey].push_back(strValue);\n-        }\n+void ArgsManager::ReadConfigFile(const std::string& confPath)\n+{\n+    fs::ifstream stream(GetConfigFile(confPath));\n+\n+    // ok to not have a config file\n+    if (stream.good()) {\n+        ReadConfigStream(stream);\n     }\n+\n     // If datadir is changed in .conf file:\n     ClearDatadirCache();\n     if (!fs::is_directory(GetDataDir(false))) {\n         throw std::runtime_error(strprintf(\"specified data directory \\\"%s\\\" does not exist.\", gArgs.GetArg(\"-datadir\", \"\").c_str()));\n     }\n }\n \n+std::string ArgsManager::ChainNameFromCommandLine() const",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12878#discussion_r179492489",
      "id" : 179492489,
      "in_reply_to_id" : 179330564,
      "original_commit_id" : "26d3faaa28c794b48df2a12cdb4a9a71de3d1a96",
      "original_position" : 56,
      "path" : "src/util.cpp",
      "position" : null,
      "pull_request_review_id" : 109746525,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12878",
      "updated_at" : "2018-04-05T18:50:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/179492489",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "utACK 26d3faaa28c794b48df2a12cdb4a9a71de3d1a96",
      "created_at" : "2018-04-05T14:57:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12878#issuecomment-378965847",
      "id" : 378965847,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12878",
      "updated_at" : "2018-04-05T14:57:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/378965847",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Rebased due to conflict with #10244, and renamed ChainNameFromCommandLine to GetChainName. Not sure how useful the -track branch is since it's now got a merge with master, but it still works: https://github.com/ajtowns/bitcoin/commit/492bbcdc558ae0edae0e2beb49a50932c8d576c6 follows on from where the tracking branch left off, and matches this branches current head, 77a733a99a75bdd04ad94df830e5bdc8a6040959:\r\n\r\n```\r\n$ for a in netconf-refactor{,-track}; do git log -1 --pretty=\"%h -> %T\" $a; done\r\n77a733a99a -> 4b6b60ed983260f4f3219ad28825d209ff5a7957\r\n492bbcdc55 -> 4b6b60ed983260f4f3219ad28825d209ff5a7957\r\n```",
      "created_at" : "2018-04-05T19:00:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12878#issuecomment-379042633",
      "id" : 379042633,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12878",
      "updated_at" : "2018-04-05T19:00:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/379042633",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "utACK 77a733a99a75bdd04ad94df830e5bdc8a6040959",
      "created_at" : "2018-04-05T19:49:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12878#issuecomment-379055825",
      "id" : 379055825,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12878",
      "updated_at" : "2018-04-05T19:49:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/379055825",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1008458?v=4",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12878#discussion_r179581340"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12878"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/179581340"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Replace this with an assertion instead, even if just to self-document assumptions?",
      "commit_id" : "77a733a99a75bdd04ad94df830e5bdc8a6040959",
      "created_at" : "2018-04-05T19:50:15Z",
      "diff_hunk" : "@@ -737,31 +737,31 @@ fs::path GetConfigFile(const std::string& confPath)\n \n void ArgsManager::ReadConfigStream(std::istream& stream)\n {\n-    if (!stream.good())",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12878#discussion_r179581340",
      "id" : 179581340,
      "original_commit_id" : "087c5d204015e646d65696007415d6e998764631",
      "original_position" : 4,
      "path" : "src/util.cpp",
      "position" : null,
      "pull_request_review_id" : 109853188,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12878",
      "updated_at" : "2018-04-05T19:50:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/179581340",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/417043?v=4",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "utACK 77a733a99a75bdd04ad94df830e5bdc8a6040959, not too concerned about the nit.",
      "created_at" : "2018-04-05T19:52:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12878#issuecomment-379056681",
      "id" : 379056681,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12878",
      "updated_at" : "2018-04-05T19:52:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/379056681",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/417043?v=4",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "ACK 77a733a99a75bdd04ad94df830e5bdc8a6040959",
      "created_at" : "2018-04-05T19:53:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12878#issuecomment-379056921",
      "id" : 379056921,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12878",
      "updated_at" : "2018-04-05T19:53:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/379056921",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK, this should also help my arg refactor a bit\r\nEDIT: utACK https://github.com/bitcoin/bitcoin/pull/12878/commits/77a733a99a75bdd04ad94df830e5bdc8a6040959",
      "created_at" : "2018-04-05T23:03:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12878#issuecomment-379102083",
      "id" : 379102083,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12878",
      "updated_at" : "2018-04-05T23:06:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/379102083",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/3211283?v=4",
         "events_url" : "https://api.github.com/users/MeshCollider/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MeshCollider/followers",
         "following_url" : "https://api.github.com/users/MeshCollider/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MeshCollider/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MeshCollider",
         "id" : 3211283,
         "login" : "MeshCollider",
         "organizations_url" : "https://api.github.com/users/MeshCollider/orgs",
         "received_events_url" : "https://api.github.com/users/MeshCollider/received_events",
         "repos_url" : "https://api.github.com/users/MeshCollider/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MeshCollider/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MeshCollider/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MeshCollider"
      }
   }
]
