[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Just as a general hint for the approach of \"get a few green runs\", it's also possible to register at travis-ci.org with your github account and add your forked bitcoin repository there: then on every push the CI will be triggered as well. This proved to be very helpful for me personally, as check before I opened PRs, as I wrongly assumed for some reason that the CI runs can only be triggered here on the main bitcoin repository.",
      "created_at" : "2020-02-18T17:26:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18174#issuecomment-587577875",
      "id" : 587577875,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18174",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU4NzU3Nzg3NQ==",
      "updated_at" : "2020-02-18T17:26:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/587577875",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/91535?v=4",
         "events_url" : "https://api.github.com/users/theStack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theStack/followers",
         "following_url" : "https://api.github.com/users/theStack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theStack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theStack",
         "id" : 91535,
         "login" : "theStack",
         "node_id" : "MDQ6VXNlcjkxNTM1",
         "organizations_url" : "https://api.github.com/users/theStack/orgs",
         "received_events_url" : "https://api.github.com/users/theStack/received_events",
         "repos_url" : "https://api.github.com/users/theStack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theStack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theStack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theStack"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "thanks for the tip @theStack ! \r\n\r\nso you were able to get travis passing on your forked repo? when I tried previously I wouldn't get meaningful results, eg. they would frequently time out or error for unrelated reasons. But I didn't investigate too closely, so I can take another look",
      "created_at" : "2020-02-18T17:30:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18174#issuecomment-587579655",
      "id" : 587579655,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18174",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU4NzU3OTY1NQ==",
      "updated_at" : "2020-02-18T17:30:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/587579655",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1500952?v=4",
         "events_url" : "https://api.github.com/users/amitiuttarwar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/amitiuttarwar/followers",
         "following_url" : "https://api.github.com/users/amitiuttarwar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/amitiuttarwar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/amitiuttarwar",
         "id" : 1500952,
         "login" : "amitiuttarwar",
         "node_id" : "MDQ6VXNlcjE1MDA5NTI=",
         "organizations_url" : "https://api.github.com/users/amitiuttarwar/orgs",
         "received_events_url" : "https://api.github.com/users/amitiuttarwar/received_events",
         "repos_url" : "https://api.github.com/users/amitiuttarwar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/amitiuttarwar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/amitiuttarwar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/amitiuttarwar"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> so you were able to get travis passing on your forked repo? when I tried previously I wouldn't get meaningful results, eg. they would frequently time out or error for unrelated reasons. But I didn't investigate too closely, so I can take another look\r\n\r\nIt could be that on a first build you have to restart the job manually from the Travis dashboard, if a message like this appears at the very bottom of the job log:\r\n\r\n```\r\nError! Initial build successful, but not enough time remains to run later build stages and tests.\r\nSee https://docs.travis-ci.com/user/customizing-the-build#build-timeouts . Please manually re-run\r\nthis job by using the travis restart button. The next run should not time out because the build cache\r\nhas been saved.\r\n```\r\n\r\nOther than that, after this initial hurdle I think a Travis run here should behave the same as a run from your bitcoin fork -- at least that's my experience :)",
      "created_at" : "2020-02-18T17:52:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18174#issuecomment-587589917",
      "id" : 587589917,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18174",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU4NzU4OTkxNw==",
      "updated_at" : "2020-02-18T17:52:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/587589917",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/91535?v=4",
         "events_url" : "https://api.github.com/users/theStack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theStack/followers",
         "following_url" : "https://api.github.com/users/theStack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theStack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theStack",
         "id" : 91535,
         "login" : "theStack",
         "node_id" : "MDQ6VXNlcjkxNTM1",
         "organizations_url" : "https://api.github.com/users/theStack/orgs",
         "received_events_url" : "https://api.github.com/users/theStack/received_events",
         "repos_url" : "https://api.github.com/users/theStack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theStack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theStack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theStack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18174#discussion_r380879804"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18174"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/380879804"
         }
      },
      "author_association" : "MEMBER",
      "body" : "It looks like this line (or any line after it, but before the next BOOST_CHECK) still fails. E.g.\r\n\r\n```\r\nRunning 3 test cases...\r\n\r\nTest cases order is shuffled using seed: 902263820\r\n\r\nEntering test module \"Bitcoin Core Test Suite\"\r\n\r\ntest/scheduler_tests.cpp(11): Entering test suite \"scheduler_tests\"\r\n\r\ntest/scheduler_tests.cpp(156): Entering test case \"mockforward\"\r\n\r\nterminate called after throwing an instance of 'boost::wrapexcept<boost::condition_error>'\r\n\r\n  what():  boost::condition_variable::do_wait_until failed in pthread_cond_timedwait: Invalid argument\r\n\r\nunknown location(0): fatal error: in \"scheduler_tests/mockforward\": signal: SIGABRT (application abort requested)\r\n\r\ntest/scheduler_tests.cpp(173): last checkpoint\r\n\r\ntest/scheduler_tests.cpp(156): Leaving test case \"mockforward\"; testing time: 430us\r\n\r\ntest/scheduler_tests.cpp(112): Entering test case \"singlethreadedscheduler_ordered\"\r\n\r\ntest/scheduler_tests.cpp(112): Leaving test case \"singlethreadedscheduler_ordered\"; testing time: 7233us\r\n\r\ntest/scheduler_tests.cpp(38): Entering test case \"manythreads\"\r\n\r\ntest/scheduler_tests.cpp(38): Leaving test case \"manythreads\"; testing time: 8082us\r\n\r\ntest/scheduler_tests.cpp(11): Leaving test suite \"scheduler_tests\"; testing time: 15837us\r\n\r\nLeaving test module \"Bitcoin Core Test Suite\"; testing time: 15956us",
      "commit_id" : "df29a71f056e448763d05a40b07ff365b4526ba5",
      "created_at" : "2020-02-18T19:16:04Z",
      "diff_hunk" : "@@ -171,8 +172,6 @@ BOOST_AUTO_TEST_CASE(mockforward)\n     size_t num_tasks = scheduler.getQueueInfo(first, last);\n     BOOST_CHECK_EQUAL(num_tasks, 3ul);\n \n-    std::thread scheduler_thread([&]() { scheduler.serviceQueue(); });\n-\n     // bump the scheduler forward 5 minutes\n     scheduler.MockForward(boost::chrono::seconds(5*60));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18174#discussion_r380879804",
      "id" : 380879804,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDg3OTgwNA==",
      "original_commit_id" : "df29a71f056e448763d05a40b07ff365b4526ba5",
      "original_position" : 15,
      "path" : "src/test/scheduler_tests.cpp",
      "position" : 15,
      "pull_request_review_id" : 360603125,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18174",
      "updated_at" : "2020-02-18T19:16:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/380879804",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I tried on three machines and could not reproduce the issue locally",
      "created_at" : "2020-02-18T23:16:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18174#issuecomment-587952763",
      "id" : 587952763,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18174",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU4Nzk1Mjc2Mw==",
      "updated_at" : "2020-02-18T23:16:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/587952763",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   }
]
