[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage\nFor detailed information about the code coverage, see the [test coverage report](https://corecheck.dev/bitcoin/bitcoin/pulls/29264).\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Stale ACK | [murchandamus](https://github.com/bitcoin/bitcoin/pull/29264#pullrequestreview-1833400688) |\n\nIf your review is incorrectly listed, please react with ð to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#28985](https://github.com/bitcoin/bitcoin/pull/28985) (Avoid changeless input sets when SFFO is active by murchandamus)\n* [#28560](https://github.com/bitcoin/bitcoin/pull/28560) (wallet, rpc: `FundTransaction` refactor by josibake)\n* [#28201](https://github.com/bitcoin/bitcoin/pull/28201) (Silent Payments: sending by josibake)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "created_at" : "2024-01-17T20:24:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29264#issuecomment-1896633814",
      "id" : 1896633814,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29264",
      "node_id" : "IC_kwDOABII585xDFXW",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1896633814/reactions"
      },
      "updated_at" : "2024-01-23T22:22:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1896633814",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--85328a0da195eb286784d51f73fa0af9-->\n\nð§ At least one of the CI tasks failed. Make sure to run all tests locally, according to the\ndocumentation.\n\nPossibly this is due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n<sub>Debug: https://github.com/bitcoin/bitcoin/runs/20589487266</sub>",
      "created_at" : "2024-01-17T21:44:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29264#issuecomment-1896912004",
      "id" : 1896912004,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29264",
      "node_id" : "IC_kwDOABII585xEJSE",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1896912004/reactions"
      },
      "updated_at" : "2024-01-17T21:44:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1896912004",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1457194322"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1457194322"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit: replace magic number with `MAX_STANDARD_TX_WEIGHT`",
      "commit_id" : "8ac0dcdeadd84aefe11e5ce62f591e9a8d404e55",
      "created_at" : "2024-01-18T09:52:56Z",
      "diff_hunk" : "@@ -1472,6 +1490,18 @@ RPCHelpMan sendall()\n             const CAmount fee_from_size{fee_rate.GetFee(tx_size.vsize)};\n             const CAmount effective_value{total_input_value - fee_from_size};\n \n+            // Cap tx weight based on estimated size if requested\n+            if (options.exists(\"max_tx_weight\")) {\n+                const auto max_tx_weight =  options[\"max_tx_weight\"].getInt<int>();\n+                if (max_tx_weight < 0 || max_tx_weight > MAX_STANDARD_TX_WEIGHT) {\n+                    throw JSONRPCError(RPC_WALLET_ERROR, strprintf(\"Invalid parameter, max tx weight must be between 0 and 400000\"));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1457194322",
      "id" : 1457194322,
      "line" : 1497,
      "node_id" : "PRRC_kwDOABII585W2wVS",
      "original_commit_id" : "8ac0dcdeadd84aefe11e5ce62f591e9a8d404e55",
      "original_line" : 1497,
      "original_position" : 68,
      "original_start_line" : null,
      "path" : "src/wallet/rpc/spend.cpp",
      "position" : 68,
      "pull_request_review_id" : 1829286044,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1457194322/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-18T10:00:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1457194322",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1457200003"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1457200003"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Would this be giving up too early? We could still find a different solution further down the function, no?",
      "commit_id" : "8ac0dcdeadd84aefe11e5ce62f591e9a8d404e55",
      "created_at" : "2024-01-18T09:57:18Z",
      "diff_hunk" : "@@ -335,12 +337,18 @@ util::Result<SelectionResult> KnapsackSolver(std::vector<OutputGroup>& groups, c\n         for (const auto& group : applicable_groups) {\n             result.AddInput(group);\n         }\n+        // We may still fail if max is low\n+        if (result.GetWeight() > max_weight) return ErrorMaxWeightExceeded();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1457200003",
      "id" : 1457200003,
      "line" : 341,
      "node_id" : "PRRC_kwDOABII585W2xuD",
      "original_commit_id" : "8ac0dcdeadd84aefe11e5ce62f591e9a8d404e55",
      "original_line" : 341,
      "original_position" : 14,
      "original_start_line" : null,
      "path" : "src/wallet/coinselection.cpp",
      "position" : 14,
      "pull_request_review_id" : 1829286044,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1457200003/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-18T10:00:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1457200003",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1457506894"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1457506894"
         }
      },
      "author_association" : "MEMBER",
      "body" : "yeah I was mostly hot-patching here, making sure it never returns too big(because it did very often)",
      "commit_id" : "8ac0dcdeadd84aefe11e5ce62f591e9a8d404e55",
      "created_at" : "2024-01-18T14:18:19Z",
      "diff_hunk" : "@@ -335,12 +337,18 @@ util::Result<SelectionResult> KnapsackSolver(std::vector<OutputGroup>& groups, c\n         for (const auto& group : applicable_groups) {\n             result.AddInput(group);\n         }\n+        // We may still fail if max is low\n+        if (result.GetWeight() > max_weight) return ErrorMaxWeightExceeded();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1457506894",
      "id" : 1457506894,
      "in_reply_to_id" : 1457200003,
      "line" : 341,
      "node_id" : "PRRC_kwDOABII585W38pO",
      "original_commit_id" : "8ac0dcdeadd84aefe11e5ce62f591e9a8d404e55",
      "original_line" : 341,
      "original_position" : 14,
      "original_start_line" : null,
      "path" : "src/wallet/coinselection.cpp",
      "position" : 14,
      "pull_request_review_id" : 1829787097,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1457506894/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-18T14:18:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1457506894",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1457513036"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1457513036"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Instead, how about:\r\n\r\n```diff\r\n-       if (group.GetSelectionAmount() == nTargetValue) {\r\n+       if (group.GetSelectionAmount() == nTargetValue && group.m_weight <= max_weight) {\r\n```",
      "commit_id" : "8ac0dcdeadd84aefe11e5ce62f591e9a8d404e55",
      "created_at" : "2024-01-18T14:22:22Z",
      "diff_hunk" : "@@ -322,6 +322,8 @@ util::Result<SelectionResult> KnapsackSolver(std::vector<OutputGroup>& groups, c\n     for (const OutputGroup& group : groups) {\n         if (group.GetSelectionAmount() == nTargetValue) {\n             result.AddInput(group);\n+            // We may still fail if max is low\n+            if (result.GetWeight() > max_weight) return ErrorMaxWeightExceeded();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1457513036",
      "id" : 1457513036,
      "line" : 326,
      "node_id" : "PRRC_kwDOABII585W3-JM",
      "original_commit_id" : "8ac0dcdeadd84aefe11e5ce62f591e9a8d404e55",
      "original_line" : 326,
      "original_position" : 5,
      "original_start_line" : 322,
      "path" : "src/wallet/coinselection.cpp",
      "position" : 5,
      "pull_request_review_id" : 1829800323,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1457513036/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 322,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2024-01-18T14:26:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1457513036",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4060799?v=4",
         "events_url" : "https://api.github.com/users/murchandamus/events{/privacy}",
         "followers_url" : "https://api.github.com/users/murchandamus/followers",
         "following_url" : "https://api.github.com/users/murchandamus/following{/other_user}",
         "gists_url" : "https://api.github.com/users/murchandamus/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/murchandamus",
         "id" : 4060799,
         "login" : "murchandamus",
         "node_id" : "MDQ6VXNlcjQwNjA3OTk=",
         "organizations_url" : "https://api.github.com/users/murchandamus/orgs",
         "received_events_url" : "https://api.github.com/users/murchandamus/received_events",
         "repos_url" : "https://api.github.com/users/murchandamus/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/murchandamus/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/murchandamus/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/murchandamus"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1457871015"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1457871015"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In line 331:\r\n\r\n```diff\r\n-        } else if (!lowest_larger || group.GetSelectionAmount() < lowest_larger->GetSelectionAmount()) {\r\n+        } else if (group.m_weight <= max_weight && (!lowest_larger || group.GetSelectionAmount() < lowest_larger->GetSelectionAmount())) {      \r\n```",
      "commit_id" : "8ac0dcdeadd84aefe11e5ce62f591e9a8d404e55",
      "created_at" : "2024-01-18T19:05:57Z",
      "diff_hunk" : "@@ -335,12 +337,18 @@ util::Result<SelectionResult> KnapsackSolver(std::vector<OutputGroup>& groups, c\n         for (const auto& group : applicable_groups) {\n             result.AddInput(group);\n         }\n+        // We may still fail if max is low",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1457871015",
      "id" : 1457871015,
      "line" : 340,
      "node_id" : "PRRC_kwDOABII585W5Vin",
      "original_commit_id" : "8ac0dcdeadd84aefe11e5ce62f591e9a8d404e55",
      "original_line" : 340,
      "original_position" : 13,
      "original_start_line" : null,
      "path" : "src/wallet/coinselection.cpp",
      "position" : 13,
      "pull_request_review_id" : 1830384740,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1457871015/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-18T19:24:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1457871015",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4060799?v=4",
         "events_url" : "https://api.github.com/users/murchandamus/events{/privacy}",
         "followers_url" : "https://api.github.com/users/murchandamus/followers",
         "following_url" : "https://api.github.com/users/murchandamus/following{/other_user}",
         "gists_url" : "https://api.github.com/users/murchandamus/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/murchandamus",
         "id" : 4060799,
         "login" : "murchandamus",
         "node_id" : "MDQ6VXNlcjQwNjA3OTk=",
         "organizations_url" : "https://api.github.com/users/murchandamus/orgs",
         "received_events_url" : "https://api.github.com/users/murchandamus/received_events",
         "repos_url" : "https://api.github.com/users/murchandamus/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/murchandamus/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/murchandamus/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/murchandamus"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1457876258"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1457876258"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Does 0 even ever make sense?",
      "commit_id" : "8ac0dcdeadd84aefe11e5ce62f591e9a8d404e55",
      "created_at" : "2024-01-18T19:11:43Z",
      "diff_hunk" : "@@ -1472,6 +1490,18 @@ RPCHelpMan sendall()\n             const CAmount fee_from_size{fee_rate.GetFee(tx_size.vsize)};\n             const CAmount effective_value{total_input_value - fee_from_size};\n \n+            // Cap tx weight based on estimated size if requested\n+            if (options.exists(\"max_tx_weight\")) {\n+                const auto max_tx_weight =  options[\"max_tx_weight\"].getInt<int>();\n+                if (max_tx_weight < 0 || max_tx_weight > MAX_STANDARD_TX_WEIGHT) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1457876258",
      "id" : 1457876258,
      "line" : 1496,
      "node_id" : "PRRC_kwDOABII585W5W0i",
      "original_commit_id" : "8ac0dcdeadd84aefe11e5ce62f591e9a8d404e55",
      "original_line" : 1496,
      "original_position" : 67,
      "original_start_line" : null,
      "path" : "src/wallet/rpc/spend.cpp",
      "position" : 67,
      "pull_request_review_id" : 1830384740,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1457876258/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-18T19:24:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1457876258",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4060799?v=4",
         "events_url" : "https://api.github.com/users/murchandamus/events{/privacy}",
         "followers_url" : "https://api.github.com/users/murchandamus/followers",
         "following_url" : "https://api.github.com/users/murchandamus/following{/other_user}",
         "gists_url" : "https://api.github.com/users/murchandamus/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/murchandamus",
         "id" : 4060799,
         "login" : "murchandamus",
         "node_id" : "MDQ6VXNlcjQwNjA3OTk=",
         "organizations_url" : "https://api.github.com/users/murchandamus/orgs",
         "received_events_url" : "https://api.github.com/users/murchandamus/received_events",
         "repos_url" : "https://api.github.com/users/murchandamus/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/murchandamus/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/murchandamus/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/murchandamus"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1457887218"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1457887218"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I would suggest that you pass the `max_weight` as an additional parameter to `ApproximateBestSubset(â¦)` and keep track of the current weight (e.g. `nTotalWeight`) in parallel to `nTotal` and only designate a new `nBest` and `vfBest` if itâs not just better but also a permitted weight:\r\n\r\n```diff\r\n-                        if (nTotal < nBest)\r\n+                        if (nTotal < nBest && nTotalWeight <= max_weight)                        \r\n```\r\n\r\nfor extra credit you could also deselect not just after exceeding the target but also when you exceed max_weight",
      "commit_id" : "8ac0dcdeadd84aefe11e5ce62f591e9a8d404e55",
      "created_at" : "2024-01-18T19:23:08Z",
      "diff_hunk" : "@@ -359,6 +367,9 @@ util::Result<SelectionResult> KnapsackSolver(std::vector<OutputGroup>& groups, c\n     if (lowest_larger &&\n         ((nBest != nTargetValue && nBest < nTargetValue + change_target) || lowest_larger->GetSelectionAmount() <= nBest)) {\n         result.AddInput(*lowest_larger);\n+",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1457887218",
      "id" : 1457887218,
      "line" : 370,
      "node_id" : "PRRC_kwDOABII585W5Zfy",
      "original_commit_id" : "8ac0dcdeadd84aefe11e5ce62f591e9a8d404e55",
      "original_line" : 370,
      "original_position" : 32,
      "original_start_line" : null,
      "path" : "src/wallet/coinselection.cpp",
      "position" : 32,
      "pull_request_review_id" : 1830384740,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1457887218/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-18T19:24:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1457887218",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4060799?v=4",
         "events_url" : "https://api.github.com/users/murchandamus/events{/privacy}",
         "followers_url" : "https://api.github.com/users/murchandamus/followers",
         "following_url" : "https://api.github.com/users/murchandamus/following{/other_user}",
         "gists_url" : "https://api.github.com/users/murchandamus/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/murchandamus",
         "id" : 4060799,
         "login" : "murchandamus",
         "node_id" : "MDQ6VXNlcjQwNjA3OTk=",
         "organizations_url" : "https://api.github.com/users/murchandamus/orgs",
         "received_events_url" : "https://api.github.com/users/murchandamus/received_events",
         "repos_url" : "https://api.github.com/users/murchandamus/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/murchandamus/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/murchandamus/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/murchandamus"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1459376293"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459376293"
         }
      },
      "author_association" : "MEMBER",
      "body" : "as much a sense as \"1\". Could have minimal relay size here instead?",
      "commit_id" : "069c1652ed22b5e22537f63946cedd6c68487b22",
      "created_at" : "2024-01-19T17:14:35Z",
      "diff_hunk" : "@@ -1472,6 +1490,18 @@ RPCHelpMan sendall()\n             const CAmount fee_from_size{fee_rate.GetFee(tx_size.vsize)};\n             const CAmount effective_value{total_input_value - fee_from_size};\n \n+            // Cap tx weight based on estimated size if requested\n+            if (options.exists(\"max_tx_weight\")) {\n+                const auto max_tx_weight =  options[\"max_tx_weight\"].getInt<int>();\n+                if (max_tx_weight < 0 || max_tx_weight > MAX_STANDARD_TX_WEIGHT) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1459376293",
      "id" : 1459376293,
      "in_reply_to_id" : 1457876258,
      "line" : 1496,
      "node_id" : "PRRC_kwDOABII585W_FCl",
      "original_commit_id" : "8ac0dcdeadd84aefe11e5ce62f591e9a8d404e55",
      "original_line" : 1496,
      "original_position" : 67,
      "original_start_line" : null,
      "path" : "src/wallet/rpc/spend.cpp",
      "position" : 67,
      "pull_request_review_id" : 1833294195,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459376293/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-19T17:14:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459376293",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1459420366"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459420366"
         }
      },
      "author_association" : "MEMBER",
      "body" : "should be mitigated?",
      "commit_id" : "069c1652ed22b5e22537f63946cedd6c68487b22",
      "created_at" : "2024-01-19T17:38:34Z",
      "diff_hunk" : "@@ -335,12 +337,18 @@ util::Result<SelectionResult> KnapsackSolver(std::vector<OutputGroup>& groups, c\n         for (const auto& group : applicable_groups) {\n             result.AddInput(group);\n         }\n+        // We may still fail if max is low\n+        if (result.GetWeight() > max_weight) return ErrorMaxWeightExceeded();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1459420366",
      "id" : 1459420366,
      "in_reply_to_id" : 1457200003,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585W_PzO",
      "original_commit_id" : "8ac0dcdeadd84aefe11e5ce62f591e9a8d404e55",
      "original_line" : 341,
      "original_position" : 14,
      "original_start_line" : null,
      "path" : "src/wallet/coinselection.cpp",
      "position" : null,
      "pull_request_review_id" : 1833338577,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459420366/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-19T17:38:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459420366",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1459420447"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459420447"
         }
      },
      "author_association" : "MEMBER",
      "body" : "done",
      "commit_id" : "069c1652ed22b5e22537f63946cedd6c68487b22",
      "created_at" : "2024-01-19T17:38:37Z",
      "diff_hunk" : "@@ -1472,6 +1490,18 @@ RPCHelpMan sendall()\n             const CAmount fee_from_size{fee_rate.GetFee(tx_size.vsize)};\n             const CAmount effective_value{total_input_value - fee_from_size};\n \n+            // Cap tx weight based on estimated size if requested\n+            if (options.exists(\"max_tx_weight\")) {\n+                const auto max_tx_weight =  options[\"max_tx_weight\"].getInt<int>();\n+                if (max_tx_weight < 0 || max_tx_weight > MAX_STANDARD_TX_WEIGHT) {\n+                    throw JSONRPCError(RPC_WALLET_ERROR, strprintf(\"Invalid parameter, max tx weight must be between 0 and 400000\"));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1459420447",
      "id" : 1459420447,
      "in_reply_to_id" : 1457194322,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585W_P0f",
      "original_commit_id" : "8ac0dcdeadd84aefe11e5ce62f591e9a8d404e55",
      "original_line" : 1497,
      "original_position" : 68,
      "original_start_line" : null,
      "path" : "src/wallet/rpc/spend.cpp",
      "position" : null,
      "pull_request_review_id" : 1833338654,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459420447/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-19T17:38:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459420447",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1459420556"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459420556"
         }
      },
      "author_association" : "MEMBER",
      "body" : "done",
      "commit_id" : "069c1652ed22b5e22537f63946cedd6c68487b22",
      "created_at" : "2024-01-19T17:38:41Z",
      "diff_hunk" : "@@ -322,6 +322,8 @@ util::Result<SelectionResult> KnapsackSolver(std::vector<OutputGroup>& groups, c\n     for (const OutputGroup& group : groups) {\n         if (group.GetSelectionAmount() == nTargetValue) {\n             result.AddInput(group);\n+            // We may still fail if max is low\n+            if (result.GetWeight() > max_weight) return ErrorMaxWeightExceeded();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1459420556",
      "id" : 1459420556,
      "in_reply_to_id" : 1457513036,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585W_P2M",
      "original_commit_id" : "8ac0dcdeadd84aefe11e5ce62f591e9a8d404e55",
      "original_line" : 326,
      "original_position" : 5,
      "original_start_line" : 322,
      "path" : "src/wallet/coinselection.cpp",
      "position" : null,
      "pull_request_review_id" : 1833338744,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459420556/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2024-01-19T17:38:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459420556",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1459420625"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459420625"
         }
      },
      "author_association" : "MEMBER",
      "body" : "taken",
      "commit_id" : "069c1652ed22b5e22537f63946cedd6c68487b22",
      "created_at" : "2024-01-19T17:38:44Z",
      "diff_hunk" : "@@ -335,12 +337,18 @@ util::Result<SelectionResult> KnapsackSolver(std::vector<OutputGroup>& groups, c\n         for (const auto& group : applicable_groups) {\n             result.AddInput(group);\n         }\n+        // We may still fail if max is low",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1459420625",
      "id" : 1459420625,
      "in_reply_to_id" : 1457871015,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585W_P3R",
      "original_commit_id" : "8ac0dcdeadd84aefe11e5ce62f591e9a8d404e55",
      "original_line" : 340,
      "original_position" : 13,
      "original_start_line" : null,
      "path" : "src/wallet/coinselection.cpp",
      "position" : null,
      "pull_request_review_id" : 1833338870,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459420625/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-19T17:38:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459420625",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1459420739"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459420739"
         }
      },
      "author_association" : "MEMBER",
      "body" : "did the minimal suggested work to give knapsack a fighting chance",
      "commit_id" : "069c1652ed22b5e22537f63946cedd6c68487b22",
      "created_at" : "2024-01-19T17:38:49Z",
      "diff_hunk" : "@@ -359,6 +367,9 @@ util::Result<SelectionResult> KnapsackSolver(std::vector<OutputGroup>& groups, c\n     if (lowest_larger &&\n         ((nBest != nTargetValue && nBest < nTargetValue + change_target) || lowest_larger->GetSelectionAmount() <= nBest)) {\n         result.AddInput(*lowest_larger);\n+",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1459420739",
      "id" : 1459420739,
      "in_reply_to_id" : 1457887218,
      "line" : 371,
      "node_id" : "PRRC_kwDOABII585W_P5D",
      "original_commit_id" : "8ac0dcdeadd84aefe11e5ce62f591e9a8d404e55",
      "original_line" : 371,
      "original_position" : 32,
      "original_start_line" : null,
      "path" : "src/wallet/coinselection.cpp",
      "position" : 140,
      "pull_request_review_id" : 1833339041,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459420739/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-19T17:38:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459420739",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1459477415"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459477415"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "At second glance, lemme retract my comment. It doesnât really hurt to allow values down to 0, even if that is less than a sensible use of that parameter. Might be helpful in tests to be able to restrict it fairly low.",
      "commit_id" : "069c1652ed22b5e22537f63946cedd6c68487b22",
      "created_at" : "2024-01-19T18:12:09Z",
      "diff_hunk" : "@@ -1472,6 +1490,18 @@ RPCHelpMan sendall()\n             const CAmount fee_from_size{fee_rate.GetFee(tx_size.vsize)};\n             const CAmount effective_value{total_input_value - fee_from_size};\n \n+            // Cap tx weight based on estimated size if requested\n+            if (options.exists(\"max_tx_weight\")) {\n+                const auto max_tx_weight =  options[\"max_tx_weight\"].getInt<int>();\n+                if (max_tx_weight < 0 || max_tx_weight > MAX_STANDARD_TX_WEIGHT) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1459477415",
      "id" : 1459477415,
      "in_reply_to_id" : 1457876258,
      "line" : 1496,
      "node_id" : "PRRC_kwDOABII585W_dun",
      "original_commit_id" : "8ac0dcdeadd84aefe11e5ce62f591e9a8d404e55",
      "original_line" : 1496,
      "original_position" : 67,
      "original_start_line" : null,
      "path" : "src/wallet/rpc/spend.cpp",
      "position" : 67,
      "pull_request_review_id" : 1833394346,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459477415/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-19T18:12:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459477415",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4060799?v=4",
         "events_url" : "https://api.github.com/users/murchandamus/events{/privacy}",
         "followers_url" : "https://api.github.com/users/murchandamus/followers",
         "following_url" : "https://api.github.com/users/murchandamus/following{/other_user}",
         "gists_url" : "https://api.github.com/users/murchandamus/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/murchandamus",
         "id" : 4060799,
         "login" : "murchandamus",
         "node_id" : "MDQ6VXNlcjQwNjA3OTk=",
         "organizations_url" : "https://api.github.com/users/murchandamus/orgs",
         "received_events_url" : "https://api.github.com/users/murchandamus/received_events",
         "repos_url" : "https://api.github.com/users/murchandamus/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/murchandamus/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/murchandamus/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/murchandamus"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1459483691"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459483691"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Ah, yeah `max_input_weight` is a much better name. Thanks!",
      "commit_id" : "069c1652ed22b5e22537f63946cedd6c68487b22",
      "created_at" : "2024-01-19T18:15:41Z",
      "diff_hunk" : "@@ -74,7 +74,7 @@ struct {\n static const size_t TOTAL_TRIES = 100000;\n \n util::Result<SelectionResult> SelectCoinsBnB(std::vector<OutputGroup>& utxo_pool, const CAmount& selection_target, const CAmount& cost_of_change,\n-                                             int max_weight)\n+                                             int max_input_weight)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1459483691",
      "id" : 1459483691,
      "line" : 77,
      "node_id" : "PRRC_kwDOABII585W_fQr",
      "original_commit_id" : "069c1652ed22b5e22537f63946cedd6c68487b22",
      "original_line" : 77,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/wallet/coinselection.cpp",
      "position" : 5,
      "pull_request_review_id" : 1833400688,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459483691/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-19T18:50:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459483691",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4060799?v=4",
         "events_url" : "https://api.github.com/users/murchandamus/events{/privacy}",
         "followers_url" : "https://api.github.com/users/murchandamus/followers",
         "following_url" : "https://api.github.com/users/murchandamus/following{/other_user}",
         "gists_url" : "https://api.github.com/users/murchandamus/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/murchandamus",
         "id" : 4060799,
         "login" : "murchandamus",
         "node_id" : "MDQ6VXNlcjQwNjA3OTk=",
         "organizations_url" : "https://api.github.com/users/murchandamus/orgs",
         "received_events_url" : "https://api.github.com/users/murchandamus/received_events",
         "repos_url" : "https://api.github.com/users/murchandamus/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/murchandamus/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/murchandamus/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/murchandamus"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1459526141"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459526141"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I donât think we can ever hit this `if` block since we only set `lowest_larger` when itâs weight is less than the max_input_weight.",
      "commit_id" : "069c1652ed22b5e22537f63946cedd6c68487b22",
      "created_at" : "2024-01-19T18:36:16Z",
      "diff_hunk" : "@@ -335,30 +338,39 @@ util::Result<SelectionResult> KnapsackSolver(std::vector<OutputGroup>& groups, c\n         for (const auto& group : applicable_groups) {\n             result.AddInput(group);\n         }\n-        return result;\n+        if (result.GetWeight() <= max_input_weight) return result;\n+\n+        // Try something else\n+        result.Clear();\n     }\n \n     if (nTotalLower < nTargetValue) {\n         if (!lowest_larger) return util::Error();\n         result.AddInput(*lowest_larger);\n-        return result;\n+        if (result.GetWeight() <= max_input_weight) return result;\n+\n+        // Try something else\n+        result.Clear();\n     }\n \n     // Solve subset sum by stochastic approximation\n     std::sort(applicable_groups.begin(), applicable_groups.end(), descending);\n     std::vector<char> vfBest;\n     CAmount nBest;\n \n-    ApproximateBestSubset(rng, applicable_groups, nTotalLower, nTargetValue, vfBest, nBest);\n+    ApproximateBestSubset(rng, applicable_groups, nTotalLower, nTargetValue, vfBest, nBest, max_input_weight);\n     if (nBest != nTargetValue && nTotalLower >= nTargetValue + change_target) {\n-        ApproximateBestSubset(rng, applicable_groups, nTotalLower, nTargetValue + change_target, vfBest, nBest);\n+        ApproximateBestSubset(rng, applicable_groups, nTotalLower, nTargetValue + change_target, vfBest, nBest, max_input_weight);\n     }\n \n     // If we have a bigger coin and (either the stochastic approximation didn't find a good solution,\n     //                                   or the next bigger coin is closer), return the bigger coin\n     if (lowest_larger &&\n         ((nBest != nTargetValue && nBest < nTargetValue + change_target) || lowest_larger->GetSelectionAmount() <= nBest)) {\n         result.AddInput(*lowest_larger);\n+\n+        // We may still fail if max is low\n+        if (result.GetWeight() > max_input_weight) return ErrorMaxWeightExceeded();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1459526141",
      "id" : 1459526141,
      "line" : 373,
      "node_id" : "PRRC_kwDOABII585W_pn9",
      "original_commit_id" : "069c1652ed22b5e22537f63946cedd6c68487b22",
      "original_line" : 373,
      "original_position" : 142,
      "original_start_line" : null,
      "path" : "src/wallet/coinselection.cpp",
      "position" : 142,
      "pull_request_review_id" : 1833400688,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459526141/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-19T18:50:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459526141",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4060799?v=4",
         "events_url" : "https://api.github.com/users/murchandamus/events{/privacy}",
         "followers_url" : "https://api.github.com/users/murchandamus/followers",
         "following_url" : "https://api.github.com/users/murchandamus/following{/other_user}",
         "gists_url" : "https://api.github.com/users/murchandamus/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/murchandamus",
         "id" : 4060799,
         "login" : "murchandamus",
         "node_id" : "MDQ6VXNlcjQwNjA3OTk=",
         "organizations_url" : "https://api.github.com/users/murchandamus/orgs",
         "received_events_url" : "https://api.github.com/users/murchandamus/received_events",
         "repos_url" : "https://api.github.com/users/murchandamus/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/murchandamus/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/murchandamus/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/murchandamus"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1459539171"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459539171"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I donât think this condition can be hit. \r\n\r\nAFAICT, there is only be a single scenario in which `vfBest` can contain an input selection that is in excess of the `max_input_weight`: `ApproximateBestSubset` initializes `vfBest` with all of `applicable_groups` without checking the weight. If it then never finds a better input selection throughout the exploration, it would be possible that it returns an overweight `vfBest`. Since `lowest_larger` is only set when it adheres to the weight limit, we either have replaced `vfBest` with an adequate `lowest_larger` at this point, or have already returned `ErrorMaxWeightExceeded`.",
      "commit_id" : "069c1652ed22b5e22537f63946cedd6c68487b22",
      "created_at" : "2024-01-19T18:44:09Z",
      "diff_hunk" : "@@ -367,13 +379,16 @@ util::Result<SelectionResult> KnapsackSolver(std::vector<OutputGroup>& groups, c\n         }\n \n         // If the result exceeds the maximum allowed size, return closest UTXO above the target\n-        if (result.GetWeight() > max_weight) {\n+        if (result.GetWeight() > max_input_weight) {\n             // No coin above target, nothing to do.\n             if (!lowest_larger) return ErrorMaxWeightExceeded();\n \n             // Return closest UTXO above target\n             result.Clear();\n             result.AddInput(*lowest_larger);\n+\n+            // We may still fail if max is low\n+            if (result.GetWeight() > max_input_weight) return ErrorMaxWeightExceeded();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1459539171",
      "id" : 1459539171,
      "line" : 391,
      "node_id" : "PRRC_kwDOABII585W_szj",
      "original_commit_id" : "069c1652ed22b5e22537f63946cedd6c68487b22",
      "original_line" : 391,
      "original_position" : 160,
      "original_start_line" : 390,
      "path" : "src/wallet/coinselection.cpp",
      "position" : 160,
      "pull_request_review_id" : 1833400688,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459539171/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 390,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2024-01-19T18:50:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459539171",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4060799?v=4",
         "events_url" : "https://api.github.com/users/murchandamus/events{/privacy}",
         "followers_url" : "https://api.github.com/users/murchandamus/followers",
         "following_url" : "https://api.github.com/users/murchandamus/following{/other_user}",
         "gists_url" : "https://api.github.com/users/murchandamus/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/murchandamus",
         "id" : 4060799,
         "login" : "murchandamus",
         "node_id" : "MDQ6VXNlcjQwNjA3OTk=",
         "organizations_url" : "https://api.github.com/users/murchandamus/orgs",
         "received_events_url" : "https://api.github.com/users/murchandamus/received_events",
         "repos_url" : "https://api.github.com/users/murchandamus/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/murchandamus/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/murchandamus/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/murchandamus"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1459665430"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459665430"
         }
      },
      "author_association" : "MEMBER",
      "body" : "makes sense, removed",
      "commit_id" : "7bfc80b70e3955c2c3b6f820f51a7d8d45aaff8e",
      "created_at" : "2024-01-19T19:57:32Z",
      "diff_hunk" : "@@ -335,30 +338,39 @@ util::Result<SelectionResult> KnapsackSolver(std::vector<OutputGroup>& groups, c\n         for (const auto& group : applicable_groups) {\n             result.AddInput(group);\n         }\n-        return result;\n+        if (result.GetWeight() <= max_input_weight) return result;\n+\n+        // Try something else\n+        result.Clear();\n     }\n \n     if (nTotalLower < nTargetValue) {\n         if (!lowest_larger) return util::Error();\n         result.AddInput(*lowest_larger);\n-        return result;\n+        if (result.GetWeight() <= max_input_weight) return result;\n+\n+        // Try something else\n+        result.Clear();\n     }\n \n     // Solve subset sum by stochastic approximation\n     std::sort(applicable_groups.begin(), applicable_groups.end(), descending);\n     std::vector<char> vfBest;\n     CAmount nBest;\n \n-    ApproximateBestSubset(rng, applicable_groups, nTotalLower, nTargetValue, vfBest, nBest);\n+    ApproximateBestSubset(rng, applicable_groups, nTotalLower, nTargetValue, vfBest, nBest, max_input_weight);\n     if (nBest != nTargetValue && nTotalLower >= nTargetValue + change_target) {\n-        ApproximateBestSubset(rng, applicable_groups, nTotalLower, nTargetValue + change_target, vfBest, nBest);\n+        ApproximateBestSubset(rng, applicable_groups, nTotalLower, nTargetValue + change_target, vfBest, nBest, max_input_weight);\n     }\n \n     // If we have a bigger coin and (either the stochastic approximation didn't find a good solution,\n     //                                   or the next bigger coin is closer), return the bigger coin\n     if (lowest_larger &&\n         ((nBest != nTargetValue && nBest < nTargetValue + change_target) || lowest_larger->GetSelectionAmount() <= nBest)) {\n         result.AddInput(*lowest_larger);\n+\n+        // We may still fail if max is low\n+        if (result.GetWeight() > max_input_weight) return ErrorMaxWeightExceeded();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1459665430",
      "id" : 1459665430,
      "in_reply_to_id" : 1459526141,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585XALoW",
      "original_commit_id" : "069c1652ed22b5e22537f63946cedd6c68487b22",
      "original_line" : 373,
      "original_position" : 142,
      "original_start_line" : null,
      "path" : "src/wallet/coinselection.cpp",
      "position" : null,
      "pull_request_review_id" : 1833584025,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459665430/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-19T19:57:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459665430",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1459665529"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459665529"
         }
      },
      "author_association" : "MEMBER",
      "body" : "makes sense, removed",
      "commit_id" : "7bfc80b70e3955c2c3b6f820f51a7d8d45aaff8e",
      "created_at" : "2024-01-19T19:57:35Z",
      "diff_hunk" : "@@ -367,13 +379,16 @@ util::Result<SelectionResult> KnapsackSolver(std::vector<OutputGroup>& groups, c\n         }\n \n         // If the result exceeds the maximum allowed size, return closest UTXO above the target\n-        if (result.GetWeight() > max_weight) {\n+        if (result.GetWeight() > max_input_weight) {\n             // No coin above target, nothing to do.\n             if (!lowest_larger) return ErrorMaxWeightExceeded();\n \n             // Return closest UTXO above target\n             result.Clear();\n             result.AddInput(*lowest_larger);\n+\n+            // We may still fail if max is low\n+            if (result.GetWeight() > max_input_weight) return ErrorMaxWeightExceeded();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1459665529",
      "id" : 1459665529,
      "in_reply_to_id" : 1459539171,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585XALp5",
      "original_commit_id" : "069c1652ed22b5e22537f63946cedd6c68487b22",
      "original_line" : 391,
      "original_position" : 160,
      "original_start_line" : 390,
      "path" : "src/wallet/coinselection.cpp",
      "position" : null,
      "pull_request_review_id" : 1833584158,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459665529/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2024-01-19T19:57:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459665529",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "fixed up the fuzz test, which was attempting larger than `MAX_STANDARD_TX_WEIGHT` coins and not actually rejecting them as they should have previously, causing fuzz failure. Invariants in test should work now.",
      "created_at" : "2024-01-19T19:58:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29264#issuecomment-1901026758",
      "id" : 1901026758,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29264",
      "node_id" : "IC_kwDOABII585xT13G",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1901026758/reactions"
      },
      "updated_at" : "2024-01-19T19:58:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1901026758",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1459729161"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459729161"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "It would be better to make `max_input_weight` a fuzzed value.",
      "commit_id" : "7bfc80b70e3955c2c3b6f820f51a7d8d45aaff8e",
      "created_at" : "2024-01-19T20:38:36Z",
      "diff_hunk" : "@@ -112,22 +112,25 @@ FUZZ_TARGET(coinselection)\n     std::vector<OutputGroup> group_all;\n     GroupCoins(fuzzed_data_provider, utxo_pool, coin_params, /*positive_only=*/false, group_all);\n \n+    // Calculate upperbound of given input weight, allow all to be selected\n+    int total_input_weight{0};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1459729161",
      "id" : 1459729161,
      "line" : 116,
      "node_id" : "PRRC_kwDOABII585XAbMJ",
      "original_commit_id" : "7bfc80b70e3955c2c3b6f820f51a7d8d45aaff8e",
      "original_line" : 116,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/wallet/test/fuzz/coinselection.cpp",
      "position" : 5,
      "pull_request_review_id" : 1833647335,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459729161/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-19T20:38:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459729161",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4060799?v=4",
         "events_url" : "https://api.github.com/users/murchandamus/events{/privacy}",
         "followers_url" : "https://api.github.com/users/murchandamus/followers",
         "following_url" : "https://api.github.com/users/murchandamus/following{/other_user}",
         "gists_url" : "https://api.github.com/users/murchandamus/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/murchandamus",
         "id" : 4060799,
         "login" : "murchandamus",
         "node_id" : "MDQ6VXNlcjQwNjA3OTk=",
         "organizations_url" : "https://api.github.com/users/murchandamus/orgs",
         "received_events_url" : "https://api.github.com/users/murchandamus/received_events",
         "repos_url" : "https://api.github.com/users/murchandamus/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/murchandamus/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/murchandamus/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/murchandamus"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1463935963"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1463935963"
         }
      },
      "author_association" : "MEMBER",
      "body" : "hmmm, this change to give a useful error message seems to break tests; I start getting failures in rpc_psbt.py\r\n\r\nCan I get some assistance on how this stuff is supposed to bubble up @murchandamus ",
      "commit_id" : "ee36a888bea63f8987bdde101b7b69eb614d78be",
      "created_at" : "2024-01-23T20:09:47Z",
      "diff_hunk" : "@@ -335,23 +338,29 @@ util::Result<SelectionResult> KnapsackSolver(std::vector<OutputGroup>& groups, c\n         for (const auto& group : applicable_groups) {\n             result.AddInput(group);\n         }\n-        return result;\n+        if (result.GetWeight() <= max_input_weight) return result;\n+\n+        // Try something else\n+        result.Clear();\n     }\n \n     if (nTotalLower < nTargetValue) {\n-        if (!lowest_larger) return util::Error();\n+        if (!lowest_larger) return util::Error{Untranslated(strprintf(\"Only %d coins to cover target value of %d\", nTotalLower, nTargetValue))};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1463935963",
      "id" : 1463935963,
      "line" : 348,
      "node_id" : "PRRC_kwDOABII585XQePb",
      "original_commit_id" : "ee36a888bea63f8987bdde101b7b69eb614d78be",
      "original_line" : 348,
      "original_position" : 120,
      "original_start_line" : null,
      "path" : "src/wallet/coinselection.cpp",
      "position" : 120,
      "pull_request_review_id" : 1839834283,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1463935963/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-23T20:09:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1463935963",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1463942221"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1463942221"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I think you meant either \"Transaction building\" or \"Coin selection\" here:\r\n\r\n```suggestion\r\n                                                          \"Transaction building will fail if this can not be satisfied.\"},\r\n```\r\n\r\n```suggestion\r\n                                                          \"Coin selection will fail if this can not be satisfied.\"},\r\n```",
      "commit_id" : "ee36a888bea63f8987bdde101b7b69eb614d78be",
      "created_at" : "2024-01-23T20:15:37Z",
      "diff_hunk" : "@@ -799,6 +808,8 @@ RPCHelpMan fundrawtransaction()\n                                     },\n                                 },\n                              },\n+                            {\"max_tx_weight\", RPCArg::Type::NUM, RPCArg::Default{MAX_STANDARD_TX_WEIGHT}, \"The maximum acceptable transaction weight.\\n\"\n+                                                          \"Transaction selection will fail if this can not be satisfied.\"},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1463942221",
      "id" : 1463942221,
      "line" : 812,
      "node_id" : "PRRC_kwDOABII585XQfxN",
      "original_commit_id" : "7bfc80b70e3955c2c3b6f820f51a7d8d45aaff8e",
      "original_line" : 812,
      "original_position" : 28,
      "original_start_line" : null,
      "path" : "src/wallet/rpc/spend.cpp",
      "position" : 28,
      "pull_request_review_id" : 1839842692,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1463942221/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-23T20:29:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1463942221",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4060799?v=4",
         "events_url" : "https://api.github.com/users/murchandamus/events{/privacy}",
         "followers_url" : "https://api.github.com/users/murchandamus/followers",
         "following_url" : "https://api.github.com/users/murchandamus/following{/other_user}",
         "gists_url" : "https://api.github.com/users/murchandamus/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/murchandamus",
         "id" : 4060799,
         "login" : "murchandamus",
         "node_id" : "MDQ6VXNlcjQwNjA3OTk=",
         "organizations_url" : "https://api.github.com/users/murchandamus/orgs",
         "received_events_url" : "https://api.github.com/users/murchandamus/received_events",
         "repos_url" : "https://api.github.com/users/murchandamus/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/murchandamus/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/murchandamus/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/murchandamus"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1463942824"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1463942824"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "As above",
      "commit_id" : "ee36a888bea63f8987bdde101b7b69eb614d78be",
      "created_at" : "2024-01-23T20:16:17Z",
      "diff_hunk" : "@@ -1239,6 +1250,8 @@ RPCHelpMan send()\n                             {\"vout_index\", RPCArg::Type::NUM, RPCArg::Optional::OMITTED, \"The zero-based output index, before a change output is added.\"},\n                         },\n                     },\n+                    {\"max_tx_weight\", RPCArg::Type::NUM, RPCArg::Default{MAX_STANDARD_TX_WEIGHT}, \"The maximum acceptable transaction weight.\\n\"\n+                                                  \"Transaction selection will fail if this can not be satisfied.\"},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1463942824",
      "id" : 1463942824,
      "line" : 1254,
      "node_id" : "PRRC_kwDOABII585XQf6o",
      "original_commit_id" : "7bfc80b70e3955c2c3b6f820f51a7d8d45aaff8e",
      "original_line" : 1254,
      "original_position" : 37,
      "original_start_line" : null,
      "path" : "src/wallet/rpc/spend.cpp",
      "position" : 37,
      "pull_request_review_id" : 1839842692,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1463942824/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-23T20:29:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1463942824",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4060799?v=4",
         "events_url" : "https://api.github.com/users/murchandamus/events{/privacy}",
         "followers_url" : "https://api.github.com/users/murchandamus/followers",
         "following_url" : "https://api.github.com/users/murchandamus/following{/other_user}",
         "gists_url" : "https://api.github.com/users/murchandamus/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/murchandamus",
         "id" : 4060799,
         "login" : "murchandamus",
         "node_id" : "MDQ6VXNlcjQwNjA3OTk=",
         "organizations_url" : "https://api.github.com/users/murchandamus/orgs",
         "received_events_url" : "https://api.github.com/users/murchandamus/received_events",
         "repos_url" : "https://api.github.com/users/murchandamus/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/murchandamus/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/murchandamus/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/murchandamus"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1463943149"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1463943149"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "As above",
      "commit_id" : "ee36a888bea63f8987bdde101b7b69eb614d78be",
      "created_at" : "2024-01-23T20:16:39Z",
      "diff_hunk" : "@@ -1337,6 +1353,8 @@ RPCHelpMan sendall()\n                         {\"send_max\", RPCArg::Type::BOOL, RPCArg::Default{false}, \"When true, only use UTXOs that can pay for their own fees to maximize the output amount. When 'false' (default), no UTXO is left behind. send_max is incompatible with providing specific inputs.\"},\n                         {\"minconf\", RPCArg::Type::NUM, RPCArg::Default{0}, \"Require inputs with at least this many confirmations.\"},\n                         {\"maxconf\", RPCArg::Type::NUM, RPCArg::Optional::OMITTED, \"Require inputs with at most this many confirmations.\"},\n+                        {\"max_tx_weight\", RPCArg::Type::NUM, RPCArg::Default{MAX_STANDARD_TX_WEIGHT}, \"The maximum acceptable transaction weight.\\n\"\n+                                                      \"Transaction selection will fail if this can not be satisfied.\"},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1463943149",
      "id" : 1463943149,
      "line" : 1357,
      "node_id" : "PRRC_kwDOABII585XQf_t",
      "original_commit_id" : "7bfc80b70e3955c2c3b6f820f51a7d8d45aaff8e",
      "original_line" : 1357,
      "original_position" : 56,
      "original_start_line" : null,
      "path" : "src/wallet/rpc/spend.cpp",
      "position" : 56,
      "pull_request_review_id" : 1839842692,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1463943149/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-23T20:29:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1463943149",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4060799?v=4",
         "events_url" : "https://api.github.com/users/murchandamus/events{/privacy}",
         "followers_url" : "https://api.github.com/users/murchandamus/followers",
         "following_url" : "https://api.github.com/users/murchandamus/following{/other_user}",
         "gists_url" : "https://api.github.com/users/murchandamus/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/murchandamus",
         "id" : 4060799,
         "login" : "murchandamus",
         "node_id" : "MDQ6VXNlcjQwNjA3OTk=",
         "organizations_url" : "https://api.github.com/users/murchandamus/orgs",
         "received_events_url" : "https://api.github.com/users/murchandamus/received_events",
         "repos_url" : "https://api.github.com/users/murchandamus/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/murchandamus/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/murchandamus/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/murchandamus"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1463944668"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1463944668"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "As above",
      "commit_id" : "ee36a888bea63f8987bdde101b7b69eb614d78be",
      "created_at" : "2024-01-23T20:18:11Z",
      "diff_hunk" : "@@ -1679,6 +1708,8 @@ RPCHelpMan walletcreatefundedpsbt()\n                                     {\"vout_index\", RPCArg::Type::NUM, RPCArg::Optional::OMITTED, \"The zero-based output index, before a change output is added.\"},\n                                 },\n                             },\n+                            {\"max_tx_weight\", RPCArg::Type::NUM, RPCArg::Default{MAX_STANDARD_TX_WEIGHT}, \"The maximum acceptable transaction weight.\\n\"\n+                                                          \"Transaction selection will fail if this can not be satisfied.\"},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1463944668",
      "id" : 1463944668,
      "line" : 1712,
      "node_id" : "PRRC_kwDOABII585XQgXc",
      "original_commit_id" : "7bfc80b70e3955c2c3b6f820f51a7d8d45aaff8e",
      "original_line" : 1712,
      "original_position" : 83,
      "original_start_line" : null,
      "path" : "src/wallet/rpc/spend.cpp",
      "position" : 83,
      "pull_request_review_id" : 1839842692,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1463944668/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-23T20:29:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1463944668",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4060799?v=4",
         "events_url" : "https://api.github.com/users/murchandamus/events{/privacy}",
         "followers_url" : "https://api.github.com/users/murchandamus/followers",
         "following_url" : "https://api.github.com/users/murchandamus/following{/other_user}",
         "gists_url" : "https://api.github.com/users/murchandamus/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/murchandamus",
         "id" : 4060799,
         "login" : "murchandamus",
         "node_id" : "MDQ6VXNlcjQwNjA3OTk=",
         "organizations_url" : "https://api.github.com/users/murchandamus/orgs",
         "received_events_url" : "https://api.github.com/users/murchandamus/received_events",
         "repos_url" : "https://api.github.com/users/murchandamus/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/murchandamus/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/murchandamus/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/murchandamus"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1463947916"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1463947916"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "If you do, please also add an `assert` that checks whether the fuzzed value is greater than or equal to the resultâs weight.",
      "commit_id" : "ee36a888bea63f8987bdde101b7b69eb614d78be",
      "created_at" : "2024-01-23T20:21:46Z",
      "diff_hunk" : "@@ -112,22 +112,25 @@ FUZZ_TARGET(coinselection)\n     std::vector<OutputGroup> group_all;\n     GroupCoins(fuzzed_data_provider, utxo_pool, coin_params, /*positive_only=*/false, group_all);\n \n+    // Calculate upperbound of given input weight, allow all to be selected\n+    int total_input_weight{0};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1463947916",
      "id" : 1463947916,
      "in_reply_to_id" : 1459729161,
      "line" : 116,
      "node_id" : "PRRC_kwDOABII585XQhKM",
      "original_commit_id" : "7bfc80b70e3955c2c3b6f820f51a7d8d45aaff8e",
      "original_line" : 116,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/wallet/test/fuzz/coinselection.cpp",
      "position" : 5,
      "pull_request_review_id" : 1839842692,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1463947916/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-23T20:29:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1463947916",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4060799?v=4",
         "events_url" : "https://api.github.com/users/murchandamus/events{/privacy}",
         "followers_url" : "https://api.github.com/users/murchandamus/followers",
         "following_url" : "https://api.github.com/users/murchandamus/following{/other_user}",
         "gists_url" : "https://api.github.com/users/murchandamus/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/murchandamus",
         "id" : 4060799,
         "login" : "murchandamus",
         "node_id" : "MDQ6VXNlcjQwNjA3OTk=",
         "organizations_url" : "https://api.github.com/users/murchandamus/orgs",
         "received_events_url" : "https://api.github.com/users/murchandamus/received_events",
         "repos_url" : "https://api.github.com/users/murchandamus/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/murchandamus/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/murchandamus/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/murchandamus"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1463954606"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1463954606"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "My first thought would be that we are perhaps not counting the empty witness stack of a non-witness input? :thinking: \r\n\r\nIs this a blocker that needs to be addressed first?",
      "commit_id" : "ee36a888bea63f8987bdde101b7b69eb614d78be",
      "created_at" : "2024-01-23T20:28:20Z",
      "diff_hunk" : "@@ -187,6 +188,21 @@ def run_test(self):\n         # Create and fund a raw tx for sending 10 BTC\n         psbtx1 = self.nodes[0].walletcreatefundedpsbt([], {self.nodes[2].getnewaddress():10})['psbt']\n \n+        self.log.info(\"Test that max_tx_weight option is sanity checked and fails when expected\")\n+        dest_arg = [{self.nodes[0].getnewaddress(): 1}]\n+        assert_raises_rpc_error(-8, \"Invalid parameter, max tx weight must be between 0 and 400000\", self.nodes[0].walletcreatefundedpsbt, [], dest_arg, 0, {\"max_tx_weight\": -1})\n+        assert_raises_rpc_error(-8, \"Invalid parameter, max tx weight must be between 0 and 400000\", self.nodes[0].walletcreatefundedpsbt, [], dest_arg, 0, {\"max_tx_weight\": 400001})\n+\n+        self.log.info(\"Test that a funded PSBT is always faithful to max_tx_weight option\")\n+        for weight in [0, 1, MIN_STANDARD_TX_NONWITNESS_SIZE * WITNESS_SCALE_FACTOR]:\n+            assert_raises_rpc_error(-4, \"The inputs size exceeds the maximum weight\", self.nodes[0].walletcreatefundedpsbt, [], dest_arg, 0, {\"max_tx_weight\": weight})\n+\n+        sendall_dest = [self.nodes[0].getnewaddress()]\n+        max_send_psbt_result = self.nodes[0].sendall(sendall_dest, options={\"psbt\": True})\n+        max_send_weight = self.nodes[0].decoderawtransaction(max_send_psbt_result[\"hex\"])['weight']\n+        assert_raises_rpc_error(-4, \"Requested max tx weight exceeded:\", self.nodes[0].sendall, sendall_dest, options={\"max_tx_weight\": max_send_weight - 1, \"psbt\": True})\n+        self.nodes[0].sendall(sendall_dest, options={\"max_tx_weight\": max_send_weight + 4, \"psbt\": True}) # off by 4 sometimes?",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1463954606",
      "id" : 1463954606,
      "line" : 209,
      "node_id" : "PRRC_kwDOABII585XQiyu",
      "original_commit_id" : "7bfc80b70e3955c2c3b6f820f51a7d8d45aaff8e",
      "original_line" : 204,
      "original_position" : 25,
      "original_start_line" : null,
      "path" : "test/functional/rpc_psbt.py",
      "position" : 30,
      "pull_request_review_id" : 1839842692,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1463954606/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-23T20:29:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1463954606",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4060799?v=4",
         "events_url" : "https://api.github.com/users/murchandamus/events{/privacy}",
         "followers_url" : "https://api.github.com/users/murchandamus/followers",
         "following_url" : "https://api.github.com/users/murchandamus/following{/other_user}",
         "gists_url" : "https://api.github.com/users/murchandamus/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/murchandamus",
         "id" : 4060799,
         "login" : "murchandamus",
         "node_id" : "MDQ6VXNlcjQwNjA3OTk=",
         "organizations_url" : "https://api.github.com/users/murchandamus/orgs",
         "received_events_url" : "https://api.github.com/users/murchandamus/received_events",
         "repos_url" : "https://api.github.com/users/murchandamus/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/murchandamus/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/murchandamus/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/murchandamus"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n",
      "created_at" : "2024-01-23T23:30:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29264#issuecomment-1907087784",
      "id" : 1907087784,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29264",
      "node_id" : "IC_kwDOABII585xq9mo",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1907087784/reactions"
      },
      "updated_at" : "2024-01-23T23:30:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1907087784",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1464525381"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1464525381"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "suggestion, add \r\n\r\n```cpp\r\nif (group.m_weight <= max_input_weight) continue;\r\n```\r\non top of the for loop instead of checking within each condition.\r\n\r\nCurrently, you add groups that are above weight to `applicable_groups`",
      "commit_id" : "ee36a888bea63f8987bdde101b7b69eb614d78be",
      "created_at" : "2024-01-24T08:42:43Z",
      "diff_hunk" : "@@ -320,13 +323,13 @@ util::Result<SelectionResult> KnapsackSolver(std::vector<OutputGroup>& groups, c\n     Shuffle(groups.begin(), groups.end(), rng);\n \n     for (const OutputGroup& group : groups) {\n-        if (group.GetSelectionAmount() == nTargetValue) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1464525381",
      "id" : 1464525381,
      "line" : 323,
      "node_id" : "PRRC_kwDOABII585XSuJF",
      "original_commit_id" : "ee36a888bea63f8987bdde101b7b69eb614d78be",
      "original_line" : 323,
      "original_position" : 95,
      "original_start_line" : null,
      "path" : "src/wallet/coinselection.cpp",
      "position" : 95,
      "pull_request_review_id" : 1840770591,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1464525381/reactions"
      },
      "side" : "LEFT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-24T08:42:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1464525381",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1466284?v=4",
         "events_url" : "https://api.github.com/users/S3RK/events{/privacy}",
         "followers_url" : "https://api.github.com/users/S3RK/followers",
         "following_url" : "https://api.github.com/users/S3RK/following{/other_user}",
         "gists_url" : "https://api.github.com/users/S3RK/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/S3RK",
         "id" : 1466284,
         "login" : "S3RK",
         "node_id" : "MDQ6VXNlcjE0NjYyODQ=",
         "organizations_url" : "https://api.github.com/users/S3RK/orgs",
         "received_events_url" : "https://api.github.com/users/S3RK/received_events",
         "repos_url" : "https://api.github.com/users/S3RK/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/S3RK/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/S3RK/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/S3RK"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1464835996"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1464835996"
         }
      },
      "author_association" : "MEMBER",
      "body" : "if this is a bit of overcounting, that's probably ok?",
      "commit_id" : "ee36a888bea63f8987bdde101b7b69eb614d78be",
      "created_at" : "2024-01-24T12:21:41Z",
      "diff_hunk" : "@@ -187,6 +188,21 @@ def run_test(self):\n         # Create and fund a raw tx for sending 10 BTC\n         psbtx1 = self.nodes[0].walletcreatefundedpsbt([], {self.nodes[2].getnewaddress():10})['psbt']\n \n+        self.log.info(\"Test that max_tx_weight option is sanity checked and fails when expected\")\n+        dest_arg = [{self.nodes[0].getnewaddress(): 1}]\n+        assert_raises_rpc_error(-8, \"Invalid parameter, max tx weight must be between 0 and 400000\", self.nodes[0].walletcreatefundedpsbt, [], dest_arg, 0, {\"max_tx_weight\": -1})\n+        assert_raises_rpc_error(-8, \"Invalid parameter, max tx weight must be between 0 and 400000\", self.nodes[0].walletcreatefundedpsbt, [], dest_arg, 0, {\"max_tx_weight\": 400001})\n+\n+        self.log.info(\"Test that a funded PSBT is always faithful to max_tx_weight option\")\n+        for weight in [0, 1, MIN_STANDARD_TX_NONWITNESS_SIZE * WITNESS_SCALE_FACTOR]:\n+            assert_raises_rpc_error(-4, \"The inputs size exceeds the maximum weight\", self.nodes[0].walletcreatefundedpsbt, [], dest_arg, 0, {\"max_tx_weight\": weight})\n+\n+        sendall_dest = [self.nodes[0].getnewaddress()]\n+        max_send_psbt_result = self.nodes[0].sendall(sendall_dest, options={\"psbt\": True})\n+        max_send_weight = self.nodes[0].decoderawtransaction(max_send_psbt_result[\"hex\"])['weight']\n+        assert_raises_rpc_error(-4, \"Requested max tx weight exceeded:\", self.nodes[0].sendall, sendall_dest, options={\"max_tx_weight\": max_send_weight - 1, \"psbt\": True})\n+        self.nodes[0].sendall(sendall_dest, options={\"max_tx_weight\": max_send_weight + 4, \"psbt\": True}) # off by 4 sometimes?",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1464835996",
      "id" : 1464835996,
      "in_reply_to_id" : 1463954606,
      "line" : 209,
      "node_id" : "PRRC_kwDOABII585XT5-c",
      "original_commit_id" : "7bfc80b70e3955c2c3b6f820f51a7d8d45aaff8e",
      "original_line" : 204,
      "original_position" : 25,
      "original_start_line" : null,
      "path" : "test/functional/rpc_psbt.py",
      "position" : 30,
      "pull_request_review_id" : 1841248742,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1464835996/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-24T12:21:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1464835996",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1464840653"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1464840653"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Is the breakage not an actual issue: https://cirrus-ci.com/task/6124189116006400?logs=ci#L3274\r\n```bash\r\ntest_framework.authproxy.JSONRPCException: Only 4999872180 coins to cover target value of 5100000840 (-4)\r\n```",
      "commit_id" : "ee36a888bea63f8987bdde101b7b69eb614d78be",
      "created_at" : "2024-01-24T12:25:42Z",
      "diff_hunk" : "@@ -335,23 +338,29 @@ util::Result<SelectionResult> KnapsackSolver(std::vector<OutputGroup>& groups, c\n         for (const auto& group : applicable_groups) {\n             result.AddInput(group);\n         }\n-        return result;\n+        if (result.GetWeight() <= max_input_weight) return result;\n+\n+        // Try something else\n+        result.Clear();\n     }\n \n     if (nTotalLower < nTargetValue) {\n-        if (!lowest_larger) return util::Error();\n+        if (!lowest_larger) return util::Error{Untranslated(strprintf(\"Only %d coins to cover target value of %d\", nTotalLower, nTargetValue))};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1464840653",
      "id" : 1464840653,
      "in_reply_to_id" : 1463935963,
      "line" : 348,
      "node_id" : "PRRC_kwDOABII585XT7HN",
      "original_commit_id" : "ee36a888bea63f8987bdde101b7b69eb614d78be",
      "original_line" : 348,
      "original_position" : 120,
      "original_start_line" : null,
      "path" : "src/wallet/coinselection.cpp",
      "position" : 120,
      "pull_request_review_id" : 1841256155,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1464840653/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-24T12:25:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1464840653",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1464842951"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1464842951"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I can turn the error on and off locally by adding/removing the string from the error.",
      "commit_id" : "ee36a888bea63f8987bdde101b7b69eb614d78be",
      "created_at" : "2024-01-24T12:27:38Z",
      "diff_hunk" : "@@ -335,23 +338,29 @@ util::Result<SelectionResult> KnapsackSolver(std::vector<OutputGroup>& groups, c\n         for (const auto& group : applicable_groups) {\n             result.AddInput(group);\n         }\n-        return result;\n+        if (result.GetWeight() <= max_input_weight) return result;\n+\n+        // Try something else\n+        result.Clear();\n     }\n \n     if (nTotalLower < nTargetValue) {\n-        if (!lowest_larger) return util::Error();\n+        if (!lowest_larger) return util::Error{Untranslated(strprintf(\"Only %d coins to cover target value of %d\", nTotalLower, nTargetValue))};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1464842951",
      "id" : 1464842951,
      "in_reply_to_id" : 1463935963,
      "line" : 348,
      "node_id" : "PRRC_kwDOABII585XT7rH",
      "original_commit_id" : "ee36a888bea63f8987bdde101b7b69eb614d78be",
      "original_line" : 348,
      "original_position" : 120,
      "original_start_line" : null,
      "path" : "src/wallet/coinselection.cpp",
      "position" : 120,
      "pull_request_review_id" : 1841259702,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1464842951/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-24T12:27:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1464842951",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1464860895"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1464860895"
         }
      },
      "author_association" : "MEMBER",
      "body" : "The wallet code seems to be the only place where this pattern of `util::Error()` is used. Everywhere actual error strings are always provided.",
      "commit_id" : "ee36a888bea63f8987bdde101b7b69eb614d78be",
      "created_at" : "2024-01-24T12:43:04Z",
      "diff_hunk" : "@@ -335,23 +338,29 @@ util::Result<SelectionResult> KnapsackSolver(std::vector<OutputGroup>& groups, c\n         for (const auto& group : applicable_groups) {\n             result.AddInput(group);\n         }\n-        return result;\n+        if (result.GetWeight() <= max_input_weight) return result;\n+\n+        // Try something else\n+        result.Clear();\n     }\n \n     if (nTotalLower < nTargetValue) {\n-        if (!lowest_larger) return util::Error();\n+        if (!lowest_larger) return util::Error{Untranslated(strprintf(\"Only %d coins to cover target value of %d\", nTotalLower, nTargetValue))};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1464860895",
      "id" : 1464860895,
      "in_reply_to_id" : 1463935963,
      "line" : 348,
      "node_id" : "PRRC_kwDOABII585XUADf",
      "original_commit_id" : "ee36a888bea63f8987bdde101b7b69eb614d78be",
      "original_line" : 348,
      "original_position" : 120,
      "original_start_line" : null,
      "path" : "src/wallet/coinselection.cpp",
      "position" : 120,
      "pull_request_review_id" : 1841289213,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1464860895/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-24T12:43:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1464860895",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1464899774"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1464899774"
         }
      },
      "author_association" : "MEMBER",
      "body" : "The empty `util::Error()` is used to retrieve a \"no solution found for the provided inputs set\". If you specify an error message, then the wallet coin selection procedure treats it as a real error and bubble it up when no other selection algorithm succeeded.\r\n\r\nThe goal of this distinction is to differentiate between errors that should be bubbled up and coin selection algorithms' partial solutions. Remember that we are running each coin selection algorithm up to 7 times, extending the input set on every round. The \"no solution found\" return isn't definitive; it varies depending on the algorithm and the filtered coin set. That's why other errors, like the max weight exceeded, are stored and take precedence if no solution is found after running all selection rounds.\r\n\r\nI haven't gone deeper over this PR yet but the message you are adding here doesn't seems like an error. It is just describing the \"no solution found for the provided input set\" transient situation.",
      "commit_id" : "ee36a888bea63f8987bdde101b7b69eb614d78be",
      "created_at" : "2024-01-24T13:16:38Z",
      "diff_hunk" : "@@ -335,23 +338,29 @@ util::Result<SelectionResult> KnapsackSolver(std::vector<OutputGroup>& groups, c\n         for (const auto& group : applicable_groups) {\n             result.AddInput(group);\n         }\n-        return result;\n+        if (result.GetWeight() <= max_input_weight) return result;\n+\n+        // Try something else\n+        result.Clear();\n     }\n \n     if (nTotalLower < nTargetValue) {\n-        if (!lowest_larger) return util::Error();\n+        if (!lowest_larger) return util::Error{Untranslated(strprintf(\"Only %d coins to cover target value of %d\", nTotalLower, nTargetValue))};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1464899774",
      "id" : 1464899774,
      "in_reply_to_id" : 1463935963,
      "line" : 348,
      "node_id" : "PRRC_kwDOABII585XUJi-",
      "original_commit_id" : "ee36a888bea63f8987bdde101b7b69eb614d78be",
      "original_line" : 348,
      "original_position" : 120,
      "original_start_line" : null,
      "path" : "src/wallet/coinselection.cpp",
      "position" : 120,
      "pull_request_review_id" : 1841351906,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1464899774/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-24T13:39:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1464899774",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1464933701"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1464933701"
         }
      },
      "author_association" : "MEMBER",
      "body" : "> The empty util::Error() is used to retrieve a \"no solution found for the provided inputs set\". If you specify an error message, then the wallet coin selection procedure treats it as a real error and bubble it up when no other selection algorithm succeeded.\r\n\r\nOk. So then this is just a (confusing) misuse of the `Util::` API, where the wallet code is shoehorning non-error handling into an error handler.",
      "commit_id" : "ee36a888bea63f8987bdde101b7b69eb614d78be",
      "created_at" : "2024-01-24T13:43:56Z",
      "diff_hunk" : "@@ -335,23 +338,29 @@ util::Result<SelectionResult> KnapsackSolver(std::vector<OutputGroup>& groups, c\n         for (const auto& group : applicable_groups) {\n             result.AddInput(group);\n         }\n-        return result;\n+        if (result.GetWeight() <= max_input_weight) return result;\n+\n+        // Try something else\n+        result.Clear();\n     }\n \n     if (nTotalLower < nTargetValue) {\n-        if (!lowest_larger) return util::Error();\n+        if (!lowest_larger) return util::Error{Untranslated(strprintf(\"Only %d coins to cover target value of %d\", nTotalLower, nTargetValue))};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1464933701",
      "id" : 1464933701,
      "in_reply_to_id" : 1463935963,
      "line" : 348,
      "node_id" : "PRRC_kwDOABII585XUR1F",
      "original_commit_id" : "ee36a888bea63f8987bdde101b7b69eb614d78be",
      "original_line" : 348,
      "original_position" : 120,
      "original_start_line" : null,
      "path" : "src/wallet/coinselection.cpp",
      "position" : 120,
      "pull_request_review_id" : 1841408077,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1464933701/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-24T13:43:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1464933701",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1464960277"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1464960277"
         }
      },
      "author_association" : "MEMBER",
      "body" : "> > The empty util::Error() is used to retrieve a \"no solution found for the provided inputs set\". If you specify an error message, then the wallet coin selection procedure treats it as a real error and bubble it up when no other selection algorithm succeeded.\r\n> \r\n> Ok. So then this is just a (confusing) misuse of the `Util::` API, where the wallet code is shoehorning non-error handling into an error handler.\r\n\r\nIdeally, we should retrieve more info within the \"no solution found\" return path and not just the string message. I was waiting until we expand the result class functionality to accept a generic error return type. E.g. having `util::Result<M, E>` would let us do something like `util::Result<SelectionResult, SelectionError>`, where `SelectionError` would contain the string msg and a severity level int value. Which would help us differentiate the different outcomes and bubble up the highest severity error (if any). I actually left a comment for this in the [code](https://github.com/bitcoin/bitcoin/blob/e69796c79c0aa202087a13ba62d9fbcc1c8754d4/src/wallet/spend.cpp#L867).",
      "commit_id" : "ee36a888bea63f8987bdde101b7b69eb614d78be",
      "created_at" : "2024-01-24T14:02:50Z",
      "diff_hunk" : "@@ -335,23 +338,29 @@ util::Result<SelectionResult> KnapsackSolver(std::vector<OutputGroup>& groups, c\n         for (const auto& group : applicable_groups) {\n             result.AddInput(group);\n         }\n-        return result;\n+        if (result.GetWeight() <= max_input_weight) return result;\n+\n+        // Try something else\n+        result.Clear();\n     }\n \n     if (nTotalLower < nTargetValue) {\n-        if (!lowest_larger) return util::Error();\n+        if (!lowest_larger) return util::Error{Untranslated(strprintf(\"Only %d coins to cover target value of %d\", nTotalLower, nTargetValue))};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1464960277",
      "id" : 1464960277,
      "in_reply_to_id" : 1463935963,
      "line" : 348,
      "node_id" : "PRRC_kwDOABII585XUYUV",
      "original_commit_id" : "ee36a888bea63f8987bdde101b7b69eb614d78be",
      "original_line" : 348,
      "original_position" : 120,
      "original_start_line" : null,
      "path" : "src/wallet/coinselection.cpp",
      "position" : 120,
      "pull_request_review_id" : 1841452044,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1464960277/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-24T14:03:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1464960277",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1464970743"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1464970743"
         }
      },
      "author_association" : "MEMBER",
      "body" : "> I haven't gone deeper over this PR yet but the message you are adding here doesn't seems like an error. It is just describing the \"no solution found for the provided input set\" transient situation.\r\n\r\nAre you saying it's not confusing to give insufficient funds message on failure to stay within the weight limits given? I guess that's fine for now?",
      "commit_id" : "ee36a888bea63f8987bdde101b7b69eb614d78be",
      "created_at" : "2024-01-24T14:10:47Z",
      "diff_hunk" : "@@ -335,23 +338,29 @@ util::Result<SelectionResult> KnapsackSolver(std::vector<OutputGroup>& groups, c\n         for (const auto& group : applicable_groups) {\n             result.AddInput(group);\n         }\n-        return result;\n+        if (result.GetWeight() <= max_input_weight) return result;\n+\n+        // Try something else\n+        result.Clear();\n     }\n \n     if (nTotalLower < nTargetValue) {\n-        if (!lowest_larger) return util::Error();\n+        if (!lowest_larger) return util::Error{Untranslated(strprintf(\"Only %d coins to cover target value of %d\", nTotalLower, nTargetValue))};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1464970743",
      "id" : 1464970743,
      "in_reply_to_id" : 1463935963,
      "line" : 348,
      "node_id" : "PRRC_kwDOABII585XUa33",
      "original_commit_id" : "ee36a888bea63f8987bdde101b7b69eb614d78be",
      "original_line" : 348,
      "original_position" : 120,
      "original_start_line" : null,
      "path" : "src/wallet/coinselection.cpp",
      "position" : 120,
      "pull_request_review_id" : 1841469884,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1464970743/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-24T14:10:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1464970743",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1465002873"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1465002873"
         }
      },
      "author_association" : "MEMBER",
      "body" : "> > I haven't gone deeper over this PR yet but the message you are adding here doesn't seems like an error. It is just describing the \"no solution found for the provided input set\" transient situation.\r\n> \r\n> Are you saying it's not confusing to give insufficient funds message on failure to stay within the weight limits given? I guess that's fine for now?\r\n\r\nNot really. I was only referring to this line in question. Which, in a first glance, isn't retrieving an exceeded weight limit error. Still, give me a day to review the PR in-detail and will join the efforts here.",
      "commit_id" : "ee36a888bea63f8987bdde101b7b69eb614d78be",
      "created_at" : "2024-01-24T14:32:51Z",
      "diff_hunk" : "@@ -335,23 +338,29 @@ util::Result<SelectionResult> KnapsackSolver(std::vector<OutputGroup>& groups, c\n         for (const auto& group : applicable_groups) {\n             result.AddInput(group);\n         }\n-        return result;\n+        if (result.GetWeight() <= max_input_weight) return result;\n+\n+        // Try something else\n+        result.Clear();\n     }\n \n     if (nTotalLower < nTargetValue) {\n-        if (!lowest_larger) return util::Error();\n+        if (!lowest_larger) return util::Error{Untranslated(strprintf(\"Only %d coins to cover target value of %d\", nTotalLower, nTargetValue))};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1465002873",
      "id" : 1465002873,
      "in_reply_to_id" : 1463935963,
      "line" : 348,
      "node_id" : "PRRC_kwDOABII585XUit5",
      "original_commit_id" : "ee36a888bea63f8987bdde101b7b69eb614d78be",
      "original_line" : 348,
      "original_position" : 120,
      "original_start_line" : null,
      "path" : "src/wallet/coinselection.cpp",
      "position" : 120,
      "pull_request_review_id" : 1841522726,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1465002873/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-24T14:32:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1465002873",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1465052341"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1465052341"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Mh, itâs a bit of a smell if we cannot explain this.\r\nI considered input counter, empty witness stack, that we might estimate for a high-R signature in a PSBT, because we didnât sign it, and that we sometimes get a lower `r` value in the signature and therefore one of the two values is a byte shorter. But our default address type would be at least wrapped segwit, so that would only explain a weight difference of 1. I donât have a good idea at the moment. @achow101: Do you perhaps have an idea why this is happening?",
      "commit_id" : "ee36a888bea63f8987bdde101b7b69eb614d78be",
      "created_at" : "2024-01-24T15:02:58Z",
      "diff_hunk" : "@@ -187,6 +188,21 @@ def run_test(self):\n         # Create and fund a raw tx for sending 10 BTC\n         psbtx1 = self.nodes[0].walletcreatefundedpsbt([], {self.nodes[2].getnewaddress():10})['psbt']\n \n+        self.log.info(\"Test that max_tx_weight option is sanity checked and fails when expected\")\n+        dest_arg = [{self.nodes[0].getnewaddress(): 1}]\n+        assert_raises_rpc_error(-8, \"Invalid parameter, max tx weight must be between 0 and 400000\", self.nodes[0].walletcreatefundedpsbt, [], dest_arg, 0, {\"max_tx_weight\": -1})\n+        assert_raises_rpc_error(-8, \"Invalid parameter, max tx weight must be between 0 and 400000\", self.nodes[0].walletcreatefundedpsbt, [], dest_arg, 0, {\"max_tx_weight\": 400001})\n+\n+        self.log.info(\"Test that a funded PSBT is always faithful to max_tx_weight option\")\n+        for weight in [0, 1, MIN_STANDARD_TX_NONWITNESS_SIZE * WITNESS_SCALE_FACTOR]:\n+            assert_raises_rpc_error(-4, \"The inputs size exceeds the maximum weight\", self.nodes[0].walletcreatefundedpsbt, [], dest_arg, 0, {\"max_tx_weight\": weight})\n+\n+        sendall_dest = [self.nodes[0].getnewaddress()]\n+        max_send_psbt_result = self.nodes[0].sendall(sendall_dest, options={\"psbt\": True})\n+        max_send_weight = self.nodes[0].decoderawtransaction(max_send_psbt_result[\"hex\"])['weight']\n+        assert_raises_rpc_error(-4, \"Requested max tx weight exceeded:\", self.nodes[0].sendall, sendall_dest, options={\"max_tx_weight\": max_send_weight - 1, \"psbt\": True})\n+        self.nodes[0].sendall(sendall_dest, options={\"max_tx_weight\": max_send_weight + 4, \"psbt\": True}) # off by 4 sometimes?",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1465052341",
      "id" : 1465052341,
      "in_reply_to_id" : 1463954606,
      "line" : 209,
      "node_id" : "PRRC_kwDOABII585XUuy1",
      "original_commit_id" : "7bfc80b70e3955c2c3b6f820f51a7d8d45aaff8e",
      "original_line" : 204,
      "original_position" : 25,
      "original_start_line" : null,
      "path" : "test/functional/rpc_psbt.py",
      "position" : 30,
      "pull_request_review_id" : 1841607229,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1465052341/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-24T15:02:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1465052341",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4060799?v=4",
         "events_url" : "https://api.github.com/users/murchandamus/events{/privacy}",
         "followers_url" : "https://api.github.com/users/murchandamus/followers",
         "following_url" : "https://api.github.com/users/murchandamus/following{/other_user}",
         "gists_url" : "https://api.github.com/users/murchandamus/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/murchandamus",
         "id" : 4060799,
         "login" : "murchandamus",
         "node_id" : "MDQ6VXNlcjQwNjA3OTk=",
         "organizations_url" : "https://api.github.com/users/murchandamus/orgs",
         "received_events_url" : "https://api.github.com/users/murchandamus/received_events",
         "repos_url" : "https://api.github.com/users/murchandamus/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/murchandamus/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/murchandamus/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/murchandamus"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1465966822"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1465966822"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit: `lowest_larger` can't be above `max_input_weight`. You already checked it above. And in other similar cases below you don't check it second time.\r\n\r\nI prefer if we filter above weight inputs once at the top of the function.",
      "commit_id" : "ee36a888bea63f8987bdde101b7b69eb614d78be",
      "created_at" : "2024-01-25T07:55:02Z",
      "diff_hunk" : "@@ -335,23 +338,29 @@ util::Result<SelectionResult> KnapsackSolver(std::vector<OutputGroup>& groups, c\n         for (const auto& group : applicable_groups) {\n             result.AddInput(group);\n         }\n-        return result;\n+        if (result.GetWeight() <= max_input_weight) return result;\n+\n+        // Try something else\n+        result.Clear();\n     }\n \n     if (nTotalLower < nTargetValue) {\n-        if (!lowest_larger) return util::Error();\n+        if (!lowest_larger) return util::Error{Untranslated(strprintf(\"Only %d coins to cover target value of %d\", nTotalLower, nTargetValue))};\n         result.AddInput(*lowest_larger);\n-        return result;\n+        if (result.GetWeight() <= max_input_weight) return result;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1465966822",
      "id" : 1465966822,
      "line" : 350,
      "node_id" : "PRRC_kwDOABII585XYODm",
      "original_commit_id" : "ee36a888bea63f8987bdde101b7b69eb614d78be",
      "original_line" : 350,
      "original_position" : 123,
      "original_start_line" : null,
      "path" : "src/wallet/coinselection.cpp",
      "position" : 123,
      "pull_request_review_id" : 1843034369,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1465966822/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-25T07:56:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1465966822",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1466284?v=4",
         "events_url" : "https://api.github.com/users/S3RK/events{/privacy}",
         "followers_url" : "https://api.github.com/users/S3RK/followers",
         "following_url" : "https://api.github.com/users/S3RK/following{/other_user}",
         "gists_url" : "https://api.github.com/users/S3RK/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/S3RK",
         "id" : 1466284,
         "login" : "S3RK",
         "node_id" : "MDQ6VXNlcjE0NjYyODQ=",
         "organizations_url" : "https://api.github.com/users/S3RK/orgs",
         "received_events_url" : "https://api.github.com/users/S3RK/received_events",
         "repos_url" : "https://api.github.com/users/S3RK/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/S3RK/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/S3RK/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/S3RK"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1468635643"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1468635643"
         }
      },
      "author_association" : "MEMBER",
      "body" : "This does not seem to be necessary. As `sendall()` doesn't make use of the internal coin selection procedures, wouldn't make more sense to return the weight in the command result and let the user decide whether to broadcast the tx based on it?",
      "commit_id" : "ee36a888bea63f8987bdde101b7b69eb614d78be",
      "created_at" : "2024-01-27T20:31:10Z",
      "diff_hunk" : "@@ -1472,6 +1490,17 @@ RPCHelpMan sendall()\n             const CAmount fee_from_size{fee_rate.GetFee(tx_size.vsize)};\n             const CAmount effective_value{total_input_value - fee_from_size};\n \n+            // Cap tx weight based on estimated size if requested\n+            if (options.exists(\"max_tx_weight\")) {\n+                const auto max_tx_weight =  options[\"max_tx_weight\"].getInt<int>();\n+                if (max_tx_weight < 0 || max_tx_weight > MAX_STANDARD_TX_WEIGHT) {\n+                    throw JSONRPCError(RPC_WALLET_ERROR, strprintf(\"Invalid parameter, max tx weight must be between 0 %d\", MAX_STANDARD_TX_WEIGHT));\n+                }\n+                if (max_tx_weight < tx_size.weight) {\n+                    throw JSONRPCError(RPC_WALLET_ERROR, strprintf(\"Requested max tx weight exceeded: %d vs %s\", options[\"max_tx_weight\"].getInt<int>(), tx_size.weight));\n+                }\n+            }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1468635643",
      "id" : 1468635643,
      "line" : 1502,
      "node_id" : "PRRC_kwDOABII585XiZn7",
      "original_commit_id" : "7bfc80b70e3955c2c3b6f820f51a7d8d45aaff8e",
      "original_line" : 1502,
      "original_position" : 73,
      "original_start_line" : 1493,
      "path" : "src/wallet/rpc/spend.cpp",
      "position" : 73,
      "pull_request_review_id" : 1847260453,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1468635643/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 1493,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2024-01-27T20:32:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1468635643",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1470160697"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1470160697"
         }
      },
      "author_association" : "MEMBER",
      "body" : "would still like a good explanation for this",
      "commit_id" : "ee36a888bea63f8987bdde101b7b69eb614d78be",
      "created_at" : "2024-01-29T20:20:51Z",
      "diff_hunk" : "@@ -187,6 +188,21 @@ def run_test(self):\n         # Create and fund a raw tx for sending 10 BTC\n         psbtx1 = self.nodes[0].walletcreatefundedpsbt([], {self.nodes[2].getnewaddress():10})['psbt']\n \n+        self.log.info(\"Test that max_tx_weight option is sanity checked and fails when expected\")\n+        dest_arg = [{self.nodes[0].getnewaddress(): 1}]\n+        assert_raises_rpc_error(-8, \"Invalid parameter, max tx weight must be between 0 and 400000\", self.nodes[0].walletcreatefundedpsbt, [], dest_arg, 0, {\"max_tx_weight\": -1})\n+        assert_raises_rpc_error(-8, \"Invalid parameter, max tx weight must be between 0 and 400000\", self.nodes[0].walletcreatefundedpsbt, [], dest_arg, 0, {\"max_tx_weight\": 400001})\n+\n+        self.log.info(\"Test that a funded PSBT is always faithful to max_tx_weight option\")\n+        for weight in [0, 1, MIN_STANDARD_TX_NONWITNESS_SIZE * WITNESS_SCALE_FACTOR]:\n+            assert_raises_rpc_error(-4, \"The inputs size exceeds the maximum weight\", self.nodes[0].walletcreatefundedpsbt, [], dest_arg, 0, {\"max_tx_weight\": weight})\n+\n+        sendall_dest = [self.nodes[0].getnewaddress()]\n+        max_send_psbt_result = self.nodes[0].sendall(sendall_dest, options={\"psbt\": True})\n+        max_send_weight = self.nodes[0].decoderawtransaction(max_send_psbt_result[\"hex\"])['weight']\n+        assert_raises_rpc_error(-4, \"Requested max tx weight exceeded:\", self.nodes[0].sendall, sendall_dest, options={\"max_tx_weight\": max_send_weight - 1, \"psbt\": True})\n+        self.nodes[0].sendall(sendall_dest, options={\"max_tx_weight\": max_send_weight + 4, \"psbt\": True}) # off by 4 sometimes?",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1470160697",
      "id" : 1470160697,
      "in_reply_to_id" : 1463954606,
      "line" : 209,
      "node_id" : "PRRC_kwDOABII585XoN85",
      "original_commit_id" : "7bfc80b70e3955c2c3b6f820f51a7d8d45aaff8e",
      "original_line" : 204,
      "original_position" : 25,
      "original_start_line" : null,
      "path" : "test/functional/rpc_psbt.py",
      "position" : 30,
      "pull_request_review_id" : 1849689186,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1470160697/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-29T20:20:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1470160697",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1470161011"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1470161011"
         }
      },
      "author_association" : "MEMBER",
      "body" : "still waiting on some feedback on this point before moving forward with the PR",
      "commit_id" : "ee36a888bea63f8987bdde101b7b69eb614d78be",
      "created_at" : "2024-01-29T20:21:11Z",
      "diff_hunk" : "@@ -335,23 +338,29 @@ util::Result<SelectionResult> KnapsackSolver(std::vector<OutputGroup>& groups, c\n         for (const auto& group : applicable_groups) {\n             result.AddInput(group);\n         }\n-        return result;\n+        if (result.GetWeight() <= max_input_weight) return result;\n+\n+        // Try something else\n+        result.Clear();\n     }\n \n     if (nTotalLower < nTargetValue) {\n-        if (!lowest_larger) return util::Error();\n+        if (!lowest_larger) return util::Error{Untranslated(strprintf(\"Only %d coins to cover target value of %d\", nTotalLower, nTargetValue))};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1470161011",
      "id" : 1470161011,
      "in_reply_to_id" : 1463935963,
      "line" : 348,
      "node_id" : "PRRC_kwDOABII585XoOBz",
      "original_commit_id" : "ee36a888bea63f8987bdde101b7b69eb614d78be",
      "original_line" : 348,
      "original_position" : 120,
      "original_start_line" : null,
      "path" : "src/wallet/coinselection.cpp",
      "position" : 120,
      "pull_request_review_id" : 1849689644,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1470161011/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-29T20:21:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1470161011",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1471245338"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1471245338"
         }
      },
      "author_association" : "MEMBER",
      "body" : "To not add `policy/policy.h` dependency, which comes with other dependencies (`script/interpreter.h`, `script/solver.h`, etc..), would suggest to make this field optional. Treating `std::nullopt` as `MAX_STANDARD_TX_WEIGHT` internally. This is what we already do for other default values.",
      "commit_id" : "ee36a888bea63f8987bdde101b7b69eb614d78be",
      "created_at" : "2024-01-30T13:46:36Z",
      "diff_hunk" : "@@ -115,6 +116,8 @@ class CCoinControl\n     std::optional<uint32_t> m_locktime;\n     //! Version\n     std::optional<uint32_t> m_version;\n+    //! Caps weight of resulting tx\n+    int m_max_tx_weight{MAX_STANDARD_TX_WEIGHT};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1471245338",
      "id" : 1471245338,
      "line" : 120,
      "node_id" : "PRRC_kwDOABII585XsWwa",
      "original_commit_id" : "7bfc80b70e3955c2c3b6f820f51a7d8d45aaff8e",
      "original_line" : 120,
      "original_position" : 13,
      "original_start_line" : 119,
      "path" : "src/wallet/coincontrol.h",
      "position" : 13,
      "pull_request_review_id" : 1851319667,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1471245338/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 119,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2024-01-30T14:33:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1471245338",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1471255355"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1471255355"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Same as above, the `policy.h` dependency generates some noise on me. Would suggest to not default initialize `m_max_tx_weight`. Callers are already forced to provide the weight in the constructor.",
      "commit_id" : "ee36a888bea63f8987bdde101b7b69eb614d78be",
      "created_at" : "2024-01-30T13:52:03Z",
      "diff_hunk" : "@@ -174,10 +175,15 @@ struct CoinSelectionParams {\n      * 1) Received from other wallets, 2) replacing other txs, 3) that have been replaced.\n      */\n     bool m_include_unsafe_inputs = false;\n+    /**\n+     * The maximally sized transaction we are willing to make.\n+     */\n+    int32_t m_max_tx_weight{MAX_STANDARD_TX_WEIGHT};\n \n     CoinSelectionParams(FastRandomContext& rng_fast, size_t change_output_size, size_t change_spend_size,\n                         CAmount min_change_target, CFeeRate effective_feerate,\n-                        CFeeRate long_term_feerate, CFeeRate discard_feerate, size_t tx_noinputs_size, bool avoid_partial)\n+                        CFeeRate long_term_feerate, CFeeRate discard_feerate, size_t tx_noinputs_size, bool avoid_partial,\n+                        int32_t max_tx_weight=MAX_STANDARD_TX_WEIGHT)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1471255355",
      "id" : 1471255355,
      "line" : 186,
      "node_id" : "PRRC_kwDOABII585XsZM7",
      "original_commit_id" : "7bfc80b70e3955c2c3b6f820f51a7d8d45aaff8e",
      "original_line" : 186,
      "original_position" : 21,
      "original_start_line" : 181,
      "path" : "src/wallet/coinselection.h",
      "position" : 21,
      "pull_request_review_id" : 1851319667,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1471255355/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 181,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2024-01-30T14:33:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1471255355",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1471278057"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1471278057"
         }
      },
      "author_association" : "MEMBER",
      "body" : "@murchandamus, I'm not entirely sure about this naming change. At this point, we are placed at the coin selection algos level, which are situated a level below the transaction creation process. There is no concept of transaction weight here; only selection weight.",
      "commit_id" : "ee36a888bea63f8987bdde101b7b69eb614d78be",
      "created_at" : "2024-01-30T14:04:36Z",
      "diff_hunk" : "@@ -74,7 +74,7 @@ struct {\n static const size_t TOTAL_TRIES = 100000;\n \n util::Result<SelectionResult> SelectCoinsBnB(std::vector<OutputGroup>& utxo_pool, const CAmount& selection_target, const CAmount& cost_of_change,\n-                                             int max_weight)\n+                                             int max_input_weight)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1471278057",
      "id" : 1471278057,
      "in_reply_to_id" : 1459483691,
      "line" : 77,
      "node_id" : "PRRC_kwDOABII585Xsevp",
      "original_commit_id" : "069c1652ed22b5e22537f63946cedd6c68487b22",
      "original_line" : 77,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/wallet/coinselection.cpp",
      "position" : 5,
      "pull_request_review_id" : 1851319667,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1471278057/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-30T14:33:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1471278057",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1471333943"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1471333943"
         }
      },
      "author_association" : "MEMBER",
      "body" : "> still waiting on some feedback on this point before moving forward with the PR\r\n\r\n@instagibbs, see https://github.com/furszy/bitcoin-core/commit/b2d3ac32cb51a1f350b5a4005e6da39d712b8fa9. It makes the process consistent, returning the same \"weight exceeded\" error message when such scenario occurs. \r\n\r\nStill, I would like to revisit this PR further after you tackle https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1464525381 and most other comments.",
      "commit_id" : "ee36a888bea63f8987bdde101b7b69eb614d78be",
      "created_at" : "2024-01-30T14:32:53Z",
      "diff_hunk" : "@@ -335,23 +338,29 @@ util::Result<SelectionResult> KnapsackSolver(std::vector<OutputGroup>& groups, c\n         for (const auto& group : applicable_groups) {\n             result.AddInput(group);\n         }\n-        return result;\n+        if (result.GetWeight() <= max_input_weight) return result;\n+\n+        // Try something else\n+        result.Clear();\n     }\n \n     if (nTotalLower < nTargetValue) {\n-        if (!lowest_larger) return util::Error();\n+        if (!lowest_larger) return util::Error{Untranslated(strprintf(\"Only %d coins to cover target value of %d\", nTotalLower, nTargetValue))};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1471333943",
      "id" : 1471333943,
      "in_reply_to_id" : 1463935963,
      "line" : 348,
      "node_id" : "PRRC_kwDOABII585XssY3",
      "original_commit_id" : "ee36a888bea63f8987bdde101b7b69eb614d78be",
      "original_line" : 348,
      "original_position" : 120,
      "original_start_line" : null,
      "path" : "src/wallet/coinselection.cpp",
      "position" : 120,
      "pull_request_review_id" : 1851319667,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1471333943/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-30T14:34:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1471333943",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1484756018"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1484756018"
         }
      },
      "author_association" : "MEMBER",
      "body" : "max_selection_weight is also fine I think, both are better than status quo",
      "commit_id" : "ee36a888bea63f8987bdde101b7b69eb614d78be",
      "created_at" : "2024-02-09T20:05:33Z",
      "diff_hunk" : "@@ -74,7 +74,7 @@ struct {\n static const size_t TOTAL_TRIES = 100000;\n \n util::Result<SelectionResult> SelectCoinsBnB(std::vector<OutputGroup>& utxo_pool, const CAmount& selection_target, const CAmount& cost_of_change,\n-                                             int max_weight)\n+                                             int max_input_weight)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1484756018",
      "id" : 1484756018,
      "in_reply_to_id" : 1459483691,
      "line" : 77,
      "node_id" : "PRRC_kwDOABII585Yf5Qy",
      "original_commit_id" : "069c1652ed22b5e22537f63946cedd6c68487b22",
      "original_line" : 77,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/wallet/coinselection.cpp",
      "position" : 5,
      "pull_request_review_id" : 1873120380,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1484756018/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-02-09T20:05:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1484756018",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I'm not looking to push this forward for now, if someone wants to take it over be my guest. Draft for now.",
      "created_at" : "2024-02-12T17:27:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29264#issuecomment-1939199159",
      "id" : 1939199159,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29264",
      "node_id" : "IC_kwDOABII585zldS3",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1939199159/reactions"
      },
      "updated_at" : "2024-02-12T17:27:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1939199159",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1506395741"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1506395741"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I think you mean\r\n```cpp\r\nif (group.m_weight > max_input_weight) continue;\r\n```\r\nThis way we jusk skip group whose weight is larger than `max_input_weight` and avoid checking the weight limit for all the conditional branches below.",
      "commit_id" : "ee36a888bea63f8987bdde101b7b69eb614d78be",
      "created_at" : "2024-02-28T18:24:49Z",
      "diff_hunk" : "@@ -320,13 +323,13 @@ util::Result<SelectionResult> KnapsackSolver(std::vector<OutputGroup>& groups, c\n     Shuffle(groups.begin(), groups.end(), rng);\n \n     for (const OutputGroup& group : groups) {\n-        if (group.GetSelectionAmount() == nTargetValue) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1506395741",
      "id" : 1506395741,
      "in_reply_to_id" : 1464525381,
      "line" : 323,
      "node_id" : "PRRC_kwDOABII585ZycZd",
      "original_commit_id" : "ee36a888bea63f8987bdde101b7b69eb614d78be",
      "original_line" : 323,
      "original_position" : 95,
      "original_start_line" : null,
      "path" : "src/wallet/coinselection.cpp",
      "position" : 95,
      "pull_request_review_id" : 1906969070,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1506395741/reactions"
      },
      "side" : "LEFT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-02-28T18:36:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1506395741",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48946461?v=4",
         "events_url" : "https://api.github.com/users/ismaelsadeeq/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ismaelsadeeq/followers",
         "following_url" : "https://api.github.com/users/ismaelsadeeq/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ismaelsadeeq/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ismaelsadeeq",
         "id" : 48946461,
         "login" : "ismaelsadeeq",
         "node_id" : "MDQ6VXNlcjQ4OTQ2NDYx",
         "organizations_url" : "https://api.github.com/users/ismaelsadeeq/orgs",
         "received_events_url" : "https://api.github.com/users/ismaelsadeeq/received_events",
         "repos_url" : "https://api.github.com/users/ismaelsadeeq/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ismaelsadeeq/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ismaelsadeeq/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ismaelsadeeq"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> I'm not looking to push this forward for now, if someone wants to take it over be my guest. Draft for now.\r\n\r\nI opened https://github.com/bitcoin/bitcoin/pull/29523 that taken over from this and address the review comments here.",
      "created_at" : "2024-03-01T09:41:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29264#issuecomment-1972848345",
      "id" : 1972848345,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29264",
      "node_id" : "IC_kwDOABII5851l0bZ",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1972848345/reactions"
      },
      "updated_at" : "2024-03-01T09:41:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1972848345",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48946461?v=4",
         "events_url" : "https://api.github.com/users/ismaelsadeeq/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ismaelsadeeq/followers",
         "following_url" : "https://api.github.com/users/ismaelsadeeq/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ismaelsadeeq/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ismaelsadeeq",
         "id" : 48946461,
         "login" : "ismaelsadeeq",
         "node_id" : "MDQ6VXNlcjQ4OTQ2NDYx",
         "organizations_url" : "https://api.github.com/users/ismaelsadeeq/orgs",
         "received_events_url" : "https://api.github.com/users/ismaelsadeeq/received_events",
         "repos_url" : "https://api.github.com/users/ismaelsadeeq/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ismaelsadeeq/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ismaelsadeeq/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ismaelsadeeq"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1508751507"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1508751507"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I verified that this behavior happened, intermittently I get the weight of the transaction off by 4 bytes.\r\nI spent sometime debugging but did not figure why yet.\r\n\r\n---\r\nGoing by this suggestion https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1468635643 the test is now gone in the new PR https://github.com/bitcoin/bitcoin/pull/29523 , I believe the issue is unrelated.\r\n\r\nShould I open an issue for this?\r\n\r\n",
      "commit_id" : "ee36a888bea63f8987bdde101b7b69eb614d78be",
      "created_at" : "2024-03-01T09:54:10Z",
      "diff_hunk" : "@@ -187,6 +188,21 @@ def run_test(self):\n         # Create and fund a raw tx for sending 10 BTC\n         psbtx1 = self.nodes[0].walletcreatefundedpsbt([], {self.nodes[2].getnewaddress():10})['psbt']\n \n+        self.log.info(\"Test that max_tx_weight option is sanity checked and fails when expected\")\n+        dest_arg = [{self.nodes[0].getnewaddress(): 1}]\n+        assert_raises_rpc_error(-8, \"Invalid parameter, max tx weight must be between 0 and 400000\", self.nodes[0].walletcreatefundedpsbt, [], dest_arg, 0, {\"max_tx_weight\": -1})\n+        assert_raises_rpc_error(-8, \"Invalid parameter, max tx weight must be between 0 and 400000\", self.nodes[0].walletcreatefundedpsbt, [], dest_arg, 0, {\"max_tx_weight\": 400001})\n+\n+        self.log.info(\"Test that a funded PSBT is always faithful to max_tx_weight option\")\n+        for weight in [0, 1, MIN_STANDARD_TX_NONWITNESS_SIZE * WITNESS_SCALE_FACTOR]:\n+            assert_raises_rpc_error(-4, \"The inputs size exceeds the maximum weight\", self.nodes[0].walletcreatefundedpsbt, [], dest_arg, 0, {\"max_tx_weight\": weight})\n+\n+        sendall_dest = [self.nodes[0].getnewaddress()]\n+        max_send_psbt_result = self.nodes[0].sendall(sendall_dest, options={\"psbt\": True})\n+        max_send_weight = self.nodes[0].decoderawtransaction(max_send_psbt_result[\"hex\"])['weight']\n+        assert_raises_rpc_error(-4, \"Requested max tx weight exceeded:\", self.nodes[0].sendall, sendall_dest, options={\"max_tx_weight\": max_send_weight - 1, \"psbt\": True})\n+        self.nodes[0].sendall(sendall_dest, options={\"max_tx_weight\": max_send_weight + 4, \"psbt\": True}) # off by 4 sometimes?",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1508751507",
      "id" : 1508751507,
      "in_reply_to_id" : 1463954606,
      "line" : 209,
      "node_id" : "PRRC_kwDOABII585Z7biT",
      "original_commit_id" : "7bfc80b70e3955c2c3b6f820f51a7d8d45aaff8e",
      "original_line" : 204,
      "original_position" : 25,
      "original_start_line" : null,
      "path" : "test/functional/rpc_psbt.py",
      "position" : 30,
      "pull_request_review_id" : 1910740858,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1508751507/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-03-01T09:54:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1508751507",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48946461?v=4",
         "events_url" : "https://api.github.com/users/ismaelsadeeq/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ismaelsadeeq/followers",
         "following_url" : "https://api.github.com/users/ismaelsadeeq/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ismaelsadeeq/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ismaelsadeeq",
         "id" : 48946461,
         "login" : "ismaelsadeeq",
         "node_id" : "MDQ6VXNlcjQ4OTQ2NDYx",
         "organizations_url" : "https://api.github.com/users/ismaelsadeeq/orgs",
         "received_events_url" : "https://api.github.com/users/ismaelsadeeq/received_events",
         "repos_url" : "https://api.github.com/users/ismaelsadeeq/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ismaelsadeeq/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ismaelsadeeq/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ismaelsadeeq"
      }
   }
]
