[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage\nFor detailed information about the code coverage, see the [test coverage report](https://corecheck.dev/bitcoin/bitcoin/pulls/29259).\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\nA summary of reviews will appear here.\n",
      "created_at" : "2024-01-17T10:48:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29259#issuecomment-1895555678",
      "id" : 1895555678,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29259",
      "node_id" : "IC_kwDOABII585w--Je",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1895555678/reactions"
      },
      "updated_at" : "2024-01-17T10:48:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1895555678",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> splurge on a Cirrus account, and since Github free minutes are limited\r\n\r\nA Cirrus account is free for public open source projects, as well as persistent workers connected to it. GitHub \"free\" minutes should also be unlimited for public open source, no?\r\n\r\n> Related: I wrote a [gist](https://gist.github.com/Sjors/cd55370fa67aa095df90c433ee9bd135) for how to run CI on Ubuntu desktop with one runner per window.\r\n\r\nNice, but generally I don't think there is a need to run *all* CI tasks locally, because it is faster and easier to just use your normal workflow to compile and run the Bitcoin Core tests. Using the normal workflow has the benefit that modifications are faster picked up, without having to start the CI task from scratch.\r\n\r\nGenerally, I expect the workflow to be something like:\r\n\r\n* Write code, format code.\r\n* Compile and run tests (manual, unit, functional, fuzz, ...), depending on what was changed.\r\n* Make a pull request and wait for the CI result. (`lint` should be running and be complete within a minute or two)\r\n* In case there is a CI failure, the fix is either trivial and obvious, in which case a quick force push can be done\r\n* If not, the CI failure should be reproduced locally by using sanitizers (valigrind, asan, ...) or libFuzzer, or whatever config flag is used in the CI task that caused the failure.\r\n* Only if the failure can not be reproduced in the normal workflow, the CI task can be debugged via the CI runner. (Depending on how many pushes are needed, people are free to use the public runners in this repo, I'd say)",
      "created_at" : "2024-01-17T11:21:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29259#issuecomment-1895608079",
      "id" : 1895608079,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29259",
      "node_id" : "IC_kwDOABII585w_K8P",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1895608079/reactions"
      },
      "updated_at" : "2024-01-17T11:21:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1895608079",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/maflcko/events{/privacy}",
         "followers_url" : "https://api.github.com/users/maflcko/followers",
         "following_url" : "https://api.github.com/users/maflcko/following{/other_user}",
         "gists_url" : "https://api.github.com/users/maflcko/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/maflcko",
         "id" : 6399679,
         "login" : "maflcko",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/maflcko/orgs",
         "received_events_url" : "https://api.github.com/users/maflcko/received_events",
         "repos_url" : "https://api.github.com/users/maflcko/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/maflcko/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/maflcko/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/maflcko"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29259#discussion_r1455306117"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29259"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1455306117"
         }
      },
      "author_association" : "MEMBER",
      "body" : "unrelated: Generally I'd find it better if we get rid of the commit range completely. For example, when running the whitespace linter, it seems easier to just lint all code at `HEAD`, instead of trying to guess which code was modified and only lint that.",
      "commit_id" : "06878f08c704408a4b20c2447628f40de8fb0c75",
      "created_at" : "2024-01-17T11:25:10Z",
      "diff_hunk" : "@@ -11,7 +11,7 @@ set -ex\n if [ -n \"$LOCAL_BRANCH\" ]; then\n   # To faithfully recreate CI linting locally, specify all commits on the current\n   # branch.\n-  COMMIT_RANGE=\"$(git merge-base HEAD master)..HEAD\"\n+  COMMIT_RANGE=\"$(git merge-base HEAD origin/master)..HEAD\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29259#discussion_r1455306117",
      "id" : 1455306117,
      "line" : 14,
      "node_id" : "PRRC_kwDOABII585WvjWF",
      "original_commit_id" : "51b9268d0b17bd6c66de2332e4cfd70735f6f13d",
      "original_line" : 14,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "ci/lint/06_script.sh",
      "position" : 5,
      "pull_request_review_id" : 1827082652,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29259",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1455306117/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-17T11:25:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1455306117",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/maflcko/events{/privacy}",
         "followers_url" : "https://api.github.com/users/maflcko/followers",
         "following_url" : "https://api.github.com/users/maflcko/following{/other_user}",
         "gists_url" : "https://api.github.com/users/maflcko/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/maflcko",
         "id" : 6399679,
         "login" : "maflcko",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/maflcko/orgs",
         "received_events_url" : "https://api.github.com/users/maflcko/received_events",
         "repos_url" : "https://api.github.com/users/maflcko/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/maflcko/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/maflcko/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/maflcko"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29259#discussion_r1455306954"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29259"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1455306954"
         }
      },
      "author_association" : "MEMBER",
      "body" : "May be good to explain this change?",
      "commit_id" : "06878f08c704408a4b20c2447628f40de8fb0c75",
      "created_at" : "2024-01-17T11:25:35Z",
      "diff_hunk" : "@@ -52,7 +52,7 @@ if [ -z \"$DANGER_RUN_CI_ON_HOST\" ]; then\n                   --mount \"type=volume,src=${CONTAINER_NAME}_depends_sources,dst=$DEPENDS_DIR/sources\" \\\n                   --mount \"type=volume,src=${CONTAINER_NAME}_depends_SDKs_android,dst=$DEPENDS_DIR/SDKs/android\" \\\n                   --mount \"type=volume,src=${CONTAINER_NAME}_previous_releases,dst=$PREVIOUS_RELEASES_DIR\" \\\n-                  --env-file /tmp/env \\\n+                  --env-file /tmp/env-$USER \\",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29259#discussion_r1455306954",
      "id" : 1455306954,
      "line" : 55,
      "node_id" : "PRRC_kwDOABII585WvjjK",
      "original_commit_id" : "3144fb3e873025c2320d1f9ca625a8c7d2428701",
      "original_line" : 55,
      "original_position" : 17,
      "original_start_line" : null,
      "path" : "ci/test/02_run_container.sh",
      "position" : 17,
      "pull_request_review_id" : 1827083347,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29259",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1455306954/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-17T11:25:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1455306954",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/maflcko/events{/privacy}",
         "followers_url" : "https://api.github.com/users/maflcko/followers",
         "following_url" : "https://api.github.com/users/maflcko/following{/other_user}",
         "gists_url" : "https://api.github.com/users/maflcko/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/maflcko",
         "id" : 6399679,
         "login" : "maflcko",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/maflcko/orgs",
         "received_events_url" : "https://api.github.com/users/maflcko/received_events",
         "repos_url" : "https://api.github.com/users/maflcko/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/maflcko/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/maflcko/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/maflcko"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29259#discussion_r1455543617"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29259"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1455543617"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Hours and hours of headache :-)\r\n\r\nBecause I run four workers as different users, all builds would silently fail for the other users because they didn't have write permission on `/tmp/env`.",
      "commit_id" : "06878f08c704408a4b20c2447628f40de8fb0c75",
      "created_at" : "2024-01-17T13:19:03Z",
      "diff_hunk" : "@@ -52,7 +52,7 @@ if [ -z \"$DANGER_RUN_CI_ON_HOST\" ]; then\n                   --mount \"type=volume,src=${CONTAINER_NAME}_depends_sources,dst=$DEPENDS_DIR/sources\" \\\n                   --mount \"type=volume,src=${CONTAINER_NAME}_depends_SDKs_android,dst=$DEPENDS_DIR/SDKs/android\" \\\n                   --mount \"type=volume,src=${CONTAINER_NAME}_previous_releases,dst=$PREVIOUS_RELEASES_DIR\" \\\n-                  --env-file /tmp/env \\\n+                  --env-file /tmp/env-$USER \\",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29259#discussion_r1455543617",
      "id" : 1455543617,
      "in_reply_to_id" : 1455306954,
      "line" : 55,
      "node_id" : "PRRC_kwDOABII585WwdVB",
      "original_commit_id" : "3144fb3e873025c2320d1f9ca625a8c7d2428701",
      "original_line" : 55,
      "original_position" : 17,
      "original_start_line" : null,
      "path" : "ci/test/02_run_container.sh",
      "position" : 17,
      "pull_request_review_id" : 1827280296,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29259",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1455543617/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-17T13:19:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1455543617",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> A Cirrus account is free for public open source projects, as well as persistent workers connected to it.\r\n\r\nOh that's nice.\r\n\r\n> GitHub \"free\" minutes should also be unlimited for public open source, no?\r\n\r\nAh, that could explain why my minutes aren't decreasing in Github settings despite having done a few CI runs. If that's documented somewhere then I'll drop a3b5b87a6a366579d6aa286956462dfadc6a13d9.\r\n\r\n---\r\n\r\n>> Related: I wrote a [gist](https://gist.github.com/Sjors/cd55370fa67aa095df90c433ee9bd135) for how to run CI on Ubuntu desktop with one runner per window.\r\n\r\n> Nice, but generally I don't think there is a need to run all CI tasks locally, because it is faster and easier to just use your normal workflow to compile and run the Bitcoin Core tests.\r\n\r\nIn the general case I agree. I usually run only a few tests related to what I'm working on, and then the whole test suite before pushing (well, not always...).\r\n\r\nBut I've occasionally managed to trip up one or two CI instances on e.g. memory leaks. Sometimes I can reproduce them locally with a configure change, but other configurations are trickier. For those cases I can further improve the gist to only run a subset of the jobs.\r\n\r\n> If not, the CI failure should be reproduced locally by using sanitizers (valigrind, asan, ...) or libFuzzer, or whatever config flag is used in the CI task that caused the failure.",
      "created_at" : "2024-01-17T13:28:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29259#issuecomment-1895813220",
      "id" : 1895813220,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29259",
      "node_id" : "IC_kwDOABII585w_9Bk",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1895813220/reactions"
      },
      "updated_at" : "2024-01-17T13:28:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1895813220",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29259#discussion_r1455566352"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29259"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1455566352"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Ah. May be better to use `$CONTAINER_NAME` then?\r\n\r\nCould be a separate pull request, because this is a bug fix?",
      "commit_id" : "06878f08c704408a4b20c2447628f40de8fb0c75",
      "created_at" : "2024-01-17T13:29:24Z",
      "diff_hunk" : "@@ -52,7 +52,7 @@ if [ -z \"$DANGER_RUN_CI_ON_HOST\" ]; then\n                   --mount \"type=volume,src=${CONTAINER_NAME}_depends_sources,dst=$DEPENDS_DIR/sources\" \\\n                   --mount \"type=volume,src=${CONTAINER_NAME}_depends_SDKs_android,dst=$DEPENDS_DIR/SDKs/android\" \\\n                   --mount \"type=volume,src=${CONTAINER_NAME}_previous_releases,dst=$PREVIOUS_RELEASES_DIR\" \\\n-                  --env-file /tmp/env \\\n+                  --env-file /tmp/env-$USER \\",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29259#discussion_r1455566352",
      "id" : 1455566352,
      "in_reply_to_id" : 1455306954,
      "line" : 55,
      "node_id" : "PRRC_kwDOABII585Wwi4Q",
      "original_commit_id" : "3144fb3e873025c2320d1f9ca625a8c7d2428701",
      "original_line" : 55,
      "original_position" : 17,
      "original_start_line" : null,
      "path" : "ci/test/02_run_container.sh",
      "position" : 17,
      "pull_request_review_id" : 1827300599,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29259",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1455566352/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-17T13:29:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1455566352",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/maflcko/events{/privacy}",
         "followers_url" : "https://api.github.com/users/maflcko/followers",
         "following_url" : "https://api.github.com/users/maflcko/following{/other_user}",
         "gists_url" : "https://api.github.com/users/maflcko/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/maflcko",
         "id" : 6399679,
         "login" : "maflcko",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/maflcko/orgs",
         "received_events_url" : "https://api.github.com/users/maflcko/received_events",
         "repos_url" : "https://api.github.com/users/maflcko/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/maflcko/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/maflcko/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/maflcko"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> But I've occasionally managed to trip up one or two CI instances on e.g. memory leaks. Sometimes I can reproduce them locally with a configure change, but other configurations are trickier. For those cases I can further improve the gist to only run a subset of the jobs.\r\n\r\nIn that case it seems easier to just run the \"one or two\" CI tasks on your machine that would become the \"self-hosted runner\", instead of going through the extra step to set up GitHub CI and the self-hosted runner with GHA?",
      "created_at" : "2024-01-17T13:32:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29259#issuecomment-1895822246",
      "id" : 1895822246,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29259",
      "node_id" : "IC_kwDOABII585w__Om",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1895822246/reactions"
      },
      "updated_at" : "2024-01-17T13:32:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1895822246",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/maflcko/events{/privacy}",
         "followers_url" : "https://api.github.com/users/maflcko/followers",
         "following_url" : "https://api.github.com/users/maflcko/following{/other_user}",
         "gists_url" : "https://api.github.com/users/maflcko/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/maflcko",
         "id" : 6399679,
         "login" : "maflcko",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/maflcko/orgs",
         "received_events_url" : "https://api.github.com/users/maflcko/received_events",
         "repos_url" : "https://api.github.com/users/maflcko/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/maflcko/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/maflcko/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/maflcko"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> > A Cirrus account is free for public open source projects, as well as persistent workers connected to it.\r\n> \r\n> Oh that's nice.\r\n\r\nSo it should be possible to achieve the same without touching any code here, by moving your GHA self-hosted runners to Cirrus.\r\n\r\nRegardless, given that GHA minutes are \"free\", feel free to move the Cirrus self-hosted runners over to GHA-hosted runners. Not sure if this is trivially possible for all tasks, but if it is, it would make it easier to run the CI on forks with less hardware to setup.",
      "created_at" : "2024-01-17T13:36:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29259#issuecomment-1895830004",
      "id" : 1895830004,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29259",
      "node_id" : "IC_kwDOABII585xABH0",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1895830004/reactions"
      },
      "updated_at" : "2024-01-17T13:36:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1895830004",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/maflcko/events{/privacy}",
         "followers_url" : "https://api.github.com/users/maflcko/followers",
         "following_url" : "https://api.github.com/users/maflcko/following{/other_user}",
         "gists_url" : "https://api.github.com/users/maflcko/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/maflcko",
         "id" : 6399679,
         "login" : "maflcko",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/maflcko/orgs",
         "received_events_url" : "https://api.github.com/users/maflcko/received_events",
         "repos_url" : "https://api.github.com/users/maflcko/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/maflcko/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/maflcko/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/maflcko"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "It looks like Github's \"test each commit\" makes an assumption that doesn't hold for forks: https://github.com/Sjors/bitcoin/actions/runs/7556559882/job/20573828392?pr=28",
      "created_at" : "2024-01-17T13:42:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29259#issuecomment-1895839707",
      "id" : 1895839707,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29259",
      "node_id" : "IC_kwDOABII585xADfb",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1895839707/reactions"
      },
      "updated_at" : "2024-01-17T13:42:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1895839707",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> So it should be possible to achieve the same without touching any code here, by moving your GHA self-hosted runners to Cirrus.\r\n\r\nI haven't looked into how self-hosted runners work with Cirrus. Adding another SAAS company into the loop seems suboptimal. And if Cirrus also reads all it configuration out of a yaml file in the repo, would it actually reduce the amount of code changes in the main repo?\r\n",
      "created_at" : "2024-01-17T13:47:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29259#issuecomment-1895847621",
      "id" : 1895847621,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29259",
      "node_id" : "IC_kwDOABII585xAFbF",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1895847621/reactions"
      },
      "updated_at" : "2024-01-17T13:47:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1895847621",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> It looks like Github's \"test each commit\" makes an assumption that doesn't hold for forks: https://github.com/Sjors/bitcoin/actions/runs/7556559882/job/20573828392?pr=28\r\n\r\nYes, see https://github.com/Sjors/bitcoin/actions/runs/7556559882/job/20573828392?pr=28#step:4:42",
      "created_at" : "2024-01-17T13:47:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29259#issuecomment-1895848089",
      "id" : 1895848089,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29259",
      "node_id" : "IC_kwDOABII585xAFiZ",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1895848089/reactions"
      },
      "updated_at" : "2024-01-17T13:47:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1895848089",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/maflcko/events{/privacy}",
         "followers_url" : "https://api.github.com/users/maflcko/followers",
         "following_url" : "https://api.github.com/users/maflcko/following{/other_user}",
         "gists_url" : "https://api.github.com/users/maflcko/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/maflcko",
         "id" : 6399679,
         "login" : "maflcko",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/maflcko/orgs",
         "received_events_url" : "https://api.github.com/users/maflcko/received_events",
         "repos_url" : "https://api.github.com/users/maflcko/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/maflcko/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/maflcko/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/maflcko"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> And if Cirrus also reads all it configuration out of a yaml file in the repo, would it actually reduce the amount of code changes in the main repo?\r\n\r\nThe workers currently use Cirrus self-hosted ones, so no changes are needed. This is documented in the cirrus yaml",
      "created_at" : "2024-01-17T13:48:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29259#issuecomment-1895850175",
      "id" : 1895850175,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29259",
      "node_id" : "IC_kwDOABII585xAGC_",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1895850175/reactions"
      },
      "updated_at" : "2024-01-17T13:48:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1895850175",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/maflcko/events{/privacy}",
         "followers_url" : "https://api.github.com/users/maflcko/followers",
         "following_url" : "https://api.github.com/users/maflcko/following{/other_user}",
         "gists_url" : "https://api.github.com/users/maflcko/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/maflcko",
         "id" : 6399679,
         "login" : "maflcko",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/maflcko/orgs",
         "received_events_url" : "https://api.github.com/users/maflcko/received_events",
         "repos_url" : "https://api.github.com/users/maflcko/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/maflcko/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/maflcko/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/maflcko"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> A Cirrus account is free for public open source projects, as well as persistent workers connected to it. \r\n\r\n> The workers currently use Cirrus self-hosted ones, so no changes are needed. This is documented in the cirrus yaml\r\n\r\nThis is a bit confusing. It's free but we use self hosting instead? Is that for performance, security some configuration issue?\r\n\r\nI just gave Cirrus permission to run on my fork, but it complains \"No public persistent worker pools found!\" for all jobs. So I guess self-hosting is not optional for forks?\r\n\r\nI'll see if I can figure out how to get this to work. It seems the first step is to add a (private?) worker in https://cirrus-ci.com/settings/github/Sjors and then install cirrus-cli in a way similar to how it works for Github?\r\n\r\nhttps://github.com/cirruslabs/cirrus-cli/blob/master/PERSISTENT-WORKERS.md\r\n\r\nIn the long run a (slight) dependency on Cirrus for CI may be better than Github, since the deeper we integrate with Github, the more difficult it is to move code hosting / coordination elsewhere. ",
      "created_at" : "2024-01-17T14:05:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29259#issuecomment-1895881805",
      "id" : 1895881805,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29259",
      "node_id" : "IC_kwDOABII585xANxN",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1895881805/reactions"
      },
      "updated_at" : "2024-01-17T14:08:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1895881805",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "The assumptions for the runners are documented where they are configured: https://github.com/bitcoin/bitcoin/blob/master/.cirrus.yml#L16",
      "created_at" : "2024-01-17T14:12:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29259#issuecomment-1895893619",
      "id" : 1895893619,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29259",
      "node_id" : "IC_kwDOABII585xAQpz",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1895893619/reactions"
      },
      "updated_at" : "2024-01-17T14:12:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1895893619",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/maflcko/events{/privacy}",
         "followers_url" : "https://api.github.com/users/maflcko/followers",
         "following_url" : "https://api.github.com/users/maflcko/following{/other_user}",
         "gists_url" : "https://api.github.com/users/maflcko/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/maflcko",
         "id" : 6399679,
         "login" : "maflcko",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/maflcko/orgs",
         "received_events_url" : "https://api.github.com/users/maflcko/received_events",
         "repos_url" : "https://api.github.com/users/maflcko/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/maflcko/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/maflcko/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/maflcko"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I'll try to get that to work. At first glance it doesn't seem more complicated than the Github approach. If so then I'll close this and salvage the first two commits.",
      "created_at" : "2024-01-17T14:17:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29259#issuecomment-1895905890",
      "id" : 1895905890,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29259",
      "node_id" : "IC_kwDOABII585xATpi",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1895905890/reactions"
      },
      "updated_at" : "2024-01-17T14:17:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1895905890",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   }
]
