[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage\nFor detailed information about the code coverage, see the [test coverage report](https://corecheck.dev/bitcoin/bitcoin/pulls/29278).\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Concept ACK | [murchandamus](https://github.com/bitcoin/bitcoin/pull/29278#pullrequestreview-1854463255), [josibake](https://github.com/bitcoin/bitcoin/pull/29278#issuecomment-1919698019) |\n\nIf your review is incorrectly listed, please react with ð to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#29415](https://github.com/bitcoin/bitcoin/pull/29415) (Broadcast own transactions only via short-lived Tor or I2P connections by vasild)\n* [#29015](https://github.com/bitcoin/bitcoin/pull/29015) (kernel: Streamline util library by ryanofsky)\n* [#28960](https://github.com/bitcoin/bitcoin/pull/28960) (kernel: Remove dependency on CScheduler by TheCharlatan)\n* [#27865](https://github.com/bitcoin/bitcoin/pull/27865) (wallet: Track no-longer-spendable TXOs separately by achow101)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "created_at" : "2024-01-18T22:23:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#issuecomment-1899315871",
      "id" : 1899315871,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29278",
      "node_id" : "IC_kwDOABII585xNUKf",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1899315871/reactions"
      },
      "updated_at" : "2024-02-09T16:25:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1899315871",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1459122123"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459122123"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I think you accidentally put the `maxburnamount` helptext in the `incrementalrelayfee` helptext here?",
      "commit_id" : "0c9e0c5b2218c154b62275794b878af7e1457647",
      "created_at" : "2024-01-19T14:39:21Z",
      "diff_hunk" : "@@ -624,7 +625,10 @@ void SetupServerArgs(ArgsManager& argsman)\n     SetupChainParamsBaseOptions(argsman);\n \n     argsman.AddArg(\"-acceptnonstdtxn\", strprintf(\"Relay and mine \\\"non-standard\\\" transactions (test networks only; default: %u)\", DEFAULT_ACCEPT_NON_STD_TXN), ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::NODE_RELAY);\n-    argsman.AddArg(\"-incrementalrelayfee=<amt>\", strprintf(\"Fee rate (in %s/kvB) used to define cost of relay, used for mempool limiting and replacement policy. (default: %s)\", CURRENCY_UNIT, FormatMoney(DEFAULT_INCREMENTAL_RELAY_FEE)), ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::NODE_RELAY);\n+    argsman.AddArg(\"-maxfeerate=<amt>\", strprintf(\"Reject transactions whose fee rate is higher than the specified value, expressed in %s/kvB. Set to 0 to accept any fee rate. (default: %s %s/kvB)\", CURRENCY_UNIT, FormatMoney(node::DEFAULT_MAX_RAW_TX_FEE_RATE.GetFeePerK()), CURRENCY_UNIT), ArgsManager::ALLOW_ANY, OptionsCategory::DEBUG_TEST);\n+    argsman.AddArg(\"-maxburnamount=<amt>\", strprintf(\"Reject transactions with provably unspendable outputs (e.g. 'datacarrier' outputs that use the OP_RETURN opcode) greater than the specified value, expressed in %s, if burning funds through unspendable outputs is desired, increase this value. This check is based on heuristics and does not guarantee spendability of outputs (default: 0%s).\", CURRENCY_UNIT, CURRENCY_UNIT), ArgsManager::ALLOW_ANY, OptionsCategory::DEBUG_TEST);\n+    argsman.AddArg(\"-incrementalrelayfee=<amt>\", strprintf(\"Fee rate (in %s/kvB) used to define cost of relay, used for mempool limiting and replacement policy. (default: %s) If burning funds through unspendable outputs is desired, increase this value. This check is based on heuristics and does not guarantee spendability of outputs.\",",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1459122123",
      "id" : 1459122123,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585W-G_L",
      "original_commit_id" : "2576efcf689401dcbea85856c74efc64af0c2cb2",
      "original_line" : 630,
      "original_position" : 15,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_review_id" : 1832875650,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459122123/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-19T15:05:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459122123",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1459131869"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459131869"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Why delete these options (suddenly removing support for something that users might rely on)? Even if a config exists, I can imagine somebody wanting to change the maximum for a single RPC call without needing to restart their node.",
      "commit_id" : "0c9e0c5b2218c154b62275794b878af7e1457647",
      "created_at" : "2024-01-19T14:44:29Z",
      "diff_hunk" : "@@ -43,13 +44,6 @@ static RPCHelpMan sendrawtransaction()\n         \"\\nRelated RPCs: createrawtransaction, signrawtransactionwithkey\\n\",\n         {\n             {\"hexstring\", RPCArg::Type::STR_HEX, RPCArg::Optional::NO, \"The hex string of the raw transaction\"},\n-            {\"maxfeerate\", RPCArg::Type::AMOUNT, RPCArg::Default{FormatMoney(DEFAULT_MAX_RAW_TX_FEE_RATE.GetFeePerK())},\n-             \"Reject transactions whose fee rate is higher than the specified value, expressed in \" + CURRENCY_UNIT +\n-                 \"/kvB.\\nSet to 0 to accept any fee rate.\"},\n-            {\"maxburnamount\", RPCArg::Type::AMOUNT, RPCArg::Default{FormatMoney(0)},\n-             \"Reject transactions with provably unspendable outputs (e.g. 'datacarrier' outputs that use the OP_RETURN opcode) greater than the specified value, expressed in \" + CURRENCY_UNIT + \".\\n\"\n-             \"If burning funds through unspendable outputs is desired, increase this value.\\n\"\n-             \"This check is based on heuristics and does not guarantee spendability of outputs.\\n\"},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1459131869",
      "id" : 1459131869,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585W-JXd",
      "original_commit_id" : "2576efcf689401dcbea85856c74efc64af0c2cb2",
      "original_line" : 52,
      "original_position" : 18,
      "original_start_line" : 46,
      "path" : "src/rpc/mempool.cpp",
      "position" : null,
      "pull_request_review_id" : 1832875650,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459131869/reactions"
      },
      "side" : "LEFT",
      "start_line" : null,
      "start_side" : "LEFT",
      "subject_type" : "line",
      "updated_at" : "2024-01-19T15:05:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459131869",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1459145558"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459145558"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Why not just make this a `CFeeRate`? Or describe this as satoshis per KvB. \"fee rate (in satoshis)\" doesn't really make sense to me.",
      "commit_id" : "0c9e0c5b2218c154b62275794b878af7e1457647",
      "created_at" : "2024-01-19T14:51:40Z",
      "diff_hunk" : "@@ -729,6 +729,8 @@ class CWallet final : public WalletStorage, public interfaces::Chain::Notificati\n     /** Absolute maximum transaction fee (in satoshis) used by default for the wallet */\n     CAmount m_default_max_tx_fee{DEFAULT_TRANSACTION_MAXFEE};\n \n+    /** Maximum transaction fee rate (in satoshis) used by default for the wallet */\n+    CAmount m_default_max_tx_fee_rate{node::DEFAULT_MAX_RAW_TX_FEE_RATE.GetFeePerK()};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1459145558",
      "id" : 1459145558,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585W-MtW",
      "original_commit_id" : "2576efcf689401dcbea85856c74efc64af0c2cb2",
      "original_line" : 733,
      "original_position" : 5,
      "original_start_line" : 732,
      "path" : "src/wallet/wallet.h",
      "position" : null,
      "pull_request_review_id" : 1832875650,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459145558/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2024-01-19T15:05:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459145558",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1459156381"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459156381"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I also don't see this value being used anywhere other than `settxfee`?\r\n\r\n> This approach maintains distinct role for maxfeerate as a wallet and mempool acceptance/relay sanity check \r\n\r\nShouldn't there be a check in `CreateTransactionInternal` that makes sure we don't make transactions above this feerate, and an arg passed to `BroadcastTransaction`? I also don't see a test case for it.",
      "commit_id" : "0c9e0c5b2218c154b62275794b878af7e1457647",
      "created_at" : "2024-01-19T14:58:03Z",
      "diff_hunk" : "@@ -729,6 +729,8 @@ class CWallet final : public WalletStorage, public interfaces::Chain::Notificati\n     /** Absolute maximum transaction fee (in satoshis) used by default for the wallet */\n     CAmount m_default_max_tx_fee{DEFAULT_TRANSACTION_MAXFEE};\n \n+    /** Maximum transaction fee rate (in satoshis) used by default for the wallet */\n+    CAmount m_default_max_tx_fee_rate{node::DEFAULT_MAX_RAW_TX_FEE_RATE.GetFeePerK()};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1459156381",
      "id" : 1459156381,
      "in_reply_to_id" : 1459145558,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585W-PWd",
      "original_commit_id" : "2576efcf689401dcbea85856c74efc64af0c2cb2",
      "original_line" : 733,
      "original_position" : 5,
      "original_start_line" : 732,
      "path" : "src/wallet/wallet.h",
      "position" : null,
      "pull_request_review_id" : 1832875650,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459156381/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2024-01-19T15:05:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459156381",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Thanks @glozow for your review.\r\nWill put this PR in draft while addressing Approach feedback\r\n",
      "created_at" : "2024-01-19T16:12:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#issuecomment-1900699310",
      "id" : 1900699310,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29278",
      "node_id" : "IC_kwDOABII585xSl6u",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1900699310/reactions"
      },
      "updated_at" : "2024-01-19T16:12:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1900699310",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48946461?v=4",
         "events_url" : "https://api.github.com/users/ismaelsadeeq/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ismaelsadeeq/followers",
         "following_url" : "https://api.github.com/users/ismaelsadeeq/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ismaelsadeeq/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ismaelsadeeq",
         "id" : 48946461,
         "login" : "ismaelsadeeq",
         "node_id" : "MDQ6VXNlcjQ4OTQ2NDYx",
         "organizations_url" : "https://api.github.com/users/ismaelsadeeq/orgs",
         "received_events_url" : "https://api.github.com/users/ismaelsadeeq/received_events",
         "repos_url" : "https://api.github.com/users/ismaelsadeeq/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ismaelsadeeq/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ismaelsadeeq/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ismaelsadeeq"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I agree this feels more like it should be a wallet option.",
      "created_at" : "2024-01-23T04:28:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#issuecomment-1905273019",
      "id" : 1905273019,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29278",
      "node_id" : "IC_kwDOABII585xkCi7",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1905273019/reactions"
      },
      "updated_at" : "2024-01-23T04:28:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1905273019",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--85328a0da195eb286784d51f73fa0af9-->\n\nð§ At least one of the CI tasks failed. Make sure to run all tests locally, according to the\ndocumentation.\n\nPossibly this is due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n<sub>Debug: https://github.com/bitcoin/bitcoin/runs/20878506397</sub>",
      "created_at" : "2024-01-25T21:53:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#issuecomment-1911058645",
      "id" : 1911058645,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29278",
      "node_id" : "IC_kwDOABII585x6HDV",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1911058645/reactions"
      },
      "updated_at" : "2024-01-25T21:53:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1911058645",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1467012383"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1467012383"
         }
      },
      "author_association" : "MEMBER",
      "body" : "This is gone now.",
      "commit_id" : "0c9e0c5b2218c154b62275794b878af7e1457647",
      "created_at" : "2024-01-25T22:06:13Z",
      "diff_hunk" : "@@ -624,7 +625,10 @@ void SetupServerArgs(ArgsManager& argsman)\n     SetupChainParamsBaseOptions(argsman);\n \n     argsman.AddArg(\"-acceptnonstdtxn\", strprintf(\"Relay and mine \\\"non-standard\\\" transactions (test networks only; default: %u)\", DEFAULT_ACCEPT_NON_STD_TXN), ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::NODE_RELAY);\n-    argsman.AddArg(\"-incrementalrelayfee=<amt>\", strprintf(\"Fee rate (in %s/kvB) used to define cost of relay, used for mempool limiting and replacement policy. (default: %s)\", CURRENCY_UNIT, FormatMoney(DEFAULT_INCREMENTAL_RELAY_FEE)), ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::NODE_RELAY);\n+    argsman.AddArg(\"-maxfeerate=<amt>\", strprintf(\"Reject transactions whose fee rate is higher than the specified value, expressed in %s/kvB. Set to 0 to accept any fee rate. (default: %s %s/kvB)\", CURRENCY_UNIT, FormatMoney(node::DEFAULT_MAX_RAW_TX_FEE_RATE.GetFeePerK()), CURRENCY_UNIT), ArgsManager::ALLOW_ANY, OptionsCategory::DEBUG_TEST);\n+    argsman.AddArg(\"-maxburnamount=<amt>\", strprintf(\"Reject transactions with provably unspendable outputs (e.g. 'datacarrier' outputs that use the OP_RETURN opcode) greater than the specified value, expressed in %s, if burning funds through unspendable outputs is desired, increase this value. This check is based on heuristics and does not guarantee spendability of outputs (default: 0%s).\", CURRENCY_UNIT, CURRENCY_UNIT), ArgsManager::ALLOW_ANY, OptionsCategory::DEBUG_TEST);\n+    argsman.AddArg(\"-incrementalrelayfee=<amt>\", strprintf(\"Fee rate (in %s/kvB) used to define cost of relay, used for mempool limiting and replacement policy. (default: %s) If burning funds through unspendable outputs is desired, increase this value. This check is based on heuristics and does not guarantee spendability of outputs.\",",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1467012383",
      "id" : 1467012383,
      "in_reply_to_id" : 1459122123,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585XcNUf",
      "original_commit_id" : "2576efcf689401dcbea85856c74efc64af0c2cb2",
      "original_line" : 630,
      "original_position" : 15,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_review_id" : 1844762800,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1467012383/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-25T22:06:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1467012383",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48946461?v=4",
         "events_url" : "https://api.github.com/users/ismaelsadeeq/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ismaelsadeeq/followers",
         "following_url" : "https://api.github.com/users/ismaelsadeeq/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ismaelsadeeq/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ismaelsadeeq",
         "id" : 48946461,
         "login" : "ismaelsadeeq",
         "node_id" : "MDQ6VXNlcjQ4OTQ2NDYx",
         "organizations_url" : "https://api.github.com/users/ismaelsadeeq/orgs",
         "received_events_url" : "https://api.github.com/users/ismaelsadeeq/received_events",
         "repos_url" : "https://api.github.com/users/ismaelsadeeq/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ismaelsadeeq/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ismaelsadeeq/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ismaelsadeeq"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1467012789"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1467012789"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Reverted thank you.",
      "commit_id" : "0c9e0c5b2218c154b62275794b878af7e1457647",
      "created_at" : "2024-01-25T22:06:43Z",
      "diff_hunk" : "@@ -43,13 +44,6 @@ static RPCHelpMan sendrawtransaction()\n         \"\\nRelated RPCs: createrawtransaction, signrawtransactionwithkey\\n\",\n         {\n             {\"hexstring\", RPCArg::Type::STR_HEX, RPCArg::Optional::NO, \"The hex string of the raw transaction\"},\n-            {\"maxfeerate\", RPCArg::Type::AMOUNT, RPCArg::Default{FormatMoney(DEFAULT_MAX_RAW_TX_FEE_RATE.GetFeePerK())},\n-             \"Reject transactions whose fee rate is higher than the specified value, expressed in \" + CURRENCY_UNIT +\n-                 \"/kvB.\\nSet to 0 to accept any fee rate.\"},\n-            {\"maxburnamount\", RPCArg::Type::AMOUNT, RPCArg::Default{FormatMoney(0)},\n-             \"Reject transactions with provably unspendable outputs (e.g. 'datacarrier' outputs that use the OP_RETURN opcode) greater than the specified value, expressed in \" + CURRENCY_UNIT + \".\\n\"\n-             \"If burning funds through unspendable outputs is desired, increase this value.\\n\"\n-             \"This check is based on heuristics and does not guarantee spendability of outputs.\\n\"},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1467012789",
      "id" : 1467012789,
      "in_reply_to_id" : 1459131869,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585XcNa1",
      "original_commit_id" : "2576efcf689401dcbea85856c74efc64af0c2cb2",
      "original_line" : 52,
      "original_position" : 18,
      "original_start_line" : 46,
      "path" : "src/rpc/mempool.cpp",
      "position" : null,
      "pull_request_review_id" : 1844764068,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1467012789/reactions"
      },
      "side" : "LEFT",
      "start_line" : null,
      "start_side" : "LEFT",
      "subject_type" : "line",
      "updated_at" : "2024-01-25T22:06:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1467012789",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48946461?v=4",
         "events_url" : "https://api.github.com/users/ismaelsadeeq/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ismaelsadeeq/followers",
         "following_url" : "https://api.github.com/users/ismaelsadeeq/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ismaelsadeeq/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ismaelsadeeq",
         "id" : 48946461,
         "login" : "ismaelsadeeq",
         "node_id" : "MDQ6VXNlcjQ4OTQ2NDYx",
         "organizations_url" : "https://api.github.com/users/ismaelsadeeq/orgs",
         "received_events_url" : "https://api.github.com/users/ismaelsadeeq/received_events",
         "repos_url" : "https://api.github.com/users/ismaelsadeeq/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ismaelsadeeq/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ismaelsadeeq/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ismaelsadeeq"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1467014047"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1467014047"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Done, `CFeeRate` is the right format since we are representing fee rate.\r\n\r\n ",
      "commit_id" : "0c9e0c5b2218c154b62275794b878af7e1457647",
      "created_at" : "2024-01-25T22:07:55Z",
      "diff_hunk" : "@@ -729,6 +729,8 @@ class CWallet final : public WalletStorage, public interfaces::Chain::Notificati\n     /** Absolute maximum transaction fee (in satoshis) used by default for the wallet */\n     CAmount m_default_max_tx_fee{DEFAULT_TRANSACTION_MAXFEE};\n \n+    /** Maximum transaction fee rate (in satoshis) used by default for the wallet */\n+    CAmount m_default_max_tx_fee_rate{node::DEFAULT_MAX_RAW_TX_FEE_RATE.GetFeePerK()};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1467014047",
      "id" : 1467014047,
      "in_reply_to_id" : 1459145558,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585XcNuf",
      "original_commit_id" : "2576efcf689401dcbea85856c74efc64af0c2cb2",
      "original_line" : 733,
      "original_position" : 5,
      "original_start_line" : 732,
      "path" : "src/wallet/wallet.h",
      "position" : null,
      "pull_request_review_id" : 1844765575,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1467014047/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2024-01-25T22:07:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1467014047",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48946461?v=4",
         "events_url" : "https://api.github.com/users/ismaelsadeeq/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ismaelsadeeq/followers",
         "following_url" : "https://api.github.com/users/ismaelsadeeq/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ismaelsadeeq/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ismaelsadeeq",
         "id" : 48946461,
         "login" : "ismaelsadeeq",
         "node_id" : "MDQ6VXNlcjQ4OTQ2NDYx",
         "organizations_url" : "https://api.github.com/users/ismaelsadeeq/orgs",
         "received_events_url" : "https://api.github.com/users/ismaelsadeeq/received_events",
         "repos_url" : "https://api.github.com/users/ismaelsadeeq/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ismaelsadeeq/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ismaelsadeeq/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ismaelsadeeq"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1467017299"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1467017299"
         }
      },
      "author_association" : "MEMBER",
      "body" : ">Shouldn't there be a check in CreateTransactionInternal that makes sure we don't make transactions above this feerate, and an arg passed to BroadcastTransaction?\r\n\r\nAgreed\r\n\r\nI Added a check in `CreateTransactionInternal` in 0c9e0c5b2218c154b62275794b878af7e1457647. \r\n\r\nNo need to pass an arg to `BroadcastTransaction`,  if the transaction fee rate is above `maxfeerate` it will not reach `BroadcastTransaction`. \r\n\r\n> I also don't see a test case for it.\r\n\r\nI added a test in 0c9e0c5b2218c154b62275794b878af7e1457647.",
      "commit_id" : "0c9e0c5b2218c154b62275794b878af7e1457647",
      "created_at" : "2024-01-25T22:11:52Z",
      "diff_hunk" : "@@ -729,6 +729,8 @@ class CWallet final : public WalletStorage, public interfaces::Chain::Notificati\n     /** Absolute maximum transaction fee (in satoshis) used by default for the wallet */\n     CAmount m_default_max_tx_fee{DEFAULT_TRANSACTION_MAXFEE};\n \n+    /** Maximum transaction fee rate (in satoshis) used by default for the wallet */\n+    CAmount m_default_max_tx_fee_rate{node::DEFAULT_MAX_RAW_TX_FEE_RATE.GetFeePerK()};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1467017299",
      "id" : 1467017299,
      "in_reply_to_id" : 1459145558,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585XcOhT",
      "original_commit_id" : "2576efcf689401dcbea85856c74efc64af0c2cb2",
      "original_line" : 733,
      "original_position" : 5,
      "original_start_line" : 732,
      "path" : "src/wallet/wallet.h",
      "position" : null,
      "pull_request_review_id" : 1844769985,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1467017299/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2024-01-25T22:13:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1467017299",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48946461?v=4",
         "events_url" : "https://api.github.com/users/ismaelsadeeq/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ismaelsadeeq/followers",
         "following_url" : "https://api.github.com/users/ismaelsadeeq/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ismaelsadeeq/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ismaelsadeeq",
         "id" : 48946461,
         "login" : "ismaelsadeeq",
         "node_id" : "MDQ6VXNlcjQ4OTQ2NDYx",
         "organizations_url" : "https://api.github.com/users/ismaelsadeeq/orgs",
         "received_events_url" : "https://api.github.com/users/ismaelsadeeq/received_events",
         "repos_url" : "https://api.github.com/users/ismaelsadeeq/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ismaelsadeeq/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ismaelsadeeq/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ismaelsadeeq"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Forced pushed from https://github.com/bitcoin/bitcoin/commit/2576efcf689401dcbea85856c74efc64af0c2cb2 to https://github.com/bitcoin/bitcoin/commit/0c9e0c5b2218c154b62275794b878af7e1457647 Compare the [diff](https://github.com/bitcoin/bitcoin/compare/2576efcf689401dcbea85856c74efc64af0c2cb2..0c9e0c5b2218c154b62275794b878af7e1457647)\r\n- All review comments are addressed\r\n- Removed `maxburnamount` option\r\n- Made `maxfeerate` wallet option\r\n- Added a check in `CreateTransactionInternal` that makes sure we don't make transactions above this `-maxfeerate`.\r\n- Fixed ambiguity between `-maxtxfee` and `maxfeerate`\r\n- Prevent setting wallet feerate above `maxfeerate` from `settxfee` RPC\r\n- Added a functional test case\r\n- Updated PR OP\r\n\r\n",
      "created_at" : "2024-01-25T22:19:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#issuecomment-1911091517",
      "id" : 1911091517,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29278",
      "node_id" : "IC_kwDOABII585x6PE9",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1911091517/reactions"
      },
      "updated_at" : "2024-01-25T22:19:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1911091517",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48946461?v=4",
         "events_url" : "https://api.github.com/users/ismaelsadeeq/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ismaelsadeeq/followers",
         "following_url" : "https://api.github.com/users/ismaelsadeeq/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ismaelsadeeq/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ismaelsadeeq",
         "id" : 48946461,
         "login" : "ismaelsadeeq",
         "node_id" : "MDQ6VXNlcjQ4OTQ2NDYx",
         "organizations_url" : "https://api.github.com/users/ismaelsadeeq/orgs",
         "received_events_url" : "https://api.github.com/users/ismaelsadeeq/received_events",
         "repos_url" : "https://api.github.com/users/ismaelsadeeq/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ismaelsadeeq/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ismaelsadeeq/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ismaelsadeeq"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1468533274"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1468533274"
         }
      },
      "author_association" : "MEMBER",
      "body" : "This still isn't a wallet option...",
      "commit_id" : "0c9e0c5b2218c154b62275794b878af7e1457647",
      "created_at" : "2024-01-27T17:01:54Z",
      "diff_hunk" : "@@ -62,6 +62,7 @@ void WalletInit::AddWalletOptions(ArgsManager& argsman) const\n     argsman.AddArg(\"-maxapsfee=<n>\", strprintf(\"Spend up to this amount in additional (absolute) fees (in %s) if it allows the use of partial spend avoidance (default: %s)\", CURRENCY_UNIT, FormatMoney(DEFAULT_MAX_AVOIDPARTIALSPEND_FEE)), ArgsManager::ALLOW_ANY, OptionsCategory::WALLET);\n     argsman.AddArg(\"-maxtxfee=<amt>\", strprintf(\"Maximum total fees (in %s) to use in a single wallet transaction; setting this too low may abort large transactions (default: %s)\",\n         CURRENCY_UNIT, FormatMoney(DEFAULT_TRANSACTION_MAXFEE)), ArgsManager::ALLOW_ANY, OptionsCategory::DEBUG_TEST);\n+    argsman.AddArg(\"-maxfeerate=<amt>\", strprintf(\"Maximum fee rate (in %s) of a single wallet transaction (default: %s)\", CURRENCY_UNIT, FormatMoney(DEFAULT_TRANSACTION_MAXFEERATE.GetFeePerK())), ArgsManager::ALLOW_ANY, OptionsCategory::WALLET);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1468533274",
      "id" : 1468533274,
      "line" : 65,
      "node_id" : "PRRC_kwDOABII585XiAoa",
      "original_commit_id" : "0c9e0c5b2218c154b62275794b878af7e1457647",
      "original_line" : 65,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/wallet/init.cpp",
      "position" : 4,
      "pull_request_review_id" : 1847133124,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1468533274/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-27T17:01:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1468533274",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1469291356"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1469291356"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Maybe add tests where you (successfully) configure the node's wallet using `-maxfeerate`?",
      "commit_id" : "0c9e0c5b2218c154b62275794b878af7e1457647",
      "created_at" : "2024-01-29T09:21:15Z",
      "diff_hunk" : "@@ -184,6 +184,33 @@ def test_send(self, from_wallet, to_wallet=None, amount=None, data=None,\n \n         return res\n \n+    def test_maxfeerate(self):",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1469291356",
      "id" : 1469291356,
      "line" : 187,
      "node_id" : "PRRC_kwDOABII585Xk5tc",
      "original_commit_id" : "0c9e0c5b2218c154b62275794b878af7e1457647",
      "original_line" : 187,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "test/functional/wallet_send.py",
      "position" : 4,
      "pull_request_review_id" : 1848180625,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1469291356/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-29T09:27:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1469291356",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1469293744"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1469293744"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Similarly, it would be good to test that both maxfee and maxfeerate requirements must be met.",
      "commit_id" : "0c9e0c5b2218c154b62275794b878af7e1457647",
      "created_at" : "2024-01-29T09:23:07Z",
      "diff_hunk" : "@@ -184,6 +184,33 @@ def test_send(self, from_wallet, to_wallet=None, amount=None, data=None,\n \n         return res\n \n+    def test_maxfeerate(self):",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1469293744",
      "id" : 1469293744,
      "in_reply_to_id" : 1469291356,
      "line" : 187,
      "node_id" : "PRRC_kwDOABII585Xk6Sw",
      "original_commit_id" : "0c9e0c5b2218c154b62275794b878af7e1457647",
      "original_line" : 187,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "test/functional/wallet_send.py",
      "position" : 4,
      "pull_request_review_id" : 1848180625,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1469293744/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-29T09:27:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1469293744",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1469296961"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1469296961"
         }
      },
      "author_association" : "MEMBER",
      "body" : "1000 is redundant",
      "commit_id" : "0c9e0c5b2218c154b62275794b878af7e1457647",
      "created_at" : "2024-01-29T09:25:41Z",
      "diff_hunk" : "@@ -136,6 +136,8 @@ static const bool DEFAULT_DISABLE_WALLET = false;\n static const bool DEFAULT_WALLETCROSSCHAIN = false;\n //! -maxtxfee default\n constexpr CAmount DEFAULT_TRANSACTION_MAXFEE{COIN / 10};\n+//! maxfeerate default\n+const CFeeRate DEFAULT_TRANSACTION_MAXFEERATE(CFeeRate((COIN / 10), 1000));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1469296961",
      "id" : 1469296961,
      "line" : 140,
      "node_id" : "PRRC_kwDOABII585Xk7FB",
      "original_commit_id" : "0c9e0c5b2218c154b62275794b878af7e1457647",
      "original_line" : 140,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/wallet/wallet.h",
      "position" : 5,
      "pull_request_review_id" : 1848180625,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1469296961/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-29T09:27:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1469296961",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1469368423"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1469368423"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I think we should keep the word \"wallet\" here, since this is a client set option. If you look at the RPC call above, it differentiates between the node wide policy of `relayMinFee` and the wallet set policy `m_min_fee` by adding the world \"wallet\" to the RPC error.",
      "commit_id" : "0c9e0c5b2218c154b62275794b878af7e1457647",
      "created_at" : "2024-01-29T10:15:17Z",
      "diff_hunk" : "@@ -430,15 +430,14 @@ RPCHelpMan settxfee()\n \n     CAmount nAmount = AmountFromValue(request.params[0]);\n     CFeeRate tx_fee_rate(nAmount, 1000);\n-    CFeeRate max_tx_fee_rate(pwallet->m_default_max_tx_fee, 1000);\n     if (tx_fee_rate == CFeeRate(0)) {\n         // automatic selection\n     } else if (tx_fee_rate < pwallet->chain().relayMinFee()) {\n         throw JSONRPCError(RPC_INVALID_PARAMETER, strprintf(\"txfee cannot be less than min relay tx fee (%s)\", pwallet->chain().relayMinFee().ToString()));\n     } else if (tx_fee_rate < pwallet->m_min_fee) {\n         throw JSONRPCError(RPC_INVALID_PARAMETER, strprintf(\"txfee cannot be less than wallet min fee (%s)\", pwallet->m_min_fee.ToString()));\n-    } else if (tx_fee_rate > max_tx_fee_rate) {\n-        throw JSONRPCError(RPC_INVALID_PARAMETER, strprintf(\"txfee cannot be more than wallet max tx fee (%s)\", max_tx_fee_rate.ToString()));\n+    } else if (tx_fee_rate > pwallet->m_max_tx_fee_rate) {\n+        throw JSONRPCError(RPC_INVALID_PARAMETER, strprintf(\"txfee cannot be more than max tx fee rate (%s)\", pwallet->m_max_tx_fee_rate.ToString()));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1469368423",
      "id" : 1469368423,
      "line" : 440,
      "node_id" : "PRRC_kwDOABII585XlMhn",
      "original_commit_id" : "677dec10cc5a481db79bf34073d9eb65f5d30aff",
      "original_line" : 440,
      "original_position" : 14,
      "original_start_line" : 439,
      "path" : "src/wallet/rpc/spend.cpp",
      "position" : 14,
      "pull_request_review_id" : 1848310090,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1469368423/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 439,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2024-01-29T10:40:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1469368423",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7444140?v=4",
         "events_url" : "https://api.github.com/users/josibake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/josibake/followers",
         "following_url" : "https://api.github.com/users/josibake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/josibake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/josibake",
         "id" : 7444140,
         "login" : "josibake",
         "node_id" : "MDQ6VXNlcjc0NDQxNDA=",
         "organizations_url" : "https://api.github.com/users/josibake/orgs",
         "received_events_url" : "https://api.github.com/users/josibake/received_events",
         "repos_url" : "https://api.github.com/users/josibake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/josibake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/josibake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/josibake"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1469372132"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1469372132"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I don't think we should remove this check for setting a `max_fee` that results in fee rates less than the `relayMinFee`.",
      "commit_id" : "0c9e0c5b2218c154b62275794b878af7e1457647",
      "created_at" : "2024-01-29T10:18:09Z",
      "diff_hunk" : "@@ -3058,13 +3058,21 @@ std::shared_ptr<CWallet> CWallet::Create(WalletContext& context, const std::stri\n             warnings.push_back(strprintf(_(\"%s is set very high! Fees this large could be paid on a single transaction.\"), \"-maxtxfee\"));\n         }\n \n-        if (chain && CFeeRate{max_fee.value(), 1000} < chain->relayMinFee()) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1469372132",
      "id" : 1469372132,
      "line" : 3061,
      "node_id" : "PRRC_kwDOABII585XlNbk",
      "original_commit_id" : "677dec10cc5a481db79bf34073d9eb65f5d30aff",
      "original_line" : 3061,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/wallet/wallet.cpp",
      "position" : 4,
      "pull_request_review_id" : 1848310090,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1469372132/reactions"
      },
      "side" : "LEFT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-29T10:40:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1469372132",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7444140?v=4",
         "events_url" : "https://api.github.com/users/josibake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/josibake/followers",
         "following_url" : "https://api.github.com/users/josibake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/josibake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/josibake",
         "id" : 7444140,
         "login" : "josibake",
         "node_id" : "MDQ6VXNlcjc0NDQxNDA=",
         "organizations_url" : "https://api.github.com/users/josibake/orgs",
         "received_events_url" : "https://api.github.com/users/josibake/received_events",
         "repos_url" : "https://api.github.com/users/josibake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/josibake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/josibake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/josibake"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1469517392"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1469517392"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I dont understand why you said it is not a wallet option.\r\nThe `OptionsCategory` of this startup option is `WALLET`.\r\nAnd its only used in the wallet.\r\n\r\nCan you please expand on your comment.\r\nThanks",
      "commit_id" : "0c9e0c5b2218c154b62275794b878af7e1457647",
      "created_at" : "2024-01-29T12:25:55Z",
      "diff_hunk" : "@@ -62,6 +62,7 @@ void WalletInit::AddWalletOptions(ArgsManager& argsman) const\n     argsman.AddArg(\"-maxapsfee=<n>\", strprintf(\"Spend up to this amount in additional (absolute) fees (in %s) if it allows the use of partial spend avoidance (default: %s)\", CURRENCY_UNIT, FormatMoney(DEFAULT_MAX_AVOIDPARTIALSPEND_FEE)), ArgsManager::ALLOW_ANY, OptionsCategory::WALLET);\n     argsman.AddArg(\"-maxtxfee=<amt>\", strprintf(\"Maximum total fees (in %s) to use in a single wallet transaction; setting this too low may abort large transactions (default: %s)\",\n         CURRENCY_UNIT, FormatMoney(DEFAULT_TRANSACTION_MAXFEE)), ArgsManager::ALLOW_ANY, OptionsCategory::DEBUG_TEST);\n+    argsman.AddArg(\"-maxfeerate=<amt>\", strprintf(\"Maximum fee rate (in %s) of a single wallet transaction (default: %s)\", CURRENCY_UNIT, FormatMoney(DEFAULT_TRANSACTION_MAXFEERATE.GetFeePerK())), ArgsManager::ALLOW_ANY, OptionsCategory::WALLET);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1469517392",
      "id" : 1469517392,
      "in_reply_to_id" : 1468533274,
      "line" : 65,
      "node_id" : "PRRC_kwDOABII585Xlw5Q",
      "original_commit_id" : "0c9e0c5b2218c154b62275794b878af7e1457647",
      "original_line" : 65,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/wallet/init.cpp",
      "position" : 4,
      "pull_request_review_id" : 1848550494,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1469517392/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-29T12:25:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1469517392",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48946461?v=4",
         "events_url" : "https://api.github.com/users/ismaelsadeeq/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ismaelsadeeq/followers",
         "following_url" : "https://api.github.com/users/ismaelsadeeq/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ismaelsadeeq/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ismaelsadeeq",
         "id" : 48946461,
         "login" : "ismaelsadeeq",
         "node_id" : "MDQ6VXNlcjQ4OTQ2NDYx",
         "organizations_url" : "https://api.github.com/users/ismaelsadeeq/orgs",
         "received_events_url" : "https://api.github.com/users/ismaelsadeeq/received_events",
         "repos_url" : "https://api.github.com/users/ismaelsadeeq/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ismaelsadeeq/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ismaelsadeeq/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ismaelsadeeq"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Or is there a use case for caring about the total fees you pay AND caring about the sats per vbyte you pay that I'm not understanding?\r\n\r\nI think it makes sense to have both. I could have a `maxtxfee` of the upper bound of what I'm willing to pay ever, and also set `maxfeerate` to something reasonable just to make sure I don't typo a feerate and accidentally pay a feerate orders of magnitude higher than intended. At `maxfeerate`, a small transaction can still pay a smaller fee than `maxtxfee`, but a large transaction could exceed `maxtxfee`.",
      "created_at" : "2024-01-29T17:59:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#issuecomment-1915276592",
      "id" : 1915276592,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29278",
      "node_id" : "IC_kwDOABII585yKM0w",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1915276592/reactions"
      },
      "updated_at" : "2024-01-29T17:59:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1915276592",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> I think it makes sense to have both. I could have a `maxtxfee` of the upper bound of what I'm willing to pay ever, and also set `maxfeerate` to something reasonable just to make sure I don't typo a feerate and accidentally pay a feerate orders of magnitude higher than intended. At `maxfeerate`, a small transaction can still pay a smaller fee than `maxtxfee`, but a large transaction could exceed `maxtxfee`.\r\n\r\nBut in this example, if you typo'd a feerate orders of magnitude higher, your `maxtxfee` should get hit. If you accidentally typo a higher fee rate than intended but it's below the `maxtxfee` you're willing to pay, that doesn't seem like a big problem to me.\r\n\r\nSeems less footgunny to only let the user set one or the other (and then as a belt and suspenders still check the defaults for both, regardless of what is set?). But I might be overthinking this.. just seems really gross to have to now consider both of these in coin selection, especially if a user sets wonky values.",
      "created_at" : "2024-01-29T18:37:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#issuecomment-1915336928",
      "id" : 1915336928,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29278",
      "node_id" : "IC_kwDOABII585yKbjg",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1915336928/reactions"
      },
      "updated_at" : "2024-01-29T18:37:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1915336928",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7444140?v=4",
         "events_url" : "https://api.github.com/users/josibake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/josibake/followers",
         "following_url" : "https://api.github.com/users/josibake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/josibake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/josibake",
         "id" : 7444140,
         "login" : "josibake",
         "node_id" : "MDQ6VXNlcjc0NDQxNDA=",
         "organizations_url" : "https://api.github.com/users/josibake/orgs",
         "received_events_url" : "https://api.github.com/users/josibake/received_events",
         "repos_url" : "https://api.github.com/users/josibake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/josibake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/josibake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/josibake"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Thank you for your comments @josibake @glozow @achow101 , will address review comments shortly.\r\n\r\n> if you typo'd a feerate orders of magnitude higher, your maxtxfee should get hit.\r\n\r\nI don't think this is true; it depends on what your `maxtxfee` is. Going by the default value of 0.10 BTC.\r\n\r\nThis is not likely to occur. \r\n\r\nI did a manual test on master.\r\n\r\nWhen I set `maxtxfee` to 0.10 BTC on master, if you mistakenly type 10,000 as the fee rate, the max fee exceed error will not be hit.\r\n\r\nHowever, in some cases where you set a low `maxtxfee`it may be hit or not depending on the transaction size.\r\nIt's uncertain.\r\n\r\n```terminal\r\nabubakarismail@Abubakars-MacBook-Pro bitcoin % ./src/bitcoind -regtest -maxtxfee=0.10  -daemon                                                                                          \r\nBitcoin Core starting\r\n\r\nabubakarismail@Abubakars-MacBook-Pro bitcoin % ./src/bitcoin-cli -regtest loadwallet abubakar-test                                                                          \r\n{\r\n  \"name\": \"abubakar-test\"\r\n}\r\n\r\nabubakarismail@Abubakars-MacBook-Pro bitcoin % ./src/bitcoin-cli -regtest -named sendtoaddress address=\"bcrt1qt3fvqww6reduq287nhl59cu05hmyrj7achar44\" fee_rate=10000 amount=1\r\n22a92fdfa68581ba1d3da4aeedaeb20c7570b8c8eff9c29699c846aa1dacd73d\r\n\r\n```\r\n\r\n\r\n---\r\n\r\nOn this branch, if I set my `-maxtxfee` as 0.10 absolute fee and `-maxfeerate` as (0.010 which is 1000s/vb), and make a typo in a `sendtoaddress` call with a `fee_rate` of 10,000 s/vb instead of 100, the `maxfeerate` check will be hit.\r\n```\r\n ./src/bitcoind -regtest -maxfeerate=0.01 -maxtxfee=0.10 -daemon                                                                         \r\nBitcoin Core starting\r\nabubakarismail@Abubakars-MacBook-Pro bitcoin % ./src/bitcoin-cli -regtest loadwallet abubakar-test                                                                         \r\n{\r\n  \"name\": \"abubakar-test\"\r\n}\r\n\r\nabubakarismail@Abubakars-MacBook-Pro bitcoin % ./src/bitcoin-cli -regtest -named sendtoaddress address=\"bcrt1qt3fvqww6reduq287nhl59cu05hmyrj7achar44\" fee_rate=10000 amount=1\r\nerror code: -6\r\nerror message:\r\nFee exceeds maximum configured by user (e.g. -maxtxfee, maxfeerate)\r\n```\r\n\r\n\r\nIIUC `-maxtxfee` should generally be high as the maximum absolute fee you think you can ever pay, and `-maxfeerate` as a cautionary check against an absurd fee rate for a transaction based on current fee estimates.\r\n\r\nMaybe I should differentiate between the two error messages and make it more verbose, so that users can know which one is hit and adjust if its not intentional.\r\n\r\n\r\n\r\n",
      "created_at" : "2024-01-29T21:12:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#issuecomment-1915579486",
      "id" : 1915579486,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29278",
      "node_id" : "IC_kwDOABII585yLWxe",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1915579486/reactions"
      },
      "updated_at" : "2024-01-29T21:12:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1915579486",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48946461?v=4",
         "events_url" : "https://api.github.com/users/ismaelsadeeq/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ismaelsadeeq/followers",
         "following_url" : "https://api.github.com/users/ismaelsadeeq/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ismaelsadeeq/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ismaelsadeeq",
         "id" : 48946461,
         "login" : "ismaelsadeeq",
         "node_id" : "MDQ6VXNlcjQ4OTQ2NDYx",
         "organizations_url" : "https://api.github.com/users/ismaelsadeeq/orgs",
         "received_events_url" : "https://api.github.com/users/ismaelsadeeq/received_events",
         "repos_url" : "https://api.github.com/users/ismaelsadeeq/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ismaelsadeeq/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ismaelsadeeq/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ismaelsadeeq"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> just seems really gross to have to now consider both of these in coin selection, especially if a user sets wonky values.\r\n\r\nI dont really understand how this can affect coinselection, can you expand please? Thanks",
      "created_at" : "2024-01-29T21:14:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#issuecomment-1915582287",
      "id" : 1915582287,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29278",
      "node_id" : "IC_kwDOABII585yLXdP",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1915582287/reactions"
      },
      "updated_at" : "2024-01-29T21:14:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1915582287",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48946461?v=4",
         "events_url" : "https://api.github.com/users/ismaelsadeeq/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ismaelsadeeq/followers",
         "following_url" : "https://api.github.com/users/ismaelsadeeq/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ismaelsadeeq/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ismaelsadeeq",
         "id" : 48946461,
         "login" : "ismaelsadeeq",
         "node_id" : "MDQ6VXNlcjQ4OTQ2NDYx",
         "organizations_url" : "https://api.github.com/users/ismaelsadeeq/orgs",
         "received_events_url" : "https://api.github.com/users/ismaelsadeeq/received_events",
         "repos_url" : "https://api.github.com/users/ismaelsadeeq/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ismaelsadeeq/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ismaelsadeeq/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ismaelsadeeq"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> I dont really understand how this can affect coinselection, can you expand please? Thanks\r\n\r\nSorry, I was completely overthinking it! I was incorrectly thinking that we took `max_tx_fee` and `tx_fee_rate` as inputs to coin selection, but what we do instead:\r\n\r\n1. Check the if the user provided a `fee_rate` (this fee rate would have already been sanity checked against `max_fee_rate`)\r\n2. If not, get a fee rate by doing some checks against min fees and fee estimation\r\n3. Check `max_tx_fee` *after* the transaction is done (and now `max_tx_fee_rate`)",
      "created_at" : "2024-01-30T09:26:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#issuecomment-1916411990",
      "id" : 1916411990,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29278",
      "node_id" : "IC_kwDOABII585yOiBW",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1916411990/reactions"
      },
      "updated_at" : "2024-01-30T09:26:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1916411990",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7444140?v=4",
         "events_url" : "https://api.github.com/users/josibake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/josibake/followers",
         "following_url" : "https://api.github.com/users/josibake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/josibake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/josibake",
         "id" : 7444140,
         "login" : "josibake",
         "node_id" : "MDQ6VXNlcjc0NDQxNDA=",
         "organizations_url" : "https://api.github.com/users/josibake/orgs",
         "received_events_url" : "https://api.github.com/users/josibake/received_events",
         "repos_url" : "https://api.github.com/users/josibake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/josibake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/josibake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/josibake"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@ismaelsadeeq thanks for walking through the scenario! Reading over what you posted, if `maxtxfee` is left as the default, then the user can set whatever they want for `maxfeerate` without any issues. Depending on the types of transactions they make, they are essentially setting a new, lower `maxtxfee`.\r\n\r\nIf the user is setting both, they could create weird scenarios where the `maxtxfee` is too low compared to the `maxtxfeerate` and vice versa. But thinking it through and with your examples, I think most of my concern boils down to \"the user set a `maxtxfee` which is too low for the current fee environment.\" \r\n\r\n> Maybe I should differentiate between the two error messages and make it more verbose, so that users can know which one is hit and adjust if its not intentional.\r\n\r\nI think differentiating errors makes sense! Then it doesn't really matter if the user sets bad values for `max_fee_rate` or `max_tx_fee`, so long as we tell them which bad value is getting hit and prompt them to change it.",
      "created_at" : "2024-01-30T09:44:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#issuecomment-1916447568",
      "id" : 1916447568,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29278",
      "node_id" : "IC_kwDOABII585yOqtQ",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1916447568/reactions"
      },
      "updated_at" : "2024-01-30T09:44:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1916447568",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7444140?v=4",
         "events_url" : "https://api.github.com/users/josibake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/josibake/followers",
         "following_url" : "https://api.github.com/users/josibake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/josibake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/josibake",
         "id" : 7444140,
         "login" : "josibake",
         "node_id" : "MDQ6VXNlcjc0NDQxNDA=",
         "organizations_url" : "https://api.github.com/users/josibake/orgs",
         "received_events_url" : "https://api.github.com/users/josibake/received_events",
         "repos_url" : "https://api.github.com/users/josibake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/josibake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/josibake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/josibake"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1470885445"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1470885445"
         }
      },
      "author_association" : "MEMBER",
      "body" : "perhaps introduce a new error type: \r\n\r\n```suggestion\r\n        return util::Error{TransactionErrorString(TransactionError::MAX_FEE_RATE_EXCEEDED)};\r\n```",
      "commit_id" : "0c9e0c5b2218c154b62275794b878af7e1457647",
      "created_at" : "2024-01-30T09:46:44Z",
      "diff_hunk" : "@@ -1294,6 +1294,11 @@ static util::Result<CreatedTransactionResult> CreateTransactionInternal(\n         return util::Error{TransactionErrorString(TransactionError::MAX_FEE_EXCEEDED)};\n     }\n \n+    CFeeRate tx_fee_rate = CFeeRate(current_fee, nBytes);\n+    if (tx_fee_rate > wallet.m_max_tx_fee_rate) {\n+        return util::Error{TransactionErrorString(TransactionError::MAX_FEE_EXCEEDED)};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1470885445",
      "id" : 1470885445,
      "line" : 1299,
      "node_id" : "PRRC_kwDOABII585Xq-5F",
      "original_commit_id" : "0c9e0c5b2218c154b62275794b878af7e1457647",
      "original_line" : 1299,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "src/wallet/spend.cpp",
      "position" : 6,
      "pull_request_review_id" : 1850694919,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1470885445/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-30T09:46:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1470885445",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7444140?v=4",
         "events_url" : "https://api.github.com/users/josibake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/josibake/followers",
         "following_url" : "https://api.github.com/users/josibake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/josibake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/josibake",
         "id" : 7444140,
         "login" : "josibake",
         "node_id" : "MDQ6VXNlcjc0NDQxNDA=",
         "organizations_url" : "https://api.github.com/users/josibake/orgs",
         "received_events_url" : "https://api.github.com/users/josibake/received_events",
         "repos_url" : "https://api.github.com/users/josibake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/josibake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/josibake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/josibake"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1470968822"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1470968822"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Interestingly, in https://github.com/bitcoin/bitcoin/blob/411ba32af21a56efa0a570b6aa8bf8f035410230/src/rpc/mempool.cpp#L89\r\n\r\n`sendrawtransaction` takes a fee_rate argument, which is used to calculate a `max_tx_fee` based on the size of the transaction, and this `max_tx_fee` is passed to `BroadcastTransaction`. This means a user could typo an insane `maxfeerate` when calling `sendrawtransaction` that bypasses the default max tx fee.\r\n\r\nPerhaps it does make more sense to have `BroadcastTransaction` take two arguments, one for `max_tx_fee` and another for `max_tx_fee_rate`, and check them independently. Probably out of scope for this PR, since this is focused on the wallet, but wanted to mention it as a potential follow-up. ",
      "commit_id" : "0c9e0c5b2218c154b62275794b878af7e1457647",
      "created_at" : "2024-01-30T10:28:15Z",
      "diff_hunk" : "@@ -729,6 +729,8 @@ class CWallet final : public WalletStorage, public interfaces::Chain::Notificati\n     /** Absolute maximum transaction fee (in satoshis) used by default for the wallet */\n     CAmount m_default_max_tx_fee{DEFAULT_TRANSACTION_MAXFEE};\n \n+    /** Maximum transaction fee rate (in satoshis) used by default for the wallet */\n+    CAmount m_default_max_tx_fee_rate{node::DEFAULT_MAX_RAW_TX_FEE_RATE.GetFeePerK()};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1470968822",
      "id" : 1470968822,
      "in_reply_to_id" : 1459145558,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585XrTP2",
      "original_commit_id" : "2576efcf689401dcbea85856c74efc64af0c2cb2",
      "original_line" : 733,
      "original_position" : 5,
      "original_start_line" : 732,
      "path" : "src/wallet/wallet.h",
      "position" : null,
      "pull_request_review_id" : 1850821547,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1470968822/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2024-01-30T10:28:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1470968822",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7444140?v=4",
         "events_url" : "https://api.github.com/users/josibake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/josibake/followers",
         "following_url" : "https://api.github.com/users/josibake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/josibake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/josibake",
         "id" : 7444140,
         "login" : "josibake",
         "node_id" : "MDQ6VXNlcjc0NDQxNDA=",
         "organizations_url" : "https://api.github.com/users/josibake/orgs",
         "received_events_url" : "https://api.github.com/users/josibake/received_events",
         "repos_url" : "https://api.github.com/users/josibake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/josibake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/josibake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/josibake"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1472767521"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1472767521"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Added",
      "commit_id" : "d4dceeafc2292cd050cb10e308d73bc8ef84201a",
      "created_at" : "2024-01-31T12:40:38Z",
      "diff_hunk" : "@@ -1294,6 +1294,11 @@ static util::Result<CreatedTransactionResult> CreateTransactionInternal(\n         return util::Error{TransactionErrorString(TransactionError::MAX_FEE_EXCEEDED)};\n     }\n \n+    CFeeRate tx_fee_rate = CFeeRate(current_fee, nBytes);\n+    if (tx_fee_rate > wallet.m_max_tx_fee_rate) {\n+        return util::Error{TransactionErrorString(TransactionError::MAX_FEE_EXCEEDED)};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1472767521",
      "id" : 1472767521,
      "in_reply_to_id" : 1470885445,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585XyKYh",
      "original_commit_id" : "0c9e0c5b2218c154b62275794b878af7e1457647",
      "original_line" : 1299,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "src/wallet/spend.cpp",
      "position" : null,
      "pull_request_review_id" : 1853638679,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1472767521/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-31T12:40:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1472767521",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48946461?v=4",
         "events_url" : "https://api.github.com/users/ismaelsadeeq/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ismaelsadeeq/followers",
         "following_url" : "https://api.github.com/users/ismaelsadeeq/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ismaelsadeeq/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ismaelsadeeq",
         "id" : 48946461,
         "login" : "ismaelsadeeq",
         "node_id" : "MDQ6VXNlcjQ4OTQ2NDYx",
         "organizations_url" : "https://api.github.com/users/ismaelsadeeq/orgs",
         "received_events_url" : "https://api.github.com/users/ismaelsadeeq/received_events",
         "repos_url" : "https://api.github.com/users/ismaelsadeeq/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ismaelsadeeq/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ismaelsadeeq/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ismaelsadeeq"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1472768478"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1472768478"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Yes, fixed here and other place I did the same.",
      "commit_id" : "d4dceeafc2292cd050cb10e308d73bc8ef84201a",
      "created_at" : "2024-01-31T12:41:29Z",
      "diff_hunk" : "@@ -136,6 +136,8 @@ static const bool DEFAULT_DISABLE_WALLET = false;\n static const bool DEFAULT_WALLETCROSSCHAIN = false;\n //! -maxtxfee default\n constexpr CAmount DEFAULT_TRANSACTION_MAXFEE{COIN / 10};\n+//! maxfeerate default\n+const CFeeRate DEFAULT_TRANSACTION_MAXFEERATE(CFeeRate((COIN / 10), 1000));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1472768478",
      "id" : 1472768478,
      "in_reply_to_id" : 1469296961,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585XyKne",
      "original_commit_id" : "0c9e0c5b2218c154b62275794b878af7e1457647",
      "original_line" : 140,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/wallet/wallet.h",
      "position" : null,
      "pull_request_review_id" : 1853640183,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1472768478/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-31T12:41:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1472768478",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48946461?v=4",
         "events_url" : "https://api.github.com/users/ismaelsadeeq/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ismaelsadeeq/followers",
         "following_url" : "https://api.github.com/users/ismaelsadeeq/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ismaelsadeeq/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ismaelsadeeq",
         "id" : 48946461,
         "login" : "ismaelsadeeq",
         "node_id" : "MDQ6VXNlcjQ4OTQ2NDYx",
         "organizations_url" : "https://api.github.com/users/ismaelsadeeq/orgs",
         "received_events_url" : "https://api.github.com/users/ismaelsadeeq/received_events",
         "repos_url" : "https://api.github.com/users/ismaelsadeeq/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ismaelsadeeq/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ismaelsadeeq/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ismaelsadeeq"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1472775391"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1472775391"
         }
      },
      "author_association" : "MEMBER",
      "body" : "> Maybe add tests where you (successfully) configure the node's wallet using -maxfeerate?\r\n\r\nI dont understand what you mean by successfully configure nodes wallet.\r\n\r\nThe test you are commenting on configure node[0] with the `-maxfeerate` option.\r\nCould you clarify your comment, thanks.\r\n\r\n---\r\n>  Similarly, it would be good to test that both maxfee and maxfeerate requirements must be met.\r\n\r\nTheir is a test for `maxtxfee` already, and I added one for `maxfeerate`.\r\nhttps://github.com/bitcoin/bitcoin/blob/11b436a66af3ceaebb0f907878715f331516a0bc/test/functional/wallet_bumpfee.py#L557",
      "commit_id" : "d4dceeafc2292cd050cb10e308d73bc8ef84201a",
      "created_at" : "2024-01-31T12:47:44Z",
      "diff_hunk" : "@@ -184,6 +184,33 @@ def test_send(self, from_wallet, to_wallet=None, amount=None, data=None,\n \n         return res\n \n+    def test_maxfeerate(self):",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1472775391",
      "id" : 1472775391,
      "in_reply_to_id" : 1469291356,
      "line" : 187,
      "node_id" : "PRRC_kwDOABII585XyMTf",
      "original_commit_id" : "0c9e0c5b2218c154b62275794b878af7e1457647",
      "original_line" : 187,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "test/functional/wallet_send.py",
      "position" : 4,
      "pull_request_review_id" : 1853651123,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1472775391/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-31T12:47:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1472775391",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48946461?v=4",
         "events_url" : "https://api.github.com/users/ismaelsadeeq/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ismaelsadeeq/followers",
         "following_url" : "https://api.github.com/users/ismaelsadeeq/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ismaelsadeeq/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ismaelsadeeq",
         "id" : 48946461,
         "login" : "ismaelsadeeq",
         "node_id" : "MDQ6VXNlcjQ4OTQ2NDYx",
         "organizations_url" : "https://api.github.com/users/ismaelsadeeq/orgs",
         "received_events_url" : "https://api.github.com/users/ismaelsadeeq/received_events",
         "repos_url" : "https://api.github.com/users/ismaelsadeeq/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ismaelsadeeq/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ismaelsadeeq/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ismaelsadeeq"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1472785028"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1472785028"
         }
      },
      "author_association" : "MEMBER",
      "body" : "`relayMinFee` is relative to the fee rate of the transaction. I believe I did the right thing by removing it and enforcing this check on `-maxfeerate` instead.\r\n\r\nI don't think we should use the base fee value as a quantifier for the fee rate, as transaction sizes differ. \r\nThis is indicated in the issue description #29220.",
      "commit_id" : "d4dceeafc2292cd050cb10e308d73bc8ef84201a",
      "created_at" : "2024-01-31T12:56:08Z",
      "diff_hunk" : "@@ -3058,13 +3058,21 @@ std::shared_ptr<CWallet> CWallet::Create(WalletContext& context, const std::stri\n             warnings.push_back(strprintf(_(\"%s is set very high! Fees this large could be paid on a single transaction.\"), \"-maxtxfee\"));\n         }\n \n-        if (chain && CFeeRate{max_fee.value(), 1000} < chain->relayMinFee()) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1472785028",
      "id" : 1472785028,
      "in_reply_to_id" : 1469372132,
      "line" : 3061,
      "node_id" : "PRRC_kwDOABII585XyOqE",
      "original_commit_id" : "677dec10cc5a481db79bf34073d9eb65f5d30aff",
      "original_line" : 3061,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/wallet/wallet.cpp",
      "position" : 4,
      "pull_request_review_id" : 1853666735,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1472785028/reactions"
      },
      "side" : "LEFT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-31T12:56:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1472785028",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48946461?v=4",
         "events_url" : "https://api.github.com/users/ismaelsadeeq/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ismaelsadeeq/followers",
         "following_url" : "https://api.github.com/users/ismaelsadeeq/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ismaelsadeeq/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ismaelsadeeq",
         "id" : 48946461,
         "login" : "ismaelsadeeq",
         "node_id" : "MDQ6VXNlcjQ4OTQ2NDYx",
         "organizations_url" : "https://api.github.com/users/ismaelsadeeq/orgs",
         "received_events_url" : "https://api.github.com/users/ismaelsadeeq/received_events",
         "repos_url" : "https://api.github.com/users/ismaelsadeeq/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ismaelsadeeq/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ismaelsadeeq/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ismaelsadeeq"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1472790897"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1472790897"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Thanks for highlighting this issue @josibake , I agree with your `BroadcastTransaction` should enforce check on both.\r\nThis will make `sendrawtransaction` returns a specific error message.\r\n\r\n\r\n---\r\nFor this reason\r\n`MAX_FEE_RATE_EXCEEDED` error string is now `Fee exceeds maximum configured by user.`\r\nbecause if I add the option `maxtxfee` it will be misleading in `sendrawtransaction` output",
      "commit_id" : "d4dceeafc2292cd050cb10e308d73bc8ef84201a",
      "created_at" : "2024-01-31T13:01:06Z",
      "diff_hunk" : "@@ -729,6 +729,8 @@ class CWallet final : public WalletStorage, public interfaces::Chain::Notificati\n     /** Absolute maximum transaction fee (in satoshis) used by default for the wallet */\n     CAmount m_default_max_tx_fee{DEFAULT_TRANSACTION_MAXFEE};\n \n+    /** Maximum transaction fee rate (in satoshis) used by default for the wallet */\n+    CAmount m_default_max_tx_fee_rate{node::DEFAULT_MAX_RAW_TX_FEE_RATE.GetFeePerK()};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1472790897",
      "id" : 1472790897,
      "in_reply_to_id" : 1459145558,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585XyQFx",
      "original_commit_id" : "2576efcf689401dcbea85856c74efc64af0c2cb2",
      "original_line" : 733,
      "original_position" : 5,
      "original_start_line" : 732,
      "path" : "src/wallet/wallet.h",
      "position" : null,
      "pull_request_review_id" : 1853676015,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1472790897/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2024-01-31T14:05:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1472790897",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48946461?v=4",
         "events_url" : "https://api.github.com/users/ismaelsadeeq/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ismaelsadeeq/followers",
         "following_url" : "https://api.github.com/users/ismaelsadeeq/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ismaelsadeeq/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ismaelsadeeq",
         "id" : 48946461,
         "login" : "ismaelsadeeq",
         "node_id" : "MDQ6VXNlcjQ4OTQ2NDYx",
         "organizations_url" : "https://api.github.com/users/ismaelsadeeq/orgs",
         "received_events_url" : "https://api.github.com/users/ismaelsadeeq/received_events",
         "repos_url" : "https://api.github.com/users/ismaelsadeeq/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ismaelsadeeq/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ismaelsadeeq/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ismaelsadeeq"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1472810952"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1472810952"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I think the check needs to be enforced on both, since we are letting a user set one or the other (or both). Removing the check entirely for one of the options feels like a regression.\r\n\r\nIt's a good point that using the base fee value as a quantifier is not ideal, but previously this code was checking that the user did not set a `maxtxfee` that was so low that the minrelay fee could never be met. Now you've removed that check, which means I can set a very low `maxtxfee` and not get a warning.",
      "commit_id" : "d4dceeafc2292cd050cb10e308d73bc8ef84201a",
      "created_at" : "2024-01-31T13:18:31Z",
      "diff_hunk" : "@@ -3058,13 +3058,21 @@ std::shared_ptr<CWallet> CWallet::Create(WalletContext& context, const std::stri\n             warnings.push_back(strprintf(_(\"%s is set very high! Fees this large could be paid on a single transaction.\"), \"-maxtxfee\"));\n         }\n \n-        if (chain && CFeeRate{max_fee.value(), 1000} < chain->relayMinFee()) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1472810952",
      "id" : 1472810952,
      "in_reply_to_id" : 1469372132,
      "line" : 3061,
      "node_id" : "PRRC_kwDOABII585XyU_I",
      "original_commit_id" : "677dec10cc5a481db79bf34073d9eb65f5d30aff",
      "original_line" : 3061,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/wallet/wallet.cpp",
      "position" : 4,
      "pull_request_review_id" : 1853709570,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1472810952/reactions"
      },
      "side" : "LEFT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-31T13:18:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1472810952",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7444140?v=4",
         "events_url" : "https://api.github.com/users/josibake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/josibake/followers",
         "following_url" : "https://api.github.com/users/josibake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/josibake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/josibake",
         "id" : 7444140,
         "login" : "josibake",
         "node_id" : "MDQ6VXNlcjc0NDQxNDA=",
         "organizations_url" : "https://api.github.com/users/josibake/orgs",
         "received_events_url" : "https://api.github.com/users/josibake/received_events",
         "repos_url" : "https://api.github.com/users/josibake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/josibake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/josibake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/josibake"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1472815229"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1472815229"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Better to keep the option name in the error message:\r\n\r\n```suggestion\r\n            return Untranslated(\"Fee exceeds maximum configured by user (maxtxfee)\");\r\n```",
      "commit_id" : "d4dceeafc2292cd050cb10e308d73bc8ef84201a",
      "created_at" : "2024-01-31T13:22:00Z",
      "diff_hunk" : "@@ -32,7 +32,9 @@ bilingual_str TransactionErrorString(const TransactionError err)\n         case TransactionError::SIGHASH_MISMATCH:\n             return Untranslated(\"Specified sighash value does not match value stored in PSBT\");\n         case TransactionError::MAX_FEE_EXCEEDED:\n-            return Untranslated(\"Fee exceeds maximum configured by user (e.g. -maxtxfee, maxfeerate)\");\n+            return Untranslated(\"Fee exceeds maximum configured by user.\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1472815229",
      "id" : 1472815229,
      "line" : 35,
      "node_id" : "PRRC_kwDOABII585XyWB9",
      "original_commit_id" : "d4dceeafc2292cd050cb10e308d73bc8ef84201a",
      "original_line" : 35,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/util/error.cpp",
      "position" : 5,
      "pull_request_review_id" : 1853720901,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1472815229/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-31T13:22:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1472815229",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7444140?v=4",
         "events_url" : "https://api.github.com/users/josibake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/josibake/followers",
         "following_url" : "https://api.github.com/users/josibake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/josibake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/josibake",
         "id" : 7444140,
         "login" : "josibake",
         "node_id" : "MDQ6VXNlcjc0NDQxNDA=",
         "organizations_url" : "https://api.github.com/users/josibake/orgs",
         "received_events_url" : "https://api.github.com/users/josibake/received_events",
         "repos_url" : "https://api.github.com/users/josibake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/josibake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/josibake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/josibake"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1472820140"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1472820140"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Yes but I think should come in a follow-up after cleaning up your suggestion here\r\nhttps://github.com/bitcoin/bitcoin/pull/29278#discussion_r1472790897\r\n\r\nI have a local branch that does this on top of this branch.",
      "commit_id" : "d4dceeafc2292cd050cb10e308d73bc8ef84201a",
      "created_at" : "2024-01-31T13:25:53Z",
      "diff_hunk" : "@@ -32,7 +32,9 @@ bilingual_str TransactionErrorString(const TransactionError err)\n         case TransactionError::SIGHASH_MISMATCH:\n             return Untranslated(\"Specified sighash value does not match value stored in PSBT\");\n         case TransactionError::MAX_FEE_EXCEEDED:\n-            return Untranslated(\"Fee exceeds maximum configured by user (e.g. -maxtxfee, maxfeerate)\");\n+            return Untranslated(\"Fee exceeds maximum configured by user.\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1472820140",
      "id" : 1472820140,
      "in_reply_to_id" : 1472815229,
      "line" : 35,
      "node_id" : "PRRC_kwDOABII585XyXOs",
      "original_commit_id" : "d4dceeafc2292cd050cb10e308d73bc8ef84201a",
      "original_line" : 35,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/util/error.cpp",
      "position" : 5,
      "pull_request_review_id" : 1853728681,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1472820140/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-31T13:56:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1472820140",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48946461?v=4",
         "events_url" : "https://api.github.com/users/ismaelsadeeq/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ismaelsadeeq/followers",
         "following_url" : "https://api.github.com/users/ismaelsadeeq/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ismaelsadeeq/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ismaelsadeeq",
         "id" : 48946461,
         "login" : "ismaelsadeeq",
         "node_id" : "MDQ6VXNlcjQ4OTQ2NDYx",
         "organizations_url" : "https://api.github.com/users/ismaelsadeeq/orgs",
         "received_events_url" : "https://api.github.com/users/ismaelsadeeq/received_events",
         "repos_url" : "https://api.github.com/users/ismaelsadeeq/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ismaelsadeeq/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ismaelsadeeq/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ismaelsadeeq"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1472858661"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1472858661"
         }
      },
      "author_association" : "MEMBER",
      "body" : "> Removing the check entirely for one of the options feels like a regression.\r\n\r\nI don't think its a regression because this is the right behavior to check if the maximum fee rate we set is < minimum relay fee rate.\r\n\r\n\r\n>  but previously this code was checking that the user did not set a `maxtxfee` that was so low that the minrelay fee could never be met. Now you've removed that check, which means I can set a very low maxtxfee and not get a warning.\r\n\r\nWith the assumption of 1k vb size, transactions can have more or less virtual size though.\r\n\r\nI think we prevent creating transactions with fee rate below `relayMinFee` , so I think this okay?\r\n\r\n",
      "commit_id" : "d4dceeafc2292cd050cb10e308d73bc8ef84201a",
      "created_at" : "2024-01-31T13:55:50Z",
      "diff_hunk" : "@@ -3058,13 +3058,21 @@ std::shared_ptr<CWallet> CWallet::Create(WalletContext& context, const std::stri\n             warnings.push_back(strprintf(_(\"%s is set very high! Fees this large could be paid on a single transaction.\"), \"-maxtxfee\"));\n         }\n \n-        if (chain && CFeeRate{max_fee.value(), 1000} < chain->relayMinFee()) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1472858661",
      "id" : 1472858661,
      "in_reply_to_id" : 1469372132,
      "line" : 3061,
      "node_id" : "PRRC_kwDOABII585Xygol",
      "original_commit_id" : "677dec10cc5a481db79bf34073d9eb65f5d30aff",
      "original_line" : 3061,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/wallet/wallet.cpp",
      "position" : 4,
      "pull_request_review_id" : 1853791465,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1472858661/reactions"
      },
      "side" : "LEFT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-31T13:55:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1472858661",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48946461?v=4",
         "events_url" : "https://api.github.com/users/ismaelsadeeq/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ismaelsadeeq/followers",
         "following_url" : "https://api.github.com/users/ismaelsadeeq/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ismaelsadeeq/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ismaelsadeeq",
         "id" : 48946461,
         "login" : "ismaelsadeeq",
         "node_id" : "MDQ6VXNlcjQ4OTQ2NDYx",
         "organizations_url" : "https://api.github.com/users/ismaelsadeeq/orgs",
         "received_events_url" : "https://api.github.com/users/ismaelsadeeq/received_events",
         "repos_url" : "https://api.github.com/users/ismaelsadeeq/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ismaelsadeeq/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ismaelsadeeq/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ismaelsadeeq"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1472950555"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1472950555"
         }
      },
      "author_association" : "MEMBER",
      "body" : "> Now you've removed that check, which means I can set a very low maxtxfee and not get a warning.\r\n\r\nPerhaps just retain a version of the old check by enforcing that `maxtxfee` is set to at least `CAmount FLOOR_MAXTXFEE{1000}` (a conversion from the default min relay feerate)?",
      "commit_id" : "d4dceeafc2292cd050cb10e308d73bc8ef84201a",
      "created_at" : "2024-01-31T14:57:44Z",
      "diff_hunk" : "@@ -3058,13 +3058,21 @@ std::shared_ptr<CWallet> CWallet::Create(WalletContext& context, const std::stri\n             warnings.push_back(strprintf(_(\"%s is set very high! Fees this large could be paid on a single transaction.\"), \"-maxtxfee\"));\n         }\n \n-        if (chain && CFeeRate{max_fee.value(), 1000} < chain->relayMinFee()) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1472950555",
      "id" : 1472950555,
      "in_reply_to_id" : 1469372132,
      "line" : 3061,
      "node_id" : "PRRC_kwDOABII585Xy3Eb",
      "original_commit_id" : "677dec10cc5a481db79bf34073d9eb65f5d30aff",
      "original_line" : 3061,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/wallet/wallet.cpp",
      "position" : 4,
      "pull_request_review_id" : 1853952326,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1472950555/reactions"
      },
      "side" : "LEFT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-31T14:57:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1472950555",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK\r\n\r\nMy scenario for using both `maxtxfee` and `maxfeerate` would be slightly different. For example looking at the mempool in January, I might generally be okay with paying up to 50â¯sat/vB, but not a higher feerate, because I expect that it will generally suffice to get a confirmation within 24h, but at such a high feerate, I would not want to make a transaction with more than 10â¯inputs. So, Iâd delimit the feerate itself on the one hand, and then also limit the `maxtxfee` to 35'000 sats which is enough for a transaction with 10â¯P2TR keypath inputs and two P2TR outputs at 50â¯sat/vB. Through this general limit on the cost of a single transaction I could essentially set an upper bound on the total input weight of my transactions which would increase with lower feerates.",
      "created_at" : "2024-01-31T17:50:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#issuecomment-1919611531",
      "id" : 1919611531,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29278",
      "node_id" : "IC_kwDOABII585yavKL",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1919611531/reactions"
      },
      "updated_at" : "2024-01-31T17:50:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1919611531",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4060799?v=4",
         "events_url" : "https://api.github.com/users/murchandamus/events{/privacy}",
         "followers_url" : "https://api.github.com/users/murchandamus/followers",
         "following_url" : "https://api.github.com/users/murchandamus/following{/other_user}",
         "gists_url" : "https://api.github.com/users/murchandamus/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/murchandamus",
         "id" : 4060799,
         "login" : "murchandamus",
         "node_id" : "MDQ6VXNlcjQwNjA3OTk=",
         "organizations_url" : "https://api.github.com/users/murchandamus/orgs",
         "received_events_url" : "https://api.github.com/users/murchandamus/received_events",
         "repos_url" : "https://api.github.com/users/murchandamus/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/murchandamus/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/murchandamus/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/murchandamus"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1473230950"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1473230950"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "We are comparing two feerates, should this perhaps be:\r\n\r\n```suggestion\r\n        throw JSONRPCError(RPC_INVALID_PARAMETER, strprintf(\"fee rate cannot be more than wallet max tx fee rate (%s)\", pwallet->m_max_tx_fee_rate.ToString()));\r\n```",
      "commit_id" : "d4dceeafc2292cd050cb10e308d73bc8ef84201a",
      "created_at" : "2024-01-31T17:52:21Z",
      "diff_hunk" : "@@ -430,15 +430,14 @@ RPCHelpMan settxfee()\n \n     CAmount nAmount = AmountFromValue(request.params[0]);\n     CFeeRate tx_fee_rate(nAmount, 1000);\n-    CFeeRate max_tx_fee_rate(pwallet->m_default_max_tx_fee, 1000);\n     if (tx_fee_rate == CFeeRate(0)) {\n         // automatic selection\n     } else if (tx_fee_rate < pwallet->chain().relayMinFee()) {\n         throw JSONRPCError(RPC_INVALID_PARAMETER, strprintf(\"txfee cannot be less than min relay tx fee (%s)\", pwallet->chain().relayMinFee().ToString()));\n     } else if (tx_fee_rate < pwallet->m_min_fee) {\n         throw JSONRPCError(RPC_INVALID_PARAMETER, strprintf(\"txfee cannot be less than wallet min fee (%s)\", pwallet->m_min_fee.ToString()));\n-    } else if (tx_fee_rate > max_tx_fee_rate) {\n-        throw JSONRPCError(RPC_INVALID_PARAMETER, strprintf(\"txfee cannot be more than wallet max tx fee (%s)\", max_tx_fee_rate.ToString()));\n+    } else if (tx_fee_rate > pwallet->m_max_tx_fee_rate) {\n+        throw JSONRPCError(RPC_INVALID_PARAMETER, strprintf(\"txfee cannot be more than wallet max tx fee rate (%s)\", pwallet->m_max_tx_fee_rate.ToString()));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1473230950",
      "id" : 1473230950,
      "line" : 440,
      "node_id" : "PRRC_kwDOABII585Xz7hm",
      "original_commit_id" : "7664ec9bd744ab5ae403a87cd9d2aa3de747d278",
      "original_line" : 440,
      "original_position" : 14,
      "original_start_line" : null,
      "path" : "src/wallet/rpc/spend.cpp",
      "position" : 14,
      "pull_request_review_id" : 1854463255,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1473230950/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-31T18:21:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1473230950",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4060799?v=4",
         "events_url" : "https://api.github.com/users/murchandamus/events{/privacy}",
         "followers_url" : "https://api.github.com/users/murchandamus/followers",
         "following_url" : "https://api.github.com/users/murchandamus/following{/other_user}",
         "gists_url" : "https://api.github.com/users/murchandamus/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/murchandamus",
         "id" : 4060799,
         "login" : "murchandamus",
         "node_id" : "MDQ6VXNlcjQwNjA3OTk=",
         "organizations_url" : "https://api.github.com/users/murchandamus/orgs",
         "received_events_url" : "https://api.github.com/users/murchandamus/received_events",
         "repos_url" : "https://api.github.com/users/murchandamus/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/murchandamus/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/murchandamus/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/murchandamus"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1473237266"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1473237266"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In 7664ec9bd744ab5ae403a87cd9d2aa3de747d278 (wallet: add `maxfeerate` wallet startup option):\r\n\r\n `walletInstance->m_default_max_tx_fee` indicates to me that the value is the _default_ if the user does not customize the value, so it is confusing to me that the user value is assigned to a variable with \"default\" in its name.\r\n\r\n```suggestion\r\n        walletInstance->m_max_tx_fee = max_fee.value();\r\n```",
      "commit_id" : "d4dceeafc2292cd050cb10e308d73bc8ef84201a",
      "created_at" : "2024-01-31T17:56:19Z",
      "diff_hunk" : "@@ -3058,13 +3058,21 @@ std::shared_ptr<CWallet> CWallet::Create(WalletContext& context, const std::stri\n             warnings.push_back(strprintf(_(\"%s is set very high! Fees this large could be paid on a single transaction.\"), \"-maxtxfee\"));\n         }\n \n-        if (chain && CFeeRate{max_fee.value(), 1000} < chain->relayMinFee()) {\n+        walletInstance->m_default_max_tx_fee = max_fee.value();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1473237266",
      "id" : 1473237266,
      "line" : 3061,
      "node_id" : "PRRC_kwDOABII585Xz9ES",
      "original_commit_id" : "7664ec9bd744ab5ae403a87cd9d2aa3de747d278",
      "original_line" : 3061,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/wallet/wallet.cpp",
      "position" : 5,
      "pull_request_review_id" : 1854463255,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1473237266/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-31T18:21:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1473237266",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4060799?v=4",
         "events_url" : "https://api.github.com/users/murchandamus/events{/privacy}",
         "followers_url" : "https://api.github.com/users/murchandamus/followers",
         "following_url" : "https://api.github.com/users/murchandamus/following{/other_user}",
         "gists_url" : "https://api.github.com/users/murchandamus/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/murchandamus",
         "id" : 4060799,
         "login" : "murchandamus",
         "node_id" : "MDQ6VXNlcjQwNjA3OTk=",
         "organizations_url" : "https://api.github.com/users/murchandamus/orgs",
         "received_events_url" : "https://api.github.com/users/murchandamus/received_events",
         "repos_url" : "https://api.github.com/users/murchandamus/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/murchandamus/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/murchandamus/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/murchandamus"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1473247758"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1473247758"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In 7664ec9bd744ab5ae403a87cd9d2aa3de747d278 (wallet: add `maxfeerate` wallet startup option):\r\n\r\nIf I did not miscalculate this feerate translates to 10'000â¯sat/vB. A single input two output P2TR transaction would incur a cost of over 15â¯mâ¿ at that feerate. I could see how this might be reached if we CPFP a big transaction with a small transaction, but for a standalone transaction this limit fees too high for a failsafe.",
      "commit_id" : "d4dceeafc2292cd050cb10e308d73bc8ef84201a",
      "created_at" : "2024-01-31T18:02:51Z",
      "diff_hunk" : "@@ -136,6 +136,8 @@ static const bool DEFAULT_DISABLE_WALLET = false;\n static const bool DEFAULT_WALLETCROSSCHAIN = false;\n //! -maxtxfee default\n constexpr CAmount DEFAULT_TRANSACTION_MAXFEE{COIN / 10};\n+//! maxfeerate default\n+const CFeeRate DEFAULT_TRANSACTION_MAXFEERATE(CFeeRate(COIN / 10));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1473247758",
      "id" : 1473247758,
      "line" : 140,
      "node_id" : "PRRC_kwDOABII585Xz_oO",
      "original_commit_id" : "7664ec9bd744ab5ae403a87cd9d2aa3de747d278",
      "original_line" : 140,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/wallet/wallet.h",
      "position" : 5,
      "pull_request_review_id" : 1854463255,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1473247758/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-31T18:21:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1473247758",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4060799?v=4",
         "events_url" : "https://api.github.com/users/murchandamus/events{/privacy}",
         "followers_url" : "https://api.github.com/users/murchandamus/followers",
         "following_url" : "https://api.github.com/users/murchandamus/following{/other_user}",
         "gists_url" : "https://api.github.com/users/murchandamus/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/murchandamus",
         "id" : 4060799,
         "login" : "murchandamus",
         "node_id" : "MDQ6VXNlcjQwNjA3OTk=",
         "organizations_url" : "https://api.github.com/users/murchandamus/orgs",
         "received_events_url" : "https://api.github.com/users/murchandamus/received_events",
         "repos_url" : "https://api.github.com/users/murchandamus/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/murchandamus/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/murchandamus/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/murchandamus"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1473256087"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1473256087"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In a4b93767df8ce3f2b688b5295066965f4854f40f (wallet: test: enforce -maxfeerate on wallet transactions):\r\n\r\nGiven that we might use a small transaction to bump a big transaction, we might actually want to have a very large feerate on the child to achieve a reasonable mining score for the parent-child package. Would it perhaps make sense to generally lower the default maxfeerate but then compare it with the resulting mining score instead of the new transactionâs individual feerate?",
      "commit_id" : "d4dceeafc2292cd050cb10e308d73bc8ef84201a",
      "created_at" : "2024-01-31T18:07:41Z",
      "diff_hunk" : "@@ -80,6 +80,13 @@ static feebumper::Result CheckFeeRate(const CWallet& wallet, const CMutableTrans\n         return feebumper::Result::WALLET_ERROR;\n     }\n \n+    // check that new fee rate does not exceed maxfeerate",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1473256087",
      "id" : 1473256087,
      "line" : 83,
      "node_id" : "PRRC_kwDOABII585X0BqX",
      "original_commit_id" : "a4b93767df8ce3f2b688b5295066965f4854f40f",
      "original_line" : 83,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/wallet/feebumper.cpp",
      "position" : 4,
      "pull_request_review_id" : 1854463255,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1473256087/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-31T18:21:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1473256087",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4060799?v=4",
         "events_url" : "https://api.github.com/users/murchandamus/events{/privacy}",
         "followers_url" : "https://api.github.com/users/murchandamus/followers",
         "following_url" : "https://api.github.com/users/murchandamus/following{/other_user}",
         "gists_url" : "https://api.github.com/users/murchandamus/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/murchandamus",
         "id" : 4060799,
         "login" : "murchandamus",
         "node_id" : "MDQ6VXNlcjQwNjA3OTk=",
         "organizations_url" : "https://api.github.com/users/murchandamus/orgs",
         "received_events_url" : "https://api.github.com/users/murchandamus/received_events",
         "repos_url" : "https://api.github.com/users/murchandamus/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/murchandamus/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/murchandamus/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/murchandamus"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1473259190"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1473259190"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In a4b93767df8ce3f2b688b5295066965f4854f40f (wallet: test: enforce -maxfeerate on wallet transactions):\r\n\r\nI am a bit confused. You marked this as resolved and said you added this, but I donât see it in the current version. Did you fix it in your working branch but havenât pushed yet?",
      "commit_id" : "d4dceeafc2292cd050cb10e308d73bc8ef84201a",
      "created_at" : "2024-01-31T18:09:35Z",
      "diff_hunk" : "@@ -1294,6 +1294,11 @@ static util::Result<CreatedTransactionResult> CreateTransactionInternal(\n         return util::Error{TransactionErrorString(TransactionError::MAX_FEE_EXCEEDED)};\n     }\n \n+    CFeeRate tx_fee_rate = CFeeRate(current_fee, nBytes);\n+    if (tx_fee_rate > wallet.m_max_tx_fee_rate) {\n+        return util::Error{TransactionErrorString(TransactionError::MAX_FEE_EXCEEDED)};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1473259190",
      "id" : 1473259190,
      "in_reply_to_id" : 1470885445,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585X0Ca2",
      "original_commit_id" : "0c9e0c5b2218c154b62275794b878af7e1457647",
      "original_line" : 1299,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "src/wallet/spend.cpp",
      "position" : null,
      "pull_request_review_id" : 1854463255,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1473259190/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-31T18:21:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1473259190",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4060799?v=4",
         "events_url" : "https://api.github.com/users/murchandamus/events{/privacy}",
         "followers_url" : "https://api.github.com/users/murchandamus/followers",
         "following_url" : "https://api.github.com/users/murchandamus/following{/other_user}",
         "gists_url" : "https://api.github.com/users/murchandamus/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/murchandamus",
         "id" : 4060799,
         "login" : "murchandamus",
         "node_id" : "MDQ6VXNlcjQwNjA3OTk=",
         "organizations_url" : "https://api.github.com/users/murchandamus/orgs",
         "received_events_url" : "https://api.github.com/users/murchandamus/received_events",
         "repos_url" : "https://api.github.com/users/murchandamus/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/murchandamus/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/murchandamus/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/murchandamus"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1473269857"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1473269857"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In a4b93767df8ce3f2b688b5295066965f4854f40f (wallet: test: enforce -maxfeerate on wallet transactions):\r\n\r\nIf you first build a transaction that succeeds and then try to build a transaction that fails, this could also be caused by the success of the first transaction. Perhaps it would be better to turn around the order:\r\n\r\n1. Try to send at a feerate _above_ the `maxfeerate`, since that fails the wallet is still in the same state.\r\n2. Try to send at a feerate _just below_ the `maxfeerate` and show that it succeeds.\r\n\r\nPerhaps use 9900â¯sat/vB instead of 1000â¯sat/vB to box the `maxfeerate` a bit tighter.",
      "commit_id" : "d4dceeafc2292cd050cb10e308d73bc8ef84201a",
      "created_at" : "2024-01-31T18:14:39Z",
      "diff_hunk" : "@@ -184,6 +184,33 @@ def test_send(self, from_wallet, to_wallet=None, amount=None, data=None,\n \n         return res\n \n+    def test_maxfeerate(self):\n+        self.log.info(\"test -maxfeerate enforcement on wallet transactions.\")\n+        # Default maxfeerate is 10,000 sats/vb\n+        # All transactions with a fee rate below 10,000 will be created.\n+\n+        # All transaction with feerate <= 10,000 sats/vb can be created.\n+        self.nodes[0].sendtoaddress(self.nodes[0].getnewaddress(), amount=1, fee_rate=1000)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1473269857",
      "id" : 1473269857,
      "line" : 193,
      "node_id" : "PRRC_kwDOABII585X0FBh",
      "original_commit_id" : "a4b93767df8ce3f2b688b5295066965f4854f40f",
      "original_line" : 193,
      "original_position" : 10,
      "original_start_line" : null,
      "path" : "test/functional/wallet_send.py",
      "position" : 10,
      "pull_request_review_id" : 1854463255,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1473269857/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-31T18:21:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1473269857",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4060799?v=4",
         "events_url" : "https://api.github.com/users/murchandamus/events{/privacy}",
         "followers_url" : "https://api.github.com/users/murchandamus/followers",
         "following_url" : "https://api.github.com/users/murchandamus/following{/other_user}",
         "gists_url" : "https://api.github.com/users/murchandamus/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/murchandamus",
         "id" : 4060799,
         "login" : "murchandamus",
         "node_id" : "MDQ6VXNlcjQwNjA3OTk=",
         "organizations_url" : "https://api.github.com/users/murchandamus/orgs",
         "received_events_url" : "https://api.github.com/users/murchandamus/received_events",
         "repos_url" : "https://api.github.com/users/murchandamus/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/murchandamus/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/murchandamus/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/murchandamus"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1473270005"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1473270005"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Summarizing my thoughts from some offline discussion with @ismaelsadeeq :\r\n\r\n* I'm fairly certain we don't check `relayMinFee` when creating a transaction, but it would be good to confirm this (even better, to have a functional test!)\r\n* If the user can set both `relayMinFee` and `maxtxfee`, I think we need to have a sanity check at startup to make sure they are not setting insane values that could result in them creating stuck transactions\r\n* I think its okay to use a \"fake transaction size\" for a sanity check, but we should probably call it that i.e. `BASELINE_TX_SIZE = <1000, or maybe a minimum tx size?>`. That way, it is used consistently throughout the codebase, has a comment explaining what it used for and what it shouldn't be used for, etc\r\n* There are a few other places where we use `maxtxfee` to calculate a fake feerate (such as `settxfee`). We should change those to use `maxtxfeerate`\r\n\r\nIn general, I agree we should always use `maxtxfeerate` when checking things about feerates. The only exception is during startup where we need to compare `maxtxfee` to other user set values relating to feerates.",
      "commit_id" : "d4dceeafc2292cd050cb10e308d73bc8ef84201a",
      "created_at" : "2024-01-31T18:14:47Z",
      "diff_hunk" : "@@ -3058,13 +3058,21 @@ std::shared_ptr<CWallet> CWallet::Create(WalletContext& context, const std::stri\n             warnings.push_back(strprintf(_(\"%s is set very high! Fees this large could be paid on a single transaction.\"), \"-maxtxfee\"));\n         }\n \n-        if (chain && CFeeRate{max_fee.value(), 1000} < chain->relayMinFee()) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1473270005",
      "id" : 1473270005,
      "in_reply_to_id" : 1469372132,
      "line" : 3061,
      "node_id" : "PRRC_kwDOABII585X0FD1",
      "original_commit_id" : "677dec10cc5a481db79bf34073d9eb65f5d30aff",
      "original_line" : 3061,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/wallet/wallet.cpp",
      "position" : 4,
      "pull_request_review_id" : 1854508532,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1473270005/reactions"
      },
      "side" : "LEFT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-31T18:14:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1473270005",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7444140?v=4",
         "events_url" : "https://api.github.com/users/josibake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/josibake/followers",
         "following_url" : "https://api.github.com/users/josibake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/josibake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/josibake",
         "id" : 7444140,
         "login" : "josibake",
         "node_id" : "MDQ6VXNlcjc0NDQxNDA=",
         "organizations_url" : "https://api.github.com/users/josibake/orgs",
         "received_events_url" : "https://api.github.com/users/josibake/received_events",
         "repos_url" : "https://api.github.com/users/josibake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/josibake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/josibake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/josibake"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1473271780"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1473271780"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In a4b93767df8ce3f2b688b5295066965f4854f40f (wallet: test: enforce -maxfeerate on wallet transactions):\r\n\r\nOne transaction but closer to the limit should suffice:\r\n\r\n```suggestion\r\n        self.nodes[0].sendtoaddress(self.nodes[0].getnewaddress(), amount=1, fee_rate=9)\r\n```",
      "commit_id" : "d4dceeafc2292cd050cb10e308d73bc8ef84201a",
      "created_at" : "2024-01-31T18:16:27Z",
      "diff_hunk" : "@@ -184,6 +184,33 @@ def test_send(self, from_wallet, to_wallet=None, amount=None, data=None,\n \n         return res\n \n+    def test_maxfeerate(self):\n+        self.log.info(\"test -maxfeerate enforcement on wallet transactions.\")\n+        # Default maxfeerate is 10,000 sats/vb\n+        # All transactions with a fee rate below 10,000 will be created.\n+\n+        # All transaction with feerate <= 10,000 sats/vb can be created.\n+        self.nodes[0].sendtoaddress(self.nodes[0].getnewaddress(), amount=1, fee_rate=1000)\n+\n+        # Wallet will reject all transactions with feerate above 10,000 sats/vb.\n+        assert_raises_rpc_error(-6, \"Fee exceeds maximum configured by user (e.g. -maxtxfee, maxfeerate)\",\n+                                    self.nodes[0].sendtoaddress, address=self.nodes[0].getnewaddress(), amount=1, fee_rate=10001)\n+\n+        # Configure a lower -maxfeerate of 10 sats/vb.\n+        self.restart_node(0, extra_args=['-maxfeerate=0.00010'])\n+\n+        # Wallet will reject all transactions with fee rate above 10 sats/vb.\n+        assert_raises_rpc_error(-6, \"Fee exceeds maximum configured by user (e.g. -maxtxfee, maxfeerate)\",\n+                                    self.nodes[0].sendtoaddress, address=self.nodes[0].getnewaddress(), amount=1, fee_rate=11)\n+\n+        # Fee rates <= 10 sats/vb will be accepted by the wallet.\n+        self.nodes[0].sendtoaddress(self.nodes[0].getnewaddress(), amount=1, fee_rate=5)\n+        self.nodes[0].sendtoaddress(self.nodes[0].getnewaddress(), amount=1, fee_rate=6)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1473271780",
      "id" : 1473271780,
      "line" : 208,
      "node_id" : "PRRC_kwDOABII585X0Ffk",
      "original_commit_id" : "a4b93767df8ce3f2b688b5295066965f4854f40f",
      "original_line" : 208,
      "original_position" : 25,
      "original_start_line" : 207,
      "path" : "test/functional/wallet_send.py",
      "position" : 25,
      "pull_request_review_id" : 1854463255,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1473271780/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 207,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2024-01-31T18:21:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1473271780",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4060799?v=4",
         "events_url" : "https://api.github.com/users/murchandamus/events{/privacy}",
         "followers_url" : "https://api.github.com/users/murchandamus/followers",
         "following_url" : "https://api.github.com/users/murchandamus/following{/other_user}",
         "gists_url" : "https://api.github.com/users/murchandamus/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/murchandamus",
         "id" : 4060799,
         "login" : "murchandamus",
         "node_id" : "MDQ6VXNlcjQwNjA3OTk=",
         "organizations_url" : "https://api.github.com/users/murchandamus/orgs",
         "received_events_url" : "https://api.github.com/users/murchandamus/received_events",
         "repos_url" : "https://api.github.com/users/murchandamus/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/murchandamus/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/murchandamus/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/murchandamus"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1473275731"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1473275731"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In d4dceeafc2292cd050cb10e308d73bc8ef84201a (wallet: test: add new transaction error type):\r\n\r\nIt isnât clear to me why we would first ship a less descriptive new error message in this PR and then immediately fix it in a follow-up. It seems better to ship a descriptive error message right here.",
      "commit_id" : "d4dceeafc2292cd050cb10e308d73bc8ef84201a",
      "created_at" : "2024-01-31T18:20:12Z",
      "diff_hunk" : "@@ -32,7 +32,9 @@ bilingual_str TransactionErrorString(const TransactionError err)\n         case TransactionError::SIGHASH_MISMATCH:\n             return Untranslated(\"Specified sighash value does not match value stored in PSBT\");\n         case TransactionError::MAX_FEE_EXCEEDED:\n-            return Untranslated(\"Fee exceeds maximum configured by user (e.g. -maxtxfee, maxfeerate)\");\n+            return Untranslated(\"Fee exceeds maximum configured by user.\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1473275731",
      "id" : 1473275731,
      "in_reply_to_id" : 1472815229,
      "line" : 35,
      "node_id" : "PRRC_kwDOABII585X0GdT",
      "original_commit_id" : "d4dceeafc2292cd050cb10e308d73bc8ef84201a",
      "original_line" : 35,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/util/error.cpp",
      "position" : 5,
      "pull_request_review_id" : 1854463255,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1473275731/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-31T18:21:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1473275731",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4060799?v=4",
         "events_url" : "https://api.github.com/users/murchandamus/events{/privacy}",
         "followers_url" : "https://api.github.com/users/murchandamus/followers",
         "following_url" : "https://api.github.com/users/murchandamus/following{/other_user}",
         "gists_url" : "https://api.github.com/users/murchandamus/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/murchandamus",
         "id" : 4060799,
         "login" : "murchandamus",
         "node_id" : "MDQ6VXNlcjQwNjA3OTk=",
         "organizations_url" : "https://api.github.com/users/murchandamus/orgs",
         "received_events_url" : "https://api.github.com/users/murchandamus/received_events",
         "repos_url" : "https://api.github.com/users/murchandamus/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/murchandamus/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/murchandamus/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/murchandamus"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1473276807"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1473276807"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In d4dceeafc2292cd050cb10e308d73bc8ef84201a (wallet: test: add new transaction error type):\r\n\r\nThis seems strictly less informative. I would second @josibake in the suggestion to keep mentioning the `maxtxfee` here. Maybe Iâm missing something, could you elaborate why you would push that back to a follow-up?",
      "commit_id" : "d4dceeafc2292cd050cb10e308d73bc8ef84201a",
      "created_at" : "2024-01-31T18:21:14Z",
      "diff_hunk" : "@@ -321,7 +321,7 @@ def run_test(self):\n \n         self.log.info(\"Test invalid fee rate settings\")\n         for param, value in {(\"fee_rate\", 100000), (\"feeRate\", 1)}:\n-            assert_raises_rpc_error(-4, \"Fee exceeds maximum configured by user (e.g. -maxtxfee, maxfeerate)\",\n+            assert_raises_rpc_error(-4, \"Fee exceeds maximum configured by user.\",",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1473276807",
      "id" : 1473276807,
      "line" : 324,
      "node_id" : "PRRC_kwDOABII585X0GuH",
      "original_commit_id" : "d4dceeafc2292cd050cb10e308d73bc8ef84201a",
      "original_line" : 324,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "test/functional/rpc_psbt.py",
      "position" : 5,
      "pull_request_review_id" : 1854463255,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1473276807/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-31T18:21:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1473276807",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4060799?v=4",
         "events_url" : "https://api.github.com/users/murchandamus/events{/privacy}",
         "followers_url" : "https://api.github.com/users/murchandamus/followers",
         "following_url" : "https://api.github.com/users/murchandamus/following{/other_user}",
         "gists_url" : "https://api.github.com/users/murchandamus/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/murchandamus",
         "id" : 4060799,
         "login" : "murchandamus",
         "node_id" : "MDQ6VXNlcjQwNjA3OTk=",
         "organizations_url" : "https://api.github.com/users/murchandamus/orgs",
         "received_events_url" : "https://api.github.com/users/murchandamus/received_events",
         "repos_url" : "https://api.github.com/users/murchandamus/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/murchandamus/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/murchandamus/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/murchandamus"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1473280414"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1473280414"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I realized now that you are adding the new Error type in the third PR. It would make more sense to me if the new Error type were introduced first, and then the test that uses it would get added rather than adding the test and then later introducing the new Error type.",
      "commit_id" : "d4dceeafc2292cd050cb10e308d73bc8ef84201a",
      "created_at" : "2024-01-31T18:24:19Z",
      "diff_hunk" : "@@ -1294,6 +1294,11 @@ static util::Result<CreatedTransactionResult> CreateTransactionInternal(\n         return util::Error{TransactionErrorString(TransactionError::MAX_FEE_EXCEEDED)};\n     }\n \n+    CFeeRate tx_fee_rate = CFeeRate(current_fee, nBytes);\n+    if (tx_fee_rate > wallet.m_max_tx_fee_rate) {\n+        return util::Error{TransactionErrorString(TransactionError::MAX_FEE_EXCEEDED)};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1473280414",
      "id" : 1473280414,
      "in_reply_to_id" : 1470885445,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585X0Hme",
      "original_commit_id" : "0c9e0c5b2218c154b62275794b878af7e1457647",
      "original_line" : 1299,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "src/wallet/spend.cpp",
      "position" : null,
      "pull_request_review_id" : 1854525404,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1473280414/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-31T18:24:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1473280414",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4060799?v=4",
         "events_url" : "https://api.github.com/users/murchandamus/events{/privacy}",
         "followers_url" : "https://api.github.com/users/murchandamus/followers",
         "following_url" : "https://api.github.com/users/murchandamus/following{/other_user}",
         "gists_url" : "https://api.github.com/users/murchandamus/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/murchandamus",
         "id" : 4060799,
         "login" : "murchandamus",
         "node_id" : "MDQ6VXNlcjQwNjA3OTk=",
         "organizations_url" : "https://api.github.com/users/murchandamus/orgs",
         "received_events_url" : "https://api.github.com/users/murchandamus/received_events",
         "repos_url" : "https://api.github.com/users/murchandamus/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/murchandamus/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/murchandamus/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/murchandamus"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1473283667"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1473283667"
         }
      },
      "author_association" : "MEMBER",
      "body" : "> Perhaps just retain a version of the old check by enforcing that maxtxfee is set to at least CAmount FLOOR_MAXTXFEE{1000} (a conversion from the default min relay feerate)?\r\n\r\nThis doesn't cover the case where a user sets a `maxtxfee` and a custom `relayMinFee`. Admittedly, the old check wasn't perfect in that the user could still create > 1000 vbyte transactions that *might* still cause a problem. I think the best would be have a sanity check at startup (either the old one, or a new one with a different default for baseline tx size) and ALSO check that we are respecting the `relayMinFee` during transaction construction",
      "commit_id" : "d4dceeafc2292cd050cb10e308d73bc8ef84201a",
      "created_at" : "2024-01-31T18:27:19Z",
      "diff_hunk" : "@@ -3058,13 +3058,21 @@ std::shared_ptr<CWallet> CWallet::Create(WalletContext& context, const std::stri\n             warnings.push_back(strprintf(_(\"%s is set very high! Fees this large could be paid on a single transaction.\"), \"-maxtxfee\"));\n         }\n \n-        if (chain && CFeeRate{max_fee.value(), 1000} < chain->relayMinFee()) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1473283667",
      "id" : 1473283667,
      "in_reply_to_id" : 1469372132,
      "line" : 3061,
      "node_id" : "PRRC_kwDOABII585X0IZT",
      "original_commit_id" : "677dec10cc5a481db79bf34073d9eb65f5d30aff",
      "original_line" : 3061,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/wallet/wallet.cpp",
      "position" : 4,
      "pull_request_review_id" : 1854531401,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1473283667/reactions"
      },
      "side" : "LEFT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-01-31T18:28:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1473283667",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7444140?v=4",
         "events_url" : "https://api.github.com/users/josibake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/josibake/followers",
         "following_url" : "https://api.github.com/users/josibake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/josibake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/josibake",
         "id" : 7444140,
         "login" : "josibake",
         "node_id" : "MDQ6VXNlcjc0NDQxNDA=",
         "organizations_url" : "https://api.github.com/users/josibake/orgs",
         "received_events_url" : "https://api.github.com/users/josibake/received_events",
         "repos_url" : "https://api.github.com/users/josibake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/josibake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/josibake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/josibake"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK",
      "created_at" : "2024-01-31T18:30:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#issuecomment-1919698019",
      "id" : 1919698019,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29278",
      "node_id" : "IC_kwDOABII585ybERj",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1919698019/reactions"
      },
      "updated_at" : "2024-01-31T18:30:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1919698019",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7444140?v=4",
         "events_url" : "https://api.github.com/users/josibake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/josibake/followers",
         "following_url" : "https://api.github.com/users/josibake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/josibake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/josibake",
         "id" : 7444140,
         "login" : "josibake",
         "node_id" : "MDQ6VXNlcjc0NDQxNDA=",
         "organizations_url" : "https://api.github.com/users/josibake/orgs",
         "received_events_url" : "https://api.github.com/users/josibake/received_events",
         "repos_url" : "https://api.github.com/users/josibake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/josibake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/josibake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/josibake"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1475536100"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1475536100"
         }
      },
      "author_association" : "NONE",
      "body" : "Im Open For Business ",
      "commit_id" : "d4dceeafc2292cd050cb10e308d73bc8ef84201a",
      "created_at" : "2024-02-02T04:54:19Z",
      "diff_hunk" : "@@ -729,6 +729,8 @@ class CWallet final : public WalletStorage, public interfaces::Chain::Notificati\n     /** Absolute maximum transaction fee (in satoshis) used by default for the wallet */\n     CAmount m_default_max_tx_fee{DEFAULT_TRANSACTION_MAXFEE};\n \n+    /** Maximum transaction fee rate (in satoshis) used by default for the wallet */\n+    CAmount m_default_max_tx_fee_rate{node::DEFAULT_MAX_RAW_TX_FEE_RATE.GetFeePerK()};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1475536100",
      "id" : 1475536100,
      "in_reply_to_id" : 1459145558,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585X8uTk",
      "original_commit_id" : "2576efcf689401dcbea85856c74efc64af0c2cb2",
      "original_line" : 733,
      "original_position" : 5,
      "original_start_line" : 732,
      "path" : "src/wallet/wallet.h",
      "position" : null,
      "pull_request_review_id" : 1858299917,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1475536100/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2024-02-02T04:54:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1475536100",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/152139762?v=4",
         "events_url" : "https://api.github.com/users/DanaBCannon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DanaBCannon/followers",
         "following_url" : "https://api.github.com/users/DanaBCannon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DanaBCannon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DanaBCannon",
         "id" : 152139762,
         "login" : "DanaBCannon",
         "node_id" : "U_kgDOCRF38g",
         "organizations_url" : "https://api.github.com/users/DanaBCannon/orgs",
         "received_events_url" : "https://api.github.com/users/DanaBCannon/received_events",
         "repos_url" : "https://api.github.com/users/DanaBCannon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DanaBCannon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DanaBCannon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DanaBCannon"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1476415646"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1476415646"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Adding a new configuration option would need a release note.",
      "commit_id" : "d1eabac320a09a18cd50d2c08624220f3f92fd4e",
      "created_at" : "2024-02-02T17:19:28Z",
      "diff_hunk" : "@@ -37,6 +37,7 @@ void DummyWalletInit::AddWalletOptions(ArgsManager& argsman) const\n         \"-keypool=<n>\",\n         \"-maxapsfee=<n>\",\n         \"-maxtxfee=<amt>\",\n+        \"-maxfeerate=<amt>\",",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1476415646",
      "id" : 1476415646,
      "line" : 40,
      "node_id" : "PRRC_kwDOABII585YAFCe",
      "original_commit_id" : "d4dceeafc2292cd050cb10e308d73bc8ef84201a",
      "original_line" : 40,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/dummywallet.cpp",
      "position" : 4,
      "pull_request_review_id" : 1859872357,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1476415646/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-02-02T17:19:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1476415646",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--85328a0da195eb286784d51f73fa0af9-->\n\nð§ At least one of the CI tasks failed. Make sure to run all tests locally, according to the\ndocumentation.\n\nPossibly this is due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n<sub>Debug: https://github.com/bitcoin/bitcoin/runs/21214775948</sub>",
      "created_at" : "2024-02-05T07:38:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#issuecomment-1926384961",
      "id" : 1926384961,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29278",
      "node_id" : "IC_kwDOABII585y0k1B",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1926384961/reactions"
      },
      "updated_at" : "2024-02-05T07:38:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1926384961",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1477791006"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1477791006"
         }
      },
      "author_association" : "MEMBER",
      "body" : ">I'm fairly certain we don't check relayMinFee when creating a transaction, but it would be good to confirm this (even better, to have a functional test!)\r\n\r\nI've tested this, and it turns out that the wallet indeed prevents creating transactions below the `minrelaytxfee`\r\n https://github.com/bitcoin/bitcoin/blob/a11585692e72cac468fb1496ea2c30e4c07f73e5/src/wallet/spend.cpp#L1055\r\n \r\nHere is a test that confirms we can't create transactions with a fee rate below the minimum relay fee, and also the node won't start if maxtxfee is very low so that a 1000 VB transaction with `maxtxfee` base fee fee rate is below`minrelaytxfee`.\r\nSee https://github.com/ismaelsadeeq/bitcoin/commit/aa075b8ef0b43f03d2fbef41c04a71403e93d904\r\n\r\nIn cases where users set a high `minrelaytxfee` and low `maxtxfee`, they can't even create transactions.\r\nI agree with @josibake suggestion and added a commit that performs the same check in wallet initialization as before.\r\nnode won't start if `maxtxfee` is very low so that a 1000 vb transaction with `maxtxfee` base fee fee rate is below the `minrelaytxfee`.\r\n\r\nIn cases where the transaction size exceeds 1000 vb, the wallet check should safeguard against creating stuck transactions.\r\n",
      "commit_id" : "d1eabac320a09a18cd50d2c08624220f3f92fd4e",
      "created_at" : "2024-02-05T08:02:11Z",
      "diff_hunk" : "@@ -3058,13 +3058,21 @@ std::shared_ptr<CWallet> CWallet::Create(WalletContext& context, const std::stri\n             warnings.push_back(strprintf(_(\"%s is set very high! Fees this large could be paid on a single transaction.\"), \"-maxtxfee\"));\n         }\n \n-        if (chain && CFeeRate{max_fee.value(), 1000} < chain->relayMinFee()) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1477791006",
      "id" : 1477791006,
      "in_reply_to_id" : 1469372132,
      "line" : 3061,
      "node_id" : "PRRC_kwDOABII585YFU0e",
      "original_commit_id" : "677dec10cc5a481db79bf34073d9eb65f5d30aff",
      "original_line" : 3061,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/wallet/wallet.cpp",
      "position" : 25,
      "pull_request_review_id" : 1862082911,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1477791006/reactions"
      },
      "side" : "LEFT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-02-05T08:02:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1477791006",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48946461?v=4",
         "events_url" : "https://api.github.com/users/ismaelsadeeq/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ismaelsadeeq/followers",
         "following_url" : "https://api.github.com/users/ismaelsadeeq/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ismaelsadeeq/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ismaelsadeeq",
         "id" : 48946461,
         "login" : "ismaelsadeeq",
         "node_id" : "MDQ6VXNlcjQ4OTQ2NDYx",
         "organizations_url" : "https://api.github.com/users/ismaelsadeeq/orgs",
         "received_events_url" : "https://api.github.com/users/ismaelsadeeq/received_events",
         "repos_url" : "https://api.github.com/users/ismaelsadeeq/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ismaelsadeeq/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ismaelsadeeq/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ismaelsadeeq"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1477793113"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1477793113"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Thanks @murchandamus, I agree with your suggestion and reorder the commits.",
      "commit_id" : "d1eabac320a09a18cd50d2c08624220f3f92fd4e",
      "created_at" : "2024-02-05T08:04:33Z",
      "diff_hunk" : "@@ -1294,6 +1294,11 @@ static util::Result<CreatedTransactionResult> CreateTransactionInternal(\n         return util::Error{TransactionErrorString(TransactionError::MAX_FEE_EXCEEDED)};\n     }\n \n+    CFeeRate tx_fee_rate = CFeeRate(current_fee, nBytes);\n+    if (tx_fee_rate > wallet.m_max_tx_fee_rate) {\n+        return util::Error{TransactionErrorString(TransactionError::MAX_FEE_EXCEEDED)};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1477793113",
      "id" : 1477793113,
      "in_reply_to_id" : 1470885445,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585YFVVZ",
      "original_commit_id" : "0c9e0c5b2218c154b62275794b878af7e1457647",
      "original_line" : 1299,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "src/wallet/spend.cpp",
      "position" : null,
      "pull_request_review_id" : 1862086482,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1477793113/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-02-05T08:04:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1477793113",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48946461?v=4",
         "events_url" : "https://api.github.com/users/ismaelsadeeq/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ismaelsadeeq/followers",
         "following_url" : "https://api.github.com/users/ismaelsadeeq/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ismaelsadeeq/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ismaelsadeeq",
         "id" : 48946461,
         "login" : "ismaelsadeeq",
         "node_id" : "MDQ6VXNlcjQ4OTQ2NDYx",
         "organizations_url" : "https://api.github.com/users/ismaelsadeeq/orgs",
         "received_events_url" : "https://api.github.com/users/ismaelsadeeq/received_events",
         "repos_url" : "https://api.github.com/users/ismaelsadeeq/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ismaelsadeeq/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ismaelsadeeq/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ismaelsadeeq"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1477810958"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1477810958"
         }
      },
      "author_association" : "MEMBER",
      "body" : "The reason is that the maximum fee rate check for [`sendrawtransaction`](https://github.com/bitcoin/bitcoin/blob/a11585692e72cac468fb1496ea2c30e4c07f73e5/src/rpc/mempool.cpp#L84-L94) is performed in `BroadcastTransaction` which returned [`MAX_FEE_EXCEEDED`](https://github.com/bitcoin/bitcoin/blob/a11585692e72cac468fb1496ea2c30e4c07f73e5/src/node/transaction.cpp#L71-L79) error type to `sendrawtransaction`.\r\nIf I change the `MAX_FEE_EXCEEDED` error message to \"Fee exceeds maximum configured by user (maxtxfee)\" without changing how it's checked, this would be misleading for `sendrawtransaction` callers and I wanted this to be a minimal wallet change that adds the `maxfeerate` option to the wallet.\r\n\r\nHowever I agree with your comment, I have now added a commit that also checks the fee rate limit in `BroadcastTransaction`,  and changed how `sendrawtransaction` is implemented, and updated the `MAX_FEE_EXCEEDED` transaction error type message.\r\n",
      "commit_id" : "d1eabac320a09a18cd50d2c08624220f3f92fd4e",
      "created_at" : "2024-02-05T08:23:11Z",
      "diff_hunk" : "@@ -32,7 +32,9 @@ bilingual_str TransactionErrorString(const TransactionError err)\n         case TransactionError::SIGHASH_MISMATCH:\n             return Untranslated(\"Specified sighash value does not match value stored in PSBT\");\n         case TransactionError::MAX_FEE_EXCEEDED:\n-            return Untranslated(\"Fee exceeds maximum configured by user (e.g. -maxtxfee, maxfeerate)\");\n+            return Untranslated(\"Fee exceeds maximum configured by user.\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1477810958",
      "id" : 1477810958,
      "in_reply_to_id" : 1472815229,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585YFZsO",
      "original_commit_id" : "d4dceeafc2292cd050cb10e308d73bc8ef84201a",
      "original_line" : 35,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/util/error.cpp",
      "position" : null,
      "pull_request_review_id" : 1862115995,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1477810958/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-02-05T08:23:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1477810958",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48946461?v=4",
         "events_url" : "https://api.github.com/users/ismaelsadeeq/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ismaelsadeeq/followers",
         "following_url" : "https://api.github.com/users/ismaelsadeeq/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ismaelsadeeq/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ismaelsadeeq",
         "id" : 48946461,
         "login" : "ismaelsadeeq",
         "node_id" : "MDQ6VXNlcjQ4OTQ2NDYx",
         "organizations_url" : "https://api.github.com/users/ismaelsadeeq/orgs",
         "received_events_url" : "https://api.github.com/users/ismaelsadeeq/received_events",
         "repos_url" : "https://api.github.com/users/ismaelsadeeq/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ismaelsadeeq/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ismaelsadeeq/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ismaelsadeeq"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1477819038"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1477819038"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Fixed, thanks",
      "commit_id" : "d1eabac320a09a18cd50d2c08624220f3f92fd4e",
      "created_at" : "2024-02-05T08:30:49Z",
      "diff_hunk" : "@@ -430,15 +430,14 @@ RPCHelpMan settxfee()\n \n     CAmount nAmount = AmountFromValue(request.params[0]);\n     CFeeRate tx_fee_rate(nAmount, 1000);\n-    CFeeRate max_tx_fee_rate(pwallet->m_default_max_tx_fee, 1000);\n     if (tx_fee_rate == CFeeRate(0)) {\n         // automatic selection\n     } else if (tx_fee_rate < pwallet->chain().relayMinFee()) {\n         throw JSONRPCError(RPC_INVALID_PARAMETER, strprintf(\"txfee cannot be less than min relay tx fee (%s)\", pwallet->chain().relayMinFee().ToString()));\n     } else if (tx_fee_rate < pwallet->m_min_fee) {\n         throw JSONRPCError(RPC_INVALID_PARAMETER, strprintf(\"txfee cannot be less than wallet min fee (%s)\", pwallet->m_min_fee.ToString()));\n-    } else if (tx_fee_rate > max_tx_fee_rate) {\n-        throw JSONRPCError(RPC_INVALID_PARAMETER, strprintf(\"txfee cannot be more than wallet max tx fee (%s)\", max_tx_fee_rate.ToString()));\n+    } else if (tx_fee_rate > pwallet->m_max_tx_fee_rate) {\n+        throw JSONRPCError(RPC_INVALID_PARAMETER, strprintf(\"txfee cannot be more than wallet max tx fee rate (%s)\", pwallet->m_max_tx_fee_rate.ToString()));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1477819038",
      "id" : 1477819038,
      "in_reply_to_id" : 1473230950,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585YFbqe",
      "original_commit_id" : "7664ec9bd744ab5ae403a87cd9d2aa3de747d278",
      "original_line" : 442,
      "original_position" : 14,
      "original_start_line" : null,
      "path" : "src/wallet/rpc/spend.cpp",
      "position" : null,
      "pull_request_review_id" : 1862128841,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1477819038/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-02-05T08:30:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1477819038",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48946461?v=4",
         "events_url" : "https://api.github.com/users/ismaelsadeeq/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ismaelsadeeq/followers",
         "following_url" : "https://api.github.com/users/ismaelsadeeq/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ismaelsadeeq/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ismaelsadeeq",
         "id" : 48946461,
         "login" : "ismaelsadeeq",
         "node_id" : "MDQ6VXNlcjQ4OTQ2NDYx",
         "organizations_url" : "https://api.github.com/users/ismaelsadeeq/orgs",
         "received_events_url" : "https://api.github.com/users/ismaelsadeeq/received_events",
         "repos_url" : "https://api.github.com/users/ismaelsadeeq/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ismaelsadeeq/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ismaelsadeeq/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ismaelsadeeq"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1477819954"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1477819954"
         }
      },
      "author_association" : "MEMBER",
      "body" : "fixed",
      "commit_id" : "d1eabac320a09a18cd50d2c08624220f3f92fd4e",
      "created_at" : "2024-02-05T08:31:44Z",
      "diff_hunk" : "@@ -3058,13 +3058,21 @@ std::shared_ptr<CWallet> CWallet::Create(WalletContext& context, const std::stri\n             warnings.push_back(strprintf(_(\"%s is set very high! Fees this large could be paid on a single transaction.\"), \"-maxtxfee\"));\n         }\n \n-        if (chain && CFeeRate{max_fee.value(), 1000} < chain->relayMinFee()) {\n+        walletInstance->m_default_max_tx_fee = max_fee.value();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1477819954",
      "id" : 1477819954,
      "in_reply_to_id" : 1473237266,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585YFb4y",
      "original_commit_id" : "7664ec9bd744ab5ae403a87cd9d2aa3de747d278",
      "original_line" : 3061,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 1862130327,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1477819954/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-02-05T08:31:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1477819954",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48946461?v=4",
         "events_url" : "https://api.github.com/users/ismaelsadeeq/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ismaelsadeeq/followers",
         "following_url" : "https://api.github.com/users/ismaelsadeeq/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ismaelsadeeq/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ismaelsadeeq",
         "id" : 48946461,
         "login" : "ismaelsadeeq",
         "node_id" : "MDQ6VXNlcjQ4OTQ2NDYx",
         "organizations_url" : "https://api.github.com/users/ismaelsadeeq/orgs",
         "received_events_url" : "https://api.github.com/users/ismaelsadeeq/received_events",
         "repos_url" : "https://api.github.com/users/ismaelsadeeq/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ismaelsadeeq/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ismaelsadeeq/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ismaelsadeeq"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1477823064"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1477823064"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I've implemented your suggestion ðð¾ ",
      "commit_id" : "d1eabac320a09a18cd50d2c08624220f3f92fd4e",
      "created_at" : "2024-02-05T08:34:38Z",
      "diff_hunk" : "@@ -184,6 +184,33 @@ def test_send(self, from_wallet, to_wallet=None, amount=None, data=None,\n \n         return res\n \n+    def test_maxfeerate(self):\n+        self.log.info(\"test -maxfeerate enforcement on wallet transactions.\")\n+        # Default maxfeerate is 10,000 sats/vb\n+        # All transactions with a fee rate below 10,000 will be created.\n+\n+        # All transaction with feerate <= 10,000 sats/vb can be created.\n+        self.nodes[0].sendtoaddress(self.nodes[0].getnewaddress(), amount=1, fee_rate=1000)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1477823064",
      "id" : 1477823064,
      "in_reply_to_id" : 1473269857,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585YFcpY",
      "original_commit_id" : "a4b93767df8ce3f2b688b5295066965f4854f40f",
      "original_line" : 193,
      "original_position" : 10,
      "original_start_line" : null,
      "path" : "test/functional/wallet_send.py",
      "position" : null,
      "pull_request_review_id" : 1862135209,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1477823064/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-02-05T08:34:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1477823064",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48946461?v=4",
         "events_url" : "https://api.github.com/users/ismaelsadeeq/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ismaelsadeeq/followers",
         "following_url" : "https://api.github.com/users/ismaelsadeeq/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ismaelsadeeq/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ismaelsadeeq",
         "id" : 48946461,
         "login" : "ismaelsadeeq",
         "node_id" : "MDQ6VXNlcjQ4OTQ2NDYx",
         "organizations_url" : "https://api.github.com/users/ismaelsadeeq/orgs",
         "received_events_url" : "https://api.github.com/users/ismaelsadeeq/received_events",
         "repos_url" : "https://api.github.com/users/ismaelsadeeq/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ismaelsadeeq/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ismaelsadeeq/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ismaelsadeeq"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1477823251"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1477823251"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Fixed",
      "commit_id" : "d1eabac320a09a18cd50d2c08624220f3f92fd4e",
      "created_at" : "2024-02-05T08:34:50Z",
      "diff_hunk" : "@@ -184,6 +184,33 @@ def test_send(self, from_wallet, to_wallet=None, amount=None, data=None,\n \n         return res\n \n+    def test_maxfeerate(self):\n+        self.log.info(\"test -maxfeerate enforcement on wallet transactions.\")\n+        # Default maxfeerate is 10,000 sats/vb\n+        # All transactions with a fee rate below 10,000 will be created.\n+\n+        # All transaction with feerate <= 10,000 sats/vb can be created.\n+        self.nodes[0].sendtoaddress(self.nodes[0].getnewaddress(), amount=1, fee_rate=1000)\n+\n+        # Wallet will reject all transactions with feerate above 10,000 sats/vb.\n+        assert_raises_rpc_error(-6, \"Fee exceeds maximum configured by user (e.g. -maxtxfee, maxfeerate)\",\n+                                    self.nodes[0].sendtoaddress, address=self.nodes[0].getnewaddress(), amount=1, fee_rate=10001)\n+\n+        # Configure a lower -maxfeerate of 10 sats/vb.\n+        self.restart_node(0, extra_args=['-maxfeerate=0.00010'])\n+\n+        # Wallet will reject all transactions with fee rate above 10 sats/vb.\n+        assert_raises_rpc_error(-6, \"Fee exceeds maximum configured by user (e.g. -maxtxfee, maxfeerate)\",\n+                                    self.nodes[0].sendtoaddress, address=self.nodes[0].getnewaddress(), amount=1, fee_rate=11)\n+\n+        # Fee rates <= 10 sats/vb will be accepted by the wallet.\n+        self.nodes[0].sendtoaddress(self.nodes[0].getnewaddress(), amount=1, fee_rate=5)\n+        self.nodes[0].sendtoaddress(self.nodes[0].getnewaddress(), amount=1, fee_rate=6)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1477823251",
      "id" : 1477823251,
      "in_reply_to_id" : 1473271780,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585YFcsT",
      "original_commit_id" : "a4b93767df8ce3f2b688b5295066965f4854f40f",
      "original_line" : 208,
      "original_position" : 25,
      "original_start_line" : 207,
      "path" : "test/functional/wallet_send.py",
      "position" : null,
      "pull_request_review_id" : 1862135551,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1477823251/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2024-02-05T08:34:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1477823251",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48946461?v=4",
         "events_url" : "https://api.github.com/users/ismaelsadeeq/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ismaelsadeeq/followers",
         "following_url" : "https://api.github.com/users/ismaelsadeeq/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ismaelsadeeq/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ismaelsadeeq",
         "id" : 48946461,
         "login" : "ismaelsadeeq",
         "node_id" : "MDQ6VXNlcjQ4OTQ2NDYx",
         "organizations_url" : "https://api.github.com/users/ismaelsadeeq/orgs",
         "received_events_url" : "https://api.github.com/users/ismaelsadeeq/received_events",
         "repos_url" : "https://api.github.com/users/ismaelsadeeq/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ismaelsadeeq/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ismaelsadeeq/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ismaelsadeeq"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1477823771"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1477823771"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Added thanks",
      "commit_id" : "d1eabac320a09a18cd50d2c08624220f3f92fd4e",
      "created_at" : "2024-02-05T08:35:16Z",
      "diff_hunk" : "@@ -37,6 +37,7 @@ void DummyWalletInit::AddWalletOptions(ArgsManager& argsman) const\n         \"-keypool=<n>\",\n         \"-maxapsfee=<n>\",\n         \"-maxtxfee=<amt>\",\n+        \"-maxfeerate=<amt>\",",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1477823771",
      "id" : 1477823771,
      "in_reply_to_id" : 1476415646,
      "line" : 40,
      "node_id" : "PRRC_kwDOABII585YFc0b",
      "original_commit_id" : "d4dceeafc2292cd050cb10e308d73bc8ef84201a",
      "original_line" : 40,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/dummywallet.cpp",
      "position" : 4,
      "pull_request_review_id" : 1862136341,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1477823771/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-02-05T08:35:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1477823771",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48946461?v=4",
         "events_url" : "https://api.github.com/users/ismaelsadeeq/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ismaelsadeeq/followers",
         "following_url" : "https://api.github.com/users/ismaelsadeeq/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ismaelsadeeq/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ismaelsadeeq",
         "id" : 48946461,
         "login" : "ismaelsadeeq",
         "node_id" : "MDQ6VXNlcjQ4OTQ2NDYx",
         "organizations_url" : "https://api.github.com/users/ismaelsadeeq/orgs",
         "received_events_url" : "https://api.github.com/users/ismaelsadeeq/received_events",
         "repos_url" : "https://api.github.com/users/ismaelsadeeq/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ismaelsadeeq/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ismaelsadeeq/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ismaelsadeeq"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1477828459"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1477828459"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Yes its 10'000 sat/vb, I agree its high indeed Should I reduce it to maybe 1000 s/vb instead?\r\n\r\n---\r\nThis is configurable option can be reduced by users to threshold they want.",
      "commit_id" : "d1eabac320a09a18cd50d2c08624220f3f92fd4e",
      "created_at" : "2024-02-05T08:39:46Z",
      "diff_hunk" : "@@ -136,6 +136,8 @@ static const bool DEFAULT_DISABLE_WALLET = false;\n static const bool DEFAULT_WALLETCROSSCHAIN = false;\n //! -maxtxfee default\n constexpr CAmount DEFAULT_TRANSACTION_MAXFEE{COIN / 10};\n+//! maxfeerate default\n+const CFeeRate DEFAULT_TRANSACTION_MAXFEERATE(CFeeRate(COIN / 10));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1477828459",
      "id" : 1477828459,
      "in_reply_to_id" : 1473247758,
      "line" : 140,
      "node_id" : "PRRC_kwDOABII585YFd9r",
      "original_commit_id" : "7664ec9bd744ab5ae403a87cd9d2aa3de747d278",
      "original_line" : 140,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/wallet/wallet.h",
      "position" : 5,
      "pull_request_review_id" : 1862144411,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1477828459/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-02-05T08:39:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1477828459",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48946461?v=4",
         "events_url" : "https://api.github.com/users/ismaelsadeeq/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ismaelsadeeq/followers",
         "following_url" : "https://api.github.com/users/ismaelsadeeq/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ismaelsadeeq/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ismaelsadeeq",
         "id" : 48946461,
         "login" : "ismaelsadeeq",
         "node_id" : "MDQ6VXNlcjQ4OTQ2NDYx",
         "organizations_url" : "https://api.github.com/users/ismaelsadeeq/orgs",
         "received_events_url" : "https://api.github.com/users/ismaelsadeeq/received_events",
         "repos_url" : "https://api.github.com/users/ismaelsadeeq/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ismaelsadeeq/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ismaelsadeeq/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ismaelsadeeq"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1477927227"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1477927227"
         }
      },
      "author_association" : "MEMBER",
      "body" : "> compare it with the resulting mining score instead of the new transactionâs individual feerate?\r\n\r\nð¤ Not sure how to implement the change you suggested honestly.\r\nThe current behavour is checking if target fee rate of user wants to bump the transaction to is greater than `maxfeerate` which I believe is the new mining score of the bumped transaction no? \r\nI might be wrong on my assumption though, would you clarify your comment on how to check the resulting mining score of a bumped transaction please? thanks.\r\n",
      "commit_id" : "a5d10367cf832497af2ac72f8c2c42dd25398c63",
      "created_at" : "2024-02-05T09:57:16Z",
      "diff_hunk" : "@@ -80,6 +80,13 @@ static feebumper::Result CheckFeeRate(const CWallet& wallet, const CMutableTrans\n         return feebumper::Result::WALLET_ERROR;\n     }\n \n+    // check that new fee rate does not exceed maxfeerate",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1477927227",
      "id" : 1477927227,
      "in_reply_to_id" : 1473256087,
      "line" : 83,
      "node_id" : "PRRC_kwDOABII585YF2E7",
      "original_commit_id" : "a4b93767df8ce3f2b688b5295066965f4854f40f",
      "original_line" : 83,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/wallet/feebumper.cpp",
      "position" : 4,
      "pull_request_review_id" : 1862307216,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1477927227/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-02-05T10:06:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1477927227",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48946461?v=4",
         "events_url" : "https://api.github.com/users/ismaelsadeeq/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ismaelsadeeq/followers",
         "following_url" : "https://api.github.com/users/ismaelsadeeq/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ismaelsadeeq/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ismaelsadeeq",
         "id" : 48946461,
         "login" : "ismaelsadeeq",
         "node_id" : "MDQ6VXNlcjQ4OTQ2NDYx",
         "organizations_url" : "https://api.github.com/users/ismaelsadeeq/orgs",
         "received_events_url" : "https://api.github.com/users/ismaelsadeeq/received_events",
         "repos_url" : "https://api.github.com/users/ismaelsadeeq/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ismaelsadeeq/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ismaelsadeeq/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ismaelsadeeq"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1479646534"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1479646534"
         }
      },
      "author_association" : "MEMBER",
      "body" : "in \"node: BroadcastTransaction should also check tx fee rate limit\" (https://github.com/bitcoin/bitcoin/pull/29278/commits/30bf6674b117cb320984ac66133a496f19166160):\r\n\r\n```suggestion\r\n            const TransactionError err = BroadcastTransaction(node, tx, err_string, /*max_tx_fee=*/0, max_raw_tx_fee_rate, /*relay=*/true, /*wait_callback=*/true);\r\n```",
      "commit_id" : "a5d10367cf832497af2ac72f8c2c42dd25398c63",
      "created_at" : "2024-02-06T11:48:52Z",
      "diff_hunk" : "@@ -85,13 +85,11 @@ static RPCHelpMan sendrawtransaction()\n                                                      DEFAULT_MAX_RAW_TX_FEE_RATE :\n                                                      CFeeRate(AmountFromValue(request.params[1]));\n \n-            int64_t virtual_size = GetVirtualTransactionSize(*tx);\n-            CAmount max_raw_tx_fee = max_raw_tx_fee_rate.GetFee(virtual_size);\n \n             std::string err_string;\n             AssertLockNotHeld(cs_main);\n             NodeContext& node = EnsureAnyNodeContext(request.context);\n-            const TransactionError err = BroadcastTransaction(node, tx, err_string, max_raw_tx_fee, /*relay=*/true, /*wait_callback=*/true);\n+            const TransactionError err = BroadcastTransaction(node, tx, err_string, /*max_raw_fee*/ 0, max_raw_tx_fee_rate, /*relay=*/true, /*wait_callback=*/true);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1479646534",
      "id" : 1479646534,
      "line" : 92,
      "node_id" : "PRRC_kwDOABII585YMZ1G",
      "original_commit_id" : "30bf6674b117cb320984ac66133a496f19166160",
      "original_line" : 92,
      "original_position" : 11,
      "original_start_line" : null,
      "path" : "src/rpc/mempool.cpp",
      "position" : 11,
      "pull_request_review_id" : 1864949072,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1479646534/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-02-06T12:37:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1479646534",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7444140?v=4",
         "events_url" : "https://api.github.com/users/josibake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/josibake/followers",
         "following_url" : "https://api.github.com/users/josibake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/josibake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/josibake",
         "id" : 7444140,
         "login" : "josibake",
         "node_id" : "MDQ6VXNlcjc0NDQxNDA=",
         "organizations_url" : "https://api.github.com/users/josibake/orgs",
         "received_events_url" : "https://api.github.com/users/josibake/received_events",
         "repos_url" : "https://api.github.com/users/josibake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/josibake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/josibake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/josibake"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1479649957"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1479649957"
         }
      },
      "author_association" : "MEMBER",
      "body" : "in \"node: BroadcastTransaction should also check tx fee rate limit\" (https://github.com/bitcoin/bitcoin/pull/29278/commits/30bf6674b117cb320984ac66133a496f19166160):\r\n\r\nDon't we have a `DEFAULT_TRANSACTION_MAXFEERATE`? Wouldn't it be better to use that here instead of 0?",
      "commit_id" : "a5d10367cf832497af2ac72f8c2c42dd25398c63",
      "created_at" : "2024-02-06T11:52:04Z",
      "diff_hunk" : "@@ -820,7 +821,7 @@ BOOST_FIXTURE_TEST_CASE(CreateWallet, TestChain100Setup)\n     auto block_tx = TestSimpleSpend(*m_coinbase_txns[0], 0, coinbaseKey, GetScriptForRawPubKey(key.GetPubKey()));\n     m_coinbase_txns.push_back(CreateAndProcessBlock({block_tx}, GetScriptForRawPubKey(coinbaseKey.GetPubKey())).vtx[0]);\n     auto mempool_tx = TestSimpleSpend(*m_coinbase_txns[1], 0, coinbaseKey, GetScriptForRawPubKey(key.GetPubKey()));\n-    BOOST_CHECK(m_node.chain->broadcastTransaction(MakeTransactionRef(mempool_tx), DEFAULT_TRANSACTION_MAXFEE, false, error));\n+    BOOST_CHECK(m_node.chain->broadcastTransaction(MakeTransactionRef(mempool_tx), DEFAULT_TRANSACTION_MAXFEE, /*max_tx_feerate*/ CFeeRate(0), false, error));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1479649957",
      "id" : 1479649957,
      "line" : 824,
      "node_id" : "PRRC_kwDOABII585YMaql",
      "original_commit_id" : "30bf6674b117cb320984ac66133a496f19166160",
      "original_line" : 824,
      "original_position" : 13,
      "original_start_line" : null,
      "path" : "src/wallet/test/wallet_tests.cpp",
      "position" : 13,
      "pull_request_review_id" : 1864949072,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1479649957/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-02-06T12:37:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1479649957",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7444140?v=4",
         "events_url" : "https://api.github.com/users/josibake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/josibake/followers",
         "following_url" : "https://api.github.com/users/josibake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/josibake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/josibake",
         "id" : 7444140,
         "login" : "josibake",
         "node_id" : "MDQ6VXNlcjc0NDQxNDA=",
         "organizations_url" : "https://api.github.com/users/josibake/orgs",
         "received_events_url" : "https://api.github.com/users/josibake/received_events",
         "repos_url" : "https://api.github.com/users/josibake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/josibake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/josibake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/josibake"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1479650353"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1479650353"
         }
      },
      "author_association" : "MEMBER",
      "body" : "in \"node: BroadcastTransaction should also check tx fee rate limit\" (https://github.com/bitcoin/bitcoin/pull/29278/commits/30bf6674b117cb320984ac66133a496f19166160):\r\n\r\nSame comment as above regarding defaults",
      "commit_id" : "a5d10367cf832497af2ac72f8c2c42dd25398c63",
      "created_at" : "2024-02-06T11:52:28Z",
      "diff_hunk" : "@@ -862,7 +863,7 @@ BOOST_FIXTURE_TEST_CASE(CreateWallet, TestChain100Setup)\n             block_tx = TestSimpleSpend(*m_coinbase_txns[2], 0, coinbaseKey, GetScriptForRawPubKey(key.GetPubKey()));\n             m_coinbase_txns.push_back(CreateAndProcessBlock({block_tx}, GetScriptForRawPubKey(coinbaseKey.GetPubKey())).vtx[0]);\n             mempool_tx = TestSimpleSpend(*m_coinbase_txns[3], 0, coinbaseKey, GetScriptForRawPubKey(key.GetPubKey()));\n-            BOOST_CHECK(m_node.chain->broadcastTransaction(MakeTransactionRef(mempool_tx), DEFAULT_TRANSACTION_MAXFEE, false, error));\n+            BOOST_CHECK(m_node.chain->broadcastTransaction(MakeTransactionRef(mempool_tx), DEFAULT_TRANSACTION_MAXFEE, /*max_tx_feerate*/ CFeeRate(0), false, error));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1479650353",
      "id" : 1479650353,
      "line" : 866,
      "node_id" : "PRRC_kwDOABII585YMawx",
      "original_commit_id" : "30bf6674b117cb320984ac66133a496f19166160",
      "original_line" : 866,
      "original_position" : 22,
      "original_start_line" : null,
      "path" : "src/wallet/test/wallet_tests.cpp",
      "position" : 22,
      "pull_request_review_id" : 1864949072,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1479650353/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-02-06T12:37:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1479650353",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7444140?v=4",
         "events_url" : "https://api.github.com/users/josibake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/josibake/followers",
         "following_url" : "https://api.github.com/users/josibake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/josibake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/josibake",
         "id" : 7444140,
         "login" : "josibake",
         "node_id" : "MDQ6VXNlcjc0NDQxNDA=",
         "organizations_url" : "https://api.github.com/users/josibake/orgs",
         "received_events_url" : "https://api.github.com/users/josibake/received_events",
         "repos_url" : "https://api.github.com/users/josibake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/josibake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/josibake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/josibake"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1479651121"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1479651121"
         }
      },
      "author_association" : "MEMBER",
      "body" : "in \"node: BroadcastTransaction should also check tx fee rate limit\" (https://github.com/bitcoin/bitcoin/pull/29278/commits/30bf6674b117cb320984ac66133a496f19166160):\r\n\r\nSame comment regarding defaults vs 0",
      "commit_id" : "a5d10367cf832497af2ac72f8c2c42dd25398c63",
      "created_at" : "2024-02-06T11:53:09Z",
      "diff_hunk" : "@@ -1982,7 +1982,7 @@ bool CWallet::SubmitTxMemoryPoolAndRelay(CWalletTx& wtx, std::string& err_string\n     // If broadcast fails for any reason, trying to set wtx.m_state here would be incorrect.\n     // If transaction was previously in the mempool, it should be updated when\n     // TransactionRemovedFromMempool fires.\n-    bool ret = chain().broadcastTransaction(wtx.tx, m_default_max_tx_fee, relay, err_string);\n+    bool ret = chain().broadcastTransaction(wtx.tx, m_default_max_tx_fee, /*max_tx_feerate*/ CFeeRate(0), relay, err_string);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1479651121",
      "id" : 1479651121,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585YMa8x",
      "original_commit_id" : "30bf6674b117cb320984ac66133a496f19166160",
      "original_line" : 1985,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 1864949072,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1479651121/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-02-06T12:37:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1479651121",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7444140?v=4",
         "events_url" : "https://api.github.com/users/josibake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/josibake/followers",
         "following_url" : "https://api.github.com/users/josibake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/josibake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/josibake",
         "id" : 7444140,
         "login" : "josibake",
         "node_id" : "MDQ6VXNlcjc0NDQxNDA=",
         "organizations_url" : "https://api.github.com/users/josibake/orgs",
         "received_events_url" : "https://api.github.com/users/josibake/received_events",
         "repos_url" : "https://api.github.com/users/josibake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/josibake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/josibake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/josibake"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1479660495"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1479660495"
         }
      },
      "author_association" : "MEMBER",
      "body" : "in \"wallet: add maxfeerate wallet startup option\" (https://github.com/bitcoin/bitcoin/pull/29278/commits/4165dc41289fd337e279f3986dfc1a84345c900e):\r\n\r\nInstead of touching this line twice, what do you think about reordering the commits so that this commit is first and the changes to `BroadcastTransaction` come after it? This way, you avoid needing to first set `/*max_tx_feerate=*/CFeeRate(0)` only to remove it in this commit.",
      "commit_id" : "a5d10367cf832497af2ac72f8c2c42dd25398c63",
      "created_at" : "2024-02-06T12:01:50Z",
      "diff_hunk" : "@@ -1982,7 +1982,7 @@ bool CWallet::SubmitTxMemoryPoolAndRelay(CWalletTx& wtx, std::string& err_string\n     // If broadcast fails for any reason, trying to set wtx.m_state here would be incorrect.\n     // If transaction was previously in the mempool, it should be updated when\n     // TransactionRemovedFromMempool fires.\n-    bool ret = chain().broadcastTransaction(wtx.tx, m_default_max_tx_fee, /*max_tx_feerate*/ CFeeRate(0), relay, err_string);\n+    bool ret = chain().broadcastTransaction(wtx.tx, m_default_max_tx_fee, m_max_tx_fee_rate, relay, err_string);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1479660495",
      "id" : 1479660495,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585YMdPP",
      "original_commit_id" : "4165dc41289fd337e279f3986dfc1a84345c900e",
      "original_line" : 1985,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 1864949072,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1479660495/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-02-06T12:37:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1479660495",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7444140?v=4",
         "events_url" : "https://api.github.com/users/josibake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/josibake/followers",
         "following_url" : "https://api.github.com/users/josibake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/josibake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/josibake",
         "id" : 7444140,
         "login" : "josibake",
         "node_id" : "MDQ6VXNlcjc0NDQxNDA=",
         "organizations_url" : "https://api.github.com/users/josibake/orgs",
         "received_events_url" : "https://api.github.com/users/josibake/received_events",
         "repos_url" : "https://api.github.com/users/josibake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/josibake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/josibake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/josibake"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1479669661"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1479669661"
         }
      },
      "author_association" : "MEMBER",
      "body" : "in \"wallet: add maxfeerate wallet startup option\" (https://github.com/bitcoin/bitcoin/pull/29278/commits/4165dc41289fd337e279f3986dfc1a84345c900e):\r\n\r\nWhy are you removing the `-maxtxfee` test? Why not just add a new test case for `-maxfeerate`?",
      "commit_id" : "a5d10367cf832497af2ac72f8c2c42dd25398c63",
      "created_at" : "2024-02-06T12:08:26Z",
      "diff_hunk" : "@@ -545,9 +545,9 @@ def test_settxfee(self, rbf_node, dest_address):\n     assert_greater_than(Decimal(\"0.00001000\"), abs(requested_feerate - actual_feerate))\n     rbf_node.settxfee(Decimal(\"0.00000000\"))  # unset paytxfee\n \n-    # check that settxfee respects -maxtxfee\n-    self.restart_node(1, ['-maxtxfee=0.000025'] + self.extra_args[1])\n-    assert_raises_rpc_error(-8, \"txfee cannot be more than wallet max tx fee\", rbf_node.settxfee, Decimal('0.00003'))",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1479669661",
      "id" : 1479669661,
      "line" : 550,
      "node_id" : "PRRC_kwDOABII585YMfed",
      "original_commit_id" : "4165dc41289fd337e279f3986dfc1a84345c900e",
      "original_line" : 550,
      "original_position" : 6,
      "original_start_line" : 548,
      "path" : "test/functional/wallet_bumpfee.py",
      "position" : 15,
      "pull_request_review_id" : 1864949072,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1479669661/reactions"
      },
      "side" : "LEFT",
      "start_line" : 548,
      "start_side" : "LEFT",
      "subject_type" : "line",
      "updated_at" : "2024-02-06T12:37:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1479669661",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7444140?v=4",
         "events_url" : "https://api.github.com/users/josibake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/josibake/followers",
         "following_url" : "https://api.github.com/users/josibake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/josibake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/josibake",
         "id" : 7444140,
         "login" : "josibake",
         "node_id" : "MDQ6VXNlcjc0NDQxNDA=",
         "organizations_url" : "https://api.github.com/users/josibake/orgs",
         "received_events_url" : "https://api.github.com/users/josibake/received_events",
         "repos_url" : "https://api.github.com/users/josibake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/josibake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/josibake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/josibake"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1479682572"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1479682572"
         }
      },
      "author_association" : "MEMBER",
      "body" : "What @murchandamus is suggesting makes a lot of sense for CPFP'ing, but I imagine will not be trivial to implement. What do you think about deferring this to a follow-up, @murchandamus ? That way, this PR can stay focused on only adding the option and with the current default for `maxtxfeerate` I don't think we will run into issues CPFP'ing with high feerate children.\r\n\r\nDefinitely agree though, comparing to the mining score would allow the user to set a lower limit to protect against high feerates on individual transactions, while also allowing high feerate children (potentially above the max limit) to be used to bump large parents.",
      "commit_id" : "a5d10367cf832497af2ac72f8c2c42dd25398c63",
      "created_at" : "2024-02-06T12:18:54Z",
      "diff_hunk" : "@@ -80,6 +80,13 @@ static feebumper::Result CheckFeeRate(const CWallet& wallet, const CMutableTrans\n         return feebumper::Result::WALLET_ERROR;\n     }\n \n+    // check that new fee rate does not exceed maxfeerate",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1479682572",
      "id" : 1479682572,
      "in_reply_to_id" : 1473256087,
      "line" : 83,
      "node_id" : "PRRC_kwDOABII585YMioM",
      "original_commit_id" : "a4b93767df8ce3f2b688b5295066965f4854f40f",
      "original_line" : 83,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/wallet/feebumper.cpp",
      "position" : 4,
      "pull_request_review_id" : 1864949072,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1479682572/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-02-06T12:37:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1479682572",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7444140?v=4",
         "events_url" : "https://api.github.com/users/josibake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/josibake/followers",
         "following_url" : "https://api.github.com/users/josibake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/josibake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/josibake",
         "id" : 7444140,
         "login" : "josibake",
         "node_id" : "MDQ6VXNlcjc0NDQxNDA=",
         "organizations_url" : "https://api.github.com/users/josibake/orgs",
         "received_events_url" : "https://api.github.com/users/josibake/received_events",
         "repos_url" : "https://api.github.com/users/josibake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/josibake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/josibake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/josibake"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1479684395"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1479684395"
         }
      },
      "author_association" : "MEMBER",
      "body" : "in \"wallet: test: enforce -maxfeerate on wallet transactions\" (https://github.com/bitcoin/bitcoin/pull/29278/commits/eadc3a4500d6b7be263a2981602c20f6e5eb13a4):\r\n\r\nThis should be `MAX_FEE_RATE_EXCEEDED`, right?",
      "commit_id" : "a5d10367cf832497af2ac72f8c2c42dd25398c63",
      "created_at" : "2024-02-06T12:20:26Z",
      "diff_hunk" : "@@ -1485,6 +1485,9 @@ RPCHelpMan sendall()\n             if (fee_from_size > pwallet->m_default_max_tx_fee) {\n                 throw JSONRPCError(RPC_WALLET_ERROR, TransactionErrorString(TransactionError::MAX_FEE_EXCEEDED).original);\n             }\n+            if (CFeeRate(fee_from_size, tx_size.vsize) > pwallet->m_max_tx_fee_rate) {\n+                throw JSONRPCError(RPC_WALLET_ERROR, TransactionErrorString(TransactionError::MAX_FEE_EXCEEDED).original);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1479684395",
      "id" : 1479684395,
      "line" : 1489,
      "node_id" : "PRRC_kwDOABII585YMjEr",
      "original_commit_id" : "eadc3a4500d6b7be263a2981602c20f6e5eb13a4",
      "original_line" : 1489,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/wallet/rpc/spend.cpp",
      "position" : 27,
      "pull_request_review_id" : 1864949072,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1479684395/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-02-06T12:37:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1479684395",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7444140?v=4",
         "events_url" : "https://api.github.com/users/josibake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/josibake/followers",
         "following_url" : "https://api.github.com/users/josibake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/josibake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/josibake",
         "id" : 7444140,
         "login" : "josibake",
         "node_id" : "MDQ6VXNlcjc0NDQxNDA=",
         "organizations_url" : "https://api.github.com/users/josibake/orgs",
         "received_events_url" : "https://api.github.com/users/josibake/received_events",
         "repos_url" : "https://api.github.com/users/josibake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/josibake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/josibake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/josibake"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1479686164"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1479686164"
         }
      },
      "author_association" : "MEMBER",
      "body" : "in \"wallet: test: enforce -maxfeerate on wallet transactions\" (https://github.com/bitcoin/bitcoin/commit/eadc3a4500d6b7be263a2981602c20f6e5eb13a4):\r\n\r\nWhat's the reason for changing the tests instead of adding a new test case for `maxfeerate`? Seems like we should be testing both rather than changing the old `maxtxfee` tests to now check `maxtxfeerate`.",
      "commit_id" : "a5d10367cf832497af2ac72f8c2c42dd25398c63",
      "created_at" : "2024-02-06T12:22:02Z",
      "diff_hunk" : "@@ -130,7 +130,7 @@ def test_invalid_parameters(self, rbf_node, peer_node, dest_address):\n         assert_raises_rpc_error(-8, \"Insufficient total fee 0.00000141\", rbf_node.bumpfee, rbfid, fee_rate=INSUFFICIENT)\n \n         self.log.info(\"Test invalid fee rate settings\")\n-        assert_raises_rpc_error(-4, \"Specified or calculated fee 0.141 is too high (cannot be higher than -maxtxfee 0.10\",\n+        assert_raises_rpc_error(-4, \"New fee rate 1.00 is too high (cannot be higher than -maxfeerate 0.10)\",",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1479686164",
      "id" : 1479686164,
      "line" : 133,
      "node_id" : "PRRC_kwDOABII585YMjgU",
      "original_commit_id" : "eadc3a4500d6b7be263a2981602c20f6e5eb13a4",
      "original_line" : 133,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "test/functional/wallet_bumpfee.py",
      "position" : 5,
      "pull_request_review_id" : 1864949072,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1479686164/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-02-06T12:37:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1479686164",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7444140?v=4",
         "events_url" : "https://api.github.com/users/josibake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/josibake/followers",
         "following_url" : "https://api.github.com/users/josibake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/josibake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/josibake",
         "id" : 7444140,
         "login" : "josibake",
         "node_id" : "MDQ6VXNlcjc0NDQxNDA=",
         "organizations_url" : "https://api.github.com/users/josibake/orgs",
         "received_events_url" : "https://api.github.com/users/josibake/received_events",
         "repos_url" : "https://api.github.com/users/josibake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/josibake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/josibake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/josibake"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1479691126"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1479691126"
         }
      },
      "author_association" : "MEMBER",
      "body" : "in \"wallet: rename m_default_max_tx_fee to m_max_tx_fee\" (https://github.com/bitcoin/bitcoin/pull/29278/commits/a1497af6fc11009839ef86de1bf2da5cf99ad489):\r\n\r\nAgree that this is way less confusing as a name, but probably still good to have a commit message explaining your reasoning. I'd also suggest moving this commit to the beginning before any of the tests are changed and also add the refactor label to the commit message.",
      "commit_id" : "a5d10367cf832497af2ac72f8c2c42dd25398c63",
      "created_at" : "2024-02-06T12:25:44Z",
      "diff_hunk" : "@@ -231,7 +231,7 @@ WalletModel::SendCoinsReturn WalletModel::prepareTransaction(WalletModelTransact\n \n         // Reject absurdly high fee. (This can never happen because the\n         // wallet never creates transactions with fee greater than\n-        // m_default_max_tx_fee. This merely a belt-and-suspenders check).",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1479691126",
      "id" : 1479691126,
      "line" : 234,
      "node_id" : "PRRC_kwDOABII585YMkt2",
      "original_commit_id" : "a1497af6fc11009839ef86de1bf2da5cf99ad489",
      "original_line" : 234,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/qt/walletmodel.cpp",
      "position" : 4,
      "pull_request_review_id" : 1864949072,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1479691126/reactions"
      },
      "side" : "LEFT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-02-06T12:39:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1479691126",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7444140?v=4",
         "events_url" : "https://api.github.com/users/josibake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/josibake/followers",
         "following_url" : "https://api.github.com/users/josibake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/josibake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/josibake",
         "id" : 7444140,
         "login" : "josibake",
         "node_id" : "MDQ6VXNlcjc0NDQxNDA=",
         "organizations_url" : "https://api.github.com/users/josibake/orgs",
         "received_events_url" : "https://api.github.com/users/josibake/received_events",
         "repos_url" : "https://api.github.com/users/josibake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/josibake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/josibake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/josibake"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1479705580"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1479705580"
         }
      },
      "author_association" : "MEMBER",
      "body" : "in \"wallet: ensure 1kvb tx with maxtxfee base fee has feerate atleast minrelaytxfee\" (https://github.com/bitcoin/bitcoin/pull/29278/commits/9791ff064cf28df332c3c343c22eca6aa5874f39):\r\n\r\nJust a suggestion, but I think this reads a little bit better:\r\n```suggestion\r\n            error = strprintf(_(\"Invalid amount for %s=<amount>: '%s' conflicts with the minrelay fee of %s. Consider adjusting %s or %s.\"),\r\n```\r\n\r\nThis seems better to me since the reason for the error could be that the `minrelayfee` is set too high.",
      "commit_id" : "a5d10367cf832497af2ac72f8c2c42dd25398c63",
      "created_at" : "2024-02-06T12:35:07Z",
      "diff_hunk" : "@@ -3056,6 +3056,16 @@ std::shared_ptr<CWallet> CWallet::Create(WalletContext& context, const std::stri\n             return nullptr;\n         } else if (max_fee.value() > HIGH_MAX_TX_FEE) {\n             warnings.push_back(strprintf(_(\"%s is set very high! Fees this large could be paid on a single transaction.\"), \"-maxtxfee\"));\n+\n+        // Wallet prevents creating transactions with fee rates lower than minrelaytxfee.\n+        // Also the wallet prevents creating transaction with base fee above maxtxfee.\n+        // Ensure that a 1kvb transaction, with a base fee set to maxtxfee, maintains a fee rate of at least minrelaytxfee.\n+        // Otherwise transactions with fee rate greater than or equal to the minrelaytxfee will likely exceed maxtxfee.\n+        // In such cases, the wallet won't be able to create transactions. Therefore, shut down early.\n+        } else if (chain && CFeeRate(max_fee.value(), 1000) < chain->relayMinFee()) {\n+            error = strprintf(_(\"Invalid amount for %s=<amount>: '%s' is too low. It won't allow creating transactions exceeding the minrelay fee of %s. Consider adjusting %s or %s.\"),",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1479705580",
      "id" : 1479705580,
      "line" : 3066,
      "node_id" : "PRRC_kwDOABII585YMoPs",
      "original_commit_id" : "9791ff064cf28df332c3c343c22eca6aa5874f39",
      "original_line" : 3066,
      "original_position" : 11,
      "original_start_line" : null,
      "path" : "src/wallet/wallet.cpp",
      "position" : 20,
      "pull_request_review_id" : 1864949072,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1479705580/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-02-06T12:37:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1479705580",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7444140?v=4",
         "events_url" : "https://api.github.com/users/josibake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/josibake/followers",
         "following_url" : "https://api.github.com/users/josibake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/josibake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/josibake",
         "id" : 7444140,
         "login" : "josibake",
         "node_id" : "MDQ6VXNlcjc0NDQxNDA=",
         "organizations_url" : "https://api.github.com/users/josibake/orgs",
         "received_events_url" : "https://api.github.com/users/josibake/received_events",
         "repos_url" : "https://api.github.com/users/josibake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/josibake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/josibake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/josibake"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1479783373"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1479783373"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Yes ðð¾  its better that way.",
      "commit_id" : "a5d10367cf832497af2ac72f8c2c42dd25398c63",
      "created_at" : "2024-02-06T13:24:08Z",
      "diff_hunk" : "@@ -1982,7 +1982,7 @@ bool CWallet::SubmitTxMemoryPoolAndRelay(CWalletTx& wtx, std::string& err_string\n     // If broadcast fails for any reason, trying to set wtx.m_state here would be incorrect.\n     // If transaction was previously in the mempool, it should be updated when\n     // TransactionRemovedFromMempool fires.\n-    bool ret = chain().broadcastTransaction(wtx.tx, m_default_max_tx_fee, /*max_tx_feerate*/ CFeeRate(0), relay, err_string);\n+    bool ret = chain().broadcastTransaction(wtx.tx, m_default_max_tx_fee, m_max_tx_fee_rate, relay, err_string);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1479783373",
      "id" : 1479783373,
      "in_reply_to_id" : 1479660495,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585YM7PN",
      "original_commit_id" : "4165dc41289fd337e279f3986dfc1a84345c900e",
      "original_line" : 1985,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 1865165408,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1479783373/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-02-06T13:24:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1479783373",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48946461?v=4",
         "events_url" : "https://api.github.com/users/ismaelsadeeq/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ismaelsadeeq/followers",
         "following_url" : "https://api.github.com/users/ismaelsadeeq/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ismaelsadeeq/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ismaelsadeeq",
         "id" : 48946461,
         "login" : "ismaelsadeeq",
         "node_id" : "MDQ6VXNlcjQ4OTQ2NDYx",
         "organizations_url" : "https://api.github.com/users/ismaelsadeeq/orgs",
         "received_events_url" : "https://api.github.com/users/ismaelsadeeq/received_events",
         "repos_url" : "https://api.github.com/users/ismaelsadeeq/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ismaelsadeeq/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ismaelsadeeq/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ismaelsadeeq"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1479796113"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1479796113"
         }
      },
      "author_association" : "MEMBER",
      "body" : "in \"wallet: add maxfeerate wallet startup option\" https://github.com/bitcoin/bitcoin/commit/4165dc41289fd337e279f3986dfc1a84345c900e\r\n\r\nAfter adding `maxfeerate` option we now only check if the fee rate user set is less  `minrelaytxfee`, less than wallet min fee, or whether it exceed `maxfeerate`.\r\nSo their is no need to check for `maxtxfee` here, because its not enforced here.\r\n\r\nWill add this info in commit message, thanks",
      "commit_id" : "a5d10367cf832497af2ac72f8c2c42dd25398c63",
      "created_at" : "2024-02-06T13:31:23Z",
      "diff_hunk" : "@@ -545,9 +545,9 @@ def test_settxfee(self, rbf_node, dest_address):\n     assert_greater_than(Decimal(\"0.00001000\"), abs(requested_feerate - actual_feerate))\n     rbf_node.settxfee(Decimal(\"0.00000000\"))  # unset paytxfee\n \n-    # check that settxfee respects -maxtxfee\n-    self.restart_node(1, ['-maxtxfee=0.000025'] + self.extra_args[1])\n-    assert_raises_rpc_error(-8, \"txfee cannot be more than wallet max tx fee\", rbf_node.settxfee, Decimal('0.00003'))",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1479796113",
      "id" : 1479796113,
      "in_reply_to_id" : 1479669661,
      "line" : 550,
      "node_id" : "PRRC_kwDOABII585YM-WR",
      "original_commit_id" : "4165dc41289fd337e279f3986dfc1a84345c900e",
      "original_line" : 550,
      "original_position" : 6,
      "original_start_line" : 548,
      "path" : "test/functional/wallet_bumpfee.py",
      "position" : 15,
      "pull_request_review_id" : 1865184417,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1479796113/reactions"
      },
      "side" : "LEFT",
      "start_line" : 548,
      "start_side" : "LEFT",
      "subject_type" : "line",
      "updated_at" : "2024-02-06T13:31:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1479796113",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48946461?v=4",
         "events_url" : "https://api.github.com/users/ismaelsadeeq/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ismaelsadeeq/followers",
         "following_url" : "https://api.github.com/users/ismaelsadeeq/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ismaelsadeeq/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ismaelsadeeq",
         "id" : 48946461,
         "login" : "ismaelsadeeq",
         "node_id" : "MDQ6VXNlcjQ4OTQ2NDYx",
         "organizations_url" : "https://api.github.com/users/ismaelsadeeq/orgs",
         "received_events_url" : "https://api.github.com/users/ismaelsadeeq/received_events",
         "repos_url" : "https://api.github.com/users/ismaelsadeeq/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ismaelsadeeq/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ismaelsadeeq/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ismaelsadeeq"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1479796527"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1479796527"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Yes ðð¾ ",
      "commit_id" : "a5d10367cf832497af2ac72f8c2c42dd25398c63",
      "created_at" : "2024-02-06T13:31:42Z",
      "diff_hunk" : "@@ -1485,6 +1485,9 @@ RPCHelpMan sendall()\n             if (fee_from_size > pwallet->m_default_max_tx_fee) {\n                 throw JSONRPCError(RPC_WALLET_ERROR, TransactionErrorString(TransactionError::MAX_FEE_EXCEEDED).original);\n             }\n+            if (CFeeRate(fee_from_size, tx_size.vsize) > pwallet->m_max_tx_fee_rate) {\n+                throw JSONRPCError(RPC_WALLET_ERROR, TransactionErrorString(TransactionError::MAX_FEE_EXCEEDED).original);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1479796527",
      "id" : 1479796527,
      "in_reply_to_id" : 1479684395,
      "line" : 1489,
      "node_id" : "PRRC_kwDOABII585YM-cv",
      "original_commit_id" : "eadc3a4500d6b7be263a2981602c20f6e5eb13a4",
      "original_line" : 1489,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/wallet/rpc/spend.cpp",
      "position" : 27,
      "pull_request_review_id" : 1865185048,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1479796527/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-02-06T13:31:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1479796527",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48946461?v=4",
         "events_url" : "https://api.github.com/users/ismaelsadeeq/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ismaelsadeeq/followers",
         "following_url" : "https://api.github.com/users/ismaelsadeeq/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ismaelsadeeq/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ismaelsadeeq",
         "id" : 48946461,
         "login" : "ismaelsadeeq",
         "node_id" : "MDQ6VXNlcjQ4OTQ2NDYx",
         "organizations_url" : "https://api.github.com/users/ismaelsadeeq/orgs",
         "received_events_url" : "https://api.github.com/users/ismaelsadeeq/received_events",
         "repos_url" : "https://api.github.com/users/ismaelsadeeq/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ismaelsadeeq/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ismaelsadeeq/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ismaelsadeeq"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1479814983"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1479814983"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Because after https://github.com/bitcoin/bitcoin/commit/eadc3a4500d6b7be263a2981602c20f6e5eb13a4 we now check for `maxfeerate` threshold first before checking `maxtxfee` threshold.\r\nAnd the specified fee rate is above default `maxferate`, as such it will be hit first.\r\n\r\nBut I agree, I will add another test where  specified bump fee rate is below the `maxfeerate` but we hit `maxtxfee` due to size or maybe just restart with `maxtxfee`  set to a lower value ?",
      "commit_id" : "a5d10367cf832497af2ac72f8c2c42dd25398c63",
      "created_at" : "2024-02-06T13:40:22Z",
      "diff_hunk" : "@@ -130,7 +130,7 @@ def test_invalid_parameters(self, rbf_node, peer_node, dest_address):\n         assert_raises_rpc_error(-8, \"Insufficient total fee 0.00000141\", rbf_node.bumpfee, rbfid, fee_rate=INSUFFICIENT)\n \n         self.log.info(\"Test invalid fee rate settings\")\n-        assert_raises_rpc_error(-4, \"Specified or calculated fee 0.141 is too high (cannot be higher than -maxtxfee 0.10\",\n+        assert_raises_rpc_error(-4, \"New fee rate 1.00 is too high (cannot be higher than -maxfeerate 0.10)\",",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1479814983",
      "id" : 1479814983,
      "in_reply_to_id" : 1479686164,
      "line" : 133,
      "node_id" : "PRRC_kwDOABII585YNC9H",
      "original_commit_id" : "eadc3a4500d6b7be263a2981602c20f6e5eb13a4",
      "original_line" : 133,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "test/functional/wallet_bumpfee.py",
      "position" : 5,
      "pull_request_review_id" : 1865211971,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1479814983/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-02-06T13:40:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1479814983",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48946461?v=4",
         "events_url" : "https://api.github.com/users/ismaelsadeeq/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ismaelsadeeq/followers",
         "following_url" : "https://api.github.com/users/ismaelsadeeq/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ismaelsadeeq/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ismaelsadeeq",
         "id" : 48946461,
         "login" : "ismaelsadeeq",
         "node_id" : "MDQ6VXNlcjQ4OTQ2NDYx",
         "organizations_url" : "https://api.github.com/users/ismaelsadeeq/orgs",
         "received_events_url" : "https://api.github.com/users/ismaelsadeeq/received_events",
         "repos_url" : "https://api.github.com/users/ismaelsadeeq/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ismaelsadeeq/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ismaelsadeeq/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ismaelsadeeq"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1480042381"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1480042381"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Either sounds fine! The main point is we shouldn't be removing test cases for maxtxfee while adding maxtxfeerate.",
      "commit_id" : "a5d10367cf832497af2ac72f8c2c42dd25398c63",
      "created_at" : "2024-02-06T15:32:01Z",
      "diff_hunk" : "@@ -130,7 +130,7 @@ def test_invalid_parameters(self, rbf_node, peer_node, dest_address):\n         assert_raises_rpc_error(-8, \"Insufficient total fee 0.00000141\", rbf_node.bumpfee, rbfid, fee_rate=INSUFFICIENT)\n \n         self.log.info(\"Test invalid fee rate settings\")\n-        assert_raises_rpc_error(-4, \"Specified or calculated fee 0.141 is too high (cannot be higher than -maxtxfee 0.10\",\n+        assert_raises_rpc_error(-4, \"New fee rate 1.00 is too high (cannot be higher than -maxfeerate 0.10)\",",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1480042381",
      "id" : 1480042381,
      "in_reply_to_id" : 1479686164,
      "line" : 133,
      "node_id" : "PRRC_kwDOABII585YN6eN",
      "original_commit_id" : "eadc3a4500d6b7be263a2981602c20f6e5eb13a4",
      "original_line" : 133,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "test/functional/wallet_bumpfee.py",
      "position" : 5,
      "pull_request_review_id" : 1865567413,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1480042381/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-02-06T15:32:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1480042381",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7444140?v=4",
         "events_url" : "https://api.github.com/users/josibake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/josibake/followers",
         "following_url" : "https://api.github.com/users/josibake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/josibake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/josibake",
         "id" : 7444140,
         "login" : "josibake",
         "node_id" : "MDQ6VXNlcjc0NDQxNDA=",
         "organizations_url" : "https://api.github.com/users/josibake/orgs",
         "received_events_url" : "https://api.github.com/users/josibake/received_events",
         "repos_url" : "https://api.github.com/users/josibake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/josibake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/josibake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/josibake"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1482976877"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1482976877"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Fixed",
      "commit_id" : "1fae882f98205afb05e96432ce57212226bc0909",
      "created_at" : "2024-02-08T13:27:19Z",
      "diff_hunk" : "@@ -85,13 +85,11 @@ static RPCHelpMan sendrawtransaction()\n                                                      DEFAULT_MAX_RAW_TX_FEE_RATE :\n                                                      CFeeRate(AmountFromValue(request.params[1]));\n \n-            int64_t virtual_size = GetVirtualTransactionSize(*tx);\n-            CAmount max_raw_tx_fee = max_raw_tx_fee_rate.GetFee(virtual_size);\n \n             std::string err_string;\n             AssertLockNotHeld(cs_main);\n             NodeContext& node = EnsureAnyNodeContext(request.context);\n-            const TransactionError err = BroadcastTransaction(node, tx, err_string, max_raw_tx_fee, /*relay=*/true, /*wait_callback=*/true);\n+            const TransactionError err = BroadcastTransaction(node, tx, err_string, /*max_raw_fee*/ 0, max_raw_tx_fee_rate, /*relay=*/true, /*wait_callback=*/true);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1482976877",
      "id" : 1482976877,
      "in_reply_to_id" : 1479646534,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585YZG5t",
      "original_commit_id" : "30bf6674b117cb320984ac66133a496f19166160",
      "original_line" : 92,
      "original_position" : 11,
      "original_start_line" : null,
      "path" : "src/rpc/mempool.cpp",
      "position" : null,
      "pull_request_review_id" : 1870228018,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1482976877/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-02-08T13:27:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1482976877",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48946461?v=4",
         "events_url" : "https://api.github.com/users/ismaelsadeeq/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ismaelsadeeq/followers",
         "following_url" : "https://api.github.com/users/ismaelsadeeq/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ismaelsadeeq/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ismaelsadeeq",
         "id" : 48946461,
         "login" : "ismaelsadeeq",
         "node_id" : "MDQ6VXNlcjQ4OTQ2NDYx",
         "organizations_url" : "https://api.github.com/users/ismaelsadeeq/orgs",
         "received_events_url" : "https://api.github.com/users/ismaelsadeeq/received_events",
         "repos_url" : "https://api.github.com/users/ismaelsadeeq/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ismaelsadeeq/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ismaelsadeeq/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ismaelsadeeq"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1482977350"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1482977350"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Updated ðð¾ ",
      "commit_id" : "1fae882f98205afb05e96432ce57212226bc0909",
      "created_at" : "2024-02-08T13:27:41Z",
      "diff_hunk" : "@@ -820,7 +821,7 @@ BOOST_FIXTURE_TEST_CASE(CreateWallet, TestChain100Setup)\n     auto block_tx = TestSimpleSpend(*m_coinbase_txns[0], 0, coinbaseKey, GetScriptForRawPubKey(key.GetPubKey()));\n     m_coinbase_txns.push_back(CreateAndProcessBlock({block_tx}, GetScriptForRawPubKey(coinbaseKey.GetPubKey())).vtx[0]);\n     auto mempool_tx = TestSimpleSpend(*m_coinbase_txns[1], 0, coinbaseKey, GetScriptForRawPubKey(key.GetPubKey()));\n-    BOOST_CHECK(m_node.chain->broadcastTransaction(MakeTransactionRef(mempool_tx), DEFAULT_TRANSACTION_MAXFEE, false, error));\n+    BOOST_CHECK(m_node.chain->broadcastTransaction(MakeTransactionRef(mempool_tx), DEFAULT_TRANSACTION_MAXFEE, /*max_tx_feerate*/ CFeeRate(0), false, error));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1482977350",
      "id" : 1482977350,
      "in_reply_to_id" : 1479649957,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585YZHBG",
      "original_commit_id" : "30bf6674b117cb320984ac66133a496f19166160",
      "original_line" : 824,
      "original_position" : 13,
      "original_start_line" : null,
      "path" : "src/wallet/test/wallet_tests.cpp",
      "position" : null,
      "pull_request_review_id" : 1870228757,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1482977350/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-02-08T13:27:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1482977350",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48946461?v=4",
         "events_url" : "https://api.github.com/users/ismaelsadeeq/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ismaelsadeeq/followers",
         "following_url" : "https://api.github.com/users/ismaelsadeeq/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ismaelsadeeq/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ismaelsadeeq",
         "id" : 48946461,
         "login" : "ismaelsadeeq",
         "node_id" : "MDQ6VXNlcjQ4OTQ2NDYx",
         "organizations_url" : "https://api.github.com/users/ismaelsadeeq/orgs",
         "received_events_url" : "https://api.github.com/users/ismaelsadeeq/received_events",
         "repos_url" : "https://api.github.com/users/ismaelsadeeq/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ismaelsadeeq/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ismaelsadeeq/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ismaelsadeeq"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1482979637"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1482979637"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Fixed",
      "commit_id" : "1fae882f98205afb05e96432ce57212226bc0909",
      "created_at" : "2024-02-08T13:29:27Z",
      "diff_hunk" : "@@ -1485,6 +1485,9 @@ RPCHelpMan sendall()\n             if (fee_from_size > pwallet->m_default_max_tx_fee) {\n                 throw JSONRPCError(RPC_WALLET_ERROR, TransactionErrorString(TransactionError::MAX_FEE_EXCEEDED).original);\n             }\n+            if (CFeeRate(fee_from_size, tx_size.vsize) > pwallet->m_max_tx_fee_rate) {\n+                throw JSONRPCError(RPC_WALLET_ERROR, TransactionErrorString(TransactionError::MAX_FEE_EXCEEDED).original);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1482979637",
      "id" : 1482979637,
      "in_reply_to_id" : 1479684395,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585YZHk1",
      "original_commit_id" : "eadc3a4500d6b7be263a2981602c20f6e5eb13a4",
      "original_line" : 1489,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/wallet/rpc/spend.cpp",
      "position" : null,
      "pull_request_review_id" : 1870232411,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1482979637/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-02-08T13:29:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1482979637",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48946461?v=4",
         "events_url" : "https://api.github.com/users/ismaelsadeeq/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ismaelsadeeq/followers",
         "following_url" : "https://api.github.com/users/ismaelsadeeq/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ismaelsadeeq/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ismaelsadeeq",
         "id" : 48946461,
         "login" : "ismaelsadeeq",
         "node_id" : "MDQ6VXNlcjQ4OTQ2NDYx",
         "organizations_url" : "https://api.github.com/users/ismaelsadeeq/orgs",
         "received_events_url" : "https://api.github.com/users/ismaelsadeeq/received_events",
         "repos_url" : "https://api.github.com/users/ismaelsadeeq/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ismaelsadeeq/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ismaelsadeeq/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ismaelsadeeq"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1482980736"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1482980736"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Thanks updated the tests.",
      "commit_id" : "1fae882f98205afb05e96432ce57212226bc0909",
      "created_at" : "2024-02-08T13:30:20Z",
      "diff_hunk" : "@@ -130,7 +130,7 @@ def test_invalid_parameters(self, rbf_node, peer_node, dest_address):\n         assert_raises_rpc_error(-8, \"Insufficient total fee 0.00000141\", rbf_node.bumpfee, rbfid, fee_rate=INSUFFICIENT)\n \n         self.log.info(\"Test invalid fee rate settings\")\n-        assert_raises_rpc_error(-4, \"Specified or calculated fee 0.141 is too high (cannot be higher than -maxtxfee 0.10\",\n+        assert_raises_rpc_error(-4, \"New fee rate 1.00 is too high (cannot be higher than -maxfeerate 0.10)\",",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1482980736",
      "id" : 1482980736,
      "in_reply_to_id" : 1479686164,
      "line" : 135,
      "node_id" : "PRRC_kwDOABII585YZH2A",
      "original_commit_id" : "eadc3a4500d6b7be263a2981602c20f6e5eb13a4",
      "original_line" : 135,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "test/functional/wallet_bumpfee.py",
      "position" : 7,
      "pull_request_review_id" : 1870234205,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1482980736/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-02-08T13:30:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1482980736",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48946461?v=4",
         "events_url" : "https://api.github.com/users/ismaelsadeeq/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ismaelsadeeq/followers",
         "following_url" : "https://api.github.com/users/ismaelsadeeq/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ismaelsadeeq/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ismaelsadeeq",
         "id" : 48946461,
         "login" : "ismaelsadeeq",
         "node_id" : "MDQ6VXNlcjQ4OTQ2NDYx",
         "organizations_url" : "https://api.github.com/users/ismaelsadeeq/orgs",
         "received_events_url" : "https://api.github.com/users/ismaelsadeeq/received_events",
         "repos_url" : "https://api.github.com/users/ismaelsadeeq/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ismaelsadeeq/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ismaelsadeeq/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ismaelsadeeq"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1482981545"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1482981545"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Done",
      "commit_id" : "1fae882f98205afb05e96432ce57212226bc0909",
      "created_at" : "2024-02-08T13:30:54Z",
      "diff_hunk" : "@@ -231,7 +231,7 @@ WalletModel::SendCoinsReturn WalletModel::prepareTransaction(WalletModelTransact\n \n         // Reject absurdly high fee. (This can never happen because the\n         // wallet never creates transactions with fee greater than\n-        // m_default_max_tx_fee. This merely a belt-and-suspenders check).",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1482981545",
      "id" : 1482981545,
      "in_reply_to_id" : 1479691126,
      "line" : 234,
      "node_id" : "PRRC_kwDOABII585YZICp",
      "original_commit_id" : "a1497af6fc11009839ef86de1bf2da5cf99ad489",
      "original_line" : 234,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/qt/walletmodel.cpp",
      "position" : 4,
      "pull_request_review_id" : 1870235375,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1482981545/reactions"
      },
      "side" : "LEFT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-02-08T13:30:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1482981545",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48946461?v=4",
         "events_url" : "https://api.github.com/users/ismaelsadeeq/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ismaelsadeeq/followers",
         "following_url" : "https://api.github.com/users/ismaelsadeeq/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ismaelsadeeq/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ismaelsadeeq",
         "id" : 48946461,
         "login" : "ismaelsadeeq",
         "node_id" : "MDQ6VXNlcjQ4OTQ2NDYx",
         "organizations_url" : "https://api.github.com/users/ismaelsadeeq/orgs",
         "received_events_url" : "https://api.github.com/users/ismaelsadeeq/received_events",
         "repos_url" : "https://api.github.com/users/ismaelsadeeq/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ismaelsadeeq/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ismaelsadeeq/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ismaelsadeeq"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1482981736"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1482981736"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Fixed",
      "commit_id" : "1fae882f98205afb05e96432ce57212226bc0909",
      "created_at" : "2024-02-08T13:31:05Z",
      "diff_hunk" : "@@ -3056,6 +3056,16 @@ std::shared_ptr<CWallet> CWallet::Create(WalletContext& context, const std::stri\n             return nullptr;\n         } else if (max_fee.value() > HIGH_MAX_TX_FEE) {\n             warnings.push_back(strprintf(_(\"%s is set very high! Fees this large could be paid on a single transaction.\"), \"-maxtxfee\"));\n+\n+        // Wallet prevents creating transactions with fee rates lower than minrelaytxfee.\n+        // Also the wallet prevents creating transaction with base fee above maxtxfee.\n+        // Ensure that a 1kvb transaction, with a base fee set to maxtxfee, maintains a fee rate of at least minrelaytxfee.\n+        // Otherwise transactions with fee rate greater than or equal to the minrelaytxfee will likely exceed maxtxfee.\n+        // In such cases, the wallet won't be able to create transactions. Therefore, shut down early.\n+        } else if (chain && CFeeRate(max_fee.value(), 1000) < chain->relayMinFee()) {\n+            error = strprintf(_(\"Invalid amount for %s=<amount>: '%s' is too low. It won't allow creating transactions exceeding the minrelay fee of %s. Consider adjusting %s or %s.\"),",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1482981736",
      "id" : 1482981736,
      "in_reply_to_id" : 1479705580,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585YZIFo",
      "original_commit_id" : "9791ff064cf28df332c3c343c22eca6aa5874f39",
      "original_line" : 3066,
      "original_position" : 11,
      "original_start_line" : null,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 1870235664,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1482981736/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-02-08T13:31:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1482981736",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48946461?v=4",
         "events_url" : "https://api.github.com/users/ismaelsadeeq/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ismaelsadeeq/followers",
         "following_url" : "https://api.github.com/users/ismaelsadeeq/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ismaelsadeeq/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ismaelsadeeq",
         "id" : 48946461,
         "login" : "ismaelsadeeq",
         "node_id" : "MDQ6VXNlcjQ4OTQ2NDYx",
         "organizations_url" : "https://api.github.com/users/ismaelsadeeq/orgs",
         "received_events_url" : "https://api.github.com/users/ismaelsadeeq/received_events",
         "repos_url" : "https://api.github.com/users/ismaelsadeeq/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ismaelsadeeq/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ismaelsadeeq/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ismaelsadeeq"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Thanks for your review @josibake \r\nI fixed all review comments\r\nForced pushed from a5d10367cf832497af2ac72f8c2c42dd25398c63 to 1fae882f98205afb05e96432ce57212226bc0909 [Compare changes](https://github.com/bitcoin/bitcoin/compare/a5d10367cf832497af2ac72f8c2c42dd25398c63..1fae882f98205afb05e96432ce57212226bc0909)\r\n\r\n\r\n",
      "created_at" : "2024-02-08T13:34:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#issuecomment-1934137354",
      "id" : 1934137354,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29278",
      "node_id" : "IC_kwDOABII585zSJgK",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1934137354/reactions"
      },
      "updated_at" : "2024-02-08T13:34:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1934137354",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48946461?v=4",
         "events_url" : "https://api.github.com/users/ismaelsadeeq/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ismaelsadeeq/followers",
         "following_url" : "https://api.github.com/users/ismaelsadeeq/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ismaelsadeeq/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ismaelsadeeq",
         "id" : 48946461,
         "login" : "ismaelsadeeq",
         "node_id" : "MDQ6VXNlcjQ4OTQ2NDYx",
         "organizations_url" : "https://api.github.com/users/ismaelsadeeq/orgs",
         "received_events_url" : "https://api.github.com/users/ismaelsadeeq/received_events",
         "repos_url" : "https://api.github.com/users/ismaelsadeeq/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ismaelsadeeq/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ismaelsadeeq/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ismaelsadeeq"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1486143881"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1486143881"
         }
      },
      "author_association" : "MEMBER",
      "body" : "in \"[node]: update BroadcastTransaction to check fee rate limit\" (https://github.com/bitcoin/bitcoin/pull/29278/commits/eedbeccbdb274841fc2cf2c53931e58fbea50dfc):\r\n\r\nThis should be `MAX_FEERATE_EXCEEDED`\r\n",
      "commit_id" : "bf6fc126d1e0b37e490d38124945fa4e8f7475f4",
      "created_at" : "2024-02-12T12:54:25Z",
      "diff_hunk" : "@@ -68,13 +69,15 @@ TransactionError BroadcastTransaction(NodeContext& node, const CTransactionRef t\n             wtxid = mempool_tx->GetWitnessHash();\n         } else {\n             // Transaction is not already in the mempool.\n-            if (max_tx_fee > 0) {\n+            if (max_tx_fee > 0 || max_tx_feerate > CFeeRate(0)) {\n                 // First, call ATMP with test_accept and check the fee. If ATMP\n                 // fails here, return error immediately.\n                 const MempoolAcceptResult result = node.chainman->ProcessTransaction(tx, /*test_accept=*/ true);\n                 if (result.m_result_type != MempoolAcceptResult::ResultType::VALID) {\n                     return HandleATMPError(result.m_state, err_string);\n-                } else if (result.m_base_fees.value() > max_tx_fee) {\n+                } else if (max_tx_fee > 0 && result.m_base_fees.value() > max_tx_fee) {\n+                    return TransactionError::MAX_FEE_EXCEEDED;\n+                } else if (max_tx_feerate > CFeeRate(0) && CFeeRate(result.m_base_fees.value(), result.m_vsize.value()) > max_tx_feerate) {\n                     return TransactionError::MAX_FEE_EXCEEDED;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1486143881",
      "id" : 1486143881,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585YlMGJ",
      "original_commit_id" : "eedbeccbdb274841fc2cf2c53931e58fbea50dfc",
      "original_line" : 81,
      "original_position" : 32,
      "original_start_line" : null,
      "path" : "src/node/transaction.cpp",
      "position" : null,
      "pull_request_review_id" : 1875177902,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1486143881/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-02-12T13:15:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1486143881",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7444140?v=4",
         "events_url" : "https://api.github.com/users/josibake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/josibake/followers",
         "following_url" : "https://api.github.com/users/josibake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/josibake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/josibake",
         "id" : 7444140,
         "login" : "josibake",
         "node_id" : "MDQ6VXNlcjc0NDQxNDA=",
         "organizations_url" : "https://api.github.com/users/josibake/orgs",
         "received_events_url" : "https://api.github.com/users/josibake/received_events",
         "repos_url" : "https://api.github.com/users/josibake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/josibake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/josibake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/josibake"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1486149819"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1486149819"
         }
      },
      "author_association" : "MEMBER",
      "body" : "in \"[node]: update BroadcastTransaction to check fee rate limit\" (https://github.com/bitcoin/bitcoin/pull/29278/commits/eedbeccbdb274841fc2cf2c53931e58fbea50dfc):\r\n\r\n\r\nIf a `max_tx_fee` is set, and a `max_tx_feerate` is not set, `BroadcastTransaction` might hit the max_tx_fee limit, so its not quite correct to say that \"if CFeeRate(0), accept any fee.\" What about something like the following:\r\n\r\n```\r\n* @param[in]  max_tx_fee reject txs with fees higher than this (if 0, the fee is not checked)\r\n* @param[in]  max_tx_feerate reject txs with fee rate higher than this (if CFeeRate(0), the feerate is not checked)\r\n```\r\n",
      "commit_id" : "bf6fc126d1e0b37e490d38124945fa4e8f7475f4",
      "created_at" : "2024-02-12T13:00:04Z",
      "diff_hunk" : "@@ -39,11 +39,12 @@ static const CFeeRate DEFAULT_MAX_RAW_TX_FEE_RATE{COIN / 10};\n  * @param[in]  tx the transaction to broadcast\n  * @param[out] err_string reference to std::string to fill with error string if available\n  * @param[in]  max_tx_fee reject txs with fees higher than this (if 0, accept any fee)\n+ * @param[in]  max_tx_feerate reject txs with fee rate higher than this (if CFeeRate(0), accept any fee)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1486149819",
      "id" : 1486149819,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585YlNi7",
      "original_commit_id" : "eedbeccbdb274841fc2cf2c53931e58fbea50dfc",
      "original_line" : 42,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/node/transaction.h",
      "position" : null,
      "pull_request_review_id" : 1875177902,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1486149819/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-02-12T13:15:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1486149819",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7444140?v=4",
         "events_url" : "https://api.github.com/users/josibake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/josibake/followers",
         "following_url" : "https://api.github.com/users/josibake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/josibake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/josibake",
         "id" : 7444140,
         "login" : "josibake",
         "node_id" : "MDQ6VXNlcjc0NDQxNDA=",
         "organizations_url" : "https://api.github.com/users/josibake/orgs",
         "received_events_url" : "https://api.github.com/users/josibake/received_events",
         "repos_url" : "https://api.github.com/users/josibake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/josibake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/josibake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/josibake"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1486152509"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1486152509"
         }
      },
      "author_association" : "MEMBER",
      "body" : "in \"[node]: update BroadcastTransaction to check fee rate limit\" (https://github.com/bitcoin/bitcoin/commit/eedbeccbdb274841fc2cf2c53931e58fbea50dfc):\r\n\r\nnit:\r\n```suggestion\r\n            const TransactionError err = BroadcastTransaction(node, tx, err_string, /*max_tx_fee=*/0, max_raw_tx_fee_rate, /*relay=*/true, /*wait_callback=*/true);\r\n```",
      "commit_id" : "bf6fc126d1e0b37e490d38124945fa4e8f7475f4",
      "created_at" : "2024-02-12T13:02:37Z",
      "diff_hunk" : "@@ -85,13 +85,11 @@ static RPCHelpMan sendrawtransaction()\n                                                      DEFAULT_MAX_RAW_TX_FEE_RATE :\n                                                      CFeeRate(AmountFromValue(request.params[1]));\n \n-            int64_t virtual_size = GetVirtualTransactionSize(*tx);\n-            CAmount max_raw_tx_fee = max_raw_tx_fee_rate.GetFee(virtual_size);\n \n             std::string err_string;\n             AssertLockNotHeld(cs_main);\n             NodeContext& node = EnsureAnyNodeContext(request.context);\n-            const TransactionError err = BroadcastTransaction(node, tx, err_string, max_raw_tx_fee, /*relay=*/true, /*wait_callback=*/true);\n+            const TransactionError err = BroadcastTransaction(node, tx, err_string, /*max_tx_fee*/0, max_raw_tx_fee_rate, /*relay=*/true, /*wait_callback=*/true);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1486152509",
      "id" : 1486152509,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585YlOM9",
      "original_commit_id" : "eedbeccbdb274841fc2cf2c53931e58fbea50dfc",
      "original_line" : 92,
      "original_position" : 11,
      "original_start_line" : null,
      "path" : "src/rpc/mempool.cpp",
      "position" : null,
      "pull_request_review_id" : 1875177902,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1486152509/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-02-12T13:15:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1486152509",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7444140?v=4",
         "events_url" : "https://api.github.com/users/josibake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/josibake/followers",
         "following_url" : "https://api.github.com/users/josibake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/josibake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/josibake",
         "id" : 7444140,
         "login" : "josibake",
         "node_id" : "MDQ6VXNlcjc0NDQxNDA=",
         "organizations_url" : "https://api.github.com/users/josibake/orgs",
         "received_events_url" : "https://api.github.com/users/josibake/received_events",
         "repos_url" : "https://api.github.com/users/josibake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/josibake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/josibake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/josibake"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Thank you @josibake will address comments shortly!",
      "created_at" : "2024-02-12T14:44:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#issuecomment-1938811986",
      "id" : 1938811986,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29278",
      "node_id" : "IC_kwDOABII585zj-xS",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1938811986/reactions"
      },
      "updated_at" : "2024-02-12T14:44:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1938811986",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48946461?v=4",
         "events_url" : "https://api.github.com/users/ismaelsadeeq/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ismaelsadeeq/followers",
         "following_url" : "https://api.github.com/users/ismaelsadeeq/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ismaelsadeeq/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ismaelsadeeq",
         "id" : 48946461,
         "login" : "ismaelsadeeq",
         "node_id" : "MDQ6VXNlcjQ4OTQ2NDYx",
         "organizations_url" : "https://api.github.com/users/ismaelsadeeq/orgs",
         "received_events_url" : "https://api.github.com/users/ismaelsadeeq/received_events",
         "repos_url" : "https://api.github.com/users/ismaelsadeeq/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ismaelsadeeq/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ismaelsadeeq/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ismaelsadeeq"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1487461162"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1487461162"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Fixed",
      "commit_id" : "bf6fc126d1e0b37e490d38124945fa4e8f7475f4",
      "created_at" : "2024-02-13T09:19:42Z",
      "diff_hunk" : "@@ -85,13 +85,11 @@ static RPCHelpMan sendrawtransaction()\n                                                      DEFAULT_MAX_RAW_TX_FEE_RATE :\n                                                      CFeeRate(AmountFromValue(request.params[1]));\n \n-            int64_t virtual_size = GetVirtualTransactionSize(*tx);\n-            CAmount max_raw_tx_fee = max_raw_tx_fee_rate.GetFee(virtual_size);\n \n             std::string err_string;\n             AssertLockNotHeld(cs_main);\n             NodeContext& node = EnsureAnyNodeContext(request.context);\n-            const TransactionError err = BroadcastTransaction(node, tx, err_string, max_raw_tx_fee, /*relay=*/true, /*wait_callback=*/true);\n+            const TransactionError err = BroadcastTransaction(node, tx, err_string, /*max_tx_fee*/0, max_raw_tx_fee_rate, /*relay=*/true, /*wait_callback=*/true);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1487461162",
      "id" : 1487461162,
      "in_reply_to_id" : 1486152509,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585YqNsq",
      "original_commit_id" : "eedbeccbdb274841fc2cf2c53931e58fbea50dfc",
      "original_line" : 92,
      "original_position" : 11,
      "original_start_line" : null,
      "path" : "src/rpc/mempool.cpp",
      "position" : null,
      "pull_request_review_id" : 1877276351,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1487461162/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-02-13T09:19:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1487461162",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48946461?v=4",
         "events_url" : "https://api.github.com/users/ismaelsadeeq/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ismaelsadeeq/followers",
         "following_url" : "https://api.github.com/users/ismaelsadeeq/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ismaelsadeeq/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ismaelsadeeq",
         "id" : 48946461,
         "login" : "ismaelsadeeq",
         "node_id" : "MDQ6VXNlcjQ4OTQ2NDYx",
         "organizations_url" : "https://api.github.com/users/ismaelsadeeq/orgs",
         "received_events_url" : "https://api.github.com/users/ismaelsadeeq/received_events",
         "repos_url" : "https://api.github.com/users/ismaelsadeeq/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ismaelsadeeq/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ismaelsadeeq/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ismaelsadeeq"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1487461569"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1487461569"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Thanks updated",
      "commit_id" : "bf6fc126d1e0b37e490d38124945fa4e8f7475f4",
      "created_at" : "2024-02-13T09:19:57Z",
      "diff_hunk" : "@@ -39,11 +39,12 @@ static const CFeeRate DEFAULT_MAX_RAW_TX_FEE_RATE{COIN / 10};\n  * @param[in]  tx the transaction to broadcast\n  * @param[out] err_string reference to std::string to fill with error string if available\n  * @param[in]  max_tx_fee reject txs with fees higher than this (if 0, accept any fee)\n+ * @param[in]  max_tx_feerate reject txs with fee rate higher than this (if CFeeRate(0), accept any fee)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1487461569",
      "id" : 1487461569,
      "in_reply_to_id" : 1486149819,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585YqNzB",
      "original_commit_id" : "eedbeccbdb274841fc2cf2c53931e58fbea50dfc",
      "original_line" : 42,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/node/transaction.h",
      "position" : null,
      "pull_request_review_id" : 1877277265,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1487461569/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-02-13T09:19:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1487461569",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48946461?v=4",
         "events_url" : "https://api.github.com/users/ismaelsadeeq/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ismaelsadeeq/followers",
         "following_url" : "https://api.github.com/users/ismaelsadeeq/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ismaelsadeeq/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ismaelsadeeq",
         "id" : 48946461,
         "login" : "ismaelsadeeq",
         "node_id" : "MDQ6VXNlcjQ4OTQ2NDYx",
         "organizations_url" : "https://api.github.com/users/ismaelsadeeq/orgs",
         "received_events_url" : "https://api.github.com/users/ismaelsadeeq/received_events",
         "repos_url" : "https://api.github.com/users/ismaelsadeeq/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ismaelsadeeq/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ismaelsadeeq/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ismaelsadeeq"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1487481307"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1487481307"
         }
      },
      "author_association" : "MEMBER",
      "body" : "The `MAX_FEERATE_EXCEEDED` error type was not introduced yet at this point.\r\n This is correct because at https://github.com/bitcoin/bitcoin/commit/eedbeccbdb274841fc2cf2c53931e58fbea50dfc, the error message indicates that the failure might be from `-maxtxfee` or `maxfeerate`.\r\n\r\nAnd this is fixed in next commit 0ad2f2c32460fef9b8cd59e3920fcfd6602b02a4 after we introduced the `MAX_FEERATE_EXCEEDED` error type.\r\n\r\nThe options are;\r\n- Introduce the error type first, then update` BroadcastTransaction` to support fee rate checks. This approach however, would result in misleading error messages in `sendrawtransaction`.\r\n- Combine both changes in a single commit. \r\n- The current approach, update `BroadcastTransaction` to support checking fee rate then introduce the new error type which in my opinion, is the better approach.\r\n\r\n\r\n",
      "commit_id" : "bf6fc126d1e0b37e490d38124945fa4e8f7475f4",
      "created_at" : "2024-02-13T09:34:39Z",
      "diff_hunk" : "@@ -68,13 +69,15 @@ TransactionError BroadcastTransaction(NodeContext& node, const CTransactionRef t\n             wtxid = mempool_tx->GetWitnessHash();\n         } else {\n             // Transaction is not already in the mempool.\n-            if (max_tx_fee > 0) {\n+            if (max_tx_fee > 0 || max_tx_feerate > CFeeRate(0)) {\n                 // First, call ATMP with test_accept and check the fee. If ATMP\n                 // fails here, return error immediately.\n                 const MempoolAcceptResult result = node.chainman->ProcessTransaction(tx, /*test_accept=*/ true);\n                 if (result.m_result_type != MempoolAcceptResult::ResultType::VALID) {\n                     return HandleATMPError(result.m_state, err_string);\n-                } else if (result.m_base_fees.value() > max_tx_fee) {\n+                } else if (max_tx_fee > 0 && result.m_base_fees.value() > max_tx_fee) {\n+                    return TransactionError::MAX_FEE_EXCEEDED;\n+                } else if (max_tx_feerate > CFeeRate(0) && CFeeRate(result.m_base_fees.value(), result.m_vsize.value()) > max_tx_feerate) {\n                     return TransactionError::MAX_FEE_EXCEEDED;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29278#discussion_r1487481307",
      "id" : 1487481307,
      "in_reply_to_id" : 1486143881,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585YqSnb",
      "original_commit_id" : "eedbeccbdb274841fc2cf2c53931e58fbea50dfc",
      "original_line" : 81,
      "original_position" : 32,
      "original_start_line" : null,
      "path" : "src/node/transaction.cpp",
      "position" : null,
      "pull_request_review_id" : 1877330244,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29278",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1487481307/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-02-13T09:34:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1487481307",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48946461?v=4",
         "events_url" : "https://api.github.com/users/ismaelsadeeq/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ismaelsadeeq/followers",
         "following_url" : "https://api.github.com/users/ismaelsadeeq/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ismaelsadeeq/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ismaelsadeeq",
         "id" : 48946461,
         "login" : "ismaelsadeeq",
         "node_id" : "MDQ6VXNlcjQ4OTQ2NDYx",
         "organizations_url" : "https://api.github.com/users/ismaelsadeeq/orgs",
         "received_events_url" : "https://api.github.com/users/ismaelsadeeq/received_events",
         "repos_url" : "https://api.github.com/users/ismaelsadeeq/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ismaelsadeeq/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ismaelsadeeq/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ismaelsadeeq"
      }
   }
]
