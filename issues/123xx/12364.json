{
   "assignee" : null,
   "assignees" : [],
   "author_association" : "NONE",
   "body" : "\r\nWhat makes me wonder, this happens just for some transactions\r\n\r\nTake a look at this transaction: \r\n[20179d0d2fba68b2ca82ab8cc5faa39ced73324af6b90b6505cca2c3d65102a6][1]\r\n\r\nAs you can see inputs/outputs fee is: **0.001** BTC\r\n\r\nIn bitcoin-core gettransaction \r\n\r\n    bitcoin-cli gettransaction \"20179d0d2fba68b2ca82ab8cc5faa39ced73324af6b90b6505cca2c3d65102a6\" true\r\n\r\nReturns this result:\r\n\r\n\r\n    Array\r\n    (\r\n        [amount] => -105.21509845\r\n        [fee] => 105.11519845\r\n        [confirmations] => 78\r\n        [blockhash] => 0000000000004caf7faef44b3cd20424b04e8044a8d323064e1fca6864b96cb9\r\n        [blockindex] => 18\r\n        [blocktime] => 1517902289\r\n        [txid] => 20179d0d2fba68b2ca82ab8cc5faa39ced73324af6b90b6505cca2c3d65102a6\r\n        [walletconflicts] => Array\r\n            (\r\n            )\r\n    \r\n        [time] => 1517902198\r\n        [timereceived] => 1517902198\r\n        [bip125-replaceable] => no\r\n        [details] => Array\r\n            (\r\n                [0] => Array\r\n                    (\r\n                        [involvesWatchonly] => 1\r\n                        [account] => \r\n                        [address] => 2N2QxAHtCMMDpxTxuNNNHvDh4burprspWPN\r\n                        [category] => send\r\n                        [amount] => -0.1625\r\n                        [vout] => 0\r\n                        [fee] => 105.11519845\r\n                        [abandoned] => \r\n                    )\r\n    \r\n                [1] => Array\r\n                    (\r\n                        [involvesWatchonly] => 1\r\n                        [account] => \r\n                        [address] => 2MtuDKij5ueE4C9D5wjA3Ft9bkjMJByxr4d\r\n                        [category] => send\r\n                        [amount] => -105.05259845\r\n                        [vout] => 1\r\n                        [fee] => 105.11519845\r\n                        [abandoned] => \r\n                    )\r\n    \r\n            )\r\n\r\n\r\nBut with this transaction everything is fine: \r\n\r\n[20179d0d2fba68b2ca82ab8cc5faa39ced73324af6b90b6505cca2c3d65102a6][2]\r\n\r\n    bitcoin-cli gettransaction \"20179d0d2fba68b2ca82ab8cc5faa39ced73324af6b90b6505cca2c3d65102a6\" true\r\n\r\n\r\nResult:\r\n\r\n    Array\r\n    (\r\n        [amount] => -1.049\r\n        [fee] => -0.001\r\n        [confirmations] => 136\r\n        [blockhash] => 0000000000000fd2e83cc1a8145b055a1a33ea996f7a93578197a48848201a5b\r\n        [blockindex] => 1\r\n        [blocktime] => 1517898674\r\n        [txid] => b0ad2f8047b6bfc6a0da4947ec7cda59ccf423df2d24dcbf2996042cdf45c10a\r\n        [walletconflicts] => Array\r\n            (\r\n            )\r\n    \r\n        [time] => 1517898650\r\n        [timereceived] => 1517898650\r\n        [bip125-replaceable] => no\r\n        [details] => Array\r\n            (\r\n                [0] => Array\r\n                    (\r\n                        [involvesWatchonly] => 1\r\n                        [account] => \r\n                        [address] => mxKPZ2rnev5odtFTqS273946YgQfY7H6E5\r\n                        [category] => send\r\n                        [amount] => -0.0001\r\n                        [vout] => 0\r\n                        [fee] => -0.001\r\n                        [abandoned] => \r\n                    )\r\n    \r\n                [1] => Array\r\n                    (\r\n                        [involvesWatchonly] => 1\r\n                        [account] => \r\n                        [address] => 2NG1QAAFsM71L7YwVxkjSeMbKYpW6KFURXs\r\n                        [category] => send\r\n                        [amount] => -1.0489\r\n                        [vout] => 1\r\n                        [fee] => -0.001\r\n                        [abandoned] => \r\n                    )\r\n    \r\n            )\r\nto get the fee of that type of transactions we could do: \r\n\r\n105.21509845 (amount) - 105.11519845(fee) = 0.001\r\n\r\nBut why bitcoin core doesn't do it and why it's only for some transactions?\r\n\r\n\r\n  [1]: https://testnet.blockchain.info/tx/20179d0d2fba68b2ca82ab8cc5faa39ced73324af6b90b6505cca2c3d65102a6\r\n  [2]: https://testnet.blockchain.info/tx/b0ad2f8047b6bfc6a0da4947ec7cda59ccf423df2d24dcbf2996042cdf45c10a\r\n\r\n\r\n",
   "closed_at" : null,
   "closed_by" : null,
   "comments" : 2,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12364/comments",
   "created_at" : "2018-02-06T14:48:43Z",
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12364/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/issues/12364",
   "id" : 294786127,
   "labels" : [
      {
         "color" : "0052cc",
         "default" : false,
         "id" : 98279177,
         "name" : "RPC/REST/ZMQ",
         "node_id" : "MDU6TGFiZWw5ODI3OTE3Nw==",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/RPC/REST/ZMQ"
      },
      {
         "color" : "08a781",
         "default" : false,
         "id" : 149424,
         "name" : "Wallet",
         "node_id" : "MDU6TGFiZWwxNDk0MjQ=",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/Wallet"
      }
   ],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12364/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "node_id" : "MDU6SXNzdWUyOTQ3ODYxMjc=",
   "number" : 12364,
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "open",
   "title" : " Bitcoin-core 0.15.1 gettransaction showing wrong fee for some transactions",
   "updated_at" : "2018-02-20T04:11:19Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12364",
   "user" : {
      "avatar_url" : "https://avatars3.githubusercontent.com/u/28712999?v=4",
      "events_url" : "https://api.github.com/users/AdamSEY/events{/privacy}",
      "followers_url" : "https://api.github.com/users/AdamSEY/followers",
      "following_url" : "https://api.github.com/users/AdamSEY/following{/other_user}",
      "gists_url" : "https://api.github.com/users/AdamSEY/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/AdamSEY",
      "id" : 28712999,
      "login" : "AdamSEY",
      "node_id" : "MDQ6VXNlcjI4NzEyOTk5",
      "organizations_url" : "https://api.github.com/users/AdamSEY/orgs",
      "received_events_url" : "https://api.github.com/users/AdamSEY/received_events",
      "repos_url" : "https://api.github.com/users/AdamSEY/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/AdamSEY/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/AdamSEY/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/AdamSEY"
   }
}
