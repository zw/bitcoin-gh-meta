[
   {
      "body" : "Someone should test how long it takes to find peers with this, when DNS seeding and the built-in seeds are disabled. I'm not able to test the next ~3 days or so.",
      "created_at" : "2015-03-24T11:59:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5941#issuecomment-85467980",
      "id" : 85467980,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5941",
      "updated_at" : "2015-03-24T11:59:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/85467980",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "This is running on bitcoin.sipa.be, with -DDEBUG_ADDRMAN enabled.",
      "created_at" : "2015-03-24T13:00:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5941#issuecomment-85485701",
      "id" : 85485701,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5941",
      "updated_at" : "2015-03-24T13:00:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/85485701",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Going to test this.\r\n\r\n> Someone should test how long it takes to find peers with this, when DNS seeding and the built-in seeds are disabled.\r\n\r\nOK, disabling those.\r\n",
      "created_at" : "2015-03-24T13:54:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5941#issuecomment-85504276",
      "id" : 85504276,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5941",
      "updated_at" : "2015-03-24T13:54:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/85504276",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Typically, (a) less than 11 seconds if you have a fresh addrman, or (b) sometimes hours or longer, if not.\r\n\r\nCurrent code skips DNS seeds & built in seeds automatically, if it manages to connect to some peers within a short amount of time.\r\n",
      "created_at" : "2015-03-24T13:57:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5941#issuecomment-85505285",
      "id" : 85505285,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5941",
      "updated_at" : "2015-03-24T13:57:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/85505285",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/494411?v=3",
         "events_url" : "https://api.github.com/users/jgarzik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jgarzik/followers",
         "following_url" : "https://api.github.com/users/jgarzik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jgarzik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jgarzik",
         "id" : 494411,
         "login" : "jgarzik",
         "organizations_url" : "https://api.github.com/users/jgarzik/orgs",
         "received_events_url" : "https://api.github.com/users/jgarzik/received_events",
         "repos_url" : "https://api.github.com/users/jgarzik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jgarzik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jgarzik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jgarzik"
      }
   },
   {
      "body" : "@jgarzik I mean after this patch. Reason is the bias changes in peer selection. If you have very few tried peers, the new code will likely very actively keep retrying those (as there is a 50% chance to pick a previously tried peer), and there is no bias towards more recently learned addresses anymore. Both probably slow down initial connection, but likely don't have that much impact in a working system.",
      "created_at" : "2015-03-24T14:05:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5941#issuecomment-85508773",
      "id" : 85508773,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5941",
      "updated_at" : "2015-03-24T14:05:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/85508773",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "It instantly found a peer on start:\r\n```\r\n2015-03-24 13:55:51 init message: Loading addresses...\r\n2015-03-24 13:55:51 Loaded 14669 addresses from peers.dat  664ms\r\n...\r\n2015-03-24 13:55:51 receive version message: /Satoshi:0.9.2/: version 70002, blocks=346129, ...\r\n```\r\n",
      "created_at" : "2015-03-24T14:06:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5941#issuecomment-85509169",
      "id" : 85509169,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5941",
      "updated_at" : "2015-03-24T14:06:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/85509169",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Ran this with -dnsseed=0 and a peers.dat from a bitcoind that I stopped 23 hours ago:\r\n\r\n```\r\n2015-03-24 20:15:18 Loaded 12904 addresses from peers.dat  512ms\r\n   ...\r\n2015-03-24 20:15:30 connect() to 93.143.11.182:8333 failed after select(): Connection refused (61)\r\n2015-03-24 20:16:15 connect() to 85.199.110.252:8333 failed after select(): Connection refused (61)\r\n2015-03-24 20:16:16 receive version message: /Satoshi:0.10.0/: version 70002, blocks=349059, us=...., peer=1\r\n ...\r\n2015-03-24 20:16:28 receive version message: /Satoshi:0.9.1/: version 70002, blocks=349059, us=..., peer=2\r\n...\r\n2015-03-24 20:17:09 receive version message: /Marilyn:0.9.99/: version 70002, blocks=30160, us=..., peer=3\r\n...\r\n2015-03-24 20:17:15 connect() to 82.130.103.162:8333 failed after select(): Connection refused (61)\r\n...\r\n2015-03-24 20:17:44 receive version message: /Satoshi:0.10.0/: version 70002, blocks=349059, us=..., peer=4\r\n```\r\n... so just under one minute to connect to first peer, and it looks like it is finding about a peer a minute.\r\n",
      "created_at" : "2015-03-24T20:18:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5941#issuecomment-85676091",
      "id" : 85676091,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5941",
      "updated_at" : "2015-03-24T20:21:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/85676091",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/331997?v=3",
         "events_url" : "https://api.github.com/users/gavinandresen/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gavinandresen/followers",
         "following_url" : "https://api.github.com/users/gavinandresen/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gavinandresen/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gavinandresen",
         "id" : 331997,
         "login" : "gavinandresen",
         "organizations_url" : "https://api.github.com/users/gavinandresen/orgs",
         "received_events_url" : "https://api.github.com/users/gavinandresen/received_events",
         "repos_url" : "https://api.github.com/users/gavinandresen/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gavinandresen/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gavinandresen/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gavinandresen"
      }
   },
   {
      "body" : "utAck. The paper does not specify a countermeasure \"6\" in Section 7.\r\n\r\nWe've still got a bit to go (the symptoms being #5886, #5397, #5352, #5299), but great to see the attention on P2P. Let it remind us that P2P is at the (decentralized) core of Bitcoin Core as much as transactions are; arguably more so.",
      "created_at" : "2015-03-24T22:21:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5941#issuecomment-85717551",
      "id" : 85717551,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5941",
      "updated_at" : "2015-03-24T22:21:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/85717551",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8286077?v=3",
         "events_url" : "https://api.github.com/users/21E14/events{/privacy}",
         "followers_url" : "https://api.github.com/users/21E14/followers",
         "following_url" : "https://api.github.com/users/21E14/following{/other_user}",
         "gists_url" : "https://api.github.com/users/21E14/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/21E14",
         "id" : 8286077,
         "login" : "21E14",
         "organizations_url" : "https://api.github.com/users/21E14/orgs",
         "received_events_url" : "https://api.github.com/users/21E14/received_events",
         "repos_url" : "https://api.github.com/users/21E14/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/21E14/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/21E14/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/21E14"
      }
   },
   {
      "body" : "21E14: there are further countermeasures listed in the appendix.\n",
      "created_at" : "2015-03-24T23:01:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5941#issuecomment-85731182",
      "id" : 85731182,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5941",
      "updated_at" : "2015-03-24T23:01:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/85731182",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "It's worth pointing out.\r\n\r\nThis may also be a good opportunity to tilt the balance of preprocessor directives vs \"magic\" values, e.g. ADDRMAN_TRIED_BUCKETS_PER_GROUP (2 occurrences) vs 24 * 60 * 60 & 60 * 10.\r\n\r\nInterestingly, P2P is not very well reflected in the ongoing libification. As it stands, libbitcoin_server is its closest anchor, but the two are arguably distinct. A large subset of the protocol is arguably entirely P2P (ver, verack, ping, pong, inv, getheaders, ...).\r\n",
      "created_at" : "2015-03-25T00:11:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5941#issuecomment-85746646",
      "id" : 85746646,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5941",
      "updated_at" : "2015-03-25T00:11:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/85746646",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8286077?v=3",
         "events_url" : "https://api.github.com/users/21E14/events{/privacy}",
         "followers_url" : "https://api.github.com/users/21E14/followers",
         "following_url" : "https://api.github.com/users/21E14/following{/other_user}",
         "gists_url" : "https://api.github.com/users/21E14/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/21E14",
         "id" : 8286077,
         "login" : "21E14",
         "organizations_url" : "https://api.github.com/users/21E14/orgs",
         "received_events_url" : "https://api.github.com/users/21E14/received_events",
         "repos_url" : "https://api.github.com/users/21E14/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/21E14/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/21E14/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/21E14"
      }
   },
   {
      "body" : "Running with -dnsseed=0\r\n```\r\n2015-03-26 03:21:39 init message: Loading addresses...\r\n2015-03-26 03:21:39 Loaded 12984 addresses from peers.dat  94ms\r\n2015-03-26 03:21:39 DNS seeding disabled\r\n2015-03-26 03:21:40 connect() to 199.167.100.226:8333 failed after select(): Connection refused (61)\r\n2015-03-26 03:21:52 receive version message: /Satoshi:0.9.3/: version 70002, blocks=349268, us=..., peer=1\r\n2015-03-26 03:21:58 receive version message: /Satoshi:0.10.0/: version 70002, blocks=349268, us=..., peer=2\r\n2015-03-26 03:22:05 receive version message: /Satoshi:0.9.2.1/: version 70002, blocks=349268, us=..., peer=3\r\n2015-03-26 03:22:16 receive version message: /Satoshi:0.10.0/: version 70002, blocks=349268, us=..., peer=4\r\n```\r\n\r\nRemoved peers.dat\r\n```\r\n2015-03-26 03:28:42 init message: Loading addresses...\r\n2015-03-26 03:28:42 Loaded 0 addresses from peers.dat  1ms\r\n2015-03-26 03:28:42 dnsseed thread start\r\n2015-03-26 03:28:44 receive version message: /Satoshi:0.10.0/: version 70002, blocks=349269, us=..., peer=1\r\n2015-03-26 03:28:45 72 addresses found from DNS seeds\r\n2015-03-26 03:28:45 dnsseed thread exit\r\n2015-03-26 03:28:46 receive version message: /Satoshi:0.8.6/: version 70001, blocks=349269, us=..., peer=2\r\n2015-03-26 03:28:47 receive version message: /Satoshi:0.10.0/: version 70002, blocks=349269, us=..., peer=3\r\n2015-03-26 03:28:56 receive version message: /Satoshi:0.9.3/: version 70002, blocks=349269, us=..., peer=4\r\n```",
      "created_at" : "2015-03-26T03:35:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5941#issuecomment-86325153",
      "id" : 86325153,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5941",
      "updated_at" : "2015-03-26T03:35:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/86325153",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=3",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "body" : "I tried a few times with -dnsseed=0 and a copy of bitcoin.sipa.be's peers.dat, and always had an initial connection between 15 and 30 seconds later.",
      "created_at" : "2015-03-27T18:41:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5941#issuecomment-87048700",
      "id" : 87048700,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5941",
      "updated_at" : "2015-03-27T18:41:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/87048700",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   }
]
