[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#22778](https://github.com/bitcoin/bitcoin/pull/22778) (net processing: Reduce resource usage for inbound block-relay-only connections by jnewbery)\n* [#22777](https://github.com/bitcoin/bitcoin/pull/22777) (net processing: don't request tx relay on feeler connections by jnewbery)\n* [#21160](https://github.com/bitcoin/bitcoin/pull/21160) (net/net processing: Move tx inventory into net_processing by jnewbery)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2020-12-02T05:16:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20541#issuecomment-736996062",
      "id" : 736996062,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20541",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDczNjk5NjA2Mg==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-08-24T00:22:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/736996062",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20541#discussion_r533980130"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20541"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/533980130"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "\"services\" must go before the address and port.\r\n\r\n```suggestion\r\n            (uint64_t)addr.nServices, addr_you, // Together the pre-version-31402 serialization of CAddress \"addrYou\" (without nTime)\r\n            (uint64_t)nLocalNodeServices, CService(), // Together the pre-version-31402 serialization of CAddress \"addrMe\" (without nTime)\r\n```",
      "commit_id" : "158c0ec19555d4431e40308285da4e2f3d8db731",
      "created_at" : "2020-12-02T08:31:10Z",
      "diff_hunk" : "@@ -495,18 +495,17 @@ static void PushNodeVersion(CNode& pnode, CConnman& connman, int64_t nTime)\n     NodeId nodeid = pnode.GetId();\n     CAddress addr = pnode.addr;\n \n-    CAddress addrYou = addr.IsRoutable() && !IsProxy(addr) && addr.IsAddrV1Compatible() ?\n-                           addr :\n-                           CAddress(CService(), addr.nServices);\n-    CAddress addrMe = CAddress(CService(), nLocalNodeServices);\n+    CService addr_you = addr.IsRoutable() && !IsProxy(addr) && addr.IsAddrV1Compatible() ? addr : CService();\n \n-    connman.PushMessage(&pnode, CNetMsgMaker(INIT_PROTO_VERSION).Make(NetMsgType::VERSION, PROTOCOL_VERSION, (uint64_t)nLocalNodeServices, nTime, addrYou, addrMe,\n+    connman.PushMessage(&pnode, CNetMsgMaker(INIT_PROTO_VERSION).Make(NetMsgType::VERSION, PROTOCOL_VERSION, (uint64_t)nLocalNodeServices, nTime,\n+            addr_you, (uint64_t)addr.nServices, // Together the pre-version-31402 serialization of CAddress \"addrYou\" (without nTime)\n+            CService(), (uint64_t)nLocalNodeServices, // Together the pre-version-31402 serialization of CAddress \"addrMe\" (without nTime)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20541#discussion_r533980130",
      "id" : 533980130,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzk4MDEzMA==",
      "original_commit_id" : "2eef441a1cb11edb234ba4571e0d4de1749e6734",
      "original_line" : 502,
      "original_position" : 13,
      "original_start_line" : 501,
      "path" : "src/net_processing.cpp",
      "position" : null,
      "pull_request_review_id" : 542597014,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20541",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "updated_at" : "2020-12-02T23:21:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/533980130",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20541#discussion_r533983581"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20541"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/533983581"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "What is `31402`?\r\n\r\n```sh\r\n$ git grep 31402\r\n$\r\n```",
      "commit_id" : "158c0ec19555d4431e40308285da4e2f3d8db731",
      "created_at" : "2020-12-02T08:36:56Z",
      "diff_hunk" : "@@ -2295,15 +2294,15 @@ void PeerManager::ProcessMessage(CNode& pfrom, const std::string& msg_type, CDat\n         CAddress addrMe;\n         CAddress addrFrom;\n         uint64_t nNonce = 1;\n-        uint64_t nServiceInt;\n         ServiceFlags nServices;\n         int nVersion;\n         std::string cleanSubVer;\n         int nStartingHeight = -1;\n         bool fRelay = true;\n \n-        vRecv >> nVersion >> nServiceInt >> nTime >> addrMe;\n-        nServices = ServiceFlags(nServiceInt);\n+        vRecv >> nVersion >> Using<CustomUintFormatter<8>>(nServices) >> nTime;\n+        // The pre-31402 serialization of addrMe (which didn't include nTime):",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20541#discussion_r533983581",
      "id" : 533983581,
      "line" : 2304,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzk4MzU4MQ==",
      "original_commit_id" : "2eef441a1cb11edb234ba4571e0d4de1749e6734",
      "original_line" : 2304,
      "original_position" : 39,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : 39,
      "pull_request_review_id" : 542597014,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20541",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-12-02T23:21:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/533983581",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20541#discussion_r533986388"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20541"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/533986388"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "ditto: swap services and address",
      "commit_id" : "158c0ec19555d4431e40308285da4e2f3d8db731",
      "created_at" : "2020-12-02T08:41:53Z",
      "diff_hunk" : "@@ -2295,15 +2294,15 @@ void PeerManager::ProcessMessage(CNode& pfrom, const std::string& msg_type, CDat\n         CAddress addrMe;\n         CAddress addrFrom;\n         uint64_t nNonce = 1;\n-        uint64_t nServiceInt;\n         ServiceFlags nServices;\n         int nVersion;\n         std::string cleanSubVer;\n         int nStartingHeight = -1;\n         bool fRelay = true;\n \n-        vRecv >> nVersion >> nServiceInt >> nTime >> addrMe;\n-        nServices = ServiceFlags(nServiceInt);\n+        vRecv >> nVersion >> Using<CustomUintFormatter<8>>(nServices) >> nTime;\n+        // The pre-31402 serialization of addrMe (which didn't include nTime):\n+        vRecv >> static_cast<CService&>(addrMe) >> Using<CustomUintFormatter<8>>(addrMe.nServices);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20541#discussion_r533986388",
      "id" : 533986388,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzk4NjM4OA==",
      "original_commit_id" : "2eef441a1cb11edb234ba4571e0d4de1749e6734",
      "original_line" : 2305,
      "original_position" : 40,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : null,
      "pull_request_review_id" : 542597014,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20541",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-12-02T23:21:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/533986388",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20541#discussion_r533986961"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20541"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/533986961"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "ditto: swap services and address\r\n",
      "commit_id" : "158c0ec19555d4431e40308285da4e2f3d8db731",
      "created_at" : "2020-12-02T08:42:50Z",
      "diff_hunk" : "@@ -2322,8 +2321,11 @@ void PeerManager::ProcessMessage(CNode& pfrom, const std::string& msg_type, CDat\n             return;\n         }\n \n-        if (!vRecv.empty())\n-            vRecv >> addrFrom >> nNonce;\n+        if (!vRecv.empty()) {\n+            // The pre-31402 serialization of addrFrom (which didn't include nTime).\n+            vRecv >> static_cast<CService&>(addrFrom) >> Using<CustomUintFormatter<8>>(addrFrom.nServices);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20541#discussion_r533986961",
      "id" : 533986961,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzk4Njk2MQ==",
      "original_commit_id" : "2eef441a1cb11edb234ba4571e0d4de1749e6734",
      "original_line" : 2326,
      "original_position" : 52,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : null,
      "pull_request_review_id" : 542597014,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20541",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-12-02T23:21:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/533986961",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20541#discussion_r534021680"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20541"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/534021680"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "By removing this we assume that for non-disk serialization `s.GetType() & SER_GETHASH` is always false. I.e. `SER_GETHASH` is not used in non-disk ser/deser of `CAddress`. I think this is the case indeed.",
      "commit_id" : "158c0ec19555d4431e40308285da4e2f3d8db731",
      "created_at" : "2020-12-02T09:35:16Z",
      "diff_hunk" : "@@ -373,16 +373,7 @@ class CAddress : public CService\n         if (s.GetType() & SER_DISK) {\n             READWRITE(nVersion);\n         }\n-        if ((s.GetType() & SER_DISK) ||\n-            (nVersion != INIT_PROTO_VERSION && !(s.GetType() & SER_GETHASH))) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20541#discussion_r534021680",
      "id" : 534021680,
      "line" : 377,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDAyMTY4MA==",
      "original_commit_id" : "2eef441a1cb11edb234ba4571e0d4de1749e6734",
      "original_line" : 377,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/protocol.h",
      "position" : 5,
      "pull_request_review_id" : 542597014,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20541",
      "side" : "LEFT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-12-02T23:21:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/534021680",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20541#discussion_r534027133"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20541"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/534027133"
         }
      },
      "author_association" : "MEMBER",
      "body" : "31402 is the protocol version that introduced the `nTime` field in CAddress. INIT_PROTO_VERSION (=209) being below it is the reason why the addresses inside the version message don't have it. There is no code left that depends on this, as all connections must be MIN_PEER_PROTO_VERSION (31800) after version negotiation now.\r\n\r\n* 209 is from may 2010\r\n* 31402 is from october 2010\r\n* 31800 is from december 2010",
      "commit_id" : "158c0ec19555d4431e40308285da4e2f3d8db731",
      "created_at" : "2020-12-02T09:43:14Z",
      "diff_hunk" : "@@ -2295,15 +2294,15 @@ void PeerManager::ProcessMessage(CNode& pfrom, const std::string& msg_type, CDat\n         CAddress addrMe;\n         CAddress addrFrom;\n         uint64_t nNonce = 1;\n-        uint64_t nServiceInt;\n         ServiceFlags nServices;\n         int nVersion;\n         std::string cleanSubVer;\n         int nStartingHeight = -1;\n         bool fRelay = true;\n \n-        vRecv >> nVersion >> nServiceInt >> nTime >> addrMe;\n-        nServices = ServiceFlags(nServiceInt);\n+        vRecv >> nVersion >> Using<CustomUintFormatter<8>>(nServices) >> nTime;\n+        // The pre-31402 serialization of addrMe (which didn't include nTime):",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20541#discussion_r534027133",
      "id" : 534027133,
      "in_reply_to_id" : 533983581,
      "line" : 2304,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDAyNzEzMw==",
      "original_commit_id" : "2eef441a1cb11edb234ba4571e0d4de1749e6734",
      "original_line" : 2304,
      "original_position" : 39,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : 39,
      "pull_request_review_id" : 542656744,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20541",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-12-02T23:21:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/534027133",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK.\r\n\r\nDoes this conflict with any backports we might want to do for 0.21?",
      "created_at" : "2020-12-02T10:41:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20541#issuecomment-737147335",
      "id" : 737147335,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20541",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDczNzE0NzMzNQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-02T10:41:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/737147335",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20541#discussion_r534233283"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20541"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/534233283"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Yes. No test caught this. ",
      "commit_id" : "158c0ec19555d4431e40308285da4e2f3d8db731",
      "created_at" : "2020-12-02T14:58:36Z",
      "diff_hunk" : "@@ -495,18 +495,17 @@ static void PushNodeVersion(CNode& pnode, CConnman& connman, int64_t nTime)\n     NodeId nodeid = pnode.GetId();\n     CAddress addr = pnode.addr;\n \n-    CAddress addrYou = addr.IsRoutable() && !IsProxy(addr) && addr.IsAddrV1Compatible() ?\n-                           addr :\n-                           CAddress(CService(), addr.nServices);\n-    CAddress addrMe = CAddress(CService(), nLocalNodeServices);\n+    CService addr_you = addr.IsRoutable() && !IsProxy(addr) && addr.IsAddrV1Compatible() ? addr : CService();\n \n-    connman.PushMessage(&pnode, CNetMsgMaker(INIT_PROTO_VERSION).Make(NetMsgType::VERSION, PROTOCOL_VERSION, (uint64_t)nLocalNodeServices, nTime, addrYou, addrMe,\n+    connman.PushMessage(&pnode, CNetMsgMaker(INIT_PROTO_VERSION).Make(NetMsgType::VERSION, PROTOCOL_VERSION, (uint64_t)nLocalNodeServices, nTime,\n+            addr_you, (uint64_t)addr.nServices, // Together the pre-version-31402 serialization of CAddress \"addrYou\" (without nTime)\n+            CService(), (uint64_t)nLocalNodeServices, // Together the pre-version-31402 serialization of CAddress \"addrMe\" (without nTime)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20541#discussion_r534233283",
      "id" : 534233283,
      "in_reply_to_id" : 533980130,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDIzMzI4Mw==",
      "original_commit_id" : "2eef441a1cb11edb234ba4571e0d4de1749e6734",
      "original_line" : 502,
      "original_position" : 13,
      "original_start_line" : 501,
      "path" : "src/net_processing.cpp",
      "position" : null,
      "pull_request_review_id" : 542920903,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20541",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "updated_at" : "2020-12-02T23:21:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/534233283",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/127973?v=4",
         "events_url" : "https://api.github.com/users/lontivero/events{/privacy}",
         "followers_url" : "https://api.github.com/users/lontivero/followers",
         "following_url" : "https://api.github.com/users/lontivero/following{/other_user}",
         "gists_url" : "https://api.github.com/users/lontivero/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/lontivero",
         "id" : 127973,
         "login" : "lontivero",
         "node_id" : "MDQ6VXNlcjEyNzk3Mw==",
         "organizations_url" : "https://api.github.com/users/lontivero/orgs",
         "received_events_url" : "https://api.github.com/users/lontivero/received_events",
         "repos_url" : "https://api.github.com/users/lontivero/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/lontivero/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/lontivero/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/lontivero"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20541#discussion_r534549791"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20541"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/534549791"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Fixed.",
      "commit_id" : "158c0ec19555d4431e40308285da4e2f3d8db731",
      "created_at" : "2020-12-02T23:21:40Z",
      "diff_hunk" : "@@ -495,18 +495,17 @@ static void PushNodeVersion(CNode& pnode, CConnman& connman, int64_t nTime)\n     NodeId nodeid = pnode.GetId();\n     CAddress addr = pnode.addr;\n \n-    CAddress addrYou = addr.IsRoutable() && !IsProxy(addr) && addr.IsAddrV1Compatible() ?\n-                           addr :\n-                           CAddress(CService(), addr.nServices);\n-    CAddress addrMe = CAddress(CService(), nLocalNodeServices);\n+    CService addr_you = addr.IsRoutable() && !IsProxy(addr) && addr.IsAddrV1Compatible() ? addr : CService();\n \n-    connman.PushMessage(&pnode, CNetMsgMaker(INIT_PROTO_VERSION).Make(NetMsgType::VERSION, PROTOCOL_VERSION, (uint64_t)nLocalNodeServices, nTime, addrYou, addrMe,\n+    connman.PushMessage(&pnode, CNetMsgMaker(INIT_PROTO_VERSION).Make(NetMsgType::VERSION, PROTOCOL_VERSION, (uint64_t)nLocalNodeServices, nTime,\n+            addr_you, (uint64_t)addr.nServices, // Together the pre-version-31402 serialization of CAddress \"addrYou\" (without nTime)\n+            CService(), (uint64_t)nLocalNodeServices, // Together the pre-version-31402 serialization of CAddress \"addrMe\" (without nTime)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20541#discussion_r534549791",
      "id" : 534549791,
      "in_reply_to_id" : 533980130,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDU0OTc5MQ==",
      "original_commit_id" : "2eef441a1cb11edb234ba4571e0d4de1749e6734",
      "original_line" : 502,
      "original_position" : 13,
      "original_start_line" : 501,
      "path" : "src/net_processing.cpp",
      "position" : null,
      "pull_request_review_id" : 543320436,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20541",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "updated_at" : "2020-12-02T23:21:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/534549791",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20541#discussion_r534549840"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20541"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/534549840"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Fixed.",
      "commit_id" : "158c0ec19555d4431e40308285da4e2f3d8db731",
      "created_at" : "2020-12-02T23:21:47Z",
      "diff_hunk" : "@@ -2295,15 +2294,15 @@ void PeerManager::ProcessMessage(CNode& pfrom, const std::string& msg_type, CDat\n         CAddress addrMe;\n         CAddress addrFrom;\n         uint64_t nNonce = 1;\n-        uint64_t nServiceInt;\n         ServiceFlags nServices;\n         int nVersion;\n         std::string cleanSubVer;\n         int nStartingHeight = -1;\n         bool fRelay = true;\n \n-        vRecv >> nVersion >> nServiceInt >> nTime >> addrMe;\n-        nServices = ServiceFlags(nServiceInt);\n+        vRecv >> nVersion >> Using<CustomUintFormatter<8>>(nServices) >> nTime;\n+        // The pre-31402 serialization of addrMe (which didn't include nTime):\n+        vRecv >> static_cast<CService&>(addrMe) >> Using<CustomUintFormatter<8>>(addrMe.nServices);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20541#discussion_r534549840",
      "id" : 534549840,
      "in_reply_to_id" : 533986388,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDU0OTg0MA==",
      "original_commit_id" : "2eef441a1cb11edb234ba4571e0d4de1749e6734",
      "original_line" : 2305,
      "original_position" : 40,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : null,
      "pull_request_review_id" : 543320494,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20541",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-12-02T23:21:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/534549840",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20541#discussion_r534549874"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20541"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/534549874"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Fixed.",
      "commit_id" : "158c0ec19555d4431e40308285da4e2f3d8db731",
      "created_at" : "2020-12-02T23:21:54Z",
      "diff_hunk" : "@@ -2322,8 +2321,11 @@ void PeerManager::ProcessMessage(CNode& pfrom, const std::string& msg_type, CDat\n             return;\n         }\n \n-        if (!vRecv.empty())\n-            vRecv >> addrFrom >> nNonce;\n+        if (!vRecv.empty()) {\n+            // The pre-31402 serialization of addrFrom (which didn't include nTime).\n+            vRecv >> static_cast<CService&>(addrFrom) >> Using<CustomUintFormatter<8>>(addrFrom.nServices);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20541#discussion_r534549874",
      "id" : 534549874,
      "in_reply_to_id" : 533986961,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDU0OTg3NA==",
      "original_commit_id" : "2eef441a1cb11edb234ba4571e0d4de1749e6734",
      "original_line" : 2326,
      "original_position" : 52,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : null,
      "pull_request_review_id" : 543320540,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20541",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-12-02T23:21:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/534549874",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20541#discussion_r534550305"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20541"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/534550305"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Yes, this is the case. #20516 adds an assert for this, actually.",
      "commit_id" : "158c0ec19555d4431e40308285da4e2f3d8db731",
      "created_at" : "2020-12-02T23:23:04Z",
      "diff_hunk" : "@@ -373,16 +373,7 @@ class CAddress : public CService\n         if (s.GetType() & SER_DISK) {\n             READWRITE(nVersion);\n         }\n-        if ((s.GetType() & SER_DISK) ||\n-            (nVersion != INIT_PROTO_VERSION && !(s.GetType() & SER_GETHASH))) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20541#discussion_r534550305",
      "id" : 534550305,
      "in_reply_to_id" : 534021680,
      "line" : 377,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDU1MDMwNQ==",
      "original_commit_id" : "2eef441a1cb11edb234ba4571e0d4de1749e6734",
      "original_line" : 377,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/protocol.h",
      "position" : 5,
      "pull_request_review_id" : 543321069,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20541",
      "side" : "LEFT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-12-02T23:23:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/534550305",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@MarcoFalke I don't think so. It doesn't conflict with #20516 (either can be backported without affecting the other). Anything else you're thinking of?",
      "created_at" : "2020-12-02T23:23:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20541#issuecomment-737556164",
      "id" : 737556164,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20541",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDczNzU1NjE2NA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-02T23:23:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/737556164",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> It is somewhat worrying that all tests passed with the swapped services and address\r\n\r\nIndeed. I think we should add unit test vectors for all message types with an example message and the expected deserialization? Assert that both are identical. Though, message format (deserialization) is handled in the same function that does the processing, so I am not sure how to test this in general without rewriting net_processing.",
      "created_at" : "2020-12-03T07:28:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20541#issuecomment-737720567",
      "id" : 737720567,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20541",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDczNzcyMDU2Nw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-03T07:28:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/737720567",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> It is somewhat worrying that all tests passed with the swapped services and address\r\n\r\nIt is, but that's at least partially explained by the fact that we barely use these values. One is ignored entirely, the other is used for statistics about our local IP. The nService fields are also ignored entirely.\r\n\r\n> I think we should add unit test vectors for all message types with an example message and the expected deserialization? \r\n\r\nThat makes sense.",
      "created_at" : "2020-12-03T19:08:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20541#issuecomment-738232497",
      "id" : 738232497,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20541",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDczODIzMjQ5Nw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-03T19:09:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/738232497",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "@hamed2f#20541",
      "created_at" : "2020-12-03T21:25:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20541#issuecomment-738328894",
      "id" : 738328894,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20541",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDczODMyODg5NA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-03T21:28:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/738328894",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/61038047?v=4",
         "events_url" : "https://api.github.com/users/hamedtayeban22/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hamedtayeban22/followers",
         "following_url" : "https://api.github.com/users/hamedtayeban22/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hamedtayeban22/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hamedtayeban22",
         "id" : 61038047,
         "login" : "hamedtayeban22",
         "node_id" : "MDQ6VXNlcjYxMDM4MDQ3",
         "organizations_url" : "https://api.github.com/users/hamedtayeban22/orgs",
         "received_events_url" : "https://api.github.com/users/hamedtayeban22/received_events",
         "repos_url" : "https://api.github.com/users/hamedtayeban22/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hamedtayeban22/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hamedtayeban22/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hamedtayeban22"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "@ hamed2f#20541",
      "created_at" : "2020-12-03T21:26:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20541#issuecomment-738329719",
      "id" : 738329719,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20541",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDczODMyOTcxOQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-03T21:28:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/738329719",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/61038047?v=4",
         "events_url" : "https://api.github.com/users/hamedtayeban22/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hamedtayeban22/followers",
         "following_url" : "https://api.github.com/users/hamedtayeban22/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hamedtayeban22/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hamedtayeban22",
         "id" : 61038047,
         "login" : "hamedtayeban22",
         "node_id" : "MDQ6VXNlcjYxMDM4MDQ3",
         "organizations_url" : "https://api.github.com/users/hamedtayeban22/orgs",
         "received_events_url" : "https://api.github.com/users/hamedtayeban22/received_events",
         "repos_url" : "https://api.github.com/users/hamedtayeban22/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hamedtayeban22/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hamedtayeban22/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hamedtayeban22"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "#20541",
      "created_at" : "2020-12-03T21:27:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20541#issuecomment-738330045",
      "id" : 738330045,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20541",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDczODMzMDA0NQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-03T21:28:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/738330045",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/61038047?v=4",
         "events_url" : "https://api.github.com/users/hamedtayeban22/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hamedtayeban22/followers",
         "following_url" : "https://api.github.com/users/hamedtayeban22/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hamedtayeban22/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hamedtayeban22",
         "id" : 61038047,
         "login" : "hamedtayeban22",
         "node_id" : "MDQ6VXNlcjYxMDM4MDQ3",
         "organizations_url" : "https://api.github.com/users/hamedtayeban22/orgs",
         "received_events_url" : "https://api.github.com/users/hamedtayeban22/received_events",
         "repos_url" : "https://api.github.com/users/hamedtayeban22/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hamedtayeban22/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hamedtayeban22/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hamedtayeban22"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "@hamedtayeban22 ",
      "created_at" : "2020-12-03T21:27:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20541#issuecomment-738330286",
      "id" : 738330286,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20541",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDczODMzMDI4Ng==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-03T21:28:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/738330286",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/61038047?v=4",
         "events_url" : "https://api.github.com/users/hamedtayeban22/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hamedtayeban22/followers",
         "following_url" : "https://api.github.com/users/hamedtayeban22/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hamedtayeban22/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hamedtayeban22",
         "id" : 61038047,
         "login" : "hamedtayeban22",
         "node_id" : "MDQ6VXNlcjYxMDM4MDQ3",
         "organizations_url" : "https://api.github.com/users/hamedtayeban22/orgs",
         "received_events_url" : "https://api.github.com/users/hamedtayeban22/received_events",
         "repos_url" : "https://api.github.com/users/hamedtayeban22/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hamedtayeban22/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hamedtayeban22/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hamedtayeban22"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK",
      "created_at" : "2020-12-04T01:48:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20541#issuecomment-738501249",
      "id" : 738501249,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20541",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDczODUwMTI0OQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-04T01:48:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/738501249",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7975071?v=4",
         "events_url" : "https://api.github.com/users/naumenkogs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/naumenkogs/followers",
         "following_url" : "https://api.github.com/users/naumenkogs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/naumenkogs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/naumenkogs",
         "id" : 7975071,
         "login" : "naumenkogs",
         "node_id" : "MDQ6VXNlcjc5NzUwNzE=",
         "organizations_url" : "https://api.github.com/users/naumenkogs/orgs",
         "received_events_url" : "https://api.github.com/users/naumenkogs/received_events",
         "repos_url" : "https://api.github.com/users/naumenkogs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/naumenkogs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/naumenkogs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/naumenkogs"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "ACK 158c0ec",
      "created_at" : "2020-12-04T02:55:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20541#issuecomment-738529623",
      "id" : 738529623,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20541",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDczODUyOTYyMw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-04T02:55:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/738529623",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/127973?v=4",
         "events_url" : "https://api.github.com/users/lontivero/events{/privacy}",
         "followers_url" : "https://api.github.com/users/lontivero/followers",
         "following_url" : "https://api.github.com/users/lontivero/following{/other_user}",
         "gists_url" : "https://api.github.com/users/lontivero/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/lontivero",
         "id" : 127973,
         "login" : "lontivero",
         "node_id" : "MDQ6VXNlcjEyNzk3Mw==",
         "organizations_url" : "https://api.github.com/users/lontivero/orgs",
         "received_events_url" : "https://api.github.com/users/lontivero/received_events",
         "repos_url" : "https://api.github.com/users/lontivero/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/lontivero/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/lontivero/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/lontivero"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\n This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2020-12-10T08:19:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20541#issuecomment-742361301",
      "id" : 742361301,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20541",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc0MjM2MTMwMQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-10T08:19:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/742361301",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Rebased.",
      "created_at" : "2021-07-03T00:13:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20541#issuecomment-873312291",
      "id" : 873312291,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20541",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDg3MzMxMjI5MQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-07-03T00:13:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/873312291",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20541#discussion_r664332315"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20541"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/664332315"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Since `addFrom` is just thrown away, maybe make this more explicit:\r\n\r\n```diff\r\n--- a/src/net_processing.cpp\r\n+++ b/src/net_processing.cpp\r\n@@ -2439,7 +2439,6 @@ void PeerManagerImpl::ProcessMessage(CNode& pfrom, const std::string& msg_type,\r\n \r\n         int64_t nTime;\r\n         CAddress addrMe;\r\n-        CAddress addrFrom;\r\n         uint64_t nNonce = 1;\r\n         ServiceFlags nServices;\r\n         int nVersion;\r\n@@ -2472,8 +2471,12 @@ void PeerManagerImpl::ProcessMessage(CNode& pfrom, const std::string& msg_type,\r\n         }\r\n \r\n         if (!vRecv.empty()) {\r\n-            // The pre-31402 serialization of addrFrom (which didn't include nTime).\r\n-            vRecv >> Using<CustomUintFormatter<8>>(addrFrom.nServices) >> static_cast<CService&>(addrFrom);\r\n+            // The version message includes information about the sending node which we don't use:\r\n+            //   - 8 bytes (service bits)\r\n+            //   - 16 bytes (ipv6 address)\r\n+            //   - 2 bytes (port)\r\n+            uint8_t unused[26];\r\n+            vRecv >> unused;\r\n             vRecv >> nNonce;\r\n         }\r\n         if (!vRecv.empty()) {\r\n```",
      "commit_id" : "775954ac5ffd2b0d6f89a5b35e4120f0d170c884",
      "created_at" : "2021-07-06T08:10:02Z",
      "diff_hunk" : "@@ -2472,8 +2471,11 @@ void PeerManagerImpl::ProcessMessage(CNode& pfrom, const std::string& msg_type,\n             return;\n         }\n \n-        if (!vRecv.empty())\n-            vRecv >> addrFrom >> nNonce;\n+        if (!vRecv.empty()) {\n+            // The pre-31402 serialization of addrFrom (which didn't include nTime).\n+            vRecv >> Using<CustomUintFormatter<8>>(addrFrom.nServices) >> static_cast<CService&>(addrFrom);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20541#discussion_r664332315",
      "id" : 664332315,
      "line" : 2476,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY2NDMzMjMxNQ==",
      "original_commit_id" : "775954ac5ffd2b0d6f89a5b35e4120f0d170c884",
      "original_line" : 2476,
      "original_position" : 56,
      "original_start_line" : 2475,
      "path" : "src/net_processing.cpp",
      "position" : 56,
      "pull_request_review_id" : 699658253,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20541",
      "side" : "RIGHT",
      "start_line" : 2475,
      "start_side" : "RIGHT",
      "updated_at" : "2021-07-06T08:33:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/664332315",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20541#discussion_r664336347"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20541"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/664336347"
         }
      },
      "author_association" : "MEMBER",
      "body" : "The service bits here are never used (we don't care what the peer thinks our services are), so we can be more explicit in discarding them and only using the `CService` data:\r\n\r\n```diff\r\n--- a/src/net_processing.cpp\r\n+++ b/src/net_processing.cpp\r\n@@ -2438,7 +2438,7 @@ void PeerManagerImpl::ProcessMessage(CNode& pfrom, const std::string& msg_type,\r\n         }\r\n \r\n         int64_t nTime;\r\n-        CAddress addrMe;\r\n+        CService addrMe;\r\n         CAddress addrFrom;\r\n         uint64_t nNonce = 1;\r\n         ServiceFlags nServices;\r\n@@ -2451,8 +2451,10 @@ void PeerManagerImpl::ProcessMessage(CNode& pfrom, const std::string& msg_type,\r\n         if (nTime < 0) {\r\n             nTime = 0;\r\n         }\r\n-        // The pre-31402 serialization of addrMe (which didn't include nTime):\r\n-        vRecv >> Using<CustomUintFormatter<8>>(addrMe.nServices) >> static_cast<CService&>(addrMe);\r\n+        // Ignore the addrMe service bits sent by the peer\r\n+        uint8_t unused_service_bits[8];\r\n+        vRecv >> unused_service_bits;\r\n+        vRecv >> addrMe;\r\n         if (!pfrom.IsInboundConn())\r\n         {\r\n             m_addrman.SetServices(pfrom.addr, nServices);\r\n```",
      "commit_id" : "775954ac5ffd2b0d6f89a5b35e4120f0d170c884",
      "created_at" : "2021-07-06T08:15:29Z",
      "diff_hunk" : "@@ -2442,18 +2441,18 @@ void PeerManagerImpl::ProcessMessage(CNode& pfrom, const std::string& msg_type,\n         CAddress addrMe;\n         CAddress addrFrom;\n         uint64_t nNonce = 1;\n-        uint64_t nServiceInt;\n         ServiceFlags nServices;\n         int nVersion;\n         std::string cleanSubVer;\n         int starting_height = -1;\n         bool fRelay = true;\n \n-        vRecv >> nVersion >> nServiceInt >> nTime >> addrMe;\n+        vRecv >> nVersion >> Using<CustomUintFormatter<8>>(nServices) >> nTime;\n         if (nTime < 0) {\n             nTime = 0;\n         }\n-        nServices = ServiceFlags(nServiceInt);\n+        // The pre-31402 serialization of addrMe (which didn't include nTime):\n+        vRecv >> Using<CustomUintFormatter<8>>(addrMe.nServices) >> static_cast<CService&>(addrMe);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20541#discussion_r664336347",
      "id" : 664336347,
      "line" : 2455,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY2NDMzNjM0Nw==",
      "original_commit_id" : "775954ac5ffd2b0d6f89a5b35e4120f0d170c884",
      "original_line" : 2455,
      "original_position" : 44,
      "original_start_line" : 2454,
      "path" : "src/net_processing.cpp",
      "position" : 44,
      "pull_request_review_id" : 699658253,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20541",
      "side" : "RIGHT",
      "start_line" : 2454,
      "start_side" : "RIGHT",
      "updated_at" : "2021-07-06T08:33:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/664336347",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20541#discussion_r664347584"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20541"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/664347584"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Rather than having these casts in the `Make()` call, perhaps it's a bit more legible as:\r\n\r\n```diff\r\n--- a/src/net_processing.cpp\r\n+++ b/src/net_processing.cpp\r\n@@ -1034,18 +1034,19 @@ void PeerManagerImpl::PushNodeVersion(CNode& pnode, int64_t nTime)\r\n     // Note that pnode->GetLocalServices() is a reflection of the local\r\n     // services we were offering when the CNode object was created for this\r\n     // peer.\r\n-    ServiceFlags nLocalNodeServices = pnode.GetLocalServices();\r\n+    auto my_services = static_cast<uint64_t>(pnode.GetLocalServices());\r\n     uint64_t nonce = pnode.GetLocalNonce();\r\n     const int nNodeStartingHeight{m_best_height};\r\n     NodeId nodeid = pnode.GetId();\r\n     CAddress addr = pnode.addr;\r\n \r\n     CService addr_you = addr.IsRoutable() && !IsProxy(addr) && addr.IsAddrV1Compatible() ? addr : CService();\r\n+    auto your_services = static_cast<uint64_t>(addr.nServices);\r\n \r\n     const bool tx_relay = !m_ignore_incoming_txs && pnode.m_tx_relay != nullptr;\r\n-    m_connman.PushMessage(&pnode, CNetMsgMaker(INIT_PROTO_VERSION).Make(NetMsgType::VERSION, PROTOCOL_VERSION, (uint64_t)nLocalNodeServices, nTime,\r\n-            (uint64_t)addr.nServices, addr_you, // Together the pre-version-31402 serialization of CAddress \"addrYou\" (without nTime)\r\n-            (uint64_t)nLocalNodeServices, CService(), // Together the pre-version-31402 serialization of CAddress \"addrMe\" (without nTime)\r\n+    m_connman.PushMessage(&pnode, CNetMsgMaker(INIT_PROTO_VERSION).Make(NetMsgType::VERSION, PROTOCOL_VERSION, my_services, nTime,\r\n+            your_services, addr_you, // Together the pre-version-31402 serialization of CAddress \"addrYou\" (without nTime)\r\n+            my_services, CService(), // Together the pre-version-31402 serialization of CAddress \"addrMe\" (without nTime)\r\n             nonce, strSubVersion, nNodeStartingHeight, tx_relay));\r\n \r\n     if (fLogIPs) {\r\n\r\n```",
      "commit_id" : "775954ac5ffd2b0d6f89a5b35e4120f0d170c884",
      "created_at" : "2021-07-06T08:29:55Z",
      "diff_hunk" : "@@ -1040,19 +1040,18 @@ void PeerManagerImpl::PushNodeVersion(CNode& pnode, int64_t nTime)\n     NodeId nodeid = pnode.GetId();\n     CAddress addr = pnode.addr;\n \n-    CAddress addrYou = addr.IsRoutable() && !IsProxy(addr) && addr.IsAddrV1Compatible() ?\n-                           addr :\n-                           CAddress(CService(), addr.nServices);\n-    CAddress addrMe = CAddress(CService(), nLocalNodeServices);\n+    CService addr_you = addr.IsRoutable() && !IsProxy(addr) && addr.IsAddrV1Compatible() ? addr : CService();\n \n     const bool tx_relay = !m_ignore_incoming_txs && pnode.m_tx_relay != nullptr;\n-    m_connman.PushMessage(&pnode, CNetMsgMaker(INIT_PROTO_VERSION).Make(NetMsgType::VERSION, PROTOCOL_VERSION, (uint64_t)nLocalNodeServices, nTime, addrYou, addrMe,\n+    m_connman.PushMessage(&pnode, CNetMsgMaker(INIT_PROTO_VERSION).Make(NetMsgType::VERSION, PROTOCOL_VERSION, (uint64_t)nLocalNodeServices, nTime,",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20541#discussion_r664347584",
      "id" : 664347584,
      "line" : 1046,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY2NDM0NzU4NA==",
      "original_commit_id" : "775954ac5ffd2b0d6f89a5b35e4120f0d170c884",
      "original_line" : 1046,
      "original_position" : 12,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : 12,
      "pull_request_review_id" : 699658253,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20541",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-07-06T08:33:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/664347584",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20541#discussion_r664349865"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20541"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/664349865"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I'm not sure that references to version 31402 are very useful (beyond being a historical footnote). The `version` message contains {services, ipv6 addr, port} elements - the fact that that also used to be how address records used to be serialized in `addr` messages is not helpful in understanding the current protocol.",
      "commit_id" : "775954ac5ffd2b0d6f89a5b35e4120f0d170c884",
      "created_at" : "2021-07-06T08:32:51Z",
      "diff_hunk" : "@@ -1040,19 +1040,18 @@ void PeerManagerImpl::PushNodeVersion(CNode& pnode, int64_t nTime)\n     NodeId nodeid = pnode.GetId();\n     CAddress addr = pnode.addr;\n \n-    CAddress addrYou = addr.IsRoutable() && !IsProxy(addr) && addr.IsAddrV1Compatible() ?\n-                           addr :\n-                           CAddress(CService(), addr.nServices);\n-    CAddress addrMe = CAddress(CService(), nLocalNodeServices);\n+    CService addr_you = addr.IsRoutable() && !IsProxy(addr) && addr.IsAddrV1Compatible() ? addr : CService();\n \n     const bool tx_relay = !m_ignore_incoming_txs && pnode.m_tx_relay != nullptr;\n-    m_connman.PushMessage(&pnode, CNetMsgMaker(INIT_PROTO_VERSION).Make(NetMsgType::VERSION, PROTOCOL_VERSION, (uint64_t)nLocalNodeServices, nTime, addrYou, addrMe,\n+    m_connman.PushMessage(&pnode, CNetMsgMaker(INIT_PROTO_VERSION).Make(NetMsgType::VERSION, PROTOCOL_VERSION, (uint64_t)nLocalNodeServices, nTime,\n+            (uint64_t)addr.nServices, addr_you, // Together the pre-version-31402 serialization of CAddress \"addrYou\" (without nTime)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20541#discussion_r664349865",
      "id" : 664349865,
      "line" : 1047,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY2NDM0OTg2NQ==",
      "original_commit_id" : "775954ac5ffd2b0d6f89a5b35e4120f0d170c884",
      "original_line" : 1047,
      "original_position" : 13,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : 13,
      "pull_request_review_id" : 699658253,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20541",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-07-06T08:33:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/664349865",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "When we receive a `version` message, we ignore the following fields:\r\n\r\n- (4) receiver's services\r\n- (7) sender's services (duplicate with field 2 - services)\r\n- (8/9) sender's ipv6 addr/port\r\n\r\nPerhaps in the next p2p version bump, we should explicitly document those fields as unused, since there's no purpose for them.",
      "created_at" : "2021-07-06T08:41:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20541#issuecomment-874575197",
      "id" : 874575197,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20541",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDg3NDU3NTE5Nw==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-07-06T08:41:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/874575197",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20541#discussion_r666875768"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20541"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/666875768"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Agree that `addrFrom` can be removed completely if it is never read from",
      "commit_id" : "775954ac5ffd2b0d6f89a5b35e4120f0d170c884",
      "created_at" : "2021-07-09T11:20:21Z",
      "diff_hunk" : "@@ -2472,8 +2471,11 @@ void PeerManagerImpl::ProcessMessage(CNode& pfrom, const std::string& msg_type,\n             return;\n         }\n \n-        if (!vRecv.empty())\n-            vRecv >> addrFrom >> nNonce;\n+        if (!vRecv.empty()) {\n+            // The pre-31402 serialization of addrFrom (which didn't include nTime).\n+            vRecv >> Using<CustomUintFormatter<8>>(addrFrom.nServices) >> static_cast<CService&>(addrFrom);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20541#discussion_r666875768",
      "id" : 666875768,
      "in_reply_to_id" : 664332315,
      "line" : 2476,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY2Njg3NTc2OA==",
      "original_commit_id" : "775954ac5ffd2b0d6f89a5b35e4120f0d170c884",
      "original_line" : 2476,
      "original_position" : 56,
      "original_start_line" : 2475,
      "path" : "src/net_processing.cpp",
      "position" : 56,
      "pull_request_review_id" : 702949656,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20541",
      "side" : "RIGHT",
      "start_line" : 2475,
      "start_side" : "RIGHT",
      "updated_at" : "2021-07-09T11:20:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/666875768",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20541#discussion_r693167654"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20541"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/693167654"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Done (using `vRecv.Ignore(26);` instead).",
      "commit_id" : "79aa69c08423c6dc86f15fbfcdd430307a906abd",
      "created_at" : "2021-08-20T19:17:30Z",
      "diff_hunk" : "@@ -2472,8 +2471,11 @@ void PeerManagerImpl::ProcessMessage(CNode& pfrom, const std::string& msg_type,\n             return;\n         }\n \n-        if (!vRecv.empty())\n-            vRecv >> addrFrom >> nNonce;\n+        if (!vRecv.empty()) {\n+            // The pre-31402 serialization of addrFrom (which didn't include nTime).\n+            vRecv >> Using<CustomUintFormatter<8>>(addrFrom.nServices) >> static_cast<CService&>(addrFrom);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20541#discussion_r693167654",
      "id" : 693167654,
      "in_reply_to_id" : 664332315,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY5MzE2NzY1NA==",
      "original_commit_id" : "775954ac5ffd2b0d6f89a5b35e4120f0d170c884",
      "original_line" : 2476,
      "original_position" : 56,
      "original_start_line" : 2475,
      "path" : "src/net_processing.cpp",
      "position" : null,
      "pull_request_review_id" : 735320504,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20541",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "updated_at" : "2021-08-20T19:17:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/693167654",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20541#discussion_r693167862"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20541"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/693167862"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Done (using `vRecv.ignore(8);` instead).",
      "commit_id" : "79aa69c08423c6dc86f15fbfcdd430307a906abd",
      "created_at" : "2021-08-20T19:17:51Z",
      "diff_hunk" : "@@ -2442,18 +2441,18 @@ void PeerManagerImpl::ProcessMessage(CNode& pfrom, const std::string& msg_type,\n         CAddress addrMe;\n         CAddress addrFrom;\n         uint64_t nNonce = 1;\n-        uint64_t nServiceInt;\n         ServiceFlags nServices;\n         int nVersion;\n         std::string cleanSubVer;\n         int starting_height = -1;\n         bool fRelay = true;\n \n-        vRecv >> nVersion >> nServiceInt >> nTime >> addrMe;\n+        vRecv >> nVersion >> Using<CustomUintFormatter<8>>(nServices) >> nTime;\n         if (nTime < 0) {\n             nTime = 0;\n         }\n-        nServices = ServiceFlags(nServiceInt);\n+        // The pre-31402 serialization of addrMe (which didn't include nTime):\n+        vRecv >> Using<CustomUintFormatter<8>>(addrMe.nServices) >> static_cast<CService&>(addrMe);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20541#discussion_r693167862",
      "id" : 693167862,
      "in_reply_to_id" : 664336347,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY5MzE2Nzg2Mg==",
      "original_commit_id" : "775954ac5ffd2b0d6f89a5b35e4120f0d170c884",
      "original_line" : 2455,
      "original_position" : 44,
      "original_start_line" : 2454,
      "path" : "src/net_processing.cpp",
      "position" : null,
      "pull_request_review_id" : 735320760,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20541",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "updated_at" : "2021-08-20T19:17:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/693167862",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20541#discussion_r693167932"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20541"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/693167932"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Done.",
      "commit_id" : "79aa69c08423c6dc86f15fbfcdd430307a906abd",
      "created_at" : "2021-08-20T19:18:00Z",
      "diff_hunk" : "@@ -1040,19 +1040,18 @@ void PeerManagerImpl::PushNodeVersion(CNode& pnode, int64_t nTime)\n     NodeId nodeid = pnode.GetId();\n     CAddress addr = pnode.addr;\n \n-    CAddress addrYou = addr.IsRoutable() && !IsProxy(addr) && addr.IsAddrV1Compatible() ?\n-                           addr :\n-                           CAddress(CService(), addr.nServices);\n-    CAddress addrMe = CAddress(CService(), nLocalNodeServices);\n+    CService addr_you = addr.IsRoutable() && !IsProxy(addr) && addr.IsAddrV1Compatible() ? addr : CService();\n \n     const bool tx_relay = !m_ignore_incoming_txs && pnode.m_tx_relay != nullptr;\n-    m_connman.PushMessage(&pnode, CNetMsgMaker(INIT_PROTO_VERSION).Make(NetMsgType::VERSION, PROTOCOL_VERSION, (uint64_t)nLocalNodeServices, nTime, addrYou, addrMe,\n+    m_connman.PushMessage(&pnode, CNetMsgMaker(INIT_PROTO_VERSION).Make(NetMsgType::VERSION, PROTOCOL_VERSION, (uint64_t)nLocalNodeServices, nTime,",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20541#discussion_r693167932",
      "id" : 693167932,
      "in_reply_to_id" : 664347584,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY5MzE2NzkzMg==",
      "original_commit_id" : "775954ac5ffd2b0d6f89a5b35e4120f0d170c884",
      "original_line" : 1046,
      "original_position" : 12,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : null,
      "pull_request_review_id" : 735320855,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20541",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-08-20T19:18:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/693167932",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20541#discussion_r693168220"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20541"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/693168220"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I think they're useful for the time being, as I'd expect more descriptions and documentations of the protocol will keep referring to these fields as `CAddress`es.",
      "commit_id" : "79aa69c08423c6dc86f15fbfcdd430307a906abd",
      "created_at" : "2021-08-20T19:18:36Z",
      "diff_hunk" : "@@ -1040,19 +1040,18 @@ void PeerManagerImpl::PushNodeVersion(CNode& pnode, int64_t nTime)\n     NodeId nodeid = pnode.GetId();\n     CAddress addr = pnode.addr;\n \n-    CAddress addrYou = addr.IsRoutable() && !IsProxy(addr) && addr.IsAddrV1Compatible() ?\n-                           addr :\n-                           CAddress(CService(), addr.nServices);\n-    CAddress addrMe = CAddress(CService(), nLocalNodeServices);\n+    CService addr_you = addr.IsRoutable() && !IsProxy(addr) && addr.IsAddrV1Compatible() ? addr : CService();\n \n     const bool tx_relay = !m_ignore_incoming_txs && pnode.m_tx_relay != nullptr;\n-    m_connman.PushMessage(&pnode, CNetMsgMaker(INIT_PROTO_VERSION).Make(NetMsgType::VERSION, PROTOCOL_VERSION, (uint64_t)nLocalNodeServices, nTime, addrYou, addrMe,\n+    m_connman.PushMessage(&pnode, CNetMsgMaker(INIT_PROTO_VERSION).Make(NetMsgType::VERSION, PROTOCOL_VERSION, (uint64_t)nLocalNodeServices, nTime,\n+            (uint64_t)addr.nServices, addr_you, // Together the pre-version-31402 serialization of CAddress \"addrYou\" (without nTime)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20541#discussion_r693168220",
      "id" : 693168220,
      "in_reply_to_id" : 664349865,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY5MzE2ODIyMA==",
      "original_commit_id" : "775954ac5ffd2b0d6f89a5b35e4120f0d170c884",
      "original_line" : 1047,
      "original_position" : 13,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : null,
      "pull_request_review_id" : 735321289,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20541",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-08-20T19:18:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/693168220",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20541#discussion_r693358001"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20541"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/693358001"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nNonce uninitialized?",
      "commit_id" : "79aa69c08423c6dc86f15fbfcdd430307a906abd",
      "created_at" : "2021-08-21T13:56:46Z",
      "diff_hunk" : "@@ -2520,8 +2519,13 @@ void PeerManagerImpl::ProcessMessage(CNode& pfrom, const std::string& msg_type,\n             return;\n         }\n \n-        if (!vRecv.empty())\n-            vRecv >> addrFrom >> nNonce;\n+        if (!vRecv.empty()) {\n+            // The version message includes information about the sending node which we don't use:\n+            //   - 8 bytes (service bits)\n+            //   - 16 bytes (ipv6 address)\n+            //   - 2 bytes (port)\n+            vRecv.ignore(26);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20541#discussion_r693358001",
      "id" : 693358001,
      "line" : 2527,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY5MzM1ODAwMQ==",
      "original_commit_id" : "79aa69c08423c6dc86f15fbfcdd430307a906abd",
      "original_line" : 2527,
      "original_position" : 71,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : 71,
      "pull_request_review_id" : 735497704,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20541",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-08-21T14:00:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/693358001",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20541#discussion_r693358185"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20541"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/693358185"
         }
      },
      "author_association" : "MEMBER",
      "body" : "`uint64_t my_services{pnode.GetLocalServices()};` is shorter, safer, and looks better",
      "commit_id" : "79aa69c08423c6dc86f15fbfcdd430307a906abd",
      "created_at" : "2021-08-21T13:58:28Z",
      "diff_hunk" : "@@ -1087,25 +1087,25 @@ void PeerManagerImpl::PushNodeVersion(CNode& pnode, int64_t nTime)\n     // Note that pnode->GetLocalServices() is a reflection of the local\n     // services we were offering when the CNode object was created for this\n     // peer.\n-    ServiceFlags nLocalNodeServices = pnode.GetLocalServices();\n+    auto my_services = (uint64_t)pnode.GetLocalServices();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20541#discussion_r693358185",
      "id" : 693358185,
      "line" : 1090,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY5MzM1ODE4NQ==",
      "original_commit_id" : "79aa69c08423c6dc86f15fbfcdd430307a906abd",
      "original_line" : 1090,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : 5,
      "pull_request_review_id" : 735497704,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20541",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-08-21T14:00:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/693358185",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20541#discussion_r693358244"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20541"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/693358244"
         }
      },
      "author_association" : "MEMBER",
      "body" : "same",
      "commit_id" : "79aa69c08423c6dc86f15fbfcdd430307a906abd",
      "created_at" : "2021-08-21T13:59:43Z",
      "diff_hunk" : "@@ -1087,25 +1087,25 @@ void PeerManagerImpl::PushNodeVersion(CNode& pnode, int64_t nTime)\n     // Note that pnode->GetLocalServices() is a reflection of the local\n     // services we were offering when the CNode object was created for this\n     // peer.\n-    ServiceFlags nLocalNodeServices = pnode.GetLocalServices();\n+    auto my_services = (uint64_t)pnode.GetLocalServices();\n     uint64_t nonce = pnode.GetLocalNonce();\n     const int nNodeStartingHeight{m_best_height};\n     NodeId nodeid = pnode.GetId();\n     CAddress addr = pnode.addr;\n \n-    CAddress addrYou = addr.IsRoutable() && !IsProxy(addr) && addr.IsAddrV1Compatible() ?\n-                           addr :\n-                           CAddress(CService(), addr.nServices);\n-    CAddress addrMe = CAddress(CService(), nLocalNodeServices);\n+    CService addr_you = addr.IsRoutable() && !IsProxy(addr) && addr.IsAddrV1Compatible() ? addr : CService();\n+    auto your_services = (uint64_t)addr.nServices;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20541#discussion_r693358244",
      "id" : 693358244,
      "line" : 1097,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY5MzM1ODI0NA==",
      "original_commit_id" : "79aa69c08423c6dc86f15fbfcdd430307a906abd",
      "original_line" : 1097,
      "original_position" : 16,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : 16,
      "pull_request_review_id" : 735497704,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20541",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-08-21T14:00:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/693358244",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20541#discussion_r693416005"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20541"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/693416005"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Done.",
      "commit_id" : "75290ae61e37f9b7c432b59d03eca6f07f7529cd",
      "created_at" : "2021-08-21T23:53:11Z",
      "diff_hunk" : "@@ -1087,25 +1087,25 @@ void PeerManagerImpl::PushNodeVersion(CNode& pnode, int64_t nTime)\n     // Note that pnode->GetLocalServices() is a reflection of the local\n     // services we were offering when the CNode object was created for this\n     // peer.\n-    ServiceFlags nLocalNodeServices = pnode.GetLocalServices();\n+    auto my_services = (uint64_t)pnode.GetLocalServices();\n     uint64_t nonce = pnode.GetLocalNonce();\n     const int nNodeStartingHeight{m_best_height};\n     NodeId nodeid = pnode.GetId();\n     CAddress addr = pnode.addr;\n \n-    CAddress addrYou = addr.IsRoutable() && !IsProxy(addr) && addr.IsAddrV1Compatible() ?\n-                           addr :\n-                           CAddress(CService(), addr.nServices);\n-    CAddress addrMe = CAddress(CService(), nLocalNodeServices);\n+    CService addr_you = addr.IsRoutable() && !IsProxy(addr) && addr.IsAddrV1Compatible() ? addr : CService();\n+    auto your_services = (uint64_t)addr.nServices;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20541#discussion_r693416005",
      "id" : 693416005,
      "in_reply_to_id" : 693358244,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY5MzQxNjAwNQ==",
      "original_commit_id" : "79aa69c08423c6dc86f15fbfcdd430307a906abd",
      "original_line" : 1097,
      "original_position" : 16,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : null,
      "pull_request_review_id" : 735527857,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20541",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-08-21T23:53:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/693416005",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20541#discussion_r693416011"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20541"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/693416011"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Fixed.",
      "commit_id" : "75290ae61e37f9b7c432b59d03eca6f07f7529cd",
      "created_at" : "2021-08-21T23:53:21Z",
      "diff_hunk" : "@@ -2520,8 +2519,13 @@ void PeerManagerImpl::ProcessMessage(CNode& pfrom, const std::string& msg_type,\n             return;\n         }\n \n-        if (!vRecv.empty())\n-            vRecv >> addrFrom >> nNonce;\n+        if (!vRecv.empty()) {\n+            // The version message includes information about the sending node which we don't use:\n+            //   - 8 bytes (service bits)\n+            //   - 16 bytes (ipv6 address)\n+            //   - 2 bytes (port)\n+            vRecv.ignore(26);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20541#discussion_r693416011",
      "id" : 693416011,
      "in_reply_to_id" : 693358001,
      "line" : 2527,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY5MzQxNjAxMQ==",
      "original_commit_id" : "79aa69c08423c6dc86f15fbfcdd430307a906abd",
      "original_line" : 2527,
      "original_position" : 71,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : 71,
      "pull_request_review_id" : 735527864,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20541",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-08-21T23:53:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/693416011",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20541#discussion_r693416029"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20541"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/693416029"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Agree, done.",
      "commit_id" : "75290ae61e37f9b7c432b59d03eca6f07f7529cd",
      "created_at" : "2021-08-21T23:53:30Z",
      "diff_hunk" : "@@ -1087,25 +1087,25 @@ void PeerManagerImpl::PushNodeVersion(CNode& pnode, int64_t nTime)\n     // Note that pnode->GetLocalServices() is a reflection of the local\n     // services we were offering when the CNode object was created for this\n     // peer.\n-    ServiceFlags nLocalNodeServices = pnode.GetLocalServices();\n+    auto my_services = (uint64_t)pnode.GetLocalServices();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20541#discussion_r693416029",
      "id" : 693416029,
      "in_reply_to_id" : 693358185,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY5MzQxNjAyOQ==",
      "original_commit_id" : "79aa69c08423c6dc86f15fbfcdd430307a906abd",
      "original_line" : 1090,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : null,
      "pull_request_review_id" : 735527874,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20541",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-08-21T23:53:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/693416029",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20541#discussion_r693515258"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20541"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/693515258"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit, can be const\r\n```diff\r\n-    uint64_t my_services{pnode.GetLocalServices()};\r\n-    uint64_t nonce = pnode.GetLocalNonce();\r\n+    const uint64_t my_services{pnode.GetLocalServices()};\r\n+    const uint64_t nonce{pnode.GetLocalNonce()};\r\n     const int nNodeStartingHeight{m_best_height};\r\n-    NodeId nodeid = pnode.GetId();\r\n+    const NodeId nodeid{pnode.GetId()};\r\n     CAddress addr = pnode.addr;\r\n \r\n-    CService addr_you = addr.IsRoutable() && !IsProxy(addr) && addr.IsAddrV1Compatible() ? addr : CService();\r\n-    uint64_t your_services{addr.nServices};\r\n+    const CService addr_you{addr.IsRoutable() && !IsProxy(addr) && addr.IsAddrV1Compatible() ? addr : CService()};\r\n+    const uint64_t your_services{addr.nServices};\r\n```\r\n",
      "commit_id" : "75290ae61e37f9b7c432b59d03eca6f07f7529cd",
      "created_at" : "2021-08-22T15:04:40Z",
      "diff_hunk" : "@@ -1087,25 +1087,25 @@ void PeerManagerImpl::PushNodeVersion(CNode& pnode, int64_t nTime)\n     // Note that pnode->GetLocalServices() is a reflection of the local\n     // services we were offering when the CNode object was created for this\n     // peer.\n-    ServiceFlags nLocalNodeServices = pnode.GetLocalServices();\n+    uint64_t my_services{pnode.GetLocalServices()};\n     uint64_t nonce = pnode.GetLocalNonce();\n     const int nNodeStartingHeight{m_best_height};\n     NodeId nodeid = pnode.GetId();\n     CAddress addr = pnode.addr;\n \n-    CAddress addrYou = addr.IsRoutable() && !IsProxy(addr) && addr.IsAddrV1Compatible() ?\n-                           addr :\n-                           CAddress(CService(), addr.nServices);\n-    CAddress addrMe = CAddress(CService(), nLocalNodeServices);\n+    CService addr_you = addr.IsRoutable() && !IsProxy(addr) && addr.IsAddrV1Compatible() ? addr : CService();\n+    uint64_t your_services{addr.nServices};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20541#discussion_r693515258",
      "id" : 693515258,
      "line" : 1097,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY5MzUxNTI1OA==",
      "original_commit_id" : "75290ae61e37f9b7c432b59d03eca6f07f7529cd",
      "original_line" : 1097,
      "original_position" : 16,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : 16,
      "pull_request_review_id" : 735585657,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20541",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-08-22T15:07:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/693515258",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20541#discussion_r694032533"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20541"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/694032533"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Will include this if I have to retouch for other reasons.",
      "commit_id" : "75290ae61e37f9b7c432b59d03eca6f07f7529cd",
      "created_at" : "2021-08-23T14:37:34Z",
      "diff_hunk" : "@@ -1087,25 +1087,25 @@ void PeerManagerImpl::PushNodeVersion(CNode& pnode, int64_t nTime)\n     // Note that pnode->GetLocalServices() is a reflection of the local\n     // services we were offering when the CNode object was created for this\n     // peer.\n-    ServiceFlags nLocalNodeServices = pnode.GetLocalServices();\n+    uint64_t my_services{pnode.GetLocalServices()};\n     uint64_t nonce = pnode.GetLocalNonce();\n     const int nNodeStartingHeight{m_best_height};\n     NodeId nodeid = pnode.GetId();\n     CAddress addr = pnode.addr;\n \n-    CAddress addrYou = addr.IsRoutable() && !IsProxy(addr) && addr.IsAddrV1Compatible() ?\n-                           addr :\n-                           CAddress(CService(), addr.nServices);\n-    CAddress addrMe = CAddress(CService(), nLocalNodeServices);\n+    CService addr_you = addr.IsRoutable() && !IsProxy(addr) && addr.IsAddrV1Compatible() ? addr : CService();\n+    uint64_t your_services{addr.nServices};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20541#discussion_r694032533",
      "id" : 694032533,
      "in_reply_to_id" : 693515258,
      "line" : 1097,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY5NDAzMjUzMw==",
      "original_commit_id" : "75290ae61e37f9b7c432b59d03eca6f07f7529cd",
      "original_line" : 1097,
      "original_position" : 16,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : 16,
      "pull_request_review_id" : 736204524,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20541",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-08-23T14:37:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/694032533",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "crACK",
      "created_at" : "2021-08-23T16:20:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20541#issuecomment-903921493",
      "id" : 903921493,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20541",
      "node_id" : "IC_kwDOABII58414L9V",
      "performed_via_github_app" : null,
      "updated_at" : "2021-08-23T16:20:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/903921493",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20541#discussion_r695873779"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20541"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/695873779"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Thanks for teaching me about `CDataStream.ignore()`!",
      "commit_id" : "75290ae61e37f9b7c432b59d03eca6f07f7529cd",
      "created_at" : "2021-08-25T15:35:18Z",
      "diff_hunk" : "@@ -2472,8 +2471,11 @@ void PeerManagerImpl::ProcessMessage(CNode& pfrom, const std::string& msg_type,\n             return;\n         }\n \n-        if (!vRecv.empty())\n-            vRecv >> addrFrom >> nNonce;\n+        if (!vRecv.empty()) {\n+            // The pre-31402 serialization of addrFrom (which didn't include nTime).\n+            vRecv >> Using<CustomUintFormatter<8>>(addrFrom.nServices) >> static_cast<CService&>(addrFrom);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20541#discussion_r695873779",
      "id" : 695873779,
      "in_reply_to_id" : 664332315,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY5NTg3Mzc3OQ==",
      "original_commit_id" : "775954ac5ffd2b0d6f89a5b35e4120f0d170c884",
      "original_line" : 2476,
      "original_position" : 56,
      "original_start_line" : 2475,
      "path" : "src/net_processing.cpp",
      "position" : null,
      "pull_request_review_id" : 738515537,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20541",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "updated_at" : "2021-08-25T15:35:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/695873779",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20541#discussion_r695874141"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20541"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/695874141"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Seems reasonable",
      "commit_id" : "75290ae61e37f9b7c432b59d03eca6f07f7529cd",
      "created_at" : "2021-08-25T15:35:44Z",
      "diff_hunk" : "@@ -1040,19 +1040,18 @@ void PeerManagerImpl::PushNodeVersion(CNode& pnode, int64_t nTime)\n     NodeId nodeid = pnode.GetId();\n     CAddress addr = pnode.addr;\n \n-    CAddress addrYou = addr.IsRoutable() && !IsProxy(addr) && addr.IsAddrV1Compatible() ?\n-                           addr :\n-                           CAddress(CService(), addr.nServices);\n-    CAddress addrMe = CAddress(CService(), nLocalNodeServices);\n+    CService addr_you = addr.IsRoutable() && !IsProxy(addr) && addr.IsAddrV1Compatible() ? addr : CService();\n \n     const bool tx_relay = !m_ignore_incoming_txs && pnode.m_tx_relay != nullptr;\n-    m_connman.PushMessage(&pnode, CNetMsgMaker(INIT_PROTO_VERSION).Make(NetMsgType::VERSION, PROTOCOL_VERSION, (uint64_t)nLocalNodeServices, nTime, addrYou, addrMe,\n+    m_connman.PushMessage(&pnode, CNetMsgMaker(INIT_PROTO_VERSION).Make(NetMsgType::VERSION, PROTOCOL_VERSION, (uint64_t)nLocalNodeServices, nTime,\n+            (uint64_t)addr.nServices, addr_you, // Together the pre-version-31402 serialization of CAddress \"addrYou\" (without nTime)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20541#discussion_r695874141",
      "id" : 695874141,
      "in_reply_to_id" : 664349865,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY5NTg3NDE0MQ==",
      "original_commit_id" : "775954ac5ffd2b0d6f89a5b35e4120f0d170c884",
      "original_line" : 1047,
      "original_position" : 13,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : null,
      "pull_request_review_id" : 738516016,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20541",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-08-25T15:35:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/695874141",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Code review ACK 75290ae61e37f9b7c432b59d03eca6f07f7529cd\r\n\r\nThe comment here:\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/75290ae61e37f9b7c432b59d03eca6f07f7529cd/src/protocol.h#L439\r\n\r\nCan probably be removed at this point.",
      "created_at" : "2021-08-25T15:47:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20541#issuecomment-905635787",
      "id" : 905635787,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20541",
      "node_id" : "IC_kwDOABII5841-ufL",
      "performed_via_github_app" : null,
      "updated_at" : "2021-08-25T15:47:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/905635787",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "#22780 ",
      "created_at" : "2021-08-25T15:49:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20541#issuecomment-905638156",
      "id" : 905638156,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20541",
      "node_id" : "IC_kwDOABII5841-vEM",
      "performed_via_github_app" : null,
      "updated_at" : "2021-08-25T15:49:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/905638156",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   }
]
