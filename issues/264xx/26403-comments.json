[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2022-10-27T20:49:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26403#issuecomment-1294047097",
      "id" : 1294047097,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26403",
      "node_id" : "IC_kwDOABII585NIZd5",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1294047097/reactions"
      },
      "updated_at" : "2022-10-27T20:49:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1294047097",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage\nFor detailed information about the code coverage, see the [test coverage report](https://corecheck.dev/bitcoin/bitcoin/pulls/26403).\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Concept NACK | [luke-jr](https://github.com/bitcoin/bitcoin/pull/26403#issuecomment-1304571085) |\n\nIf your review is incorrectly listed, please react with ð to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#bitcoin-core/gui/650](https://github.com/bitcoin-core/gui/pull/650) (Add Import to Wallet GUI by KolbyML)\n* [#28246](https://github.com/bitcoin/bitcoin/pull/28246) (wallet: Use CTxDestination in CRecipient instead of just scriptPubKey by achow101)\n* [#28244](https://github.com/bitcoin/bitcoin/pull/28244) (Break up script/standard.{h/cpp} by achow101)\n* [#28217](https://github.com/bitcoin/bitcoin/pull/28217) (set `DEFAULT_PERMIT_BAREMULTISIG` to false by Retropex)\n* [#28201](https://github.com/bitcoin/bitcoin/pull/28201) (Silent Payments: sending by josibake)\n* [#28126](https://github.com/bitcoin/bitcoin/pull/28126) (wallet legacy: bugfix, disallow importing invalid scripts via importaddress by furszy)\n* [#28122](https://github.com/bitcoin/bitcoin/pull/28122) (Silent Payments: Implement BIP352 by josibake)\n* [#28031](https://github.com/bitcoin/bitcoin/pull/28031) (Package Relay 1/3: Introduce TxPackageTracker as Orphan Resolution Module by glozow)\n* [#27827](https://github.com/bitcoin/bitcoin/pull/27827) (Silent Payments: send and receive by josibake)\n* [#27432](https://github.com/bitcoin/bitcoin/pull/27432) (contrib: add tool to convert compact-serialized UTXO set to SQLite database by theStack)\n* [#26840](https://github.com/bitcoin/bitcoin/pull/26840) (refactor: importpubkey, importprivkey, importaddress, importmulti, and importdescriptors rpc by KolbyML)\n* [#26711](https://github.com/bitcoin/bitcoin/pull/26711) (validate package transactions with their in-package ancestor sets by glozow)\n* [#26451](https://github.com/bitcoin/bitcoin/pull/26451) (Enforce incentive compatibility for all RBF replacements by sdaftuar)\n* [#20892](https://github.com/bitcoin/bitcoin/pull/20892) (tests: Run both descriptor and legacy tests within a single test invocation by achow101)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "created_at" : "2022-11-04T12:16:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26403#issuecomment-1303387916",
      "id" : 1303387916,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26403",
      "node_id" : "IC_kwDOABII585NsB8M",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1303387916/reactions"
      },
      "updated_at" : "2023-10-31T18:13:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1303387916",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept NACK as a mere policy. Without consensus enforcement, cost is a full UTXO which may potentially never be spent. `OP_TRUE` does not have a weight that reflects this high cost.",
      "created_at" : "2022-11-05T15:48:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26403#issuecomment-1304571085",
      "id" : 1304571085,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26403",
      "node_id" : "IC_kwDOABII585NwizN",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1304571085/reactions"
      },
      "updated_at" : "2022-11-05T15:48:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1304571085",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@luke-jr Can you elaborate more on what the potential issues are?\r\n\r\nThis policy defines that any transaction with such an output must be 0-fee, which means there's little incentive to mine it on its own, but only as part of a CPFP spend of that output.\r\n\r\nAssuming the PR is correct and being run on the network, there should be no way(aside from miners prioritizing the parent explicitly) to leaving the utxo in the uxto set. Prioritizing the parent could also be disallowed easily.\r\n",
      "created_at" : "2022-11-05T17:48:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26403#issuecomment-1304599580",
      "id" : 1304599580,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26403",
      "node_id" : "IC_kwDOABII585Nwpwc",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1304599580/reactions"
      },
      "updated_at" : "2022-11-05T17:48:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1304599580",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "The main issue I see is that it has a very low weight, but rather high cost. There is no consensus rule requiring it to be spent immediately.\r\n\r\nCouldn't it be CPFP'd by spending another of its outputs?",
      "created_at" : "2022-11-05T17:55:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26403#issuecomment-1304600697",
      "id" : 1304600697,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26403",
      "node_id" : "IC_kwDOABII585NwqB5",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1304600697/reactions"
      },
      "updated_at" : "2022-11-05T17:55:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1304600697",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "The argument here is that dust limits are already policy only, and this is basically a \"cut-through\" of  potentially dust outputs. It's no practical change of dust policy, except in the case where a miner prioritizes a parent tx with this kind of output after its included in mempool(it's in the test cases)",
      "created_at" : "2022-11-06T13:11:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26403#issuecomment-1304798730",
      "id" : 1304798730,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26403",
      "node_id" : "IC_kwDOABII585NxaYK",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1304798730/reactions"
      },
      "updated_at" : "2022-11-06T13:11:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1304798730",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@luke-jr  either you do a consensus fork and everything that entails for something like tx sponsors, or your enable in policy only something like ephemeral anchors.\r\n\r\nOne option that could be taken would be to make the OP_TRUE script contain an upgradable NOP that we document as reserved to in the future treat as a pre-execution parsed flag with a consensus must-spend rule, and then we'd be able to (if there was wide adoption of ephemeral anchors and we saw utxo bloat) add a consensus rule to enforce them as must-spend.",
      "created_at" : "2022-11-06T16:38:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26403#issuecomment-1304840655",
      "id" : 1304840655,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26403",
      "node_id" : "IC_kwDOABII585NxknP",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1304840655/reactions"
      },
      "updated_at" : "2022-11-06T16:38:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1304840655",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/886523?v=4",
         "events_url" : "https://api.github.com/users/JeremyRubin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JeremyRubin/followers",
         "following_url" : "https://api.github.com/users/JeremyRubin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JeremyRubin",
         "id" : 886523,
         "login" : "JeremyRubin",
         "node_id" : "MDQ6VXNlcjg4NjUyMw==",
         "organizations_url" : "https://api.github.com/users/JeremyRubin/orgs",
         "received_events_url" : "https://api.github.com/users/JeremyRubin/received_events",
         "repos_url" : "https://api.github.com/users/JeremyRubin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JeremyRubin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JeremyRubin"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : ">One option that could be taken would be to make the OP_TRUE script contain an upgradable NOP that we document as reserved to in the future treat as a pre-execution parsed flag with a consensus must-spend rule, and then we'd be able to (if there was wide adoption of ephemeral anchors and we saw utxo bloat) add a consensus rule to enforce them as must-spend.\r\n\r\nI think this would be better, since it allows a real OP_TRUE to be given a more cost-based weight in a future softfork.",
      "created_at" : "2022-11-06T17:51:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26403#issuecomment-1304855940",
      "id" : 1304855940,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26403",
      "node_id" : "IC_kwDOABII585NxoWE",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1304855940/reactions"
      },
      "updated_at" : "2022-11-06T17:51:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1304855940",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "It would also be possible to deploy a consensus change to treat them as unspendable, unless they are spent in the block they are created in, but it seems odd to enforce policy with consensus, and this is likely the wrong thread to discuss anyway.",
      "created_at" : "2022-11-07T09:40:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26403#issuecomment-1305341880",
      "id" : 1305341880,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26403",
      "node_id" : "IC_kwDOABII585Nze-4",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1305341880/reactions"
      },
      "updated_at" : "2022-11-07T09:40:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1305341880",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@MarcoFalke that is an inverse timelock, which has nasty consequences for reorg safety and dependent transactions.\r\n\r\n",
      "created_at" : "2022-11-07T17:09:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26403#issuecomment-1305925765",
      "id" : 1305925765,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26403",
      "node_id" : "IC_kwDOABII585N1tiF",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1305925765/reactions"
      },
      "updated_at" : "2022-11-07T17:09:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1305925765",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/886523?v=4",
         "events_url" : "https://api.github.com/users/JeremyRubin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JeremyRubin/followers",
         "following_url" : "https://api.github.com/users/JeremyRubin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JeremyRubin",
         "id" : 886523,
         "login" : "JeremyRubin",
         "node_id" : "MDQ6VXNlcjg4NjUyMw==",
         "organizations_url" : "https://api.github.com/users/JeremyRubin/orgs",
         "received_events_url" : "https://api.github.com/users/JeremyRubin/received_events",
         "repos_url" : "https://api.github.com/users/JeremyRubin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JeremyRubin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JeremyRubin"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@JeremyRubin including a NOP would just be to not \"camp\" a raw single byte value push for a future soft fork? Making sure I didn't miss the underlying motivation.",
      "created_at" : "2022-11-07T17:16:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26403#issuecomment-1305935869",
      "id" : 1305935869,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26403",
      "node_id" : "IC_kwDOABII585N1v_9",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1305935869/reactions"
      },
      "updated_at" : "2022-11-07T17:16:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1305935869",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "more or less, you might also be able to do a min byte segwit v1 script (2 bytes?) or something else similar too.\r\n\r\nOtherwise you end up with some \"specific script template matching upgrade\", which is IMO messy & risks being uneccessarily confiscatory.",
      "created_at" : "2022-11-07T17:20:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26403#issuecomment-1305940407",
      "id" : 1305940407,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26403",
      "node_id" : "IC_kwDOABII585N1xG3",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1305940407/reactions"
      },
      "updated_at" : "2022-11-07T17:29:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1305940407",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/886523?v=4",
         "events_url" : "https://api.github.com/users/JeremyRubin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JeremyRubin/followers",
         "following_url" : "https://api.github.com/users/JeremyRubin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JeremyRubin",
         "id" : 886523,
         "login" : "JeremyRubin",
         "node_id" : "MDQ6VXNlcjg4NjUyMw==",
         "organizations_url" : "https://api.github.com/users/JeremyRubin/orgs",
         "received_events_url" : "https://api.github.com/users/JeremyRubin/received_events",
         "repos_url" : "https://api.github.com/users/JeremyRubin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JeremyRubin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JeremyRubin"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Camping an OP_NOP and preventing it from being used for any other future soft fork seems worse than camping OP_TRUE.\r\n\r\nIf in the future we have a soft fork that makes small scriptPubKeys more costly to limit utxo bloat with an exemption for ephmeral outputs that are spent in the same block, which should just apply both rules to all scriptPubKeys, whether they're OP_TRUE, OP_2, or OP_NOP5 OP_TRUE...",
      "created_at" : "2022-11-09T08:25:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26403#issuecomment-1308383635",
      "id" : 1308383635,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26403",
      "node_id" : "IC_kwDOABII585N_FmT",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1308383635/reactions"
      },
      "updated_at" : "2022-11-09T08:25:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1308383635",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n",
      "created_at" : "2022-11-28T13:11:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26403#issuecomment-1329068122",
      "id" : 1329068122,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26403",
      "node_id" : "IC_kwDOABII585PN_ha",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1329068122/reactions"
      },
      "updated_at" : "2022-11-28T13:11:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1329068122",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I'll rebase on top of https://github.com/bitcoin/bitcoin/pull/25038 once it leaves draft mode, since I have to update my tests to new V3 packages.",
      "created_at" : "2022-12-16T18:02:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26403#issuecomment-1355328683",
      "id" : 1355328683,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26403",
      "node_id" : "IC_kwDOABII585QyKyr",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1355328683/reactions"
      },
      "updated_at" : "2022-12-16T18:02:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1355328683",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "What will happen at the p2p level, if the attacker manages to submit a transaction with ephemeral outputs to many nodes but without a child?\r\n\r\nIt looks like its wtxid will make it into `m_recent_rejects`, and then the network won't reconsider the tx even when the child is attached?",
      "created_at" : "2023-01-03T10:32:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26403#issuecomment-1369610582",
      "id" : 1369610582,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26403",
      "node_id" : "IC_kwDOABII585RoplW",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1369610582/reactions"
      },
      "updated_at" : "2023-01-03T10:32:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1369610582",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7975071?v=4",
         "events_url" : "https://api.github.com/users/naumenkogs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/naumenkogs/followers",
         "following_url" : "https://api.github.com/users/naumenkogs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/naumenkogs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/naumenkogs",
         "id" : 7975071,
         "login" : "naumenkogs",
         "node_id" : "MDQ6VXNlcjc5NzUwNzE=",
         "organizations_url" : "https://api.github.com/users/naumenkogs/orgs",
         "received_events_url" : "https://api.github.com/users/naumenkogs/received_events",
         "repos_url" : "https://api.github.com/users/naumenkogs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/naumenkogs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/naumenkogs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/naumenkogs"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@naumenkogs Ideally I would hope it would be treated like any other too-low-fee transaction, and be re-evaluated again in the package context. I'll double check, thanks!",
      "created_at" : "2023-01-03T15:39:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26403#issuecomment-1369914667",
      "id" : 1369914667,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26403",
      "node_id" : "IC_kwDOABII585Rpz0r",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1369914667/reactions"
      },
      "updated_at" : "2023-01-03T15:39:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1369914667",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26403#discussion_r1060746035"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26403"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1060746035"
         }
      },
      "author_association" : "MEMBER",
      "body" : "todo: double-check we can't get blinded to a parent tx if submitted separately",
      "commit_id" : "62f020d2dec7ffc88ffb94d4f53c801f9568ad64",
      "created_at" : "2023-01-03T16:23:55Z",
      "diff_hunk" : "@@ -0,0 +1,341 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2022 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+from decimal import Decimal\n+\n+from test_framework.messages import (\n+    COIN,\n+    CTxOut,\n+    MAX_BIP125_RBF_SEQUENCE,\n+)\n+from test_framework.script import (\n+    CScript,\n+    OP_2,\n+)\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import (\n+    assert_equal,\n+    assert_raises_rpc_error,\n+)\n+from test_framework.wallet import (\n+    DEFAULT_FEE,\n+    MiniWallet,\n+)\n+\n+class EphemeralAnchorTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.num_nodes = 1\n+        self.setup_clean_chain = True\n+\n+    def assert_mempool_contents(self, expected=None, unexpected=None):\n+        \"\"\"Assert that all transactions in expected are in the mempool,\n+        and all transactions in unexpected are not in the mempool.\n+        \"\"\"\n+        if not expected:\n+            expected = []\n+        if not unexpected:\n+            unexpected = []\n+        assert set(unexpected).isdisjoint(expected)\n+        mempool = self.nodes[0].getrawmempool(verbose=False)\n+        for tx in expected:\n+            assert tx.rehash() in mempool\n+        for tx in unexpected:\n+            assert tx.rehash() not in mempool\n+\n+    def create_simple_package(self, parent_coins, parent_fee=0, child_fee=DEFAULT_FEE, heavy_child=False, version=3, spend_anchors=1, additional_outputs=None):\n+        \"\"\"Create a child-with-parents package using the parent_coins passed in.\n+        Each coin in parent_coins will be used to fund 1 parent transaction.\n+        Each parent will have 1 output. The parents' outputs will be used to fund 1 child\n+        transaction. Thus, the package will contain len(parent_coins) + 1 transactions.\n+        All transactions signal BIP125 replaceability, but nSequence changes based on self.ctr.\n+\n+        returns tuple (hex serialized txns, CTransaction objects)\n+        \"\"\"\n+\n+        if additional_outputs is None:\n+            additional_outputs=[CTxOut(0, CScript([OP_2]))]\n+\n+        self.ctr += 1\n+        package_hex = []\n+        package_txns = []\n+        child_inputs = []\n+        # Use fee_rate=0 because create_self_transfer will use the default fee_rate value otherwise.\n+        # Passing in fee>0 overrides fee_rate, so this still works for non-zero parent_fee.\n+        for i, coin in enumerate(parent_coins):\n+            parent_result = self.wallet.create_self_transfer(\n+                fee_rate=0,\n+                fee=parent_fee,\n+                utxo_to_spend=coin,\n+                sequence=MAX_BIP125_RBF_SEQUENCE, # We want same parents, don't use ctr\n+                version=version,\n+                additional_outputs=additional_outputs,\n+            )\n+            child_inputs.append(parent_result[\"new_utxo\"])\n+            # Add ephemeral anchors, or just some, or none depending on situation\n+            if spend_anchors == 1 or (spend_anchors == 2 and i % 2 == 0):\n+                for vout, output in enumerate(additional_outputs):\n+                    child_inputs.append({**parent_result[\"new_utxo\"], 'vout': vout+1, 'value': Decimal(output.nValue)/COIN, 'anchor': True})\n+            package_hex.append(parent_result[\"hex\"])\n+            package_txns.append(parent_result[\"tx\"])\n+\n+        num_child_outputs = 10 if heavy_child else 1\n+        child_result = self.wallet.create_self_transfer_multi(\n+            utxos_to_spend=child_inputs,\n+            num_outputs=num_child_outputs,\n+            fee_per_output=int(child_fee * COIN // num_child_outputs),\n+            sequence=MAX_BIP125_RBF_SEQUENCE - self.ctr, # We still want different child\n+            version=version\n+        )\n+        package_hex.append(child_result[\"hex\"])\n+        package_txns.append(child_result[\"tx\"])\n+        return package_hex, package_txns\n+\n+    def run_test(self):\n+        # Counter used to count the number of times we constructed packages. Since we're constructing parent transactions with the same\n+        # coins (to create conflicts), and giving them the same fee (i.e. 0, since their respective children are paying), we might\n+        # accidentally just create the exact same transaction again. To prevent this, set nSequences to MAX_BIP125_RBF_SEQUENCE - self.ctr.\n+        self.ctr = 0\n+\n+        self.log.info(\"Generate blocks to create UTXOs\")\n+        node = self.nodes[0]\n+        self.wallet = MiniWallet(node)\n+        self.generate(self.wallet, 160)\n+        self.coins = self.wallet.get_utxos(mark_as_spent=False)\n+        # Mature coinbase transactions\n+        self.generate(self.wallet, 100)\n+        self.address = self.wallet.get_address()\n+\n+        self.test_unspent_ephemeral()\n+        self.test_fee_having_parent()\n+        self.test_multianchor()\n+        self.test_nonzero_anchor()\n+        self.test_prioritise_parent()\n+        self.test_xor_rbf()\n+\n+    def test_unspent_ephemeral(self):\n+        self.log.info(\"Test that ephemeral outputs of any value are disallowed if not spent in a package\")\n+        node = self.nodes[0]\n+        # Reuse the same coins so that the transactions conflict with one another.\n+        num_parents = 2\n+        parent_coins = self.coins[:num_parents]\n+        del self.coins[:num_parents]\n+\n+        # Submit whole package, but no anchors are spent\n+        package_hex0, package_txns0 = self.create_simple_package(parent_coins=parent_coins, parent_fee=0, child_fee=DEFAULT_FEE, version=3, spend_anchors=0)\n+        assert_raises_rpc_error(-26, \"missing-ephemeral-spends\", node.submitpackage, package_hex0)\n+        assert_equal(node.getrawmempool(), [])\n+\n+        # Submit whole package, but half anchors are spent\n+        package_hex1, package_txns1 = self.create_simple_package(parent_coins=parent_coins, parent_fee=0, child_fee=DEFAULT_FEE, version=3, spend_anchors=2)\n+        assert_raises_rpc_error(-26, \"missing-ephemeral-spends\", node.submitpackage, package_hex1)\n+        assert_equal(node.getrawmempool(), [])\n+\n+        # Submit whole package with all anchors spent, but wrong version!\n+        package_hex2, package_txns2 = self.create_simple_package(parent_coins=parent_coins, parent_fee=0, child_fee=DEFAULT_FEE, version=2)\n+        assert_raises_rpc_error(-26, \"wrong-ephemeral-nversion\", node.submitpackage, package_hex2)\n+        assert_equal(node.getrawmempool(), [])\n+\n+        # One more time, correct nversions\n+        package_hex3, package_txns3 = self.create_simple_package(parent_coins=parent_coins, parent_fee=0, child_fee=DEFAULT_FEE, version=3)\n+        node.submitpackage(package_hex3)\n+        self.assert_mempool_contents(expected=package_txns3, unexpected=[])\n+\n+        # Same parent coins/txs, don't spend all anchors, with same parent! Should reject RBF.\n+        package_hex4, package_txns4 = self.create_simple_package(parent_coins=parent_coins, parent_fee=0, child_fee=DEFAULT_FEE*2, version=3, spend_anchors=2)\n+        assert_raises_rpc_error(-26, \"v3-tx-nonstandard\", node.submitpackage, package_hex4)\n+        self.assert_mempool_contents(expected=package_txns3, unexpected=[])\n+\n+        # All ephemeral anchors this time, make sure old child evicted\n+        package_hex5, package_txns5 = self.create_simple_package(parent_coins=parent_coins, parent_fee=0, child_fee=DEFAULT_FEE*2, version=3)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26403#discussion_r1060746035",
      "id" : 1060746035,
      "line" : 151,
      "node_id" : "PRRC_kwDOABII584_ObMz",
      "original_commit_id" : "62f020d2dec7ffc88ffb94d4f53c801f9568ad64",
      "original_line" : 151,
      "original_position" : 151,
      "original_start_line" : null,
      "path" : "test/functional/mempool_ephemeral_anchor.py",
      "position" : 151,
      "pull_request_review_id" : 1234795477,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26403",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1060746035/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2023-01-03T16:23:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1060746035",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26403#discussion_r1063617319"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26403"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1063617319"
         }
      },
      "author_association" : "MEMBER",
      "body" : "fwiw with package relay the plan is to add a separate rejects cache for transactions that failed but are eligible for reconsideration if submitted with another transaction. We wouldn't validate/download these again by themselves (renews on every change in chain tip similar to recent rejects), but will reconsider if submitted with another tx. It's intended for these kinds of situations, where a parent needs a child to be valid.",
      "commit_id" : "04778d12898e226c0818b3317ac83cddd8348777",
      "created_at" : "2023-01-06T17:05:56Z",
      "diff_hunk" : "@@ -0,0 +1,341 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2022 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+from decimal import Decimal\n+\n+from test_framework.messages import (\n+    COIN,\n+    CTxOut,\n+    MAX_BIP125_RBF_SEQUENCE,\n+)\n+from test_framework.script import (\n+    CScript,\n+    OP_2,\n+)\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import (\n+    assert_equal,\n+    assert_raises_rpc_error,\n+)\n+from test_framework.wallet import (\n+    DEFAULT_FEE,\n+    MiniWallet,\n+)\n+\n+class EphemeralAnchorTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.num_nodes = 1\n+        self.setup_clean_chain = True\n+\n+    def assert_mempool_contents(self, expected=None, unexpected=None):\n+        \"\"\"Assert that all transactions in expected are in the mempool,\n+        and all transactions in unexpected are not in the mempool.\n+        \"\"\"\n+        if not expected:\n+            expected = []\n+        if not unexpected:\n+            unexpected = []\n+        assert set(unexpected).isdisjoint(expected)\n+        mempool = self.nodes[0].getrawmempool(verbose=False)\n+        for tx in expected:\n+            assert tx.rehash() in mempool\n+        for tx in unexpected:\n+            assert tx.rehash() not in mempool\n+\n+    def create_simple_package(self, parent_coins, parent_fee=0, child_fee=DEFAULT_FEE, heavy_child=False, version=3, spend_anchors=1, additional_outputs=None):\n+        \"\"\"Create a child-with-parents package using the parent_coins passed in.\n+        Each coin in parent_coins will be used to fund 1 parent transaction.\n+        Each parent will have 1 output. The parents' outputs will be used to fund 1 child\n+        transaction. Thus, the package will contain len(parent_coins) + 1 transactions.\n+        All transactions signal BIP125 replaceability, but nSequence changes based on self.ctr.\n+\n+        returns tuple (hex serialized txns, CTransaction objects)\n+        \"\"\"\n+\n+        if additional_outputs is None:\n+            additional_outputs=[CTxOut(0, CScript([OP_2]))]\n+\n+        self.ctr += 1\n+        package_hex = []\n+        package_txns = []\n+        child_inputs = []\n+        # Use fee_rate=0 because create_self_transfer will use the default fee_rate value otherwise.\n+        # Passing in fee>0 overrides fee_rate, so this still works for non-zero parent_fee.\n+        for i, coin in enumerate(parent_coins):\n+            parent_result = self.wallet.create_self_transfer(\n+                fee_rate=0,\n+                fee=parent_fee,\n+                utxo_to_spend=coin,\n+                sequence=MAX_BIP125_RBF_SEQUENCE, # We want same parents, don't use ctr\n+                version=version,\n+                additional_outputs=additional_outputs,\n+            )\n+            child_inputs.append(parent_result[\"new_utxo\"])\n+            # Add ephemeral anchors, or just some, or none depending on situation\n+            if spend_anchors == 1 or (spend_anchors == 2 and i % 2 == 0):\n+                for vout, output in enumerate(additional_outputs):\n+                    child_inputs.append({**parent_result[\"new_utxo\"], 'vout': vout+1, 'value': Decimal(output.nValue)/COIN, 'anchor': True})\n+            package_hex.append(parent_result[\"hex\"])\n+            package_txns.append(parent_result[\"tx\"])\n+\n+        num_child_outputs = 10 if heavy_child else 1\n+        child_result = self.wallet.create_self_transfer_multi(\n+            utxos_to_spend=child_inputs,\n+            num_outputs=num_child_outputs,\n+            fee_per_output=int(child_fee * COIN // num_child_outputs),\n+            sequence=MAX_BIP125_RBF_SEQUENCE - self.ctr, # We still want different child\n+            version=version\n+        )\n+        package_hex.append(child_result[\"hex\"])\n+        package_txns.append(child_result[\"tx\"])\n+        return package_hex, package_txns\n+\n+    def run_test(self):\n+        # Counter used to count the number of times we constructed packages. Since we're constructing parent transactions with the same\n+        # coins (to create conflicts), and giving them the same fee (i.e. 0, since their respective children are paying), we might\n+        # accidentally just create the exact same transaction again. To prevent this, set nSequences to MAX_BIP125_RBF_SEQUENCE - self.ctr.\n+        self.ctr = 0\n+\n+        self.log.info(\"Generate blocks to create UTXOs\")\n+        node = self.nodes[0]\n+        self.wallet = MiniWallet(node)\n+        self.generate(self.wallet, 160)\n+        self.coins = self.wallet.get_utxos(mark_as_spent=False)\n+        # Mature coinbase transactions\n+        self.generate(self.wallet, 100)\n+        self.address = self.wallet.get_address()\n+\n+        self.test_unspent_ephemeral()\n+        self.test_fee_having_parent()\n+        self.test_multianchor()\n+        self.test_nonzero_anchor()\n+        self.test_prioritise_parent()\n+        self.test_xor_rbf()\n+\n+    def test_unspent_ephemeral(self):\n+        self.log.info(\"Test that ephemeral outputs of any value are disallowed if not spent in a package\")\n+        node = self.nodes[0]\n+        # Reuse the same coins so that the transactions conflict with one another.\n+        num_parents = 2\n+        parent_coins = self.coins[:num_parents]\n+        del self.coins[:num_parents]\n+\n+        # Submit whole package, but no anchors are spent\n+        package_hex0, package_txns0 = self.create_simple_package(parent_coins=parent_coins, parent_fee=0, child_fee=DEFAULT_FEE, version=3, spend_anchors=0)\n+        assert_raises_rpc_error(-26, \"missing-ephemeral-spends\", node.submitpackage, package_hex0)\n+        assert_equal(node.getrawmempool(), [])\n+\n+        # Submit whole package, but half anchors are spent\n+        package_hex1, package_txns1 = self.create_simple_package(parent_coins=parent_coins, parent_fee=0, child_fee=DEFAULT_FEE, version=3, spend_anchors=2)\n+        assert_raises_rpc_error(-26, \"missing-ephemeral-spends\", node.submitpackage, package_hex1)\n+        assert_equal(node.getrawmempool(), [])\n+\n+        # Submit whole package with all anchors spent, but wrong version!\n+        package_hex2, package_txns2 = self.create_simple_package(parent_coins=parent_coins, parent_fee=0, child_fee=DEFAULT_FEE, version=2)\n+        assert_raises_rpc_error(-26, \"wrong-ephemeral-nversion\", node.submitpackage, package_hex2)\n+        assert_equal(node.getrawmempool(), [])\n+\n+        # One more time, correct nversions\n+        package_hex3, package_txns3 = self.create_simple_package(parent_coins=parent_coins, parent_fee=0, child_fee=DEFAULT_FEE, version=3)\n+        node.submitpackage(package_hex3)\n+        self.assert_mempool_contents(expected=package_txns3, unexpected=[])\n+\n+        # Same parent coins/txs, don't spend all anchors, with same parent! Should reject RBF.\n+        package_hex4, package_txns4 = self.create_simple_package(parent_coins=parent_coins, parent_fee=0, child_fee=DEFAULT_FEE*2, version=3, spend_anchors=2)\n+        assert_raises_rpc_error(-26, \"v3-tx-nonstandard\", node.submitpackage, package_hex4)\n+        self.assert_mempool_contents(expected=package_txns3, unexpected=[])\n+\n+        # All ephemeral anchors this time, make sure old child evicted\n+        package_hex5, package_txns5 = self.create_simple_package(parent_coins=parent_coins, parent_fee=0, child_fee=DEFAULT_FEE*2, version=3)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26403#discussion_r1063617319",
      "id" : 1063617319,
      "in_reply_to_id" : 1060746035,
      "line" : 151,
      "node_id" : "PRRC_kwDOABII584_ZYMn",
      "original_commit_id" : "62f020d2dec7ffc88ffb94d4f53c801f9568ad64",
      "original_line" : 151,
      "original_position" : 151,
      "original_start_line" : null,
      "path" : "test/functional/mempool_ephemeral_anchor.py",
      "position" : 151,
      "pull_request_review_id" : 1239122582,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26403",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1063617319/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2023-01-06T17:05:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1063617319",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26403#discussion_r1068050751"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26403"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1068050751"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "\"i***t***s modified fees\" ?",
      "commit_id" : "04778d12898e226c0818b3317ac83cddd8348777",
      "created_at" : "2023-01-12T12:14:04Z",
      "diff_hunk" : "@@ -331,11 +331,12 @@ def test_xor_rbf(self):\n         self.generate(node, 1)\n         self.assert_mempool_contents(expected=[second_package_txns[1]], unexpected=[])\n \n-        # Parent can still be prioritised\n+        # Parent can't be prioritised; RPC call succeeds but is modified fees are ignored if it has EAs",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26403#discussion_r1068050751",
      "id" : 1068050751,
      "line" : 334,
      "node_id" : "PRRC_kwDOABII584_qSk_",
      "original_commit_id" : "04778d12898e226c0818b3317ac83cddd8348777",
      "original_line" : 334,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "test/functional/mempool_ephemeral_anchor.py",
      "position" : 5,
      "pull_request_review_id" : 1245490885,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26403",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1068050751/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2023-01-12T12:14:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1068050751",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26403#discussion_r1068050792"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26403"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1068050792"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "\"transac***ti***ons\"",
      "commit_id" : "04778d12898e226c0818b3317ac83cddd8348777",
      "created_at" : "2023-01-12T12:14:06Z",
      "diff_hunk" : "@@ -402,6 +407,11 @@ void CTxMemPoolEntry::UpdateDescendantState(int64_t modifySize, CAmount modifyFe\n \n void CTxMemPoolEntry::UpdateAncestorState(int64_t modifySize, CAmount modifyFee, int64_t modifyCount, int64_t modifySigOps)\n {\n+    // We don't want to encourage miners to mine these transacitons alone. Instead",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26403#discussion_r1068050792",
      "id" : 1068050792,
      "line" : 410,
      "node_id" : "PRRC_kwDOABII584_qSlo",
      "original_commit_id" : "04778d12898e226c0818b3317ac83cddd8348777",
      "original_line" : 410,
      "original_position" : 16,
      "original_start_line" : null,
      "path" : "src/txmempool.cpp",
      "position" : 16,
      "pull_request_review_id" : 1245490885,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26403",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1068050792/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2023-01-12T12:14:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1068050792",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26403#discussion_r1082936082"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26403"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1082936082"
         }
      },
      "author_association" : "MEMBER",
      "body" : "no longer changing this",
      "commit_id" : "8bf9e46ffcd3b30c6459afeecefbec76d6eb5d13",
      "created_at" : "2023-01-20T18:48:20Z",
      "diff_hunk" : "@@ -402,6 +407,11 @@ void CTxMemPoolEntry::UpdateDescendantState(int64_t modifySize, CAmount modifyFe\n \n void CTxMemPoolEntry::UpdateAncestorState(int64_t modifySize, CAmount modifyFee, int64_t modifyCount, int64_t modifySigOps)\n {\n+    // We don't want to encourage miners to mine these transacitons alone. Instead",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26403#discussion_r1082936082",
      "id" : 1082936082,
      "in_reply_to_id" : 1068050792,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585AjEsS",
      "original_commit_id" : "04778d12898e226c0818b3317ac83cddd8348777",
      "original_line" : 410,
      "original_position" : 16,
      "original_start_line" : null,
      "path" : "src/txmempool.cpp",
      "position" : null,
      "pull_request_review_id" : 1264166148,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26403",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1082936082/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2023-01-20T18:48:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1082936082",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26403#discussion_r1082936543"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26403"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1082936543"
         }
      },
      "author_association" : "MEMBER",
      "body" : "removed the test since it's duplicated by v3 work which now trims lower than min relay fee txns",
      "commit_id" : "8bf9e46ffcd3b30c6459afeecefbec76d6eb5d13",
      "created_at" : "2023-01-20T18:48:52Z",
      "diff_hunk" : "@@ -331,11 +331,12 @@ def test_xor_rbf(self):\n         self.generate(node, 1)\n         self.assert_mempool_contents(expected=[second_package_txns[1]], unexpected=[])\n \n-        # Parent can still be prioritised\n+        # Parent can't be prioritised; RPC call succeeds but is modified fees are ignored if it has EAs",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26403#discussion_r1082936543",
      "id" : 1082936543,
      "in_reply_to_id" : 1068050751,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585AjEzf",
      "original_commit_id" : "04778d12898e226c0818b3317ac83cddd8348777",
      "original_line" : 334,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "test/functional/mempool_ephemeral_anchor.py",
      "position" : null,
      "pull_request_review_id" : 1264167040,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26403",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1082936543/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2023-01-20T18:48:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1082936543",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Rebased on top of latest https://github.com/bitcoin/bitcoin/pull/25038\r\n\r\n1) simplified spends checking due to 2-txn topology for better error reporting\r\n2) simplified tests, no longer messing with test utils at all\r\n3) removed prioritisetransaction considerations and code, since they are now evicted via V3 rules entirely\r\n",
      "created_at" : "2023-01-20T18:51:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26403#issuecomment-1398801013",
      "id" : 1398801013,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26403",
      "node_id" : "IC_kwDOABII585TYAJ1",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 1,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1398801013/reactions"
      },
      "updated_at" : "2023-01-20T18:54:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1398801013",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "alternative commit that makes it OP_TRUE instead: https://github.com/instagibbs/bitcoin/commit/bf7676da978188ebf759288a147f79eb41bf80cc\r\n\r\n",
      "created_at" : "2023-02-02T22:13:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26403#issuecomment-1414445265",
      "id" : 1414445265,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26403",
      "node_id" : "IC_kwDOABII585UTrjR",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1414445265/reactions"
      },
      "updated_at" : "2023-02-02T22:13:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1414445265",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Switched to OP_TRUE, as it was less confusing for at least a few people, and only requires light test editing. Having an odd conflict with master that I am not resolving until parent PR is rebased.",
      "created_at" : "2023-03-13T16:35:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26403#issuecomment-1466487189",
      "id" : 1466487189,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26403",
      "node_id" : "IC_kwDOABII585XaNGV",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1466487189/reactions"
      },
      "updated_at" : "2023-03-13T17:05:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1466487189",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n",
      "created_at" : "2023-03-13T17:07:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26403#issuecomment-1466552049",
      "id" : 1466552049,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26403",
      "node_id" : "IC_kwDOABII585Xac7x",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1466552049/reactions"
      },
      "updated_at" : "2023-03-13T17:07:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1466552049",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Should a flag be threaded through to disallow any dust outputs even if they're EA?\r\n\r\nala https://github.com/bitcoin-inquisition/bitcoin/pull/23/commits/3f1b105b9ab2736f5b204329a10213c26bd74172",
      "created_at" : "2023-03-14T15:02:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26403#issuecomment-1468273207",
      "id" : 1468273207,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26403",
      "node_id" : "IC_kwDOABII585XhBI3",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1468273207/reactions"
      },
      "updated_at" : "2023-03-14T15:38:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1468273207",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I reworked this PR with changes incorporated from https://github.com/bitcoin-inquisition/bitcoin/pull/23",
      "created_at" : "2023-04-14T20:09:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26403#issuecomment-1509185568",
      "id" : 1509185568,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26403",
      "node_id" : "IC_kwDOABII585Z9Fgg",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1509185568/reactions"
      },
      "updated_at" : "2023-04-14T20:09:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1509185568",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Should add a test showing that node restart dumps ephemeral transactions since re-admission to the mempool is done single tx by single tx only.\r\n",
      "created_at" : "2023-04-27T07:29:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26403#issuecomment-1524972854",
      "id" : 1524972854,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26403",
      "node_id" : "IC_kwDOABII585a5T02",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1524972854/reactions"
      },
      "updated_at" : "2023-06-08T20:11:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1524972854",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "https://github.com/bitcoin/bitcoin/pull/26403/commits/a1982f5773690bc0c74d1bb932cb7552b00aacaf shows that current re-submission logic on node restart fails to evict ephemeral transaction. \r\n\r\nUntil there is package-aware re-submission, should these transactions just be dropped on the floor? These types of transactions are opting into fairly aggressive fee bumping patterns, maybe that's an ok first cut.\r\n",
      "created_at" : "2023-05-01T18:44:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26403#issuecomment-1530062410",
      "id" : 1530062410,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26403",
      "node_id" : "IC_kwDOABII585bMuZK",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1530062410/reactions"
      },
      "updated_at" : "2023-05-01T18:44:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1530062410",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "note to self: after rebased onto BIP331, need to make sure rejected ephemeral anchor tx is put in `m_recent_rejects_reconsiderable` filter instead of `m_recent_rejects`",
      "created_at" : "2023-06-08T20:09:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26403#issuecomment-1583272346",
      "id" : 1583272346,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26403",
      "node_id" : "IC_kwDOABII585eXtGa",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1583272346/reactions"
      },
      "updated_at" : "2023-06-08T20:09:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1583272346",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Random thought:\r\n\r\nOP_TRUE is txid-malleable by block maker. e.g., they could theoretically add in superfluous pushes in the `scriptSig` and this would not fail validation because `CLEANSTACK` is a policy-only rule. Miner is of course taking less in fees by doing this.\r\n\r\nIn this particular V3 context, it just means your CPFP could change txid, wouldn't do anything else. Maybe in a more general context if we weren't restricted to V3 topology this would be an issue? In the context of keyless anchors, I'm not sure that will ever make sense anyways.\r\n\r\n~~The \"fix\" would be: `OP_DEPTH OP_0 OP_EQUAL`, making it consensus-non-malleable at the cost of 8 additional WU. Seems like a bad tradeoff, noting anyways.~~\r\n\r\n```\r\n<_aj_> instagibbs: can't a blockmaker put \"OP_NOP OP_NOP OP_NOP\" in the scriptSig and also satisfy a scriptPubKey of \"DEPTH 0 EQUAL\" ?\r\n```\r\nlegacy script: i cri everytim\r\n\r\nThis also means the child transaction spending the ephemeral anchor cannot be relied upon for further transaction chaining, e.g., spent in a splice-in for a LN channel, since the funding output can have its txid mutated. A soft-fork would be necessary.",
      "created_at" : "2023-07-06T14:47:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26403#issuecomment-1623814942",
      "id" : 1623814942,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26403",
      "node_id" : "IC_kwDOABII585gyXMe",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1623814942/reactions"
      },
      "updated_at" : "2023-07-07T20:15:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1623814942",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> @instagibbs pushed 1 commit.\r\n>    [faeed68](https://github.com/bitcoin/bitcoin/commit/faeed687e5cde5e32750d93818dd1d4add837f24) nice crash bro\r\n\r\nhacked a quick-ish fix on top of this branch [here](https://github.com/glozow/bitcoin/tree/2023-08-10-fix-crash-bro) (it fails some other tests). As discussed offline, the general problem is with calling `TrimToSize` in the middle of package validation (meaning something can go from already-in-mempool to evicted, or just-submitted to evicted) so a coin may be cached in `m_view` but then it disappears from the mempool/temporary coins in `m_viewmempool`. Crash is in `CheckInputsFromMempoolAndCache` which asserts the coin exists, but it doesn't anymore. Will open a separate PR to address this since it's also a problem pre-v3.",
      "created_at" : "2023-08-10T10:23:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26403#issuecomment-1672959244",
      "id" : 1672959244,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26403",
      "node_id" : "IC_kwDOABII585jt1UM",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1672959244/reactions"
      },
      "updated_at" : "2023-08-10T10:25:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1672959244",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n",
      "created_at" : "2023-08-17T13:51:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26403#issuecomment-1682326996",
      "id" : 1682326996,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26403",
      "node_id" : "IC_kwDOABII585kRkXU",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1682326996/reactions"
      },
      "updated_at" : "2023-08-17T13:51:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1682326996",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "What's the point of having a non-malleable version? Okay, so a miner cannot add extra pushes to the input script that spends the anchor, but there is nothing to stop the miner from mining an alternative child transaction that spends *only* the anchor. Thus, the party that had broadcast the original child transaction will be forced to construct a new spending transaction with a different TxID anyway. Indeed, anyone (not only a miner) is free to propose a replacement child that spends *only* the anchor, so it will never be okay to depend upon the TxID of a transaction that spends an ephemeral anchor. So again I ask, what is the point of having a non-malleable ephemeral anchor?",
      "created_at" : "2023-11-15T19:47:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26403#issuecomment-1813162870",
      "id" : 1813162870,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26403",
      "node_id" : "IC_kwDOABII585sEqt2",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1813162870/reactions"
      },
      "updated_at" : "2023-11-15T19:47:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1813162870",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/797782?v=4",
         "events_url" : "https://api.github.com/users/whitslack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/whitslack/followers",
         "following_url" : "https://api.github.com/users/whitslack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/whitslack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/whitslack",
         "id" : 797782,
         "login" : "whitslack",
         "node_id" : "MDQ6VXNlcjc5Nzc4Mg==",
         "organizations_url" : "https://api.github.com/users/whitslack/orgs",
         "received_events_url" : "https://api.github.com/users/whitslack/received_events",
         "repos_url" : "https://api.github.com/users/whitslack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/whitslack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/whitslack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/whitslack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Thus, the party that had broadcast the original child transaction will be forced to construct a new spending transaction with a different TxID anyway\r\n\r\nCanonical example here which motivated the change was that of LN channel splicing being used to cpfp bump another transaction, would could be another channel's commitment transaction itself. This requires the ephemeral anchor-spending tx(the splice) to retain txid stability otherwise funds are locked up in the new funding output.\r\n\r\nI understand that not all use-cases require such things, but two points:\r\n1) It's easy to expand standardness, and really hard to restrict. In deploying one version, we'll likely learn lessons we'd want to apply to other versions. If we see tons of uptake from wallets that explicitly don't care about txid stability? That's a signal as well.\r\n2) \"I don't see the problem\" is much weaker than \"there is no problem\" and I'd rather be able to reason via modern bitcoin rules",
      "created_at" : "2023-11-15T20:44:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26403#issuecomment-1813235545",
      "id" : 1813235545,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26403",
      "node_id" : "IC_kwDOABII585sE8dZ",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1813235545/reactions"
      },
      "updated_at" : "2023-11-15T20:44:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1813235545",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> This requires the ephemeral anchor-spending tx(the splice) to retain txid stability otherwise funds are locked up in the new funding output.\r\n\r\nThe point I was missing is that a non-malleable anchor ensures that the *other* output(s) do **not** get spent in a transaction whose TxID was not known in advance of signing. Thank you for the answer.",
      "created_at" : "2023-11-15T22:13:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26403#issuecomment-1813346081",
      "id" : 1813346081,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26403",
      "node_id" : "IC_kwDOABII585sFXch",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1813346081/reactions"
      },
      "updated_at" : "2023-11-15T22:13:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1813346081",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/797782?v=4",
         "events_url" : "https://api.github.com/users/whitslack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/whitslack/followers",
         "following_url" : "https://api.github.com/users/whitslack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/whitslack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/whitslack",
         "id" : 797782,
         "login" : "whitslack",
         "node_id" : "MDQ6VXNlcjc5Nzc4Mg==",
         "organizations_url" : "https://api.github.com/users/whitslack/orgs",
         "received_events_url" : "https://api.github.com/users/whitslack/received_events",
         "repos_url" : "https://api.github.com/users/whitslack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/whitslack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/whitslack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/whitslack"
      }
   }
]
