{
   "assignee" : null,
   "assignees" : [],
   "author_association" : "NONE",
   "body" : "What follows is a report of unexplained crashes of the new Bitcoin Core 0.15. The available information may not be enough to identify the cause but perhaps other users can recognize identical behavior and use this ticket to acknowledge.\r\n\r\nIn case the kind dev team wants to investigate the issue further, I will cooperate fully. Thanks for your time to whoever reads this.\r\n\r\n### Describe the issue\r\nI run a Bitcoin Core node 0.14.2 node under Ubuntu 17.04. I decided to upgrade to the new 0.15 version as soon as it became possible to do so via `apt upgrade`.\r\n\r\nIt is important to note that the node was fully synced and running fine before the update. It is an old piece of hardware with a brand new HDD added, and a fresh copy of the Ubuntu OS installed & configured just for the purpose of running Bitcoin Core.\r\n \r\nThe first time I launched bitcoin-qt 0.15, it said a DB upgrade is necessary. Shortly afterwards it reported that the database was corrupt and the local copy of the blockchain needed to be rebuilt (I quote from memory, sadly I did not write down the exact message).\r\n\r\nThe program then proceeded to process the blocks on disk. Since I am running the node on underpowered hardware (full specs below) this is a slow process: 60+ hours and counting; approx. 75% done.\r\n\r\n**During this update/resync process, the bitcoin software has crashed at least 4 times so far without any apparent error message.**\r\n\r\ndebug.log contents (attached below) look normal: long sets of `UpdateTip: new best=` messages for all processed blocks interspersed with service messages like `Pre-allocating up to position xxxx in xxxx.dat` and handshakes with other nodes.\r\n\r\n### Can you reliably reproduce the issue?\r\nSadly, no. Crashes may happen after more than 24 hours of work or as little as 12 hours after restarting the process.\r\n\r\nThe NUC is dedicated to this task only; it operates on its own and I only keep a remote shell open that runs a `tail -f debug.log` that I look at a couple of times a day.\r\n\r\n**bitcoin.conf** contents:\r\n```\r\nonlynet=ipv4\r\nserver=1\r\nrpcbind=127.0.0.1\r\nrcpbind=10.9.9.46 // This is my inhouse VPN\r\nrpcport=8332\r\nrpcuser=[redacted]\r\nrpcpassword=[redacted]\r\n```\r\n\r\nBesides the above configuration, I have increased the size of the database cache from the default value to 1024MB, using the bitcoin-qt settings panel. Memory usage is stable at 2GB out of 3.7GB usable, and looking for out of memory crashes using `grep \"Killed process\" /var/log/syslog` yields no results.\r\n\r\n### What version of bitcoin-core are you using?\r\nI am using the package available from the ppa:bitcoin/bitcoin repository\r\nVersion string is `v0.15.0.0-g3751912e8e`\r\n\r\n### Machine specs:\r\n- OS: Ubuntu 17.04 (4.10.0-33-generic Ubuntu SMP Fri Aug 11 10:55:28 UTC 2017 x86_64 GNU/Linux)\r\n- CPU: Intel Celeron N2820\r\n- RAM: 4GB (3.7GB available)\r\n- SWAP: 8GB\r\n- Disk size: 1.0TB (850 GB available)\r\n- Disk Type: HDD\r\n\r\n### Any extra information that might be useful in the debugging process.\r\nThe contents of `debug.log` are provided as follows:\r\n- The startup part following a crash is attached as plaintext file. \r\n[debug.log.txt](https://github.com/bitcoin/bitcoin/files/1308935/debug.log.txt)\r\n- The full log (10.8MB uncompressed) is attached as zip file.\r\n[debug.log.zip](https://github.com/bitcoin/bitcoin/files/1308943/debug.log.zip)\r\n\r\n`db.log` is empty. I know of no other logs related to this software, but will post any info upon request.",
   "closed_at" : "2017-10-26T21:51:22Z",
   "closed_by" : {
      "avatar_url" : "https://avatars0.githubusercontent.com/u/6951698?v=4",
      "events_url" : "https://api.github.com/users/drkskwlkr/events{/privacy}",
      "followers_url" : "https://api.github.com/users/drkskwlkr/followers",
      "following_url" : "https://api.github.com/users/drkskwlkr/following{/other_user}",
      "gists_url" : "https://api.github.com/users/drkskwlkr/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/drkskwlkr",
      "id" : 6951698,
      "login" : "drkskwlkr",
      "node_id" : "MDQ6VXNlcjY5NTE2OTg=",
      "organizations_url" : "https://api.github.com/users/drkskwlkr/orgs",
      "received_events_url" : "https://api.github.com/users/drkskwlkr/received_events",
      "repos_url" : "https://api.github.com/users/drkskwlkr/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/drkskwlkr/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/drkskwlkr/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/drkskwlkr"
   },
   "comments" : 10,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11356/comments",
   "created_at" : "2017-09-17T08:37:05Z",
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11356/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/issues/11356",
   "id" : 258288723,
   "labels" : [
      {
         "color" : "02d7e1",
         "default" : false,
         "id" : 135946,
         "name" : "GUI",
         "node_id" : "MDU6TGFiZWwxMzU5NDY=",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/GUI"
      }
   ],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11356/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "node_id" : "MDU6SXNzdWUyNTgyODg3MjM=",
   "number" : 11356,
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "closed",
   "title" : "Bitcoin Core 0.15.0 crashes repeatedly while rebuilding local blockchain copy, no error reported",
   "updated_at" : "2017-10-26T21:51:22Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11356",
   "user" : {
      "avatar_url" : "https://avatars0.githubusercontent.com/u/6951698?v=4",
      "events_url" : "https://api.github.com/users/drkskwlkr/events{/privacy}",
      "followers_url" : "https://api.github.com/users/drkskwlkr/followers",
      "following_url" : "https://api.github.com/users/drkskwlkr/following{/other_user}",
      "gists_url" : "https://api.github.com/users/drkskwlkr/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/drkskwlkr",
      "id" : 6951698,
      "login" : "drkskwlkr",
      "node_id" : "MDQ6VXNlcjY5NTE2OTg=",
      "organizations_url" : "https://api.github.com/users/drkskwlkr/orgs",
      "received_events_url" : "https://api.github.com/users/drkskwlkr/received_events",
      "repos_url" : "https://api.github.com/users/drkskwlkr/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/drkskwlkr/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/drkskwlkr/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/drkskwlkr"
   }
}
