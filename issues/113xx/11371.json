{
   "assignee" : null,
   "assignees" : [],
   "author_association" : "NONE",
   "body" : "### Describe the issue\r\n\r\nAfter installing Bitcoin Core 0.15.0 I inadvertently ran an earlier version which corrupted the block database.  Stopped 0.13.2 and ran 0.15.0, it crashed without indicating an error.  Deleted the three directories (blocks, chainstate, database) and ran 0.15.0, it crashed.  Ran 0.15.0 again and it began an initial block download from a LAN instance of Bitcoin-QT 0.15.0  Later progress stopped.  As the log indicates it seems to have had a problem with its single LAN peer:\r\n\r\n2017-09-19 20:44:48 UpdateTip: new best=00000000000000002b63d17164cde033e40254991a151ed8846233583d9c8035 height=312807 version=0x00000002 log2_work=79.925576 tx=43365575 date='2014-07-28 04:54:42' progress=0.169187 cache=479.3MiB(3351479txo)\r\n2017-09-19 20:44:48 Pre-allocating up to position 0xb00000 in rev00160.dat\r\n2017-09-19 20:44:48 UpdateTip: new best=000000000000000024cef26cfacce582e67132e741891d69c9b50f1e8b532754 height=312808 version=0x00000002 log2_work=79.925677 tx=43366011 date='2014-07-28 05:10:43' progress=0.169189 cache=479.4MiB(3351684txo)\r\n2017-09-19 20:44:48 Misbehaving: 192.168.1.71 peer=0 (0 -> 100) BAN THRESHOLD EXCEEDED\r\n2017-09-19 20:44:48 ERROR: ProcessNewBlock: AcceptBlock FAILED\r\n2017-09-19 20:44:58 receive version message: /Satoshi:0.15.0/: version 70015, blocks=486071, us=[::]:0, peer=1\r\n2017-09-19 20:44:58 Misbehaving: 192.168.1.71 peer=1 (0 -> 100) BAN THRESHOLD EXCEEDED\r\n2017-09-19 20:44:58 ERROR: ProcessNewBlock: AcceptBlock FAILED\r\n2017-09-19 20:45:14 receive version message: /Satoshi:0.15.0/: version 70015, blocks=486071, us=[::]:0, peer=2\r\n\r\nThis behaviour continues until Bitcoin-QT is exited.\r\n\r\n### Can you reliably reproduce the issue?\r\n\r\nYes.\r\n\r\n#### If so, please list the steps to reproduce below:\r\n\r\n1. Run Bitcoin-QT 0.15.0\r\n\r\n### Expected behaviour\r\n\r\nShould continue the initial block download.\r\n\r\n### Actual behaviour\r\n\r\nPerforms no block download activity\r\n\r\n### Screenshots.\r\n\r\n\r\n### What version of bitcoin-core are you using?\r\n\r\nBitcoin Core version v0.15.0 (64-bit)\r\n94d0626426810db85b342dbf801681752e474ff0aff726783cb5297b70999a45  bitcoin-0.15.0-win64-setup.exe\r\n\r\n### Machine specs:\r\n- OS: Windows 10 Home\r\n- CPU: i7-4790K\r\n- RAM: 32.0 GB\r\n- Disk size: 931 GB\r\n- Disk Type: HD (Drive E:)\r\n\r\n### Any extra information that might be useful in the debugging process.\r\n\r\nI use:\r\n\r\n connect=192.168.1.71\r\n\r\nin bitcoin.conf to limit connection to the single LAN peer.\r\n\r\nRemoved that connect, and the IBD resumed without problems.\r\n\r\nStopped Bitcoin-QT, restored the single connect, and IBD resumed without issue.",
   "closed_at" : null,
   "closed_by" : null,
   "comments" : 4,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11371/comments",
   "created_at" : "2017-09-20T00:47:57Z",
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11371/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/issues/11371",
   "id" : 259006904,
   "labels" : [
      {
         "color" : "006b75",
         "default" : false,
         "id" : 98298007,
         "name" : "P2P",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/P2P"
      }
   ],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11371/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "number" : 11371,
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "open",
   "title" : "Bitcoin 0.15.0 repeatedly bans only connect peer",
   "updated_at" : "2017-09-26T20:33:02Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11371",
   "user" : {
      "avatar_url" : "https://avatars0.githubusercontent.com/u/388061?v=4",
      "events_url" : "https://api.github.com/users/HamishMacEwan/events{/privacy}",
      "followers_url" : "https://api.github.com/users/HamishMacEwan/followers",
      "following_url" : "https://api.github.com/users/HamishMacEwan/following{/other_user}",
      "gists_url" : "https://api.github.com/users/HamishMacEwan/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/HamishMacEwan",
      "id" : 388061,
      "login" : "HamishMacEwan",
      "organizations_url" : "https://api.github.com/users/HamishMacEwan/orgs",
      "received_events_url" : "https://api.github.com/users/HamishMacEwan/received_events",
      "repos_url" : "https://api.github.com/users/HamishMacEwan/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/HamishMacEwan/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/HamishMacEwan/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/HamishMacEwan"
   }
}
