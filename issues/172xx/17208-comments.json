[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#17331](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/17331.html) (Use effective values throughout coin selection by achow101)\n* [#17156](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/17156.html) (psbt: check that various indexes and amounts are within bounds by achow101)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2019-10-21T22:27:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17208#issuecomment-544734459",
      "id" : 544734459,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17208",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU0NDczNDQ1OQ==",
      "updated_at" : "2019-11-05T00:09:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/544734459",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->Needs rebase",
      "created_at" : "2019-10-22T18:22:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17208#issuecomment-545091004",
      "id" : 545091004,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17208",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU0NTA5MTAwNA==",
      "updated_at" : "2019-10-22T18:22:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/545091004",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Primary platforms Bitcoin runs on (x86 / win linux) are not strictly IEEE 754 (in particular, the standard x86 FPU is non-754 due to excess precision and non-strict truncation when moving between registers and memory). It's also not too uncommon for random obscure library code to silently dork around with rounding settings even on SSE (which is much more 754). Standard compiler optimization settings also break IEEE 754 handling even more than the base platform.\r\n\r\nSo I think it's not especially wise to make a very strong assumption of IEEE 754 overall.\r\n\r\nI don't know if any of that directly impacts this change (though 0/0 is NaN as is 1 / +/-0) Also, there are values other than ==0.0 which in division can produce under/overflow so it's not instantly obvious that the 0.0 equality tests in the code are correct. (in general, equality tests in floating point code are frequent sources of bugs).\r\n\r\nInserting extra floating point variables to silence a non-error error seems kinda ugly.  Considering that these are just debugging messages, it might be better to just rework them (e.g. don't print if there is nothing to report, or don't divide numbers just give the raw numbers).   Returning \"inf\" in debug lines also might needlessly mess up parsing just as much as not outputting the log in 'impossible' cases where the time elapsed is zero. \r\n\r\n",
      "created_at" : "2019-10-29T21:39:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17208#issuecomment-547641746",
      "id" : 547641746,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17208",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU0NzY0MTc0Ng==",
      "updated_at" : "2019-10-29T21:39:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/547641746",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/858454?v=4",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "node_id" : "MDQ6VXNlcjg1ODQ1NA==",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@gmaxwell Thanks for reviewing. Those are all good points. I agree that we should be careful with the IEEE 754 assumptions we're making.\r\n\r\nI've now pushed an updated version of this PR -- now doing:\r\n\r\n1.) \r\n\r\n```diff\r\n-static int64_t nBlocksTotal = 0;\r\n+static int64_t nBlocksTotal = 1;\r\n```\r\n\r\nAs suggested in a related PR: _\"This change would have been better done-- easier to review for correctness, more stable against \"regression\"-- by simply changing the existing initialization constant for nBlocksTotal from 0 to 1.\"_\r\n\r\n2.)\r\n\r\nAs suggested: now giving raw numbers instead of percentages.\r\n\r\n3.)\r\n\r\nSetting `m_scanning_progress` to `0.0` in the case of `!(progress_end - progress_begin > 0.0)` to avoid any potential floating-point division by zero.\r\n\r\nPlease re-review :)\r\n\r\n---\r\n\r\n<details>\r\n<summary>Fun bonus trivia</summary>\r\n\r\n```\r\n$ cling\r\n[cling]$ #include <iostream>\r\n[cling]$ void f(double d) {\r\n[cling]$     if (d == 0.0) {\r\n[cling]$     } else if (d < 0.0) {\r\n[cling]$     } else if (d > 0.0) {\r\n[cling]$     } else {\r\n[cling]$         std::cout << \"reachable.\\n\";\r\n[cling]$     }\r\n[cling]$ }\r\n[cling]$ f(0.0/0.0)\r\nreachable.\r\n[cling]$ .q\r\n$\r\n```\r\n\r\n:)\r\n\r\n</details>",
      "created_at" : "2019-10-29T23:39:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17208#issuecomment-547676331",
      "id" : 547676331,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17208",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU0NzY3NjMzMQ==",
      "updated_at" : "2019-10-29T23:39:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/547676331",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@MarcoFalke @laanwj @Empact @promag You've all shown interest in the sanitizers before: would you mind reviewing? :)",
      "created_at" : "2019-11-14T09:18:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17208#issuecomment-553798046",
      "id" : 553798046,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17208",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU1Mzc5ODA0Ng==",
      "updated_at" : "2019-11-14T09:18:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/553798046",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17208#discussion_r346207817"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17208"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/346207817"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit: I'd rather keep the log message the same and add special handling for the divide by zero case, under the theory that avoiding an edge case is not a great reason to reduce communication",
      "commit_id" : "9724a0c2ec673130b754fde0f0f6e8a1f07ed6de",
      "created_at" : "2019-11-14T09:35:43Z",
      "diff_hunk" : "@@ -2827,13 +2831,11 @@ bool CWallet::CreateTransaction(interfaces::Chain::Lock& locked_chain, const std\n     // accidental re-use.\n     reservedest.KeepDestination();\n \n-    WalletLogPrintf(\"Fee Calculation: Fee:%d Bytes:%u Needed:%d Tgt:%d (requested %d) Reason:\\\"%s\\\" Decay %.5f: Estimation: (%g - %g) %.2f%% %.1f/(%.1f %d mem %.1f out) Fail: (%g - %g) %.2f%% %.1f/(%.1f %d mem %.1f out)\\n\",\n+    WalletLogPrintf(\"Fee Calculation: Fee:%d Bytes:%u Needed:%d Tgt:%d (requested %d) Reason:\\\"%s\\\" Decay %.5f: Estimation: (%g - %g) %.1f/(%.1f %d mem %.1f out) Fail: (%g - %g) %.1f/(%.1f %d mem %.1f out)\\n\",\n               nFeeRet, nBytes, nFeeNeeded, feeCalc.returnedTarget, feeCalc.desiredTarget, StringForFeeReason(feeCalc.reason), feeCalc.est.decay,\n               feeCalc.est.pass.start, feeCalc.est.pass.end,\n-              100 * feeCalc.est.pass.withinTarget / (feeCalc.est.pass.totalConfirmed + feeCalc.est.pass.inMempool + feeCalc.est.pass.leftMempool),\n               feeCalc.est.pass.withinTarget, feeCalc.est.pass.totalConfirmed, feeCalc.est.pass.inMempool, feeCalc.est.pass.leftMempool,\n               feeCalc.est.fail.start, feeCalc.est.fail.end,\n-              100 * feeCalc.est.fail.withinTarget / (feeCalc.est.fail.totalConfirmed + feeCalc.est.fail.inMempool + feeCalc.est.fail.leftMempool),",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17208#discussion_r346207817",
      "id" : 346207817,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0NjIwNzgxNw==",
      "original_commit_id" : "ed3e04415752e929501c6eb05a432a2f6c178d69",
      "original_position" : 24,
      "path" : "src/wallet/wallet.cpp",
      "position" : 22,
      "pull_request_review_id" : 316817453,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17208",
      "updated_at" : "2019-11-14T14:52:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/346207817",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/5470?v=4",
         "events_url" : "https://api.github.com/users/Empact/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Empact/followers",
         "following_url" : "https://api.github.com/users/Empact/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Empact/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Empact",
         "id" : 5470,
         "login" : "Empact",
         "node_id" : "MDQ6VXNlcjU0NzA=",
         "organizations_url" : "https://api.github.com/users/Empact/orgs",
         "received_events_url" : "https://api.github.com/users/Empact/received_events",
         "repos_url" : "https://api.github.com/users/Empact/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Empact/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Empact/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Empact"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17208#discussion_r346209036"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17208"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/346209036"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit: `progress_end > progress_begin`",
      "commit_id" : "9724a0c2ec673130b754fde0f0f6e8a1f07ed6de",
      "created_at" : "2019-11-14T09:38:23Z",
      "diff_hunk" : "@@ -1586,7 +1586,11 @@ CWallet::ScanResult CWallet::ScanForWalletTransactions(const uint256& start_bloc\n     }\n     double progress_current = progress_begin;\n     while (block_height && !fAbortRescan && !chain().shutdownRequested()) {\n-        m_scanning_progress = (progress_current - progress_begin) / (progress_end - progress_begin);\n+        if (progress_end - progress_begin > 0.0) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17208#discussion_r346209036",
      "id" : 346209036,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0NjIwOTAzNg==",
      "original_commit_id" : "ed3e04415752e929501c6eb05a432a2f6c178d69",
      "original_position" : 5,
      "path" : "src/wallet/wallet.cpp",
      "position" : 5,
      "pull_request_review_id" : 316819111,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17208",
      "updated_at" : "2019-11-14T14:52:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/346209036",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/5470?v=4",
         "events_url" : "https://api.github.com/users/Empact/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Empact/followers",
         "following_url" : "https://api.github.com/users/Empact/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Empact/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Empact",
         "id" : 5470,
         "login" : "Empact",
         "node_id" : "MDQ6VXNlcjU0NzA=",
         "organizations_url" : "https://api.github.com/users/Empact/orgs",
         "received_events_url" : "https://api.github.com/users/Empact/received_events",
         "repos_url" : "https://api.github.com/users/Empact/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Empact/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Empact/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Empact"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17208#discussion_r346210993"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17208"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/346210993"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Thanks a lot for reviewing!\r\n\r\nThe added â¦\r\n\r\n```\r\nif (progress_end - progress_begin > 0.0) {\r\n```\r\n\r\nâ¦ is meant to be \"visually consistent\" with the already existing L1590 â¦\r\n\r\n```\r\nif (*block_height % 100 == 0 && progress_end - progress_begin > 0.0) {\r\n```\r\n\r\nDoes that make sense? :)",
      "commit_id" : "9724a0c2ec673130b754fde0f0f6e8a1f07ed6de",
      "created_at" : "2019-11-14T09:42:20Z",
      "diff_hunk" : "@@ -1586,7 +1586,11 @@ CWallet::ScanResult CWallet::ScanForWalletTransactions(const uint256& start_bloc\n     }\n     double progress_current = progress_begin;\n     while (block_height && !fAbortRescan && !chain().shutdownRequested()) {\n-        m_scanning_progress = (progress_current - progress_begin) / (progress_end - progress_begin);\n+        if (progress_end - progress_begin > 0.0) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17208#discussion_r346210993",
      "id" : 346210993,
      "in_reply_to_id" : 346209036,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0NjIxMDk5Mw==",
      "original_commit_id" : "ed3e04415752e929501c6eb05a432a2f6c178d69",
      "original_position" : 5,
      "path" : "src/wallet/wallet.cpp",
      "position" : 5,
      "pull_request_review_id" : 316821550,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17208",
      "updated_at" : "2019-11-14T14:52:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/346210993",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17208#discussion_r346212741"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17208"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/346212741"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit: How about instead introducing a method that returns e.g. the `PerBlockTime(nTimeChainState)`, and handles the 0 case? More lines but the logged numbers remain accurate.",
      "commit_id" : "9724a0c2ec673130b754fde0f0f6e8a1f07ed6de",
      "created_at" : "2019-11-14T09:45:42Z",
      "diff_hunk" : "@@ -1891,7 +1891,7 @@ static int64_t nTimeConnect = 0;\n static int64_t nTimeIndex = 0;\n static int64_t nTimeCallbacks = 0;\n static int64_t nTimeTotal = 0;\n-static int64_t nBlocksTotal = 0;\n+static int64_t nBlocksTotal = 1;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17208#discussion_r346212741",
      "id" : 346212741,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0NjIxMjc0MQ==",
      "original_commit_id" : "ed3e04415752e929501c6eb05a432a2f6c178d69",
      "original_position" : 5,
      "path" : "src/validation.cpp",
      "position" : 5,
      "pull_request_review_id" : 316823683,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17208",
      "updated_at" : "2019-11-14T14:52:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/346212741",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/5470?v=4",
         "events_url" : "https://api.github.com/users/Empact/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Empact/followers",
         "following_url" : "https://api.github.com/users/Empact/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Empact/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Empact",
         "id" : 5470,
         "login" : "Empact",
         "node_id" : "MDQ6VXNlcjU0NzA=",
         "organizations_url" : "https://api.github.com/users/Empact/orgs",
         "received_events_url" : "https://api.github.com/users/Empact/received_events",
         "repos_url" : "https://api.github.com/users/Empact/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Empact/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Empact/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Empact"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17208#discussion_r346213214"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17208"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/346213214"
         }
      },
      "author_association" : "MEMBER",
      "body" : "That's actually how I did it in the original version, but I changed it after receiving this feedback from @gmaxwell:\r\n\r\n> Inserting extra floating point variables to silence a non-error error seems kinda ugly. Considering that these are just debugging messages, it might be better to just rework them (e.g. don't print if there is nothing to report, or don't divide numbers just give the raw numbers). Returning \"inf\" in debug lines also might needlessly mess up parsing just as much as not outputting the log in 'impossible' cases where the time elapsed is zero.\r\n\r\nI think he makes a good point here.",
      "commit_id" : "9724a0c2ec673130b754fde0f0f6e8a1f07ed6de",
      "created_at" : "2019-11-14T09:46:33Z",
      "diff_hunk" : "@@ -2827,13 +2831,11 @@ bool CWallet::CreateTransaction(interfaces::Chain::Lock& locked_chain, const std\n     // accidental re-use.\n     reservedest.KeepDestination();\n \n-    WalletLogPrintf(\"Fee Calculation: Fee:%d Bytes:%u Needed:%d Tgt:%d (requested %d) Reason:\\\"%s\\\" Decay %.5f: Estimation: (%g - %g) %.2f%% %.1f/(%.1f %d mem %.1f out) Fail: (%g - %g) %.2f%% %.1f/(%.1f %d mem %.1f out)\\n\",\n+    WalletLogPrintf(\"Fee Calculation: Fee:%d Bytes:%u Needed:%d Tgt:%d (requested %d) Reason:\\\"%s\\\" Decay %.5f: Estimation: (%g - %g) %.1f/(%.1f %d mem %.1f out) Fail: (%g - %g) %.1f/(%.1f %d mem %.1f out)\\n\",\n               nFeeRet, nBytes, nFeeNeeded, feeCalc.returnedTarget, feeCalc.desiredTarget, StringForFeeReason(feeCalc.reason), feeCalc.est.decay,\n               feeCalc.est.pass.start, feeCalc.est.pass.end,\n-              100 * feeCalc.est.pass.withinTarget / (feeCalc.est.pass.totalConfirmed + feeCalc.est.pass.inMempool + feeCalc.est.pass.leftMempool),\n               feeCalc.est.pass.withinTarget, feeCalc.est.pass.totalConfirmed, feeCalc.est.pass.inMempool, feeCalc.est.pass.leftMempool,\n               feeCalc.est.fail.start, feeCalc.est.fail.end,\n-              100 * feeCalc.est.fail.withinTarget / (feeCalc.est.fail.totalConfirmed + feeCalc.est.fail.inMempool + feeCalc.est.fail.leftMempool),",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17208#discussion_r346213214",
      "id" : 346213214,
      "in_reply_to_id" : 346207817,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0NjIxMzIxNA==",
      "original_commit_id" : "ed3e04415752e929501c6eb05a432a2f6c178d69",
      "original_position" : 24,
      "path" : "src/wallet/wallet.cpp",
      "position" : 22,
      "pull_request_review_id" : 316824254,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17208",
      "updated_at" : "2019-11-14T14:52:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/346213214",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17208#discussion_r346215433"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17208"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/346215433"
         }
      },
      "author_association" : "MEMBER",
      "body" : "In a previous version solved this using a slightly larger change, but I received the following feedback from @gmaxwell:\r\n\r\n> This change would have been better done-- easier to review for correctness, more stable against \"regression\"-- by simply changing the existing initialization constant for nBlocksTotal from 0 to 1.\r\n\r\nI think that is a good point. Since this is `validation.cpp` I'd like to keep the changes to the very minimum :)",
      "commit_id" : "9724a0c2ec673130b754fde0f0f6e8a1f07ed6de",
      "created_at" : "2019-11-14T09:50:34Z",
      "diff_hunk" : "@@ -1891,7 +1891,7 @@ static int64_t nTimeConnect = 0;\n static int64_t nTimeIndex = 0;\n static int64_t nTimeCallbacks = 0;\n static int64_t nTimeTotal = 0;\n-static int64_t nBlocksTotal = 0;\n+static int64_t nBlocksTotal = 1;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17208#discussion_r346215433",
      "id" : 346215433,
      "in_reply_to_id" : 346212741,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0NjIxNTQzMw==",
      "original_commit_id" : "ed3e04415752e929501c6eb05a432a2f6c178d69",
      "original_position" : 5,
      "path" : "src/validation.cpp",
      "position" : 5,
      "pull_request_review_id" : 316827067,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17208",
      "updated_at" : "2019-11-14T14:52:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/346215433",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17208#discussion_r346217627"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17208"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/346217627"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Yeah, it's a subjective point, but clearer IMO.",
      "commit_id" : "9724a0c2ec673130b754fde0f0f6e8a1f07ed6de",
      "created_at" : "2019-11-14T09:54:52Z",
      "diff_hunk" : "@@ -1586,7 +1586,11 @@ CWallet::ScanResult CWallet::ScanForWalletTransactions(const uint256& start_bloc\n     }\n     double progress_current = progress_begin;\n     while (block_height && !fAbortRescan && !chain().shutdownRequested()) {\n-        m_scanning_progress = (progress_current - progress_begin) / (progress_end - progress_begin);\n+        if (progress_end - progress_begin > 0.0) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17208#discussion_r346217627",
      "id" : 346217627,
      "in_reply_to_id" : 346209036,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0NjIxNzYyNw==",
      "original_commit_id" : "ed3e04415752e929501c6eb05a432a2f6c178d69",
      "original_position" : 5,
      "path" : "src/wallet/wallet.cpp",
      "position" : 5,
      "pull_request_review_id" : 316829977,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17208",
      "updated_at" : "2019-11-14T14:52:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/346217627",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/5470?v=4",
         "events_url" : "https://api.github.com/users/Empact/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Empact/followers",
         "following_url" : "https://api.github.com/users/Empact/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Empact/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Empact",
         "id" : 5470,
         "login" : "Empact",
         "node_id" : "MDQ6VXNlcjU0NzA=",
         "organizations_url" : "https://api.github.com/users/Empact/orgs",
         "received_events_url" : "https://api.github.com/users/Empact/received_events",
         "repos_url" : "https://api.github.com/users/Empact/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Empact/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Empact/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Empact"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17208#discussion_r346227917"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17208"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/346227917"
         }
      },
      "author_association" : "MEMBER",
      "body" : "How about this? Seems pretty clean / improves readability IMO: https://github.com/bitcoin/bitcoin/compare/master...Empact:percent-within-target",
      "commit_id" : "9724a0c2ec673130b754fde0f0f6e8a1f07ed6de",
      "created_at" : "2019-11-14T10:16:18Z",
      "diff_hunk" : "@@ -2827,13 +2831,11 @@ bool CWallet::CreateTransaction(interfaces::Chain::Lock& locked_chain, const std\n     // accidental re-use.\n     reservedest.KeepDestination();\n \n-    WalletLogPrintf(\"Fee Calculation: Fee:%d Bytes:%u Needed:%d Tgt:%d (requested %d) Reason:\\\"%s\\\" Decay %.5f: Estimation: (%g - %g) %.2f%% %.1f/(%.1f %d mem %.1f out) Fail: (%g - %g) %.2f%% %.1f/(%.1f %d mem %.1f out)\\n\",\n+    WalletLogPrintf(\"Fee Calculation: Fee:%d Bytes:%u Needed:%d Tgt:%d (requested %d) Reason:\\\"%s\\\" Decay %.5f: Estimation: (%g - %g) %.1f/(%.1f %d mem %.1f out) Fail: (%g - %g) %.1f/(%.1f %d mem %.1f out)\\n\",\n               nFeeRet, nBytes, nFeeNeeded, feeCalc.returnedTarget, feeCalc.desiredTarget, StringForFeeReason(feeCalc.reason), feeCalc.est.decay,\n               feeCalc.est.pass.start, feeCalc.est.pass.end,\n-              100 * feeCalc.est.pass.withinTarget / (feeCalc.est.pass.totalConfirmed + feeCalc.est.pass.inMempool + feeCalc.est.pass.leftMempool),\n               feeCalc.est.pass.withinTarget, feeCalc.est.pass.totalConfirmed, feeCalc.est.pass.inMempool, feeCalc.est.pass.leftMempool,\n               feeCalc.est.fail.start, feeCalc.est.fail.end,\n-              100 * feeCalc.est.fail.withinTarget / (feeCalc.est.fail.totalConfirmed + feeCalc.est.fail.inMempool + feeCalc.est.fail.leftMempool),",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17208#discussion_r346227917",
      "id" : 346227917,
      "in_reply_to_id" : 346207817,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0NjIyNzkxNw==",
      "original_commit_id" : "ed3e04415752e929501c6eb05a432a2f6c178d69",
      "original_position" : 24,
      "path" : "src/wallet/wallet.cpp",
      "position" : 22,
      "pull_request_review_id" : 316843490,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17208",
      "updated_at" : "2019-11-14T14:52:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/346227917",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/5470?v=4",
         "events_url" : "https://api.github.com/users/Empact/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Empact/followers",
         "following_url" : "https://api.github.com/users/Empact/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Empact/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Empact",
         "id" : 5470,
         "login" : "Empact",
         "node_id" : "MDQ6VXNlcjU0NzA=",
         "organizations_url" : "https://api.github.com/users/Empact/orgs",
         "received_events_url" : "https://api.github.com/users/Empact/received_events",
         "repos_url" : "https://api.github.com/users/Empact/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Empact/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Empact/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Empact"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17208#discussion_r346233588"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17208"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/346233588"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I guess it is a matter of preference, but I like the current simpler solution suggested by @gmaxwell.\r\n\r\nI'll let others chime in and adjust to the consensus opinion (if any) :)",
      "commit_id" : "9724a0c2ec673130b754fde0f0f6e8a1f07ed6de",
      "created_at" : "2019-11-14T10:27:26Z",
      "diff_hunk" : "@@ -2827,13 +2831,11 @@ bool CWallet::CreateTransaction(interfaces::Chain::Lock& locked_chain, const std\n     // accidental re-use.\n     reservedest.KeepDestination();\n \n-    WalletLogPrintf(\"Fee Calculation: Fee:%d Bytes:%u Needed:%d Tgt:%d (requested %d) Reason:\\\"%s\\\" Decay %.5f: Estimation: (%g - %g) %.2f%% %.1f/(%.1f %d mem %.1f out) Fail: (%g - %g) %.2f%% %.1f/(%.1f %d mem %.1f out)\\n\",\n+    WalletLogPrintf(\"Fee Calculation: Fee:%d Bytes:%u Needed:%d Tgt:%d (requested %d) Reason:\\\"%s\\\" Decay %.5f: Estimation: (%g - %g) %.1f/(%.1f %d mem %.1f out) Fail: (%g - %g) %.1f/(%.1f %d mem %.1f out)\\n\",\n               nFeeRet, nBytes, nFeeNeeded, feeCalc.returnedTarget, feeCalc.desiredTarget, StringForFeeReason(feeCalc.reason), feeCalc.est.decay,\n               feeCalc.est.pass.start, feeCalc.est.pass.end,\n-              100 * feeCalc.est.pass.withinTarget / (feeCalc.est.pass.totalConfirmed + feeCalc.est.pass.inMempool + feeCalc.est.pass.leftMempool),\n               feeCalc.est.pass.withinTarget, feeCalc.est.pass.totalConfirmed, feeCalc.est.pass.inMempool, feeCalc.est.pass.leftMempool,\n               feeCalc.est.fail.start, feeCalc.est.fail.end,\n-              100 * feeCalc.est.fail.withinTarget / (feeCalc.est.fail.totalConfirmed + feeCalc.est.fail.inMempool + feeCalc.est.fail.leftMempool),",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17208#discussion_r346233588",
      "id" : 346233588,
      "in_reply_to_id" : 346207817,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0NjIzMzU4OA==",
      "original_commit_id" : "ed3e04415752e929501c6eb05a432a2f6c178d69",
      "original_position" : 24,
      "path" : "src/wallet/wallet.cpp",
      "position" : 22,
      "pull_request_review_id" : 316850425,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17208",
      "updated_at" : "2019-11-14T14:52:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/346233588",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17208#discussion_r346240222"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17208"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/346240222"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I don't totally buy this as removing the ubsan exception helps protect against regression / div-by-zero. Granted it's more lines and so more review in theory, but only marginally so as you have to look over all the `nBlocksTotal` uses anyway to be clear about the implications, and in both cases you can see only log lines are affected, etc. But yes this is another subjective point.\r\nhttps://github.com/bitcoin/bitcoin/compare/master...Empact:mills-per-block",
      "commit_id" : "9724a0c2ec673130b754fde0f0f6e8a1f07ed6de",
      "created_at" : "2019-11-14T10:40:58Z",
      "diff_hunk" : "@@ -1891,7 +1891,7 @@ static int64_t nTimeConnect = 0;\n static int64_t nTimeIndex = 0;\n static int64_t nTimeCallbacks = 0;\n static int64_t nTimeTotal = 0;\n-static int64_t nBlocksTotal = 0;\n+static int64_t nBlocksTotal = 1;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17208#discussion_r346240222",
      "id" : 346240222,
      "in_reply_to_id" : 346212741,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0NjI0MDIyMg==",
      "original_commit_id" : "ed3e04415752e929501c6eb05a432a2f6c178d69",
      "original_position" : 5,
      "path" : "src/validation.cpp",
      "position" : 5,
      "pull_request_review_id" : 316858964,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17208",
      "updated_at" : "2019-11-14T14:52:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/346240222",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/5470?v=4",
         "events_url" : "https://api.github.com/users/Empact/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Empact/followers",
         "following_url" : "https://api.github.com/users/Empact/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Empact/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Empact",
         "id" : 5470,
         "login" : "Empact",
         "node_id" : "MDQ6VXNlcjU0NzA=",
         "organizations_url" : "https://api.github.com/users/Empact/orgs",
         "received_events_url" : "https://api.github.com/users/Empact/received_events",
         "repos_url" : "https://api.github.com/users/Empact/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Empact/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Empact/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Empact"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17208#discussion_r346241584"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17208"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/346241584"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I don't read @gmaxwell's comment as suggesting this approach - \"don't print if there is nothing to report\" is different from removing the lines.",
      "commit_id" : "9724a0c2ec673130b754fde0f0f6e8a1f07ed6de",
      "created_at" : "2019-11-14T10:43:45Z",
      "diff_hunk" : "@@ -2827,13 +2831,11 @@ bool CWallet::CreateTransaction(interfaces::Chain::Lock& locked_chain, const std\n     // accidental re-use.\n     reservedest.KeepDestination();\n \n-    WalletLogPrintf(\"Fee Calculation: Fee:%d Bytes:%u Needed:%d Tgt:%d (requested %d) Reason:\\\"%s\\\" Decay %.5f: Estimation: (%g - %g) %.2f%% %.1f/(%.1f %d mem %.1f out) Fail: (%g - %g) %.2f%% %.1f/(%.1f %d mem %.1f out)\\n\",\n+    WalletLogPrintf(\"Fee Calculation: Fee:%d Bytes:%u Needed:%d Tgt:%d (requested %d) Reason:\\\"%s\\\" Decay %.5f: Estimation: (%g - %g) %.1f/(%.1f %d mem %.1f out) Fail: (%g - %g) %.1f/(%.1f %d mem %.1f out)\\n\",\n               nFeeRet, nBytes, nFeeNeeded, feeCalc.returnedTarget, feeCalc.desiredTarget, StringForFeeReason(feeCalc.reason), feeCalc.est.decay,\n               feeCalc.est.pass.start, feeCalc.est.pass.end,\n-              100 * feeCalc.est.pass.withinTarget / (feeCalc.est.pass.totalConfirmed + feeCalc.est.pass.inMempool + feeCalc.est.pass.leftMempool),\n               feeCalc.est.pass.withinTarget, feeCalc.est.pass.totalConfirmed, feeCalc.est.pass.inMempool, feeCalc.est.pass.leftMempool,\n               feeCalc.est.fail.start, feeCalc.est.fail.end,\n-              100 * feeCalc.est.fail.withinTarget / (feeCalc.est.fail.totalConfirmed + feeCalc.est.fail.inMempool + feeCalc.est.fail.leftMempool),",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17208#discussion_r346241584",
      "id" : 346241584,
      "in_reply_to_id" : 346207817,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0NjI0MTU4NA==",
      "original_commit_id" : "ed3e04415752e929501c6eb05a432a2f6c178d69",
      "original_position" : 24,
      "path" : "src/wallet/wallet.cpp",
      "position" : 22,
      "pull_request_review_id" : 316860655,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17208",
      "updated_at" : "2019-11-14T14:52:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/346241584",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/5470?v=4",
         "events_url" : "https://api.github.com/users/Empact/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Empact/followers",
         "following_url" : "https://api.github.com/users/Empact/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Empact/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Empact",
         "id" : 5470,
         "login" : "Empact",
         "node_id" : "MDQ6VXNlcjU0NzA=",
         "organizations_url" : "https://api.github.com/users/Empact/orgs",
         "received_events_url" : "https://api.github.com/users/Empact/received_events",
         "repos_url" : "https://api.github.com/users/Empact/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Empact/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Empact/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Empact"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17208#discussion_r346243021"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17208"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/346243021"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I meant \"don't divide numbers just give the raw numbers\" which is what is done in the suggested version :)",
      "commit_id" : "9724a0c2ec673130b754fde0f0f6e8a1f07ed6de",
      "created_at" : "2019-11-14T10:46:29Z",
      "diff_hunk" : "@@ -2827,13 +2831,11 @@ bool CWallet::CreateTransaction(interfaces::Chain::Lock& locked_chain, const std\n     // accidental re-use.\n     reservedest.KeepDestination();\n \n-    WalletLogPrintf(\"Fee Calculation: Fee:%d Bytes:%u Needed:%d Tgt:%d (requested %d) Reason:\\\"%s\\\" Decay %.5f: Estimation: (%g - %g) %.2f%% %.1f/(%.1f %d mem %.1f out) Fail: (%g - %g) %.2f%% %.1f/(%.1f %d mem %.1f out)\\n\",\n+    WalletLogPrintf(\"Fee Calculation: Fee:%d Bytes:%u Needed:%d Tgt:%d (requested %d) Reason:\\\"%s\\\" Decay %.5f: Estimation: (%g - %g) %.1f/(%.1f %d mem %.1f out) Fail: (%g - %g) %.1f/(%.1f %d mem %.1f out)\\n\",\n               nFeeRet, nBytes, nFeeNeeded, feeCalc.returnedTarget, feeCalc.desiredTarget, StringForFeeReason(feeCalc.reason), feeCalc.est.decay,\n               feeCalc.est.pass.start, feeCalc.est.pass.end,\n-              100 * feeCalc.est.pass.withinTarget / (feeCalc.est.pass.totalConfirmed + feeCalc.est.pass.inMempool + feeCalc.est.pass.leftMempool),\n               feeCalc.est.pass.withinTarget, feeCalc.est.pass.totalConfirmed, feeCalc.est.pass.inMempool, feeCalc.est.pass.leftMempool,\n               feeCalc.est.fail.start, feeCalc.est.fail.end,\n-              100 * feeCalc.est.fail.withinTarget / (feeCalc.est.fail.totalConfirmed + feeCalc.est.fail.inMempool + feeCalc.est.fail.leftMempool),",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17208#discussion_r346243021",
      "id" : 346243021,
      "in_reply_to_id" : 346207817,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0NjI0MzAyMQ==",
      "original_commit_id" : "ed3e04415752e929501c6eb05a432a2f6c178d69",
      "original_position" : 24,
      "path" : "src/wallet/wallet.cpp",
      "position" : 22,
      "pull_request_review_id" : 316862374,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17208",
      "updated_at" : "2019-11-14T14:52:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/346243021",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17208#discussion_r346245233"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17208"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/346245233"
         }
      },
      "author_association" : "MEMBER",
      "body" : "TouchÃ©",
      "commit_id" : "9724a0c2ec673130b754fde0f0f6e8a1f07ed6de",
      "created_at" : "2019-11-14T10:51:06Z",
      "diff_hunk" : "@@ -2827,13 +2831,11 @@ bool CWallet::CreateTransaction(interfaces::Chain::Lock& locked_chain, const std\n     // accidental re-use.\n     reservedest.KeepDestination();\n \n-    WalletLogPrintf(\"Fee Calculation: Fee:%d Bytes:%u Needed:%d Tgt:%d (requested %d) Reason:\\\"%s\\\" Decay %.5f: Estimation: (%g - %g) %.2f%% %.1f/(%.1f %d mem %.1f out) Fail: (%g - %g) %.2f%% %.1f/(%.1f %d mem %.1f out)\\n\",\n+    WalletLogPrintf(\"Fee Calculation: Fee:%d Bytes:%u Needed:%d Tgt:%d (requested %d) Reason:\\\"%s\\\" Decay %.5f: Estimation: (%g - %g) %.1f/(%.1f %d mem %.1f out) Fail: (%g - %g) %.1f/(%.1f %d mem %.1f out)\\n\",\n               nFeeRet, nBytes, nFeeNeeded, feeCalc.returnedTarget, feeCalc.desiredTarget, StringForFeeReason(feeCalc.reason), feeCalc.est.decay,\n               feeCalc.est.pass.start, feeCalc.est.pass.end,\n-              100 * feeCalc.est.pass.withinTarget / (feeCalc.est.pass.totalConfirmed + feeCalc.est.pass.inMempool + feeCalc.est.pass.leftMempool),\n               feeCalc.est.pass.withinTarget, feeCalc.est.pass.totalConfirmed, feeCalc.est.pass.inMempool, feeCalc.est.pass.leftMempool,\n               feeCalc.est.fail.start, feeCalc.est.fail.end,\n-              100 * feeCalc.est.fail.withinTarget / (feeCalc.est.fail.totalConfirmed + feeCalc.est.fail.inMempool + feeCalc.est.fail.leftMempool),",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17208#discussion_r346245233",
      "id" : 346245233,
      "in_reply_to_id" : 346207817,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0NjI0NTIzMw==",
      "original_commit_id" : "ed3e04415752e929501c6eb05a432a2f6c178d69",
      "original_position" : 24,
      "path" : "src/wallet/wallet.cpp",
      "position" : 22,
      "pull_request_review_id" : 316865226,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17208",
      "updated_at" : "2019-11-14T14:52:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/346245233",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/5470?v=4",
         "events_url" : "https://api.github.com/users/Empact/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Empact/followers",
         "following_url" : "https://api.github.com/users/Empact/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Empact/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Empact",
         "id" : 5470,
         "login" : "Empact",
         "node_id" : "MDQ6VXNlcjU0NzA=",
         "organizations_url" : "https://api.github.com/users/Empact/orgs",
         "received_events_url" : "https://api.github.com/users/Empact/received_events",
         "repos_url" : "https://api.github.com/users/Empact/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Empact/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Empact/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Empact"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17208#discussion_r346316653"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17208"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/346316653"
         }
      },
      "author_association" : "MEMBER",
      "body" : "This is initialized to `0` already",
      "commit_id" : "9724a0c2ec673130b754fde0f0f6e8a1f07ed6de",
      "created_at" : "2019-11-14T13:43:16Z",
      "diff_hunk" : "@@ -1586,7 +1586,11 @@ CWallet::ScanResult CWallet::ScanForWalletTransactions(const uint256& start_bloc\n     }\n     double progress_current = progress_begin;\n     while (block_height && !fAbortRescan && !chain().shutdownRequested()) {\n-        m_scanning_progress = (progress_current - progress_begin) / (progress_end - progress_begin);\n+        if (progress_end - progress_begin > 0.0) {\n+            m_scanning_progress = (progress_current - progress_begin) / (progress_end - progress_begin);\n+        } else {\n+            m_scanning_progress = 0.0;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17208#discussion_r346316653",
      "id" : 346316653,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0NjMxNjY1Mw==",
      "original_commit_id" : "ed3e04415752e929501c6eb05a432a2f6c178d69",
      "original_position" : 8,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 316959685,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17208",
      "updated_at" : "2019-11-14T14:52:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/346316653",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17208#discussion_r346357445"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17208"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/346357445"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Good point. Fixed!",
      "commit_id" : "9724a0c2ec673130b754fde0f0f6e8a1f07ed6de",
      "created_at" : "2019-11-14T14:53:32Z",
      "diff_hunk" : "@@ -1586,7 +1586,11 @@ CWallet::ScanResult CWallet::ScanForWalletTransactions(const uint256& start_bloc\n     }\n     double progress_current = progress_begin;\n     while (block_height && !fAbortRescan && !chain().shutdownRequested()) {\n-        m_scanning_progress = (progress_current - progress_begin) / (progress_end - progress_begin);\n+        if (progress_end - progress_begin > 0.0) {\n+            m_scanning_progress = (progress_current - progress_begin) / (progress_end - progress_begin);\n+        } else {\n+            m_scanning_progress = 0.0;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17208#discussion_r346357445",
      "id" : 346357445,
      "in_reply_to_id" : 346316653,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0NjM1NzQ0NQ==",
      "original_commit_id" : "ed3e04415752e929501c6eb05a432a2f6c178d69",
      "original_position" : 8,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 317013015,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17208",
      "updated_at" : "2019-11-14T14:53:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/346357445",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   }
]
