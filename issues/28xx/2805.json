{
   "assignee" : null,
   "body" : "Changes since Round 1:\r\n- Rebased on current master\r\n- Moved configure to root srcdir, and added a Makefile there\r\n- Split into several Makefile.am's with recursive build [1]\r\n- Work towards building correctly under gitian\r\n- Fixed/verified several build scenarios\r\n- Fixed up 'make dist' to work as a viable end-result packaging mechanism [2]\r\n\r\n1. Personally I believe that splitting up the build is a major regression from RFC1. This was done by request here. Most projects end up spending lots of time moving in the opposite direction, as a recursive build tends to be slower, more complicated, and more-error prone. That proves to be the case here as well, but I've attempted to handle it as gracefully as possible.\r\n\r\n2. 'make dist' can be used to produce a bootstrapped tarball with git information included, intended for distribution as an 'official source release'. This is the equivalent of taking a fresh git clone, running './autogen.sh', and tar'ing up the result. This is the common procedure for autotools projects.\r\n\r\nAt this point I consider it to be merge-ready, with the exception of verification of gitian descriptors and documentation. Presumably removal of the old makefile.* would coincide with updated documentation. Several things can be improved and cleaned up after merge (dealing with versioning, for example), but I've tried to ignore these things as much as possible for the sake of a quick merge.\r\n\r\nEdit: Removed crazy markup that looked like yelling -- sorry.\r\n\r\n--\r\n\r\nHere is the second go at an Autotools build system replacement. It is meant to be a drop-in replacement for the current system(s), providing the same features with no net changes. It can also live side-by-side with the old system while sharing the same build-related variables in order to facilitate a smooth transition.\r\n\r\nI hope the benefits are obvious enough: A single/shared build procedure, portability, ease of packaging, ease for downstreams, ease for repository maintainers, cross-compilation, etc. I don't vouch for Autotools in any way, in fact, this configure.am is downright ugly (mainly just because of mingw though), but it's portable and well-established.\r\n\r\nI've opted not to write the documentation yet, because I would like to see what comments/concerns come out of the first round of review before committing to anything.\r\n\r\nThis does away with the need for qmake, as the Makefile is capable of generating everything it needs in a portable way.\r\n\r\nQt-creator can be used with the Autotools plugin, and is working nicely. For those who wish to use it this way, install the Autotools plugin from the 'about' menu, then open Makefile.am as a project. It handles the build procedure, so there is no need to mess with the command-line procedures listed below.\r\n\r\nBuilding from CLI:\r\nFor Linux, assuming the dependencies have been met, the build procedure looks like this:\r\n```\r\n./autogen.sh\r\n./configure\r\nmake\r\n```\r\nSame for OS X, but the pkg-config path needs to be hooked up from macports first:\r\n```\r\necho \"/opt/local/share/aclocal\" | sudo tee -a /usr/share/aclocal/dirlist\r\n```\r\nFor mingw it's the same, but you will need to provide lots of paths in the form of:\r\n```\r\n./autogen.sh\r\nCPPFLAGS=\"-I/path/to/include -I/path/to/other/include\" LDFLAGS=\"-L/path/to/libs -L/path/to/other/libs\" ./configure\r\nmake\r\n```\r\nIn addition, there are helpers for qt and boost to help with finding some locations.\r\nUse ./configure --help to see the available options.\r\n\r\nNative windows built is untested, as I don't have a windows environment at my disposal.\r\n\r\nGitian should be working for win32 builds. I've guessed at Linux but have not yet verified.\r\n\r\n'make check' will run the unit tests and print the results.\r\n\r\nI've done my best to avoid adding any new behavior or features, and I would much prefer to aim for feature-parity before making any improvements.\r\n\r\nTODO:\r\n\r\n- Verify gitian descriptors.\r\n- Add documentation",
   "closed_at" : "2013-08-27T03:11:30Z",
   "closed_by" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/417043?v=3",
      "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
      "followers_url" : "https://api.github.com/users/theuni/followers",
      "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
      "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/theuni",
      "id" : 417043,
      "login" : "theuni",
      "organizations_url" : "https://api.github.com/users/theuni/orgs",
      "received_events_url" : "https://api.github.com/users/theuni/received_events",
      "repos_url" : "https://api.github.com/users/theuni/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/theuni"
   },
   "comments" : 30,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2805/comments",
   "created_at" : "2013-07-01T05:18:38Z",
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2805/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/pull/2805",
   "id" : 16199735,
   "labels" : [],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2805/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "number" : 2805,
   "pull_request" : {
      "diff_url" : "https://github.com/bitcoin/bitcoin/pull/2805.diff",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2805",
      "patch_url" : "https://github.com/bitcoin/bitcoin/pull/2805.patch",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/2805"
   },
   "state" : "closed",
   "title" : "Autotools RFC: Round 2",
   "updated_at" : "2013-08-27T03:28:26Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2805",
   "user" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/417043?v=3",
      "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
      "followers_url" : "https://api.github.com/users/theuni/followers",
      "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
      "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/theuni",
      "id" : 417043,
      "login" : "theuni",
      "organizations_url" : "https://api.github.com/users/theuni/orgs",
      "received_events_url" : "https://api.github.com/users/theuni/received_events",
      "repos_url" : "https://api.github.com/users/theuni/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/theuni"
   }
}
