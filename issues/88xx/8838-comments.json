[
   {
      "body" : "Log entries that change their format are really bad for tooling. Is there any reason why it's bad to log limits that are at their maximum because they're not being applied?\r\n\r\n",
      "created_at" : "2016-10-03T03:12:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8838#issuecomment-251018445",
      "id" : 251018445,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8838",
      "updated_at" : "2016-10-03T03:12:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/251018445",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "The current code is not logging `nBlockSize` at its maximum when size is not being accounted. Under the current code, when a block is being created, the following happens:\r\n\r\n- set `nBlockSize` to 1000 (bytes) to reserve space for the coinbase transaction\r\n- set `nBlockWeight` to 4000 to reserve space for the coinbase transaction\r\n- for every transaction that is added to the block:\r\n    - if size is being accounted update `nBlockSize`\r\n    - update `nBlockWeight` \r\n- when the block is complete, log `nBlockSize` and not `nBlockWeight` \r\n\r\nThat means that if size is not being accounted, CreateNewBlock always logs that a block of size 1000 (bytes) has been created.\r\n\r\nI don't think we should just change the log to output size = 1000000 if size isn't being accounted.\r\n\r\nI propose the following change:\r\n- add `nBlockWeight` to the log\r\n- if size is being accounted, both size and weight will be logged correctly\r\n- if size is not being accounted, set size to 0 and log weight correctly.",
      "created_at" : "2016-10-03T13:15:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8838#issuecomment-251102599",
      "id" : 251102599,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8838",
      "updated_at" : "2016-10-03T13:15:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/251102599",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=3",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "body" : "Maybe @gmaxwell's concern can be addressed by logging 'total size ?'",
      "created_at" : "2016-10-03T13:36:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8838#issuecomment-251107253",
      "id" : 251107253,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8838",
      "updated_at" : "2016-10-03T13:36:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/251107253",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Alternatively, you can always just compute the total block size using ::GetSerializeSize(block, SER_NETWORK, PROTOCOL_VERSION).",
      "created_at" : "2016-10-03T13:38:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8838#issuecomment-251107604",
      "id" : 251107604,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8838",
      "updated_at" : "2016-10-03T13:38:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/251107604",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   }
]
