[
   {
      "body" : "Concept ACK fc7c43a537f58b5befc8a8d9c2797ddaa06fa7a0. Does this need backport to 0.13?",
      "created_at" : "2016-08-07T08:13:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8478#issuecomment-238069915",
      "id" : 238069915,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8478",
      "updated_at" : "2016-08-07T08:13:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/238069915",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=3",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "body" : "I do not think adding it into documentation is enough... Check for it or install it (I do not know the exact depends workings).",
      "created_at" : "2016-08-07T08:18:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8478#issuecomment-238070093",
      "id" : 238070093,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8478",
      "updated_at" : "2016-08-07T08:18:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/238070093",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6848764?v=3",
         "events_url" : "https://api.github.com/users/paveljanik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/paveljanik/followers",
         "following_url" : "https://api.github.com/users/paveljanik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/paveljanik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/paveljanik",
         "id" : 6848764,
         "login" : "paveljanik",
         "organizations_url" : "https://api.github.com/users/paveljanik/orgs",
         "received_events_url" : "https://api.github.com/users/paveljanik/received_events",
         "repos_url" : "https://api.github.com/users/paveljanik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/paveljanik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/paveljanik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/paveljanik"
      }
   },
   {
      "body" : "And as curl is needed for other archs, it should be inserted elsewhere anyway.",
      "created_at" : "2016-08-07T08:22:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8478#issuecomment-238070234",
      "id" : 238070234,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8478",
      "updated_at" : "2016-08-07T08:22:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/238070234",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6848764?v=3",
         "events_url" : "https://api.github.com/users/paveljanik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/paveljanik/followers",
         "following_url" : "https://api.github.com/users/paveljanik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/paveljanik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/paveljanik",
         "id" : 6848764,
         "login" : "paveljanik",
         "organizations_url" : "https://api.github.com/users/paveljanik/orgs",
         "received_events_url" : "https://api.github.com/users/paveljanik/received_events",
         "repos_url" : "https://api.github.com/users/paveljanik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/paveljanik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/paveljanik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/paveljanik"
      }
   },
   {
      "body" : "The same is missing here:\r\n\r\n```\r\ndoc/build-windows.md:First install the toolchains:\r\n",
      "created_at" : "2016-08-07T08:32:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8478#issuecomment-238070576",
      "id" : 238070576,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8478",
      "updated_at" : "2016-08-07T08:32:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/238070576",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=3",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "body" : "We could do something like the following:\r\n\r\n```\r\nFrom 7deb7fc636717b6a0457039bf10d6c5b81076d3f Mon Sep 17 00:00:00 2001\r\nFrom: Joseph Bisch <joseph.bisch@gmail.com>\r\nDate: Sun, 7 Aug 2016 16:17:11 -0600\r\nSubject: [PATCH] Depends: Check if curl is installed and error out if not\r\n\r\n---\r\n depends/Makefile | 8 +++++++-\r\n 1 file changed, 7 insertions(+), 1 deletion(-)\r\n\r\ndiff --git a/depends/Makefile b/depends/Makefile\r\nindex dedb067..7937c54 100644\r\n--- a/depends/Makefile\r\n+++ b/depends/Makefile\r\n@@ -18,6 +18,8 @@ DOWNLOAD_RETRIES:=3\r\n HOST_ID_SALT ?= salt\r\n BUILD_ID_SALT ?= salt\r\n \r\n+CURL := $(shell command -v curl 2> /dev/null)\r\n+\r\n host:=$(BUILD)\r\n ifneq ($(HOST),)\r\n host:=$(HOST)\r\n@@ -168,7 +170,11 @@ check-packages: check-sources\r\n install: check-packages $(host_prefix)/share/config.site\r\n \r\n \r\n-download-one: check-sources $(all_sources)\r\n+download-one:\r\n+ifndef CURL\r\n+\t$(error \"curl is not available, please install curl\")\r\n+endif\r\n+\tcheck-sources $(all_sources)\r\n \r\n download-osx:\r\n \t@$(MAKE) -s HOST=x86_64-apple-darwin11 download-one\r\n-- \r\n2.9.0\r\n```\r\n\r\nWhich looks like:\r\n\r\n```\r\nMakefile:175: *** \"curl is not available, please install curl\".  Stop.\r\nmake: *** [Makefile:182: download-linux] Error 2\r\n```\r\n\r\nBut I don't think that is much more helpful over the default make message about curl missing. People should be able to tell what to do if they get a message about curl missing.\r\n\r\nIf anything we should display a message. I don't think we should be trying to figure out how to install curl on Linux and OS X. The user knows best how to use the package manager to install software. And we can't just add curl as another piece of software that is built by the depends process, because we use curl to download the source code. So we end up with a situation where we need curl to download curl source to build curl binary to download...and so on in a circular fashion.",
      "created_at" : "2016-08-07T22:29:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8478#issuecomment-238112617",
      "id" : 238112617,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8478",
      "updated_at" : "2016-08-07T22:29:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/238112617",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/665854?v=3",
         "events_url" : "https://api.github.com/users/josephbisch/events{/privacy}",
         "followers_url" : "https://api.github.com/users/josephbisch/followers",
         "following_url" : "https://api.github.com/users/josephbisch/following{/other_user}",
         "gists_url" : "https://api.github.com/users/josephbisch/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/josephbisch",
         "id" : 665854,
         "login" : "josephbisch",
         "organizations_url" : "https://api.github.com/users/josephbisch/orgs",
         "received_events_url" : "https://api.github.com/users/josephbisch/received_events",
         "repos_url" : "https://api.github.com/users/josephbisch/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/josephbisch/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/josephbisch/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/josephbisch"
      }
   },
   {
      "body" : "There is no plan to add curl to depends.\nInitially we used wget which happens to be installed on ubuntu out of the\nbox.\nDue to intermittent problems, it was switched to curl, which happens not to\nbe installed by default. As those docs refer to 'ubuntu vm', it makes sense\nto mention that curl is needed.\n",
      "created_at" : "2016-08-08T05:38:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8478#issuecomment-238145920",
      "id" : 238145920,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8478",
      "updated_at" : "2016-08-08T05:38:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/238145920",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=3",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/8478#discussion_r74001041"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/8478"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/74001041"
         }
      },
      "body" : "further below, a \"./autogen.sh\" is needed before the \"./configure\"...",
      "commit_id" : "fc7c43a537f58b5befc8a8d9c2797ddaa06fa7a0",
      "created_at" : "2016-08-09T05:46:14Z",
      "diff_hunk" : "@@ -293,7 +293,7 @@ These steps can be performed on, for example, an Ubuntu VM. The depends system\n will also work on other Linux distributions, however the commands for\n installing the toolchain will be different.\n \n-First install the toolchain:\n+First install the toolchain (you may need to install curl, too):\n \n     sudo apt-get install g++-arm-linux-gnueabihf\n ",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8478#discussion_r74001041",
      "id" : 74001041,
      "original_commit_id" : "fc7c43a537f58b5befc8a8d9c2797ddaa06fa7a0",
      "original_position" : 8,
      "path" : "doc/build-unix.md",
      "position" : 8,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/8478",
      "updated_at" : "2016-08-09T05:46:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/74001041",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1530283?v=3",
         "events_url" : "https://api.github.com/users/rebroad/events{/privacy}",
         "followers_url" : "https://api.github.com/users/rebroad/followers",
         "following_url" : "https://api.github.com/users/rebroad/following{/other_user}",
         "gists_url" : "https://api.github.com/users/rebroad/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/rebroad",
         "id" : 1530283,
         "login" : "rebroad",
         "organizations_url" : "https://api.github.com/users/rebroad/orgs",
         "received_events_url" : "https://api.github.com/users/rebroad/received_events",
         "repos_url" : "https://api.github.com/users/rebroad/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/rebroad/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/rebroad/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/rebroad"
      }
   },
   {
      "body" : "I'd suggest to just add 'curl' to the `apt-get` line, this more copy-paste friendly:\r\n```\r\nFirst install the toolchain and curl:\r\n\r\n     sudo apt-get install g++-arm-linux-gnueabihf curl\r\n```\r\nThere is no hurt in installing it if it is already installed.\r\n",
      "created_at" : "2016-08-11T13:42:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8478#issuecomment-239164267",
      "id" : 239164267,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8478",
      "updated_at" : "2016-08-11T13:42:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/239164267",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "> I'd suggest to just add 'curl' to the apt-get line, this more copy-paste friendly:\r\n\r\nAgree",
      "created_at" : "2016-08-11T15:13:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8478#issuecomment-239192117",
      "id" : 239192117,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8478",
      "updated_at" : "2016-08-11T15:13:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/239192117",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=3",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "body" : "Agreed.",
      "created_at" : "2016-08-11T18:03:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8478#issuecomment-239241218",
      "id" : 239241218,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8478",
      "updated_at" : "2016-08-11T18:03:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/239241218",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/417043?v=3",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   }
]
