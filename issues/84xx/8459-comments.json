[
   {
      "body" : "ACK",
      "created_at" : "2016-08-04T20:59:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8459#issuecomment-237681704",
      "id" : 237681704,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8459",
      "updated_at" : "2016-08-04T20:59:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/237681704",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Nack, see discussion in #8374 ",
      "created_at" : "2016-08-04T21:07:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8459#issuecomment-237683732",
      "id" : 237683732,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8459",
      "updated_at" : "2016-08-04T21:07:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/237683732",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7463573?v=3",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "body" : "@sdaftuar #8374 should never have been merged with this language in the first place. The advice given is bad advice and harmful to Bitcoin. There is no reason to suspect there is any observable performance difference either, and even if there was, it would not be an excuse to give bad advice.",
      "created_at" : "2016-08-04T21:25:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8459#issuecomment-237688370",
      "id" : 237688370,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8459",
      "updated_at" : "2016-08-04T21:25:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/237688370",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "@luke-jr The advice given is something that's inevitably going to happen by adopting segwit, and you can't expect miners to decide to cut in their own flesh in order to making competition easier.\r\n\r\nI am fine with not giving advice either way. I prefer to still mention the performance effect, though.",
      "created_at" : "2016-08-04T21:35:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8459#issuecomment-237690948",
      "id" : 237690948,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8459",
      "updated_at" : "2016-08-04T21:35:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/237690948",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "If miners start producing way-too-large blocks immediately when segwit activates, *that* would be cutting their own flesh.\r\n\r\nThere is no evidence of a performance effect, and fixing any trivial difference is so simple here (3 easily-reviewed LOC: 29000050e575a26b7f7c853cbccdb6bc60ddfdd9) that it would be very poor judgement to prefer giving bad advice rather than just fixing it.",
      "created_at" : "2016-08-04T21:44:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8459#issuecomment-237692998",
      "id" : 237692998,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8459",
      "updated_at" : "2016-08-04T21:48:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/237692998",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "NACK these changes\r\n\r\nIt's important to explain the changes so that miners can make educated decisions on how to use the code.  `blockmaxweight` is now the consensus enforced limit and I think its pretty relevant to explain to miners that using that is the most direct way to create blocks that maximize fees while being consensus compatible.  Although it is true in this version you could achieve the same effect using `blockmaxsize`, you'll be doing extra computation for no reason.\r\n\r\nIn the end, I think its most important to provide explanation about what the functionality and command line option changes are and the prior version does a better job at that than this.\r\n  ",
      "created_at" : "2016-08-04T21:54:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8459#issuecomment-237695494",
      "id" : 237695494,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8459",
      "updated_at" : "2016-08-04T21:54:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/237695494",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4360349?v=3",
         "events_url" : "https://api.github.com/users/morcos/events{/privacy}",
         "followers_url" : "https://api.github.com/users/morcos/followers",
         "following_url" : "https://api.github.com/users/morcos/following{/other_user}",
         "gists_url" : "https://api.github.com/users/morcos/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/morcos",
         "id" : 4360349,
         "login" : "morcos",
         "organizations_url" : "https://api.github.com/users/morcos/orgs",
         "received_events_url" : "https://api.github.com/users/morcos/received_events",
         "repos_url" : "https://api.github.com/users/morcos/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/morcos/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/morcos/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/morcos"
      }
   },
   {
      "body" : "Compromise: can we just remove the second and third paragraph modified by this PR? That way we still explain the difference in what the code optimizes for, without the performance effect (which is at this point not known to be significant, and in any case, not worse than 0.12).",
      "created_at" : "2016-08-04T21:58:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8459#issuecomment-237696331",
      "id" : 237696331,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8459",
      "updated_at" : "2016-08-04T21:58:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/237696331",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Ok, I made the compromise change suggested by @sipa.\r\n\r\nI also added (in a separate commit) what I believe explains the change clearer, which can be merged with this or backed out if there's some issue with it.",
      "created_at" : "2016-08-04T22:35:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8459#issuecomment-237703907",
      "id" : 237703907,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8459",
      "updated_at" : "2016-08-04T22:35:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/237703907",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "NACK removal of mentioning the potential performance effect from using -blockmaxsize.\r\n\r\nIn rewriting CreateNewBlock to do ancestor feerate mining, an important consideration was being able to fail fast if a package wouldn't fit in a block, due to size or sigops.  In that situation, we are able to skip the call to CalculateMemPoolAncestors.  This makes it pretty cheap to iterate the whole mempool looking for things to add, even when we're very close to the size (or sigops) limit.  (The old addScoreTx's had a heuristic for bailing out early from mempool looping when it got close to the size limit, I believe because it had to do more expensive calculations to figure out if a transaction could be added to a block.)\r\n\r\nHowever, the -blockmaxsize constraint cannot currently be calculated at the package level -- we can only test for that constraint after calculating the ancestors of a transaction to be added, and considering each one in turn.  Consequently, if someone were to configure the mining code with a -blockmaxsize that is less than -blockmaxweight/4, then we should expect a very inefficient result in CreateNewBlock, because once we're very close to the -blockmaxsize constraint but still have room on the weight constraint, we'd be walking everything in the mempool and calculating ancestors for each transaction, and then walking those ancestors, just to find that the package fails as we count each transaction's bytes.  With a default chain limit length of 25, I think as a first guess, in the worst case I'd assume that such a configuration could slow down the transaction selection part of CreateNewBlock by roughly a factor of 25.\r\n\r\nSo to be clear, it is incorrect to say that the only difference between using -blockmaxsize and -blockmaxweight is \"adding numbers\".  These options can interact badly, and it's important to disclose that potential performance degradation if misused.  I think the existing release notes language does an adequate job of neutrally explaining the issue.  I would not object to language changes that further clarify how these parameters interact, but I strongly object to withholding material information about how the software works.",
      "created_at" : "2016-08-05T01:06:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8459#issuecomment-237729916",
      "id" : 237729916,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8459",
      "updated_at" : "2016-08-05T01:06:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/237729916",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7463573?v=3",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "body" : "Ah, I wasn't aware of the risk for long iterations to fill up the last part\nof a block. I retract my suggestion.\n",
      "created_at" : "2016-08-05T01:45:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8459#issuecomment-237734754",
      "id" : 237734754,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8459",
      "updated_at" : "2016-08-05T01:45:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/237734754",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   }
]
