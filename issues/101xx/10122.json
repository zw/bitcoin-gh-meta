{
   "assignee" : null,
   "assignees" : [],
   "author_association" : "NONE",
   "body" : "The documentation for -maxtxfee seems to imply that it will abort a transaction if the transaction's fee is larger than the specified amount. The actual behavior is to just use a fee equal to maxtxfee when the calculated fee is larger.\r\n\r\n -maxtxfee=<amt>\r\n       Maximum total fees (in BTC) to use in a single wallet transaction or raw\r\n       transaction; setting this too low may abort large transactions\r\n       (default: 0.10)\r\n\r\nIn a specific case I observed, a large transaction created with sendtransaction and paytxfee 0.0012 ended up being broadcast with a fee of 15 sat/byte rather than aborted, which seems unintuitive.\r\n\r\nHowever, looking at https://github.com/bitcoin/bitcoin/blob/master/src/wallet/wallet.cpp#L2747 in CWallet::GetMinimumFee this seems intended, and as far as I can tell, the only situation where a transaction will be aborted is if if the fee is below minrelaytxfee, rather than paytxfee.\r\n\r\nIs this really the intended behavior? I feel like it would make far more sense that, if paytxfee is set explicitly, the transaction should be aborted if maxtxfee causes the calculated fee to drop below that value.\r\n\r\nIf not, I would argue that at the very least, the documentation for this setting should refer to the minrelaytxfee threshold specifically.",
   "closed_at" : null,
   "closed_by" : null,
   "comments" : 6,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10122/comments",
   "created_at" : "2017-03-30T15:06:30Z",
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10122/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/issues/10122",
   "id" : 218229060,
   "labels" : [
      {
         "color" : "5319e7",
         "default" : false,
         "id" : 82428251,
         "name" : "TX fees and policy",
         "node_id" : "MDU6TGFiZWw4MjQyODI1MQ==",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/TX%20fees%20and%20policy"
      },
      {
         "color" : "99a810",
         "default" : false,
         "id" : 749416508,
         "name" : "Up for grabs",
         "node_id" : "MDU6TGFiZWw3NDk0MTY1MDg=",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/Up%20for%20grabs"
      },
      {
         "color" : "08a781",
         "default" : false,
         "id" : 149424,
         "name" : "Wallet",
         "node_id" : "MDU6TGFiZWwxNDk0MjQ=",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/Wallet"
      }
   ],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10122/labels{/name}",
   "locked" : false,
   "milestone" : {
      "closed_at" : null,
      "closed_issues" : 10,
      "created_at" : "2018-05-31T19:40:07Z",
      "creator" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      },
      "description" : null,
      "due_on" : null,
      "html_url" : "https://github.com/bitcoin/bitcoin/milestone/37",
      "id" : 3391434,
      "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/milestones/37/labels",
      "node_id" : "MDk6TWlsZXN0b25lMzM5MTQzNA==",
      "number" : 37,
      "open_issues" : 18,
      "state" : "open",
      "title" : "0.19.0",
      "updated_at" : "2019-03-19T18:55:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/milestones/37"
   },
   "node_id" : "MDU6SXNzdWUyMTgyMjkwNjA=",
   "number" : 10122,
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "open",
   "title" : "Unexpected -maxtxfee behavior",
   "updated_at" : "2019-03-19T18:56:11Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10122",
   "user" : {
      "avatar_url" : "https://avatars2.githubusercontent.com/u/17721714?v=4",
      "events_url" : "https://api.github.com/users/Celean/events{/privacy}",
      "followers_url" : "https://api.github.com/users/Celean/followers",
      "following_url" : "https://api.github.com/users/Celean/following{/other_user}",
      "gists_url" : "https://api.github.com/users/Celean/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/Celean",
      "id" : 17721714,
      "login" : "Celean",
      "node_id" : "MDQ6VXNlcjE3NzIxNzE0",
      "organizations_url" : "https://api.github.com/users/Celean/orgs",
      "received_events_url" : "https://api.github.com/users/Celean/received_events",
      "repos_url" : "https://api.github.com/users/Celean/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/Celean/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/Celean/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/Celean"
   }
}
