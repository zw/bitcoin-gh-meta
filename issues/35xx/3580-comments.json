[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/3580#discussion_r9175199"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/3580"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/9175199"
         }
      },
      "body" : "Typo?",
      "commit_id" : "b9c3ede02922ab4843c356c0f3df2b1618c73ae5",
      "created_at" : "2014-01-26T10:13:55Z",
      "diff_hunk" : "@@ -2306,9 +2306,23 @@ bool ProcessBlock(CValidationState &state, CNode* pfrom, CBlock* pblock, CDiskBl\n         return true;\n     }\n \n-    // Store to disk\n-    if (!AcceptBlock(*pblock, state, dbp))\n+    // Use a dummy CValidationState so an invalid transaction in a block with\n+    // valid proof-of-work does not result in the relaying node getting banned.\n+    // We do this so that nodes can, in the future, relay blocks as soon\n+    // as the basic, fast checks in CheckBlock are done and not risk being\n+    // DoS-banned if the more expensive AcceptBlock checks find an invalid\n+    // transaction.\n+    // There is safe because it would be insanely expensive for an attacker",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3580#discussion_r9175199",
      "id" : 9175199,
      "original_commit_id" : "0556a112a75d3998ab343020244d2b9031eccacc",
      "original_position" : 21,
      "path" : "src/main.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/3580",
      "updated_at" : "2014-01-29T13:32:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/9175199",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2559390?v=3",
         "events_url" : "https://api.github.com/users/Michagogo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Michagogo/followers",
         "following_url" : "https://api.github.com/users/Michagogo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Michagogo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Michagogo",
         "id" : 2559390,
         "login" : "Michagogo",
         "organizations_url" : "https://api.github.com/users/Michagogo/orgs",
         "received_events_url" : "https://api.github.com/users/Michagogo/received_events",
         "repos_url" : "https://api.github.com/users/Michagogo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Michagogo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Michagogo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Michagogo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/3580#discussion_r9973748"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/3580"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/9973748"
         }
      },
      "body" : "The previous sentence used up less storage space...",
      "commit_id" : "b9c3ede02922ab4843c356c0f3df2b1618c73ae5",
      "created_at" : "2014-02-23T00:28:27Z",
      "diff_hunk" : "@@ -28,7 +28,7 @@\n using namespace boost;\n \n #if defined(NDEBUG)\n-# error \"Bitcoin cannot be compiled without assertions.\"\n+# error \"Bitcoin must be compiled with assertions enabled.\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3580#discussion_r9973748",
      "id" : 9973748,
      "original_commit_id" : "b9c3ede02922ab4843c356c0f3df2b1618c73ae5",
      "original_position" : 5,
      "path" : "src/main.cpp",
      "position" : 5,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/3580",
      "updated_at" : "2014-02-23T00:28:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/9973748",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1530283?v=3",
         "events_url" : "https://api.github.com/users/rebroad/events{/privacy}",
         "followers_url" : "https://api.github.com/users/rebroad/followers",
         "following_url" : "https://api.github.com/users/rebroad/following{/other_user}",
         "gists_url" : "https://api.github.com/users/rebroad/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/rebroad",
         "id" : 1530283,
         "login" : "rebroad",
         "organizations_url" : "https://api.github.com/users/rebroad/orgs",
         "received_events_url" : "https://api.github.com/users/rebroad/received_events",
         "repos_url" : "https://api.github.com/users/rebroad/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/rebroad/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/rebroad/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/rebroad"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/3580#discussion_r9974865"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/3580"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/9974865"
         }
      },
      "body" : "Github would also use less storage space without your pointless comment :)",
      "commit_id" : "b9c3ede02922ab4843c356c0f3df2b1618c73ae5",
      "created_at" : "2014-02-23T08:24:58Z",
      "diff_hunk" : "@@ -28,7 +28,7 @@\n using namespace boost;\n \n #if defined(NDEBUG)\n-# error \"Bitcoin cannot be compiled without assertions.\"\n+# error \"Bitcoin must be compiled with assertions enabled.\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3580#discussion_r9974865",
      "id" : 9974865,
      "original_commit_id" : "b9c3ede02922ab4843c356c0f3df2b1618c73ae5",
      "original_position" : 5,
      "path" : "src/main.cpp",
      "position" : 5,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/3580",
      "updated_at" : "2014-02-23T08:24:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/9974865",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "This looks good to me. What's needed to merge it? More reviews?",
      "created_at" : "2014-04-24T16:21:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3580#issuecomment-41300428",
      "id" : 41300428,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3580",
      "updated_at" : "2014-04-24T16:21:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/41300428",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/971089?v=3",
         "events_url" : "https://api.github.com/users/mikehearn/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mikehearn/followers",
         "following_url" : "https://api.github.com/users/mikehearn/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mikehearn/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mikehearn",
         "id" : 971089,
         "login" : "mikehearn",
         "organizations_url" : "https://api.github.com/users/mikehearn/orgs",
         "received_events_url" : "https://api.github.com/users/mikehearn/received_events",
         "repos_url" : "https://api.github.com/users/mikehearn/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mikehearn/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mikehearn/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mikehearn"
      }
   },
   {
      "body" : "Yes, a few more reviews and ACKs would be nice. It is a small change, but it does affect main.cpp.\r\n",
      "created_at" : "2014-04-24T16:33:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3580#issuecomment-41301900",
      "id" : 41301900,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3580",
      "updated_at" : "2014-04-24T16:33:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/41301900",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "So the only concern here is that it makes DoS protection solely rely on hardness of PoW. That is probably safe, but it breaks the de facto rule on the network of not ever relaying data that is not known to be correct.\r\n\r\nAn alternative (first suggested by @maaku, I think) is just fast-relaying block headers as soon as they are validated, and using header-first-seen as tie breaker for choosing active chains in case of a fork. This does not mean deviating from that de facto rule, can be extremely fast (it doesn't even need the inv/getdata roundtrip, and doesn't need the block be available to be queried). I wonder what the consequences could be of someone broadcasting their header, and waiting a bit before broadcasting the block, though.",
      "created_at" : "2014-04-24T16:40:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3580#issuecomment-41302707",
      "id" : 41302707,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3580",
      "updated_at" : "2014-04-24T16:40:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/41302707",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Yes, as soon as headers-first is ready (I'm willing to help on that), the better solution is to fast-relay headers and still DoS-ban on a bad block once it is finally fetched (DoS the peer you got the block from, not the block header).",
      "created_at" : "2014-04-24T17:23:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3580#issuecomment-41307913",
      "id" : 41307913,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3580",
      "updated_at" : "2014-04-24T22:36:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/41307913",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69154?v=3",
         "events_url" : "https://api.github.com/users/maaku/events{/privacy}",
         "followers_url" : "https://api.github.com/users/maaku/followers",
         "following_url" : "https://api.github.com/users/maaku/following{/other_user}",
         "gists_url" : "https://api.github.com/users/maaku/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/maaku",
         "id" : 69154,
         "login" : "maaku",
         "organizations_url" : "https://api.github.com/users/maaku/orgs",
         "received_events_url" : "https://api.github.com/users/maaku/received_events",
         "repos_url" : "https://api.github.com/users/maaku/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/maaku/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/maaku/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/maaku"
      }
   },
   {
      "body" : "I don't think we should be serving blocks where we are unsure of the validity identically to blocks that we've validated. Handing bad blocks to SPV nodes, for example, risks creating a network partition between full nodes and SPV nodes even where the SPV nodes are connected only to honest good nodes. \r\n\r\nFailing to hang up on nodes giving us bad blocks (which they claim are good and verified) also means that in the case where there is a rule inconsistency the network may end up partitioned simply because nodes do not disconnect peers with the wrong rules and go find ones that agree with them.  These are all concerns which should be increasing because mining on alternative implementations is now being promoted (https://twitter.com/dajohi/status/455765633032916992).\r\n\r\nLuke had a pull a while back that IIRC added a new unchecked getblock. I think thats a better path: Don't hang up on an invalid block when we asked the peer for an untested block, do hang up when we asked for a tested one.  SPV clients that count on full nodes verifying for them would just never request untested blocks.\r\n",
      "created_at" : "2014-04-24T18:07:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3580#issuecomment-41312850",
      "id" : 41312850,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3580",
      "updated_at" : "2014-04-24T18:07:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/41312850",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "How about adding a message that means 'I am fine with being told about\nblocks that are not necessarily valid', which is sent by new nodes at\nstartup to new protocol version peers. SPV nodes or block analysis/wallet\nwatching implementation without validation support would not set it?",
      "created_at" : "2014-04-24T20:45:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3580#issuecomment-41329860",
      "id" : 41329860,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3580",
      "updated_at" : "2014-04-24T20:45:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/41329860",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Could that also have a \"I have now successfully validated block XYZ\" message that gets sent when validation is complete to peers who've we've send unvalidated blocks to?   If soÃ¢ÂÂ we'd use that to find different peers if we have a peer that is obviously imposing different validation rules than us.\r\n\r\nIn which case, I think thats basically isomorphic to the alternative getblock and seems reasonable to me.",
      "created_at" : "2014-04-24T20:58:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3580#issuecomment-41331309",
      "id" : 41331309,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3580",
      "updated_at" : "2014-04-24T20:58:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/41331309",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "A future change to relay invalid blocks with valid PoW may be controversial, but I see no problem with this PR. If a node sends us invalid blocks with valid PoW, it's unlikely that that node is performing a DoS attack. Banning the node for DoS seems wrong for this reason.\r\n\r\nBesides enabling future changes, this change might also help transaction propagation in a hardfork by preventing a network split.",
      "created_at" : "2014-04-24T22:25:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3580#issuecomment-41340195",
      "id" : 41340195,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3580",
      "updated_at" : "2014-04-24T22:25:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/41340195",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4348296?v=3",
         "events_url" : "https://api.github.com/users/leofidus/events{/privacy}",
         "followers_url" : "https://api.github.com/users/leofidus/followers",
         "following_url" : "https://api.github.com/users/leofidus/following{/other_user}",
         "gists_url" : "https://api.github.com/users/leofidus/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/leofidus",
         "id" : 4348296,
         "login" : "leofidus",
         "organizations_url" : "https://api.github.com/users/leofidus/orgs",
         "received_events_url" : "https://api.github.com/users/leofidus/received_events",
         "repos_url" : "https://api.github.com/users/leofidus/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/leofidus/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/leofidus/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/leofidus"
      }
   },
   {
      "body" : "@leofidus  No, it can make a spit significantly worse, because a peer running the majority code may be partitioned by minority nodes which do not relay blocks it will accept. That is hardly does-no-harm.  It could also enable theft from SPV clients who accept transactions from blocks believing them to be valid and that their full node peers are protecting them by validing blocks. Again, that is hardly do-no-harm.",
      "created_at" : "2014-04-24T22:27:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3580#issuecomment-41340396",
      "id" : 41340396,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3580",
      "updated_at" : "2014-04-24T22:27:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/41340396",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "Note how this can be used to help force a blocksize increase through - the nodes that did not increase the blocksize will still relay invalid and oversized blocks for the ones that did. (up to 20MiB, the max serialization limit)",
      "created_at" : "2014-06-13T03:00:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3580#issuecomment-45971343",
      "id" : 45971343,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3580",
      "updated_at" : "2014-06-13T03:00:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/45971343",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7042?v=3",
         "events_url" : "https://api.github.com/users/petertodd/events{/privacy}",
         "followers_url" : "https://api.github.com/users/petertodd/followers",
         "following_url" : "https://api.github.com/users/petertodd/following{/other_user}",
         "gists_url" : "https://api.github.com/users/petertodd/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/petertodd",
         "id" : 7042,
         "login" : "petertodd",
         "organizations_url" : "https://api.github.com/users/petertodd/orgs",
         "received_events_url" : "https://api.github.com/users/petertodd/received_events",
         "repos_url" : "https://api.github.com/users/petertodd/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/petertodd/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/petertodd/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/petertodd"
      }
   },
   {
      "body" : "@petertodd: If I understand the idea correctly (@gavinandresen correct me if I'm wrong), it would mean relaying blocks as soon as the header plus transactions have been received (and the basic checks on those have been performed, but before doing the full (utxo looking, signature check) validity. As you obviously know the size of what you're going to relay before relaying it, it should be easy enough (and advisable, imho) to check that before relaying.",
      "created_at" : "2014-06-13T19:41:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3580#issuecomment-46052059",
      "id" : 46052059,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3580",
      "updated_at" : "2014-06-13T19:41:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/46052059",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Yup, I believe an easy fix would be to reduce the MAX_SIZE constant from 20MiB to 1MB. (+ some headroom?) That would have also make the \"padded tx\" attack last year much less severe.",
      "created_at" : "2014-06-13T19:49:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3580#issuecomment-46052717",
      "id" : 46052717,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3580",
      "updated_at" : "2014-06-13T19:49:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/46052717",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7042?v=3",
         "events_url" : "https://api.github.com/users/petertodd/events{/privacy}",
         "followers_url" : "https://api.github.com/users/petertodd/followers",
         "following_url" : "https://api.github.com/users/petertodd/following{/other_user}",
         "gists_url" : "https://api.github.com/users/petertodd/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/petertodd",
         "id" : 7042,
         "login" : "petertodd",
         "organizations_url" : "https://api.github.com/users/petertodd/orgs",
         "received_events_url" : "https://api.github.com/users/petertodd/received_events",
         "repos_url" : "https://api.github.com/users/petertodd/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/petertodd/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/petertodd/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/petertodd"
      }
   },
   {
      "body" : "@petertodd That too, but it's not even necessary. Just only relay after doing the header + transactions checks (which includes the 1MB limitation), but before the signature/utxo validation. Of course, that means no DoS banning senders of overly large blocks, but I don't really care about that nearly as much as an evil miner being able to make the entire network relay an obviously-violating-consensus rules 20 MB block.",
      "created_at" : "2014-06-13T19:55:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3580#issuecomment-46053212",
      "id" : 46053212,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3580",
      "updated_at" : "2014-06-13T19:55:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/46053212",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "@sipa Actually, looking at this again I think I misunderstood the logic in the patch, and it looks like CheckBlock() failing will still cause a DoS ban, so at least what *this* particular patch implements is ok re: blocksize. (in the sense that it can only be safely followed up by a patch that does CheckBlock() and PoW checks prior to relaying) gmaxwells arguments against this change still apply though.",
      "created_at" : "2014-06-13T20:40:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3580#issuecomment-46057422",
      "id" : 46057422,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3580",
      "updated_at" : "2014-06-13T20:40:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/46057422",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7042?v=3",
         "events_url" : "https://api.github.com/users/petertodd/events{/privacy}",
         "followers_url" : "https://api.github.com/users/petertodd/followers",
         "following_url" : "https://api.github.com/users/petertodd/following{/other_user}",
         "gists_url" : "https://api.github.com/users/petertodd/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/petertodd",
         "id" : 7042,
         "login" : "petertodd",
         "organizations_url" : "https://api.github.com/users/petertodd/orgs",
         "received_events_url" : "https://api.github.com/users/petertodd/received_events",
         "repos_url" : "https://api.github.com/users/petertodd/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/petertodd/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/petertodd/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/petertodd"
      }
   },
   {
      "body" : "Automatic sanity-testing: FAILED MERGE, see http://jenkins.bluematt.me/pull-tester/p3580_b9c3ede02922ab4843c356c0f3df2b1618c73ae5/ for test log.\n\nThis pull does not merge cleanly onto current master\nThis test script verifies pulls every time they are updated. It, however, dies sometimes and fails to test properly.  If you are waiting on a test, please check timestamps to verify that the test.log is moving at http://jenkins.bluematt.me/pull-tester/current/\nContact BlueMatt on freenode if something looks broken.",
      "created_at" : "2014-06-23T16:17:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3580#issuecomment-46866826",
      "id" : 46866826,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3580",
      "updated_at" : "2014-06-23T16:17:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/46866826",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2110907?v=3",
         "events_url" : "https://api.github.com/users/BitcoinPullTester/events{/privacy}",
         "followers_url" : "https://api.github.com/users/BitcoinPullTester/followers",
         "following_url" : "https://api.github.com/users/BitcoinPullTester/following{/other_user}",
         "gists_url" : "https://api.github.com/users/BitcoinPullTester/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/BitcoinPullTester",
         "id" : 2110907,
         "login" : "BitcoinPullTester",
         "organizations_url" : "https://api.github.com/users/BitcoinPullTester/orgs",
         "received_events_url" : "https://api.github.com/users/BitcoinPullTester/received_events",
         "repos_url" : "https://api.github.com/users/BitcoinPullTester/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/BitcoinPullTester/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/BitcoinPullTester/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/BitcoinPullTester"
      }
   },
   {
      "body" : "No consensus, and I don't care enough to work more on this.\r\n",
      "created_at" : "2014-07-04T19:04:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3580#issuecomment-48065952",
      "id" : 48065952,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3580",
      "updated_at" : "2014-07-04T19:04:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/48065952",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/331997?v=3",
         "events_url" : "https://api.github.com/users/gavinandresen/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gavinandresen/followers",
         "following_url" : "https://api.github.com/users/gavinandresen/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gavinandresen/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gavinandresen",
         "id" : 331997,
         "login" : "gavinandresen",
         "organizations_url" : "https://api.github.com/users/gavinandresen/orgs",
         "received_events_url" : "https://api.github.com/users/gavinandresen/received_events",
         "repos_url" : "https://api.github.com/users/gavinandresen/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gavinandresen/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gavinandresen/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gavinandresen"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/3580#discussion_r14569342"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/3580"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/14569342"
         }
      },
      "body" : "LOL",
      "commit_id" : "b9c3ede02922ab4843c356c0f3df2b1618c73ae5",
      "created_at" : "2014-07-05T04:36:28Z",
      "diff_hunk" : "@@ -28,7 +28,7 @@\n using namespace boost;\n \n #if defined(NDEBUG)\n-# error \"Bitcoin cannot be compiled without assertions.\"\n+# error \"Bitcoin must be compiled with assertions enabled.\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3580#discussion_r14569342",
      "id" : 14569342,
      "original_commit_id" : "b9c3ede02922ab4843c356c0f3df2b1618c73ae5",
      "original_position" : 5,
      "path" : "src/main.cpp",
      "position" : 5,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/3580",
      "updated_at" : "2014-07-05T04:36:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/14569342",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1530283?v=3",
         "events_url" : "https://api.github.com/users/rebroad/events{/privacy}",
         "followers_url" : "https://api.github.com/users/rebroad/followers",
         "following_url" : "https://api.github.com/users/rebroad/following{/other_user}",
         "gists_url" : "https://api.github.com/users/rebroad/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/rebroad",
         "id" : 1530283,
         "login" : "rebroad",
         "organizations_url" : "https://api.github.com/users/rebroad/orgs",
         "received_events_url" : "https://api.github.com/users/rebroad/received_events",
         "repos_url" : "https://api.github.com/users/rebroad/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/rebroad/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/rebroad/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/rebroad"
      }
   }
]
