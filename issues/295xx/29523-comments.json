[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage\nFor detailed information about the code coverage, see the [test coverage report](https://corecheck.dev/bitcoin/bitcoin/pulls/29523).\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\nA summary of reviews will appear here.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#29442](https://github.com/bitcoin/bitcoin/pull/29442) (wallet: Target a pre-defined utxo set composition by adjusting change outputs by remyers)\n* [#28366](https://github.com/bitcoin/bitcoin/pull/28366) (Fix waste calculation in SelectionResult by murchandamus)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "created_at" : "2024-03-01T09:38:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29523#issuecomment-1972844180",
      "id" : 1972844180,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29523",
      "node_id" : "IC_kwDOABII5851lzaU",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1972844180/reactions"
      },
      "updated_at" : "2024-03-01T17:20:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1972844180",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Some C.I jobs are failing, putting in draft while I try to address that.",
      "created_at" : "2024-03-01T10:27:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29523#issuecomment-1972928501",
      "id" : 1972928501,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29523",
      "node_id" : "IC_kwDOABII5851mH_1",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1972928501/reactions"
      },
      "updated_at" : "2024-03-01T10:27:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1972928501",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48946461?v=4",
         "events_url" : "https://api.github.com/users/ismaelsadeeq/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ismaelsadeeq/followers",
         "following_url" : "https://api.github.com/users/ismaelsadeeq/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ismaelsadeeq/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ismaelsadeeq",
         "id" : 48946461,
         "login" : "ismaelsadeeq",
         "node_id" : "MDQ6VXNlcjQ4OTQ2NDYx",
         "organizations_url" : "https://api.github.com/users/ismaelsadeeq/orgs",
         "received_events_url" : "https://api.github.com/users/ismaelsadeeq/received_events",
         "repos_url" : "https://api.github.com/users/ismaelsadeeq/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ismaelsadeeq/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ismaelsadeeq/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ismaelsadeeq"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Note for reviewers: eaf40cea9d31b43b4eb112e561fbadc1911e5732 has been added to ensure the calculation of `max_selection_weight` remains consistent and correct in the next commit 854acd72e99dc9f0924c5f0b5b7a657b39538911\r\n```\r\nint64_t` max_selection_weight = coin_selection_params.m_max_tx_weight.value_or(MAX_STANDARD_TX_WEIGHT) - static_cast<int64_t>(coin_selection_params.tx_noinputs_size * WITNESS_SCALE_FACTOR);\r\n```\r\nThis resolves the failure on the CI when compiling with ASan + LSan + UBSan + integer, without dependencies, USDT.\r\nhttps://cirrus-ci.com/task/6341256662482944",
      "created_at" : "2024-03-09T06:40:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29523#issuecomment-1986752160",
      "id" : 1986752160,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/29523",
      "node_id" : "IC_kwDOABII5852a26g",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1986752160/reactions"
      },
      "updated_at" : "2024-03-09T06:40:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1986752160",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48946461?v=4",
         "events_url" : "https://api.github.com/users/ismaelsadeeq/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ismaelsadeeq/followers",
         "following_url" : "https://api.github.com/users/ismaelsadeeq/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ismaelsadeeq/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ismaelsadeeq",
         "id" : 48946461,
         "login" : "ismaelsadeeq",
         "node_id" : "MDQ6VXNlcjQ4OTQ2NDYx",
         "organizations_url" : "https://api.github.com/users/ismaelsadeeq/orgs",
         "received_events_url" : "https://api.github.com/users/ismaelsadeeq/received_events",
         "repos_url" : "https://api.github.com/users/ismaelsadeeq/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ismaelsadeeq/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ismaelsadeeq/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ismaelsadeeq"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29523#discussion_r1528504926"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29523"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1528504926"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In \"[doc]: update reason for deducing change output weight\" (05373e632500670ff8bd65ed6621a039849886ad):\r\n\r\n_to deduct_ means to subtract, _to deduce_ means to draw a logical conclusion\r\n\r\n```suggestion\r\n    // Deduct change weight because remaining Coin Selection algorithms can create change output.\r\n```\r\n\r\nAlso in the commit message for that PR:\r\n\r\nCoinGrinder will _always_ produce a change output.\r\n\r\n```diff\r\n-`CoinGrinder` also might produce change output, listing all the\r\n+`CoinGrinder` will also produce a change output, listing all the\r\n```",
      "commit_id" : "8e256fe679236710549820ec48ac7c0793fcfd96",
      "created_at" : "2024-03-18T13:11:23Z",
      "diff_hunk" : "@@ -701,7 +701,7 @@ util::Result<SelectionResult> ChooseSelectionResult(interfaces::Chain& chain, co\n         } else append_error(bnb_result);\n     }\n \n-    // As Knapsack and SRD can create change, also deduce change weight.\n+    // Deduce change weight because remaining Coin Selection algorithms can create change output.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29523#discussion_r1528504926",
      "id" : 1528504926,
      "line" : 704,
      "node_id" : "PRRC_kwDOABII585bGyJe",
      "original_commit_id" : "05373e632500670ff8bd65ed6621a039849886ad",
      "original_line" : 704,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/wallet/spend.cpp",
      "position" : 19,
      "pull_request_review_id" : 1942922925,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29523",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1528504926/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-03-18T14:15:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1528504926",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4060799?v=4",
         "events_url" : "https://api.github.com/users/murchandamus/events{/privacy}",
         "followers_url" : "https://api.github.com/users/murchandamus/followers",
         "following_url" : "https://api.github.com/users/murchandamus/following{/other_user}",
         "gists_url" : "https://api.github.com/users/murchandamus/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/murchandamus",
         "id" : 4060799,
         "login" : "murchandamus",
         "node_id" : "MDQ6VXNlcjQwNjA3OTk=",
         "organizations_url" : "https://api.github.com/users/murchandamus/orgs",
         "received_events_url" : "https://api.github.com/users/murchandamus/received_events",
         "repos_url" : "https://api.github.com/users/murchandamus/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/murchandamus/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/murchandamus/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/murchandamus"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29523#discussion_r1528529931"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29523"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1528529931"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In \"[wallet]: change `max_selection_weight` to `int64_t`\" (eaf40cea9d31b43b4eb112e561fbadc1911e5732):\r\n\r\nThis commit surprises me. I guess being explicit is better than being implicit, so I would understand using `int32_t` instead of `int`, but I donât understand the motivation to switch to an `int64_t`. `int` in Bitcoin Core is always a signed 32-bit integer, because [Bitcoin Core only supports platforms where `int` is exactly 32 bits](https://github.com/bitcoin/bitcoin/blob/v26.0/src/compat/assumptions.h#L44). Therefore, the maximum value for `int` is 2<sup>31</sup>, i.e. a bit more than 2 billion. Since the blockweight is limited to 4 _million_ bytes, itâs unclear to me why we would need more than 32 bits for  `max_selection_weight`. What am I missing here?",
      "commit_id" : "8e256fe679236710549820ec48ac7c0793fcfd96",
      "created_at" : "2024-03-18T13:29:00Z",
      "diff_hunk" : "@@ -84,19 +84,19 @@ struct {\n  *        bound of the range.\n  * @param const CAmount& cost_of_change This is the cost of creating and spending a change output.\n  *        This plus selection_target is the upper bound of the range.\n- * @param int max_selection_weight The maximum allowed weight for a selection result to be valid.\n+ * @param int64_t max_selection_weight The maximum allowed weight for a selection result to be valid.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29523#discussion_r1528529931",
      "id" : 1528529931,
      "line" : 87,
      "node_id" : "PRRC_kwDOABII585bG4QL",
      "original_commit_id" : "eaf40cea9d31b43b4eb112e561fbadc1911e5732",
      "original_line" : 87,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/wallet/coinselection.cpp",
      "position" : 5,
      "pull_request_review_id" : 1942922925,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29523",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1528529931/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-03-18T14:15:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1528529931",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4060799?v=4",
         "events_url" : "https://api.github.com/users/murchandamus/events{/privacy}",
         "followers_url" : "https://api.github.com/users/murchandamus/followers",
         "following_url" : "https://api.github.com/users/murchandamus/following{/other_user}",
         "gists_url" : "https://api.github.com/users/murchandamus/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/murchandamus",
         "id" : 4060799,
         "login" : "murchandamus",
         "node_id" : "MDQ6VXNlcjQwNjA3OTk=",
         "organizations_url" : "https://api.github.com/users/murchandamus/orgs",
         "received_events_url" : "https://api.github.com/users/murchandamus/received_events",
         "repos_url" : "https://api.github.com/users/murchandamus/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/murchandamus/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/murchandamus/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/murchandamus"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29523#discussion_r1528610398"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29523"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1528610398"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In \"[wallet, rpc]: add `max_tx_weight` to tx funding options\" (854acd72e99dc9f0924c5f0b5b7a657b39538911):\r\n\r\nWeight, not size:\r\n```suggestion\r\n     /** The maximum weight for this transaction */\r\n```",
      "commit_id" : "8e256fe679236710549820ec48ac7c0793fcfd96",
      "created_at" : "2024-03-18T13:53:54Z",
      "diff_hunk" : "@@ -174,10 +174,15 @@ struct CoinSelectionParams {\n      * 1) Received from other wallets, 2) replacing other txs, 3) that have been replaced.\n      */\n     bool m_include_unsafe_inputs = false;\n+    /**\n+     * The maximally sized transaction we are willing to make.\n+     */",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29523#discussion_r1528610398",
      "id" : 1528610398,
      "line" : 179,
      "node_id" : "PRRC_kwDOABII585bHL5e",
      "original_commit_id" : "854acd72e99dc9f0924c5f0b5b7a657b39538911",
      "original_line" : 179,
      "original_position" : 6,
      "original_start_line" : 177,
      "path" : "src/wallet/coinselection.h",
      "position" : 24,
      "pull_request_review_id" : 1942922925,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29523",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1528610398/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 177,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2024-03-18T14:15:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1528610398",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4060799?v=4",
         "events_url" : "https://api.github.com/users/murchandamus/events{/privacy}",
         "followers_url" : "https://api.github.com/users/murchandamus/followers",
         "following_url" : "https://api.github.com/users/murchandamus/following{/other_user}",
         "gists_url" : "https://api.github.com/users/murchandamus/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/murchandamus",
         "id" : 4060799,
         "login" : "murchandamus",
         "node_id" : "MDQ6VXNlcjQwNjA3OTk=",
         "organizations_url" : "https://api.github.com/users/murchandamus/orgs",
         "received_events_url" : "https://api.github.com/users/murchandamus/received_events",
         "repos_url" : "https://api.github.com/users/murchandamus/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/murchandamus/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/murchandamus/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/murchandamus"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29523#discussion_r1528621409"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29523"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1528621409"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In \"[wallet, rpc]: add `max_tx_weight` to tx funding options\" (854acd72e99dc9f0924c5f0b5b7a657b39538911):\r\n\r\nIâm a bit surprised by this sudden type change in a commit whose commit message doesnât mention it. While I agree in principal that `size_t` is an inappropriate type for variables storing `vsize` or `weight`, could you please explain your motivation to change the types, and especially in this context? If you are retyping unrelated variables, I think that should perhaps  be a separate commit. If you are changing the types of `change_output_size` and `tx_noinputs_size`, why not also `change_spend_size`?\r\nPerhaps if we are getting big into the business of changing the types of various transaction size, vsize and weight variables, we should perhaps consider introducing explicit types for weight, size, and vsize to prevent people accidentally mistaking them for the same type. On the other hand, that feels like the sort of change that will never propagate to the entire codebase, so Iâm not sure itâs a good idea to even start.",
      "commit_id" : "8e256fe679236710549820ec48ac7c0793fcfd96",
      "created_at" : "2024-03-18T13:59:54Z",
      "diff_hunk" : "@@ -174,10 +174,15 @@ struct CoinSelectionParams {\n      * 1) Received from other wallets, 2) replacing other txs, 3) that have been replaced.\n      */\n     bool m_include_unsafe_inputs = false;\n+    /**\n+     * The maximally sized transaction we are willing to make.\n+     */\n+    std::optional<int64_t> m_max_tx_weight{std::nullopt};\n \n-    CoinSelectionParams(FastRandomContext& rng_fast, size_t change_output_size, size_t change_spend_size,\n+    CoinSelectionParams(FastRandomContext& rng_fast, int change_output_size, size_t change_spend_size,",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29523#discussion_r1528621409",
      "id" : 1528621409,
      "line" : 182,
      "node_id" : "PRRC_kwDOABII585bHOlh",
      "original_commit_id" : "854acd72e99dc9f0924c5f0b5b7a657b39538911",
      "original_line" : 182,
      "original_position" : 10,
      "original_start_line" : null,
      "path" : "src/wallet/coinselection.h",
      "position" : 28,
      "pull_request_review_id" : 1942922925,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29523",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1528621409/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-03-18T14:15:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1528621409",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4060799?v=4",
         "events_url" : "https://api.github.com/users/murchandamus/events{/privacy}",
         "followers_url" : "https://api.github.com/users/murchandamus/followers",
         "following_url" : "https://api.github.com/users/murchandamus/following{/other_user}",
         "gists_url" : "https://api.github.com/users/murchandamus/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/murchandamus",
         "id" : 4060799,
         "login" : "murchandamus",
         "node_id" : "MDQ6VXNlcjQwNjA3OTk=",
         "organizations_url" : "https://api.github.com/users/murchandamus/orgs",
         "received_events_url" : "https://api.github.com/users/murchandamus/received_events",
         "repos_url" : "https://api.github.com/users/murchandamus/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/murchandamus/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/murchandamus/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/murchandamus"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29523#discussion_r1528649863"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29523"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1528649863"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In \"[rpc]: update `sendall` RPC to return the resulting tx weight\" (8e256fe679236710549820ec48ac7c0793fcfd96):\r\n\r\n\"bytes\" is not a unit of weight. I would expect that this is returning the weight in weight units or the vsize in vbytes.",
      "commit_id" : "8e256fe679236710549820ec48ac7c0793fcfd96",
      "created_at" : "2024-03-18T14:14:53Z",
      "diff_hunk" : "@@ -1374,6 +1374,7 @@ RPCHelpMan sendall()\n             RPCResult::Type::OBJ, \"\", \"\",\n                 {\n                     {RPCResult::Type::BOOL, \"complete\", \"If the transaction has a complete set of signatures\"},\n+                    {RPCResult::Type::NUM, \"weight\", \"The resulting transaction weight in bytes\"},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29523#discussion_r1528649863",
      "id" : 1528649863,
      "line" : 1377,
      "node_id" : "PRRC_kwDOABII585bHViH",
      "original_commit_id" : "8e256fe679236710549820ec48ac7c0793fcfd96",
      "original_line" : 1377,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/wallet/rpc/spend.cpp",
      "position" : 4,
      "pull_request_review_id" : 1942922925,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29523",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1528649863/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-03-18T14:15:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1528649863",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4060799?v=4",
         "events_url" : "https://api.github.com/users/murchandamus/events{/privacy}",
         "followers_url" : "https://api.github.com/users/murchandamus/followers",
         "following_url" : "https://api.github.com/users/murchandamus/following{/other_user}",
         "gists_url" : "https://api.github.com/users/murchandamus/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/murchandamus",
         "id" : 4060799,
         "login" : "murchandamus",
         "node_id" : "MDQ6VXNlcjQwNjA3OTk=",
         "organizations_url" : "https://api.github.com/users/murchandamus/orgs",
         "received_events_url" : "https://api.github.com/users/murchandamus/received_events",
         "repos_url" : "https://api.github.com/users/murchandamus/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/murchandamus/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/murchandamus/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/murchandamus"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29523#discussion_r1528745048"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29523"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1528745048"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Thanks for your review @murchandamus \r\n> Perhaps if we are getting big into the business of changing the types of various transaction size, vsize and weight variables, we should perhaps consider introducing explicit types for weight, size, and vsize to prevent people accidentally mistaking them for the same type.\r\n\r\nI agree with this suggestion and have same concern previously here https://github.com/bitcoin/bitcoin/pull/29242#discussion_r1469871777 should make the code cleaner\r\n\r\nSorry for not explaining the rationale behind this in the commit messages, I will try and explain why I did the change below\r\n\r\n\r\nOn master  we have\r\n```cpp\r\n    int max_inputs_weight = MAX_STANDARD_TX_WEIGHT - (coin_selection_params.tx_noinputs_size * WITNESS_SCALE_FACTOR);\r\n    \r\n\r\n   .......\r\n    max_inputs_weight -= (coin_selection_params.change_output_size * WITNESS_SCALE_FACTOR);\r\n\r\n```\r\n\r\nAfter this PR maximum transaction weight can be configured by users, so we now subtract from user provided maximum weight or use the default if not given.\r\n```cpp\r\nint max_selection_weight = coin_selection_params.m_max_tx_weight.value_or(MAX_STANDARD_TX\r\n_WEIGHT) - coin_selection_params.tx_noinputs_size * WITNESS_SCALE_FACTOR;\r\n```\r\n \r\n `m_max_tx_weight` is `int`,` tx_noinputs_size` and `change_output_size`  are both `size_t`.\r\ngiven that [Bitcoin Core only supports platforms where int is exactly 32 bits](https://github.com/bitcoin/bitcoin/blob/v26.0/src/compat/assumptions.h#L44)\r\n For signed integers (int), it ranges from -2^(31) to (2^(31)) - 1.\r\n For unsigned integers (unsigned int), it ranges from 0 to (2^(32)) - 1.\r\n \r\nThe issue arises when  after compiling with \"ASan + LSan + UBSan + integer, without dependencies, USDT\" and running the functional test.\r\n\r\nFrom  854acd72e9 we allow passing 0 weight  and test for that in the functional test,  results of subtracting `coin_selection_params.tx_noinputs_size * WITNESS_SCALE_FACTOR` from 0 causes  `max_selection_weight`  to have some positive value instead of negative. hence the test fails see  https://cirrus-ci.com/task/6341256662482944, This is reproducible locally.\r\n\r\nThats why I changed  `change_output_size`,  and `tx_noinputs_size`from `size_t` to `int64_t` and also use same datatype for `m_max_tx_weight` which works fine.\r\n\r\n\r\n\r\n```cpp\r\nint64_t max_selection_weight = coin_selection_params.m_max_tx_weight.value_or(MAX_STANDARD_TX\r\n_WEIGHT) - static_cast<int64_t>(coin_selection_params.tx_noinputs_size * WITNESS_SCALE_FACTOR);\r\n```\r\n\r\nBut since [Bitcoin Core only supports platforms where int is exactly 32 bits](https://github.com/bitcoin/bitcoin/blob/v26.0/src/compat/assumptions.h#L44) I think using int for `change_output_size`,  and `tx_noinputs_size` should work fine?",
      "commit_id" : "cddf4e92840ed62951d377941d1aa9d04057e16c",
      "created_at" : "2024-03-18T15:07:26Z",
      "diff_hunk" : "@@ -174,10 +174,15 @@ struct CoinSelectionParams {\n      * 1) Received from other wallets, 2) replacing other txs, 3) that have been replaced.\n      */\n     bool m_include_unsafe_inputs = false;\n+    /**\n+     * The maximally sized transaction we are willing to make.\n+     */\n+    std::optional<int64_t> m_max_tx_weight{std::nullopt};\n \n-    CoinSelectionParams(FastRandomContext& rng_fast, size_t change_output_size, size_t change_spend_size,\n+    CoinSelectionParams(FastRandomContext& rng_fast, int change_output_size, size_t change_spend_size,",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29523#discussion_r1528745048",
      "id" : 1528745048,
      "in_reply_to_id" : 1528621409,
      "line" : 180,
      "node_id" : "PRRC_kwDOABII585bHsxY",
      "original_commit_id" : "854acd72e99dc9f0924c5f0b5b7a657b39538911",
      "original_line" : 180,
      "original_position" : 10,
      "original_start_line" : null,
      "path" : "src/wallet/coinselection.h",
      "position" : 8,
      "pull_request_review_id" : 1943369508,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29523",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1528745048/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-03-19T12:12:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1528745048",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48946461?v=4",
         "events_url" : "https://api.github.com/users/ismaelsadeeq/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ismaelsadeeq/followers",
         "following_url" : "https://api.github.com/users/ismaelsadeeq/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ismaelsadeeq/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ismaelsadeeq",
         "id" : 48946461,
         "login" : "ismaelsadeeq",
         "node_id" : "MDQ6VXNlcjQ4OTQ2NDYx",
         "organizations_url" : "https://api.github.com/users/ismaelsadeeq/orgs",
         "received_events_url" : "https://api.github.com/users/ismaelsadeeq/received_events",
         "repos_url" : "https://api.github.com/users/ismaelsadeeq/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ismaelsadeeq/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ismaelsadeeq/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ismaelsadeeq"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29523#discussion_r1528748451"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29523"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1528748451"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Thanks @murchandamus for the link and your review comment, I will look into this and respond as soon as I can.",
      "commit_id" : "8e256fe679236710549820ec48ac7c0793fcfd96",
      "created_at" : "2024-03-18T15:08:51Z",
      "diff_hunk" : "@@ -84,19 +84,19 @@ struct {\n  *        bound of the range.\n  * @param const CAmount& cost_of_change This is the cost of creating and spending a change output.\n  *        This plus selection_target is the upper bound of the range.\n- * @param int max_selection_weight The maximum allowed weight for a selection result to be valid.\n+ * @param int64_t max_selection_weight The maximum allowed weight for a selection result to be valid.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29523#discussion_r1528748451",
      "id" : 1528748451,
      "in_reply_to_id" : 1528529931,
      "line" : 87,
      "node_id" : "PRRC_kwDOABII585bHtmj",
      "original_commit_id" : "eaf40cea9d31b43b4eb112e561fbadc1911e5732",
      "original_line" : 87,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/wallet/coinselection.cpp",
      "position" : 5,
      "pull_request_review_id" : 1943374840,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29523",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1528748451/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-03-18T15:08:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1528748451",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48946461?v=4",
         "events_url" : "https://api.github.com/users/ismaelsadeeq/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ismaelsadeeq/followers",
         "following_url" : "https://api.github.com/users/ismaelsadeeq/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ismaelsadeeq/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ismaelsadeeq",
         "id" : 48946461,
         "login" : "ismaelsadeeq",
         "node_id" : "MDQ6VXNlcjQ4OTQ2NDYx",
         "organizations_url" : "https://api.github.com/users/ismaelsadeeq/orgs",
         "received_events_url" : "https://api.github.com/users/ismaelsadeeq/received_events",
         "repos_url" : "https://api.github.com/users/ismaelsadeeq/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ismaelsadeeq/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ismaelsadeeq/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ismaelsadeeq"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29523#discussion_r1529019669"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29523"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1529019669"
         }
      },
      "author_association" : "MEMBER",
      "body" : "> From https://github.com/bitcoin/bitcoin/commit/854acd72e99dc9f0924c5f0b5b7a657b39538911 we allow passing 0 weight and test for that in the functional test.\r\n\r\nAfter thinking about this more, it does not make sense to allow passing passing 0 maximum transaction weight, should instead be between minimum transaction weight possible and `MAX_STANDARD_TX_WEIGHT`.\r\nI will update to this.",
      "commit_id" : "8e256fe679236710549820ec48ac7c0793fcfd96",
      "created_at" : "2024-03-18T18:00:48Z",
      "diff_hunk" : "@@ -174,10 +174,15 @@ struct CoinSelectionParams {\n      * 1) Received from other wallets, 2) replacing other txs, 3) that have been replaced.\n      */\n     bool m_include_unsafe_inputs = false;\n+    /**\n+     * The maximally sized transaction we are willing to make.\n+     */\n+    std::optional<int64_t> m_max_tx_weight{std::nullopt};\n \n-    CoinSelectionParams(FastRandomContext& rng_fast, size_t change_output_size, size_t change_spend_size,\n+    CoinSelectionParams(FastRandomContext& rng_fast, int change_output_size, size_t change_spend_size,",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29523#discussion_r1529019669",
      "id" : 1529019669,
      "in_reply_to_id" : 1528621409,
      "line" : 182,
      "node_id" : "PRRC_kwDOABII585bIv0V",
      "original_commit_id" : "854acd72e99dc9f0924c5f0b5b7a657b39538911",
      "original_line" : 182,
      "original_position" : 10,
      "original_start_line" : null,
      "path" : "src/wallet/coinselection.h",
      "position" : 28,
      "pull_request_review_id" : 1943815291,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29523",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1529019669/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-03-18T18:02:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1529019669",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48946461?v=4",
         "events_url" : "https://api.github.com/users/ismaelsadeeq/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ismaelsadeeq/followers",
         "following_url" : "https://api.github.com/users/ismaelsadeeq/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ismaelsadeeq/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ismaelsadeeq",
         "id" : 48946461,
         "login" : "ismaelsadeeq",
         "node_id" : "MDQ6VXNlcjQ4OTQ2NDYx",
         "organizations_url" : "https://api.github.com/users/ismaelsadeeq/orgs",
         "received_events_url" : "https://api.github.com/users/ismaelsadeeq/received_events",
         "repos_url" : "https://api.github.com/users/ismaelsadeeq/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ismaelsadeeq/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ismaelsadeeq/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ismaelsadeeq"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29523#discussion_r1530280260"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29523"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1530280260"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Fixed thank you!",
      "commit_id" : "cddf4e92840ed62951d377941d1aa9d04057e16c",
      "created_at" : "2024-03-19T12:37:59Z",
      "diff_hunk" : "@@ -701,7 +701,7 @@ util::Result<SelectionResult> ChooseSelectionResult(interfaces::Chain& chain, co\n         } else append_error(bnb_result);\n     }\n \n-    // As Knapsack and SRD can create change, also deduce change weight.\n+    // Deduce change weight because remaining Coin Selection algorithms can create change output.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29523#discussion_r1530280260",
      "id" : 1530280260,
      "in_reply_to_id" : 1528504926,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585bNjlE",
      "original_commit_id" : "05373e632500670ff8bd65ed6621a039849886ad",
      "original_line" : 704,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/wallet/spend.cpp",
      "position" : null,
      "pull_request_review_id" : 1946087963,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29523",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1530280260/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-03-19T12:37:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1530280260",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48946461?v=4",
         "events_url" : "https://api.github.com/users/ismaelsadeeq/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ismaelsadeeq/followers",
         "following_url" : "https://api.github.com/users/ismaelsadeeq/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ismaelsadeeq/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ismaelsadeeq",
         "id" : 48946461,
         "login" : "ismaelsadeeq",
         "node_id" : "MDQ6VXNlcjQ4OTQ2NDYx",
         "organizations_url" : "https://api.github.com/users/ismaelsadeeq/orgs",
         "received_events_url" : "https://api.github.com/users/ismaelsadeeq/received_events",
         "repos_url" : "https://api.github.com/users/ismaelsadeeq/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ismaelsadeeq/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ismaelsadeeq/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ismaelsadeeq"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29523#discussion_r1530280723"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29523"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1530280723"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Fixed",
      "commit_id" : "cddf4e92840ed62951d377941d1aa9d04057e16c",
      "created_at" : "2024-03-19T12:38:13Z",
      "diff_hunk" : "@@ -174,10 +174,15 @@ struct CoinSelectionParams {\n      * 1) Received from other wallets, 2) replacing other txs, 3) that have been replaced.\n      */\n     bool m_include_unsafe_inputs = false;\n+    /**\n+     * The maximally sized transaction we are willing to make.\n+     */",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29523#discussion_r1530280723",
      "id" : 1530280723,
      "in_reply_to_id" : 1528610398,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585bNjsT",
      "original_commit_id" : "854acd72e99dc9f0924c5f0b5b7a657b39538911",
      "original_line" : 179,
      "original_position" : 6,
      "original_start_line" : 177,
      "path" : "src/wallet/coinselection.h",
      "position" : null,
      "pull_request_review_id" : 1946088515,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29523",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1530280723/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2024-03-19T12:38:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1530280723",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48946461?v=4",
         "events_url" : "https://api.github.com/users/ismaelsadeeq/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ismaelsadeeq/followers",
         "following_url" : "https://api.github.com/users/ismaelsadeeq/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ismaelsadeeq/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ismaelsadeeq",
         "id" : 48946461,
         "login" : "ismaelsadeeq",
         "node_id" : "MDQ6VXNlcjQ4OTQ2NDYx",
         "organizations_url" : "https://api.github.com/users/ismaelsadeeq/orgs",
         "received_events_url" : "https://api.github.com/users/ismaelsadeeq/received_events",
         "repos_url" : "https://api.github.com/users/ismaelsadeeq/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ismaelsadeeq/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ismaelsadeeq/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ismaelsadeeq"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29523#discussion_r1530281835"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29523"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1530281835"
         }
      },
      "author_association" : "MEMBER",
      "body" : "changes to \"The resulting transaction weight in weight units\"",
      "commit_id" : "cddf4e92840ed62951d377941d1aa9d04057e16c",
      "created_at" : "2024-03-19T12:38:51Z",
      "diff_hunk" : "@@ -1374,6 +1374,7 @@ RPCHelpMan sendall()\n             RPCResult::Type::OBJ, \"\", \"\",\n                 {\n                     {RPCResult::Type::BOOL, \"complete\", \"If the transaction has a complete set of signatures\"},\n+                    {RPCResult::Type::NUM, \"weight\", \"The resulting transaction weight in bytes\"},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29523#discussion_r1530281835",
      "id" : 1530281835,
      "in_reply_to_id" : 1528649863,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585bNj9r",
      "original_commit_id" : "8e256fe679236710549820ec48ac7c0793fcfd96",
      "original_line" : 1377,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/wallet/rpc/spend.cpp",
      "position" : null,
      "pull_request_review_id" : 1946089827,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29523",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1530281835/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-03-19T12:38:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1530281835",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48946461?v=4",
         "events_url" : "https://api.github.com/users/ismaelsadeeq/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ismaelsadeeq/followers",
         "following_url" : "https://api.github.com/users/ismaelsadeeq/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ismaelsadeeq/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ismaelsadeeq",
         "id" : 48946461,
         "login" : "ismaelsadeeq",
         "node_id" : "MDQ6VXNlcjQ4OTQ2NDYx",
         "organizations_url" : "https://api.github.com/users/ismaelsadeeq/orgs",
         "received_events_url" : "https://api.github.com/users/ismaelsadeeq/received_events",
         "repos_url" : "https://api.github.com/users/ismaelsadeeq/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ismaelsadeeq/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ismaelsadeeq/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ismaelsadeeq"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29523#discussion_r1530290578"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29523"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1530290578"
         }
      },
      "author_association" : "MEMBER",
      "body" : "You are right `int` is enough, I switched back to the status quo.\r\n\r\nThanks.",
      "commit_id" : "cddf4e92840ed62951d377941d1aa9d04057e16c",
      "created_at" : "2024-03-19T12:43:51Z",
      "diff_hunk" : "@@ -84,19 +84,19 @@ struct {\n  *        bound of the range.\n  * @param const CAmount& cost_of_change This is the cost of creating and spending a change output.\n  *        This plus selection_target is the upper bound of the range.\n- * @param int max_selection_weight The maximum allowed weight for a selection result to be valid.\n+ * @param int64_t max_selection_weight The maximum allowed weight for a selection result to be valid.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29523#discussion_r1530290578",
      "id" : 1530290578,
      "in_reply_to_id" : 1528529931,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585bNmGS",
      "original_commit_id" : "eaf40cea9d31b43b4eb112e561fbadc1911e5732",
      "original_line" : 87,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/wallet/coinselection.cpp",
      "position" : null,
      "pull_request_review_id" : 1946100490,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29523",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1530290578/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-03-19T12:43:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1530290578",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48946461?v=4",
         "events_url" : "https://api.github.com/users/ismaelsadeeq/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ismaelsadeeq/followers",
         "following_url" : "https://api.github.com/users/ismaelsadeeq/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ismaelsadeeq/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ismaelsadeeq",
         "id" : 48946461,
         "login" : "ismaelsadeeq",
         "node_id" : "MDQ6VXNlcjQ4OTQ2NDYx",
         "organizations_url" : "https://api.github.com/users/ismaelsadeeq/orgs",
         "received_events_url" : "https://api.github.com/users/ismaelsadeeq/received_events",
         "repos_url" : "https://api.github.com/users/ismaelsadeeq/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ismaelsadeeq/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ismaelsadeeq/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ismaelsadeeq"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29523#discussion_r1530304472"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29523"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1530304472"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I switched back to status quo, and prevent users from passing `max_tx_weight` below `MIN_STANDARD_TX_NONWITNESS_SIZE * WITNESS_SCALE_FACTOR`",
      "commit_id" : "cddf4e92840ed62951d377941d1aa9d04057e16c",
      "created_at" : "2024-03-19T12:50:35Z",
      "diff_hunk" : "@@ -174,10 +174,15 @@ struct CoinSelectionParams {\n      * 1) Received from other wallets, 2) replacing other txs, 3) that have been replaced.\n      */\n     bool m_include_unsafe_inputs = false;\n+    /**\n+     * The maximally sized transaction we are willing to make.\n+     */\n+    std::optional<int64_t> m_max_tx_weight{std::nullopt};\n \n-    CoinSelectionParams(FastRandomContext& rng_fast, size_t change_output_size, size_t change_spend_size,\n+    CoinSelectionParams(FastRandomContext& rng_fast, int change_output_size, size_t change_spend_size,",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29523#discussion_r1530304472",
      "id" : 1530304472,
      "in_reply_to_id" : 1528621409,
      "line" : 180,
      "node_id" : "PRRC_kwDOABII585bNpfY",
      "original_commit_id" : "854acd72e99dc9f0924c5f0b5b7a657b39538911",
      "original_line" : 180,
      "original_position" : 10,
      "original_start_line" : null,
      "path" : "src/wallet/coinselection.h",
      "position" : 8,
      "pull_request_review_id" : 1946118716,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29523",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1530304472/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-03-19T12:50:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1530304472",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48946461?v=4",
         "events_url" : "https://api.github.com/users/ismaelsadeeq/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ismaelsadeeq/followers",
         "following_url" : "https://api.github.com/users/ismaelsadeeq/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ismaelsadeeq/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ismaelsadeeq",
         "id" : 48946461,
         "login" : "ismaelsadeeq",
         "node_id" : "MDQ6VXNlcjQ4OTQ2NDYx",
         "organizations_url" : "https://api.github.com/users/ismaelsadeeq/orgs",
         "received_events_url" : "https://api.github.com/users/ismaelsadeeq/received_events",
         "repos_url" : "https://api.github.com/users/ismaelsadeeq/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ismaelsadeeq/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ismaelsadeeq/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ismaelsadeeq"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/29523#discussion_r1532374066"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29523"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1532374066"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "> But since [Bitcoin Core only supports platforms where int is exactly 32 bits](https://github.com/bitcoin/bitcoin/blob/v26.0/src/compat/assumptions.h#L44) I think using int for `change_output_size`, and `tx_noinputs_size` should work fine?\r\n\r\n[â¦]\r\n\r\n> I switched back to status quo, and prevent users from passing `max_tx_weight` below `MIN_STANDARD_TX_NONWITNESS_SIZE * WITNESS_SCALE_FACTOR`\r\n\r\nI think we may have crossed some wires here. Thanks for the explanation, that was very helpful. I still agree that `size_t` is the _wrong_ type for `change_output_size` and `tx_noinputs_size`. I would support you taking the opportunity because `m_max_tx_weight` is `int` to also change those two to `int`, perhaps even take `change_spend_size` along for that. I just think that it might be better to make it a separate commit and that it should be explained in the commit message.",
      "commit_id" : "cddf4e92840ed62951d377941d1aa9d04057e16c",
      "created_at" : "2024-03-20T16:06:19Z",
      "diff_hunk" : "@@ -174,10 +174,15 @@ struct CoinSelectionParams {\n      * 1) Received from other wallets, 2) replacing other txs, 3) that have been replaced.\n      */\n     bool m_include_unsafe_inputs = false;\n+    /**\n+     * The maximally sized transaction we are willing to make.\n+     */\n+    std::optional<int64_t> m_max_tx_weight{std::nullopt};\n \n-    CoinSelectionParams(FastRandomContext& rng_fast, size_t change_output_size, size_t change_spend_size,\n+    CoinSelectionParams(FastRandomContext& rng_fast, int change_output_size, size_t change_spend_size,",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/29523#discussion_r1532374066",
      "id" : 1532374066,
      "in_reply_to_id" : 1528621409,
      "line" : 180,
      "node_id" : "PRRC_kwDOABII585bViwy",
      "original_commit_id" : "854acd72e99dc9f0924c5f0b5b7a657b39538911",
      "original_line" : 180,
      "original_position" : 10,
      "original_start_line" : null,
      "path" : "src/wallet/coinselection.h",
      "position" : 8,
      "pull_request_review_id" : 1949364050,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/29523",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1532374066/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2024-03-20T16:07:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1532374066",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4060799?v=4",
         "events_url" : "https://api.github.com/users/murchandamus/events{/privacy}",
         "followers_url" : "https://api.github.com/users/murchandamus/followers",
         "following_url" : "https://api.github.com/users/murchandamus/following{/other_user}",
         "gists_url" : "https://api.github.com/users/murchandamus/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/murchandamus",
         "id" : 4060799,
         "login" : "murchandamus",
         "node_id" : "MDQ6VXNlcjQwNjA3OTk=",
         "organizations_url" : "https://api.github.com/users/murchandamus/orgs",
         "received_events_url" : "https://api.github.com/users/murchandamus/received_events",
         "repos_url" : "https://api.github.com/users/murchandamus/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/murchandamus/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/murchandamus/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/murchandamus"
      }
   }
]
