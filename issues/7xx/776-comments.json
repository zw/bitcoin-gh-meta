[
   {
      "body" : "I don't see that 500 fragments in a 500 meg file is much of an issue at all.\r\n\r\nThe excessive IO (mostly caused by sync writes and write amplification to update the transaction/block index) is a known problem, but I don't believe that fragmentation is playing much of a role in that. (Or at least this isn't evidence of it)",
      "created_at" : "2012-01-23T16:24:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/776#issuecomment-3616666",
      "id" : 3616666,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/776",
      "updated_at" : "2012-01-23T16:24:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3616666",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "That was just 5 minutes. Once, this file had more than 6000 fragments. To scan such a file, assuming that avg. access time is 13 ms we need 6000 x 13 = 78000 ms = 78 seconds.\r\n\r\nI don't know about IO issues but they may be related to fragmentation IMHO.",
      "created_at" : "2012-01-23T16:32:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/776#issuecomment-3616832",
      "id" : 3616832,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/776",
      "updated_at" : "2012-01-23T16:32:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3616832",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178614?v=3",
         "events_url" : "https://api.github.com/users/pszturmaj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pszturmaj/followers",
         "following_url" : "https://api.github.com/users/pszturmaj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pszturmaj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pszturmaj",
         "id" : 178614,
         "login" : "pszturmaj",
         "organizations_url" : "https://api.github.com/users/pszturmaj/orgs",
         "received_events_url" : "https://api.github.com/users/pszturmaj/received_events",
         "repos_url" : "https://api.github.com/users/pszturmaj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pszturmaj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pszturmaj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pszturmaj"
      }
   },
   {
      "body" : "Hm? In your screenshot the file shows 580 mbytes and 551 fragmentsÃ¢ÂÂ 580 mbytes is more than half way synced up in terms of byte size.  AlsoÃ¢ÂÂ normal access to that file is already random, the only time it accesses it at all sequentially is when you do a -rescan.\r\n",
      "created_at" : "2012-01-23T16:40:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/776#issuecomment-3616955",
      "id" : 3616955,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/776",
      "updated_at" : "2012-01-23T16:42:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3616955",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "Yes, but I defragmented this file before. The screenshot shows the effect of running bitcoin client for 5 minutes after I defragmented this file. So, before I started the client this file had only 1 fragment.",
      "created_at" : "2012-01-23T16:46:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/776#issuecomment-3617065",
      "id" : 3617065,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/776",
      "updated_at" : "2012-01-23T16:46:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3617065",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178614?v=3",
         "events_url" : "https://api.github.com/users/pszturmaj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pszturmaj/followers",
         "following_url" : "https://api.github.com/users/pszturmaj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pszturmaj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pszturmaj",
         "id" : 178614,
         "login" : "pszturmaj",
         "organizations_url" : "https://api.github.com/users/pszturmaj/orgs",
         "received_events_url" : "https://api.github.com/users/pszturmaj/received_events",
         "repos_url" : "https://api.github.com/users/pszturmaj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pszturmaj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pszturmaj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pszturmaj"
      }
   },
   {
      "body" : "Ah!  Thank you, I hadn't caught that before.",
      "created_at" : "2012-01-23T16:50:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/776#issuecomment-3617163",
      "id" : 3617163,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/776",
      "updated_at" : "2012-01-23T16:50:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3617163",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "Win7x64 bitcoin-qt --- blk0001.dat && blkindex.dat exploded all over my NTFS. When my HD started sounding like a dot-matrix printer and the synchronization effectively froze: I was forced to synchronously defrag.\r\n\r\nThis issue could be seriously damaging hardware and will get worse faster than the data grows.\r\n\r\nI assume Ext_ and SSD users are unaffected.",
      "created_at" : "2012-03-03T07:36:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/776#issuecomment-4299104",
      "id" : 4299104,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/776",
      "updated_at" : "2012-03-03T07:36:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/4299104",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1421634?v=3",
         "events_url" : "https://api.github.com/users/p2paul/events{/privacy}",
         "followers_url" : "https://api.github.com/users/p2paul/followers",
         "following_url" : "https://api.github.com/users/p2paul/following{/other_user}",
         "gists_url" : "https://api.github.com/users/p2paul/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/p2paul",
         "id" : 1421634,
         "login" : "p2paul",
         "organizations_url" : "https://api.github.com/users/p2paul/orgs",
         "received_events_url" : "https://api.github.com/users/p2paul/received_events",
         "repos_url" : "https://api.github.com/users/p2paul/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/p2paul/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/p2paul/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/p2paul"
      }
   },
   {
      "body" : "This can be fixed easily, by allocating block file by larger chunks, for example by 16 MB.\r\n\r\nEDIT: I think chunk size should be adjustable in the options dialog.\r\n\r\nPS. I was trying to fix this by myself, but I couldn't even compile client, both with QtCreator and manually within MinGW. Perhaps an updated and detailed information about build process might help others fix some bugs.",
      "created_at" : "2012-03-03T15:18:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/776#issuecomment-4301344",
      "id" : 4301344,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/776",
      "updated_at" : "2012-03-03T15:28:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/4301344",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178614?v=3",
         "events_url" : "https://api.github.com/users/pszturmaj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pszturmaj/followers",
         "following_url" : "https://api.github.com/users/pszturmaj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pszturmaj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pszturmaj",
         "id" : 178614,
         "login" : "pszturmaj",
         "organizations_url" : "https://api.github.com/users/pszturmaj/orgs",
         "received_events_url" : "https://api.github.com/users/pszturmaj/received_events",
         "repos_url" : "https://api.github.com/users/pszturmaj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pszturmaj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pszturmaj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pszturmaj"
      }
   },
   {
      "body" : "Seeing this on OSX 10.7 with Journaled HFS+.  It won as the most fragmented file by such a monumental amount. I get a nice machine-gun sound from my poor drive from the seeking.",
      "created_at" : "2012-03-29T21:51:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/776#issuecomment-4832097",
      "id" : 4832097,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/776",
      "updated_at" : "2012-03-29T21:51:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/4832097",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/58898?v=3",
         "events_url" : "https://api.github.com/users/cryo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/cryo/followers",
         "following_url" : "https://api.github.com/users/cryo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/cryo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/cryo",
         "id" : 58898,
         "login" : "cryo",
         "organizations_url" : "https://api.github.com/users/cryo/orgs",
         "received_events_url" : "https://api.github.com/users/cryo/received_events",
         "repos_url" : "https://api.github.com/users/cryo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/cryo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/cryo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/cryo"
      }
   },
   {
      "body" : "I had this in my mind for client optimisation, too ... my blk0001.dat consists of 64000 fragments. We all now the current size is ~1.2GB, why not pre-allocate this as a whole chunk and writing to this chunk. I'm not in the code, but sounds interesting ^^.",
      "created_at" : "2012-03-30T05:28:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/776#issuecomment-4836564",
      "id" : 4836564,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/776",
      "updated_at" : "2012-03-30T05:28:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/4836564",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "body" : "@Diapolo this means that average fragment size is 19.5KB... this is really harming to disk drive\r\n\r\n@gmaxwell with 500 fragments I have waited a minute to see received block count increase by one. After defragmenting blk0001.dat rate jumped to few tens of blocks/sec. Tested with latest 0.6 version.\r\n\r\nThis is serious issue and it seems that client doesn't use buffering at all. If you're about to write block to disk, instead write it to 4MB (adjustable) memory-buffer. Do the same with other blocks until buffer is filled up, then commit whole block to disk. This simple fix should help greatly.",
      "created_at" : "2012-04-03T13:18:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/776#issuecomment-4900916",
      "id" : 4900916,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/776",
      "updated_at" : "2012-04-03T13:21:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/4900916",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178614?v=3",
         "events_url" : "https://api.github.com/users/pszturmaj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pszturmaj/followers",
         "following_url" : "https://api.github.com/users/pszturmaj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pszturmaj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pszturmaj",
         "id" : 178614,
         "login" : "pszturmaj",
         "organizations_url" : "https://api.github.com/users/pszturmaj/orgs",
         "received_events_url" : "https://api.github.com/users/pszturmaj/received_events",
         "repos_url" : "https://api.github.com/users/pszturmaj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pszturmaj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pszturmaj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pszturmaj"
      }
   },
   {
      "body" : "I'm currently working on an \"experimental\" patch, that addresses this for the blk0001.dat file on Windows. I'm not sure if the devs are fine with such a thing, but I'm sure this can also be done for Mac and Linux. For such optimizations I would tolerate OS-specific patches as long as they don't break the legacy (un-optimized) behaviour of the client, what do other devs think about this?\r\n\r\n@pszturmaj Are you able to compile the client on Windows, as I can't compile redistributable files (because of dependecies to non stacially linked libs) and don't want to :). You could check out my work after it's finished as a tester.",
      "created_at" : "2012-04-04T10:54:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/776#issuecomment-4951081",
      "id" : 4951081,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/776",
      "updated_at" : "2012-04-04T10:54:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/4951081",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "body" : "@Diapolo how does it work? How do you influence bdb?\r\n\r\nAlso: I hope it can be integrated in gitian builds.",
      "created_at" : "2012-04-04T10:55:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/776#issuecomment-4951100",
      "id" : 4951100,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/776",
      "updated_at" : "2012-04-04T10:55:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/4951100",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "I can say it only works before the file exists, so for the change to be effective and active the blockchain needs to be re-downloadeded. As I'm currently in a trial and error phase, I will start posting further infos after that :).",
      "created_at" : "2012-04-04T12:10:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/776#issuecomment-4952090",
      "id" : 4952090,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/776",
      "updated_at" : "2012-04-04T12:10:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/4952090",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "body" : "@sipa I need your help (badly)! The WriteToDisk() in CBlock uses streams to write index headers and blocks. I would like to know, if I can somehow set the filepointer / position indicator, so that the data is not always appended to the end of blk0001.dat. I need to be independend of the real file length for my idea.\r\n\r\nI tried to change the fseek() in AppendBlockFile(), but that didn't make a difference :-(. The very first block is okay, I see this because I queried via ftell(), but after the \"fileout <<\" calls, the position indicator is not, where it should be :D.",
      "created_at" : "2012-04-04T18:28:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/776#issuecomment-4959869",
      "id" : 4959869,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/776",
      "updated_at" : "2012-04-04T18:28:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/4959869",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "body" : "@Diapolo I was able to compile libs separately, but then I gave up and didn't touch it again. Please let me know when you'll finish your patches, I'll try to test them on Windows.",
      "created_at" : "2012-04-05T12:18:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/776#issuecomment-4975398",
      "id" : 4975398,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/776",
      "updated_at" : "2012-04-05T12:18:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/4975398",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178614?v=3",
         "events_url" : "https://api.github.com/users/pszturmaj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pszturmaj/followers",
         "following_url" : "https://api.github.com/users/pszturmaj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pszturmaj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pszturmaj",
         "id" : 178614,
         "login" : "pszturmaj",
         "organizations_url" : "https://api.github.com/users/pszturmaj/orgs",
         "received_events_url" : "https://api.github.com/users/pszturmaj/received_events",
         "repos_url" : "https://api.github.com/users/pszturmaj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pszturmaj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pszturmaj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pszturmaj"
      }
   },
   {
      "body" : "... still experimenting. Seems like via fseek I simply can't set the filepointer to write somewhere into a file :-/.",
      "created_at" : "2012-04-05T15:58:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/776#issuecomment-4979537",
      "id" : 4979537,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/776",
      "updated_at" : "2012-04-05T15:58:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/4979537",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "body" : "@pszturmaj With the help of BlueMatt I can perhaps compile a version for you to download and test. I hope to have it ready before I'm off for a few days ;).",
      "created_at" : "2012-04-10T21:29:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/776#issuecomment-5056719",
      "id" : 5056719,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/776",
      "updated_at" : "2012-04-10T21:29:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/5056719",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "body" : "Did anyone think about initial chain loading/verification/synchronization while holding the database completely in-memory? Memory is cheap today and this feature can be optional. If you have enough free memory (1-2Gb) why not to put the blk0001.dat and blkindex.dat there? And flush it to disk every 30-60 minutes for example. This will greatly help to avoid fragmentation and also disk thrashing. I tried this using tmpfs and symlinks on GNU/Linux and it worked like a charm.",
      "created_at" : "2012-04-19T06:27:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/776#issuecomment-5215700",
      "id" : 5215700,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/776",
      "updated_at" : "2012-04-19T06:29:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/5215700",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/184066?v=3",
         "events_url" : "https://api.github.com/users/rkfg/events{/privacy}",
         "followers_url" : "https://api.github.com/users/rkfg/followers",
         "following_url" : "https://api.github.com/users/rkfg/following{/other_user}",
         "gists_url" : "https://api.github.com/users/rkfg/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/rkfg",
         "id" : 184066,
         "login" : "rkfg",
         "organizations_url" : "https://api.github.com/users/rkfg/orgs",
         "received_events_url" : "https://api.github.com/users/rkfg/received_events",
         "repos_url" : "https://api.github.com/users/rkfg/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/rkfg/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/rkfg/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/rkfg"
      }
   },
   {
      "body" : "0.6.0.6beta still shows it\r\n\r\n![BitCoin fragmentation](http://cryo.ws/images/bitcoinfrag.png)\r\n",
      "created_at" : "2012-04-19T10:22:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/776#issuecomment-5218563",
      "id" : 5218563,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/776",
      "updated_at" : "2012-04-19T10:22:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/5218563",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/58898?v=3",
         "events_url" : "https://api.github.com/users/cryo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/cryo/followers",
         "following_url" : "https://api.github.com/users/cryo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/cryo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/cryo",
         "id" : 58898,
         "login" : "cryo",
         "organizations_url" : "https://api.github.com/users/cryo/orgs",
         "received_events_url" : "https://api.github.com/users/cryo/received_events",
         "repos_url" : "https://api.github.com/users/cryo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/cryo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/cryo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/cryo"
      }
   },
   {
      "body" : "I've still yet to see a plausible measurement here showing that this makes a material performance difference / and/or what kind of speedup could be expected if the problem were removed. \"a minute to complete download a block\" is just not plausible, that performance would take hours to sync just a days worth of blocks and there simply aren't users reporting that it takes weeks to sync the chain (at least not anymore)\r\n\r\nThere are a number of ways of demonstrating thisÃ¢ÂÂ perhaps the easiest would be sync up to height 140,000 from a local node (important in order to avoid differences due to network luck)...  shut down, copy the directory (thus making a defragmented version),  start back up (on the fragmented version) and time how long it takes to sync to 160000 (using logtimestamps=1), then shutdown and replace with the backup and time the sync again.\r\n\r\nSimply pointing to the fact that there are fragments isn't itself especially concerningÃ¢ÂÂ or at least it doesn't demonstrate that the double writes needed to reduce fragmentation on Windows via preallocation would be justified by the resulting performance increase from fragmentation reduction.\r\n\r\nEurekafag, sure tmpfs works greatÃ¢ÂÂ  but putting it in memory, and also coping with it taking a minute to write to disk all at once is not easy to do.  Patches accepted.\r\n\r\n",
      "created_at" : "2012-04-19T13:33:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/776#issuecomment-5221585",
      "id" : 5221585,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/776",
      "updated_at" : "2012-04-19T13:33:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/5221585",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "Gmaxwell, uhh, I'm just suggesting. I don't even know if Berkeley DB can work entirely in memory. Just an obvious idea of speeding things up a bit, especially for those OSes lacking built-in ramdisk support. Flushing could block all database operations for a minute (once in 30-60 minutes Ã¢ÂÂ not a thing to worry about) but it saves more time not using the disk and thus avoiding fragmentation while downloading hundreds or thousands of blocks.",
      "created_at" : "2012-04-19T13:45:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/776#issuecomment-5221820",
      "id" : 5221820,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/776",
      "updated_at" : "2012-04-19T13:45:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/5221820",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/184066?v=3",
         "events_url" : "https://api.github.com/users/rkfg/events{/privacy}",
         "followers_url" : "https://api.github.com/users/rkfg/followers",
         "following_url" : "https://api.github.com/users/rkfg/following{/other_user}",
         "gists_url" : "https://api.github.com/users/rkfg/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/rkfg",
         "id" : 184066,
         "login" : "rkfg",
         "organizations_url" : "https://api.github.com/users/rkfg/orgs",
         "received_events_url" : "https://api.github.com/users/rkfg/received_events",
         "repos_url" : "https://api.github.com/users/rkfg/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/rkfg/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/rkfg/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/rkfg"
      }
   },
   {
      "body" : "> I've still yet to see a plausible measurement here showing ...\r\n\r\nI'd propose to use \"time to desktop\" without bitcoin-qt, with bitcoin-qt and fragmented files, and after defragmentation. Otherwise the occasional reads and writes are not really a performance toll, because the last few blocks are already in the OS file cache.\r\n\r\nI'll try to measure it in a few days (because I've just defragmented the bitcoin directory). ",
      "created_at" : "2012-04-19T21:03:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/776#issuecomment-5232084",
      "id" : 5232084,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/776",
      "updated_at" : "2012-04-19T21:03:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/5232084",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/109316?v=3",
         "events_url" : "https://api.github.com/users/PAStheLoD/events{/privacy}",
         "followers_url" : "https://api.github.com/users/PAStheLoD/followers",
         "following_url" : "https://api.github.com/users/PAStheLoD/following{/other_user}",
         "gists_url" : "https://api.github.com/users/PAStheLoD/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/PAStheLoD",
         "id" : 109316,
         "login" : "PAStheLoD",
         "organizations_url" : "https://api.github.com/users/PAStheLoD/orgs",
         "received_events_url" : "https://api.github.com/users/PAStheLoD/received_events",
         "repos_url" : "https://api.github.com/users/PAStheLoD/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/PAStheLoD/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/PAStheLoD/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/PAStheLoD"
      }
   },
   {
      "body" : "meh.  Time to desktop can be made much smaller by simply making checkblocks check the less of the end of the chain at startup or putting it in the background.     This needs to distinguish slow checkblocks from slow startup for other reasons. Especially since the checkblocks does cause sequential access to the chain (it's the only thing that does during normal operation) so it would exaggerate the impact.",
      "created_at" : "2012-04-19T21:09:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/776#issuecomment-5232258",
      "id" : 5232258,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/776",
      "updated_at" : "2012-04-19T21:09:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/5232258",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "I can confirm that synchronization slows down proportionally to the number of blk0001.dat fragments. Test is simple:\r\n\r\n1. defragment block file\r\n2. run client\r\n3. observe that in the beginning it synchronizes well, but later it will keep slowing down continuosly\r\n4. close client, check that block file has few hundred of fragments\r\n5. goto 1 and observe the same, **this is repeatable**\r\n\r\nDuring synchronization it slows down to the point when the client gets almost unresponsive. After I close the client, I must wait half a minute to see that its process is actually killed. This happens only after a major slow down, it doesn't happen when the file is deframented.\r\n\r\nIs this \"plausible\" enough?",
      "created_at" : "2012-04-19T22:00:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/776#issuecomment-5233535",
      "id" : 5233535,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/776",
      "updated_at" : "2012-04-19T22:00:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/5233535",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178614?v=3",
         "events_url" : "https://api.github.com/users/pszturmaj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pszturmaj/followers",
         "following_url" : "https://api.github.com/users/pszturmaj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pszturmaj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pszturmaj",
         "id" : 178614,
         "login" : "pszturmaj",
         "organizations_url" : "https://api.github.com/users/pszturmaj/orgs",
         "received_events_url" : "https://api.github.com/users/pszturmaj/received_events",
         "repos_url" : "https://api.github.com/users/pszturmaj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pszturmaj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pszturmaj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pszturmaj"
      }
   },
   {
      "body" : "@pszturmaj I have a branch ready that fixes your reported problem for Windows (consider it still experimental): https://github.com/Diapolo/bitcoin/tree/InitBlockDL-exp The problem is I can't compile an executable you could try, so I rely on BlueMatt to get a working exe via Jenkins, which produced quite some errors the last time we tried. Or are you able to compile for yourself now?",
      "created_at" : "2012-05-06T20:47:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/776#issuecomment-5540672",
      "id" : 5540672,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/776",
      "updated_at" : "2012-05-06T20:47:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/5540672",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "body" : "@pszturmaj Sipa was so kind to build a working executable from my branch (https://github.com/Diapolo/bitcoin/tree/InitBlockDL-exp), which is based on the current bitcoin master branch. You find the files for Windows (only) here: http://bitcoin.sipa.be/builds/0.6.1-35-g34a0eab/\r\n\r\nWould be great if you could check them out and report back. Be aware that you will need to delete your current blk*.dat files for this testing and unofficial build to work properly!\r\n\r\nDISCLAIMER:\r\nThe linked build is experimental and should only used in testing environments, as it can contain serious bugs! I tested this on my Windows machine and fixed all bugs I found to date!",
      "created_at" : "2012-05-07T13:51:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/776#issuecomment-5550391",
      "id" : 5550391,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/776",
      "updated_at" : "2012-05-07T13:52:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/5550391",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "body" : "@Diapolo Hey, it's much better! It allocates ~2 GB block file and now it doesn't block the system anymore.\r\n\r\nHere's a screenshot after 10 minutes of running the client: http://i.imgur.com/GSms5.png. Please note the network graph. The link speed constantly drops and increases, I think this could be optimized.",
      "created_at" : "2012-05-07T14:37:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/776#issuecomment-5551379",
      "id" : 5551379,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/776",
      "updated_at" : "2012-05-07T14:37:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/5551379",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178614?v=3",
         "events_url" : "https://api.github.com/users/pszturmaj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pszturmaj/followers",
         "following_url" : "https://api.github.com/users/pszturmaj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pszturmaj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pszturmaj",
         "id" : 178614,
         "login" : "pszturmaj",
         "organizations_url" : "https://api.github.com/users/pszturmaj/orgs",
         "received_events_url" : "https://api.github.com/users/pszturmaj/received_events",
         "repos_url" : "https://api.github.com/users/pszturmaj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pszturmaj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pszturmaj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pszturmaj"
      }
   },
   {
      "body" : "@pszturmaj Sounds good as a starting-point. Could you benchmark (messure the time it takes to do a full block-chain download) with 0.6.1 official vs. that experimental build?\r\n\r\nAnd perhaps a startup- / shutdown-time comparison :)?",
      "created_at" : "2012-05-07T14:57:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/776#issuecomment-5551877",
      "id" : 5551877,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/776",
      "updated_at" : "2012-05-07T14:59:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/5551877",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "body" : "@Diapolo I'm still experiencing extensive disk access, shutdown-time was 45 sec after 3 mins of downloading (during shutdown, Hdd LED was ON and system was blocked). Before that, I temporarily closed the client and defragmented blkindex.dat and debug.log. I see that debug.log is written frequently but I think it's too small to cause such slow downs.\r\n\r\nI did look at the IO stats and I saw that bitcoin process reads at rate up to 10 MB/s and writes up to 8 MB/s. Speed dropped to 5-10 blocks/sec. Does it scan the whole index for each block?\r\n\r\nIt seems that downloading gets slower, proportionally to the number of received blocks.",
      "created_at" : "2012-05-07T15:57:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/776#issuecomment-5553316",
      "id" : 5553316,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/776",
      "updated_at" : "2012-05-07T15:57:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/5553316",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178614?v=3",
         "events_url" : "https://api.github.com/users/pszturmaj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pszturmaj/followers",
         "following_url" : "https://api.github.com/users/pszturmaj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pszturmaj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pszturmaj",
         "id" : 178614,
         "login" : "pszturmaj",
         "organizations_url" : "https://api.github.com/users/pszturmaj/orgs",
         "received_events_url" : "https://api.github.com/users/pszturmaj/received_events",
         "repos_url" : "https://api.github.com/users/pszturmaj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pszturmaj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pszturmaj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pszturmaj"
      }
   },
   {
      "body" : "@pszturmaj \r\nblkindex.dat is still heavily fragmented over time, but at least the blk000x.dat files should consist of a single fragment on disk. My last work was truncating unused space in the block files after they reach their max size, to save disk space and adding reading from block files via std::fstream, too ... which now also works.\r\n\r\nI currently can't do anything in terms of network performance, my focus lies on the filesystem stuff in my experimental build. I'll see if there is a way to do the same pre-alloc for blkindex.dat.",
      "created_at" : "2012-05-08T07:46:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/776#issuecomment-5569428",
      "id" : 5569428,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/776",
      "updated_at" : "2012-05-08T07:46:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/5569428",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "body" : "@pszturmaj more recent blocks have more transactions, and to process a transaction, all its inputs have to be looked up in the index. This index is very efficient, but since those transactions are most likely spread out over many megabytes on your disk, it will require more and more seeking as the block database grows.",
      "created_at" : "2012-05-08T11:53:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/776#issuecomment-5572890",
      "id" : 5572890,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/776",
      "updated_at" : "2012-05-08T11:53:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/5572890",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Closing this as a new storage system is in use for the blocks that avoids having one large file with many fragments.",
      "created_at" : "2013-11-04T14:56:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/776#issuecomment-27690575",
      "id" : 27690575,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/776",
      "updated_at" : "2013-11-04T14:56:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/27690575",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   }
]
