[
   {
      "body" : "Does #766 fix it?",
      "created_at" : "2012-02-03T02:46:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/794#issuecomment-3791086",
      "id" : 3791086,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/794",
      "updated_at" : "2012-02-03T02:46:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3791086",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "Haven't tried #766.  Test setup is:\r\n\r\n3 testnet-in-a-box nodes, with node 1 sending fuzzed transactions to 2.\r\nNode 3 is listening in and CPU mining.\r\n\r\nvalgrind doesn't complain about uninitialized vars (you have to compile openssl and bdb specially to make valgrind not trip on them), and getmininginfo returns reasonable info at first.\r\n\r\nBut it is reproducible, pooledtx goes wacky after a while.\r\n",
      "created_at" : "2012-02-03T02:59:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/794#issuecomment-3791194",
      "id" : 3791194,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/794",
      "updated_at" : "2012-02-03T02:59:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3791194",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/331997?v=3",
         "events_url" : "https://api.github.com/users/gavinandresen/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gavinandresen/followers",
         "following_url" : "https://api.github.com/users/gavinandresen/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gavinandresen/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gavinandresen",
         "id" : 331997,
         "login" : "gavinandresen",
         "organizations_url" : "https://api.github.com/users/gavinandresen/orgs",
         "received_events_url" : "https://api.github.com/users/gavinandresen/received_events",
         "repos_url" : "https://api.github.com/users/gavinandresen/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gavinandresen/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gavinandresen/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gavinandresen"
      }
   },
   {
      "body" : "My best guess is a missing-lock condition reading the variable from getmininginfo while the other thread is updating it. Does it go back to normal after the misread?",
      "created_at" : "2012-02-03T03:12:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/794#issuecomment-3791285",
      "id" : 3791285,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/794",
      "updated_at" : "2012-02-03T03:12:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3791285",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "hashespersec should be zero, unless the internal reference miner is running.\r\n\r\n",
      "created_at" : "2012-02-03T03:23:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/794#issuecomment-3791384",
      "id" : 3791384,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/794",
      "updated_at" : "2012-02-03T03:23:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3791384",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/494411?v=3",
         "events_url" : "https://api.github.com/users/jgarzik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jgarzik/followers",
         "following_url" : "https://api.github.com/users/jgarzik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jgarzik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jgarzik",
         "id" : 494411,
         "login" : "jgarzik",
         "organizations_url" : "https://api.github.com/users/jgarzik/orgs",
         "received_events_url" : "https://api.github.com/users/jgarzik/received_events",
         "repos_url" : "https://api.github.com/users/jgarzik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jgarzik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jgarzik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jgarzik"
      }
   },
   {
      "body" : "I guess generate=true, but are all the blocks downloaded?",
      "created_at" : "2012-02-03T04:21:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/794#issuecomment-3791743",
      "id" : 3791743,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/794",
      "updated_at" : "2012-02-03T04:21:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3791743",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/494411?v=3",
         "events_url" : "https://api.github.com/users/jgarzik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jgarzik/followers",
         "following_url" : "https://api.github.com/users/jgarzik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jgarzik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jgarzik",
         "id" : 494411,
         "login" : "jgarzik",
         "organizations_url" : "https://api.github.com/users/jgarzik/orgs",
         "received_events_url" : "https://api.github.com/users/jgarzik/received_events",
         "repos_url" : "https://api.github.com/users/jgarzik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jgarzik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jgarzik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jgarzik"
      }
   },
   {
      "body" : "In the dup I just closed I noticed that the pooledtx went crazy around the same time as a new block was found.",
      "created_at" : "2012-02-09T11:06:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/794#issuecomment-3885544",
      "id" : 3885544,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/794",
      "updated_at" : "2012-02-09T11:06:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3885544",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/573356?v=3",
         "events_url" : "https://api.github.com/users/dooglus/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dooglus/followers",
         "following_url" : "https://api.github.com/users/dooglus/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dooglus/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dooglus",
         "id" : 573356,
         "login" : "dooglus",
         "organizations_url" : "https://api.github.com/users/dooglus/orgs",
         "received_events_url" : "https://api.github.com/users/dooglus/received_events",
         "repos_url" : "https://api.github.com/users/dooglus/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dooglus/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dooglus/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dooglus"
      }
   },
   {
      "body" : "The 'crazy' number 18446744073709551613 is in fact just -3 printed as an unsigned 64 bit int.\r\n\r\nThe bug is caused by CTransaction::RemoveFromMemoryPool() doing --nPooledTx for every transaction in the newly found block whether or not it was in our memory pool or not.\r\n\r\nCBlock::SetBestChain does this:\r\n        // Delete redundant memory transactions\r\n        BOOST_FOREACH(CTransaction& tx, vtx)\r\n            tx.RemoveFromMemoryPool();\r\n\r\nand CTransaction::RemoveFromMemoryPool() doesn't check whether we have each transaction or not - it erase()s it anyway, and decrements the counter.",
      "created_at" : "2012-02-09T12:01:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/794#issuecomment-3886177",
      "id" : 3886177,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/794",
      "updated_at" : "2012-02-09T12:01:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3886177",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/573356?v=3",
         "events_url" : "https://api.github.com/users/dooglus/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dooglus/followers",
         "following_url" : "https://api.github.com/users/dooglus/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dooglus/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dooglus",
         "id" : 573356,
         "login" : "dooglus",
         "organizations_url" : "https://api.github.com/users/dooglus/orgs",
         "received_events_url" : "https://api.github.com/users/dooglus/received_events",
         "repos_url" : "https://api.github.com/users/dooglus/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dooglus/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dooglus/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dooglus"
      }
   },
   {
      "body" : "How often does it happen that it tried to remove a transaction that wasn't in the memory pool?",
      "created_at" : "2012-05-31T10:18:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/794#issuecomment-6032353",
      "id" : 6032353,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/794",
      "updated_at" : "2012-05-31T10:18:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/6032353",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1530283?v=3",
         "events_url" : "https://api.github.com/users/rebroad/events{/privacy}",
         "followers_url" : "https://api.github.com/users/rebroad/followers",
         "following_url" : "https://api.github.com/users/rebroad/following{/other_user}",
         "gists_url" : "https://api.github.com/users/rebroad/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/rebroad",
         "id" : 1530283,
         "login" : "rebroad",
         "organizations_url" : "https://api.github.com/users/rebroad/orgs",
         "received_events_url" : "https://api.github.com/users/rebroad/received_events",
         "repos_url" : "https://api.github.com/users/rebroad/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/rebroad/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/rebroad/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/rebroad"
      }
   },
   {
      "body" : "It doesn't.  My change comment was sloppy.",
      "created_at" : "2012-05-31T10:19:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/794#issuecomment-6032372",
      "id" : 6032372,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/794",
      "updated_at" : "2012-05-31T10:19:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/6032372",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/573356?v=3",
         "events_url" : "https://api.github.com/users/dooglus/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dooglus/followers",
         "following_url" : "https://api.github.com/users/dooglus/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dooglus/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dooglus",
         "id" : 573356,
         "login" : "dooglus",
         "organizations_url" : "https://api.github.com/users/dooglus/orgs",
         "received_events_url" : "https://api.github.com/users/dooglus/received_events",
         "repos_url" : "https://api.github.com/users/dooglus/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dooglus/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dooglus/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dooglus"
      }
   },
   {
      "body" : "oh... what would have been the unsloppy comment?",
      "created_at" : "2012-05-31T10:20:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/794#issuecomment-6032393",
      "id" : 6032393,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/794",
      "updated_at" : "2012-05-31T10:20:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/6032393",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1530283?v=3",
         "events_url" : "https://api.github.com/users/rebroad/events{/privacy}",
         "followers_url" : "https://api.github.com/users/rebroad/followers",
         "following_url" : "https://api.github.com/users/rebroad/following{/other_user}",
         "gists_url" : "https://api.github.com/users/rebroad/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/rebroad",
         "id" : 1530283,
         "login" : "rebroad",
         "organizations_url" : "https://api.github.com/users/rebroad/orgs",
         "received_events_url" : "https://api.github.com/users/rebroad/received_events",
         "repos_url" : "https://api.github.com/users/rebroad/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/rebroad/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/rebroad/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/rebroad"
      }
   },
   {
      "body" : "\"Only *attempt to* remove transactions from memory pool when [...]\" would be better.\n\nWhen a new block is found, the code was attempting to remove each of the transactions in the block from the memory pool of pending transactions.  This would quietly succeed, doing nothing, for transactions which weren't in the memory pool, but it was decrementing the pool size counter even if it didn't remove the transaction, leading to the pool size counter wrapping around to a huge value.\n\nSo my change checks to see if each transaction is in the memory pool before attempting to remove it from the pool.",
      "created_at" : "2012-05-31T10:32:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/794#issuecomment-6032608",
      "id" : 6032608,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/794",
      "updated_at" : "2012-05-31T10:32:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/6032608",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/573356?v=3",
         "events_url" : "https://api.github.com/users/dooglus/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dooglus/followers",
         "following_url" : "https://api.github.com/users/dooglus/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dooglus/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dooglus",
         "id" : 573356,
         "login" : "dooglus",
         "organizations_url" : "https://api.github.com/users/dooglus/orgs",
         "received_events_url" : "https://api.github.com/users/dooglus/received_events",
         "repos_url" : "https://api.github.com/users/dooglus/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dooglus/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dooglus/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dooglus"
      }
   },
   {
      "body" : "ah, thanks. now I understand. I guess this could be a location in the code where I could make a patch that restricts relaying blocks that are not including free transactions. I think it would be good to give this option to full node operators who aren't mining. So far various patches have been included that help raise mining fees. Such a patch would help to encourage miners to include free txs thereby lowering mining fees. I believe it should be down to the node operators to decide/vote on mining fees rather than the developers. I suspect that the value of bitcoin could be affected by such a change. Perhaps the more mining fees go up, the higher the value of a bitcoin increases too? If so, that would explain a motivation for the developers (who probably own substantial bitcoins) to see the mining fees increase.",
      "created_at" : "2012-05-31T10:40:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/794#issuecomment-6032751",
      "id" : 6032751,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/794",
      "updated_at" : "2012-05-31T10:42:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/6032751",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1530283?v=3",
         "events_url" : "https://api.github.com/users/rebroad/events{/privacy}",
         "followers_url" : "https://api.github.com/users/rebroad/followers",
         "following_url" : "https://api.github.com/users/rebroad/following{/other_user}",
         "gists_url" : "https://api.github.com/users/rebroad/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/rebroad",
         "id" : 1530283,
         "login" : "rebroad",
         "organizations_url" : "https://api.github.com/users/rebroad/orgs",
         "received_events_url" : "https://api.github.com/users/rebroad/received_events",
         "repos_url" : "https://api.github.com/users/rebroad/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/rebroad/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/rebroad/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/rebroad"
      }
   },
   {
      "body" : "This isn't the place to discuss the issue.\n\nI would suggest making a thread in the development board here: https://bitcointalk.org/index.php?board=6.0 to discuss it.\n\n[ But I doubt reducing mining fees from their currently very low level would have any impact on the value of bitcoins. A concern is that unless transaction fees increase to match the falling rewards for mining, many miners will stop mining, leaving the network more vulnerable to attack. ]",
      "created_at" : "2012-05-31T10:46:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/794#issuecomment-6032857",
      "id" : 6032857,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/794",
      "updated_at" : "2012-05-31T10:46:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/6032857",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/573356?v=3",
         "events_url" : "https://api.github.com/users/dooglus/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dooglus/followers",
         "following_url" : "https://api.github.com/users/dooglus/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dooglus/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dooglus",
         "id" : 573356,
         "login" : "dooglus",
         "organizations_url" : "https://api.github.com/users/dooglus/orgs",
         "received_events_url" : "https://api.github.com/users/dooglus/received_events",
         "repos_url" : "https://api.github.com/users/dooglus/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dooglus/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dooglus/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dooglus"
      }
   }
]
