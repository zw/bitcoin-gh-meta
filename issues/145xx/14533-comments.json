[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#15443](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/15443.html) (qa: Add getdescriptorinfo functional test by promag)\n* [#13756](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/13756.html) (wallet: \"avoid_reuse\" wallet flag for improved privacy by kallewoof)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2018-10-21T03:46:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14533#issuecomment-431636452",
      "id" : 431636452,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14533",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQzMTYzNjQ1Mg==",
      "updated_at" : "2019-06-09T02:34:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/431636452",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Genesis block isn't sufficient, a lot of altcoins share genesis blocks. :(  Also there should be a way to override, since moving wallet files between forks is a common way of collecting fork coins-- obviously not something you'd want to happen accidentally but fine as an unsupported \"you get to keep both pieces\" option.",
      "created_at" : "2018-10-21T07:16:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14533#issuecomment-431645072",
      "id" : 431645072,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14533",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQzMTY0NTA3Mg==",
      "updated_at" : "2018-10-21T07:16:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/431645072",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/858454?v=4",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "node_id" : "MDQ6VXNlcjg1ODQ1NA==",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@gmaxwell, thanks for the suggestion. Just added an override option `-allowreusewallets` (maybe should be renamed to something clearer). Still working on sufficiency issue. First of all, since `CChain::GetLocator` builds a `vHave` sequence deterministically, maybe the whole vectors can be compared, but a lot of forked altcoins share those blocks as well, so I'm looking for an alternative.",
      "created_at" : "2018-10-21T11:08:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14533#issuecomment-431659757",
      "id" : 431659757,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14533",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQzMTY1OTc1Nw==",
      "updated_at" : "2018-10-21T11:08:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/431659757",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/7646953?v=4",
         "events_url" : "https://api.github.com/users/mrwhythat/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mrwhythat/followers",
         "following_url" : "https://api.github.com/users/mrwhythat/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mrwhythat/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mrwhythat",
         "id" : 7646953,
         "login" : "mrwhythat",
         "node_id" : "MDQ6VXNlcjc2NDY5NTM=",
         "organizations_url" : "https://api.github.com/users/mrwhythat/orgs",
         "received_events_url" : "https://api.github.com/users/mrwhythat/received_events",
         "repos_url" : "https://api.github.com/users/mrwhythat/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mrwhythat/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mrwhythat/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mrwhythat"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14533#discussion_r226915366"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14533"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/226915366"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Please use another variable name: `batch` is already used in this context :-)",
      "commit_id" : "dc487656b9b06308eff78c9fe25bbec88f92d7de",
      "created_at" : "2018-10-22T07:16:38Z",
      "diff_hunk" : "@@ -4095,13 +4095,28 @@ std::shared_ptr<CWallet> CWallet::CreateWalletFromFile(const std::string& name,\n \n     LOCK(cs_main);\n \n-    CBlockIndex *pindexRescan = chainActive.Genesis();\n-    if (!gArgs.GetBoolArg(\"-rescan\", false))\n+    CBlockIndex* activeChainGenesis = chainActive.Genesis();\n+    WalletBatch batch(*walletInstance->database);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14533#discussion_r226915366",
      "id" : 226915366,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIyNjkxNTM2Ng==",
      "original_commit_id" : "da99bd13158a79bc199f1f443d107e41e7d89dcc",
      "original_position" : 7,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 166841139,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14533",
      "updated_at" : "2019-06-11T21:10:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/226915366",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14533#discussion_r227896512"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14533"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/227896512"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "It's done on purpose in order to reuse the value, computed by it (`bestBlockRead`) both here and in `-rescan` check.",
      "commit_id" : "dc487656b9b06308eff78c9fe25bbec88f92d7de",
      "created_at" : "2018-10-24T17:56:17Z",
      "diff_hunk" : "@@ -4095,13 +4095,28 @@ std::shared_ptr<CWallet> CWallet::CreateWalletFromFile(const std::string& name,\n \n     LOCK(cs_main);\n \n-    CBlockIndex *pindexRescan = chainActive.Genesis();\n-    if (!gArgs.GetBoolArg(\"-rescan\", false))\n+    CBlockIndex* activeChainGenesis = chainActive.Genesis();\n+    WalletBatch batch(*walletInstance->database);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14533#discussion_r227896512",
      "id" : 227896512,
      "in_reply_to_id" : 226915366,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIyNzg5NjUxMg==",
      "original_commit_id" : "da99bd13158a79bc199f1f443d107e41e7d89dcc",
      "original_position" : 7,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 168041051,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14533",
      "updated_at" : "2019-06-11T21:10:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/227896512",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/7646953?v=4",
         "events_url" : "https://api.github.com/users/mrwhythat/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mrwhythat/followers",
         "following_url" : "https://api.github.com/users/mrwhythat/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mrwhythat/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mrwhythat",
         "id" : 7646953,
         "login" : "mrwhythat",
         "node_id" : "MDQ6VXNlcjc2NDY5NTM=",
         "organizations_url" : "https://api.github.com/users/mrwhythat/orgs",
         "received_events_url" : "https://api.github.com/users/mrwhythat/received_events",
         "repos_url" : "https://api.github.com/users/mrwhythat/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mrwhythat/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mrwhythat/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mrwhythat"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Implemented the new check via `FindForkInGlobalIndex`. This solution looks at all blocks known to the wallet and not only at a genesis. It may misbehave in case of temporary forks (reorgs), but there seems to be no simple way around that.\r\n\r\nThis can be tested with the following function test (here two disconnected nodes in regtest mode generate two different chains with the same genesis, so can be used to model fork coins with shared genesis):\r\n```python\r\n        # ...\r\n        self.log.info(\"Generating initial distinct blockchains\")\r\n        self.nodes[0].generate(5)\r\n        self.nodes[1].generate(5)\r\n\r\n        self.log.info(\"Creating wallets\")\r\n        w0_path = os.path.join(self.nodes[0].datadir, 'w0')\r\n        w1_path = os.path.join(self.nodes[1].datadir, 'w1')\r\n        self.nodes[0].createwallet(w0_path)\r\n        self.nodes[1].createwallet(w1_path)\r\n\r\n        self.log.info(\"Restarting nodes\")  # to close wallets\r\n        self.stop_node(0)\r\n        self.stop_node(1)\r\n        self.start_node(0)\r\n        self.start_node(1)\r\n\r\n        self.log.info(\"Loading wallet\")\r\n        print(self.nodes[0].loadwallet(w1_path))  # this should fail with wallet reuse error\r\n```\r\nNot sure if this needs a separate test though, so any suggestions on which one should have it appended?\r\n",
      "created_at" : "2018-10-27T22:33:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14533#issuecomment-433660454",
      "id" : 433660454,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14533",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQzMzY2MDQ1NA==",
      "updated_at" : "2018-10-27T22:33:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/433660454",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/7646953?v=4",
         "events_url" : "https://api.github.com/users/mrwhythat/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mrwhythat/followers",
         "following_url" : "https://api.github.com/users/mrwhythat/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mrwhythat/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mrwhythat",
         "id" : 7646953,
         "login" : "mrwhythat",
         "node_id" : "MDQ6VXNlcjc2NDY5NTM=",
         "organizations_url" : "https://api.github.com/users/mrwhythat/orgs",
         "received_events_url" : "https://api.github.com/users/mrwhythat/received_events",
         "repos_url" : "https://api.github.com/users/mrwhythat/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mrwhythat/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mrwhythat/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mrwhythat"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->Needs rebase",
      "created_at" : "2018-11-05T19:44:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14533#issuecomment-436009719",
      "id" : 436009719,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14533",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQzNjAwOTcxOQ==",
      "updated_at" : "2018-11-05T19:44:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/436009719",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "It doesn't seem like a good idea to prevent a wallet from opening in the case of even a 1 block reorg IMO. Maybe checking 6 blocks back in the chain or something would be better?\r\n\r\nConcept ACK though, I think this is still a nice check to have\r\n\r\nA new test file here would be fine too I think, but you also need to fix up the existing tests to work with this change too, travis is failing on some of them",
      "created_at" : "2018-11-10T04:47:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14533#issuecomment-437558156",
      "id" : 437558156,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14533",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQzNzU1ODE1Ng==",
      "updated_at" : "2018-11-10T04:57:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/437558156",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/3211283?v=4",
         "events_url" : "https://api.github.com/users/MeshCollider/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MeshCollider/followers",
         "following_url" : "https://api.github.com/users/MeshCollider/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MeshCollider/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MeshCollider",
         "id" : 3211283,
         "login" : "MeshCollider",
         "node_id" : "MDQ6VXNlcjMyMTEyODM=",
         "organizations_url" : "https://api.github.com/users/MeshCollider/orgs",
         "received_events_url" : "https://api.github.com/users/MeshCollider/received_events",
         "repos_url" : "https://api.github.com/users/MeshCollider/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MeshCollider/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MeshCollider/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MeshCollider"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14533#discussion_r232441516"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14533"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/232441516"
         }
      },
      "author_association" : "MEMBER",
      "body" : "`DEFAULT_ALLOWREUSEWALLETS `",
      "commit_id" : "dc487656b9b06308eff78c9fe25bbec88f92d7de",
      "created_at" : "2018-11-10T04:49:50Z",
      "diff_hunk" : "@@ -4095,6 +4095,24 @@ std::shared_ptr<CWallet> CWallet::CreateWalletFromFile(const std::string& name,\n \n     LOCK(cs_main);\n \n+    // Unless allowed, ensure wallet files are not reused across chains:\n+    if (!gArgs.GetBoolArg(\"-allowreusewallets\", false))",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14533#discussion_r232441516",
      "id" : 232441516,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIzMjQ0MTUxNg==",
      "original_commit_id" : "ddeb3dff85986cc8569f29eda9c005b371d1e612",
      "original_position" : 5,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 173650374,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14533",
      "updated_at" : "2019-06-11T21:10:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/232441516",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/3211283?v=4",
         "events_url" : "https://api.github.com/users/meshcollider/events{/privacy}",
         "followers_url" : "https://api.github.com/users/meshcollider/followers",
         "following_url" : "https://api.github.com/users/meshcollider/following{/other_user}",
         "gists_url" : "https://api.github.com/users/meshcollider/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/meshcollider",
         "id" : 3211283,
         "login" : "meshcollider",
         "node_id" : "MDQ6VXNlcjMyMTEyODM=",
         "organizations_url" : "https://api.github.com/users/meshcollider/orgs",
         "received_events_url" : "https://api.github.com/users/meshcollider/received_events",
         "repos_url" : "https://api.github.com/users/meshcollider/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/meshcollider/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/meshcollider/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/meshcollider"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14533#discussion_r232441562"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14533"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/232441562"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Maybe `walletInstance->WalletLogPrintf` the hashes or something too",
      "commit_id" : "dc487656b9b06308eff78c9fe25bbec88f92d7de",
      "created_at" : "2018-11-10T04:52:39Z",
      "diff_hunk" : "@@ -4095,6 +4095,24 @@ std::shared_ptr<CWallet> CWallet::CreateWalletFromFile(const std::string& name,\n \n     LOCK(cs_main);\n \n+    // Unless allowed, ensure wallet files are not reused across chains:\n+    if (!gArgs.GetBoolArg(\"-allowreusewallets\", false))\n+    {\n+        WalletBatch batch(*walletInstance->database);\n+        CBlockLocator locator;\n+        if (batch.ReadBestBlock(locator))\n+        {\n+            // Wallet is assumed to be from another chain, if its best known\n+            // block is not in active chain:\n+            CBlockIndex *forkIndex = FindForkInGlobalIndex(chainActive, locator);\n+            if (locator.vHave.size() > 0 && forkIndex && forkIndex->GetBlockHash() != locator.vHave.front())\n+            {\n+                InitError(_(\"Wallet files should not be reused across chains\"));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14533#discussion_r232441562",
      "id" : 232441562,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIzMjQ0MTU2Mg==",
      "original_commit_id" : "ddeb3dff85986cc8569f29eda9c005b371d1e612",
      "original_position" : 16,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 173650374,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14533",
      "updated_at" : "2019-06-11T21:10:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/232441562",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/3211283?v=4",
         "events_url" : "https://api.github.com/users/meshcollider/events{/privacy}",
         "followers_url" : "https://api.github.com/users/meshcollider/followers",
         "following_url" : "https://api.github.com/users/meshcollider/following{/other_user}",
         "gists_url" : "https://api.github.com/users/meshcollider/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/meshcollider",
         "id" : 3211283,
         "login" : "meshcollider",
         "node_id" : "MDQ6VXNlcjMyMTEyODM=",
         "organizations_url" : "https://api.github.com/users/meshcollider/orgs",
         "received_events_url" : "https://api.github.com/users/meshcollider/received_events",
         "repos_url" : "https://api.github.com/users/meshcollider/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/meshcollider/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/meshcollider/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/meshcollider"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14533#discussion_r243155370"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14533"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/243155370"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I'm not sure this should really be an option?",
      "commit_id" : "dc487656b9b06308eff78c9fe25bbec88f92d7de",
      "created_at" : "2018-12-20T04:47:52Z",
      "diff_hunk" : "@@ -38,6 +38,7 @@ const WalletInitInterface& g_wallet_init_interface = WalletInit();\n void WalletInit::AddWalletOptions() const\n {\n     gArgs.AddArg(\"-addresstype\", strprintf(\"What type of addresses to use (\\\"legacy\\\", \\\"p2sh-segwit\\\", or \\\"bech32\\\", default: \\\"%s\\\")\", FormatOutputType(DEFAULT_ADDRESS_TYPE)), false, OptionsCategory::WALLET);\n+    gArgs.AddArg(\"-allowreusewallets\", strprintf(\"Allow reusing wallet files across chains (default: %u)\", DEFAULT_ALLOWREUSEWALLETS), false, OptionsCategory::WALLET);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14533#discussion_r243155370",
      "id" : 243155370,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI0MzE1NTM3MA==",
      "original_commit_id" : "9ffb1c658c8535726bbe2dcc9181746ba0194e26",
      "original_position" : 4,
      "path" : "src/wallet/init.cpp",
      "position" : null,
      "pull_request_review_id" : 186847662,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14533",
      "updated_at" : "2019-06-11T21:10:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/243155370",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14533#discussion_r243155393"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14533"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/243155393"
         }
      },
      "author_association" : "MEMBER",
      "body" : "If there is an option, the name `-walletcrosschain` might be better.",
      "commit_id" : "dc487656b9b06308eff78c9fe25bbec88f92d7de",
      "created_at" : "2018-12-20T04:48:07Z",
      "diff_hunk" : "@@ -38,6 +38,7 @@ const WalletInitInterface& g_wallet_init_interface = WalletInit();\n void WalletInit::AddWalletOptions() const\n {\n     gArgs.AddArg(\"-addresstype\", strprintf(\"What type of addresses to use (\\\"legacy\\\", \\\"p2sh-segwit\\\", or \\\"bech32\\\", default: \\\"%s\\\")\", FormatOutputType(DEFAULT_ADDRESS_TYPE)), false, OptionsCategory::WALLET);\n+    gArgs.AddArg(\"-allowreusewallets\", strprintf(\"Allow reusing wallet files across chains (default: %u)\", DEFAULT_ALLOWREUSEWALLETS), false, OptionsCategory::WALLET);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14533#discussion_r243155393",
      "id" : 243155393,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI0MzE1NTM5Mw==",
      "original_commit_id" : "9ffb1c658c8535726bbe2dcc9181746ba0194e26",
      "original_position" : 4,
      "path" : "src/wallet/init.cpp",
      "position" : null,
      "pull_request_review_id" : 186847662,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14533",
      "updated_at" : "2019-06-11T21:10:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/243155393",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14533#discussion_r243155454"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14533"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/243155454"
         }
      },
      "author_association" : "MEMBER",
      "body" : "This comment's described behaviour is definitely wrong: the best known block could be a stale block!",
      "commit_id" : "dc487656b9b06308eff78c9fe25bbec88f92d7de",
      "created_at" : "2018-12-20T04:48:49Z",
      "diff_hunk" : "@@ -4126,6 +4126,24 @@ std::shared_ptr<CWallet> CWallet::CreateWalletFromFile(interfaces::Chain& chain,\n     auto locked_chain = chain.lock();\n     LOCK(walletInstance->cs_wallet);\n \n+    // Unless allowed, ensure wallet files are not reused across chains:\n+    if (!gArgs.GetBoolArg(\"-allowreusewallets\", DEFAULT_ALLOWREUSEWALLETS))\n+    {\n+        WalletBatch batch(*walletInstance->database);\n+        CBlockLocator locator;\n+        if (batch.ReadBestBlock(locator))\n+        {\n+            // Wallet is assumed to be from another chain, if its best known\n+            // block is not in active chain:",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14533#discussion_r243155454",
      "id" : 243155454,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI0MzE1NTQ1NA==",
      "original_commit_id" : "9ffb1c658c8535726bbe2dcc9181746ba0194e26",
      "original_position" : 12,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 186847662,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14533",
      "updated_at" : "2019-06-11T21:10:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/243155454",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/14533#discussion_r243233111"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14533"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/243233111"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Indeed, but this is going away after the @MeshCollider's comments are addressed. I didn't have much time lately, will do it sometime the next two weeks.",
      "commit_id" : "dc487656b9b06308eff78c9fe25bbec88f92d7de",
      "created_at" : "2018-12-20T11:04:02Z",
      "diff_hunk" : "@@ -4126,6 +4126,24 @@ std::shared_ptr<CWallet> CWallet::CreateWalletFromFile(interfaces::Chain& chain,\n     auto locked_chain = chain.lock();\n     LOCK(walletInstance->cs_wallet);\n \n+    // Unless allowed, ensure wallet files are not reused across chains:\n+    if (!gArgs.GetBoolArg(\"-allowreusewallets\", DEFAULT_ALLOWREUSEWALLETS))\n+    {\n+        WalletBatch batch(*walletInstance->database);\n+        CBlockLocator locator;\n+        if (batch.ReadBestBlock(locator))\n+        {\n+            // Wallet is assumed to be from another chain, if its best known\n+            // block is not in active chain:",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14533#discussion_r243233111",
      "id" : 243233111,
      "in_reply_to_id" : 243155454,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI0MzIzMzExMQ==",
      "original_commit_id" : "9ffb1c658c8535726bbe2dcc9181746ba0194e26",
      "original_position" : 12,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 186946092,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/14533",
      "updated_at" : "2019-06-11T21:10:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/243233111",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/7646953?v=4",
         "events_url" : "https://api.github.com/users/mrwhythat/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mrwhythat/followers",
         "following_url" : "https://api.github.com/users/mrwhythat/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mrwhythat/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mrwhythat",
         "id" : 7646953,
         "login" : "mrwhythat",
         "node_id" : "MDQ6VXNlcjc2NDY5NTM=",
         "organizations_url" : "https://api.github.com/users/mrwhythat/orgs",
         "received_events_url" : "https://api.github.com/users/mrwhythat/received_events",
         "repos_url" : "https://api.github.com/users/mrwhythat/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mrwhythat/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mrwhythat/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mrwhythat"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->Needs rebase",
      "created_at" : "2019-01-30T01:03:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14533#issuecomment-458770277",
      "id" : 458770277,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14533",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ1ODc3MDI3Nw==",
      "updated_at" : "2019-01-30T01:03:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/458770277",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->Needs rebase",
      "created_at" : "2019-06-19T00:00:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14533#issuecomment-503354780",
      "id" : 503354780,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14533",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUwMzM1NDc4MA==",
      "updated_at" : "2019-06-19T00:00:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/503354780",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--5fd3d806e98f4a0ca80977bb178665a0-->There hasn't been much activity lately and the patch still needs rebase, so I am closing this for now. Please let me know when you want to continue working on this, so the pull request can be re-opened.",
      "created_at" : "2019-09-30T12:54:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14533#issuecomment-536547711",
      "id" : 536547711,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14533",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUzNjU0NzcxMQ==",
      "updated_at" : "2019-09-30T12:54:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/536547711",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   }
]
