[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "A gentle ping, @MarcoFalke ",
      "created_at" : "2021-12-17T11:58:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23801#issuecomment-996668129",
      "id" : 996668129,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23801",
      "node_id" : "IC_kwDOABII5847Z_Lh",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/996668129/reactions"
      },
      "updated_at" : "2021-12-17T11:58:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/996668129",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/85434418?v=4",
         "events_url" : "https://api.github.com/users/shaavan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/shaavan/followers",
         "following_url" : "https://api.github.com/users/shaavan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/shaavan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/shaavan",
         "id" : 85434418,
         "login" : "shaavan",
         "node_id" : "MDQ6VXNlcjg1NDM0NDE4",
         "organizations_url" : "https://api.github.com/users/shaavan/orgs",
         "received_events_url" : "https://api.github.com/users/shaavan/received_events",
         "repos_url" : "https://api.github.com/users/shaavan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/shaavan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/shaavan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/shaavan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23801#discussion_r771354493"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23801"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/771354493"
         }
      },
      "author_association" : "MEMBER",
      "body" : "```suggestion\r\nstatic constexpr std::chrono::minutes STALE_CHECK_INTERVAL{10};\r\n```\r\n\r\nnit. Also:\r\n\r\n```\r\nThe subject line of commit hash f8b810b8e15b72f5cff4c6e27bea3f6a64fd0c3d is followed by a non-empty line. Subject lines should always be followed by a blank line.",
      "commit_id" : "f8b810b8e15b72f5cff4c6e27bea3f6a64fd0c3d",
      "created_at" : "2021-12-17T12:23:01Z",
      "diff_hunk" : "@@ -58,9 +58,9 @@ static constexpr int32_t MAX_OUTBOUND_PEERS_TO_PROTECT_FROM_DISCONNECT = 4;\n /** Timeout for (unprotected) outbound peers to sync to our chainwork, in seconds */\n static constexpr int64_t CHAIN_SYNC_TIMEOUT = 20 * 60; // 20 minutes\n /** How frequently to check for stale tips, in seconds */\n-static constexpr int64_t STALE_CHECK_INTERVAL = 10 * 60; // 10 minutes\n+static constexpr std::chrono::seconds STALE_CHECK_INTERVAL{10 * 60}; // 10 minutes",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23801#discussion_r771354493",
      "id" : 771354493,
      "line" : 61,
      "node_id" : "PRRC_kwDOABII584t-e99",
      "original_commit_id" : "f8b810b8e15b72f5cff4c6e27bea3f6a64fd0c3d",
      "original_line" : 61,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : 5,
      "pull_request_review_id" : 835174630,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23801",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/771354493/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-12-17T12:25:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/771354493",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23801#discussion_r771354607"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23801"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/771354607"
         }
      },
      "author_association" : "MEMBER",
      "body" : "```suggestion\r\n/** How frequently to check for extra outbound peers and disconnect */\r\n```\r\n\r\nnit",
      "commit_id" : "f8b810b8e15b72f5cff4c6e27bea3f6a64fd0c3d",
      "created_at" : "2021-12-17T12:23:13Z",
      "diff_hunk" : "@@ -58,9 +58,9 @@ static constexpr int32_t MAX_OUTBOUND_PEERS_TO_PROTECT_FROM_DISCONNECT = 4;\n /** Timeout for (unprotected) outbound peers to sync to our chainwork, in seconds */\n static constexpr int64_t CHAIN_SYNC_TIMEOUT = 20 * 60; // 20 minutes\n /** How frequently to check for stale tips, in seconds */\n-static constexpr int64_t STALE_CHECK_INTERVAL = 10 * 60; // 10 minutes\n+static constexpr std::chrono::seconds STALE_CHECK_INTERVAL{10 * 60}; // 10 minutes\n /** How frequently to check for extra outbound peers and disconnect, in seconds */",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23801#discussion_r771354607",
      "id" : 771354607,
      "line" : 62,
      "node_id" : "PRRC_kwDOABII584t-e_v",
      "original_commit_id" : "f8b810b8e15b72f5cff4c6e27bea3f6a64fd0c3d",
      "original_line" : 62,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : 6,
      "pull_request_review_id" : 835174630,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23801",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/771354607/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-12-17T12:25:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/771354607",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23801#discussion_r771355191"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23801"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/771355191"
         }
      },
      "author_association" : "MEMBER",
      "body" : "```suggestion\r\n            LogPrintf(\"Potential stale tip detected, will try using extra outbound peer (last tip update: %d seconds ago)\\n\", count_seconds(time_in_seconds - m_last_tip_update));\r\n```\r\n\r\nnit: Could clarify the unit",
      "commit_id" : "f8b810b8e15b72f5cff4c6e27bea3f6a64fd0c3d",
      "created_at" : "2021-12-17T12:24:17Z",
      "diff_hunk" : "@@ -4335,15 +4335,15 @@ void PeerManagerImpl::CheckForStaleTipAndEvictPeers()\n {\n     LOCK(cs_main);\n \n-    int64_t time_in_seconds = GetTime();\n+    auto time_in_seconds{GetTime<std::chrono::seconds>()};\n \n-    EvictExtraOutboundPeers(std::chrono::seconds{time_in_seconds});\n+    EvictExtraOutboundPeers(time_in_seconds);\n \n     if (time_in_seconds > m_stale_tip_check_time) {\n         // Check whether our tip is stale, and if so, allow using an extra\n         // outbound peer\n         if (!fImporting && !fReindex && m_connman.GetNetworkActive() && m_connman.GetUseAddrmanOutgoing() && TipMayBeStale()) {\n-            LogPrintf(\"Potential stale tip detected, will try using extra outbound peer (last tip update: %d seconds ago)\\n\", time_in_seconds - m_last_tip_update);\n+            LogPrintf(\"Potential stale tip detected, will try using extra outbound peer (last tip update: %d seconds ago)\\n\", (time_in_seconds - m_last_tip_update).count());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23801#discussion_r771355191",
      "id" : 771355191,
      "line" : 4346,
      "node_id" : "PRRC_kwDOABII584t-fI3",
      "original_commit_id" : "f8b810b8e15b72f5cff4c6e27bea3f6a64fd0c3d",
      "original_line" : 4346,
      "original_position" : 68,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : 68,
      "pull_request_review_id" : 835174630,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23801",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/771355191/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-12-17T12:25:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/771355191",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23801#discussion_r771355704"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23801"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/771355704"
         }
      },
      "author_association" : "MEMBER",
      "body" : "```suggestion\r\n    if (m_last_tip_update.count() == 0) {\r\n```\r\n\r\nI'd use this, but there is really no difference, so both are fine.",
      "commit_id" : "f8b810b8e15b72f5cff4c6e27bea3f6a64fd0c3d",
      "created_at" : "2021-12-17T12:25:07Z",
      "diff_hunk" : "@@ -947,10 +947,10 @@ bool PeerManagerImpl::TipMayBeStale()\n {\n     AssertLockHeld(cs_main);\n     const Consensus::Params& consensusParams = m_chainparams.GetConsensus();\n-    if (m_last_tip_update == 0) {\n-        m_last_tip_update = GetTime();\n+    if (m_last_tip_update == std::chrono::seconds::zero()) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23801#discussion_r771355704",
      "id" : 771355704,
      "line" : 950,
      "node_id" : "PRRC_kwDOABII584t-fQ4",
      "original_commit_id" : "f8b810b8e15b72f5cff4c6e27bea3f6a64fd0c3d",
      "original_line" : 950,
      "original_position" : 36,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : 36,
      "pull_request_review_id" : 835174630,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23801",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/771355704/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-12-17T12:25:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/771355704",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Updated from f8b810b8e15b72f5cff4c6e27bea3f6a64fd0c3d to 8e0ba04b2e6e9ecb11b541ecc361c3a9fe5e9fde ([pr23801.01](https://github.com/shaavan/bitcoin/tree/pr23801.01) -> [pr23801.02](https://github.com/shaavan/bitcoin/tree/pr23801.02))\r\n\r\nChanges\r\n- Addressed nits, suggested by @MarcoFalke\r\n",
      "created_at" : "2021-12-17T13:14:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23801#issuecomment-996713201",
      "id" : 996713201,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23801",
      "node_id" : "IC_kwDOABII5847aKLx",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/996713201/reactions"
      },
      "updated_at" : "2021-12-17T13:14:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/996713201",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/85434418?v=4",
         "events_url" : "https://api.github.com/users/shaavan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/shaavan/followers",
         "following_url" : "https://api.github.com/users/shaavan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/shaavan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/shaavan",
         "id" : 85434418,
         "login" : "shaavan",
         "node_id" : "MDQ6VXNlcjg1NDM0NDE4",
         "organizations_url" : "https://api.github.com/users/shaavan/orgs",
         "received_events_url" : "https://api.github.com/users/shaavan/received_events",
         "repos_url" : "https://api.github.com/users/shaavan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/shaavan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/shaavan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/shaavan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23801#discussion_r771385191"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23801"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/771385191"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Addressed in 8e0ba04b2e6e9ecb11b541ecc361c3a9fe5e9fde",
      "commit_id" : "8e0ba04b2e6e9ecb11b541ecc361c3a9fe5e9fde",
      "created_at" : "2021-12-17T13:14:35Z",
      "diff_hunk" : "@@ -58,9 +58,9 @@ static constexpr int32_t MAX_OUTBOUND_PEERS_TO_PROTECT_FROM_DISCONNECT = 4;\n /** Timeout for (unprotected) outbound peers to sync to our chainwork, in seconds */\n static constexpr int64_t CHAIN_SYNC_TIMEOUT = 20 * 60; // 20 minutes\n /** How frequently to check for stale tips, in seconds */\n-static constexpr int64_t STALE_CHECK_INTERVAL = 10 * 60; // 10 minutes\n+static constexpr std::chrono::seconds STALE_CHECK_INTERVAL{10 * 60}; // 10 minutes",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23801#discussion_r771385191",
      "id" : 771385191,
      "in_reply_to_id" : 771354493,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584t-mdn",
      "original_commit_id" : "f8b810b8e15b72f5cff4c6e27bea3f6a64fd0c3d",
      "original_line" : 61,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : null,
      "pull_request_review_id" : 835217784,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23801",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/771385191/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-12-17T13:14:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/771385191",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/85434418?v=4",
         "events_url" : "https://api.github.com/users/shaavan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/shaavan/followers",
         "following_url" : "https://api.github.com/users/shaavan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/shaavan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/shaavan",
         "id" : 85434418,
         "login" : "shaavan",
         "node_id" : "MDQ6VXNlcjg1NDM0NDE4",
         "organizations_url" : "https://api.github.com/users/shaavan/orgs",
         "received_events_url" : "https://api.github.com/users/shaavan/received_events",
         "repos_url" : "https://api.github.com/users/shaavan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/shaavan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/shaavan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/shaavan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23801#discussion_r771385373"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23801"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/771385373"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Addressed in 8e0ba04",
      "commit_id" : "8e0ba04b2e6e9ecb11b541ecc361c3a9fe5e9fde",
      "created_at" : "2021-12-17T13:14:52Z",
      "diff_hunk" : "@@ -58,9 +58,9 @@ static constexpr int32_t MAX_OUTBOUND_PEERS_TO_PROTECT_FROM_DISCONNECT = 4;\n /** Timeout for (unprotected) outbound peers to sync to our chainwork, in seconds */\n static constexpr int64_t CHAIN_SYNC_TIMEOUT = 20 * 60; // 20 minutes\n /** How frequently to check for stale tips, in seconds */\n-static constexpr int64_t STALE_CHECK_INTERVAL = 10 * 60; // 10 minutes\n+static constexpr std::chrono::seconds STALE_CHECK_INTERVAL{10 * 60}; // 10 minutes\n /** How frequently to check for extra outbound peers and disconnect, in seconds */",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23801#discussion_r771385373",
      "id" : 771385373,
      "in_reply_to_id" : 771354607,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584t-mgd",
      "original_commit_id" : "f8b810b8e15b72f5cff4c6e27bea3f6a64fd0c3d",
      "original_line" : 62,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : null,
      "pull_request_review_id" : 835218025,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23801",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/771385373/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-12-17T13:14:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/771385373",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/85434418?v=4",
         "events_url" : "https://api.github.com/users/shaavan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/shaavan/followers",
         "following_url" : "https://api.github.com/users/shaavan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/shaavan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/shaavan",
         "id" : 85434418,
         "login" : "shaavan",
         "node_id" : "MDQ6VXNlcjg1NDM0NDE4",
         "organizations_url" : "https://api.github.com/users/shaavan/orgs",
         "received_events_url" : "https://api.github.com/users/shaavan/received_events",
         "repos_url" : "https://api.github.com/users/shaavan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/shaavan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/shaavan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/shaavan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23801#discussion_r771385486"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23801"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/771385486"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Addressed in 8e0ba04",
      "commit_id" : "8e0ba04b2e6e9ecb11b541ecc361c3a9fe5e9fde",
      "created_at" : "2021-12-17T13:15:02Z",
      "diff_hunk" : "@@ -4335,15 +4335,15 @@ void PeerManagerImpl::CheckForStaleTipAndEvictPeers()\n {\n     LOCK(cs_main);\n \n-    int64_t time_in_seconds = GetTime();\n+    auto time_in_seconds{GetTime<std::chrono::seconds>()};\n \n-    EvictExtraOutboundPeers(std::chrono::seconds{time_in_seconds});\n+    EvictExtraOutboundPeers(time_in_seconds);\n \n     if (time_in_seconds > m_stale_tip_check_time) {\n         // Check whether our tip is stale, and if so, allow using an extra\n         // outbound peer\n         if (!fImporting && !fReindex && m_connman.GetNetworkActive() && m_connman.GetUseAddrmanOutgoing() && TipMayBeStale()) {\n-            LogPrintf(\"Potential stale tip detected, will try using extra outbound peer (last tip update: %d seconds ago)\\n\", time_in_seconds - m_last_tip_update);\n+            LogPrintf(\"Potential stale tip detected, will try using extra outbound peer (last tip update: %d seconds ago)\\n\", (time_in_seconds - m_last_tip_update).count());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23801#discussion_r771385486",
      "id" : 771385486,
      "in_reply_to_id" : 771355191,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584t-miO",
      "original_commit_id" : "f8b810b8e15b72f5cff4c6e27bea3f6a64fd0c3d",
      "original_line" : 4346,
      "original_position" : 68,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : null,
      "pull_request_review_id" : 835218185,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23801",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/771385486/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-12-17T13:15:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/771385486",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/85434418?v=4",
         "events_url" : "https://api.github.com/users/shaavan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/shaavan/followers",
         "following_url" : "https://api.github.com/users/shaavan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/shaavan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/shaavan",
         "id" : 85434418,
         "login" : "shaavan",
         "node_id" : "MDQ6VXNlcjg1NDM0NDE4",
         "organizations_url" : "https://api.github.com/users/shaavan/orgs",
         "received_events_url" : "https://api.github.com/users/shaavan/received_events",
         "repos_url" : "https://api.github.com/users/shaavan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/shaavan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/shaavan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/shaavan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23801#discussion_r771386421"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23801"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/771386421"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Better to keep the coding usage throughout the codebase consistent.\r\n\r\nAddressed in 8e0ba04",
      "commit_id" : "8e0ba04b2e6e9ecb11b541ecc361c3a9fe5e9fde",
      "created_at" : "2021-12-17T13:16:27Z",
      "diff_hunk" : "@@ -947,10 +947,10 @@ bool PeerManagerImpl::TipMayBeStale()\n {\n     AssertLockHeld(cs_main);\n     const Consensus::Params& consensusParams = m_chainparams.GetConsensus();\n-    if (m_last_tip_update == 0) {\n-        m_last_tip_update = GetTime();\n+    if (m_last_tip_update == std::chrono::seconds::zero()) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23801#discussion_r771386421",
      "id" : 771386421,
      "in_reply_to_id" : 771355704,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584t-mw1",
      "original_commit_id" : "f8b810b8e15b72f5cff4c6e27bea3f6a64fd0c3d",
      "original_line" : 950,
      "original_position" : 36,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : null,
      "pull_request_review_id" : 835219437,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23801",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/771386421/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-12-17T13:16:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/771386421",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/85434418?v=4",
         "events_url" : "https://api.github.com/users/shaavan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/shaavan/followers",
         "following_url" : "https://api.github.com/users/shaavan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/shaavan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/shaavan",
         "id" : 85434418,
         "login" : "shaavan",
         "node_id" : "MDQ6VXNlcjg1NDM0NDE4",
         "organizations_url" : "https://api.github.com/users/shaavan/orgs",
         "received_events_url" : "https://api.github.com/users/shaavan/received_events",
         "repos_url" : "https://api.github.com/users/shaavan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/shaavan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/shaavan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/shaavan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23801#discussion_r771391419"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23801"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/771391419"
         }
      },
      "author_association" : "MEMBER",
      "body" : "```suggestion\r\n/** How frequently to check for stale tips */\r\n```",
      "commit_id" : "8e0ba04b2e6e9ecb11b541ecc361c3a9fe5e9fde",
      "created_at" : "2021-12-17T13:24:24Z",
      "diff_hunk" : "@@ -58,9 +58,9 @@ static constexpr int32_t MAX_OUTBOUND_PEERS_TO_PROTECT_FROM_DISCONNECT = 4;\n /** Timeout for (unprotected) outbound peers to sync to our chainwork, in seconds */\n static constexpr int64_t CHAIN_SYNC_TIMEOUT = 20 * 60; // 20 minutes\n /** How frequently to check for stale tips, in seconds */",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23801#discussion_r771391419",
      "id" : 771391419,
      "line" : 60,
      "node_id" : "PRRC_kwDOABII584t-n-7",
      "original_commit_id" : "8e0ba04b2e6e9ecb11b541ecc361c3a9fe5e9fde",
      "original_line" : 60,
      "original_position" : 3,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : 3,
      "pull_request_review_id" : 835226467,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23801",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/771391419/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-12-17T13:54:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/771391419",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23801#discussion_r771391504"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23801"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/771391504"
         }
      },
      "author_association" : "MEMBER",
      "body" : "is atomic no longer needed?",
      "commit_id" : "8e0ba04b2e6e9ecb11b541ecc361c3a9fe5e9fde",
      "created_at" : "2021-12-17T13:24:31Z",
      "diff_hunk" : "@@ -541,7 +541,7 @@ class PeerManagerImpl final : public PeerManager\n     std::map<uint256, std::pair<NodeId, std::list<QueuedBlock>::iterator> > mapBlocksInFlight GUARDED_BY(cs_main);\n \n     /** When our tip was last updated. */\n-    std::atomic<int64_t> m_last_tip_update{0};\n+    std::chrono::seconds m_last_tip_update{0};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23801#discussion_r771391504",
      "id" : 771391504,
      "line" : 544,
      "node_id" : "PRRC_kwDOABII584t-oAQ",
      "original_commit_id" : "8e0ba04b2e6e9ecb11b541ecc361c3a9fe5e9fde",
      "original_line" : 544,
      "original_position" : 27,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : 27,
      "pull_request_review_id" : 835226467,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23801",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/771391504/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-12-17T13:54:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/771391504",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23801#discussion_r771391884"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23801"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/771391884"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Maybe rename to `now` for brevity?",
      "commit_id" : "8e0ba04b2e6e9ecb11b541ecc361c3a9fe5e9fde",
      "created_at" : "2021-12-17T13:25:05Z",
      "diff_hunk" : "@@ -4335,15 +4335,15 @@ void PeerManagerImpl::CheckForStaleTipAndEvictPeers()\n {\n     LOCK(cs_main);\n \n-    int64_t time_in_seconds = GetTime();\n+    auto time_in_seconds{GetTime<std::chrono::seconds>()};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23801#discussion_r771391884",
      "id" : 771391884,
      "line" : 4338,
      "node_id" : "PRRC_kwDOABII584t-oGM",
      "original_commit_id" : "8e0ba04b2e6e9ecb11b541ecc361c3a9fe5e9fde",
      "original_line" : 4338,
      "original_position" : 59,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : 59,
      "pull_request_review_id" : 835226467,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23801",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/771391884/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-12-17T13:54:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/771391884",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23801#discussion_r771613163"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23801"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/771613163"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Initially, I removed it by mistake. But when I tried to initialize var as\r\n```\r\nstd::atomic<std::chrono::seconds> m_last_tip_update{0};\r\n```\r\nIt is causing a compilation error.\r\n\r\nI tried other ways to initialize it, but they don't seem to work.  I searched for a solution on the internet, and I came around this bug report which is in a very similar spirit to this problem: https://gcc.gnu.org/bugzilla/show_bug.cgi?id=54025\r\n\r\nSo how do you suggest I should proceed now:\r\n- Revert this variable type to `std::atomic<int64_t>`\r\n- Keep the current implementation, which the `std::atomic`\r\n",
      "commit_id" : "8e0ba04b2e6e9ecb11b541ecc361c3a9fe5e9fde",
      "created_at" : "2021-12-17T18:36:14Z",
      "diff_hunk" : "@@ -541,7 +541,7 @@ class PeerManagerImpl final : public PeerManager\n     std::map<uint256, std::pair<NodeId, std::list<QueuedBlock>::iterator> > mapBlocksInFlight GUARDED_BY(cs_main);\n \n     /** When our tip was last updated. */\n-    std::atomic<int64_t> m_last_tip_update{0};\n+    std::chrono::seconds m_last_tip_update{0};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23801#discussion_r771613163",
      "id" : 771613163,
      "in_reply_to_id" : 771391504,
      "line" : 544,
      "node_id" : "PRRC_kwDOABII584t_eHr",
      "original_commit_id" : "8e0ba04b2e6e9ecb11b541ecc361c3a9fe5e9fde",
      "original_line" : 544,
      "original_position" : 27,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : 27,
      "pull_request_review_id" : 835533975,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23801",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/771613163/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-12-17T18:36:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/771613163",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/85434418?v=4",
         "events_url" : "https://api.github.com/users/shaavan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/shaavan/followers",
         "following_url" : "https://api.github.com/users/shaavan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/shaavan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/shaavan",
         "id" : 85434418,
         "login" : "shaavan",
         "node_id" : "MDQ6VXNlcjg1NDM0NDE4",
         "organizations_url" : "https://api.github.com/users/shaavan/orgs",
         "received_events_url" : "https://api.github.com/users/shaavan/received_events",
         "repos_url" : "https://api.github.com/users/shaavan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/shaavan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/shaavan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/shaavan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23801#discussion_r771614046"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23801"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/771614046"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Makes sense. I am going to address it in the next update of PR.",
      "commit_id" : "8e0ba04b2e6e9ecb11b541ecc361c3a9fe5e9fde",
      "created_at" : "2021-12-17T18:37:16Z",
      "diff_hunk" : "@@ -4335,15 +4335,15 @@ void PeerManagerImpl::CheckForStaleTipAndEvictPeers()\n {\n     LOCK(cs_main);\n \n-    int64_t time_in_seconds = GetTime();\n+    auto time_in_seconds{GetTime<std::chrono::seconds>()};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23801#discussion_r771614046",
      "id" : 771614046,
      "in_reply_to_id" : 771391884,
      "line" : 4338,
      "node_id" : "PRRC_kwDOABII584t_eVe",
      "original_commit_id" : "8e0ba04b2e6e9ecb11b541ecc361c3a9fe5e9fde",
      "original_line" : 4338,
      "original_position" : 59,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : 59,
      "pull_request_review_id" : 835534699,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23801",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/771614046/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-12-17T18:37:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/771614046",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/85434418?v=4",
         "events_url" : "https://api.github.com/users/shaavan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/shaavan/followers",
         "following_url" : "https://api.github.com/users/shaavan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/shaavan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/shaavan",
         "id" : 85434418,
         "login" : "shaavan",
         "node_id" : "MDQ6VXNlcjg1NDM0NDE4",
         "organizations_url" : "https://api.github.com/users/shaavan/orgs",
         "received_events_url" : "https://api.github.com/users/shaavan/received_events",
         "repos_url" : "https://api.github.com/users/shaavan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/shaavan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/shaavan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/shaavan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23801#discussion_r771824345"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23801"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/771824345"
         }
      },
      "author_association" : "MEMBER",
      "body" : "`atomic` works for specific concrete integer types, it doesn't work for arbitrary data structures, you'll have to use a full mutex. I don't think this is worth it here so might as well stick with a `int64_t`.",
      "commit_id" : "8e0ba04b2e6e9ecb11b541ecc361c3a9fe5e9fde",
      "created_at" : "2021-12-18T13:16:18Z",
      "diff_hunk" : "@@ -541,7 +541,7 @@ class PeerManagerImpl final : public PeerManager\n     std::map<uint256, std::pair<NodeId, std::list<QueuedBlock>::iterator> > mapBlocksInFlight GUARDED_BY(cs_main);\n \n     /** When our tip was last updated. */\n-    std::atomic<int64_t> m_last_tip_update{0};\n+    std::chrono::seconds m_last_tip_update{0};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23801#discussion_r771824345",
      "id" : 771824345,
      "in_reply_to_id" : 771391504,
      "line" : 544,
      "node_id" : "PRRC_kwDOABII584uARrZ",
      "original_commit_id" : "8e0ba04b2e6e9ecb11b541ecc361c3a9fe5e9fde",
      "original_line" : 544,
      "original_position" : 27,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : 27,
      "pull_request_review_id" : 835773499,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23801",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/771824345/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-12-18T13:16:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/771824345",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23801#discussion_r771824635"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23801"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/771824635"
         }
      },
      "author_association" : "MEMBER",
      "body" : "chronos are plain integers (they only have a bit of type safety added at compile time).\r\n\r\n```cpp\r\natomic<seconds> a{0s};\r\n```\r\n\r\nshould compile, like in all other places where `atomic<seconds>` is used.",
      "commit_id" : "8e0ba04b2e6e9ecb11b541ecc361c3a9fe5e9fde",
      "created_at" : "2021-12-18T13:18:40Z",
      "diff_hunk" : "@@ -541,7 +541,7 @@ class PeerManagerImpl final : public PeerManager\n     std::map<uint256, std::pair<NodeId, std::list<QueuedBlock>::iterator> > mapBlocksInFlight GUARDED_BY(cs_main);\n \n     /** When our tip was last updated. */\n-    std::atomic<int64_t> m_last_tip_update{0};\n+    std::chrono::seconds m_last_tip_update{0};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23801#discussion_r771824635",
      "id" : 771824635,
      "in_reply_to_id" : 771391504,
      "line" : 544,
      "node_id" : "PRRC_kwDOABII584uARv7",
      "original_commit_id" : "8e0ba04b2e6e9ecb11b541ecc361c3a9fe5e9fde",
      "original_line" : 544,
      "original_position" : 27,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : 27,
      "pull_request_review_id" : 835773630,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23801",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/771824635/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-12-18T13:18:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/771824635",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK.",
      "created_at" : "2021-12-18T13:25:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23801#issuecomment-997202441",
      "id" : 997202441,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23801",
      "node_id" : "IC_kwDOABII5847cBoJ",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/997202441/reactions"
      },
      "updated_at" : "2021-12-18T13:25:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/997202441",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Updated from 8e0ba04b2e6e9ecb11b541ecc361c3a9fe5e9fde to 1a1fafa4fdcbe7b0d1ef8df466a71bd3e65195d3 ([pr23801.02](https://github.com/shaavan/bitcoin/tree/pr23801.02) -> [pr23801.03](https://github.com/shaavan/bitcoin/tree/pr23801.03))\r\n\r\nAddressed comment by @MarcoFalke\r\n\r\nChanges:\r\n- Addressed one nit. Removed unnecessary in seconds.\r\n- Changed **m_last_tip_update** time from `std::chrono::seconds` -> `std::atomic<std::chrono::seconds>`. Made other related changes, accordingly.\r\n- Renamed **time_in_seconds** to **now** under `void PeerManagerImpl::CheckForStaleTipAndEvictPeers()` definition.\r\n\r\n@Hebasto. I think including `<chrono>` in this file would be redundant, as the header `banman.h`, which this file imports, also imports `chrono` in it.\r\n",
      "created_at" : "2021-12-19T13:25:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23801#issuecomment-997392125",
      "id" : 997392125,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23801",
      "node_id" : "IC_kwDOABII5847cv79",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/997392125/reactions"
      },
      "updated_at" : "2021-12-19T13:25:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/997392125",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/85434418?v=4",
         "events_url" : "https://api.github.com/users/shaavan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/shaavan/followers",
         "following_url" : "https://api.github.com/users/shaavan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/shaavan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/shaavan",
         "id" : 85434418,
         "login" : "shaavan",
         "node_id" : "MDQ6VXNlcjg1NDM0NDE4",
         "organizations_url" : "https://api.github.com/users/shaavan/orgs",
         "received_events_url" : "https://api.github.com/users/shaavan/received_events",
         "repos_url" : "https://api.github.com/users/shaavan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/shaavan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/shaavan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/shaavan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23801#discussion_r771949435"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23801"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/771949435"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Addressed in 1a1fafa4fdcbe7b0d1ef8df466a71bd3e65195d3",
      "commit_id" : "d5207c2b75c33a720879ed1e43f3db1156cdcce8",
      "created_at" : "2021-12-19T13:26:09Z",
      "diff_hunk" : "@@ -58,9 +58,9 @@ static constexpr int32_t MAX_OUTBOUND_PEERS_TO_PROTECT_FROM_DISCONNECT = 4;\n /** Timeout for (unprotected) outbound peers to sync to our chainwork, in seconds */\n static constexpr int64_t CHAIN_SYNC_TIMEOUT = 20 * 60; // 20 minutes\n /** How frequently to check for stale tips, in seconds */",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23801#discussion_r771949435",
      "id" : 771949435,
      "in_reply_to_id" : 771391419,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584uAwN7",
      "original_commit_id" : "8e0ba04b2e6e9ecb11b541ecc361c3a9fe5e9fde",
      "original_line" : 60,
      "original_position" : 3,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : null,
      "pull_request_review_id" : 835862965,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23801",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/771949435/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-12-19T13:26:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/771949435",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/85434418?v=4",
         "events_url" : "https://api.github.com/users/shaavan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/shaavan/followers",
         "following_url" : "https://api.github.com/users/shaavan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/shaavan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/shaavan",
         "id" : 85434418,
         "login" : "shaavan",
         "node_id" : "MDQ6VXNlcjg1NDM0NDE4",
         "organizations_url" : "https://api.github.com/users/shaavan/orgs",
         "received_events_url" : "https://api.github.com/users/shaavan/received_events",
         "repos_url" : "https://api.github.com/users/shaavan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/shaavan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/shaavan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/shaavan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23801#discussion_r771949652"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23801"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/771949652"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "`atomic<seconds> a{0}` was not working but for some reason `atomic<seconds> a{0s}` worked.\r\n\r\nAddressed in 1a1fafa4fdcbe7b0d1ef8df466a71bd3e65195d3",
      "commit_id" : "d5207c2b75c33a720879ed1e43f3db1156cdcce8",
      "created_at" : "2021-12-19T13:27:25Z",
      "diff_hunk" : "@@ -541,7 +541,7 @@ class PeerManagerImpl final : public PeerManager\n     std::map<uint256, std::pair<NodeId, std::list<QueuedBlock>::iterator> > mapBlocksInFlight GUARDED_BY(cs_main);\n \n     /** When our tip was last updated. */\n-    std::atomic<int64_t> m_last_tip_update{0};\n+    std::chrono::seconds m_last_tip_update{0};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23801#discussion_r771949652",
      "id" : 771949652,
      "in_reply_to_id" : 771391504,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584uAwRU",
      "original_commit_id" : "8e0ba04b2e6e9ecb11b541ecc361c3a9fe5e9fde",
      "original_line" : 544,
      "original_position" : 27,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : null,
      "pull_request_review_id" : 835863116,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23801",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/771949652/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-12-19T13:27:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/771949652",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/85434418?v=4",
         "events_url" : "https://api.github.com/users/shaavan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/shaavan/followers",
         "following_url" : "https://api.github.com/users/shaavan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/shaavan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/shaavan",
         "id" : 85434418,
         "login" : "shaavan",
         "node_id" : "MDQ6VXNlcjg1NDM0NDE4",
         "organizations_url" : "https://api.github.com/users/shaavan/orgs",
         "received_events_url" : "https://api.github.com/users/shaavan/received_events",
         "repos_url" : "https://api.github.com/users/shaavan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/shaavan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/shaavan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/shaavan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23801#discussion_r771949664"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23801"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/771949664"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Addressed in 1a1fafa4fdcbe7b0d1ef8df466a71bd3e65195d3",
      "commit_id" : "d5207c2b75c33a720879ed1e43f3db1156cdcce8",
      "created_at" : "2021-12-19T13:27:37Z",
      "diff_hunk" : "@@ -4335,15 +4335,15 @@ void PeerManagerImpl::CheckForStaleTipAndEvictPeers()\n {\n     LOCK(cs_main);\n \n-    int64_t time_in_seconds = GetTime();\n+    auto time_in_seconds{GetTime<std::chrono::seconds>()};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23801#discussion_r771949664",
      "id" : 771949664,
      "in_reply_to_id" : 771391884,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584uAwRg",
      "original_commit_id" : "8e0ba04b2e6e9ecb11b541ecc361c3a9fe5e9fde",
      "original_line" : 4338,
      "original_position" : 59,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : null,
      "pull_request_review_id" : 835863132,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23801",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/771949664/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-12-19T13:27:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/771949664",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/85434418?v=4",
         "events_url" : "https://api.github.com/users/shaavan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/shaavan/followers",
         "following_url" : "https://api.github.com/users/shaavan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/shaavan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/shaavan",
         "id" : 85434418,
         "login" : "shaavan",
         "node_id" : "MDQ6VXNlcjg1NDM0NDE4",
         "organizations_url" : "https://api.github.com/users/shaavan/orgs",
         "received_events_url" : "https://api.github.com/users/shaavan/received_events",
         "repos_url" : "https://api.github.com/users/shaavan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/shaavan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/shaavan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/shaavan"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@shaavan \r\n> @hebasto. I think including `<chrono>` in this file would be redundant, as the header `banman.h`, which this file imports, also imports `chrono` in it.\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/master/doc/developer-notes.md#source-code-organization:\r\n> Every `.cpp` and `.h` file should `#include` every header file it directly uses classes, functions or other definitions from, even if those headers are already included indirectly through other headers.\r\n>  - _Rationale_: Excluding headers because they are already indirectly included results in compilation failures when those indirect dependencies change. Furthermore, it obscures what the real code dependencies are.\r\n",
      "created_at" : "2021-12-19T13:29:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23801#issuecomment-997392742",
      "id" : 997392742,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23801",
      "node_id" : "IC_kwDOABII5847cwFm",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/997392742/reactions"
      },
      "updated_at" : "2021-12-19T13:29:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/997392742",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Updated from 1a1fafa4fdcbe7b0d1ef8df466a71bd3e65195d3 to d5207c2b75c33a720879ed1e43f3db1156cdcce8\r\nAddressed @hebasto comment.\r\n\r\nChanges:\r\n- Added `<chrono>` in the included header as it is a direct dependency in this file.\r\n\r\nThanks, @hebasto, for enlightening me. I will take care of this in the future. ",
      "created_at" : "2021-12-19T13:39:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23801#issuecomment-997394102",
      "id" : 997394102,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23801",
      "node_id" : "IC_kwDOABII5847cwa2",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/997394102/reactions"
      },
      "updated_at" : "2021-12-19T13:39:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/997394102",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/85434418?v=4",
         "events_url" : "https://api.github.com/users/shaavan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/shaavan/followers",
         "following_url" : "https://api.github.com/users/shaavan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/shaavan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/shaavan",
         "id" : 85434418,
         "login" : "shaavan",
         "node_id" : "MDQ6VXNlcjg1NDM0NDE4",
         "organizations_url" : "https://api.github.com/users/shaavan/orgs",
         "received_events_url" : "https://api.github.com/users/shaavan/received_events",
         "repos_url" : "https://api.github.com/users/shaavan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/shaavan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/shaavan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/shaavan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23801#discussion_r771987870"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23801"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/771987870"
         }
      },
      "author_association" : "MEMBER",
      "body" : "While using `std::literals::chrono_literals` why not using `auto` with universal initialization:\r\n```suggestion\r\n    auto m_stale_tip_check_time{0s};\r\n```\r\n\r\nIt looks concise and expressive, no?\r\nAlso could be applied in other places above.",
      "commit_id" : "d5207c2b75c33a720879ed1e43f3db1156cdcce8",
      "created_at" : "2021-12-19T19:00:55Z",
      "diff_hunk" : "@@ -422,7 +423,7 @@ class PeerManagerImpl final : public PeerManager\n     std::atomic<int> m_best_height{-1};\n \n     /** Next time to check for stale tip */\n-    int64_t m_stale_tip_check_time{0};\n+    std::chrono::seconds m_stale_tip_check_time{0s};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23801#discussion_r771987870",
      "id" : 771987870,
      "line" : 426,
      "node_id" : "PRRC_kwDOABII584uA5me",
      "original_commit_id" : "d5207c2b75c33a720879ed1e43f3db1156cdcce8",
      "original_line" : 426,
      "original_position" : 28,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : 28,
      "pull_request_review_id" : 835893320,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23801",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/771987870/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-12-19T19:02:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/771987870",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Updated from  d5207c2b75c33a720879ed1e43f3db1156cdcce8 to 92082ea0bb62ab6ec723b57ca4f2b2c5f6b28469 ([pr23801.03](https://github.com/shaavan/bitcoin/tree/pr23801.03) -> [pr23801.04](https://github.com/shaavan/bitcoin/tree/pr23801.04))\r\nAddressed @Stratospher and @Hebasto comments.\r\n\r\nChanges:\r\n- Added atomic in the included header, as it is a direct dependency.\r\n- Used the universal initializer auto, wherever chrono_literals were used.\r\n",
      "created_at" : "2021-12-20T06:06:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23801#issuecomment-997623628",
      "id" : 997623628,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23801",
      "node_id" : "IC_kwDOABII5847dodM",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/997623628/reactions"
      },
      "updated_at" : "2021-12-20T06:06:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/997623628",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/85434418?v=4",
         "events_url" : "https://api.github.com/users/shaavan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/shaavan/followers",
         "following_url" : "https://api.github.com/users/shaavan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/shaavan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/shaavan",
         "id" : 85434418,
         "login" : "shaavan",
         "node_id" : "MDQ6VXNlcjg1NDM0NDE4",
         "organizations_url" : "https://api.github.com/users/shaavan/orgs",
         "received_events_url" : "https://api.github.com/users/shaavan/received_events",
         "repos_url" : "https://api.github.com/users/shaavan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/shaavan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/shaavan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/shaavan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23801#discussion_r772099335"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23801"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/772099335"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Thats a good suggestion. I have used the auto keyword at all the places where it could be used. See 92082ea0bb62ab6ec723b57ca4f2b2c5f6b28469\r\nHowever, I could not use `auto` with the particular example you had taken. Doing so would cause the following error:\r\n\r\n```\r\nerror: non-static data member declared with placeholder auto\r\n```\r\n\r\nThe rationale for this behavior is discussed [here](https://stackoverflow.com/a/11303175).",
      "commit_id" : "92082ea0bb62ab6ec723b57ca4f2b2c5f6b28469",
      "created_at" : "2021-12-20T06:08:14Z",
      "diff_hunk" : "@@ -422,7 +423,7 @@ class PeerManagerImpl final : public PeerManager\n     std::atomic<int> m_best_height{-1};\n \n     /** Next time to check for stale tip */\n-    int64_t m_stale_tip_check_time{0};\n+    std::chrono::seconds m_stale_tip_check_time{0s};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23801#discussion_r772099335",
      "id" : 772099335,
      "in_reply_to_id" : 771987870,
      "line" : 427,
      "node_id" : "PRRC_kwDOABII584uBU0H",
      "original_commit_id" : "d5207c2b75c33a720879ed1e43f3db1156cdcce8",
      "original_line" : 427,
      "original_position" : 28,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : 29,
      "pull_request_review_id" : 836022105,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23801",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/772099335/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-12-20T06:08:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/772099335",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/85434418?v=4",
         "events_url" : "https://api.github.com/users/shaavan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/shaavan/followers",
         "following_url" : "https://api.github.com/users/shaavan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/shaavan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/shaavan",
         "id" : 85434418,
         "login" : "shaavan",
         "node_id" : "MDQ6VXNlcjg1NDM0NDE4",
         "organizations_url" : "https://api.github.com/users/shaavan/orgs",
         "received_events_url" : "https://api.github.com/users/shaavan/received_events",
         "repos_url" : "https://api.github.com/users/shaavan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/shaavan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/shaavan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/shaavan"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "ACK 92082ea0bb62ab6ec723b57ca4f2b2c5f6b28469",
      "created_at" : "2021-12-20T07:50:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23801#issuecomment-997676990",
      "id" : 997676990,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23801",
      "node_id" : "IC_kwDOABII5847d1e-",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/997676990/reactions"
      },
      "updated_at" : "2021-12-20T07:50:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/997676990",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7975071?v=4",
         "events_url" : "https://api.github.com/users/naumenkogs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/naumenkogs/followers",
         "following_url" : "https://api.github.com/users/naumenkogs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/naumenkogs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/naumenkogs",
         "id" : 7975071,
         "login" : "naumenkogs",
         "node_id" : "MDQ6VXNlcjc5NzUwNzE=",
         "organizations_url" : "https://api.github.com/users/naumenkogs/orgs",
         "received_events_url" : "https://api.github.com/users/naumenkogs/received_events",
         "repos_url" : "https://api.github.com/users/naumenkogs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/naumenkogs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/naumenkogs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/naumenkogs"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I've restarted the \"macOS 12 native [gui, system sqlite only] [no depends]\" Cirrus CI task.",
      "created_at" : "2021-12-20T10:09:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23801#issuecomment-997780217",
      "id" : 997780217,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23801",
      "node_id" : "IC_kwDOABII5847eOr5",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/997780217/reactions"
      },
      "updated_at" : "2021-12-20T10:09:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/997780217",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23801#discussion_r772263015"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23801"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/772263015"
         }
      },
      "author_association" : "MEMBER",
      "body" : "follow-up idea: I think this can also be switched to chrono? It would probably be the last occurrence and conclude the chrono-refactors?",
      "commit_id" : "92082ea0bb62ab6ec723b57ca4f2b2c5f6b28469",
      "created_at" : "2021-12-20T10:48:08Z",
      "diff_hunk" : "@@ -57,10 +59,10 @@ static constexpr auto HEADERS_DOWNLOAD_TIMEOUT_PER_HEADER = 1ms;\n static constexpr int32_t MAX_OUTBOUND_PEERS_TO_PROTECT_FROM_DISCONNECT = 4;\n /** Timeout for (unprotected) outbound peers to sync to our chainwork, in seconds */\n static constexpr int64_t CHAIN_SYNC_TIMEOUT = 20 * 60; // 20 minutes",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23801#discussion_r772263015",
      "id" : 772263015,
      "line" : 61,
      "node_id" : "PRRC_kwDOABII584uB8xn",
      "original_commit_id" : "92082ea0bb62ab6ec723b57ca4f2b2c5f6b28469",
      "original_line" : 61,
      "original_position" : 12,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : 12,
      "pull_request_review_id" : 836248814,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23801",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/772263015/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-12-20T10:59:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/772263015",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23801#discussion_r772267897"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23801"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/772267897"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit: I think it would have been better to use type-safe time here (the goal of this pull), because:\r\n\r\n* GetTime should eventually be removed\r\n* count_seconds should generally only be used to \"serialize\" time values (for example in RPC results or P2P messages)\r\n\r\n(see comments in `src/util/time.h`)",
      "commit_id" : "92082ea0bb62ab6ec723b57ca4f2b2c5f6b28469",
      "created_at" : "2021-12-20T10:55:09Z",
      "diff_hunk" : "@@ -947,10 +949,10 @@ bool PeerManagerImpl::TipMayBeStale()\n {\n     AssertLockHeld(cs_main);\n     const Consensus::Params& consensusParams = m_chainparams.GetConsensus();\n-    if (m_last_tip_update == 0) {\n-        m_last_tip_update = GetTime();\n+    if (count_seconds(m_last_tip_update) == 0) {\n+        m_last_tip_update = GetTime<std::chrono::seconds>();\n     }\n-    return m_last_tip_update < GetTime() - consensusParams.nPowTargetSpacing * 3 && mapBlocksInFlight.empty();\n+    return count_seconds(m_last_tip_update) < GetTime() - consensusParams.nPowTargetSpacing * 3 && mapBlocksInFlight.empty();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23801#discussion_r772267897",
      "id" : 772267897,
      "line" : 955,
      "node_id" : "PRRC_kwDOABII584uB995",
      "original_commit_id" : "92082ea0bb62ab6ec723b57ca4f2b2c5f6b28469",
      "original_line" : 955,
      "original_position" : 52,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : 52,
      "pull_request_review_id" : 836255349,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23801",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/772267897/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-12-20T10:59:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/772267897",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23801#discussion_r772270726"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23801"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/772270726"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit: I think it might have been better to do the calculation type-safe and then only \"serialize\" the result of the addition. This would also result in less code.",
      "commit_id" : "92082ea0bb62ab6ec723b57ca4f2b2c5f6b28469",
      "created_at" : "2021-12-20T10:59:29Z",
      "diff_hunk" : "@@ -4335,20 +4337,20 @@ void PeerManagerImpl::CheckForStaleTipAndEvictPeers()\n {\n     LOCK(cs_main);\n \n-    int64_t time_in_seconds = GetTime();\n+    auto now{GetTime<std::chrono::seconds>()};\n \n-    EvictExtraOutboundPeers(std::chrono::seconds{time_in_seconds});\n+    EvictExtraOutboundPeers(now);\n \n-    if (time_in_seconds > m_stale_tip_check_time) {\n+    if (now > m_stale_tip_check_time) {\n         // Check whether our tip is stale, and if so, allow using an extra\n         // outbound peer\n         if (!fImporting && !fReindex && m_connman.GetNetworkActive() && m_connman.GetUseAddrmanOutgoing() && TipMayBeStale()) {\n-            LogPrintf(\"Potential stale tip detected, will try using extra outbound peer (last tip update: %d seconds ago)\\n\", time_in_seconds - m_last_tip_update);\n+            LogPrintf(\"Potential stale tip detected, will try using extra outbound peer (last tip update: %d seconds ago)\\n\", count_seconds(now) - count_seconds(m_last_tip_update));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23801#discussion_r772270726",
      "id" : 772270726,
      "line" : 4348,
      "node_id" : "PRRC_kwDOABII584uB-qG",
      "original_commit_id" : "92082ea0bb62ab6ec723b57ca4f2b2c5f6b28469",
      "original_line" : 4348,
      "original_position" : 81,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : 81,
      "pull_request_review_id" : 836259239,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23801",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/772270726/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-12-20T10:59:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/772270726",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "re-ack. Left two nits and a follow-up idea.",
      "created_at" : "2021-12-20T11:00:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23801#issuecomment-997818277",
      "id" : 997818277,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23801",
      "node_id" : "IC_kwDOABII5847eX-l",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 1,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/997818277/reactions"
      },
      "updated_at" : "2021-12-20T11:00:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/997818277",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23801#discussion_r772274356"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23801"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/772274356"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "> I think it would have been better to use the type-safe time here\r\n\r\nMy first approach was to do precisely this. But since **m_last_tip_update** was `atomic<seconds>` type.\r\nThere were two issues I faced:\r\n1. Converting RHS to match the type\r\n2. For some reason, subtraction between atomic types is not possible\r\n\r\nI tried to find some way to convert `atomic<seconds>` to `<seconds>`, but I could not find a satisfactory result. That's why I went with the current implementation.\r\n",
      "commit_id" : "92082ea0bb62ab6ec723b57ca4f2b2c5f6b28469",
      "created_at" : "2021-12-20T11:05:18Z",
      "diff_hunk" : "@@ -947,10 +949,10 @@ bool PeerManagerImpl::TipMayBeStale()\n {\n     AssertLockHeld(cs_main);\n     const Consensus::Params& consensusParams = m_chainparams.GetConsensus();\n-    if (m_last_tip_update == 0) {\n-        m_last_tip_update = GetTime();\n+    if (count_seconds(m_last_tip_update) == 0) {\n+        m_last_tip_update = GetTime<std::chrono::seconds>();\n     }\n-    return m_last_tip_update < GetTime() - consensusParams.nPowTargetSpacing * 3 && mapBlocksInFlight.empty();\n+    return count_seconds(m_last_tip_update) < GetTime() - consensusParams.nPowTargetSpacing * 3 && mapBlocksInFlight.empty();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23801#discussion_r772274356",
      "id" : 772274356,
      "in_reply_to_id" : 772267897,
      "line" : 955,
      "node_id" : "PRRC_kwDOABII584uB_i0",
      "original_commit_id" : "92082ea0bb62ab6ec723b57ca4f2b2c5f6b28469",
      "original_line" : 955,
      "original_position" : 52,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : 52,
      "pull_request_review_id" : 836264505,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23801",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/772274356/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-12-20T11:05:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/772274356",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/85434418?v=4",
         "events_url" : "https://api.github.com/users/shaavan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/shaavan/followers",
         "following_url" : "https://api.github.com/users/shaavan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/shaavan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/shaavan",
         "id" : 85434418,
         "login" : "shaavan",
         "node_id" : "MDQ6VXNlcjg1NDM0NDE4",
         "organizations_url" : "https://api.github.com/users/shaavan/orgs",
         "received_events_url" : "https://api.github.com/users/shaavan/received_events",
         "repos_url" : "https://api.github.com/users/shaavan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/shaavan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/shaavan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/shaavan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23801#discussion_r772274584"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23801"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/772274584"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Let's take it in a follow-up!",
      "commit_id" : "92082ea0bb62ab6ec723b57ca4f2b2c5f6b28469",
      "created_at" : "2021-12-20T11:05:38Z",
      "diff_hunk" : "@@ -57,10 +59,10 @@ static constexpr auto HEADERS_DOWNLOAD_TIMEOUT_PER_HEADER = 1ms;\n static constexpr int32_t MAX_OUTBOUND_PEERS_TO_PROTECT_FROM_DISCONNECT = 4;\n /** Timeout for (unprotected) outbound peers to sync to our chainwork, in seconds */\n static constexpr int64_t CHAIN_SYNC_TIMEOUT = 20 * 60; // 20 minutes",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23801#discussion_r772274584",
      "id" : 772274584,
      "in_reply_to_id" : 772263015,
      "line" : 61,
      "node_id" : "PRRC_kwDOABII584uB_mY",
      "original_commit_id" : "92082ea0bb62ab6ec723b57ca4f2b2c5f6b28469",
      "original_line" : 61,
      "original_position" : 12,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : 12,
      "pull_request_review_id" : 836264795,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23801",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/772274584/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-12-20T11:05:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/772274584",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/85434418?v=4",
         "events_url" : "https://api.github.com/users/shaavan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/shaavan/followers",
         "following_url" : "https://api.github.com/users/shaavan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/shaavan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/shaavan",
         "id" : 85434418,
         "login" : "shaavan",
         "node_id" : "MDQ6VXNlcjg1NDM0NDE4",
         "organizations_url" : "https://api.github.com/users/shaavan/orgs",
         "received_events_url" : "https://api.github.com/users/shaavan/received_events",
         "repos_url" : "https://api.github.com/users/shaavan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/shaavan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/shaavan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/shaavan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23801#discussion_r772278021"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23801"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/772278021"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "One doubt:\r\n\r\nIs there a way to go from `atomic<seconds>` to `<seconds>`\r\nOr do subtraction between two `atomic<seconds>` type variables?\r\n\r\nThanks.",
      "commit_id" : "92082ea0bb62ab6ec723b57ca4f2b2c5f6b28469",
      "created_at" : "2021-12-20T11:11:11Z",
      "diff_hunk" : "@@ -4335,20 +4337,20 @@ void PeerManagerImpl::CheckForStaleTipAndEvictPeers()\n {\n     LOCK(cs_main);\n \n-    int64_t time_in_seconds = GetTime();\n+    auto now{GetTime<std::chrono::seconds>()};\n \n-    EvictExtraOutboundPeers(std::chrono::seconds{time_in_seconds});\n+    EvictExtraOutboundPeers(now);\n \n-    if (time_in_seconds > m_stale_tip_check_time) {\n+    if (now > m_stale_tip_check_time) {\n         // Check whether our tip is stale, and if so, allow using an extra\n         // outbound peer\n         if (!fImporting && !fReindex && m_connman.GetNetworkActive() && m_connman.GetUseAddrmanOutgoing() && TipMayBeStale()) {\n-            LogPrintf(\"Potential stale tip detected, will try using extra outbound peer (last tip update: %d seconds ago)\\n\", time_in_seconds - m_last_tip_update);\n+            LogPrintf(\"Potential stale tip detected, will try using extra outbound peer (last tip update: %d seconds ago)\\n\", count_seconds(now) - count_seconds(m_last_tip_update));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23801#discussion_r772278021",
      "id" : 772278021,
      "in_reply_to_id" : 772270726,
      "line" : 4348,
      "node_id" : "PRRC_kwDOABII584uCAcF",
      "original_commit_id" : "92082ea0bb62ab6ec723b57ca4f2b2c5f6b28469",
      "original_line" : 4348,
      "original_position" : 81,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : 81,
      "pull_request_review_id" : 836269673,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23801",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/772278021/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-12-20T11:11:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/772278021",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/85434418?v=4",
         "events_url" : "https://api.github.com/users/shaavan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/shaavan/followers",
         "following_url" : "https://api.github.com/users/shaavan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/shaavan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/shaavan",
         "id" : 85434418,
         "login" : "shaavan",
         "node_id" : "MDQ6VXNlcjg1NDM0NDE4",
         "organizations_url" : "https://api.github.com/users/shaavan/orgs",
         "received_events_url" : "https://api.github.com/users/shaavan/received_events",
         "repos_url" : "https://api.github.com/users/shaavan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/shaavan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/shaavan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/shaavan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23801#discussion_r772281909"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23801"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/772281909"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : ">  subtraction between two atomic<seconds> type variables?\r\n\r\nFor reference, doing so would cause the following error:\r\n```\r\nno match for operator- (operand types are std::atomic<std::chrono::duration<long int> > and std::atomic<std::chrono::duration<long int> >)\r\n```\r\n\r\ncc @MarcoFalke ",
      "commit_id" : "92082ea0bb62ab6ec723b57ca4f2b2c5f6b28469",
      "created_at" : "2021-12-20T11:17:29Z",
      "diff_hunk" : "@@ -4335,20 +4337,20 @@ void PeerManagerImpl::CheckForStaleTipAndEvictPeers()\n {\n     LOCK(cs_main);\n \n-    int64_t time_in_seconds = GetTime();\n+    auto now{GetTime<std::chrono::seconds>()};\n \n-    EvictExtraOutboundPeers(std::chrono::seconds{time_in_seconds});\n+    EvictExtraOutboundPeers(now);\n \n-    if (time_in_seconds > m_stale_tip_check_time) {\n+    if (now > m_stale_tip_check_time) {\n         // Check whether our tip is stale, and if so, allow using an extra\n         // outbound peer\n         if (!fImporting && !fReindex && m_connman.GetNetworkActive() && m_connman.GetUseAddrmanOutgoing() && TipMayBeStale()) {\n-            LogPrintf(\"Potential stale tip detected, will try using extra outbound peer (last tip update: %d seconds ago)\\n\", time_in_seconds - m_last_tip_update);\n+            LogPrintf(\"Potential stale tip detected, will try using extra outbound peer (last tip update: %d seconds ago)\\n\", count_seconds(now) - count_seconds(m_last_tip_update));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23801#discussion_r772281909",
      "id" : 772281909,
      "in_reply_to_id" : 772270726,
      "line" : 4348,
      "node_id" : "PRRC_kwDOABII584uCBY1",
      "original_commit_id" : "92082ea0bb62ab6ec723b57ca4f2b2c5f6b28469",
      "original_line" : 4348,
      "original_position" : 81,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : 81,
      "pull_request_review_id" : 836275091,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23801",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/772281909/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-12-20T11:17:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/772281909",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/85434418?v=4",
         "events_url" : "https://api.github.com/users/shaavan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/shaavan/followers",
         "following_url" : "https://api.github.com/users/shaavan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/shaavan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/shaavan",
         "id" : 85434418,
         "login" : "shaavan",
         "node_id" : "MDQ6VXNlcjg1NDM0NDE4",
         "organizations_url" : "https://api.github.com/users/shaavan/orgs",
         "received_events_url" : "https://api.github.com/users/shaavan/received_events",
         "repos_url" : "https://api.github.com/users/shaavan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/shaavan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/shaavan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/shaavan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23801#discussion_r772324623"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23801"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/772324623"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I think `m_last_tip_update.load()` will load the value wrapped by the atomic",
      "commit_id" : "92082ea0bb62ab6ec723b57ca4f2b2c5f6b28469",
      "created_at" : "2021-12-20T12:28:02Z",
      "diff_hunk" : "@@ -947,10 +949,10 @@ bool PeerManagerImpl::TipMayBeStale()\n {\n     AssertLockHeld(cs_main);\n     const Consensus::Params& consensusParams = m_chainparams.GetConsensus();\n-    if (m_last_tip_update == 0) {\n-        m_last_tip_update = GetTime();\n+    if (count_seconds(m_last_tip_update) == 0) {\n+        m_last_tip_update = GetTime<std::chrono::seconds>();\n     }\n-    return m_last_tip_update < GetTime() - consensusParams.nPowTargetSpacing * 3 && mapBlocksInFlight.empty();\n+    return count_seconds(m_last_tip_update) < GetTime() - consensusParams.nPowTargetSpacing * 3 && mapBlocksInFlight.empty();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23801#discussion_r772324623",
      "id" : 772324623,
      "in_reply_to_id" : 772267897,
      "line" : 955,
      "node_id" : "PRRC_kwDOABII584uCL0P",
      "original_commit_id" : "92082ea0bb62ab6ec723b57ca4f2b2c5f6b28469",
      "original_line" : 955,
      "original_position" : 52,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : 52,
      "pull_request_review_id" : 836334624,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23801",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/772324623/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-12-20T12:28:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/772324623",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23801#discussion_r772565239"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23801"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/772565239"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "> I think m_last_tip_update.load() will load the value wrapped by the atomic\r\n\r\nIt worked! Let me open PR with all the suggested changes, and wrap up this chain of PR of going from `int` -> `chrono` as soon as possible. \r\n\r\nThanks a lot!",
      "commit_id" : "92082ea0bb62ab6ec723b57ca4f2b2c5f6b28469",
      "created_at" : "2021-12-20T17:56:59Z",
      "diff_hunk" : "@@ -947,10 +949,10 @@ bool PeerManagerImpl::TipMayBeStale()\n {\n     AssertLockHeld(cs_main);\n     const Consensus::Params& consensusParams = m_chainparams.GetConsensus();\n-    if (m_last_tip_update == 0) {\n-        m_last_tip_update = GetTime();\n+    if (count_seconds(m_last_tip_update) == 0) {\n+        m_last_tip_update = GetTime<std::chrono::seconds>();\n     }\n-    return m_last_tip_update < GetTime() - consensusParams.nPowTargetSpacing * 3 && mapBlocksInFlight.empty();\n+    return count_seconds(m_last_tip_update) < GetTime() - consensusParams.nPowTargetSpacing * 3 && mapBlocksInFlight.empty();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23801#discussion_r772565239",
      "id" : 772565239,
      "in_reply_to_id" : 772267897,
      "line" : 955,
      "node_id" : "PRRC_kwDOABII584uDGj3",
      "original_commit_id" : "92082ea0bb62ab6ec723b57ca4f2b2c5f6b28469",
      "original_line" : 955,
      "original_position" : 52,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : 52,
      "pull_request_review_id" : 836672857,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23801",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/772565239/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-12-20T17:56:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/772565239",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/85434418?v=4",
         "events_url" : "https://api.github.com/users/shaavan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/shaavan/followers",
         "following_url" : "https://api.github.com/users/shaavan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/shaavan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/shaavan",
         "id" : 85434418,
         "login" : "shaavan",
         "node_id" : "MDQ6VXNlcjg1NDM0NDE4",
         "organizations_url" : "https://api.github.com/users/shaavan/orgs",
         "received_events_url" : "https://api.github.com/users/shaavan/received_events",
         "repos_url" : "https://api.github.com/users/shaavan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/shaavan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/shaavan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/shaavan"
      }
   }
]
