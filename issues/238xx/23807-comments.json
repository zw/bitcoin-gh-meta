[
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK\r\nCould for most part be a scripted-diff?",
      "created_at" : "2021-12-17T19:50:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23807#issuecomment-996993520",
      "id" : 996993520,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23807",
      "node_id" : "IC_kwDOABII5847bOnw",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/996993520/reactions"
      },
      "updated_at" : "2021-12-17T19:50:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/996993520",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@laanwj changed the last commit (f282ffb) to scripted-diff.",
      "created_at" : "2021-12-17T23:16:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23807#issuecomment-997085062",
      "id" : 997085062,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23807",
      "node_id" : "IC_kwDOABII5847bk-G",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/997085062/reactions"
      },
      "updated_at" : "2021-12-17T23:37:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/997085062",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/94266259?v=4",
         "events_url" : "https://api.github.com/users/w0xlt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/w0xlt/followers",
         "following_url" : "https://api.github.com/users/w0xlt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/w0xlt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/w0xlt",
         "id" : 94266259,
         "login" : "w0xlt",
         "node_id" : "U_kgDOBZ5jkw",
         "organizations_url" : "https://api.github.com/users/w0xlt/orgs",
         "received_events_url" : "https://api.github.com/users/w0xlt/received_events",
         "repos_url" : "https://api.github.com/users/w0xlt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/w0xlt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/w0xlt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/w0xlt"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I haven't thought a lot about this, but I have two questions:\r\n\r\nIs this going to cause any additional fingerprinting vectors? I guess not after commit 14ba286556faad794f288ef38493c540382897cb?\r\n\r\nAlso, could this break P2P address relay? I guess only for the local node?",
      "created_at" : "2021-12-18T08:59:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23807#issuecomment-997172643",
      "id" : 997172643,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23807",
      "node_id" : "IC_kwDOABII5847b6Wj",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/997172643/reactions"
      },
      "updated_at" : "2021-12-18T08:59:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/997172643",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Also, could this break P2P address relay? I guess only for the local node?\r\n\r\nYes, but so could a misadjusted time due to connecting to the wrong nodes. At the least it reduces variance between starts of `bitcoind`.",
      "created_at" : "2021-12-18T11:39:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23807#issuecomment-997190177",
      "id" : 997190177,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23807",
      "node_id" : "IC_kwDOABII5847b-oh",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/997190177/reactions"
      },
      "updated_at" : "2021-12-18T11:39:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/997190177",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Also, could this break P2P address relay?\r\n\r\nThis PR doesn't affect address (gossip) relay, because that is independent from AddrMan:\r\nThe decision whether to forward an address will still be on an adjusted time basis after this, see https://github.com/bitcoin/bitcoin/blob/cb27d60f966ad20c465e5db05ba1a2253bd4dab3/src/net_processing.cpp#L2887-L2888\r\nand \r\nhttps://github.com/bitcoin/bitcoin/blob/cb27d60f966ad20c465e5db05ba1a2253bd4dab3/src/net_processing.cpp#L2933-L2936\r\n\r\nAlthough it would probably make sense to change `net_processing` as well to be consistent.",
      "created_at" : "2021-12-18T14:53:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23807#issuecomment-997213391",
      "id" : 997213391,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23807",
      "node_id" : "IC_kwDOABII5847cETP",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/997213391/reactions"
      },
      "updated_at" : "2021-12-18T14:54:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/997213391",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48763452?v=4",
         "events_url" : "https://api.github.com/users/mzumsande/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mzumsande/followers",
         "following_url" : "https://api.github.com/users/mzumsande/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mzumsande/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mzumsande",
         "id" : 48763452,
         "login" : "mzumsande",
         "node_id" : "MDQ6VXNlcjQ4NzYzNDUy",
         "organizations_url" : "https://api.github.com/users/mzumsande/orgs",
         "received_events_url" : "https://api.github.com/users/mzumsande/received_events",
         "repos_url" : "https://api.github.com/users/mzumsande/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mzumsande/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mzumsande"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Could you summarize the reasons for this change and put it in the OP post?\r\nIt's difficult to make sure everyone's on the same page otherwise.",
      "created_at" : "2021-12-20T07:56:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23807#issuecomment-997680716",
      "id" : 997680716,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23807",
      "node_id" : "IC_kwDOABII5847d2ZM",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/997680716/reactions"
      },
      "updated_at" : "2021-12-20T07:56:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/997680716",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7975071?v=4",
         "events_url" : "https://api.github.com/users/naumenkogs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/naumenkogs/followers",
         "following_url" : "https://api.github.com/users/naumenkogs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/naumenkogs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/naumenkogs",
         "id" : 7975071,
         "login" : "naumenkogs",
         "node_id" : "MDQ6VXNlcjc5NzUwNzE=",
         "organizations_url" : "https://api.github.com/users/naumenkogs/orgs",
         "received_events_url" : "https://api.github.com/users/naumenkogs/received_events",
         "repos_url" : "https://api.github.com/users/naumenkogs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/naumenkogs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/naumenkogs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/naumenkogs"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@naumenkogs The main reason is to remove the use of GetAdjustedTime.\r\n\r\nAs @mzumsande said, this change does not affect the network layer (or other layers), only the local AddrMan so it seems safer and easier to test and review.\r\n\r\nI have a version of this PR that also removes `GetAdjustedTime` from `src/node/miner.cpp`, `src/validation.cpp`, `src/net.cpp`, `src/rpc/net.cpp` and `src/net_processing.cpp`.  While this passes the unit and functional tests (without changing them), I'm not sure what behavioral changes this might cause.\r\n\r\nIf reviewers think it's better, I can update the PR with this version.\r\n",
      "created_at" : "2021-12-20T14:26:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23807#issuecomment-997971629",
      "id" : 997971629,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23807",
      "node_id" : "IC_kwDOABII5847e9at",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/997971629/reactions"
      },
      "updated_at" : "2021-12-20T14:33:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/997971629",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/94266259?v=4",
         "events_url" : "https://api.github.com/users/w0xlt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/w0xlt/followers",
         "following_url" : "https://api.github.com/users/w0xlt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/w0xlt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/w0xlt",
         "id" : 94266259,
         "login" : "w0xlt",
         "node_id" : "U_kgDOBZ5jkw",
         "organizations_url" : "https://api.github.com/users/w0xlt/orgs",
         "received_events_url" : "https://api.github.com/users/w0xlt/received_events",
         "repos_url" : "https://api.github.com/users/w0xlt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/w0xlt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/w0xlt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/w0xlt"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23807#discussion_r772425919"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23807"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/772425919"
         }
      },
      "author_association" : "MEMBER",
      "body" : "what is this? I'd say please use `GetTime` or (if possible) `GetTime<chrono>`",
      "commit_id" : "f282ffb475dd6a29d5e2312696d9c4ee4e098f3a",
      "created_at" : "2021-12-20T14:49:49Z",
      "diff_hunk" : "@@ -73,6 +73,7 @@ class CMedianFilter\n /** Functions to keep track of adjusted P2P time */\n int64_t GetTimeOffset();\n int64_t GetAdjustedTime();\n+int64_t GetLocalTime();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23807#discussion_r772425919",
      "id" : 772425919,
      "line" : 76,
      "node_id" : "PRRC_kwDOABII584uCki_",
      "original_commit_id" : "f282ffb475dd6a29d5e2312696d9c4ee4e098f3a",
      "original_line" : 76,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/timedata.h",
      "position" : 4,
      "pull_request_review_id" : 836476307,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23807",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/772425919/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-12-20T14:49:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/772425919",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> If reviewers think it's better, I can update the PR with this version.\r\n\r\nIf this really doesn't change p2p behavior and is only a refactor (?), then I'd say to leave this pull as-is to simplify review. If this is not a refactor, it would be good to list all behavior changes.",
      "created_at" : "2021-12-20T14:52:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23807#issuecomment-997993431",
      "id" : 997993431,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23807",
      "node_id" : "IC_kwDOABII5847fCvX",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/997993431/reactions"
      },
      "updated_at" : "2021-12-20T14:52:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/997993431",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#24543](https://github.com/bitcoin/bitcoin/pull/24543) (net processing: Move remaining globals into PeerManagerImpl by dergoegge)\n* [#24171](https://github.com/bitcoin/bitcoin/pull/24171) (p2p: Sync chain more readily from inbound peers during IBD by sdaftuar)\n* [#22564](https://github.com/bitcoin/bitcoin/pull/22564) (refactor: Move mutable globals cleared in `::UnloadBlockIndex` to `BlockManager` by dongcarl)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2021-12-21T03:36:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23807#issuecomment-998444010",
      "id" : 998444010,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23807",
      "node_id" : "IC_kwDOABII5847gwvq",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/998444010/reactions"
      },
      "updated_at" : "2022-03-20T07:50:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/998444010",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@mzumsande I'm not sure this change doesn't affect p2p\r\n\r\n1) For example, we send addrs to our peers via ADDRv2 message, and those contain timestamps, which mean something for the peer. (Bitcoin Core might be using those very mildly, but anyway, it does look at them).\r\n2) Also, making it further from mainstream (not using adjusted time) might add more fingerprinting capabilities by looking at those timestamps, for nodes with broken clocks (and mildly for the rest, as a consequence)\r\n\r\n@w0xlt \r\n\r\nAnd what's the problem with `GetAdjustedTime` in addrman exactly?\r\n",
      "created_at" : "2021-12-21T09:38:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23807#issuecomment-998621857",
      "id" : 998621857,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23807",
      "node_id" : "IC_kwDOABII5847hcKh",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/998621857/reactions"
      },
      "updated_at" : "2021-12-21T09:39:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/998621857",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7975071?v=4",
         "events_url" : "https://api.github.com/users/naumenkogs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/naumenkogs/followers",
         "following_url" : "https://api.github.com/users/naumenkogs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/naumenkogs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/naumenkogs",
         "id" : 7975071,
         "login" : "naumenkogs",
         "node_id" : "MDQ6VXNlcjc5NzUwNzE=",
         "organizations_url" : "https://api.github.com/users/naumenkogs/orgs",
         "received_events_url" : "https://api.github.com/users/naumenkogs/received_events",
         "repos_url" : "https://api.github.com/users/naumenkogs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/naumenkogs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/naumenkogs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/naumenkogs"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> And what's the problem with GetAdjustedTime in addrman exactly?\r\n\r\nThe problem is that adjusted time is:\r\n* controlled by \"the network\"\r\n* it is not guaranteed to be monotonic\r\n* it doesn't even guarantee to be the correct time (or close to it), even if all your peers are well-behaved\r\n\r\nThus, it is an huge mental burden to think about any change to addrman that involves those timestamps. Also, it makes it hard to understand the existing logic, even if nothing is changed.",
      "created_at" : "2021-12-21T11:49:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23807#issuecomment-998714722",
      "id" : 998714722,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23807",
      "node_id" : "IC_kwDOABII5847hy1i",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/998714722/reactions"
      },
      "updated_at" : "2021-12-21T11:49:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/998714722",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> @mzumsande I'm not sure this change doesn't affect p2p\r\n\r\nI wasn't trying to say that, just that it doesn't really affect gossip relay, because self-announcements have already been changed to always use local time in #23695, and the mechanism of whether to forward these is located in `net_processing` , not in AddrMan.\r\n\r\nOne p2p aspect that the adjusted time in AddrMan can influence in theory are GETADDR responses:\r\n\r\nAddrs for which `IsTerrible()` is true are not included in these, and the Adjusted Time influences `IsTerrible()` both directly as a parameter, and indirectly, by influencing `nLastTry`, `nLastSuccess` and `nAttempts`, `nTime` of an address, which are updated by functions using the adjusted time (such as `Connected()`, `Good()` etc.).\r\n\r\nI'm not sure that this is a huge influence though, since `IsTerrible()` mostly operates on larger timescales (days instead of minutes), GETADDR responses are calculated once a day and cached - whereas the adjusted time would differ from the local time only slightly when they deviate.\r\n\r\nI'd have to think about it a bit more, but I tend toward removing the Adjusted Time from all addr related code - not just AddrMan but also in `net_processing`.",
      "created_at" : "2021-12-21T13:56:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23807#issuecomment-998799956",
      "id" : 998799956,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23807",
      "node_id" : "IC_kwDOABII5847iHpU",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/998799956/reactions"
      },
      "updated_at" : "2021-12-21T13:56:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/998799956",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48763452?v=4",
         "events_url" : "https://api.github.com/users/mzumsande/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mzumsande/followers",
         "following_url" : "https://api.github.com/users/mzumsande/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mzumsande/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mzumsande",
         "id" : 48763452,
         "login" : "mzumsande",
         "node_id" : "MDQ6VXNlcjQ4NzYzNDUy",
         "organizations_url" : "https://api.github.com/users/mzumsande/orgs",
         "received_events_url" : "https://api.github.com/users/mzumsande/received_events",
         "repos_url" : "https://api.github.com/users/mzumsande/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mzumsande/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mzumsande"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@mzumsande \r\n\r\n>the adjusted time would differ from the local time only slightly when they deviate.\r\n\r\nWhat is the biggest possible deviation? From what I see in the code, any, but we show warnings if it deviates more than 5 minutes? I thought the deviation from block header timestamps is limited, but I can't find that.\r\n\r\n>I'd have to think about it a bit more, but I tend toward removing the Adjusted Time from all addr related code - not just AddrMan but also in net_processing.\r\n\r\nI probably support the overall sentiment, I just think we should understand all implications and document it here.\r\nE.g., what do you think about the privacy leak I mentioned? Do you agree it exists, and consider it too mild to pose a threat?",
      "created_at" : "2021-12-22T11:30:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23807#issuecomment-999504071",
      "id" : 999504071,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23807",
      "node_id" : "IC_kwDOABII5847kzjH",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/999504071/reactions"
      },
      "updated_at" : "2021-12-22T11:30:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/999504071",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7975071?v=4",
         "events_url" : "https://api.github.com/users/naumenkogs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/naumenkogs/followers",
         "following_url" : "https://api.github.com/users/naumenkogs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/naumenkogs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/naumenkogs",
         "id" : 7975071,
         "login" : "naumenkogs",
         "node_id" : "MDQ6VXNlcjc5NzUwNzE=",
         "organizations_url" : "https://api.github.com/users/naumenkogs/orgs",
         "received_events_url" : "https://api.github.com/users/naumenkogs/received_events",
         "repos_url" : "https://api.github.com/users/naumenkogs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/naumenkogs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/naumenkogs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/naumenkogs"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> What is the biggest possible deviation?\r\n\r\nLikely `-maxtimeadjustment`?",
      "created_at" : "2021-12-22T11:50:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23807#issuecomment-999517876",
      "id" : 999517876,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23807",
      "node_id" : "IC_kwDOABII5847k260",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/999517876/reactions"
      },
      "updated_at" : "2021-12-22T11:50:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/999517876",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23807#discussion_r774183220"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23807"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/774183220"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "The idea of `GetLocalTime` was to encapsulate `count_seconds(GetTime<std::chrono::seconds>()` to avoid repetition.\r\n\r\nI removed GetLocalTime` function, but `GetTime<chrono>` can't be used without `count_seconds` since `GetAdjustedTime` returns `int_64`.",
      "commit_id" : "cb660ce885d25c0a09d529c280cdda6eb8e7839f",
      "created_at" : "2021-12-22T21:16:50Z",
      "diff_hunk" : "@@ -73,6 +73,7 @@ class CMedianFilter\n /** Functions to keep track of adjusted P2P time */\n int64_t GetTimeOffset();\n int64_t GetAdjustedTime();\n+int64_t GetLocalTime();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23807#discussion_r774183220",
      "id" : 774183220,
      "in_reply_to_id" : 772425919,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584uJRk0",
      "original_commit_id" : "f282ffb475dd6a29d5e2312696d9c4ee4e098f3a",
      "original_line" : 76,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/timedata.h",
      "position" : null,
      "pull_request_review_id" : 838845397,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23807",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/774183220/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-12-22T21:16:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/774183220",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/94266259?v=4",
         "events_url" : "https://api.github.com/users/w0xlt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/w0xlt/followers",
         "following_url" : "https://api.github.com/users/w0xlt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/w0xlt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/w0xlt",
         "id" : 94266259,
         "login" : "w0xlt",
         "node_id" : "U_kgDOBZ5jkw",
         "organizations_url" : "https://api.github.com/users/w0xlt/orgs",
         "received_events_url" : "https://api.github.com/users/w0xlt/received_events",
         "repos_url" : "https://api.github.com/users/w0xlt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/w0xlt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/w0xlt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/w0xlt"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> If this really doesn't change p2p behavior and is only a refactor (?),\r\n\r\nThis is not just a refactor because it changes the AddrMan behavior.\r\nBut since @mzumsande suggests changing `net_processing` as well, I added this change.\r\n\r\n> If this is not a refactor, it would be good to list all behavior changes.\r\n\r\ncommit 3a141ff\r\n\r\n1. `AddrMan::Good()` function will use (by default) the current time (instead of the adjusted time) to update the time when the node last connected to a peer (`AddrInfo::nLastSuccess`,  `AddrInfo::nLastTry` and `AddrManImpl::nLastGood`) (`addrman.h:92`).\r\n\r\n2. `AddrMan::Attempt()` function will use (by default) the current time (instead of the adjusted time) to update the `AddrInfo::nLastTry` (`addrman.h:95`).\r\n\r\n3. `AddrManImpl::AddSingle()` will use the current time (instead of the adjusted time) to update `CAddress::nTime` periodically (`addrman.cpp:559`).\r\n\r\n4. `AddrManImpl::GetAddr_()` will use the current time (instead of the adjusted time) as a filter for `AddrInfo::IsTerrible()` (`addrman.cpp:785`)\r\n\r\n5. `AddrManImpl::ResolveCollisions_()` will use the current time (instead of the adjusted time) to compare `AddrInfo::nLastSuccess` or `AddrInfo::nLastTry`. Note that these fields are also updated with the current time in this PR (items 1 and 2). (`addrman.cpp:871-892`)\r\n\r\n6. `AddrInfo::IsTerrible()` will use the current time (instead of the adjusted time) to determine whether the entry are bad enough to be deleted (`addrman_impl:94`).\r\n\r\n7. `AddrInfo::GetChance()` will use the current time (instead of the adjusted time) to calculate `nSinceLastTry` to deprioritize very recent attempts (`addrman_impl:97`).\r\n\r\ncommit cb660ce\r\n\r\n1. `PeerManagerImpl::CanDirectFetch()` will use the current time (instead of the adjusted time). This function is used to set the flag for initiating extra block-relay-only peer connections, to allow the creation of CMPCTBLOCK message and others. (`net_processing:960`).\r\n\r\n2. `PeerManagerImpl::ProcessMessage()` will use the current time (instead of the adjusted time) to store the new addresses when receiving ADDR or ADDRV2 messages. (`net_processing:2889`)\r\n\r\n3. `PeerManagerImpl::MaybeSendAddr` will use the current time (instead of the adjusted time)  to calculate if the block time is close to today (`net_processing:4599`), the `CNodeState::m_headers_sync_timeout` (`net_processing:4606`) and to detect if a initial-headers-sync peer is unresponsive (`net_processing:4640`) \r\n",
      "created_at" : "2021-12-22T21:21:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23807#issuecomment-999887281",
      "id" : 999887281,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23807",
      "node_id" : "IC_kwDOABII5847mRGx",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/999887281/reactions"
      },
      "updated_at" : "2021-12-22T21:26:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/999887281",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/94266259?v=4",
         "events_url" : "https://api.github.com/users/w0xlt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/w0xlt/followers",
         "following_url" : "https://api.github.com/users/w0xlt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/w0xlt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/w0xlt",
         "id" : 94266259,
         "login" : "w0xlt",
         "node_id" : "U_kgDOBZ5jkw",
         "organizations_url" : "https://api.github.com/users/w0xlt/orgs",
         "received_events_url" : "https://api.github.com/users/w0xlt/received_events",
         "repos_url" : "https://api.github.com/users/w0xlt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/w0xlt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/w0xlt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/w0xlt"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK\r\n\r\nI have found understanding `GetAdjustedTime()` to be a large stumbling block as I've been reading through `AddrMan`.\r\n\r\nI'll spend some time reading the linked threads and discussion on this PR before digging in a bit more",
      "created_at" : "2021-12-29T15:07:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23807#issuecomment-1002639402",
      "id" : 1002639402,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23807",
      "node_id" : "IC_kwDOABII5847wxAq",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1002639402/reactions"
      },
      "updated_at" : "2021-12-29T15:07:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1002639402",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7444140?v=4",
         "events_url" : "https://api.github.com/users/josibake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/josibake/followers",
         "following_url" : "https://api.github.com/users/josibake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/josibake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/josibake",
         "id" : 7444140,
         "login" : "josibake",
         "node_id" : "MDQ6VXNlcjc0NDQxNDA=",
         "organizations_url" : "https://api.github.com/users/josibake/orgs",
         "received_events_url" : "https://api.github.com/users/josibake/received_events",
         "repos_url" : "https://api.github.com/users/josibake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/josibake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/josibake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/josibake"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23807#discussion_r782051608"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23807"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/782051608"
         }
      },
      "author_association" : "MEMBER",
      "body" : "`count_seconds` should only be used to *serialize* the time value in seconds. For example for RPC, the debug log, or the GUI, ...\r\n\r\nIt shouldn't be used for normal code. You can simply use the equivalent `GetTime` here. If you want to use std::chrono, you should update all related types, but this should be done in a separate commit. Ideally a separate pull request.",
      "commit_id" : "cb660ce885d25c0a09d529c280cdda6eb8e7839f",
      "created_at" : "2022-01-11T11:21:08Z",
      "diff_hunk" : "@@ -868,28 +868,28 @@ void AddrManImpl::ResolveCollisions_()\n                 AddrInfo& info_old = mapInfo[id_old];\n \n                 // Has successfully connected in last X hours\n-                if (GetAdjustedTime() - info_old.nLastSuccess < ADDRMAN_REPLACEMENT_HOURS*(60*60)) {\n+                if (count_seconds(GetTime<std::chrono::seconds>()) - info_old.nLastSuccess < ADDRMAN_REPLACEMENT_HOURS*(60*60)) {\n                     erase_collision = true;\n-                } else if (GetAdjustedTime() - info_old.nLastTry < ADDRMAN_REPLACEMENT_HOURS*(60*60)) { // attempted to connect and failed in last X hours\n+                } else if (count_seconds(GetTime<std::chrono::seconds>()) - info_old.nLastTry < ADDRMAN_REPLACEMENT_HOURS*(60*60)) { // attempted to connect and failed in last X hours\n \n                     // Give address at least 60 seconds to successfully connect\n-                    if (GetAdjustedTime() - info_old.nLastTry > 60) {\n+                    if (count_seconds(GetTime<std::chrono::seconds>()) - info_old.nLastTry > 60) {\n                         LogPrint(BCLog::ADDRMAN, \"Replacing %s with %s in tried table\\n\", info_old.ToString(), info_new.ToString());\n \n                         // Replaces an existing address already in the tried table with the new address\n-                        Good_(info_new, false, GetAdjustedTime());\n+                        Good_(info_new, false, count_seconds(GetTime<std::chrono::seconds>()));\n                         erase_collision = true;\n                     }\n-                } else if (GetAdjustedTime() - info_new.nLastSuccess > ADDRMAN_TEST_WINDOW) {\n+                } else if (count_seconds(GetTime<std::chrono::seconds>()) - info_new.nLastSuccess > ADDRMAN_TEST_WINDOW) {\n                     // If the collision hasn't resolved in some reasonable amount of time,\n                     // just evict the old entry -- we must not be able to\n                     // connect to it for some reason.\n                     LogPrint(BCLog::ADDRMAN, \"Unable to test; replacing %s with %s in tried table anyway\\n\", info_old.ToString(), info_new.ToString());\n-                    Good_(info_new, false, GetAdjustedTime());\n+                    Good_(info_new, false, count_seconds(GetTime<std::chrono::seconds>()));\n                     erase_collision = true;\n                 }\n             } else { // Collision is not actually a collision anymore\n-                Good_(info_new, false, GetAdjustedTime());\n+                Good_(info_new, false, count_seconds(GetTime<std::chrono::seconds>()));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23807#discussion_r782051608",
      "id" : 782051608,
      "line" : 892,
      "node_id" : "PRRC_kwDOABII584unSkY",
      "original_commit_id" : "cb660ce885d25c0a09d529c280cdda6eb8e7839f",
      "original_line" : 892,
      "original_position" : 50,
      "original_start_line" : null,
      "path" : "src/addrman.cpp",
      "position" : 50,
      "pull_request_review_id" : 849033387,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23807",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/782051608/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-01-11T11:21:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/782051608",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23807#discussion_r785409221"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23807"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/785409221"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Changed to  `GetTime`.",
      "commit_id" : "3445590aeb1951f905da699098b80cb96cb79f30",
      "created_at" : "2022-01-16T08:52:19Z",
      "diff_hunk" : "@@ -868,28 +868,28 @@ void AddrManImpl::ResolveCollisions_()\n                 AddrInfo& info_old = mapInfo[id_old];\n \n                 // Has successfully connected in last X hours\n-                if (GetAdjustedTime() - info_old.nLastSuccess < ADDRMAN_REPLACEMENT_HOURS*(60*60)) {\n+                if (count_seconds(GetTime<std::chrono::seconds>()) - info_old.nLastSuccess < ADDRMAN_REPLACEMENT_HOURS*(60*60)) {\n                     erase_collision = true;\n-                } else if (GetAdjustedTime() - info_old.nLastTry < ADDRMAN_REPLACEMENT_HOURS*(60*60)) { // attempted to connect and failed in last X hours\n+                } else if (count_seconds(GetTime<std::chrono::seconds>()) - info_old.nLastTry < ADDRMAN_REPLACEMENT_HOURS*(60*60)) { // attempted to connect and failed in last X hours\n \n                     // Give address at least 60 seconds to successfully connect\n-                    if (GetAdjustedTime() - info_old.nLastTry > 60) {\n+                    if (count_seconds(GetTime<std::chrono::seconds>()) - info_old.nLastTry > 60) {\n                         LogPrint(BCLog::ADDRMAN, \"Replacing %s with %s in tried table\\n\", info_old.ToString(), info_new.ToString());\n \n                         // Replaces an existing address already in the tried table with the new address\n-                        Good_(info_new, false, GetAdjustedTime());\n+                        Good_(info_new, false, count_seconds(GetTime<std::chrono::seconds>()));\n                         erase_collision = true;\n                     }\n-                } else if (GetAdjustedTime() - info_new.nLastSuccess > ADDRMAN_TEST_WINDOW) {\n+                } else if (count_seconds(GetTime<std::chrono::seconds>()) - info_new.nLastSuccess > ADDRMAN_TEST_WINDOW) {\n                     // If the collision hasn't resolved in some reasonable amount of time,\n                     // just evict the old entry -- we must not be able to\n                     // connect to it for some reason.\n                     LogPrint(BCLog::ADDRMAN, \"Unable to test; replacing %s with %s in tried table anyway\\n\", info_old.ToString(), info_new.ToString());\n-                    Good_(info_new, false, GetAdjustedTime());\n+                    Good_(info_new, false, count_seconds(GetTime<std::chrono::seconds>()));\n                     erase_collision = true;\n                 }\n             } else { // Collision is not actually a collision anymore\n-                Good_(info_new, false, GetAdjustedTime());\n+                Good_(info_new, false, count_seconds(GetTime<std::chrono::seconds>()));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23807#discussion_r785409221",
      "id" : 785409221,
      "in_reply_to_id" : 782051608,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584u0GTF",
      "original_commit_id" : "cb660ce885d25c0a09d529c280cdda6eb8e7839f",
      "original_line" : 892,
      "original_position" : 50,
      "original_start_line" : null,
      "path" : "src/addrman.cpp",
      "position" : null,
      "pull_request_review_id" : 853646974,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23807",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/785409221/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-01-16T08:52:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/785409221",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/94266259?v=4",
         "events_url" : "https://api.github.com/users/w0xlt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/w0xlt/followers",
         "following_url" : "https://api.github.com/users/w0xlt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/w0xlt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/w0xlt",
         "id" : 94266259,
         "login" : "w0xlt",
         "node_id" : "U_kgDOBZ5jkw",
         "organizations_url" : "https://api.github.com/users/w0xlt/orgs",
         "received_events_url" : "https://api.github.com/users/w0xlt/received_events",
         "repos_url" : "https://api.github.com/users/w0xlt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/w0xlt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/w0xlt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/w0xlt"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Rebased.",
      "created_at" : "2022-01-16T11:08:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23807#issuecomment-1013855380",
      "id" : 1013855380,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23807",
      "node_id" : "IC_kwDOABII5848bjSU",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1013855380/reactions"
      },
      "updated_at" : "2022-01-16T11:08:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1013855380",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/94266259?v=4",
         "events_url" : "https://api.github.com/users/w0xlt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/w0xlt/followers",
         "following_url" : "https://api.github.com/users/w0xlt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/w0xlt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/w0xlt",
         "id" : 94266259,
         "login" : "w0xlt",
         "node_id" : "U_kgDOBZ5jkw",
         "organizations_url" : "https://api.github.com/users/w0xlt/orgs",
         "received_events_url" : "https://api.github.com/users/w0xlt/received_events",
         "repos_url" : "https://api.github.com/users/w0xlt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/w0xlt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/w0xlt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/w0xlt"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23807#discussion_r824470943"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23807"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/824470943"
         }
      },
      "author_association" : "MEMBER",
      "body" : "One side effect Im thinking of is `if (addr.nTime <= 100000000 || addr.nTime > nNow + 10 * 60)`. If this is triggered (because our node lives in the past),  we would mark some of the recent address (including all one-hop self-announcements) to be 5 days old, and deprioritize them?\r\n",
      "commit_id" : "3445590aeb1951f905da699098b80cb96cb79f30",
      "created_at" : "2022-03-11T08:01:03Z",
      "diff_hunk" : "@@ -2891,7 +2891,7 @@ void PeerManagerImpl::ProcessMessage(CNode& pfrom, const std::string& msg_type,\n \n         // Store the new addresses\n         std::vector<CAddress> vAddrOk;\n-        int64_t nNow = GetAdjustedTime();\n+        int64_t nNow = GetTime();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23807#discussion_r824470943",
      "id" : 824470943,
      "line" : 2894,
      "node_id" : "PRRC_kwDOABII584xJG2f",
      "original_commit_id" : "3445590aeb1951f905da699098b80cb96cb79f30",
      "original_line" : 2894,
      "original_position" : 14,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : 14,
      "pull_request_review_id" : 906877215,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23807",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/824470943/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-03-11T08:01:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/824470943",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7975071?v=4",
         "events_url" : "https://api.github.com/users/naumenkogs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/naumenkogs/followers",
         "following_url" : "https://api.github.com/users/naumenkogs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/naumenkogs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/naumenkogs",
         "id" : 7975071,
         "login" : "naumenkogs",
         "node_id" : "MDQ6VXNlcjc5NzUwNzE=",
         "organizations_url" : "https://api.github.com/users/naumenkogs/orgs",
         "received_events_url" : "https://api.github.com/users/naumenkogs/received_events",
         "repos_url" : "https://api.github.com/users/naumenkogs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/naumenkogs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/naumenkogs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/naumenkogs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/23807#discussion_r828209051"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23807"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/828209051"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I don't think this has anything to do with addrman",
      "commit_id" : "3445590aeb1951f905da699098b80cb96cb79f30",
      "created_at" : "2022-03-16T16:21:29Z",
      "diff_hunk" : "@@ -963,7 +963,7 @@ bool PeerManagerImpl::TipMayBeStale()\n \n bool PeerManagerImpl::CanDirectFetch()\n {\n-    return m_chainman.ActiveChain().Tip()->GetBlockTime() > GetAdjustedTime() - m_chainparams.GetConsensus().nPowTargetSpacing * 20;\n+    return m_chainman.ActiveChain().Tip()->GetBlockTime() > GetTime() - m_chainparams.GetConsensus().nPowTargetSpacing * 20;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23807#discussion_r828209051",
      "id" : 828209051,
      "line" : 966,
      "node_id" : "PRRC_kwDOABII584xXXeb",
      "original_commit_id" : "3445590aeb1951f905da699098b80cb96cb79f30",
      "original_line" : 966,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : 5,
      "pull_request_review_id" : 911927988,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/23807",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/828209051/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-03-16T16:22:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/828209051",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Thanks, but due to inactivity I am closing this for now. I've picked it up in #24662.",
      "created_at" : "2022-03-24T18:27:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23807#issuecomment-1077921149",
      "id" : 1077921149,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23807",
      "node_id" : "IC_kwDOABII585AP8V9",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1077921149/reactions"
      },
      "updated_at" : "2022-03-24T18:27:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1077921149",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   }
]
