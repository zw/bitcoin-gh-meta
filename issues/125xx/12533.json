{
   "assignee" : null,
   "assignees" : [],
   "author_association" : "NONE",
   "body" : "Here is the entire process on Ubuntu 16.04 LTS.\r\n\r\nUsually, on all of my previous attempts, the first make has failed. This time I *did* enable update during install which I have not done previously. Why this should make any difference when we run `sudo apt update` and `sudo apt upgrade` is a mystery and I do not think it changed anything.\r\n\r\nNote that usually `make HOST=x86_64-w64-mingw32` fails early.\r\n\r\nI followed all steps in `/doc/build-windows.md`, but contancenate the apt install commands.\r\n\r\nI do not believe that `sudo add-apt-repository \"deb http://archive.ubuntu.com/ubuntu zesty universe\"` does what is expected on its own and this *may be* the source of an issue since the whole purpose of enabling this repo is to get the zesty version of `Mingw-w64` due to a bug. The following `sudo apt update` command responds with errors about the repo not having a release file and, separately `sudo apt upgrade` is not always successful. I have observed elsewhere that repo mirrors are not always in perfect sync and suspect the same here.\r\n\r\nThen, `sudo update-alternatives --config x86_64-w64-mingw32-g++` usually fails with a 'no alternatives' response *but not this time*, so I selected POSIX as instructed. I did previously run `sudo apt update` several times after `sudo apt upgrade` failed before running it again. I suspect this failure is why the first make command fails and probably means previous steps need to be revisited.\r\n\r\n**There seems to possibly be some intermittent repo issues.**\r\n\r\nAlso note, this time I checked out the v0.16.0rc4 tag into a new branch rather than just building on top of master. I do not know what else this changed. **Apparently there have been some more recent dependancy change that were breaking make.** See Issue #12515\r\n\r\nThe first obvious issue during the process is that the previous `update-alternatives ...` command usually fails, and preceding that, the issue with `sudo apt update`.\r\n\r\n![Step 1](http://storage6.static.itmages.com/i/18/0225/h_1519531420_1325696_933cfa5db5.png)\r\n\r\n![Step 2](http://storage3.static.itmages.com/i/18/0225/h_1519532370_8919339_61193f96a3.png)\r\n\r\n![Step 3](http://storage4.static.itmages.com/i/18/0225/h_1519532476_2042879_6bfd1e9471.png)\r\n\r\n![Step 4](http://storage7.static.itmages.com/i/18/0225/h_1519533001_4634839_0203789ec0.png)\r\n\r\n![Step 5](http://storage8.static.itmages.com/i/18/0225/h_1519533079_6992405_210efb3217.png)\r\n\r\n![Step 6](http://storage9.static.itmages.com/i/18/0225/h_1519533200_6056267_47293a39ee.png)\r\n\r\n![Step 7](http://storage2.static.itmages.com/i/18/0225/h_1519533291_5676674_156186835e.png)\r\n\r\n![Step 8](http://storage3.static.itmages.com/i/18/0225/h_1519533394_8611620_b82ae93bed.png)\r\n\r\n![Step 9](http://storage4.static.itmages.com/i/18/0225/h_1519533504_7160306_7ac49fe84b.png)\r\n\r\n![Step 10](http://storage6.static.itmages.com/i/18/0225/h_1519533641_6998675_7484b7fc25.png)\r\n\r\n![Step 11](http://storage9.static.itmages.com/i/18/0225/h_1519534022_7374736_8c7c38567b.png)\r\n\r\n![Step 12](http://storage2.static.itmages.com/i/18/0225/h_1519534118_4103275_6e3142b1c3.png)\r\n\r\n![Step 13](http://storage3.static.itmages.com/i/18/0225/h_1519534204_7053588_000af6e88b.png)\r\n\r\n    >sudo apt install build-essential libtool autotools-dev automake pkg-config bsdmainutils curl git g++-mingw-w64-x86-64 software-properties-common\r\n    >sudo add-apt-repository \"deb http://archive.ubuntu.com/ubuntu zesty universe\"\r\n    >sudo apt update #this posts errors in response\r\n    >sudo apt upgrade #this failed\r\n    >sudo apt update #this posts errors in response\r\n    >sudo apt update #this posts errors in response\r\n    >sudo apt upgrade #succeeded this time\r\n    >sudo update-alternatives --config x86_64-w64-mingw32-g++ #this usually fails with no alternate\r\n    >cd /usr/src\r\n    >sudo git clone https://github.com/bitcoin/bitcoin.git\r\n    >sudo chmod -R a+rw bitcoin\r\n    >git checkout v0.16.0rc4 -b v16rc4\r\n    >PATH=$(echo \"$PATH\" | sed -e 's/:\\ mnt.*//g')\r\n    >cd depends\r\n    >make HOST=x86_64-w64-mingw32 #this usually fails early\r\n\r\n![Step 14](http://storage2.static.itmages.com/i/18/0225/h_1519539081_7759945_876e4c818b.png)\r\n\r\n    >cd ..\r\n    >./autogen.sh\r\n\r\n![Step 15](http://storage6.static.itmages.com/i/18/0225/h_1519541295_2683851_c33fff5d94.png)\r\n\r\n    >CONFIG_SITE=$PWD/depends/x86_64-w64-mingw32/share/config.site ./configure --prefix=/\r\n\r\n![Step 16](http://storage9.static.itmages.com/i/18/0225/h_1519541671_6447794_4e3e8c1dc6.png)\r\n\r\n    >make\r\n\r\nThe compiled executable using this procedure operated correctly on Windows 10 64-bit with limited testing. (without crashing as indicated in the mingw bug footnote in `build-windows.md`) Minor nit that the default proxy port on the compiled version v0.16.0rc4 has `%2` for the value in the gui.\r\n\r\n### This process needs to be debugged for reliable operation and the documents updated.\r\n\r\nI will post an update with further results but expect, if eventually successful, the compiled Windows executables will fail due to the bug and the repo not taking (nope, all three main executables worked on 64-bit Windows 10 without crashing..):\r\n\r\n>  a bug in the 64 bit Mingw-w64 cross compiler packaged for WSL/Ubuntu Xenial 16.04 that\r\ncauses two of the bitcoin executables to crash shortly after start up.\r\n\r\nI was going to post the entire console output for debugging but the scrollback isn't long enough and I lost everything early after running the first make command.",
   "closed_at" : "2018-03-14T14:20:30Z",
   "closed_by" : {
      "avatar_url" : "https://avatars2.githubusercontent.com/u/863730?v=4",
      "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
      "followers_url" : "https://api.github.com/users/fanquake/followers",
      "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
      "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/fanquake",
      "id" : 863730,
      "login" : "fanquake",
      "organizations_url" : "https://api.github.com/users/fanquake/orgs",
      "received_events_url" : "https://api.github.com/users/fanquake/received_events",
      "repos_url" : "https://api.github.com/users/fanquake/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/fanquake"
   },
   "comments" : 2,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12533/comments",
   "created_at" : "2018-02-25T06:21:31Z",
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12533/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/issues/12533",
   "id" : 300002489,
   "labels" : [],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12533/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "number" : 12533,
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "closed",
   "title" : "Cross-compile for Windows on Ubuntu 16.04 LTS *usually* fails using instructions from `/doc/build-windows.md`",
   "updated_at" : "2018-03-14T14:20:30Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12533",
   "user" : {
      "avatar_url" : "https://avatars2.githubusercontent.com/u/1173622?v=4",
      "events_url" : "https://api.github.com/users/Willtech/events{/privacy}",
      "followers_url" : "https://api.github.com/users/Willtech/followers",
      "following_url" : "https://api.github.com/users/Willtech/following{/other_user}",
      "gists_url" : "https://api.github.com/users/Willtech/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/Willtech",
      "id" : 1173622,
      "login" : "Willtech",
      "organizations_url" : "https://api.github.com/users/Willtech/orgs",
      "received_events_url" : "https://api.github.com/users/Willtech/received_events",
      "repos_url" : "https://api.github.com/users/Willtech/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/Willtech/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/Willtech/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/Willtech"
   }
}
