[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/1386#discussion_r874672"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/1386"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/874672"
         }
      },
      "body" : "Shouldn't this be `params.size() > 0`?",
      "commit_id" : "ac13b8a30aadd920af643f0de1d44636bff24575",
      "created_at" : "2012-05-24T13:24:21Z",
      "diff_hunk" : "@@ -0,0 +1,148 @@\n+// Copyright (c) 2010 Satoshi Nakamoto\n+// Copyright (c) 2009-2012 The Bitcoin developers\n+// Distributed under the MIT/X11 software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include \"bitcoinrpc.h\"\n+#include \"filter.h\"\n+#include \"util.h\"\n+#include \"sync.h\"\n+#include \"main.h\"\n+\n+using namespace std;\n+using namespace json_spirit;\n+\n+static CBloomers bloomers;\n+static CCriticalSection cs_lock;\n+static string strNotifyTx;\n+static string strNotifyBlock;\n+\n+Value filterclearall(const Array& params, bool fHelp)\n+{\n+    if (fHelp || params.size() > 1)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1386#discussion_r874672",
      "id" : 874672,
      "original_commit_id" : "55e692a17bf6b4d156f9725cba9d4886f4ccfe08",
      "original_position" : 22,
      "path" : "src/filter.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/1386",
      "updated_at" : "2012-06-13T13:38:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/874672",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/523218?v=3",
         "events_url" : "https://api.github.com/users/roques/events{/privacy}",
         "followers_url" : "https://api.github.com/users/roques/followers",
         "following_url" : "https://api.github.com/users/roques/following{/other_user}",
         "gists_url" : "https://api.github.com/users/roques/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/roques",
         "id" : 523218,
         "login" : "roques",
         "organizations_url" : "https://api.github.com/users/roques/orgs",
         "received_events_url" : "https://api.github.com/users/roques/received_events",
         "repos_url" : "https://api.github.com/users/roques/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/roques/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/roques/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/roques"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/1386#discussion_r874867"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/1386"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/874867"
         }
      },
      "body" : "As far as I can see `CFilter.name` is currently unused.\nIt should be enough to have the name as index of `CBloomers.map` for now.",
      "commit_id" : "ac13b8a30aadd920af643f0de1d44636bff24575",
      "created_at" : "2012-05-24T13:49:53Z",
      "diff_hunk" : "@@ -0,0 +1,74 @@\n+// Copyright (c) 2010 Satoshi Nakamoto\n+// Copyright (c) 2009-2012 The Bitcoin developers\n+// Distributed under the MIT/X11 software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef __BITCOIN_FILTER_H__\n+#define __BITCOIN_FILTER_H__ 1\n+\n+#include <string>\n+#include <map>\n+\n+class CTransaction;\n+class CBlock;\n+\n+class CFilter\n+{\n+private:\n+    std::string name;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1386#discussion_r874867",
      "id" : 874867,
      "original_commit_id" : "55e692a17bf6b4d156f9725cba9d4886f4ccfe08",
      "original_position" : 18,
      "path" : "src/filter.h",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/1386",
      "updated_at" : "2012-06-13T13:38:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/874867",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/523218?v=3",
         "events_url" : "https://api.github.com/users/roques/events{/privacy}",
         "followers_url" : "https://api.github.com/users/roques/followers",
         "following_url" : "https://api.github.com/users/roques/following{/other_user}",
         "gists_url" : "https://api.github.com/users/roques/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/roques",
         "id" : 523218,
         "login" : "roques",
         "organizations_url" : "https://api.github.com/users/roques/orgs",
         "received_events_url" : "https://api.github.com/users/roques/received_events",
         "repos_url" : "https://api.github.com/users/roques/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/roques/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/roques/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/roques"
      }
   },
   {
      "body" : "The code itself (and JSON-RPC help docs) could use better documentation, IMO.\nHow about letting each filter have its own command?",
      "created_at" : "2012-05-26T03:13:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1386#issuecomment-5944030",
      "id" : 5944030,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1386",
      "updated_at" : "2012-05-26T03:13:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/5944030",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "I really could use this functionality right now.\n\nWhile you still can, how about renaming the RPC-commands and adding a related one?\n`notifystart <name> <bitcoinaddress>|0x<hexstring>`  Setup notifications named _name_ about transactions containing _bitcoinaddress_ or _hexstring_\n`notifystop [<name> [<bitcoinaddress>|0x<hexstring>]]`  Stop notifications under _name_ (or all) about _bitcoinaddress_ (or all)\n`listnotifications [<name>]`  List notifications setup under _name_ or all notifications if _name_ is not given.\n\nWhen the notification command is run `%n` could be replaced with the _name_ under which the notification was setup.  If a transaction matched several filters and `%n` is present in the command, command should be called for each matching filter.\n\nTo prevent people with RPC-access to gain shell access as the user running bitcoind, Everything except `[a-zA-Z0-9_]` should be filtered from _name_.  Properly shell-quoting _name_ could suffice in theory, but writing secure shell scripts is hard and in my opinion the restriction is worth the extra ease of security.\n\nPlease excuse me for not substantiating this feature proposal with code.",
      "created_at" : "2012-05-26T22:39:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1386#issuecomment-5950112",
      "id" : 5950112,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1386",
      "updated_at" : "2012-05-26T22:39:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/5950112",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/523218?v=3",
         "events_url" : "https://api.github.com/users/roques/events{/privacy}",
         "followers_url" : "https://api.github.com/users/roques/followers",
         "following_url" : "https://api.github.com/users/roques/following{/other_user}",
         "gists_url" : "https://api.github.com/users/roques/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/roques",
         "id" : 523218,
         "login" : "roques",
         "organizations_url" : "https://api.github.com/users/roques/orgs",
         "received_events_url" : "https://api.github.com/users/roques/received_events",
         "repos_url" : "https://api.github.com/users/roques/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/roques/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/roques/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/roques"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/1386#discussion_r915065"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/1386"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/915065"
         }
      },
      "body" : "local variables strNotifyTx/Block are overriding the static strNotifyTx/Block here?",
      "commit_id" : "ac13b8a30aadd920af643f0de1d44636bff24575",
      "created_at" : "2012-06-01T14:48:43Z",
      "diff_hunk" : "@@ -0,0 +1,148 @@\n+// Copyright (c) 2010 Satoshi Nakamoto\n+// Copyright (c) 2009-2012 The Bitcoin developers\n+// Distributed under the MIT/X11 software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include \"bitcoinrpc.h\"\n+#include \"filter.h\"\n+#include \"util.h\"\n+#include \"sync.h\"\n+#include \"main.h\"\n+\n+using namespace std;\n+using namespace json_spirit;\n+\n+static CBloomers bloomers;\n+static CCriticalSection cs_lock;\n+static string strNotifyTx;\n+static string strNotifyBlock;\n+\n+Value filterclearall(const Array& params, bool fHelp)\n+{\n+    if (fHelp || params.size() > 0)\n+        throw runtime_error(\n+            \"filterclearall\\n\"\n+            \"Clear all filters.\");\n+\n+    LOCK(cs_lock);\n+    bloomers.clearall();\n+\n+    return true;\n+}\n+\n+Value filterclear(const Array& params, bool fHelp)\n+{\n+    if (fHelp || params.size() != 1)\n+        throw runtime_error(\n+            \"filterclear <name>\\n\"\n+            \"Clear filter named <name>.\");\n+\n+    LOCK(cs_lock);\n+    bloomers.clear(params[0].get_str());\n+\n+    return true;\n+}\n+\n+Value filteradd(const Array& params, bool fHelp)\n+{\n+    if (fHelp || params.size() != 2)\n+        throw runtime_error(\n+            \"filteradd <name> <hash hexstring>\\n\"\n+            \"Add <hash> to filter <name>.\");\n+\n+    LOCK(cs_lock);\n+    bloomers.add(params[0].get_str(), ParseHex(params[1].get_str()));\n+\n+    return true;\n+}\n+\n+static bool FilterMatchTxOut(const CTxOut& txout)\n+{\n+    txnouttype type;\n+    int nRequired;\n+    vector<CBitcoinAddress> addresses;\n+\n+    if (!ExtractAddresses(txout.scriptPubKey, type, addresses, nRequired))\n+        return false;\n+\n+    for (unsigned int i = 0; i < addresses.size(); i++) {\n+        uint160 hash = addresses[i].GetHash160();\n+        vector<string> rv = bloomers.contains(string(hash.begin(), hash.end()));\n+        if (rv.size() > 0)\n+            return true;\n+    }\n+\n+    return false;\n+}\n+\n+static bool __FilterMatchTx(const CTransaction& tx)\n+{\n+    BOOST_FOREACH(const CTxOut& txout, tx.vout) {\n+        if (FilterMatchTxOut(txout))\n+            return true;\n+    }\n+\n+    return false;\n+}\n+\n+static bool FilterMatchTx(const CTransaction& tx)\n+{\n+    LOCK(cs_lock);\n+    return __FilterMatchTx(tx);\n+}\n+\n+static bool FilterMatchBlock(const CBlock& block)\n+{\n+    LOCK(cs_lock);\n+\n+    BOOST_FOREACH(const CTransaction& tx, block.vtx) {\n+        if (__FilterMatchTx(tx))\n+            return true;\n+    }\n+\n+    return false;\n+}\n+\n+void FilterNotifyTx(const CTransaction& tx)\n+{\n+    if (strNotifyTx.empty())\n+        return;\n+\n+    if (!FilterMatchTx(tx))\n+        return;\n+\n+    string strCmd(strNotifyTx);\n+    boost::replace_all(strCmd, \"%t\", \"tx\");\n+    boost::replace_all(strCmd, \"%h\", tx.GetHash().GetHex());\n+\n+    printf(\"FILTER(tx) exec: %s\\n\", strCmd.c_str());\n+    boost::thread t(runCommand, strCmd); // thread runs free\n+}\n+\n+void FilterNotifyBlock(const CBlock& block)\n+{\n+    if (strNotifyBlock.empty())\n+        return;\n+\n+    if (!FilterMatchBlock(block))\n+        return;\n+\n+    string strCmd(strNotifyBlock);\n+    boost::replace_all(strCmd, \"%t\", \"block\");\n+    boost::replace_all(strCmd, \"%h\", block.GetHash().GetHex());\n+\n+    printf(\"FILTER(block) exec: %s\\n\", strCmd.c_str());\n+    boost::thread t(runCommand, strCmd); // thread runs free\n+}\n+\n+void FilterSetup()\n+{\n+    string strNotifyTx = GetArg(\"-filtertx\", \"\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1386#discussion_r915065",
      "id" : 915065,
      "original_commit_id" : "102b1be44dcb0d2645ba1e32fdcb226c6febcdd2",
      "original_position" : 140,
      "path" : "src/filter.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/1386",
      "updated_at" : "2012-06-13T13:38:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/915065",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/331997?v=3",
         "events_url" : "https://api.github.com/users/gavinandresen/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gavinandresen/followers",
         "following_url" : "https://api.github.com/users/gavinandresen/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gavinandresen/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gavinandresen",
         "id" : 331997,
         "login" : "gavinandresen",
         "organizations_url" : "https://api.github.com/users/gavinandresen/orgs",
         "received_events_url" : "https://api.github.com/users/gavinandresen/received_events",
         "repos_url" : "https://api.github.com/users/gavinandresen/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gavinandresen/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gavinandresen/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gavinandresen"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/1386#discussion_r915075"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/1386"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/915075"
         }
      },
      "body" : "Maybe filterclear '*' instead of separate filterclearall ?",
      "commit_id" : "ac13b8a30aadd920af643f0de1d44636bff24575",
      "created_at" : "2012-06-01T14:51:33Z",
      "diff_hunk" : "@@ -0,0 +1,148 @@\n+// Copyright (c) 2010 Satoshi Nakamoto\n+// Copyright (c) 2009-2012 The Bitcoin developers\n+// Distributed under the MIT/X11 software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include \"bitcoinrpc.h\"\n+#include \"filter.h\"\n+#include \"util.h\"\n+#include \"sync.h\"\n+#include \"main.h\"\n+\n+using namespace std;\n+using namespace json_spirit;\n+\n+static CBloomers bloomers;\n+static CCriticalSection cs_lock;\n+static string strNotifyTx;\n+static string strNotifyBlock;\n+\n+Value filterclearall(const Array& params, bool fHelp)\n+{\n+    if (fHelp || params.size() > 0)\n+        throw runtime_error(\n+            \"filterclearall\\n\"\n+            \"Clear all filters.\");\n+\n+    LOCK(cs_lock);\n+    bloomers.clearall();\n+\n+    return true;\n+}\n+\n+Value filterclear(const Array& params, bool fHelp)\n+{\n+    if (fHelp || params.size() != 1)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1386#discussion_r915075",
      "id" : 915075,
      "original_commit_id" : "102b1be44dcb0d2645ba1e32fdcb226c6febcdd2",
      "original_position" : 35,
      "path" : "src/filter.cpp",
      "position" : 35,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/1386",
      "updated_at" : "2012-06-13T13:38:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/915075",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/331997?v=3",
         "events_url" : "https://api.github.com/users/gavinandresen/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gavinandresen/followers",
         "following_url" : "https://api.github.com/users/gavinandresen/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gavinandresen/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gavinandresen",
         "id" : 331997,
         "login" : "gavinandresen",
         "organizations_url" : "https://api.github.com/users/gavinandresen/orgs",
         "received_events_url" : "https://api.github.com/users/gavinandresen/received_events",
         "repos_url" : "https://api.github.com/users/gavinandresen/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gavinandresen/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gavinandresen/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gavinandresen"
      }
   },
   {
      "body" : "Copying and expanding on the comments in @gavinandresen's gist RPC interface document https://gist.github.com/2839617\n\n1) 'name' should be restricted to [a-zA-z0-9] etc. as suggested\n\n2) although the **implementation** of the interface is currently exact match, the **semantics** are fuzzy match. users of this interface should perform their own exact matching, to prepare for an implementation that uses bloom filters or other fuzzy matching.  This behavior should be documented somewhere.\n\n3) I dislike the use of * because it creates minor command line PITAs...  but I will go with consensus if others want '*' rather than filterclearall\n\n4) I agree better docs are needed\n\n5) Multi-match behavior should be addressed, as @roques hints.  We could call the filter multiple times, or we could exec once with a comma-separated list.  Currently it stops at first match.\n\n6) Contra @gavinandresen's opinion, I continue to think sending HTTP requests over a pipelined connection is superior to continually exec'ing a program.  @gavinandresen's objections to such methods -- getting SSL and auth correct is difficult -- remain valid.\n\n",
      "created_at" : "2012-06-08T16:30:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1386#issuecomment-6207155",
      "id" : 6207155,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1386",
      "updated_at" : "2012-06-08T16:32:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/6207155",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/494411?v=3",
         "events_url" : "https://api.github.com/users/jgarzik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jgarzik/followers",
         "following_url" : "https://api.github.com/users/jgarzik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jgarzik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jgarzik",
         "id" : 494411,
         "login" : "jgarzik",
         "organizations_url" : "https://api.github.com/users/jgarzik/orgs",
         "received_events_url" : "https://api.github.com/users/jgarzik/received_events",
         "repos_url" : "https://api.github.com/users/jgarzik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jgarzik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jgarzik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jgarzik"
      }
   },
   {
      "body" : "1) I suggest allowing '_' in name, so PCRE \\w matches.\n\n3) I think '*' fits better here, but don't care strongly. Perhaps make the argument optional, so filterclear() does all?\n\n6) How about supporting longpolling? It's well-established for JSON-RPC already and seems to work reasonably well. With multithreading support, it's even fairly easy to implement (see #1355)",
      "created_at" : "2012-06-08T17:30:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1386#issuecomment-6208512",
      "id" : 6208512,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1386",
      "updated_at" : "2012-06-08T17:30:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/6208512",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "longpolling-like behavior might indeed be a reasonable solution.  That would obviate the need for an HTTP callback with its own authentication.\n",
      "created_at" : "2012-06-08T17:37:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1386#issuecomment-6208680",
      "id" : 6208680,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1386",
      "updated_at" : "2012-06-08T17:37:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/6208680",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/494411?v=3",
         "events_url" : "https://api.github.com/users/jgarzik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jgarzik/followers",
         "following_url" : "https://api.github.com/users/jgarzik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jgarzik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jgarzik",
         "id" : 494411,
         "login" : "jgarzik",
         "organizations_url" : "https://api.github.com/users/jgarzik/orgs",
         "received_events_url" : "https://api.github.com/users/jgarzik/received_events",
         "repos_url" : "https://api.github.com/users/jgarzik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jgarzik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jgarzik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jgarzik"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/1386#discussion_r953112"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/1386"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/953112"
         }
      },
      "body" : "yes, that is a bug",
      "commit_id" : "ac13b8a30aadd920af643f0de1d44636bff24575",
      "created_at" : "2012-06-08T18:59:01Z",
      "diff_hunk" : "@@ -0,0 +1,148 @@\n+// Copyright (c) 2010 Satoshi Nakamoto\n+// Copyright (c) 2009-2012 The Bitcoin developers\n+// Distributed under the MIT/X11 software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include \"bitcoinrpc.h\"\n+#include \"filter.h\"\n+#include \"util.h\"\n+#include \"sync.h\"\n+#include \"main.h\"\n+\n+using namespace std;\n+using namespace json_spirit;\n+\n+static CBloomers bloomers;\n+static CCriticalSection cs_lock;\n+static string strNotifyTx;\n+static string strNotifyBlock;\n+\n+Value filterclearall(const Array& params, bool fHelp)\n+{\n+    if (fHelp || params.size() > 0)\n+        throw runtime_error(\n+            \"filterclearall\\n\"\n+            \"Clear all filters.\");\n+\n+    LOCK(cs_lock);\n+    bloomers.clearall();\n+\n+    return true;\n+}\n+\n+Value filterclear(const Array& params, bool fHelp)\n+{\n+    if (fHelp || params.size() != 1)\n+        throw runtime_error(\n+            \"filterclear <name>\\n\"\n+            \"Clear filter named <name>.\");\n+\n+    LOCK(cs_lock);\n+    bloomers.clear(params[0].get_str());\n+\n+    return true;\n+}\n+\n+Value filteradd(const Array& params, bool fHelp)\n+{\n+    if (fHelp || params.size() != 2)\n+        throw runtime_error(\n+            \"filteradd <name> <hash hexstring>\\n\"\n+            \"Add <hash> to filter <name>.\");\n+\n+    LOCK(cs_lock);\n+    bloomers.add(params[0].get_str(), ParseHex(params[1].get_str()));\n+\n+    return true;\n+}\n+\n+static bool FilterMatchTxOut(const CTxOut& txout)\n+{\n+    txnouttype type;\n+    int nRequired;\n+    vector<CBitcoinAddress> addresses;\n+\n+    if (!ExtractAddresses(txout.scriptPubKey, type, addresses, nRequired))\n+        return false;\n+\n+    for (unsigned int i = 0; i < addresses.size(); i++) {\n+        uint160 hash = addresses[i].GetHash160();\n+        vector<string> rv = bloomers.contains(string(hash.begin(), hash.end()));\n+        if (rv.size() > 0)\n+            return true;\n+    }\n+\n+    return false;\n+}\n+\n+static bool __FilterMatchTx(const CTransaction& tx)\n+{\n+    BOOST_FOREACH(const CTxOut& txout, tx.vout) {\n+        if (FilterMatchTxOut(txout))\n+            return true;\n+    }\n+\n+    return false;\n+}\n+\n+static bool FilterMatchTx(const CTransaction& tx)\n+{\n+    LOCK(cs_lock);\n+    return __FilterMatchTx(tx);\n+}\n+\n+static bool FilterMatchBlock(const CBlock& block)\n+{\n+    LOCK(cs_lock);\n+\n+    BOOST_FOREACH(const CTransaction& tx, block.vtx) {\n+        if (__FilterMatchTx(tx))\n+            return true;\n+    }\n+\n+    return false;\n+}\n+\n+void FilterNotifyTx(const CTransaction& tx)\n+{\n+    if (strNotifyTx.empty())\n+        return;\n+\n+    if (!FilterMatchTx(tx))\n+        return;\n+\n+    string strCmd(strNotifyTx);\n+    boost::replace_all(strCmd, \"%t\", \"tx\");\n+    boost::replace_all(strCmd, \"%h\", tx.GetHash().GetHex());\n+\n+    printf(\"FILTER(tx) exec: %s\\n\", strCmd.c_str());\n+    boost::thread t(runCommand, strCmd); // thread runs free\n+}\n+\n+void FilterNotifyBlock(const CBlock& block)\n+{\n+    if (strNotifyBlock.empty())\n+        return;\n+\n+    if (!FilterMatchBlock(block))\n+        return;\n+\n+    string strCmd(strNotifyBlock);\n+    boost::replace_all(strCmd, \"%t\", \"block\");\n+    boost::replace_all(strCmd, \"%h\", block.GetHash().GetHex());\n+\n+    printf(\"FILTER(block) exec: %s\\n\", strCmd.c_str());\n+    boost::thread t(runCommand, strCmd); // thread runs free\n+}\n+\n+void FilterSetup()\n+{\n+    string strNotifyTx = GetArg(\"-filtertx\", \"\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1386#discussion_r953112",
      "id" : 953112,
      "original_commit_id" : "102b1be44dcb0d2645ba1e32fdcb226c6febcdd2",
      "original_position" : 140,
      "path" : "src/filter.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/1386",
      "updated_at" : "2012-06-13T13:38:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/953112",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/494411?v=3",
         "events_url" : "https://api.github.com/users/jgarzik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jgarzik/followers",
         "following_url" : "https://api.github.com/users/jgarzik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jgarzik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jgarzik",
         "id" : 494411,
         "login" : "jgarzik",
         "organizations_url" : "https://api.github.com/users/jgarzik/orgs",
         "received_events_url" : "https://api.github.com/users/jgarzik/received_events",
         "repos_url" : "https://api.github.com/users/jgarzik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jgarzik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jgarzik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jgarzik"
      }
   },
   {
      "body" : "Rebased, but it no longer builds or works after the CTxDestination updates in #master",
      "created_at" : "2012-06-13T13:39:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1386#issuecomment-6301145",
      "id" : 6301145,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1386",
      "updated_at" : "2012-06-13T13:39:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/6301145",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/494411?v=3",
         "events_url" : "https://api.github.com/users/jgarzik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jgarzik/followers",
         "following_url" : "https://api.github.com/users/jgarzik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jgarzik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jgarzik",
         "id" : 494411,
         "login" : "jgarzik",
         "organizations_url" : "https://api.github.com/users/jgarzik/orgs",
         "received_events_url" : "https://api.github.com/users/jgarzik/received_events",
         "repos_url" : "https://api.github.com/users/jgarzik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jgarzik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jgarzik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jgarzik"
      }
   },
   {
      "body" : "@jgarzik Do you plan to finish rebasing it?",
      "created_at" : "2012-06-19T00:07:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1386#issuecomment-6412808",
      "id" : 6412808,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1386",
      "updated_at" : "2012-06-19T00:07:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/6412808",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "Closing - out of date.  Consensus seems to agree with the approach, so the pull request will be reopened if/when the branch is updated (volunteers welcome).  Presumably, this would coincide with the introduction of the discussion P2P protocol bloom filter changes.",
      "created_at" : "2012-06-27T15:57:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1386#issuecomment-6607401",
      "id" : 6607401,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1386",
      "updated_at" : "2012-06-27T15:57:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/6607401",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/494411?v=3",
         "events_url" : "https://api.github.com/users/jgarzik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jgarzik/followers",
         "following_url" : "https://api.github.com/users/jgarzik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jgarzik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jgarzik",
         "id" : 494411,
         "login" : "jgarzik",
         "organizations_url" : "https://api.github.com/users/jgarzik/orgs",
         "received_events_url" : "https://api.github.com/users/jgarzik/received_events",
         "repos_url" : "https://api.github.com/users/jgarzik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jgarzik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jgarzik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jgarzik"
      }
   }
]
