[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25447#discussion_r903721490"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25447"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/903721490"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit: year",
      "commit_id" : "98a82551dfb8b09bd563724cabeb587ffc779d7f",
      "created_at" : "2022-06-22T13:08:45Z",
      "diff_hunk" : "@@ -0,0 +1,77 @@\n+// Copyright (c) 2020-2021 The Bitcoin Core developers",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25447#discussion_r903721490",
      "id" : 903721490,
      "line" : null,
      "node_id" : "PRRC_kwDOABII58413bIS",
      "original_commit_id" : "f7c8ec6d1fd23f293fc57218b567e8a9c79c9230",
      "original_line" : 1,
      "original_position" : 1,
      "original_start_line" : null,
      "path" : "src/test/fuzz/orphanage.cpp",
      "position" : null,
      "pull_request_review_id" : 1015145059,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25447",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/903721490/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-22T13:16:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/903721490",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25447#discussion_r903724017"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25447"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/903724017"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nondeterminism does not work nicely with whitebox and greybox fuzzing. It makes it impossible for fuzz engines to track coverage precisely. Ideally the full program execution is fully predetermined by the fuzz input exclusively.\r\n\r\nPlease remove this and use `fuzzed_data_provider` instead.",
      "commit_id" : "98a82551dfb8b09bd563724cabeb587ffc779d7f",
      "created_at" : "2022-06-22T13:11:00Z",
      "diff_hunk" : "@@ -0,0 +1,77 @@\n+// Copyright (c) 2020-2021 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <random.h>",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25447#discussion_r903724017",
      "id" : 903724017,
      "line" : null,
      "node_id" : "PRRC_kwDOABII58413bvx",
      "original_commit_id" : "f7c8ec6d1fd23f293fc57218b567e8a9c79c9230",
      "original_line" : 5,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/test/fuzz/orphanage.cpp",
      "position" : null,
      "pull_request_review_id" : 1015145059,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25447",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/903724017/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-22T13:16:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/903724017",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25447#discussion_r903725113"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25447"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/903725113"
         }
      },
      "author_association" : "MEMBER",
      "body" : "```suggestion\r\n```\r\n\r\nnit: I think they are default initialized, so can remove them?",
      "commit_id" : "98a82551dfb8b09bd563724cabeb587ffc779d7f",
      "created_at" : "2022-06-22T13:11:59Z",
      "diff_hunk" : "@@ -0,0 +1,77 @@\n+// Copyright (c) 2020-2021 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <random.h>\n+#include <primitives/transaction.h>\n+#include <test/util/script.h>\n+#include <test/fuzz/FuzzedDataProvider.h>\n+#include <test/fuzz/fuzz.h>\n+#include <test/fuzz/util.h>\n+#include <txorphanage.h>\n+\n+\n+FUZZ_TARGET(orphanage)\n+{\n+    FuzzedDataProvider fuzzed_data_provider(buffer.data(), buffer.size());\n+\n+    TxOrphanage orphanage;\n+    std::set<uint256> orphan_work_set;\n+\n+    LIMITED_WHILE(fuzzed_data_provider.ConsumeBool(), COINBASE_MATURITY)\n+    {\n+        // construct transaction\n+        const CTransaction tx = [&] {\n+            CMutableTransaction tx_mut;\n+            tx_mut.nVersion = CTransaction::CURRENT_VERSION;\n+            tx_mut.nLockTime = 0;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25447#discussion_r903725113",
      "id" : 903725113,
      "line" : null,
      "node_id" : "PRRC_kwDOABII58413cA5",
      "original_commit_id" : "f7c8ec6d1fd23f293fc57218b567e8a9c79c9230",
      "original_line" : 27,
      "original_position" : 27,
      "original_start_line" : 26,
      "path" : "src/test/fuzz/orphanage.cpp",
      "position" : null,
      "pull_request_review_id" : 1015145059,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25447",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/903725113/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "updated_at" : "2022-06-22T13:16:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/903725113",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25447#discussion_r903727000"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25447"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/903727000"
         }
      },
      "author_association" : "MEMBER",
      "body" : "any reason to use `COINBASE_MATURITY` here? Shouldn't this be a constant derived from `TxOrphanage` internals? For example a bit larger than the maximum set size?",
      "commit_id" : "98a82551dfb8b09bd563724cabeb587ffc779d7f",
      "created_at" : "2022-06-22T13:13:48Z",
      "diff_hunk" : "@@ -0,0 +1,77 @@\n+// Copyright (c) 2020-2021 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <random.h>\n+#include <primitives/transaction.h>\n+#include <test/util/script.h>\n+#include <test/fuzz/FuzzedDataProvider.h>\n+#include <test/fuzz/fuzz.h>\n+#include <test/fuzz/util.h>\n+#include <txorphanage.h>\n+\n+\n+FUZZ_TARGET(orphanage)\n+{\n+    FuzzedDataProvider fuzzed_data_provider(buffer.data(), buffer.size());\n+\n+    TxOrphanage orphanage;\n+    std::set<uint256> orphan_work_set;\n+\n+    LIMITED_WHILE(fuzzed_data_provider.ConsumeBool(), COINBASE_MATURITY)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25447#discussion_r903727000",
      "id" : 903727000,
      "line" : null,
      "node_id" : "PRRC_kwDOABII58413ceY",
      "original_commit_id" : "f7c8ec6d1fd23f293fc57218b567e8a9c79c9230",
      "original_line" : 21,
      "original_position" : 21,
      "original_start_line" : null,
      "path" : "src/test/fuzz/orphanage.cpp",
      "position" : null,
      "pull_request_review_id" : 1015145059,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25447",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/903727000/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-22T13:16:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/903727000",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25447#discussion_r903728964"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25447"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/903728964"
         }
      },
      "author_association" : "MEMBER",
      "body" : "It might be better to pick either:\r\n\r\n* an existing prevout of a previously created transaction\r\n* a random hash\r\n\r\nOtherwise you are only ever testing one generation of txs.",
      "commit_id" : "98a82551dfb8b09bd563724cabeb587ffc779d7f",
      "created_at" : "2022-06-22T13:15:33Z",
      "diff_hunk" : "@@ -0,0 +1,77 @@\n+// Copyright (c) 2020-2021 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <random.h>\n+#include <primitives/transaction.h>\n+#include <test/util/script.h>\n+#include <test/fuzz/FuzzedDataProvider.h>\n+#include <test/fuzz/fuzz.h>\n+#include <test/fuzz/util.h>\n+#include <txorphanage.h>\n+\n+\n+FUZZ_TARGET(orphanage)\n+{\n+    FuzzedDataProvider fuzzed_data_provider(buffer.data(), buffer.size());\n+\n+    TxOrphanage orphanage;\n+    std::set<uint256> orphan_work_set;\n+\n+    LIMITED_WHILE(fuzzed_data_provider.ConsumeBool(), COINBASE_MATURITY)\n+    {\n+        // construct transaction\n+        const CTransaction tx = [&] {\n+            CMutableTransaction tx_mut;\n+            tx_mut.nVersion = CTransaction::CURRENT_VERSION;\n+            tx_mut.nLockTime = 0;\n+            const auto num_in = GetRandInternal(COINBASE_MATURITY);\n+            const auto num_out = GetRandInternal(COINBASE_MATURITY);\n+            for (unsigned i = 0; i < num_in; i++) {\n+                CTxIn in(GetRandHash(), i);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25447#discussion_r903728964",
      "id" : 903728964,
      "line" : null,
      "node_id" : "PRRC_kwDOABII58413c9E",
      "original_commit_id" : "f7c8ec6d1fd23f293fc57218b567e8a9c79c9230",
      "original_line" : 31,
      "original_position" : 31,
      "original_start_line" : null,
      "path" : "src/test/fuzz/orphanage.cpp",
      "position" : null,
      "pull_request_review_id" : 1015145059,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25447",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/903728964/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-22T13:16:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/903728964",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25447#discussion_r903990009"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25447"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/903990009"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Already changed to `DEFAULT_MAX_ORPHAN_TRANSACTIONS`",
      "commit_id" : "98a82551dfb8b09bd563724cabeb587ffc779d7f",
      "created_at" : "2022-06-22T16:28:11Z",
      "diff_hunk" : "@@ -0,0 +1,77 @@\n+// Copyright (c) 2020-2021 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <random.h>\n+#include <primitives/transaction.h>\n+#include <test/util/script.h>\n+#include <test/fuzz/FuzzedDataProvider.h>\n+#include <test/fuzz/fuzz.h>\n+#include <test/fuzz/util.h>\n+#include <txorphanage.h>\n+\n+\n+FUZZ_TARGET(orphanage)\n+{\n+    FuzzedDataProvider fuzzed_data_provider(buffer.data(), buffer.size());\n+\n+    TxOrphanage orphanage;\n+    std::set<uint256> orphan_work_set;\n+\n+    LIMITED_WHILE(fuzzed_data_provider.ConsumeBool(), COINBASE_MATURITY)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25447#discussion_r903990009",
      "id" : 903990009,
      "in_reply_to_id" : 903727000,
      "line" : null,
      "node_id" : "PRRC_kwDOABII58414cr5",
      "original_commit_id" : "f7c8ec6d1fd23f293fc57218b567e8a9c79c9230",
      "original_line" : 21,
      "original_position" : 21,
      "original_start_line" : null,
      "path" : "src/test/fuzz/orphanage.cpp",
      "position" : null,
      "pull_request_review_id" : 1015536595,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25447",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/903990009/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-22T16:28:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/903990009",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/24590067?v=4",
         "events_url" : "https://api.github.com/users/chinggg/events{/privacy}",
         "followers_url" : "https://api.github.com/users/chinggg/followers",
         "following_url" : "https://api.github.com/users/chinggg/following{/other_user}",
         "gists_url" : "https://api.github.com/users/chinggg/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/chinggg",
         "id" : 24590067,
         "login" : "chinggg",
         "node_id" : "MDQ6VXNlcjI0NTkwMDY3",
         "organizations_url" : "https://api.github.com/users/chinggg/orgs",
         "received_events_url" : "https://api.github.com/users/chinggg/received_events",
         "repos_url" : "https://api.github.com/users/chinggg/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/chinggg/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/chinggg/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/chinggg"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25447#discussion_r904005314"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25447"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/904005314"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Thanks for your advice. You mean we'd better consider parent relationships when constructing transactions even they are not completely valid? I have changed the code to keep transactions (actually `CTransactionRef`) in a set, from which `prevout` will be picked for later inputs. \r\nHowever, now it has two differences compared to `tx_pool_standard` target.\r\n\r\n- `tx_pool_standard` keep a set of **outpoints**, while I keep **transactions**\r\n- `tx_pool_standard` fill the outpoints initially by `MineBlock` results, while I construct initial transactions using random hashes.\r\n\r\nI am not sure which strategy is better.",
      "commit_id" : "98a82551dfb8b09bd563724cabeb587ffc779d7f",
      "created_at" : "2022-06-22T16:41:29Z",
      "diff_hunk" : "@@ -0,0 +1,77 @@\n+// Copyright (c) 2020-2021 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <random.h>\n+#include <primitives/transaction.h>\n+#include <test/util/script.h>\n+#include <test/fuzz/FuzzedDataProvider.h>\n+#include <test/fuzz/fuzz.h>\n+#include <test/fuzz/util.h>\n+#include <txorphanage.h>\n+\n+\n+FUZZ_TARGET(orphanage)\n+{\n+    FuzzedDataProvider fuzzed_data_provider(buffer.data(), buffer.size());\n+\n+    TxOrphanage orphanage;\n+    std::set<uint256> orphan_work_set;\n+\n+    LIMITED_WHILE(fuzzed_data_provider.ConsumeBool(), COINBASE_MATURITY)\n+    {\n+        // construct transaction\n+        const CTransaction tx = [&] {\n+            CMutableTransaction tx_mut;\n+            tx_mut.nVersion = CTransaction::CURRENT_VERSION;\n+            tx_mut.nLockTime = 0;\n+            const auto num_in = GetRandInternal(COINBASE_MATURITY);\n+            const auto num_out = GetRandInternal(COINBASE_MATURITY);\n+            for (unsigned i = 0; i < num_in; i++) {\n+                CTxIn in(GetRandHash(), i);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25447#discussion_r904005314",
      "id" : 904005314,
      "in_reply_to_id" : 903728964,
      "line" : null,
      "node_id" : "PRRC_kwDOABII58414gbC",
      "original_commit_id" : "f7c8ec6d1fd23f293fc57218b567e8a9c79c9230",
      "original_line" : 31,
      "original_position" : 31,
      "original_start_line" : null,
      "path" : "src/test/fuzz/orphanage.cpp",
      "position" : null,
      "pull_request_review_id" : 1015558130,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25447",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/904005314/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-22T16:43:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/904005314",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/24590067?v=4",
         "events_url" : "https://api.github.com/users/chinggg/events{/privacy}",
         "followers_url" : "https://api.github.com/users/chinggg/followers",
         "following_url" : "https://api.github.com/users/chinggg/following{/other_user}",
         "gists_url" : "https://api.github.com/users/chinggg/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/chinggg",
         "id" : 24590067,
         "login" : "chinggg",
         "node_id" : "MDQ6VXNlcjI0NTkwMDY3",
         "organizations_url" : "https://api.github.com/users/chinggg/orgs",
         "received_events_url" : "https://api.github.com/users/chinggg/received_events",
         "repos_url" : "https://api.github.com/users/chinggg/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/chinggg/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/chinggg/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/chinggg"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25447#discussion_r907261037"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25447"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/907261037"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I think a set of outpoints is better. In your current approach you create `first_tx` -> (second tx) -> (third tx) ... This is a plain chain. Ideally there are some more complicated graphs.\r\n\r\n",
      "commit_id" : "98a82551dfb8b09bd563724cabeb587ffc779d7f",
      "created_at" : "2022-06-27T11:06:08Z",
      "diff_hunk" : "@@ -0,0 +1,77 @@\n+// Copyright (c) 2020-2021 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <random.h>\n+#include <primitives/transaction.h>\n+#include <test/util/script.h>\n+#include <test/fuzz/FuzzedDataProvider.h>\n+#include <test/fuzz/fuzz.h>\n+#include <test/fuzz/util.h>\n+#include <txorphanage.h>\n+\n+\n+FUZZ_TARGET(orphanage)\n+{\n+    FuzzedDataProvider fuzzed_data_provider(buffer.data(), buffer.size());\n+\n+    TxOrphanage orphanage;\n+    std::set<uint256> orphan_work_set;\n+\n+    LIMITED_WHILE(fuzzed_data_provider.ConsumeBool(), COINBASE_MATURITY)\n+    {\n+        // construct transaction\n+        const CTransaction tx = [&] {\n+            CMutableTransaction tx_mut;\n+            tx_mut.nVersion = CTransaction::CURRENT_VERSION;\n+            tx_mut.nLockTime = 0;\n+            const auto num_in = GetRandInternal(COINBASE_MATURITY);\n+            const auto num_out = GetRandInternal(COINBASE_MATURITY);\n+            for (unsigned i = 0; i < num_in; i++) {\n+                CTxIn in(GetRandHash(), i);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25447#discussion_r907261037",
      "id" : 907261037,
      "in_reply_to_id" : 903728964,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5842E7Rt",
      "original_commit_id" : "f7c8ec6d1fd23f293fc57218b567e8a9c79c9230",
      "original_line" : 31,
      "original_position" : 31,
      "original_start_line" : null,
      "path" : "src/test/fuzz/orphanage.cpp",
      "position" : null,
      "pull_request_review_id" : 1020009335,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25447",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/907261037/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-27T11:06:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/907261037",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25447#discussion_r907261705"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25447"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/907261705"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I think a basic testing setup (args and logging) is sufficient. No need for a chain here in this simple test.",
      "commit_id" : "98a82551dfb8b09bd563724cabeb587ffc779d7f",
      "created_at" : "2022-06-27T11:07:01Z",
      "diff_hunk" : "@@ -0,0 +1,110 @@\n+// Copyright (c) 2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <net_processing.h>\n+#include <primitives/transaction.h>\n+#include <test/fuzz/FuzzedDataProvider.h>\n+#include <test/fuzz/fuzz.h>\n+#include <test/fuzz/util.h>\n+#include <test/util/mining.h>\n+#include <test/util/script.h>\n+#include <test/util/setup_common.h>\n+#include <txorphanage.h>\n+#include <validation.h>\n+\n+namespace {\n+const TestingSetup* g_setup;\n+} // namespace\n+\n+void initialize_orphanage()\n+{\n+    static const auto testing_setup = MakeNoLogFileContext<const TestingSetup>();\n+    g_setup = testing_setup.get();\n+    SyncWithValidationInterfaceQueue();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25447#discussion_r907261705",
      "id" : 907261705,
      "line" : 24,
      "node_id" : "PRRC_kwDOABII5842E7cJ",
      "original_commit_id" : "98a82551dfb8b09bd563724cabeb587ffc779d7f",
      "original_line" : 24,
      "original_position" : 24,
      "original_start_line" : null,
      "path" : "src/test/fuzz/orphanage.cpp",
      "position" : 24,
      "pull_request_review_id" : 1020010345,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25447",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/907261705/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-27T11:07:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/907261705",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25447#discussion_r907340810"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25447"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/907340810"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I also want to keep the setup minimal. The chain used here is to construct the first tx by calling `chainman->GetParams().GenesisBlock().vtx[0]`, maybe I should just construct it manually instead of getting it from the genesis block.",
      "commit_id" : "98a82551dfb8b09bd563724cabeb587ffc779d7f",
      "created_at" : "2022-06-27T12:38:52Z",
      "diff_hunk" : "@@ -0,0 +1,110 @@\n+// Copyright (c) 2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <net_processing.h>\n+#include <primitives/transaction.h>\n+#include <test/fuzz/FuzzedDataProvider.h>\n+#include <test/fuzz/fuzz.h>\n+#include <test/fuzz/util.h>\n+#include <test/util/mining.h>\n+#include <test/util/script.h>\n+#include <test/util/setup_common.h>\n+#include <txorphanage.h>\n+#include <validation.h>\n+\n+namespace {\n+const TestingSetup* g_setup;\n+} // namespace\n+\n+void initialize_orphanage()\n+{\n+    static const auto testing_setup = MakeNoLogFileContext<const TestingSetup>();\n+    g_setup = testing_setup.get();\n+    SyncWithValidationInterfaceQueue();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25447#discussion_r907340810",
      "id" : 907340810,
      "in_reply_to_id" : 907261705,
      "line" : 24,
      "node_id" : "PRRC_kwDOABII5842FOwK",
      "original_commit_id" : "98a82551dfb8b09bd563724cabeb587ffc779d7f",
      "original_line" : 24,
      "original_position" : 24,
      "original_start_line" : null,
      "path" : "src/test/fuzz/orphanage.cpp",
      "position" : 24,
      "pull_request_review_id" : 1020126752,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25447",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/907340810/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-27T12:38:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/907340810",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/24590067?v=4",
         "events_url" : "https://api.github.com/users/chinggg/events{/privacy}",
         "followers_url" : "https://api.github.com/users/chinggg/followers",
         "following_url" : "https://api.github.com/users/chinggg/following{/other_user}",
         "gists_url" : "https://api.github.com/users/chinggg/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/chinggg",
         "id" : 24590067,
         "login" : "chinggg",
         "node_id" : "MDQ6VXNlcjI0NTkwMDY3",
         "organizations_url" : "https://api.github.com/users/chinggg/orgs",
         "received_events_url" : "https://api.github.com/users/chinggg/received_events",
         "repos_url" : "https://api.github.com/users/chinggg/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/chinggg/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/chinggg/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/chinggg"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25447#discussion_r907346772"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25447"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/907346772"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Yeah, I think it might be preferable to just construct it manually. However, if you switch to an outpoints approach, you'll probably need to create a few outpoints manually instead.",
      "commit_id" : "98a82551dfb8b09bd563724cabeb587ffc779d7f",
      "created_at" : "2022-06-27T12:45:09Z",
      "diff_hunk" : "@@ -0,0 +1,110 @@\n+// Copyright (c) 2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <net_processing.h>\n+#include <primitives/transaction.h>\n+#include <test/fuzz/FuzzedDataProvider.h>\n+#include <test/fuzz/fuzz.h>\n+#include <test/fuzz/util.h>\n+#include <test/util/mining.h>\n+#include <test/util/script.h>\n+#include <test/util/setup_common.h>\n+#include <txorphanage.h>\n+#include <validation.h>\n+\n+namespace {\n+const TestingSetup* g_setup;\n+} // namespace\n+\n+void initialize_orphanage()\n+{\n+    static const auto testing_setup = MakeNoLogFileContext<const TestingSetup>();\n+    g_setup = testing_setup.get();\n+    SyncWithValidationInterfaceQueue();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25447#discussion_r907346772",
      "id" : 907346772,
      "in_reply_to_id" : 907261705,
      "line" : 24,
      "node_id" : "PRRC_kwDOABII5842FQNU",
      "original_commit_id" : "98a82551dfb8b09bd563724cabeb587ffc779d7f",
      "original_line" : 24,
      "original_position" : 24,
      "original_start_line" : null,
      "path" : "src/test/fuzz/orphanage.cpp",
      "position" : 24,
      "pull_request_review_id" : 1020135404,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25447",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/907346772/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-27T12:45:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/907346772",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25447#discussion_r909273134"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25447"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/909273134"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I think you can just create a few outpoints by calling the `COutPoint` constructor and passing a txid of 0 or 1 or so. This should be so cheap that it doesn't have to be done in the global setup, but can be done local in the fuzz target itself.",
      "commit_id" : "2ae40873c712d2fde7369123ad372e5c711b5a86",
      "created_at" : "2022-06-29T07:08:58Z",
      "diff_hunk" : "@@ -0,0 +1,108 @@\n+// Copyright (c) 2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <net_processing.h>\n+#include <primitives/transaction.h>\n+#include <test/fuzz/FuzzedDataProvider.h>\n+#include <test/fuzz/fuzz.h>\n+#include <test/fuzz/util.h>\n+#include <test/util/mining.h>\n+#include <test/util/script.h>\n+#include <test/util/setup_common.h>\n+#include <txorphanage.h>\n+#include <validation.h>\n+\n+namespace {\n+const TestingSetup* g_setup;\n+std::set<COutPoint> g_outpoints;\n+} // namespace\n+\n+void initialize_orphanage()\n+{\n+    static const auto testing_setup = MakeNoLogFileContext<const TestingSetup>();\n+    g_setup = testing_setup.get();\n+    // initialize outpoints to construct transactions later\n+    for (int i = 0; i < 4; ++i) {\n+        CTxIn in = MineBlock(g_setup->m_node, P2WSH_OP_TRUE);\n+        g_outpoints.insert(in.prevout);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25447#discussion_r909273134",
      "id" : 909273134,
      "line" : 28,
      "node_id" : "PRRC_kwDOABII5842Mmgu",
      "original_commit_id" : "2ae40873c712d2fde7369123ad372e5c711b5a86",
      "original_line" : 28,
      "original_position" : 28,
      "original_start_line" : null,
      "path" : "src/test/fuzz/orphanage.cpp",
      "position" : 28,
      "pull_request_review_id" : 1022837579,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25447",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/909273134/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-29T07:08:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/909273134",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nNo conflicts as of last run.",
      "created_at" : "2022-06-29T12:23:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25447#issuecomment-1169914841",
      "id" : 1169914841,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25447",
      "node_id" : "IC_kwDOABII585Fu3vZ",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1169914841/reactions"
      },
      "updated_at" : "2022-06-29T12:53:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1169914841",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25447#discussion_r909595055"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25447"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/909595055"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Please keep the `MakeNoLogFileContext` in init. It is not strictly needed, but I think it is nice to have to have a logger and argsmanager initialized for testing.\r\n\r\nThe reason is that they are currently globals, so they may be used at any time during runtime or in future code changes without the fuzz test noticing. And if they are used, we want them to be initialized for testing and not accidentally corrupt the main datadir (or cause OOMs) or other bugs.",
      "commit_id" : "dda28c8f42ecdecd666b326e9be86bf912bf7c3d",
      "created_at" : "2022-06-29T12:54:33Z",
      "diff_hunk" : "@@ -0,0 +1,110 @@\n+// Copyright (c) 2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <net_processing.h>\n+#include <primitives/transaction.h>\n+#include <test/fuzz/FuzzedDataProvider.h>\n+#include <test/fuzz/fuzz.h>\n+#include <test/fuzz/util.h>\n+#include <test/util/mining.h>\n+#include <test/util/script.h>\n+#include <test/util/setup_common.h>\n+#include <txorphanage.h>\n+#include <validation.h>\n+\n+namespace {\n+const TestingSetup* g_setup;\n+} // namespace\n+\n+void initialize_orphanage()\n+{\n+    static const auto testing_setup = MakeNoLogFileContext<const TestingSetup>();\n+    g_setup = testing_setup.get();\n+    SyncWithValidationInterfaceQueue();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25447#discussion_r909595055",
      "id" : 909595055,
      "in_reply_to_id" : 907261705,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5842N1Gv",
      "original_commit_id" : "98a82551dfb8b09bd563724cabeb587ffc779d7f",
      "original_line" : 30,
      "original_position" : 24,
      "original_start_line" : null,
      "path" : "src/test/fuzz/orphanage.cpp",
      "position" : null,
      "pull_request_review_id" : 1023310342,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25447",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/909595055/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-29T12:54:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/909595055",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25447#discussion_r909596064"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25447"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/909596064"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit: I think this is no longer needed?",
      "commit_id" : "dda28c8f42ecdecd666b326e9be86bf912bf7c3d",
      "created_at" : "2022-06-29T12:55:26Z",
      "diff_hunk" : "@@ -0,0 +1,97 @@\n+// Copyright (c) 2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <net_processing.h>\n+#include <primitives/transaction.h>\n+#include <test/fuzz/FuzzedDataProvider.h>\n+#include <test/fuzz/fuzz.h>\n+#include <test/fuzz/util.h>\n+#include <test/util/mining.h>\n+#include <test/util/script.h>\n+#include <test/util/setup_common.h>\n+#include <txorphanage.h>\n+#include <validation.h>",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25447#discussion_r909596064",
      "id" : 909596064,
      "line" : 14,
      "node_id" : "PRRC_kwDOABII5842N1Wg",
      "original_commit_id" : "dda28c8f42ecdecd666b326e9be86bf912bf7c3d",
      "original_line" : 14,
      "original_position" : 14,
      "original_start_line" : null,
      "path" : "src/test/fuzz/orphanage.cpp",
      "position" : 14,
      "pull_request_review_id" : 1023311667,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25447",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/909596064/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-29T13:11:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/909596064",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25447#discussion_r909596238"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25447"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/909596238"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Is this needed right now?",
      "commit_id" : "dda28c8f42ecdecd666b326e9be86bf912bf7c3d",
      "created_at" : "2022-06-29T12:55:37Z",
      "diff_hunk" : "@@ -0,0 +1,97 @@\n+// Copyright (c) 2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <net_processing.h>",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25447#discussion_r909596238",
      "id" : 909596238,
      "line" : 5,
      "node_id" : "PRRC_kwDOABII5842N1ZO",
      "original_commit_id" : "dda28c8f42ecdecd666b326e9be86bf912bf7c3d",
      "original_line" : 5,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/test/fuzz/orphanage.cpp",
      "position" : 5,
      "pull_request_review_id" : 1023311667,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25447",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/909596238/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-29T13:11:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/909596238",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25447#discussion_r909596732"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25447"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/909596732"
         }
      },
      "author_association" : "MEMBER",
      "body" : "```suggestion\r\n            // pick unique outpoints from outpoints as input\r\n```\r\n\r\nnit",
      "commit_id" : "dda28c8f42ecdecd666b326e9be86bf912bf7c3d",
      "created_at" : "2022-06-29T12:56:02Z",
      "diff_hunk" : "@@ -0,0 +1,97 @@\n+// Copyright (c) 2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <net_processing.h>\n+#include <primitives/transaction.h>\n+#include <test/fuzz/FuzzedDataProvider.h>\n+#include <test/fuzz/fuzz.h>\n+#include <test/fuzz/util.h>\n+#include <test/util/mining.h>\n+#include <test/util/script.h>\n+#include <test/util/setup_common.h>\n+#include <txorphanage.h>\n+#include <validation.h>\n+\n+\n+FUZZ_TARGET(orphanage)\n+{\n+    FuzzedDataProvider fuzzed_data_provider(buffer.data(), buffer.size());\n+\n+    TxOrphanage orphanage;\n+    std::set<uint256> orphan_work_set;\n+    std::set<COutPoint> outpoints;\n+    // initial outpoints used to construct transactions later\n+    for (uint8_t i = 0; i < 4; i++) {\n+        outpoints.emplace(uint256{i}, 0);\n+    }\n+\n+    LIMITED_WHILE(fuzzed_data_provider.ConsumeBool(), 2 * DEFAULT_MAX_ORPHAN_TRANSACTIONS)\n+    {\n+        // construct transaction\n+        const CTransactionRef tx = [&] {\n+            CMutableTransaction tx_mut;\n+            const auto num_in = fuzzed_data_provider.ConsumeIntegralInRange<uint32_t>(1, outpoints.size());\n+            const auto num_out = fuzzed_data_provider.ConsumeIntegralInRange<uint32_t>(1, outpoints.size());\n+            // pick unique outpoints from g_outpoints as input",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25447#discussion_r909596732",
      "id" : 909596732,
      "line" : 36,
      "node_id" : "PRRC_kwDOABII5842N1g8",
      "original_commit_id" : "dda28c8f42ecdecd666b326e9be86bf912bf7c3d",
      "original_line" : 36,
      "original_position" : 36,
      "original_start_line" : null,
      "path" : "src/test/fuzz/orphanage.cpp",
      "position" : 36,
      "pull_request_review_id" : 1023311667,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25447",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/909596732/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-29T13:11:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/909596732",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25447#discussion_r909603581"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25447"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/909603581"
         }
      },
      "author_association" : "MEMBER",
      "body" : "```suggestion\r\n                tx_mut.vout.emplace_back(CAmount{}, CScript{});\r\n```\r\n\r\nnit: No need for any script",
      "commit_id" : "dda28c8f42ecdecd666b326e9be86bf912bf7c3d",
      "created_at" : "2022-06-29T13:02:16Z",
      "diff_hunk" : "@@ -0,0 +1,97 @@\n+// Copyright (c) 2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <net_processing.h>\n+#include <primitives/transaction.h>\n+#include <test/fuzz/FuzzedDataProvider.h>\n+#include <test/fuzz/fuzz.h>\n+#include <test/fuzz/util.h>\n+#include <test/util/mining.h>\n+#include <test/util/script.h>\n+#include <test/util/setup_common.h>\n+#include <txorphanage.h>\n+#include <validation.h>\n+\n+\n+FUZZ_TARGET(orphanage)\n+{\n+    FuzzedDataProvider fuzzed_data_provider(buffer.data(), buffer.size());\n+\n+    TxOrphanage orphanage;\n+    std::set<uint256> orphan_work_set;\n+    std::set<COutPoint> outpoints;\n+    // initial outpoints used to construct transactions later\n+    for (uint8_t i = 0; i < 4; i++) {\n+        outpoints.emplace(uint256{i}, 0);\n+    }\n+\n+    LIMITED_WHILE(fuzzed_data_provider.ConsumeBool(), 2 * DEFAULT_MAX_ORPHAN_TRANSACTIONS)\n+    {\n+        // construct transaction\n+        const CTransactionRef tx = [&] {\n+            CMutableTransaction tx_mut;\n+            const auto num_in = fuzzed_data_provider.ConsumeIntegralInRange<uint32_t>(1, outpoints.size());\n+            const auto num_out = fuzzed_data_provider.ConsumeIntegralInRange<uint32_t>(1, outpoints.size());\n+            // pick unique outpoints from g_outpoints as input\n+            for (uint32_t i = 0; i < num_in; i++) {\n+                auto pop = outpoints.begin();\n+                std::advance(pop, fuzzed_data_provider.ConsumeIntegralInRange<uint32_t>(0, outpoints.size() - 1));\n+                const auto prevout = *pop;\n+                tx_mut.vin.emplace_back(prevout);\n+                outpoints.erase(pop);\n+            }\n+            // output amount will not affect txorphanage\n+            for (uint32_t i = 0; i < num_out; i++) {\n+                tx_mut.vout.emplace_back(CAmount{0}, P2WSH_OP_TRUE);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25447#discussion_r909603581",
      "id" : 909603581,
      "line" : 46,
      "node_id" : "PRRC_kwDOABII5842N3L9",
      "original_commit_id" : "dda28c8f42ecdecd666b326e9be86bf912bf7c3d",
      "original_line" : 46,
      "original_position" : 46,
      "original_start_line" : null,
      "path" : "src/test/fuzz/orphanage.cpp",
      "position" : 46,
      "pull_request_review_id" : 1023311667,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25447",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/909603581/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-29T13:11:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/909603581",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25447#discussion_r909604184"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25447"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/909604184"
         }
      },
      "author_association" : "MEMBER",
      "body" : "why?",
      "commit_id" : "dda28c8f42ecdecd666b326e9be86bf912bf7c3d",
      "created_at" : "2022-06-29T13:02:48Z",
      "diff_hunk" : "@@ -0,0 +1,97 @@\n+// Copyright (c) 2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <net_processing.h>\n+#include <primitives/transaction.h>\n+#include <test/fuzz/FuzzedDataProvider.h>\n+#include <test/fuzz/fuzz.h>\n+#include <test/fuzz/util.h>\n+#include <test/util/mining.h>\n+#include <test/util/script.h>\n+#include <test/util/setup_common.h>\n+#include <txorphanage.h>\n+#include <validation.h>\n+\n+\n+FUZZ_TARGET(orphanage)\n+{\n+    FuzzedDataProvider fuzzed_data_provider(buffer.data(), buffer.size());\n+\n+    TxOrphanage orphanage;\n+    std::set<uint256> orphan_work_set;\n+    std::set<COutPoint> outpoints;\n+    // initial outpoints used to construct transactions later\n+    for (uint8_t i = 0; i < 4; i++) {\n+        outpoints.emplace(uint256{i}, 0);\n+    }\n+\n+    LIMITED_WHILE(fuzzed_data_provider.ConsumeBool(), 2 * DEFAULT_MAX_ORPHAN_TRANSACTIONS)\n+    {\n+        // construct transaction\n+        const CTransactionRef tx = [&] {\n+            CMutableTransaction tx_mut;\n+            const auto num_in = fuzzed_data_provider.ConsumeIntegralInRange<uint32_t>(1, outpoints.size());\n+            const auto num_out = fuzzed_data_provider.ConsumeIntegralInRange<uint32_t>(1, outpoints.size());\n+            // pick unique outpoints from g_outpoints as input\n+            for (uint32_t i = 0; i < num_in; i++) {\n+                auto pop = outpoints.begin();\n+                std::advance(pop, fuzzed_data_provider.ConsumeIntegralInRange<uint32_t>(0, outpoints.size() - 1));\n+                const auto prevout = *pop;\n+                tx_mut.vin.emplace_back(prevout);\n+                outpoints.erase(pop);\n+            }\n+            // output amount will not affect txorphanage\n+            for (uint32_t i = 0; i < num_out; i++) {\n+                tx_mut.vout.emplace_back(CAmount{0}, P2WSH_OP_TRUE);\n+            }\n+            // restore previously removed outpoints",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25447#discussion_r909604184",
      "id" : 909604184,
      "line" : 48,
      "node_id" : "PRRC_kwDOABII5842N3VY",
      "original_commit_id" : "dda28c8f42ecdecd666b326e9be86bf912bf7c3d",
      "original_line" : 48,
      "original_position" : 48,
      "original_start_line" : null,
      "path" : "src/test/fuzz/orphanage.cpp",
      "position" : 48,
      "pull_request_review_id" : 1023311667,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25447",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/909604184/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-29T13:11:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/909604184",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25447#discussion_r909606440"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25447"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/909606440"
         }
      },
      "author_association" : "MEMBER",
      "body" : "```suggestion\r\n        LIMITED_WHILE(fuzzed_data_provider.ConsumeBool(), 10 * DEFAULT_MAX_ORPHAN_TRANSACTIONS)\r\n```\r\n\r\nnit: I think this can be larger, unless it takes a long time?",
      "commit_id" : "dda28c8f42ecdecd666b326e9be86bf912bf7c3d",
      "created_at" : "2022-06-29T13:04:49Z",
      "diff_hunk" : "@@ -0,0 +1,97 @@\n+// Copyright (c) 2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <net_processing.h>\n+#include <primitives/transaction.h>\n+#include <test/fuzz/FuzzedDataProvider.h>\n+#include <test/fuzz/fuzz.h>\n+#include <test/fuzz/util.h>\n+#include <test/util/mining.h>\n+#include <test/util/script.h>\n+#include <test/util/setup_common.h>\n+#include <txorphanage.h>\n+#include <validation.h>\n+\n+\n+FUZZ_TARGET(orphanage)\n+{\n+    FuzzedDataProvider fuzzed_data_provider(buffer.data(), buffer.size());\n+\n+    TxOrphanage orphanage;\n+    std::set<uint256> orphan_work_set;\n+    std::set<COutPoint> outpoints;\n+    // initial outpoints used to construct transactions later\n+    for (uint8_t i = 0; i < 4; i++) {\n+        outpoints.emplace(uint256{i}, 0);\n+    }\n+\n+    LIMITED_WHILE(fuzzed_data_provider.ConsumeBool(), 2 * DEFAULT_MAX_ORPHAN_TRANSACTIONS)\n+    {\n+        // construct transaction\n+        const CTransactionRef tx = [&] {\n+            CMutableTransaction tx_mut;\n+            const auto num_in = fuzzed_data_provider.ConsumeIntegralInRange<uint32_t>(1, outpoints.size());\n+            const auto num_out = fuzzed_data_provider.ConsumeIntegralInRange<uint32_t>(1, outpoints.size());\n+            // pick unique outpoints from g_outpoints as input\n+            for (uint32_t i = 0; i < num_in; i++) {\n+                auto pop = outpoints.begin();\n+                std::advance(pop, fuzzed_data_provider.ConsumeIntegralInRange<uint32_t>(0, outpoints.size() - 1));\n+                const auto prevout = *pop;\n+                tx_mut.vin.emplace_back(prevout);\n+                outpoints.erase(pop);\n+            }\n+            // output amount will not affect txorphanage\n+            for (uint32_t i = 0; i < num_out; i++) {\n+                tx_mut.vout.emplace_back(CAmount{0}, P2WSH_OP_TRUE);\n+            }\n+            // restore previously removed outpoints\n+            for (auto& in : tx_mut.vin) {\n+                outpoints.insert(in.prevout);\n+            }\n+            const auto new_tx = MakeTransactionRef(tx_mut);\n+            // add newly constructed transaction to outpoints\n+            for (uint32_t i = 0; i < num_out; i++) {\n+                outpoints.emplace(new_tx->GetHash(), i);\n+            }\n+            return new_tx;\n+        }();\n+\n+        // trigger orphanage functions\n+        LIMITED_WHILE(fuzzed_data_provider.ConsumeBool(), 2 * DEFAULT_MAX_ORPHAN_TRANSACTIONS)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25447#discussion_r909606440",
      "id" : 909606440,
      "line" : 61,
      "node_id" : "PRRC_kwDOABII5842N34o",
      "original_commit_id" : "dda28c8f42ecdecd666b326e9be86bf912bf7c3d",
      "original_line" : 61,
      "original_position" : 61,
      "original_start_line" : null,
      "path" : "src/test/fuzz/orphanage.cpp",
      "position" : 61,
      "pull_request_review_id" : 1023311667,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25447",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/909606440/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-29T13:11:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/909606440",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25447#discussion_r909608936"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25447"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/909608936"
         }
      },
      "author_association" : "MEMBER",
      "body" : "could assert that the return value is equal to the one of `HaveTx` here?",
      "commit_id" : "dda28c8f42ecdecd666b326e9be86bf912bf7c3d",
      "created_at" : "2022-06-29T13:07:00Z",
      "diff_hunk" : "@@ -0,0 +1,97 @@\n+// Copyright (c) 2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <net_processing.h>\n+#include <primitives/transaction.h>\n+#include <test/fuzz/FuzzedDataProvider.h>\n+#include <test/fuzz/fuzz.h>\n+#include <test/fuzz/util.h>\n+#include <test/util/mining.h>\n+#include <test/util/script.h>\n+#include <test/util/setup_common.h>\n+#include <txorphanage.h>\n+#include <validation.h>\n+\n+\n+FUZZ_TARGET(orphanage)\n+{\n+    FuzzedDataProvider fuzzed_data_provider(buffer.data(), buffer.size());\n+\n+    TxOrphanage orphanage;\n+    std::set<uint256> orphan_work_set;\n+    std::set<COutPoint> outpoints;\n+    // initial outpoints used to construct transactions later\n+    for (uint8_t i = 0; i < 4; i++) {\n+        outpoints.emplace(uint256{i}, 0);\n+    }\n+\n+    LIMITED_WHILE(fuzzed_data_provider.ConsumeBool(), 2 * DEFAULT_MAX_ORPHAN_TRANSACTIONS)\n+    {\n+        // construct transaction\n+        const CTransactionRef tx = [&] {\n+            CMutableTransaction tx_mut;\n+            const auto num_in = fuzzed_data_provider.ConsumeIntegralInRange<uint32_t>(1, outpoints.size());\n+            const auto num_out = fuzzed_data_provider.ConsumeIntegralInRange<uint32_t>(1, outpoints.size());\n+            // pick unique outpoints from g_outpoints as input\n+            for (uint32_t i = 0; i < num_in; i++) {\n+                auto pop = outpoints.begin();\n+                std::advance(pop, fuzzed_data_provider.ConsumeIntegralInRange<uint32_t>(0, outpoints.size() - 1));\n+                const auto prevout = *pop;\n+                tx_mut.vin.emplace_back(prevout);\n+                outpoints.erase(pop);\n+            }\n+            // output amount will not affect txorphanage\n+            for (uint32_t i = 0; i < num_out; i++) {\n+                tx_mut.vout.emplace_back(CAmount{0}, P2WSH_OP_TRUE);\n+            }\n+            // restore previously removed outpoints\n+            for (auto& in : tx_mut.vin) {\n+                outpoints.insert(in.prevout);\n+            }\n+            const auto new_tx = MakeTransactionRef(tx_mut);\n+            // add newly constructed transaction to outpoints\n+            for (uint32_t i = 0; i < num_out; i++) {\n+                outpoints.emplace(new_tx->GetHash(), i);\n+            }\n+            return new_tx;\n+        }();\n+\n+        // trigger orphanage functions\n+        LIMITED_WHILE(fuzzed_data_provider.ConsumeBool(), 2 * DEFAULT_MAX_ORPHAN_TRANSACTIONS)\n+        {\n+            NodeId PeerID = fuzzed_data_provider.ConsumeIntegral<NodeId>();\n+\n+            CallOneOf(\n+                fuzzed_data_provider,\n+                [&] {\n+                    LOCK(g_cs_orphans);\n+                    orphanage.AddChildrenToWorkSet(*tx, orphan_work_set);\n+                },\n+                [&] {\n+                    orphanage.HaveTx(GenTxid::Txid(tx->GetHash()));\n+                    orphanage.HaveTx(GenTxid::Wtxid(tx->GetWitnessHash()));\n+                },\n+                [&] {\n+                    LOCK(g_cs_orphans);\n+                    orphanage.GetTx(tx->GetHash());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25447#discussion_r909608936",
      "id" : 909608936,
      "line" : 77,
      "node_id" : "PRRC_kwDOABII5842N4fo",
      "original_commit_id" : "dda28c8f42ecdecd666b326e9be86bf912bf7c3d",
      "original_line" : 77,
      "original_position" : 77,
      "original_start_line" : null,
      "path" : "src/test/fuzz/orphanage.cpp",
      "position" : 77,
      "pull_request_review_id" : 1023311667,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25447",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/909608936/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-29T13:11:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/909608936",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25447#discussion_r909609281"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25447"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/909609281"
         }
      },
      "author_association" : "MEMBER",
      "body" : "could assert that the return value  of `HaveTx` is true here?",
      "commit_id" : "dda28c8f42ecdecd666b326e9be86bf912bf7c3d",
      "created_at" : "2022-06-29T13:07:20Z",
      "diff_hunk" : "@@ -0,0 +1,97 @@\n+// Copyright (c) 2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <net_processing.h>\n+#include <primitives/transaction.h>\n+#include <test/fuzz/FuzzedDataProvider.h>\n+#include <test/fuzz/fuzz.h>\n+#include <test/fuzz/util.h>\n+#include <test/util/mining.h>\n+#include <test/util/script.h>\n+#include <test/util/setup_common.h>\n+#include <txorphanage.h>\n+#include <validation.h>\n+\n+\n+FUZZ_TARGET(orphanage)\n+{\n+    FuzzedDataProvider fuzzed_data_provider(buffer.data(), buffer.size());\n+\n+    TxOrphanage orphanage;\n+    std::set<uint256> orphan_work_set;\n+    std::set<COutPoint> outpoints;\n+    // initial outpoints used to construct transactions later\n+    for (uint8_t i = 0; i < 4; i++) {\n+        outpoints.emplace(uint256{i}, 0);\n+    }\n+\n+    LIMITED_WHILE(fuzzed_data_provider.ConsumeBool(), 2 * DEFAULT_MAX_ORPHAN_TRANSACTIONS)\n+    {\n+        // construct transaction\n+        const CTransactionRef tx = [&] {\n+            CMutableTransaction tx_mut;\n+            const auto num_in = fuzzed_data_provider.ConsumeIntegralInRange<uint32_t>(1, outpoints.size());\n+            const auto num_out = fuzzed_data_provider.ConsumeIntegralInRange<uint32_t>(1, outpoints.size());\n+            // pick unique outpoints from g_outpoints as input\n+            for (uint32_t i = 0; i < num_in; i++) {\n+                auto pop = outpoints.begin();\n+                std::advance(pop, fuzzed_data_provider.ConsumeIntegralInRange<uint32_t>(0, outpoints.size() - 1));\n+                const auto prevout = *pop;\n+                tx_mut.vin.emplace_back(prevout);\n+                outpoints.erase(pop);\n+            }\n+            // output amount will not affect txorphanage\n+            for (uint32_t i = 0; i < num_out; i++) {\n+                tx_mut.vout.emplace_back(CAmount{0}, P2WSH_OP_TRUE);\n+            }\n+            // restore previously removed outpoints\n+            for (auto& in : tx_mut.vin) {\n+                outpoints.insert(in.prevout);\n+            }\n+            const auto new_tx = MakeTransactionRef(tx_mut);\n+            // add newly constructed transaction to outpoints\n+            for (uint32_t i = 0; i < num_out; i++) {\n+                outpoints.emplace(new_tx->GetHash(), i);\n+            }\n+            return new_tx;\n+        }();\n+\n+        // trigger orphanage functions\n+        LIMITED_WHILE(fuzzed_data_provider.ConsumeBool(), 2 * DEFAULT_MAX_ORPHAN_TRANSACTIONS)\n+        {\n+            NodeId PeerID = fuzzed_data_provider.ConsumeIntegral<NodeId>();\n+\n+            CallOneOf(\n+                fuzzed_data_provider,\n+                [&] {\n+                    LOCK(g_cs_orphans);\n+                    orphanage.AddChildrenToWorkSet(*tx, orphan_work_set);\n+                },\n+                [&] {\n+                    orphanage.HaveTx(GenTxid::Txid(tx->GetHash()));\n+                    orphanage.HaveTx(GenTxid::Wtxid(tx->GetWitnessHash()));\n+                },\n+                [&] {\n+                    LOCK(g_cs_orphans);\n+                    orphanage.GetTx(tx->GetHash());\n+                },\n+                [&] {\n+                    LOCK(g_cs_orphans);\n+                    orphanage.AddTx(tx, PeerID);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25447#discussion_r909609281",
      "id" : 909609281,
      "line" : 81,
      "node_id" : "PRRC_kwDOABII5842N4lB",
      "original_commit_id" : "dda28c8f42ecdecd666b326e9be86bf912bf7c3d",
      "original_line" : 81,
      "original_position" : 81,
      "original_start_line" : null,
      "path" : "src/test/fuzz/orphanage.cpp",
      "position" : 81,
      "pull_request_review_id" : 1023311667,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25447",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/909609281/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-29T13:11:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/909609281",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25447#discussion_r909609480"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25447"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/909609480"
         }
      },
      "author_association" : "MEMBER",
      "body" : "\r\n\r\ncould assert that the return value of HaveTx is false here?\r\n",
      "commit_id" : "dda28c8f42ecdecd666b326e9be86bf912bf7c3d",
      "created_at" : "2022-06-29T13:07:32Z",
      "diff_hunk" : "@@ -0,0 +1,97 @@\n+// Copyright (c) 2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <net_processing.h>\n+#include <primitives/transaction.h>\n+#include <test/fuzz/FuzzedDataProvider.h>\n+#include <test/fuzz/fuzz.h>\n+#include <test/fuzz/util.h>\n+#include <test/util/mining.h>\n+#include <test/util/script.h>\n+#include <test/util/setup_common.h>\n+#include <txorphanage.h>\n+#include <validation.h>\n+\n+\n+FUZZ_TARGET(orphanage)\n+{\n+    FuzzedDataProvider fuzzed_data_provider(buffer.data(), buffer.size());\n+\n+    TxOrphanage orphanage;\n+    std::set<uint256> orphan_work_set;\n+    std::set<COutPoint> outpoints;\n+    // initial outpoints used to construct transactions later\n+    for (uint8_t i = 0; i < 4; i++) {\n+        outpoints.emplace(uint256{i}, 0);\n+    }\n+\n+    LIMITED_WHILE(fuzzed_data_provider.ConsumeBool(), 2 * DEFAULT_MAX_ORPHAN_TRANSACTIONS)\n+    {\n+        // construct transaction\n+        const CTransactionRef tx = [&] {\n+            CMutableTransaction tx_mut;\n+            const auto num_in = fuzzed_data_provider.ConsumeIntegralInRange<uint32_t>(1, outpoints.size());\n+            const auto num_out = fuzzed_data_provider.ConsumeIntegralInRange<uint32_t>(1, outpoints.size());\n+            // pick unique outpoints from g_outpoints as input\n+            for (uint32_t i = 0; i < num_in; i++) {\n+                auto pop = outpoints.begin();\n+                std::advance(pop, fuzzed_data_provider.ConsumeIntegralInRange<uint32_t>(0, outpoints.size() - 1));\n+                const auto prevout = *pop;\n+                tx_mut.vin.emplace_back(prevout);\n+                outpoints.erase(pop);\n+            }\n+            // output amount will not affect txorphanage\n+            for (uint32_t i = 0; i < num_out; i++) {\n+                tx_mut.vout.emplace_back(CAmount{0}, P2WSH_OP_TRUE);\n+            }\n+            // restore previously removed outpoints\n+            for (auto& in : tx_mut.vin) {\n+                outpoints.insert(in.prevout);\n+            }\n+            const auto new_tx = MakeTransactionRef(tx_mut);\n+            // add newly constructed transaction to outpoints\n+            for (uint32_t i = 0; i < num_out; i++) {\n+                outpoints.emplace(new_tx->GetHash(), i);\n+            }\n+            return new_tx;\n+        }();\n+\n+        // trigger orphanage functions\n+        LIMITED_WHILE(fuzzed_data_provider.ConsumeBool(), 2 * DEFAULT_MAX_ORPHAN_TRANSACTIONS)\n+        {\n+            NodeId PeerID = fuzzed_data_provider.ConsumeIntegral<NodeId>();\n+\n+            CallOneOf(\n+                fuzzed_data_provider,\n+                [&] {\n+                    LOCK(g_cs_orphans);\n+                    orphanage.AddChildrenToWorkSet(*tx, orphan_work_set);\n+                },\n+                [&] {\n+                    orphanage.HaveTx(GenTxid::Txid(tx->GetHash()));\n+                    orphanage.HaveTx(GenTxid::Wtxid(tx->GetWitnessHash()));\n+                },\n+                [&] {\n+                    LOCK(g_cs_orphans);\n+                    orphanage.GetTx(tx->GetHash());\n+                },\n+                [&] {\n+                    LOCK(g_cs_orphans);\n+                    orphanage.AddTx(tx, PeerID);\n+                },\n+                [&] {\n+                    LOCK(g_cs_orphans);\n+                    orphanage.EraseTx(tx->GetHash());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25447#discussion_r909609480",
      "id" : 909609480,
      "line" : 85,
      "node_id" : "PRRC_kwDOABII5842N4oI",
      "original_commit_id" : "dda28c8f42ecdecd666b326e9be86bf912bf7c3d",
      "original_line" : 85,
      "original_position" : 85,
      "original_start_line" : null,
      "path" : "src/test/fuzz/orphanage.cpp",
      "position" : 85,
      "pull_request_review_id" : 1023311667,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25447",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/909609480/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-29T13:11:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/909609480",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25447#discussion_r909613724"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25447"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/909613724"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Could assert that the new size is less than the passed value?",
      "commit_id" : "dda28c8f42ecdecd666b326e9be86bf912bf7c3d",
      "created_at" : "2022-06-29T13:11:12Z",
      "diff_hunk" : "@@ -0,0 +1,97 @@\n+// Copyright (c) 2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <net_processing.h>\n+#include <primitives/transaction.h>\n+#include <test/fuzz/FuzzedDataProvider.h>\n+#include <test/fuzz/fuzz.h>\n+#include <test/fuzz/util.h>\n+#include <test/util/mining.h>\n+#include <test/util/script.h>\n+#include <test/util/setup_common.h>\n+#include <txorphanage.h>\n+#include <validation.h>\n+\n+\n+FUZZ_TARGET(orphanage)\n+{\n+    FuzzedDataProvider fuzzed_data_provider(buffer.data(), buffer.size());\n+\n+    TxOrphanage orphanage;\n+    std::set<uint256> orphan_work_set;\n+    std::set<COutPoint> outpoints;\n+    // initial outpoints used to construct transactions later\n+    for (uint8_t i = 0; i < 4; i++) {\n+        outpoints.emplace(uint256{i}, 0);\n+    }\n+\n+    LIMITED_WHILE(fuzzed_data_provider.ConsumeBool(), 2 * DEFAULT_MAX_ORPHAN_TRANSACTIONS)\n+    {\n+        // construct transaction\n+        const CTransactionRef tx = [&] {\n+            CMutableTransaction tx_mut;\n+            const auto num_in = fuzzed_data_provider.ConsumeIntegralInRange<uint32_t>(1, outpoints.size());\n+            const auto num_out = fuzzed_data_provider.ConsumeIntegralInRange<uint32_t>(1, outpoints.size());\n+            // pick unique outpoints from g_outpoints as input\n+            for (uint32_t i = 0; i < num_in; i++) {\n+                auto pop = outpoints.begin();\n+                std::advance(pop, fuzzed_data_provider.ConsumeIntegralInRange<uint32_t>(0, outpoints.size() - 1));\n+                const auto prevout = *pop;\n+                tx_mut.vin.emplace_back(prevout);\n+                outpoints.erase(pop);\n+            }\n+            // output amount will not affect txorphanage\n+            for (uint32_t i = 0; i < num_out; i++) {\n+                tx_mut.vout.emplace_back(CAmount{0}, P2WSH_OP_TRUE);\n+            }\n+            // restore previously removed outpoints\n+            for (auto& in : tx_mut.vin) {\n+                outpoints.insert(in.prevout);\n+            }\n+            const auto new_tx = MakeTransactionRef(tx_mut);\n+            // add newly constructed transaction to outpoints\n+            for (uint32_t i = 0; i < num_out; i++) {\n+                outpoints.emplace(new_tx->GetHash(), i);\n+            }\n+            return new_tx;\n+        }();\n+\n+        // trigger orphanage functions\n+        LIMITED_WHILE(fuzzed_data_provider.ConsumeBool(), 2 * DEFAULT_MAX_ORPHAN_TRANSACTIONS)\n+        {\n+            NodeId PeerID = fuzzed_data_provider.ConsumeIntegral<NodeId>();\n+\n+            CallOneOf(\n+                fuzzed_data_provider,\n+                [&] {\n+                    LOCK(g_cs_orphans);\n+                    orphanage.AddChildrenToWorkSet(*tx, orphan_work_set);\n+                },\n+                [&] {\n+                    orphanage.HaveTx(GenTxid::Txid(tx->GetHash()));\n+                    orphanage.HaveTx(GenTxid::Wtxid(tx->GetWitnessHash()));\n+                },\n+                [&] {\n+                    LOCK(g_cs_orphans);\n+                    orphanage.GetTx(tx->GetHash());\n+                },\n+                [&] {\n+                    LOCK(g_cs_orphans);\n+                    orphanage.AddTx(tx, PeerID);\n+                },\n+                [&] {\n+                    LOCK(g_cs_orphans);\n+                    orphanage.EraseTx(tx->GetHash());\n+                },\n+                [&] {\n+                    LOCK(g_cs_orphans);\n+                    orphanage.EraseForPeer(PeerID);\n+                },\n+                [&] {\n+                    LOCK(g_cs_orphans);\n+                    orphanage.LimitOrphans(fuzzed_data_provider.ConsumeIntegral<unsigned int>());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25447#discussion_r909613724",
      "id" : 909613724,
      "line" : 93,
      "node_id" : "PRRC_kwDOABII5842N5qc",
      "original_commit_id" : "dda28c8f42ecdecd666b326e9be86bf912bf7c3d",
      "original_line" : 93,
      "original_position" : 93,
      "original_start_line" : null,
      "path" : "src/test/fuzz/orphanage.cpp",
      "position" : 93,
      "pull_request_review_id" : 1023311667,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25447",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/909613724/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-29T13:11:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/909613724",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25447#discussion_r909626693"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25447"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/909626693"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "`DEFAULT_MAX_ORPHAN_TRANSACTIONS` is defined in `net_processing.h`",
      "commit_id" : "dda28c8f42ecdecd666b326e9be86bf912bf7c3d",
      "created_at" : "2022-06-29T13:22:29Z",
      "diff_hunk" : "@@ -0,0 +1,97 @@\n+// Copyright (c) 2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <net_processing.h>",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25447#discussion_r909626693",
      "id" : 909626693,
      "in_reply_to_id" : 909596238,
      "line" : 5,
      "node_id" : "PRRC_kwDOABII5842N81F",
      "original_commit_id" : "dda28c8f42ecdecd666b326e9be86bf912bf7c3d",
      "original_line" : 5,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/test/fuzz/orphanage.cpp",
      "position" : 5,
      "pull_request_review_id" : 1023353815,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25447",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/909626693/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-29T13:22:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/909626693",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/24590067?v=4",
         "events_url" : "https://api.github.com/users/chinggg/events{/privacy}",
         "followers_url" : "https://api.github.com/users/chinggg/followers",
         "following_url" : "https://api.github.com/users/chinggg/following{/other_user}",
         "gists_url" : "https://api.github.com/users/chinggg/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/chinggg",
         "id" : 24590067,
         "login" : "chinggg",
         "node_id" : "MDQ6VXNlcjI0NTkwMDY3",
         "organizations_url" : "https://api.github.com/users/chinggg/orgs",
         "received_events_url" : "https://api.github.com/users/chinggg/received_events",
         "repos_url" : "https://api.github.com/users/chinggg/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/chinggg/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/chinggg/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/chinggg"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25447#discussion_r909725429"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25447"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/909725429"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "The loop are used to fill the tx's `vout`, you mean it is not necessary since we don't have any code that verifies content of `vout`? Should we replace it with `tx.vout.resize(num_out)` or just keep `vout` empty?",
      "commit_id" : "dda28c8f42ecdecd666b326e9be86bf912bf7c3d",
      "created_at" : "2022-06-29T14:22:21Z",
      "diff_hunk" : "@@ -0,0 +1,97 @@\n+// Copyright (c) 2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <net_processing.h>\n+#include <primitives/transaction.h>\n+#include <test/fuzz/FuzzedDataProvider.h>\n+#include <test/fuzz/fuzz.h>\n+#include <test/fuzz/util.h>\n+#include <test/util/mining.h>\n+#include <test/util/script.h>\n+#include <test/util/setup_common.h>\n+#include <txorphanage.h>\n+#include <validation.h>\n+\n+\n+FUZZ_TARGET(orphanage)\n+{\n+    FuzzedDataProvider fuzzed_data_provider(buffer.data(), buffer.size());\n+\n+    TxOrphanage orphanage;\n+    std::set<uint256> orphan_work_set;\n+    std::set<COutPoint> outpoints;\n+    // initial outpoints used to construct transactions later\n+    for (uint8_t i = 0; i < 4; i++) {\n+        outpoints.emplace(uint256{i}, 0);\n+    }\n+\n+    LIMITED_WHILE(fuzzed_data_provider.ConsumeBool(), 2 * DEFAULT_MAX_ORPHAN_TRANSACTIONS)\n+    {\n+        // construct transaction\n+        const CTransactionRef tx = [&] {\n+            CMutableTransaction tx_mut;\n+            const auto num_in = fuzzed_data_provider.ConsumeIntegralInRange<uint32_t>(1, outpoints.size());\n+            const auto num_out = fuzzed_data_provider.ConsumeIntegralInRange<uint32_t>(1, outpoints.size());\n+            // pick unique outpoints from g_outpoints as input\n+            for (uint32_t i = 0; i < num_in; i++) {\n+                auto pop = outpoints.begin();\n+                std::advance(pop, fuzzed_data_provider.ConsumeIntegralInRange<uint32_t>(0, outpoints.size() - 1));\n+                const auto prevout = *pop;\n+                tx_mut.vin.emplace_back(prevout);\n+                outpoints.erase(pop);\n+            }\n+            // output amount will not affect txorphanage\n+            for (uint32_t i = 0; i < num_out; i++) {\n+                tx_mut.vout.emplace_back(CAmount{0}, P2WSH_OP_TRUE);\n+            }\n+            // restore previously removed outpoints",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25447#discussion_r909725429",
      "id" : 909725429,
      "in_reply_to_id" : 909604184,
      "line" : 48,
      "node_id" : "PRRC_kwDOABII5842OU71",
      "original_commit_id" : "dda28c8f42ecdecd666b326e9be86bf912bf7c3d",
      "original_line" : 48,
      "original_position" : 48,
      "original_start_line" : null,
      "path" : "src/test/fuzz/orphanage.cpp",
      "position" : 48,
      "pull_request_review_id" : 1023467162,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25447",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/909725429/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-29T14:22:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/909725429",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/24590067?v=4",
         "events_url" : "https://api.github.com/users/chinggg/events{/privacy}",
         "followers_url" : "https://api.github.com/users/chinggg/followers",
         "following_url" : "https://api.github.com/users/chinggg/following{/other_user}",
         "gists_url" : "https://api.github.com/users/chinggg/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/chinggg",
         "id" : 24590067,
         "login" : "chinggg",
         "node_id" : "MDQ6VXNlcjI0NTkwMDY3",
         "organizations_url" : "https://api.github.com/users/chinggg/orgs",
         "received_events_url" : "https://api.github.com/users/chinggg/received_events",
         "repos_url" : "https://api.github.com/users/chinggg/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/chinggg/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/chinggg/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/chinggg"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25447#discussion_r909838142"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25447"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/909838142"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Oh, I meant why it is needed or what the goal is to *restore previously removed outpoints*",
      "commit_id" : "dda28c8f42ecdecd666b326e9be86bf912bf7c3d",
      "created_at" : "2022-06-29T14:38:38Z",
      "diff_hunk" : "@@ -0,0 +1,97 @@\n+// Copyright (c) 2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <net_processing.h>\n+#include <primitives/transaction.h>\n+#include <test/fuzz/FuzzedDataProvider.h>\n+#include <test/fuzz/fuzz.h>\n+#include <test/fuzz/util.h>\n+#include <test/util/mining.h>\n+#include <test/util/script.h>\n+#include <test/util/setup_common.h>\n+#include <txorphanage.h>\n+#include <validation.h>\n+\n+\n+FUZZ_TARGET(orphanage)\n+{\n+    FuzzedDataProvider fuzzed_data_provider(buffer.data(), buffer.size());\n+\n+    TxOrphanage orphanage;\n+    std::set<uint256> orphan_work_set;\n+    std::set<COutPoint> outpoints;\n+    // initial outpoints used to construct transactions later\n+    for (uint8_t i = 0; i < 4; i++) {\n+        outpoints.emplace(uint256{i}, 0);\n+    }\n+\n+    LIMITED_WHILE(fuzzed_data_provider.ConsumeBool(), 2 * DEFAULT_MAX_ORPHAN_TRANSACTIONS)\n+    {\n+        // construct transaction\n+        const CTransactionRef tx = [&] {\n+            CMutableTransaction tx_mut;\n+            const auto num_in = fuzzed_data_provider.ConsumeIntegralInRange<uint32_t>(1, outpoints.size());\n+            const auto num_out = fuzzed_data_provider.ConsumeIntegralInRange<uint32_t>(1, outpoints.size());\n+            // pick unique outpoints from g_outpoints as input\n+            for (uint32_t i = 0; i < num_in; i++) {\n+                auto pop = outpoints.begin();\n+                std::advance(pop, fuzzed_data_provider.ConsumeIntegralInRange<uint32_t>(0, outpoints.size() - 1));\n+                const auto prevout = *pop;\n+                tx_mut.vin.emplace_back(prevout);\n+                outpoints.erase(pop);\n+            }\n+            // output amount will not affect txorphanage\n+            for (uint32_t i = 0; i < num_out; i++) {\n+                tx_mut.vout.emplace_back(CAmount{0}, P2WSH_OP_TRUE);\n+            }\n+            // restore previously removed outpoints",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25447#discussion_r909838142",
      "id" : 909838142,
      "in_reply_to_id" : 909604184,
      "line" : 48,
      "node_id" : "PRRC_kwDOABII5842Owc-",
      "original_commit_id" : "dda28c8f42ecdecd666b326e9be86bf912bf7c3d",
      "original_line" : 48,
      "original_position" : 48,
      "original_start_line" : null,
      "path" : "src/test/fuzz/orphanage.cpp",
      "position" : 48,
      "pull_request_review_id" : 1023496755,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25447",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/909838142/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-29T14:38:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/909838142",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25447#discussion_r909907079"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25447"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/909907079"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "The comment actually refers to the loop below. \r\n```cpp\r\n// restore previously removed outpoints\r\n            for (auto& in : tx_mut.vin) {\r\n                outpoints.insert(in.prevout);\r\n            }\r\n```\r\nSince we want outpoints used by `vin` to be unique, whenever an outpoint is used, it is erased from the set temporarily. After `vin` is constructed, we insert them back to the sets.\r\nThe logic and the comment here is the same as `tx_pool_standard` target https://github.com/bitcoin/bitcoin/blob/master/src/test/fuzz/tx_pool.cpp#L221-L224",
      "commit_id" : "dda28c8f42ecdecd666b326e9be86bf912bf7c3d",
      "created_at" : "2022-06-29T14:48:20Z",
      "diff_hunk" : "@@ -0,0 +1,97 @@\n+// Copyright (c) 2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <net_processing.h>\n+#include <primitives/transaction.h>\n+#include <test/fuzz/FuzzedDataProvider.h>\n+#include <test/fuzz/fuzz.h>\n+#include <test/fuzz/util.h>\n+#include <test/util/mining.h>\n+#include <test/util/script.h>\n+#include <test/util/setup_common.h>\n+#include <txorphanage.h>\n+#include <validation.h>\n+\n+\n+FUZZ_TARGET(orphanage)\n+{\n+    FuzzedDataProvider fuzzed_data_provider(buffer.data(), buffer.size());\n+\n+    TxOrphanage orphanage;\n+    std::set<uint256> orphan_work_set;\n+    std::set<COutPoint> outpoints;\n+    // initial outpoints used to construct transactions later\n+    for (uint8_t i = 0; i < 4; i++) {\n+        outpoints.emplace(uint256{i}, 0);\n+    }\n+\n+    LIMITED_WHILE(fuzzed_data_provider.ConsumeBool(), 2 * DEFAULT_MAX_ORPHAN_TRANSACTIONS)\n+    {\n+        // construct transaction\n+        const CTransactionRef tx = [&] {\n+            CMutableTransaction tx_mut;\n+            const auto num_in = fuzzed_data_provider.ConsumeIntegralInRange<uint32_t>(1, outpoints.size());\n+            const auto num_out = fuzzed_data_provider.ConsumeIntegralInRange<uint32_t>(1, outpoints.size());\n+            // pick unique outpoints from g_outpoints as input\n+            for (uint32_t i = 0; i < num_in; i++) {\n+                auto pop = outpoints.begin();\n+                std::advance(pop, fuzzed_data_provider.ConsumeIntegralInRange<uint32_t>(0, outpoints.size() - 1));\n+                const auto prevout = *pop;\n+                tx_mut.vin.emplace_back(prevout);\n+                outpoints.erase(pop);\n+            }\n+            // output amount will not affect txorphanage\n+            for (uint32_t i = 0; i < num_out; i++) {\n+                tx_mut.vout.emplace_back(CAmount{0}, P2WSH_OP_TRUE);\n+            }\n+            // restore previously removed outpoints",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25447#discussion_r909907079",
      "id" : 909907079,
      "in_reply_to_id" : 909604184,
      "line" : 48,
      "node_id" : "PRRC_kwDOABII5842PBSH",
      "original_commit_id" : "dda28c8f42ecdecd666b326e9be86bf912bf7c3d",
      "original_line" : 48,
      "original_position" : 48,
      "original_start_line" : null,
      "path" : "src/test/fuzz/orphanage.cpp",
      "position" : 48,
      "pull_request_review_id" : 1023517931,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25447",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/909907079/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-29T15:04:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/909907079",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/24590067?v=4",
         "events_url" : "https://api.github.com/users/chinggg/events{/privacy}",
         "followers_url" : "https://api.github.com/users/chinggg/followers",
         "following_url" : "https://api.github.com/users/chinggg/following{/other_user}",
         "gists_url" : "https://api.github.com/users/chinggg/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/chinggg",
         "id" : 24590067,
         "login" : "chinggg",
         "node_id" : "MDQ6VXNlcjI0NTkwMDY3",
         "organizations_url" : "https://api.github.com/users/chinggg/orgs",
         "received_events_url" : "https://api.github.com/users/chinggg/received_events",
         "repos_url" : "https://api.github.com/users/chinggg/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/chinggg/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/chinggg/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/chinggg"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25447#discussion_r909952861"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25447"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/909952861"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "There are two `LIMITED_WHILE` loops in the file, the outer loop determines how many transactions can be constructed, and the inner loop (the one you suggested) determines how many times can `TxOrphange` methods be triggered. I am not sure about the exact value to be set. I think it can be bigger, though the probability of actually reaching the limit may be very low.",
      "commit_id" : "dda28c8f42ecdecd666b326e9be86bf912bf7c3d",
      "created_at" : "2022-06-29T14:54:59Z",
      "diff_hunk" : "@@ -0,0 +1,97 @@\n+// Copyright (c) 2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <net_processing.h>\n+#include <primitives/transaction.h>\n+#include <test/fuzz/FuzzedDataProvider.h>\n+#include <test/fuzz/fuzz.h>\n+#include <test/fuzz/util.h>\n+#include <test/util/mining.h>\n+#include <test/util/script.h>\n+#include <test/util/setup_common.h>\n+#include <txorphanage.h>\n+#include <validation.h>\n+\n+\n+FUZZ_TARGET(orphanage)\n+{\n+    FuzzedDataProvider fuzzed_data_provider(buffer.data(), buffer.size());\n+\n+    TxOrphanage orphanage;\n+    std::set<uint256> orphan_work_set;\n+    std::set<COutPoint> outpoints;\n+    // initial outpoints used to construct transactions later\n+    for (uint8_t i = 0; i < 4; i++) {\n+        outpoints.emplace(uint256{i}, 0);\n+    }\n+\n+    LIMITED_WHILE(fuzzed_data_provider.ConsumeBool(), 2 * DEFAULT_MAX_ORPHAN_TRANSACTIONS)\n+    {\n+        // construct transaction\n+        const CTransactionRef tx = [&] {\n+            CMutableTransaction tx_mut;\n+            const auto num_in = fuzzed_data_provider.ConsumeIntegralInRange<uint32_t>(1, outpoints.size());\n+            const auto num_out = fuzzed_data_provider.ConsumeIntegralInRange<uint32_t>(1, outpoints.size());\n+            // pick unique outpoints from g_outpoints as input\n+            for (uint32_t i = 0; i < num_in; i++) {\n+                auto pop = outpoints.begin();\n+                std::advance(pop, fuzzed_data_provider.ConsumeIntegralInRange<uint32_t>(0, outpoints.size() - 1));\n+                const auto prevout = *pop;\n+                tx_mut.vin.emplace_back(prevout);\n+                outpoints.erase(pop);\n+            }\n+            // output amount will not affect txorphanage\n+            for (uint32_t i = 0; i < num_out; i++) {\n+                tx_mut.vout.emplace_back(CAmount{0}, P2WSH_OP_TRUE);\n+            }\n+            // restore previously removed outpoints\n+            for (auto& in : tx_mut.vin) {\n+                outpoints.insert(in.prevout);\n+            }\n+            const auto new_tx = MakeTransactionRef(tx_mut);\n+            // add newly constructed transaction to outpoints\n+            for (uint32_t i = 0; i < num_out; i++) {\n+                outpoints.emplace(new_tx->GetHash(), i);\n+            }\n+            return new_tx;\n+        }();\n+\n+        // trigger orphanage functions\n+        LIMITED_WHILE(fuzzed_data_provider.ConsumeBool(), 2 * DEFAULT_MAX_ORPHAN_TRANSACTIONS)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25447#discussion_r909952861",
      "id" : 909952861,
      "in_reply_to_id" : 909606440,
      "line" : 61,
      "node_id" : "PRRC_kwDOABII5842PMdd",
      "original_commit_id" : "dda28c8f42ecdecd666b326e9be86bf912bf7c3d",
      "original_line" : 61,
      "original_position" : 61,
      "original_start_line" : null,
      "path" : "src/test/fuzz/orphanage.cpp",
      "position" : 61,
      "pull_request_review_id" : 1023532507,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25447",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/909952861/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-29T15:04:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/909952861",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/24590067?v=4",
         "events_url" : "https://api.github.com/users/chinggg/events{/privacy}",
         "followers_url" : "https://api.github.com/users/chinggg/followers",
         "following_url" : "https://api.github.com/users/chinggg/following{/other_user}",
         "gists_url" : "https://api.github.com/users/chinggg/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/chinggg",
         "id" : 24590067,
         "login" : "chinggg",
         "node_id" : "MDQ6VXNlcjI0NTkwMDY3",
         "organizations_url" : "https://api.github.com/users/chinggg/orgs",
         "received_events_url" : "https://api.github.com/users/chinggg/received_events",
         "repos_url" : "https://api.github.com/users/chinggg/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/chinggg/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/chinggg/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/chinggg"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25447#discussion_r910026601"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25447"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/910026601"
         }
      },
      "author_association" : "MEMBER",
      "body" : "This is because the tx_pool_standard target does the accounting later on, depending on whether the tx was accepted or not https://github.com/bitcoin/bitcoin/blob/cc22bd7f708fc3f5e793bf0138cd340f71c0feb9/src/test/fuzz/tx_pool.cpp#L296\r\n\r\nHowever, your fuzz target does not have a concept of \"rejected\" transactions right now. Does it?\r\n\r\nIf you want to \"restore\" the outpoints, it might be better to not delete them in the first place.",
      "commit_id" : "dda28c8f42ecdecd666b326e9be86bf912bf7c3d",
      "created_at" : "2022-06-29T15:05:38Z",
      "diff_hunk" : "@@ -0,0 +1,97 @@\n+// Copyright (c) 2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <net_processing.h>\n+#include <primitives/transaction.h>\n+#include <test/fuzz/FuzzedDataProvider.h>\n+#include <test/fuzz/fuzz.h>\n+#include <test/fuzz/util.h>\n+#include <test/util/mining.h>\n+#include <test/util/script.h>\n+#include <test/util/setup_common.h>\n+#include <txorphanage.h>\n+#include <validation.h>\n+\n+\n+FUZZ_TARGET(orphanage)\n+{\n+    FuzzedDataProvider fuzzed_data_provider(buffer.data(), buffer.size());\n+\n+    TxOrphanage orphanage;\n+    std::set<uint256> orphan_work_set;\n+    std::set<COutPoint> outpoints;\n+    // initial outpoints used to construct transactions later\n+    for (uint8_t i = 0; i < 4; i++) {\n+        outpoints.emplace(uint256{i}, 0);\n+    }\n+\n+    LIMITED_WHILE(fuzzed_data_provider.ConsumeBool(), 2 * DEFAULT_MAX_ORPHAN_TRANSACTIONS)\n+    {\n+        // construct transaction\n+        const CTransactionRef tx = [&] {\n+            CMutableTransaction tx_mut;\n+            const auto num_in = fuzzed_data_provider.ConsumeIntegralInRange<uint32_t>(1, outpoints.size());\n+            const auto num_out = fuzzed_data_provider.ConsumeIntegralInRange<uint32_t>(1, outpoints.size());\n+            // pick unique outpoints from g_outpoints as input\n+            for (uint32_t i = 0; i < num_in; i++) {\n+                auto pop = outpoints.begin();\n+                std::advance(pop, fuzzed_data_provider.ConsumeIntegralInRange<uint32_t>(0, outpoints.size() - 1));\n+                const auto prevout = *pop;\n+                tx_mut.vin.emplace_back(prevout);\n+                outpoints.erase(pop);\n+            }\n+            // output amount will not affect txorphanage\n+            for (uint32_t i = 0; i < num_out; i++) {\n+                tx_mut.vout.emplace_back(CAmount{0}, P2WSH_OP_TRUE);\n+            }\n+            // restore previously removed outpoints",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25447#discussion_r910026601",
      "id" : 910026601,
      "in_reply_to_id" : 909604184,
      "line" : 48,
      "node_id" : "PRRC_kwDOABII5842Pedp",
      "original_commit_id" : "dda28c8f42ecdecd666b326e9be86bf912bf7c3d",
      "original_line" : 48,
      "original_position" : 48,
      "original_start_line" : null,
      "path" : "src/test/fuzz/orphanage.cpp",
      "position" : 48,
      "pull_request_review_id" : 1023551028,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25447",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/910026601/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-29T15:05:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/910026601",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25447#discussion_r910031358"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25447"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/910031358"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I think this might be better as std::vector, to get a more stable, predictable sorting",
      "commit_id" : "dda28c8f42ecdecd666b326e9be86bf912bf7c3d",
      "created_at" : "2022-06-29T15:06:19Z",
      "diff_hunk" : "@@ -0,0 +1,97 @@\n+// Copyright (c) 2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <net_processing.h>\n+#include <primitives/transaction.h>\n+#include <test/fuzz/FuzzedDataProvider.h>\n+#include <test/fuzz/fuzz.h>\n+#include <test/fuzz/util.h>\n+#include <test/util/mining.h>\n+#include <test/util/script.h>\n+#include <test/util/setup_common.h>\n+#include <txorphanage.h>\n+#include <validation.h>\n+\n+\n+FUZZ_TARGET(orphanage)\n+{\n+    FuzzedDataProvider fuzzed_data_provider(buffer.data(), buffer.size());\n+\n+    TxOrphanage orphanage;\n+    std::set<uint256> orphan_work_set;\n+    std::set<COutPoint> outpoints;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25447#discussion_r910031358",
      "id" : 910031358,
      "line" : 23,
      "node_id" : "PRRC_kwDOABII5842Pfn-",
      "original_commit_id" : "dda28c8f42ecdecd666b326e9be86bf912bf7c3d",
      "original_line" : 23,
      "original_position" : 23,
      "original_start_line" : null,
      "path" : "src/test/fuzz/orphanage.cpp",
      "position" : 23,
      "pull_request_review_id" : 1023552108,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25447",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/910031358/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-29T15:06:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/910031358",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25447#discussion_r910110819"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25447"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/910110819"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Thanks for your explanation. There is no \"rejected\" transaction right now. The outpoint is \"deleted\" from the set whenever it is picked as an input of the tx to ensure it will not be selected again. Once the construction of the tx is finished, all \"deleted\" transactions, which are exactly the inputs of the constructed tx, are \"recovered\". All the process happens within the construction of tx.\r\n\r\nSo it seems has nothing to do with the later accounting which is considered in `tx_pool_standard`.",
      "commit_id" : "dda28c8f42ecdecd666b326e9be86bf912bf7c3d",
      "created_at" : "2022-06-29T15:27:31Z",
      "diff_hunk" : "@@ -0,0 +1,97 @@\n+// Copyright (c) 2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <net_processing.h>\n+#include <primitives/transaction.h>\n+#include <test/fuzz/FuzzedDataProvider.h>\n+#include <test/fuzz/fuzz.h>\n+#include <test/fuzz/util.h>\n+#include <test/util/mining.h>\n+#include <test/util/script.h>\n+#include <test/util/setup_common.h>\n+#include <txorphanage.h>\n+#include <validation.h>\n+\n+\n+FUZZ_TARGET(orphanage)\n+{\n+    FuzzedDataProvider fuzzed_data_provider(buffer.data(), buffer.size());\n+\n+    TxOrphanage orphanage;\n+    std::set<uint256> orphan_work_set;\n+    std::set<COutPoint> outpoints;\n+    // initial outpoints used to construct transactions later\n+    for (uint8_t i = 0; i < 4; i++) {\n+        outpoints.emplace(uint256{i}, 0);\n+    }\n+\n+    LIMITED_WHILE(fuzzed_data_provider.ConsumeBool(), 2 * DEFAULT_MAX_ORPHAN_TRANSACTIONS)\n+    {\n+        // construct transaction\n+        const CTransactionRef tx = [&] {\n+            CMutableTransaction tx_mut;\n+            const auto num_in = fuzzed_data_provider.ConsumeIntegralInRange<uint32_t>(1, outpoints.size());\n+            const auto num_out = fuzzed_data_provider.ConsumeIntegralInRange<uint32_t>(1, outpoints.size());\n+            // pick unique outpoints from g_outpoints as input\n+            for (uint32_t i = 0; i < num_in; i++) {\n+                auto pop = outpoints.begin();\n+                std::advance(pop, fuzzed_data_provider.ConsumeIntegralInRange<uint32_t>(0, outpoints.size() - 1));\n+                const auto prevout = *pop;\n+                tx_mut.vin.emplace_back(prevout);\n+                outpoints.erase(pop);\n+            }\n+            // output amount will not affect txorphanage\n+            for (uint32_t i = 0; i < num_out; i++) {\n+                tx_mut.vout.emplace_back(CAmount{0}, P2WSH_OP_TRUE);\n+            }\n+            // restore previously removed outpoints",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25447#discussion_r910110819",
      "id" : 910110819,
      "in_reply_to_id" : 909604184,
      "line" : 48,
      "node_id" : "PRRC_kwDOABII5842PzBj",
      "original_commit_id" : "dda28c8f42ecdecd666b326e9be86bf912bf7c3d",
      "original_line" : 48,
      "original_position" : 48,
      "original_start_line" : null,
      "path" : "src/test/fuzz/orphanage.cpp",
      "position" : 48,
      "pull_request_review_id" : 1023586083,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25447",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/910110819/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-29T15:27:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/910110819",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/24590067?v=4",
         "events_url" : "https://api.github.com/users/chinggg/events{/privacy}",
         "followers_url" : "https://api.github.com/users/chinggg/followers",
         "following_url" : "https://api.github.com/users/chinggg/following{/other_user}",
         "gists_url" : "https://api.github.com/users/chinggg/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/chinggg",
         "id" : 24590067,
         "login" : "chinggg",
         "node_id" : "MDQ6VXNlcjI0NTkwMDY3",
         "organizations_url" : "https://api.github.com/users/chinggg/orgs",
         "received_events_url" : "https://api.github.com/users/chinggg/received_events",
         "repos_url" : "https://api.github.com/users/chinggg/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/chinggg/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/chinggg/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/chinggg"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25447#discussion_r910114026"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25447"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/910114026"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "`vector` is better if we only want to add outpoints to the end, but it will be slow if we want to randomly delete elements.",
      "commit_id" : "dda28c8f42ecdecd666b326e9be86bf912bf7c3d",
      "created_at" : "2022-06-29T15:29:59Z",
      "diff_hunk" : "@@ -0,0 +1,97 @@\n+// Copyright (c) 2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <net_processing.h>\n+#include <primitives/transaction.h>\n+#include <test/fuzz/FuzzedDataProvider.h>\n+#include <test/fuzz/fuzz.h>\n+#include <test/fuzz/util.h>\n+#include <test/util/mining.h>\n+#include <test/util/script.h>\n+#include <test/util/setup_common.h>\n+#include <txorphanage.h>\n+#include <validation.h>\n+\n+\n+FUZZ_TARGET(orphanage)\n+{\n+    FuzzedDataProvider fuzzed_data_provider(buffer.data(), buffer.size());\n+\n+    TxOrphanage orphanage;\n+    std::set<uint256> orphan_work_set;\n+    std::set<COutPoint> outpoints;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25447#discussion_r910114026",
      "id" : 910114026,
      "in_reply_to_id" : 910031358,
      "line" : 23,
      "node_id" : "PRRC_kwDOABII5842Pzzq",
      "original_commit_id" : "dda28c8f42ecdecd666b326e9be86bf912bf7c3d",
      "original_line" : 23,
      "original_position" : 23,
      "original_start_line" : null,
      "path" : "src/test/fuzz/orphanage.cpp",
      "position" : 23,
      "pull_request_review_id" : 1023590016,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25447",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/910114026/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-29T15:36:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/910114026",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/24590067?v=4",
         "events_url" : "https://api.github.com/users/chinggg/events{/privacy}",
         "followers_url" : "https://api.github.com/users/chinggg/followers",
         "following_url" : "https://api.github.com/users/chinggg/following{/other_user}",
         "gists_url" : "https://api.github.com/users/chinggg/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/chinggg",
         "id" : 24590067,
         "login" : "chinggg",
         "node_id" : "MDQ6VXNlcjI0NTkwMDY3",
         "organizations_url" : "https://api.github.com/users/chinggg/orgs",
         "received_events_url" : "https://api.github.com/users/chinggg/received_events",
         "repos_url" : "https://api.github.com/users/chinggg/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/chinggg/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/chinggg/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/chinggg"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25447#discussion_r910134864"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25447"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/910134864"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Ah, I see. I think you can also use the `std::swap(*pop, vec.back())` and then `vec.pop_back()` to achieve deletion in `O(1)`, which should be faster than deletion in `std::set`?",
      "commit_id" : "dda28c8f42ecdecd666b326e9be86bf912bf7c3d",
      "created_at" : "2022-06-29T15:46:46Z",
      "diff_hunk" : "@@ -0,0 +1,97 @@\n+// Copyright (c) 2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <net_processing.h>\n+#include <primitives/transaction.h>\n+#include <test/fuzz/FuzzedDataProvider.h>\n+#include <test/fuzz/fuzz.h>\n+#include <test/fuzz/util.h>\n+#include <test/util/mining.h>\n+#include <test/util/script.h>\n+#include <test/util/setup_common.h>\n+#include <txorphanage.h>\n+#include <validation.h>\n+\n+\n+FUZZ_TARGET(orphanage)\n+{\n+    FuzzedDataProvider fuzzed_data_provider(buffer.data(), buffer.size());\n+\n+    TxOrphanage orphanage;\n+    std::set<uint256> orphan_work_set;\n+    std::set<COutPoint> outpoints;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25447#discussion_r910134864",
      "id" : 910134864,
      "in_reply_to_id" : 910031358,
      "line" : 23,
      "node_id" : "PRRC_kwDOABII5842P45Q",
      "original_commit_id" : "dda28c8f42ecdecd666b326e9be86bf912bf7c3d",
      "original_line" : 23,
      "original_position" : 23,
      "original_start_line" : null,
      "path" : "src/test/fuzz/orphanage.cpp",
      "position" : 23,
      "pull_request_review_id" : 1023615525,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25447",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/910134864/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-29T15:46:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/910134864",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25447#discussion_r910302269"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25447"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/910302269"
         }
      },
      "author_association" : "MEMBER",
      "body" : "is this needed?",
      "commit_id" : "21e2d52f5b3cffa76ef57d83011fbd251abab03e",
      "created_at" : "2022-06-29T18:58:50Z",
      "diff_hunk" : "@@ -0,0 +1,127 @@\n+// Copyright (c) 2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <net_processing.h>\n+#include <test/fuzz/FuzzedDataProvider.h>\n+#include <test/fuzz/fuzz.h>\n+#include <test/fuzz/util.h>\n+#include <test/util/setup_common.h>\n+#include <txorphanage.h>\n+\n+namespace {\n+const TestingSetup* g_setup;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25447#discussion_r910302269",
      "id" : 910302269,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5842Qhw9",
      "original_commit_id" : "a5b4de3823fb13fe1e02a5d91d74361f35ce76e6",
      "original_line" : 13,
      "original_position" : 13,
      "original_start_line" : null,
      "path" : "src/test/fuzz/orphanage.cpp",
      "position" : null,
      "pull_request_review_id" : 1023851629,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25447",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/910302269/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-29T19:20:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/910302269",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25447#discussion_r910302459"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25447"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/910302459"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I think BasicTestingSetup should be enough",
      "commit_id" : "21e2d52f5b3cffa76ef57d83011fbd251abab03e",
      "created_at" : "2022-06-29T18:59:04Z",
      "diff_hunk" : "@@ -0,0 +1,127 @@\n+// Copyright (c) 2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <net_processing.h>\n+#include <test/fuzz/FuzzedDataProvider.h>\n+#include <test/fuzz/fuzz.h>\n+#include <test/fuzz/util.h>\n+#include <test/util/setup_common.h>\n+#include <txorphanage.h>\n+\n+namespace {\n+const TestingSetup* g_setup;\n+} // namespace\n+\n+void initialize_orphanage()\n+{\n+    static const auto testing_setup = MakeNoLogFileContext<const TestingSetup>();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25447#discussion_r910302459",
      "id" : 910302459,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5842Qhz7",
      "original_commit_id" : "a5b4de3823fb13fe1e02a5d91d74361f35ce76e6",
      "original_line" : 18,
      "original_position" : 18,
      "original_start_line" : null,
      "path" : "src/test/fuzz/orphanage.cpp",
      "position" : null,
      "pull_request_review_id" : 1023851629,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25447",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/910302459/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-29T19:20:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/910302459",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25447#discussion_r910302636"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25447"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/910302636"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Is this needed?",
      "commit_id" : "21e2d52f5b3cffa76ef57d83011fbd251abab03e",
      "created_at" : "2022-06-29T18:59:18Z",
      "diff_hunk" : "@@ -0,0 +1,127 @@\n+// Copyright (c) 2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <net_processing.h>\n+#include <test/fuzz/FuzzedDataProvider.h>\n+#include <test/fuzz/fuzz.h>\n+#include <test/fuzz/util.h>\n+#include <test/util/setup_common.h>\n+#include <txorphanage.h>\n+\n+namespace {\n+const TestingSetup* g_setup;\n+} // namespace\n+\n+void initialize_orphanage()\n+{\n+    static const auto testing_setup = MakeNoLogFileContext<const TestingSetup>();\n+    g_setup = testing_setup.get();\n+    SyncWithValidationInterfaceQueue();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25447#discussion_r910302636",
      "id" : 910302636,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5842Qh2s",
      "original_commit_id" : "a5b4de3823fb13fe1e02a5d91d74361f35ce76e6",
      "original_line" : 20,
      "original_position" : 20,
      "original_start_line" : null,
      "path" : "src/test/fuzz/orphanage.cpp",
      "position" : null,
      "pull_request_review_id" : 1023851629,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25447",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/910302636/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-29T19:20:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/910302636",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25447#discussion_r910318401"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25447"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/910318401"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I think you'll need to use SetMockTime throughout the test to expire txs",
      "commit_id" : "21e2d52f5b3cffa76ef57d83011fbd251abab03e",
      "created_at" : "2022-06-29T19:18:49Z",
      "diff_hunk" : "@@ -0,0 +1,127 @@\n+// Copyright (c) 2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <net_processing.h>\n+#include <test/fuzz/FuzzedDataProvider.h>\n+#include <test/fuzz/fuzz.h>\n+#include <test/fuzz/util.h>\n+#include <test/util/setup_common.h>\n+#include <txorphanage.h>\n+\n+namespace {\n+const TestingSetup* g_setup;\n+} // namespace\n+\n+void initialize_orphanage()\n+{\n+    static const auto testing_setup = MakeNoLogFileContext<const TestingSetup>();\n+    g_setup = testing_setup.get();\n+    SyncWithValidationInterfaceQueue();\n+}\n+\n+FUZZ_TARGET_INIT(orphanage, initialize_orphanage)\n+{\n+    FuzzedDataProvider fuzzed_data_provider(buffer.data(), buffer.size());\n+\n+    TxOrphanage orphanage;\n+    std::set<uint256> orphan_work_set;\n+    std::vector<COutPoint> outpoints;\n+    // initial outpoints used to construct transactions later\n+    for (uint8_t i = 0; i < 4; i++) {\n+        outpoints.emplace_back(uint256{i}, 0);\n+    }\n+\n+    LIMITED_WHILE(fuzzed_data_provider.ConsumeBool(), 10 * DEFAULT_MAX_ORPHAN_TRANSACTIONS)\n+    {\n+        // construct transaction\n+        const CTransactionRef tx = [&] {\n+            CMutableTransaction tx_mut;\n+            const auto num_in = fuzzed_data_provider.ConsumeIntegralInRange<uint32_t>(1, outpoints.size());\n+            const auto num_out = fuzzed_data_provider.ConsumeIntegralInRange<uint32_t>(1, outpoints.size());\n+            // pick unique outpoints from outpoints as input\n+            for (uint32_t i = 0; i < num_in; i++) {\n+                auto& prevout = PickValue(fuzzed_data_provider, outpoints);\n+                tx_mut.vin.emplace_back(prevout);\n+                // pop the picked outpoint to ensure it will not be chosen again\n+                std::swap(prevout, outpoints.back());\n+                outpoints.pop_back();\n+            }\n+            // output amount will not affect txorphanage\n+            for (uint32_t i = 0; i < num_out; i++) {\n+                tx_mut.vout.emplace_back(CAmount{0}, CScript{});\n+            }\n+            // restore previously poped outpoints\n+            for (auto& in : tx_mut.vin) {\n+                outpoints.push_back(in.prevout);\n+            }\n+            const auto new_tx = MakeTransactionRef(tx_mut);\n+            // add newly constructed transaction to outpoints\n+            for (uint32_t i = 0; i < num_out; i++) {\n+                outpoints.emplace_back(new_tx->GetHash(), i);\n+            }\n+            return new_tx;\n+        }();\n+\n+        // trigger orphanage functions\n+        LIMITED_WHILE(fuzzed_data_provider.ConsumeBool(), 10 * DEFAULT_MAX_ORPHAN_TRANSACTIONS)\n+        {\n+            NodeId peer_id = fuzzed_data_provider.ConsumeIntegral<NodeId>();\n+\n+            CallOneOf(\n+                fuzzed_data_provider,\n+                [&] {\n+                    LOCK(g_cs_orphans);\n+                    orphanage.AddChildrenToWorkSet(*tx, orphan_work_set);\n+                },\n+                [&] {\n+                    bool have_tx = orphanage.HaveTx(GenTxid::Txid(tx->GetHash())) || orphanage.HaveTx(GenTxid::Wtxid(tx->GetHash()));\n+                    {\n+                        LOCK(g_cs_orphans);\n+                        bool get_tx = orphanage.GetTx(tx->GetHash()).first != nullptr;\n+                        Assert(have_tx == get_tx);\n+                    }\n+                },\n+                [&] {\n+                    bool have_tx = orphanage.HaveTx(GenTxid::Txid(tx->GetHash())) || orphanage.HaveTx(GenTxid::Wtxid(tx->GetHash()));\n+                    // AddTx should return false if tx is too big or already have it\n+                    {\n+                        LOCK(g_cs_orphans);\n+                        Assert(have_tx != orphanage.AddTx(tx, peer_id));\n+                    }\n+                    have_tx = orphanage.HaveTx(GenTxid::Txid(tx->GetHash())) || orphanage.HaveTx(GenTxid::Wtxid(tx->GetHash()));\n+                    // tx should already be added since it will not be too big in the test\n+                    // have_tx should be true and AddTx should fail\n+                    {\n+                        LOCK(g_cs_orphans);\n+                        Assert(have_tx && !orphanage.AddTx(tx, peer_id));\n+                    }\n+                },\n+                [&] {\n+                    bool have_tx = orphanage.HaveTx(GenTxid::Txid(tx->GetHash())) || orphanage.HaveTx(GenTxid::Wtxid(tx->GetHash()));\n+                    // EraseTx should return 0 if m_orphans doesn't have the tx\n+                    {\n+                        LOCK(g_cs_orphans);\n+                        Assert(have_tx == orphanage.EraseTx(tx->GetHash()));\n+                    }\n+                    have_tx = orphanage.HaveTx(GenTxid::Txid(tx->GetHash())) || orphanage.HaveTx(GenTxid::Wtxid(tx->GetHash()));\n+                    // have_tx should be false and EraseTx should fail\n+                    {\n+                        LOCK(g_cs_orphans);\n+                        Assert(!have_tx && !orphanage.EraseTx(tx->GetHash()));\n+                    }\n+                },\n+                [&] {\n+                    LOCK(g_cs_orphans);\n+                    orphanage.EraseForPeer(peer_id);\n+                },\n+                [&] {\n+                    auto size_before = orphanage.Size();\n+                    auto limit = fuzzed_data_provider.ConsumeIntegral<unsigned int>();\n+                    auto n_evicted = WITH_LOCK(g_cs_orphans, return orphanage.LimitOrphans(limit));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25447#discussion_r910318401",
      "id" : 910318401,
      "line" : 120,
      "node_id" : "PRRC_kwDOABII5842QltB",
      "original_commit_id" : "a5b4de3823fb13fe1e02a5d91d74361f35ce76e6",
      "original_line" : 120,
      "original_position" : 121,
      "original_start_line" : null,
      "path" : "src/test/fuzz/orphanage.cpp",
      "position" : 120,
      "pull_request_review_id" : 1023851629,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25447",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/910318401/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-29T19:20:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/910318401",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25447#discussion_r910319327"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25447"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/910319327"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Also there is a non-deterministic FastRandomContext in this function, but I guess it won't be possible to fix that without touching non-fuzz code.",
      "commit_id" : "21e2d52f5b3cffa76ef57d83011fbd251abab03e",
      "created_at" : "2022-06-29T19:20:03Z",
      "diff_hunk" : "@@ -0,0 +1,127 @@\n+// Copyright (c) 2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <net_processing.h>\n+#include <test/fuzz/FuzzedDataProvider.h>\n+#include <test/fuzz/fuzz.h>\n+#include <test/fuzz/util.h>\n+#include <test/util/setup_common.h>\n+#include <txorphanage.h>\n+\n+namespace {\n+const TestingSetup* g_setup;\n+} // namespace\n+\n+void initialize_orphanage()\n+{\n+    static const auto testing_setup = MakeNoLogFileContext<const TestingSetup>();\n+    g_setup = testing_setup.get();\n+    SyncWithValidationInterfaceQueue();\n+}\n+\n+FUZZ_TARGET_INIT(orphanage, initialize_orphanage)\n+{\n+    FuzzedDataProvider fuzzed_data_provider(buffer.data(), buffer.size());\n+\n+    TxOrphanage orphanage;\n+    std::set<uint256> orphan_work_set;\n+    std::vector<COutPoint> outpoints;\n+    // initial outpoints used to construct transactions later\n+    for (uint8_t i = 0; i < 4; i++) {\n+        outpoints.emplace_back(uint256{i}, 0);\n+    }\n+\n+    LIMITED_WHILE(fuzzed_data_provider.ConsumeBool(), 10 * DEFAULT_MAX_ORPHAN_TRANSACTIONS)\n+    {\n+        // construct transaction\n+        const CTransactionRef tx = [&] {\n+            CMutableTransaction tx_mut;\n+            const auto num_in = fuzzed_data_provider.ConsumeIntegralInRange<uint32_t>(1, outpoints.size());\n+            const auto num_out = fuzzed_data_provider.ConsumeIntegralInRange<uint32_t>(1, outpoints.size());\n+            // pick unique outpoints from outpoints as input\n+            for (uint32_t i = 0; i < num_in; i++) {\n+                auto& prevout = PickValue(fuzzed_data_provider, outpoints);\n+                tx_mut.vin.emplace_back(prevout);\n+                // pop the picked outpoint to ensure it will not be chosen again\n+                std::swap(prevout, outpoints.back());\n+                outpoints.pop_back();\n+            }\n+            // output amount will not affect txorphanage\n+            for (uint32_t i = 0; i < num_out; i++) {\n+                tx_mut.vout.emplace_back(CAmount{0}, CScript{});\n+            }\n+            // restore previously poped outpoints\n+            for (auto& in : tx_mut.vin) {\n+                outpoints.push_back(in.prevout);\n+            }\n+            const auto new_tx = MakeTransactionRef(tx_mut);\n+            // add newly constructed transaction to outpoints\n+            for (uint32_t i = 0; i < num_out; i++) {\n+                outpoints.emplace_back(new_tx->GetHash(), i);\n+            }\n+            return new_tx;\n+        }();\n+\n+        // trigger orphanage functions\n+        LIMITED_WHILE(fuzzed_data_provider.ConsumeBool(), 10 * DEFAULT_MAX_ORPHAN_TRANSACTIONS)\n+        {\n+            NodeId peer_id = fuzzed_data_provider.ConsumeIntegral<NodeId>();\n+\n+            CallOneOf(\n+                fuzzed_data_provider,\n+                [&] {\n+                    LOCK(g_cs_orphans);\n+                    orphanage.AddChildrenToWorkSet(*tx, orphan_work_set);\n+                },\n+                [&] {\n+                    bool have_tx = orphanage.HaveTx(GenTxid::Txid(tx->GetHash())) || orphanage.HaveTx(GenTxid::Wtxid(tx->GetHash()));\n+                    {\n+                        LOCK(g_cs_orphans);\n+                        bool get_tx = orphanage.GetTx(tx->GetHash()).first != nullptr;\n+                        Assert(have_tx == get_tx);\n+                    }\n+                },\n+                [&] {\n+                    bool have_tx = orphanage.HaveTx(GenTxid::Txid(tx->GetHash())) || orphanage.HaveTx(GenTxid::Wtxid(tx->GetHash()));\n+                    // AddTx should return false if tx is too big or already have it\n+                    {\n+                        LOCK(g_cs_orphans);\n+                        Assert(have_tx != orphanage.AddTx(tx, peer_id));\n+                    }\n+                    have_tx = orphanage.HaveTx(GenTxid::Txid(tx->GetHash())) || orphanage.HaveTx(GenTxid::Wtxid(tx->GetHash()));\n+                    // tx should already be added since it will not be too big in the test\n+                    // have_tx should be true and AddTx should fail\n+                    {\n+                        LOCK(g_cs_orphans);\n+                        Assert(have_tx && !orphanage.AddTx(tx, peer_id));\n+                    }\n+                },\n+                [&] {\n+                    bool have_tx = orphanage.HaveTx(GenTxid::Txid(tx->GetHash())) || orphanage.HaveTx(GenTxid::Wtxid(tx->GetHash()));\n+                    // EraseTx should return 0 if m_orphans doesn't have the tx\n+                    {\n+                        LOCK(g_cs_orphans);\n+                        Assert(have_tx == orphanage.EraseTx(tx->GetHash()));\n+                    }\n+                    have_tx = orphanage.HaveTx(GenTxid::Txid(tx->GetHash())) || orphanage.HaveTx(GenTxid::Wtxid(tx->GetHash()));\n+                    // have_tx should be false and EraseTx should fail\n+                    {\n+                        LOCK(g_cs_orphans);\n+                        Assert(!have_tx && !orphanage.EraseTx(tx->GetHash()));\n+                    }\n+                },\n+                [&] {\n+                    LOCK(g_cs_orphans);\n+                    orphanage.EraseForPeer(peer_id);\n+                },\n+                [&] {\n+                    auto size_before = orphanage.Size();\n+                    auto limit = fuzzed_data_provider.ConsumeIntegral<unsigned int>();\n+                    auto n_evicted = WITH_LOCK(g_cs_orphans, return orphanage.LimitOrphans(limit));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25447#discussion_r910319327",
      "id" : 910319327,
      "in_reply_to_id" : 910318401,
      "line" : 120,
      "node_id" : "PRRC_kwDOABII5842Ql7f",
      "original_commit_id" : "a5b4de3823fb13fe1e02a5d91d74361f35ce76e6",
      "original_line" : 120,
      "original_position" : 121,
      "original_start_line" : null,
      "path" : "src/test/fuzz/orphanage.cpp",
      "position" : 120,
      "pull_request_review_id" : 1023851629,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25447",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/910319327/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-29T19:20:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/910319327",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25447#discussion_r910322832"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25447"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/910322832"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I am thinking that it might  be interesting to fuzz duplicate inputs?\r\n\r\nMaybe a bool (determined at the beginning of the fuzz input) can indicate whether this run may have duplicate inputs in txs or not?",
      "commit_id" : "21e2d52f5b3cffa76ef57d83011fbd251abab03e",
      "created_at" : "2022-06-29T19:24:56Z",
      "diff_hunk" : "@@ -0,0 +1,127 @@\n+// Copyright (c) 2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <net_processing.h>\n+#include <test/fuzz/FuzzedDataProvider.h>\n+#include <test/fuzz/fuzz.h>\n+#include <test/fuzz/util.h>\n+#include <test/util/setup_common.h>\n+#include <txorphanage.h>\n+\n+namespace {\n+const TestingSetup* g_setup;\n+} // namespace\n+\n+void initialize_orphanage()\n+{\n+    static const auto testing_setup = MakeNoLogFileContext<const TestingSetup>();\n+    g_setup = testing_setup.get();\n+    SyncWithValidationInterfaceQueue();\n+}\n+\n+FUZZ_TARGET_INIT(orphanage, initialize_orphanage)\n+{\n+    FuzzedDataProvider fuzzed_data_provider(buffer.data(), buffer.size());\n+\n+    TxOrphanage orphanage;\n+    std::set<uint256> orphan_work_set;\n+    std::vector<COutPoint> outpoints;\n+    // initial outpoints used to construct transactions later\n+    for (uint8_t i = 0; i < 4; i++) {\n+        outpoints.emplace_back(uint256{i}, 0);\n+    }\n+\n+    LIMITED_WHILE(fuzzed_data_provider.ConsumeBool(), 10 * DEFAULT_MAX_ORPHAN_TRANSACTIONS)\n+    {\n+        // construct transaction\n+        const CTransactionRef tx = [&] {\n+            CMutableTransaction tx_mut;\n+            const auto num_in = fuzzed_data_provider.ConsumeIntegralInRange<uint32_t>(1, outpoints.size());\n+            const auto num_out = fuzzed_data_provider.ConsumeIntegralInRange<uint32_t>(1, outpoints.size());\n+            // pick unique outpoints from outpoints as input\n+            for (uint32_t i = 0; i < num_in; i++) {\n+                auto& prevout = PickValue(fuzzed_data_provider, outpoints);\n+                tx_mut.vin.emplace_back(prevout);\n+                // pop the picked outpoint to ensure it will not be chosen again",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25447#discussion_r910322832",
      "id" : 910322832,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5842QmyQ",
      "original_commit_id" : "a5b4de3823fb13fe1e02a5d91d74361f35ce76e6",
      "original_line" : 46,
      "original_position" : 46,
      "original_start_line" : null,
      "path" : "src/test/fuzz/orphanage.cpp",
      "position" : null,
      "pull_request_review_id" : 1023882281,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25447",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/910322832/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-29T19:24:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/910322832",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25447#discussion_r913907478"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25447"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/913907478"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I find most targets set mocktime at the beginning so I put it here. How can we achieve better coverage by controlling mocktime/expiry?",
      "commit_id" : "21e2d52f5b3cffa76ef57d83011fbd251abab03e",
      "created_at" : "2022-07-05T15:06:21Z",
      "diff_hunk" : "@@ -0,0 +1,126 @@\n+// Copyright (c) 2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <net_processing.h>\n+#include <test/fuzz/FuzzedDataProvider.h>\n+#include <test/fuzz/fuzz.h>\n+#include <test/fuzz/util.h>\n+#include <test/util/setup_common.h>\n+#include <txorphanage.h>\n+\n+void initialize_orphanage()\n+{\n+    static const auto testing_setup = MakeNoLogFileContext();\n+}\n+\n+FUZZ_TARGET_INIT(orphanage, initialize_orphanage)\n+{\n+    FuzzedDataProvider fuzzed_data_provider(buffer.data(), buffer.size());\n+    SetMockTime(ConsumeTime(fuzzed_data_provider));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25447#discussion_r913907478",
      "id" : 913907478,
      "line" : 20,
      "node_id" : "PRRC_kwDOABII5842eR8W",
      "original_commit_id" : "21e2d52f5b3cffa76ef57d83011fbd251abab03e",
      "original_line" : 20,
      "original_position" : 20,
      "original_start_line" : null,
      "path" : "src/test/fuzz/orphanage.cpp",
      "position" : 20,
      "pull_request_review_id" : 1028795855,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25447",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/913907478/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-07-05T15:06:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/913907478",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/24590067?v=4",
         "events_url" : "https://api.github.com/users/chinggg/events{/privacy}",
         "followers_url" : "https://api.github.com/users/chinggg/followers",
         "following_url" : "https://api.github.com/users/chinggg/following{/other_user}",
         "gists_url" : "https://api.github.com/users/chinggg/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/chinggg",
         "id" : 24590067,
         "login" : "chinggg",
         "node_id" : "MDQ6VXNlcjI0NTkwMDY3",
         "organizations_url" : "https://api.github.com/users/chinggg/orgs",
         "received_events_url" : "https://api.github.com/users/chinggg/received_events",
         "repos_url" : "https://api.github.com/users/chinggg/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/chinggg/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/chinggg/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/chinggg"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25447#discussion_r913911884"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25447"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/913911884"
         }
      },
      "author_association" : "MEMBER",
      "body" : "This will just set it once and keep it constant. To change it you'd have to set it in the loop below",
      "commit_id" : "21e2d52f5b3cffa76ef57d83011fbd251abab03e",
      "created_at" : "2022-07-05T15:10:46Z",
      "diff_hunk" : "@@ -0,0 +1,126 @@\n+// Copyright (c) 2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <net_processing.h>\n+#include <test/fuzz/FuzzedDataProvider.h>\n+#include <test/fuzz/fuzz.h>\n+#include <test/fuzz/util.h>\n+#include <test/util/setup_common.h>\n+#include <txorphanage.h>\n+\n+void initialize_orphanage()\n+{\n+    static const auto testing_setup = MakeNoLogFileContext();\n+}\n+\n+FUZZ_TARGET_INIT(orphanage, initialize_orphanage)\n+{\n+    FuzzedDataProvider fuzzed_data_provider(buffer.data(), buffer.size());\n+    SetMockTime(ConsumeTime(fuzzed_data_provider));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25447#discussion_r913911884",
      "id" : 913911884,
      "in_reply_to_id" : 913907478,
      "line" : 20,
      "node_id" : "PRRC_kwDOABII5842eTBM",
      "original_commit_id" : "21e2d52f5b3cffa76ef57d83011fbd251abab03e",
      "original_line" : 20,
      "original_position" : 20,
      "original_start_line" : null,
      "path" : "src/test/fuzz/orphanage.cpp",
      "position" : 20,
      "pull_request_review_id" : 1028802482,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25447",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/913911884/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-07-05T15:10:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/913911884",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25447#discussion_r913929404"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25447"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/913929404"
         }
      },
      "author_association" : "MEMBER",
      "body" : "```suggestion\r\nFUZZ_TARGET_INIT(txorphanage, initialize_orphanage)\r\n```\r\n\r\nMaybe rename the file and target to `txorphanage`?",
      "commit_id" : "21e2d52f5b3cffa76ef57d83011fbd251abab03e",
      "created_at" : "2022-07-05T15:27:49Z",
      "diff_hunk" : "@@ -0,0 +1,126 @@\n+// Copyright (c) 2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <net_processing.h>\n+#include <test/fuzz/FuzzedDataProvider.h>\n+#include <test/fuzz/fuzz.h>\n+#include <test/fuzz/util.h>\n+#include <test/util/setup_common.h>\n+#include <txorphanage.h>\n+\n+void initialize_orphanage()\n+{\n+    static const auto testing_setup = MakeNoLogFileContext();\n+}\n+\n+FUZZ_TARGET_INIT(orphanage, initialize_orphanage)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25447#discussion_r913929404",
      "id" : 913929404,
      "line" : 17,
      "node_id" : "PRRC_kwDOABII5842eXS8",
      "original_commit_id" : "21e2d52f5b3cffa76ef57d83011fbd251abab03e",
      "original_line" : 17,
      "original_position" : 17,
      "original_start_line" : null,
      "path" : "src/test/fuzz/orphanage.cpp",
      "position" : 17,
      "pull_request_review_id" : 1028827633,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25447",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/913929404/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-07-05T15:27:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/913929404",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   }
]
